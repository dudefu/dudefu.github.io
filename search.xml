<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[CDH5.16.1é›†ç¾¤ä¼ä¸šçœŸæ­£ç¦»çº¿éƒ¨ç½²]]></title>
      <url>/CDH5-16-1%E9%9B%86%E7%BE%A4%E4%BC%81%E4%B8%9A%E7%9C%9F%E6%AD%A3%E7%A6%BB%E7%BA%BF%E9%83%A8%E7%BD%B2.html</url>
      <content type="html"><![CDATA[<p>è§†é¢‘:<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2NTIxNjcyMTk=" title="https://www.bilibili.com/video/av52167219">https://www.bilibili.com/video/av52167219<i class="fa fa-external-link"></i></span><br>PS:å»ºè®®å…ˆçœ‹è¯¾ç¨‹è§†é¢‘1-2ç¯‡ï¼Œå†æ ¹æ®è§†é¢‘æˆ–æ–‡æ¡£éƒ¨ç½²ï¼Œ<br>å¦‚æœ‰é—®é¢˜ï¼ŒåŠæ—¶ä¸@è‹¥æ³½æ•°æ®Jå“¥è”ç³»ã€‚</p>
<hr>
<h2 id="ä¸€-å‡†å¤‡å·¥ä½œ"><a href="#ä¸€-å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€.å‡†å¤‡å·¥ä½œ"></a>ä¸€.å‡†å¤‡å·¥ä½œ</h2><h4 id="1-ç¦»çº¿éƒ¨ç½²ä¸»è¦åˆ†ä¸ºä¸‰å—"><a href="#1-ç¦»çº¿éƒ¨ç½²ä¸»è¦åˆ†ä¸ºä¸‰å—" class="headerlink" title="1.ç¦»çº¿éƒ¨ç½²ä¸»è¦åˆ†ä¸ºä¸‰å—:"></a>1.ç¦»çº¿éƒ¨ç½²ä¸»è¦åˆ†ä¸ºä¸‰å—:</h4><p>a.MySQLç¦»çº¿éƒ¨ç½²<br>b.CMç¦»çº¿éƒ¨ç½²<br>c.Parcelæ–‡ä»¶ç¦»çº¿æºéƒ¨ç½²</p>
<a id="more"></a>
<h4 id="2-è§„åˆ’"><a href="#2-è§„åˆ’" class="headerlink" title="2.è§„åˆ’:"></a>2.è§„åˆ’:</h4><table>
<thead>
<tr>
<th style="text-align:left">èŠ‚ç‚¹</th>
<th style="text-align:left">MySQLéƒ¨ç½²ç»„ä»¶</th>
<th style="text-align:left">Parcelæ–‡ä»¶ç¦»çº¿æº</th>
<th style="text-align:left">CMæœåŠ¡è¿›ç¨‹</th>
<th style="text-align:left">å¤§æ•°æ®ç»„ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">hadoop001</td>
<td style="text-align:left">MySQL</td>
<td style="text-align:left">Parcel</td>
<td style="text-align:left">Activity Monitor</td>
<td style="text-align:left">NN RM DN NM</td>
</tr>
<tr>
<td style="text-align:left">hadoop002</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">Alert Publisher Event Server</td>
<td style="text-align:left">DN NM</td>
</tr>
<tr>
<td style="text-align:left">hadoop003</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">Host Monitor Service Monitor</td>
<td style="text-align:left">DN NM</td>
</tr>
</tbody>
</table>
<h3 id="3-ä¸‹è½½æº"><a href="#3-ä¸‹è½½æº" class="headerlink" title="3.ä¸‹è½½æº:"></a>3.ä¸‹è½½æº:</h3><ul>
<li>CM<br>cloudera-manager-centos7-cm5.16.1_x86_64.tar.gz</li>
<li>Parcel<br>CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel<br>CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel.sha1<br>manifest.json</li>
<li>JDK<br><span class="exturl" data-url="aHR0cHM6Ly93d3cub3JhY2xlLmNvbS90ZWNobmV0d29yay9qYXZhL2phdmFzZS9kb3dubG9hZHMvamF2YS1hcmNoaXZlLWphdmFzZTgtMjE3NzY0OC5odG1s" title="https://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.html">https://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.html<i class="fa fa-external-link"></i></span><br>ä¸‹è½½jdk-8u202-linux-x64.tar.gz</li>
<li>MySQL<br><span class="exturl" data-url="aHR0cHM6Ly9kZXYubXlzcWwuY29tL2Rvd25sb2Fkcy9teXNxbC81LjcuaHRtbCNkb3dubG9hZHM=" title="https://dev.mysql.com/downloads/mysql/5.7.html#downloads">https://dev.mysql.com/downloads/mysql/5.7.html#downloads<i class="fa fa-external-link"></i></span><br>ä¸‹è½½mysql-5.7.26-el7-x86_64.tar.gz</li>
<li>MySQL jdbc jar<br>mysql-connector-java-5.1.47.jar<br>ä¸‹è½½å®Œæˆåè¦é‡å‘½åå»æ‰ç‰ˆæœ¬å·ï¼Œ<br>mv mysql-connector-java-5.1.47.jar mysql-connector-java.jar</li>
</ul>
<hr>
<h3 id="å‡†å¤‡å¥½ç™¾åº¦äº‘-ä¸‹è½½å®‰è£…åŒ…"><a href="#å‡†å¤‡å¥½ç™¾åº¦äº‘-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="å‡†å¤‡å¥½ç™¾åº¦äº‘,ä¸‹è½½å®‰è£…åŒ…:"></a>å‡†å¤‡å¥½ç™¾åº¦äº‘,ä¸‹è½½å®‰è£…åŒ…:</h3><p>é“¾æ¥:<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMTBzLU5hRkxmenRLdVdJbVpUaUJNakE=" title="https://pan.baidu.com/s/10s-NaFLfztKuWImZTiBMjA">https://pan.baidu.com/s/10s-NaFLfztKuWImZTiBMjA<i class="fa fa-external-link"></i></span>  å¯†ç :viqp</p>
<h2 id="äºŒ-é›†ç¾¤èŠ‚ç‚¹åˆå§‹åŒ–"><a href="#äºŒ-é›†ç¾¤èŠ‚ç‚¹åˆå§‹åŒ–" class="headerlink" title="äºŒ.é›†ç¾¤èŠ‚ç‚¹åˆå§‹åŒ–"></a>äºŒ.é›†ç¾¤èŠ‚ç‚¹åˆå§‹åŒ–</h2><h3 id="1-é˜¿é‡Œäº‘ä¸Šæµ·åŒºè´­ä¹°3å°ï¼ŒæŒ‰é‡ä»˜è´¹è™šæ‹Ÿæœº"><a href="#1-é˜¿é‡Œäº‘ä¸Šæµ·åŒºè´­ä¹°3å°ï¼ŒæŒ‰é‡ä»˜è´¹è™šæ‹Ÿæœº" class="headerlink" title="1.é˜¿é‡Œäº‘ä¸Šæµ·åŒºè´­ä¹°3å°ï¼ŒæŒ‰é‡ä»˜è´¹è™šæ‹Ÿæœº"></a>1.é˜¿é‡Œäº‘ä¸Šæµ·åŒºè´­ä¹°3å°ï¼ŒæŒ‰é‡ä»˜è´¹è™šæ‹Ÿæœº</h3><p>CentOS7.2æ“ä½œç³»ç»Ÿï¼Œ2æ ¸8Gæœ€ä½é…ç½®</p>
<h3 id="2-å½“å‰ç¬”è®°æœ¬æˆ–å°å¼æœºé…ç½®hostsæ–‡ä»¶"><a href="#2-å½“å‰ç¬”è®°æœ¬æˆ–å°å¼æœºé…ç½®hostsæ–‡ä»¶" class="headerlink" title="2.å½“å‰ç¬”è®°æœ¬æˆ–å°å¼æœºé…ç½®hostsæ–‡ä»¶"></a>2.å½“å‰ç¬”è®°æœ¬æˆ–å°å¼æœºé…ç½®hostsæ–‡ä»¶</h3><ul>
<li>MAC: /etc/hosts</li>
<li>Window: C:\windows\system32\drivers\etc\hosts</li>
</ul>
<p>å…¬ç½‘åœ°å€:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1106.15.234.222 hadoop001  </span><br><span class="line">2106.15.235.200 hadoop002  </span><br><span class="line">3106.15.234.239 hadoop003</span><br></pre></td></tr></table></figure>
<h3 id="3-è®¾ç½®æ‰€æœ‰èŠ‚ç‚¹çš„hostsæ–‡ä»¶"><a href="#3-è®¾ç½®æ‰€æœ‰èŠ‚ç‚¹çš„hostsæ–‡ä»¶" class="headerlink" title="3.è®¾ç½®æ‰€æœ‰èŠ‚ç‚¹çš„hostsæ–‡ä»¶"></a>3.è®¾ç½®æ‰€æœ‰èŠ‚ç‚¹çš„hostsæ–‡ä»¶</h3><p>ç§æœ‰åœ°å€ã€å†…ç½‘åœ°å€:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1echo &quot;172.19.7.96 hadoop001&quot;&gt;&gt; /etc/hosts</span><br><span class="line">2echo &quot;172.19.7.98 hadoop002&quot;&gt;&gt; /etc/hosts</span><br><span class="line">3echo &quot;172.19.7.97 hadoop003&quot;&gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure>
<h3 id="4-å…³é—­æ‰€æœ‰èŠ‚ç‚¹çš„é˜²ç«å¢™åŠæ¸…ç©ºè§„åˆ™"><a href="#4-å…³é—­æ‰€æœ‰èŠ‚ç‚¹çš„é˜²ç«å¢™åŠæ¸…ç©ºè§„åˆ™" class="headerlink" title="4.å…³é—­æ‰€æœ‰èŠ‚ç‚¹çš„é˜²ç«å¢™åŠæ¸…ç©ºè§„åˆ™"></a>4.å…³é—­æ‰€æœ‰èŠ‚ç‚¹çš„é˜²ç«å¢™åŠæ¸…ç©ºè§„åˆ™</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1systemctl stop firewalld </span><br><span class="line">2systemctl disable firewalld</span><br><span class="line">3iptables -F</span><br></pre></td></tr></table></figure>
<h3 id="5-å…³é—­æ‰€æœ‰èŠ‚ç‚¹çš„selinux"><a href="#5-å…³é—­æ‰€æœ‰èŠ‚ç‚¹çš„selinux" class="headerlink" title="5.å…³é—­æ‰€æœ‰èŠ‚ç‚¹çš„selinux"></a>5.å…³é—­æ‰€æœ‰èŠ‚ç‚¹çš„selinux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1vi /etc/selinux/config</span><br><span class="line">2å°†SELINUX=enforcingæ”¹ä¸ºSELINUX=disabled </span><br><span class="line">3è®¾ç½®åéœ€è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure>
<h3 id="6-è®¾ç½®æ‰€æœ‰èŠ‚ç‚¹çš„æ—¶åŒºä¸€è‡´åŠæ—¶é’ŸåŒæ­¥"><a href="#6-è®¾ç½®æ‰€æœ‰èŠ‚ç‚¹çš„æ—¶åŒºä¸€è‡´åŠæ—¶é’ŸåŒæ­¥" class="headerlink" title="6.è®¾ç½®æ‰€æœ‰èŠ‚ç‚¹çš„æ—¶åŒºä¸€è‡´åŠæ—¶é’ŸåŒæ­¥"></a>6.è®¾ç½®æ‰€æœ‰èŠ‚ç‚¹çš„æ—¶åŒºä¸€è‡´åŠæ—¶é’ŸåŒæ­¥</h3><p>6.1.æ—¶åŒº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> 1[root@hadoop001 ~]# date</span><br><span class="line"> 2Sat May 11 10:07:53 CST 2019</span><br><span class="line"> 3[root@hadoop001 ~]# timedatectl</span><br><span class="line"> 4      Local time: Sat 2019-05-11 10:10:31 CST</span><br><span class="line"> 5  Universal time: Sat 2019-05-11 02:10:31 UTC</span><br><span class="line"> 6        RTC time: Sat 2019-05-11 10:10:29</span><br><span class="line"> 7       Time zone: Asia/Shanghai (CST, +0800)</span><br><span class="line"> 8     NTP enabled: yes</span><br><span class="line"> 9NTP synchronized: yes</span><br><span class="line">10 RTC in local TZ: yes</span><br><span class="line">11      DST active: n/a</span><br></pre></td></tr></table></figure>
<h5 id="æŸ¥çœ‹å‘½ä»¤å¸®åŠ©ï¼Œå­¦ä¹ è‡³å…³é‡è¦ï¼Œæ— éœ€ç™¾åº¦ï¼Œå¤ªğŸ‘"><a href="#æŸ¥çœ‹å‘½ä»¤å¸®åŠ©ï¼Œå­¦ä¹ è‡³å…³é‡è¦ï¼Œæ— éœ€ç™¾åº¦ï¼Œå¤ªğŸ‘" class="headerlink" title="æŸ¥çœ‹å‘½ä»¤å¸®åŠ©ï¼Œå­¦ä¹ è‡³å…³é‡è¦ï¼Œæ— éœ€ç™¾åº¦ï¼Œå¤ªğŸ‘"></a>æŸ¥çœ‹å‘½ä»¤å¸®åŠ©ï¼Œå­¦ä¹ è‡³å…³é‡è¦ï¼Œæ— éœ€ç™¾åº¦ï¼Œå¤ªğŸ‘</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> 1[root@hadoop001 ~]# timedatectl --help</span><br><span class="line"> 2timedatectl [OPTIONS...] COMMAND ...</span><br><span class="line"> 3Query or change system time and date settings.</span><br><span class="line"> 4  -h --help                Show this help message</span><br><span class="line"> 5     --version             Show package version</span><br><span class="line"> 6     --no-pager            Do not pipe output into a pager</span><br><span class="line"> 7     --no-ask-password     Do not prompt for password</span><br><span class="line"> 8  -H --host=[USER@]HOST    Operate on remote host</span><br><span class="line"> 9  -M --machine=CONTAINER   Operate on local container</span><br><span class="line">10     --adjust-system-clock Adjust system clock when changing local RTC mode</span><br><span class="line">11Commands:</span><br><span class="line">12  status                   Show current time settings</span><br><span class="line">13  set-time TIME            Set system time</span><br><span class="line">14  set-timezone ZONE        Set system time zone</span><br><span class="line">15  list-timezones           Show known time zones</span><br><span class="line">16  set-local-rtc BOOL       Control whether RTC is in local time</span><br><span class="line">17  set-ntp BOOL             Control whether NTP is enabled</span><br></pre></td></tr></table></figure>
<h5 id="æŸ¥çœ‹å“ªäº›æ—¶åŒº"><a href="#æŸ¥çœ‹å“ªäº›æ—¶åŒº" class="headerlink" title="æŸ¥çœ‹å“ªäº›æ—¶åŒº"></a>æŸ¥çœ‹å“ªäº›æ—¶åŒº</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1[root@hadoop001 ~]# timedatectl list-timezones</span><br><span class="line">2Africa/Abidjan</span><br><span class="line">3Africa/Accra</span><br><span class="line">4Africa/Addis_Ababa</span><br><span class="line">5Africa/Algiers</span><br><span class="line">6Africa/Asmara</span><br><span class="line">7Africa/Bamako</span><br></pre></td></tr></table></figure>
<h5 id="æ‰€æœ‰èŠ‚ç‚¹è®¾ç½®äºšæ´²ä¸Šæµ·æ—¶åŒº"><a href="#æ‰€æœ‰èŠ‚ç‚¹è®¾ç½®äºšæ´²ä¸Šæµ·æ—¶åŒº" class="headerlink" title="æ‰€æœ‰èŠ‚ç‚¹è®¾ç½®äºšæ´²ä¸Šæµ·æ—¶åŒº"></a>æ‰€æœ‰èŠ‚ç‚¹è®¾ç½®äºšæ´²ä¸Šæµ·æ—¶åŒº</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1[root@hadoop001 ~]# timedatectl set-timezone Asia/Shanghai</span><br><span class="line">2[root@hadoop002 ~]# timedatectl set-timezone Asia/Shanghai</span><br><span class="line">3[root@hadoop003 ~]# timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure>
<p>6.2.æ—¶é—´</p>
<h5 id="æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ntp"><a href="#æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ntp" class="headerlink" title="æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ntp"></a>æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ntp</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1[root@hadoop001 ~]# yum install -y ntp</span><br></pre></td></tr></table></figure>
<h5 id="é€‰å–hadoop001ä¸ºntpçš„ä¸»èŠ‚ç‚¹"><a href="#é€‰å–hadoop001ä¸ºntpçš„ä¸»èŠ‚ç‚¹" class="headerlink" title="é€‰å–hadoop001ä¸ºntpçš„ä¸»èŠ‚ç‚¹"></a>é€‰å–hadoop001ä¸ºntpçš„ä¸»èŠ‚ç‚¹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1[root@hadoop001 ~]# vi /etc/ntp.conf</span><br></pre></td></tr></table></figure>
<h5 id="time"><a href="#time" class="headerlink" title="time"></a>time</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1server 0.asia.pool.ntp.org</span><br><span class="line">2server 1.asia.pool.ntp.org</span><br><span class="line">3server 2.asia.pool.ntp.org</span><br><span class="line">4server 3.asia.pool.ntp.org</span><br></pre></td></tr></table></figure>
<h5 id="å½“å¤–éƒ¨æ—¶é—´ä¸å¯ç”¨æ—¶ï¼Œå¯ä½¿ç”¨æœ¬åœ°ç¡¬ä»¶æ—¶é—´"><a href="#å½“å¤–éƒ¨æ—¶é—´ä¸å¯ç”¨æ—¶ï¼Œå¯ä½¿ç”¨æœ¬åœ°ç¡¬ä»¶æ—¶é—´" class="headerlink" title="å½“å¤–éƒ¨æ—¶é—´ä¸å¯ç”¨æ—¶ï¼Œå¯ä½¿ç”¨æœ¬åœ°ç¡¬ä»¶æ—¶é—´"></a>å½“å¤–éƒ¨æ—¶é—´ä¸å¯ç”¨æ—¶ï¼Œå¯ä½¿ç”¨æœ¬åœ°ç¡¬ä»¶æ—¶é—´</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1server 127.127.1.0 iburst local clock</span><br></pre></td></tr></table></figure>
<h5 id="å…è®¸å“ªäº›ç½‘æ®µçš„æœºå™¨æ¥åŒæ­¥æ—¶é—´"><a href="#å…è®¸å“ªäº›ç½‘æ®µçš„æœºå™¨æ¥åŒæ­¥æ—¶é—´" class="headerlink" title="å…è®¸å“ªäº›ç½‘æ®µçš„æœºå™¨æ¥åŒæ­¥æ—¶é—´"></a>å…è®¸å“ªäº›ç½‘æ®µçš„æœºå™¨æ¥åŒæ­¥æ—¶é—´</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1restrict 172.19.7.0 mask 255.255.255.0 nomodify notrap</span><br></pre></td></tr></table></figure>
<h5 id="å¼€å¯ntpdåŠæŸ¥çœ‹çŠ¶æ€"><a href="#å¼€å¯ntpdåŠæŸ¥çœ‹çŠ¶æ€" class="headerlink" title="å¼€å¯ntpdåŠæŸ¥çœ‹çŠ¶æ€"></a>å¼€å¯ntpdåŠæŸ¥çœ‹çŠ¶æ€</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> 1[root@hadoop001 ~]# systemctl start ntpd</span><br><span class="line"> 2[root@hadoop001 ~]# systemctl status ntpd</span><br><span class="line"> 3â— ntpd.service - Network Time Service</span><br><span class="line"> 4   Loaded: loaded (/usr/lib/systemd/system/ntpd.service; enabled; vendor preset: disabled)</span><br><span class="line"> 5   Active: active (running) since Sat 2019-05-11 10:15:00 CST; 11min ago</span><br><span class="line"> 6 Main PID: 18518 (ntpd)</span><br><span class="line"> 7   CGroup: /system.slice/ntpd.service</span><br><span class="line"> 8           â””â”€18518 /usr/sbin/ntpd -u ntp:ntp -g</span><br><span class="line"> 9May 11 10:15:00 hadoop001 systemd[1]: Starting Network Time Service...</span><br><span class="line">10May 11 10:15:00 hadoop001 ntpd[18518]: proto: precision = 0.088 usec</span><br><span class="line">11May 11 10:15:00 hadoop001 ntpd[18518]: 0.0.0.0 c01d 0d kern kernel time sync enabled</span><br><span class="line">12May 11 10:15:00 hadoop001 systemd[1]: Started Network Time Service.</span><br></pre></td></tr></table></figure>
<h5 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1[root@hadoop001 ~]# ntpq -p</span><br><span class="line">2     remote           refid      st t when poll reach   delay   offset  jitter</span><br><span class="line">3==============================================================================</span><br><span class="line">4 LOCAL(0)        .LOCL.          10 l  726   64    0    0.000    0.000   0.000</span><br></pre></td></tr></table></figure>
<h5 id="å…¶ä»–ä»èŠ‚ç‚¹åœæ­¢ç¦ç”¨ntpdæœåŠ¡"><a href="#å…¶ä»–ä»èŠ‚ç‚¹åœæ­¢ç¦ç”¨ntpdæœåŠ¡" class="headerlink" title="å…¶ä»–ä»èŠ‚ç‚¹åœæ­¢ç¦ç”¨ntpdæœåŠ¡"></a>å…¶ä»–ä»èŠ‚ç‚¹åœæ­¢ç¦ç”¨ntpdæœåŠ¡</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1[root@hadoop002 ~]# systemctl stop ntpd</span><br><span class="line">2[root@hadoop002 ~]# systemctl disable ntpd</span><br><span class="line">3Removed symlink /etc/systemd/system/multi-user.target.wants/ntpd.service.</span><br><span class="line">4[root@hadoop002 ~]# /usr/sbin/ntpdate hadoop001</span><br><span class="line">511 May 10:29:22 ntpdate[9370]: adjust time server 172.19.7.96 offset 0.000867 sec</span><br></pre></td></tr></table></figure>
<h5 id="æ¯å¤©å‡Œæ™¨åŒæ­¥hadoop001èŠ‚ç‚¹æ—¶é—´"><a href="#æ¯å¤©å‡Œæ™¨åŒæ­¥hadoop001èŠ‚ç‚¹æ—¶é—´" class="headerlink" title="æ¯å¤©å‡Œæ™¨åŒæ­¥hadoop001èŠ‚ç‚¹æ—¶é—´"></a>æ¯å¤©å‡Œæ™¨åŒæ­¥hadoop001èŠ‚ç‚¹æ—¶é—´</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> 1[root@hadoop002 ~]# crontab -e</span><br><span class="line"> 200 00 * * * /usr/sbin/ntpdate hadoop001  </span><br><span class="line"> 3[root@hadoop003 ~]# systemctl stop ntpd</span><br><span class="line"> 4[root@hadoop004 ~]# systemctl disable ntpd</span><br><span class="line"> 5Removed symlink /etc/systemd/system/multi-user.target.wants/ntpd.service.</span><br><span class="line"> 6[root@hadoop005 ~]# /usr/sbin/ntpdate hadoop001</span><br><span class="line"> 711 May 10:29:22 ntpdate[9370]: adjust time server 172.19.7.96 offset 0.000867 sec</span><br><span class="line"> 8#æ¯å¤©å‡Œæ™¨åŒæ­¥hadoop001èŠ‚ç‚¹æ—¶é—´</span><br><span class="line"> 9[root@hadoop003 ~]# crontab -e</span><br><span class="line">1000 00 * * * /usr/sbin/ntpdate hadoop001</span><br></pre></td></tr></table></figure>
<h3 id="7-éƒ¨ç½²é›†ç¾¤çš„JDK"><a href="#7-éƒ¨ç½²é›†ç¾¤çš„JDK" class="headerlink" title="7.éƒ¨ç½²é›†ç¾¤çš„JDK"></a>7.éƒ¨ç½²é›†ç¾¤çš„JDK</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1mkdir /usr/java</span><br><span class="line">2tar -xzvf jdk-8u45-linux-x64.tar.gz -C /usr/java/</span><br><span class="line">3#åˆ‡è®°å¿…é¡»ä¿®æ­£æ‰€å±ç”¨æˆ·åŠç”¨æˆ·ç»„</span><br><span class="line">4chown -R root:root /usr/java/jdk1.8.0_45</span><br><span class="line">5echo &quot;export JAVA_HOME=/usr/java/jdk1.8.0_45&quot; &gt;&gt; /etc/profile</span><br><span class="line">6echo &quot;export PATH=$&#123;JAVA_HOME&#125;/bin:$&#123;PATH&#125;&quot; &gt;&gt; /etc/profile</span><br><span class="line">7source /etc/profile</span><br><span class="line">8which java</span><br></pre></td></tr></table></figure>
<h3 id="8-hadoop001èŠ‚ç‚¹ç¦»çº¿éƒ¨ç½²MySQL5-7-å‡å¦‚è§‰å¾—å›°éš¾å“Ÿï¼Œå°±è‡ªè¡Œç™¾åº¦RPMéƒ¨ç½²ï¼Œå› ä¸ºè¯¥éƒ¨ç½²æ–‡æ¡£æ˜¯æˆ‘å¸ç”Ÿäº§æ–‡æ¡£"><a href="#8-hadoop001èŠ‚ç‚¹ç¦»çº¿éƒ¨ç½²MySQL5-7-å‡å¦‚è§‰å¾—å›°éš¾å“Ÿï¼Œå°±è‡ªè¡Œç™¾åº¦RPMéƒ¨ç½²ï¼Œå› ä¸ºè¯¥éƒ¨ç½²æ–‡æ¡£æ˜¯æˆ‘å¸ç”Ÿäº§æ–‡æ¡£" class="headerlink" title="8.hadoop001èŠ‚ç‚¹ç¦»çº¿éƒ¨ç½²MySQL5.7(å‡å¦‚è§‰å¾—å›°éš¾å“Ÿï¼Œå°±è‡ªè¡Œç™¾åº¦RPMéƒ¨ç½²ï¼Œå› ä¸ºè¯¥éƒ¨ç½²æ–‡æ¡£æ˜¯æˆ‘å¸ç”Ÿäº§æ–‡æ¡£)"></a>8.hadoop001èŠ‚ç‚¹ç¦»çº¿éƒ¨ç½²MySQL5.7(å‡å¦‚è§‰å¾—å›°éš¾å“Ÿï¼Œå°±è‡ªè¡Œç™¾åº¦RPMéƒ¨ç½²ï¼Œå› ä¸ºè¯¥éƒ¨ç½²æ–‡æ¡£æ˜¯æˆ‘å¸ç”Ÿäº§æ–‡æ¡£)</h3><ul>
<li>æ–‡æ¡£é“¾æ¥:<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0hhY2tlcnVuY2xlL015U1FM" title="https://github.com/Hackeruncle/MySQL">https://github.com/Hackeruncle/MySQL<i class="fa fa-external-link"></i></span></li>
<li>è§†é¢‘é“¾æ¥:<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMWpkTThXZUlnOHN5VTBldkwxLXRET1E=" title="https://pan.baidu.com/s/1jdM8WeIg8syU0evL1-tDOQ">https://pan.baidu.com/s/1jdM8WeIg8syU0evL1-tDOQ<i class="fa fa-external-link"></i></span>  å¯†ç :whic</li>
</ul>
<h3 id="9-åˆ›å»ºCDHçš„å…ƒæ•°æ®åº“å’Œç”¨æˆ·ã€amonæœåŠ¡çš„æ•°æ®åº“åŠç”¨æˆ·"><a href="#9-åˆ›å»ºCDHçš„å…ƒæ•°æ®åº“å’Œç”¨æˆ·ã€amonæœåŠ¡çš„æ•°æ®åº“åŠç”¨æˆ·" class="headerlink" title="9.åˆ›å»ºCDHçš„å…ƒæ•°æ®åº“å’Œç”¨æˆ·ã€amonæœåŠ¡çš„æ•°æ®åº“åŠç”¨æˆ·"></a>9.åˆ›å»ºCDHçš„å…ƒæ•°æ®åº“å’Œç”¨æˆ·ã€amonæœåŠ¡çš„æ•°æ®åº“åŠç”¨æˆ·</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1create database cmf DEFAULT CHARACTER SET utf8;</span><br><span class="line">2create database amon DEFAULT CHARACTER SET utf8;</span><br><span class="line">3grant all on cmf.* TO &apos;cmf&apos;@&apos;%&apos; IDENTIFIED BY &apos;Ruozedata123456!&apos;;</span><br><span class="line">4grant all on amon.* TO &apos;amon&apos;@&apos;%&apos; IDENTIFIED BY &apos;Ruozedata123456!&apos;;</span><br><span class="line">5flush privileges;</span><br></pre></td></tr></table></figure>
<h3 id="10-hadoop001èŠ‚ç‚¹éƒ¨ç½²mysql-jdbc-jar"><a href="#10-hadoop001èŠ‚ç‚¹éƒ¨ç½²mysql-jdbc-jar" class="headerlink" title="10.hadoop001èŠ‚ç‚¹éƒ¨ç½²mysql jdbc jar"></a>10.hadoop001èŠ‚ç‚¹éƒ¨ç½²mysql jdbc jar</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1mkdir -p /usr/share/java/</span><br><span class="line">2cp mysql-connector-java.jar /usr/share/java/</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰-CDHéƒ¨ç½²"><a href="#ä¸‰-CDHéƒ¨ç½²" class="headerlink" title="ä¸‰.CDHéƒ¨ç½²"></a>ä¸‰.CDHéƒ¨ç½²</h2><h3 id="1-ç¦»çº¿éƒ¨ç½²cm-serveråŠagent"><a href="#1-ç¦»çº¿éƒ¨ç½²cm-serveråŠagent" class="headerlink" title="1.ç¦»çº¿éƒ¨ç½²cm serveråŠagent"></a>1.ç¦»çº¿éƒ¨ç½²cm serveråŠagent</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> 11.1.æ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºç›®å½•åŠè§£å‹</span><br><span class="line"> 2mkdir /opt/cloudera-manager</span><br><span class="line"> 3tar -zxvf cloudera-manager-centos7-cm5.16.1_x86_64.tar.gz -C /opt/cloudera-manager/</span><br><span class="line"> 41.2.æ‰€æœ‰èŠ‚ç‚¹ä¿®æ”¹agentçš„é…ç½®ï¼ŒæŒ‡å‘serverçš„èŠ‚ç‚¹hadoop001</span><br><span class="line"> 5sed -i &quot;s/server_host=localhost/server_host=hadoop001/g&quot; /opt/cloudera-manager/cm-5.16.1/etc/cloudera-scm-agent/config.ini</span><br><span class="line"> 61.3.ä¸»èŠ‚ç‚¹ä¿®æ”¹serverçš„é…ç½®:</span><br><span class="line"> 7vi /opt/cloudera-manager/cm-5.16.1/etc/cloudera-scm-server/db.properties </span><br><span class="line"> 8com.cloudera.cmf.db.type=mysql</span><br><span class="line"> 9com.cloudera.cmf.db.host=hadoop001</span><br><span class="line">10com.cloudera.cmf.db.name=cmf</span><br><span class="line">11com.cloudera.cmf.db.user=cmf</span><br><span class="line">12com.cloudera.cmf.db.password=Ruozedata123456!</span><br><span class="line">13com.cloudera.cmf.db.setupType=EXTERNAL</span><br><span class="line">141.4.æ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºç”¨æˆ·</span><br><span class="line">15useradd --system --home=/opt/cloudera-manager/cm-5.16.1/run/cloudera-scm-server/ --no-create-home --shell=/bin/false --comment &quot;Cloudera SCM User&quot; cloudera-scm</span><br><span class="line">161.5.ç›®å½•ä¿®æ”¹ç”¨æˆ·åŠç”¨æˆ·ç»„</span><br><span class="line">17chown -R cloudera-scm:cloudera-scm /opt/cloudera-manager</span><br></pre></td></tr></table></figure>
<h3 id="2-hadoop001èŠ‚ç‚¹éƒ¨ç½²ç¦»çº¿parcelæº"><a href="#2-hadoop001èŠ‚ç‚¹éƒ¨ç½²ç¦»çº¿parcelæº" class="headerlink" title="2.hadoop001èŠ‚ç‚¹éƒ¨ç½²ç¦»çº¿parcelæº"></a>2.hadoop001èŠ‚ç‚¹éƒ¨ç½²ç¦»çº¿parcelæº</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> 12.1.éƒ¨ç½²ç¦»çº¿parcelæº</span><br><span class="line"> 2$ mkdir -p /opt/cloudera/parcel-repo</span><br><span class="line"> 3$ ll</span><br><span class="line"> 4total 3081664</span><br><span class="line"> 5-rw-r--r-- 1 root root 2127506677 May  9 18:04 CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel</span><br><span class="line"> 6-rw-r--r-- 1 root root         41 May  9 18:03 CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel.sha1</span><br><span class="line"> 7-rw-r--r-- 1 root root  841524318 May  9 18:03 cloudera-manager-centos7-cm5.16.1_x86_64.tar.gz</span><br><span class="line"> 8-rw-r--r-- 1 root root  185515842 Aug 10  2017 jdk-8u144-linux-x64.tar.gz</span><br><span class="line"> 9-rw-r--r-- 1 root root      66538 May  9 18:03 manifest.json</span><br><span class="line">10-rw-r--r-- 1 root root     989495 May 25  2017 mysql-connector-java.jar</span><br><span class="line">11$ cp CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel /opt/cloudera/parcel-repo/</span><br><span class="line">12#åˆ‡è®°cpæ—¶ï¼Œé‡å‘½åå»æ‰1ï¼Œä¸ç„¶åœ¨éƒ¨ç½²è¿‡ç¨‹CMè®¤ä¸ºå¦‚ä¸Šæ–‡ä»¶ä¸‹è½½æœªå®Œæ•´ï¼Œä¼šæŒç»­ä¸‹è½½</span><br><span class="line">13$ cp CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel.sha1 /opt/cloudera/parcel-repo/CDH-5.16.1-1.cdh5.16.1.p0.3-el7.parcel.sha</span><br><span class="line">14$ cp manifest.json /opt/cloudera/parcel-repo/</span><br><span class="line">152.2.ç›®å½•ä¿®æ”¹ç”¨æˆ·åŠç”¨æˆ·ç»„</span><br><span class="line">16$ chown -R cloudera-scm:cloudera-scm /opt/cloudera/</span><br></pre></td></tr></table></figure>
<h3 id="3-æ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºè½¯ä»¶å®‰è£…ç›®å½•ã€ç”¨æˆ·åŠç”¨æˆ·ç»„æƒé™"><a href="#3-æ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºè½¯ä»¶å®‰è£…ç›®å½•ã€ç”¨æˆ·åŠç”¨æˆ·ç»„æƒé™" class="headerlink" title="3.æ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºè½¯ä»¶å®‰è£…ç›®å½•ã€ç”¨æˆ·åŠç”¨æˆ·ç»„æƒé™"></a>3.æ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºè½¯ä»¶å®‰è£…ç›®å½•ã€ç”¨æˆ·åŠç”¨æˆ·ç»„æƒé™</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1mkdir -p /opt/cloudera/parcels</span><br><span class="line">2chown -R cloudera-scm:cloudera-scm /opt/cloudera/</span><br></pre></td></tr></table></figure>
<h3 id="4-hadoop001èŠ‚ç‚¹å¯åŠ¨Server"><a href="#4-hadoop001èŠ‚ç‚¹å¯åŠ¨Server" class="headerlink" title="4.hadoop001èŠ‚ç‚¹å¯åŠ¨Server"></a>4.hadoop001èŠ‚ç‚¹å¯åŠ¨Server</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">14.1.å¯åŠ¨server</span><br><span class="line">2/opt/cloudera-manager/cm-5.16.1/etc/init.d/cloudera-scm-server start</span><br><span class="line">34.2.é˜¿é‡Œäº‘webç•Œé¢ï¼Œè®¾ç½®è¯¥hadoop001èŠ‚ç‚¹é˜²ç«å¢™æ”¾å¼€7180ç«¯å£</span><br><span class="line">44.3.ç­‰å¾…1minï¼Œæ‰“å¼€ http://hadoop001:7180 è´¦å·å¯†ç :admin/admin</span><br><span class="line">54.4.å‡å¦‚æ‰“ä¸å¼€ï¼Œå»çœ‹serverçš„logï¼Œæ ¹æ®é”™è¯¯ä»”ç»†æ’æŸ¥é”™è¯¯</span><br></pre></td></tr></table></figure>
<h3 id="5-æ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨Agent"><a href="#5-æ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨Agent" class="headerlink" title="5.æ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨Agent"></a>5.æ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨Agent</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1/opt/cloudera-manager/cm-5.16.1/etc/init.d/cloudera-scm-agent start</span><br></pre></td></tr></table></figure>
<h3 id="6-æ¥ä¸‹æ¥ï¼Œå…¨éƒ¨Webç•Œé¢æ“ä½œ"><a href="#6-æ¥ä¸‹æ¥ï¼Œå…¨éƒ¨Webç•Œé¢æ“ä½œ" class="headerlink" title="6.æ¥ä¸‹æ¥ï¼Œå…¨éƒ¨Webç•Œé¢æ“ä½œ"></a>6.æ¥ä¸‹æ¥ï¼Œå…¨éƒ¨Webç•Œé¢æ“ä½œ</h3><p><span class="exturl" data-url="aHR0cDovL2hhZG9vcDAwMTo3MTgwLw==" title="http://hadoop001:7180/">http://hadoop001:7180/<i class="fa fa-external-link"></i></span><br>è´¦å·å¯†ç :admin/admin</p>
<h3 id="7-æ¬¢è¿ä½¿ç”¨Cloudera-Managerâ€“æœ€ç»ˆç”¨æˆ·è®¸å¯æ¡æ¬¾ä¸æ¡ä»¶ã€‚å‹¾é€‰"><a href="#7-æ¬¢è¿ä½¿ç”¨Cloudera-Managerâ€“æœ€ç»ˆç”¨æˆ·è®¸å¯æ¡æ¬¾ä¸æ¡ä»¶ã€‚å‹¾é€‰" class="headerlink" title="7.æ¬¢è¿ä½¿ç”¨Cloudera Managerâ€“æœ€ç»ˆç”¨æˆ·è®¸å¯æ¡æ¬¾ä¸æ¡ä»¶ã€‚å‹¾é€‰"></a>7.æ¬¢è¿ä½¿ç”¨Cloudera Managerâ€“æœ€ç»ˆç”¨æˆ·è®¸å¯æ¡æ¬¾ä¸æ¡ä»¶ã€‚å‹¾é€‰</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTMntgWCB2RNGM6yIaUia6hAywAgazVIRPibSZlCJgp4pTTQhWM0fjRVaQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="8-æ¬¢è¿ä½¿ç”¨Cloudera-Managerâ€“æ‚¨æƒ³è¦éƒ¨ç½²å“ªä¸ªç‰ˆæœ¬ï¼Ÿé€‰æ‹©Cloudera-Expresså…è´¹ç‰ˆæœ¬"><a href="#8-æ¬¢è¿ä½¿ç”¨Cloudera-Managerâ€“æ‚¨æƒ³è¦éƒ¨ç½²å“ªä¸ªç‰ˆæœ¬ï¼Ÿé€‰æ‹©Cloudera-Expresså…è´¹ç‰ˆæœ¬" class="headerlink" title="8.æ¬¢è¿ä½¿ç”¨Cloudera Managerâ€“æ‚¨æƒ³è¦éƒ¨ç½²å“ªä¸ªç‰ˆæœ¬ï¼Ÿé€‰æ‹©Cloudera Expresså…è´¹ç‰ˆæœ¬"></a>8.æ¬¢è¿ä½¿ç”¨Cloudera Managerâ€“æ‚¨æƒ³è¦éƒ¨ç½²å“ªä¸ªç‰ˆæœ¬ï¼Ÿé€‰æ‹©Cloudera Expresså…è´¹ç‰ˆæœ¬</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTNe2xHBYR8ibmF1sFhyLJngtqibTJylSZkCmcmBD3HtJu2Pw9G8o5WVQg/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="9-æ„Ÿè°¢æ‚¨é€‰æ‹©Cloudera-Managerå’ŒCDH"><a href="#9-æ„Ÿè°¢æ‚¨é€‰æ‹©Cloudera-Managerå’ŒCDH" class="headerlink" title="9.æ„Ÿè°¢æ‚¨é€‰æ‹©Cloudera Managerå’ŒCDH"></a>9.æ„Ÿè°¢æ‚¨é€‰æ‹©Cloudera Managerå’ŒCDH</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTjcibnIMwV6TJwVHVQZOLHnNsMA45g4hMa43LEgZv0AwdASia0CNibEhug/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="10-ä¸ºCDHé›†ç¾¤å®‰è£…æŒ‡å¯¼ä¸»æœºã€‚é€‰æ‹©-å½“å‰ç®¡ç†çš„ä¸»æœº-ï¼Œå…¨éƒ¨å‹¾é€‰"><a href="#10-ä¸ºCDHé›†ç¾¤å®‰è£…æŒ‡å¯¼ä¸»æœºã€‚é€‰æ‹©-å½“å‰ç®¡ç†çš„ä¸»æœº-ï¼Œå…¨éƒ¨å‹¾é€‰" class="headerlink" title="10.ä¸ºCDHé›†ç¾¤å®‰è£…æŒ‡å¯¼ä¸»æœºã€‚é€‰æ‹©[å½“å‰ç®¡ç†çš„ä¸»æœº]ï¼Œå…¨éƒ¨å‹¾é€‰"></a>10.ä¸ºCDHé›†ç¾¤å®‰è£…æŒ‡å¯¼ä¸»æœºã€‚é€‰æ‹©[å½“å‰ç®¡ç†çš„ä¸»æœº]ï¼Œå…¨éƒ¨å‹¾é€‰</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTq1NNOhRffwbBvXOezndFvm0kSdWhWH2hBHYLOzVv8fw4rdU2ibFvJcw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="11-é€‰æ‹©å­˜å‚¨åº“"><a href="#11-é€‰æ‹©å­˜å‚¨åº“" class="headerlink" title="11.é€‰æ‹©å­˜å‚¨åº“"></a>11.é€‰æ‹©å­˜å‚¨åº“</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTjiceg4wvCaDzZySicaia4ZCwKjcyIBN1tW6L3nmtVkeMdt4TIiawiceia1DQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="12-é›†ç¾¤å®‰è£…â€“æ­£åœ¨å®‰è£…é€‰å®šParcelå‡å¦‚"><a href="#12-é›†ç¾¤å®‰è£…â€“æ­£åœ¨å®‰è£…é€‰å®šParcelå‡å¦‚" class="headerlink" title="12.é›†ç¾¤å®‰è£…â€“æ­£åœ¨å®‰è£…é€‰å®šParcelå‡å¦‚"></a>12.é›†ç¾¤å®‰è£…â€“æ­£åœ¨å®‰è£…é€‰å®šParcelå‡å¦‚</h3><p>æœ¬åœ°parcelç¦»çº¿æºé…ç½®æ­£ç¡®ï¼Œåˆ™â€ä¸‹è½½â€é˜¶æ®µç¬é—´å®Œæˆï¼Œå…¶ä½™é˜¶æ®µè§†èŠ‚ç‚¹æ•°ä¸å†…éƒ¨ç½‘ç»œæƒ…å†µå†³å®šã€‚</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOT3kX26zl0BFWoNvOqbF1FR6BvYjVoyC9eibOmZd7NE3ufZMVyfyLjBhg/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="13-æ£€æŸ¥ä¸»æœºæ­£ç¡®æ€§"><a href="#13-æ£€æŸ¥ä¸»æœºæ­£ç¡®æ€§" class="headerlink" title="13.æ£€æŸ¥ä¸»æœºæ­£ç¡®æ€§"></a>13.æ£€æŸ¥ä¸»æœºæ­£ç¡®æ€§</h3><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> 113.1.å»ºè®®å°†/proc/sys/vm/swappinessè®¾ç½®ä¸ºæœ€å¤§å€¼10ã€‚</span><br><span class="line"> 2swappinesså€¼æ§åˆ¶æ“ä½œç³»ç»Ÿå°è¯•äº¤æ¢å†…å­˜çš„ç§¯æï¼›</span><br><span class="line"> 3swappiness=0ï¼šè¡¨ç¤ºæœ€å¤§é™åº¦ä½¿ç”¨ç‰©ç†å†…å­˜ï¼Œä¹‹åæ‰æ˜¯swapç©ºé—´ï¼›</span><br><span class="line"> 4swappiness=100ï¼šè¡¨ç¤ºç§¯æä½¿ç”¨swapåˆ†åŒºï¼Œå¹¶ä¸”æŠŠå†…å­˜ä¸Šçš„æ•°æ®åŠæ—¶æ¬è¿åˆ°swapç©ºé—´ï¼›</span><br><span class="line"> 5å¦‚æœæ˜¯æ··åˆæœåŠ¡å™¨ï¼Œä¸å»ºè®®å®Œå…¨ç¦ç”¨swapï¼Œå¯ä»¥å°è¯•é™ä½swappinessã€‚</span><br><span class="line"> 6ä¸´æ—¶è°ƒæ•´ï¼š</span><br><span class="line"> 7sysctl vm.swappiness=10</span><br><span class="line"> 8æ°¸ä¹…è°ƒæ•´ï¼š</span><br><span class="line"> 9cat &lt;&lt; EOF &gt;&gt; /etc/sysctl.conf</span><br><span class="line">10# Adjust swappiness value</span><br><span class="line">11vm.swappiness=10</span><br><span class="line">12EOF</span><br><span class="line">1313.2.å·²å¯ç”¨é€æ˜å¤§é¡µé¢å‹ç¼©ï¼Œå¯èƒ½ä¼šå¯¼è‡´é‡å¤§æ€§èƒ½é—®é¢˜ï¼Œå»ºè®®ç¦ç”¨æ­¤è®¾ç½®ã€‚</span><br><span class="line">14ä¸´æ—¶è°ƒæ•´ï¼š</span><br><span class="line">15echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line">16echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line">17æ°¸ä¹…è°ƒæ•´ï¼š</span><br><span class="line">18cat &lt;&lt; EOF &gt;&gt; /etc/rc.d/rc.local</span><br><span class="line">19# Disable transparent_hugepage</span><br><span class="line">20echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line">21echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line">22EOF</span><br><span class="line">23# centos7.xç³»ç»Ÿï¼Œéœ€è¦ä¸º&quot;/etc/rc.d/rc.local&quot;æ–‡ä»¶èµ‹äºˆæ‰§è¡Œæƒé™</span><br><span class="line">24chmod +x /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure>
<h3 id="14-è‡ªå®šä¹‰æœåŠ¡ï¼Œé€‰æ‹©éƒ¨ç½²Zookeeperã€HDFSã€YarnæœåŠ¡"><a href="#14-è‡ªå®šä¹‰æœåŠ¡ï¼Œé€‰æ‹©éƒ¨ç½²Zookeeperã€HDFSã€YarnæœåŠ¡" class="headerlink" title="14.è‡ªå®šä¹‰æœåŠ¡ï¼Œé€‰æ‹©éƒ¨ç½²Zookeeperã€HDFSã€YarnæœåŠ¡"></a>14.è‡ªå®šä¹‰æœåŠ¡ï¼Œé€‰æ‹©éƒ¨ç½²Zookeeperã€HDFSã€YarnæœåŠ¡</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTDQOX5gC9KRxIUIY1eL561QticAaz23IX1ogYVRiajwXlbibddeax1a33w/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="15-è‡ªå®šä¹‰è§’è‰²åˆ†é…"><a href="#15-è‡ªå®šä¹‰è§’è‰²åˆ†é…" class="headerlink" title="15.è‡ªå®šä¹‰è§’è‰²åˆ†é…"></a>15.è‡ªå®šä¹‰è§’è‰²åˆ†é…</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTkp6Dw0RMWkoFTd4sbzBnrWiblxVkWLoPZSMziaRgY2DSE03fQRmBgJ4w/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="16-æ•°æ®åº“è®¾ç½®"><a href="#16-æ•°æ®åº“è®¾ç½®" class="headerlink" title="16.æ•°æ®åº“è®¾ç½®"></a>16.æ•°æ®åº“è®¾ç½®</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOT0CQtn7eQbrjkPmTgQA6ye22UNfdZ618RexePfdrupRPtTrZlHLQRPw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="17-å®¡æ”¹è®¾ç½®ï¼Œé»˜è®¤å³å¯"><a href="#17-å®¡æ”¹è®¾ç½®ï¼Œé»˜è®¤å³å¯" class="headerlink" title="17.å®¡æ”¹è®¾ç½®ï¼Œé»˜è®¤å³å¯"></a>17.å®¡æ”¹è®¾ç½®ï¼Œé»˜è®¤å³å¯</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOT4qoAXY69p0jSUgGFmlzq5MAQ4xoRyu1B2ftqt3BKwJ8fZ8f7ogWyuw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="18-é¦–æ¬¡è¿è¡Œ"><a href="#18-é¦–æ¬¡è¿è¡Œ" class="headerlink" title="18.é¦–æ¬¡è¿è¡Œ"></a>18.é¦–æ¬¡è¿è¡Œ</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTtF5tKDhqYhmlp4AasDK71tJ6BtAWk10FBibeJziaEPbWcbwFXxiaWtxfQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="19-æ­å–œæ‚¨"><a href="#19-æ­å–œæ‚¨" class="headerlink" title="19.æ­å–œæ‚¨!"></a>19.æ­å–œæ‚¨!</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTkvbFkWcLiawvHnOtSv5VORKXSKS8DurU6DQHnuzNp0JLmstVhNXRnvA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="20-ä¸»é¡µ"><a href="#20-ä¸»é¡µ" class="headerlink" title="20.ä¸»é¡µ"></a>20.ä¸»é¡µ</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/m7Lx6FicJmUmSZI8m74xFUKB6wzFsFMOTMJE0wE0Apia0rSYXKVJzoRWIuia2ccrONV9PiaePpv4phgftKiax9PAfPQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<hr>
<h3 id="CDHå…¨å¥—è¯¾ç¨‹ç›®å½•ï¼Œå¦‚æœ‰buyï¼ŒåŠ å¾®ä¿¡-ruoze-star"><a href="#CDHå…¨å¥—è¯¾ç¨‹ç›®å½•ï¼Œå¦‚æœ‰buyï¼ŒåŠ å¾®ä¿¡-ruoze-star" class="headerlink" title="CDHå…¨å¥—è¯¾ç¨‹ç›®å½•ï¼Œå¦‚æœ‰buyï¼ŒåŠ å¾®ä¿¡(ruoze_star)"></a>CDHå…¨å¥—è¯¾ç¨‹ç›®å½•ï¼Œå¦‚æœ‰buyï¼ŒåŠ å¾®ä¿¡(ruoze_star)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"> 1    0.é’äº‘ç¯å¢ƒä»‹ç»å’Œä½¿ç”¨ </span><br><span class="line"> 2    1.Preparation        </span><br><span class="line"> 3        è°ˆè°ˆæ€æ ·å…¥é—¨å¤§æ•°æ® </span><br><span class="line"> 4        è°ˆè°ˆæ€æ ·åšå¥½ä¸€ä¸ªå¤§æ•°æ®å¹³å°çš„è¿è¥å·¥ä½œ </span><br><span class="line"> 5        Linuxæœºå™¨,å„è½¯ä»¶ç‰ˆæœ¬ä»‹ç»åŠå®‰è£…(å½•æ’­) </span><br><span class="line"> 6    2.Introduction      </span><br><span class="line"> 7        Clouderaã€CMåŠCDHä»‹ç» </span><br><span class="line"> 8        CDHç‰ˆæœ¬é€‰æ‹© </span><br><span class="line"> 9        CDHå®‰è£…å‡ ç§æ–¹å¼è§£è¯» </span><br><span class="line">10    3.Install&amp;UnInstall  </span><br><span class="line">11        é›†ç¾¤èŠ‚ç‚¹è§„åˆ’,ç¯å¢ƒå‡†å¤‡(NTP,Jdk and etc) </span><br><span class="line">12        MySQLç¼–è¯‘å®‰è£…åŠå¸¸ç”¨å‘½ä»¤ </span><br><span class="line">13        æ¨è:CDHç¦»çº¿å®‰è£…(è¸©å‘å¿ƒå¾—,å…¨é¢å‰–æ) </span><br><span class="line">14        è§£è¯»æš´åŠ›å¸è½½è„šæœ¬ </span><br><span class="line">15    4.CDH Management      </span><br><span class="line">16        CDHä½“ç³»æ¶æ„å‰–æ </span><br><span class="line">17        CDHé…ç½®æ–‡ä»¶æ·±åº¦è§£æ </span><br><span class="line">18        CMçš„å¸¸ç”¨å‘½ä»¤ </span><br><span class="line">19        CDHé›†ç¾¤æ­£ç¡®å¯åŠ¨å’Œåœæ­¢é¡ºåº </span><br><span class="line">20        CDH Tsquery Language </span><br><span class="line">21        CDHå¸¸è§„ç®¡ç†(ç›‘æ§/é¢„è­¦/é…ç½®/èµ„æº/æ—¥å¿—/å®‰å…¨) </span><br><span class="line">22    5.Maintenance Experiment  </span><br><span class="line">23        HDFS HA é…ç½® åŠhadoop/hdfså¸¸è§„å‘½ä»¤ </span><br><span class="line">24        Yarn HA é…ç½® åŠyarnå¸¸è§„å‘½ä»¤ </span><br><span class="line">25        Other CDH Components HA é…ç½® </span><br><span class="line">26        CDHåŠ¨æ€æ·»åŠ åˆ é™¤æœåŠ¡(hive/spark/hbase) </span><br><span class="line">27        CDHåŠ¨æ€æ·»åŠ åˆ é™¤æœºå™¨ </span><br><span class="line">28        CDHåŠ¨æ€æ·»åŠ åˆ é™¤åŠè¿ç§»DataNodeè¿›ç¨‹ç­‰ </span><br><span class="line">29        CDHå‡çº§(5.10.0--&gt;5.12.0) </span><br><span class="line">30    6.Resource Management    </span><br><span class="line">31        Linux Cgroups </span><br><span class="line">32        é™æ€èµ„æºæ±  </span><br><span class="line">33        åŠ¨æ€èµ„æºæ±  </span><br><span class="line">34        å¤šç§Ÿæˆ·æ¡ˆä¾‹ </span><br><span class="line">35    7.Performance Tunning    </span><br><span class="line">36        Memory/CPU/Network/DiskåŠé›†ç¾¤è§„åˆ’ </span><br><span class="line">37        Linuxå‚æ•° </span><br><span class="line">38        HDFSå‚æ•° </span><br><span class="line">39        MapReduceåŠYarnå‚æ•° </span><br><span class="line">40        å…¶ä»–æœåŠ¡å‚æ•° </span><br><span class="line">41    8.Cases Share        </span><br><span class="line">42        CDH4&amp;5ä¹‹Alternativeså‘½ä»¤ çš„ç ”ç©¶ </span><br><span class="line">43        CDH5.8.2å®‰è£…ä¹‹Hash verification failed </span><br><span class="line">44        è®°å½•ä¸€æ¬¡CDH4.8.6 é…ç½®HDFS HA å‘ </span><br><span class="line">45        CDH5.0é›†ç¾¤IPæ›´æ”¹ </span><br><span class="line">46        CDHçš„active namenode exit(GC)å’Œå½©è›‹åˆ†äº« </span><br><span class="line">47    9. Kerberos     </span><br><span class="line">48        Kerberosç®€ä»‹</span><br><span class="line">49        Kerberosä½“ç³»ç»“æ„</span><br><span class="line">50        Kerberoså·¥ä½œæœºåˆ¶</span><br><span class="line">51        Kerberoså®‰è£…éƒ¨ç½²</span><br><span class="line">52        CDHå¯ç”¨kerberos</span><br><span class="line">53        Kerberoså¼€å‘ä½¿ç”¨(çœŸå®ä»£ç )</span><br><span class="line">54    10.Summary         </span><br><span class="line">55        æ€»ç»“</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Join-us-if-you-have-a-dream"><a href="#Join-us-if-you-have-a-dream" class="headerlink" title="Join us if you have a dream."></a>Join us if you have a dream.</h4><h5 id="è‹¥æ³½æ•°æ®å®˜ç½‘"><a href="#è‹¥æ³½æ•°æ®å®˜ç½‘" class="headerlink" title="è‹¥æ³½æ•°æ®å®˜ç½‘"></a><span class="exturl" data-url="aHR0cDovL3J1b3plZGF0YS5jb20=" title="http://ruozedata.com">è‹¥æ³½æ•°æ®å®˜ç½‘<i class="fa fa-external-link"></i></span></h5><h5 id="è…¾è®¯è¯¾å ‚ï¼Œæœè‹¥æ³½æ•°æ®"><a href="#è…¾è®¯è¯¾å ‚ï¼Œæœè‹¥æ³½æ•°æ®" class="headerlink" title="è…¾è®¯è¯¾å ‚ï¼Œæœè‹¥æ³½æ•°æ®"></a><span class="exturl" data-url="aHR0cDovL3J1b3plLmtlLnFxLmNvbQ==" title="http://ruoze.ke.qq.com">è…¾è®¯è¯¾å ‚ï¼Œæœè‹¥æ³½æ•°æ®<i class="fa fa-external-link"></i></span></h5><h5 id="Bilibiliç½‘ç«™-æœè‹¥æ³½æ•°æ®"><a href="#Bilibiliç½‘ç«™-æœè‹¥æ³½æ•°æ®" class="headerlink" title="Bilibiliç½‘ç«™,æœè‹¥æ³½æ•°æ®"></a><span class="exturl" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMzU2ODM2MzIz" title="https://space.bilibili.com/356836323">Bilibiliç½‘ç«™,æœè‹¥æ³½æ•°æ®<i class="fa fa-external-link"></i></span></h5><h5 id="è‹¥æ³½å¤§æ•°æ®â€“å®˜æ–¹åšå®¢"><a href="#è‹¥æ³½å¤§æ•°æ®â€“å®˜æ–¹åšå®¢" class="headerlink" title="è‹¥æ³½å¤§æ•°æ®â€“å®˜æ–¹åšå®¢"></a><span class="exturl" data-url="aHR0cHM6Ly9ydW96ZWRhdGEuZ2l0aHViLmlv" title="https://ruozedata.github.io">è‹¥æ³½å¤§æ•°æ®â€“å®˜æ–¹åšå®¢<i class="fa fa-external-link"></i></span></h5><h5 id="è‹¥æ³½å¤§æ•°æ®â€“åšå®¢ä¸€è§ˆ"><a href="#è‹¥æ³½å¤§æ•°æ®â€“åšå®¢ä¸€è§ˆ" class="headerlink" title="è‹¥æ³½å¤§æ•°æ®â€“åšå®¢ä¸€è§ˆ"></a><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3J1b3plZGF0YS9CaWdEYXRhL2Jsb2IvbWFzdGVyL2Jsb2cvQmlnRGF0YUJsb2dPdmVydmlldy5tZA==" title="https://github.com/ruozedata/BigData/blob/master/blog/BigDataBlogOverview.md">è‹¥æ³½å¤§æ•°æ®â€“åšå®¢ä¸€è§ˆ<i class="fa fa-external-link"></i></span></h5><h5 id="è‹¥æ³½å¤§æ•°æ®â€“å†…éƒ¨å­¦å‘˜é¢è¯•é¢˜"><a href="#è‹¥æ³½å¤§æ•°æ®â€“å†…éƒ¨å­¦å‘˜é¢è¯•é¢˜" class="headerlink" title="è‹¥æ³½å¤§æ•°æ®â€“å†…éƒ¨å­¦å‘˜é¢è¯•é¢˜"></a><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3J1b3plZGF0YS9CaWdEYXRhL2Jsb2IvbWFzdGVyL2ludGVydmlldy8lRTUlQjglQjglRTglQTclODElRTklOUQlQTIlRTglQUYlOTUlRTklQTIlOTgubWQ=" title="https://github.com/ruozedata/BigData/blob/master/interview/%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98.md">è‹¥æ³½å¤§æ•°æ®â€“å†…éƒ¨å­¦å‘˜é¢è¯•é¢˜<i class="fa fa-external-link"></i></span></h5>]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> CDH5.16.1 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¸€æ¬¡Javaçº¿ç¨‹æ± è¯¯ç”¨å¼•å‘çš„è¡€æ¡ˆå’Œæ€»ç»“]]></title>
      <url>/%E4%B8%80%E6%AC%A1Java%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%AF%E7%94%A8%E5%BC%95%E5%8F%91%E7%9A%84%E8%A1%80%E6%A1%88%E5%92%8C%E6%80%BB%E7%BB%93.html</url>
      <content type="html"><![CDATA[<h2 id="è¿™æ˜¯ä¸€ä¸ªååˆ†ä¸¥é‡çš„é—®é¢˜"><a href="#è¿™æ˜¯ä¸€ä¸ªååˆ†ä¸¥é‡çš„é—®é¢˜" class="headerlink" title="è¿™æ˜¯ä¸€ä¸ªååˆ†ä¸¥é‡çš„é—®é¢˜"></a>è¿™æ˜¯ä¸€ä¸ªååˆ†ä¸¥é‡çš„é—®é¢˜</h2><p>è‡ªä»æœ€è¿‘çš„æŸå¹´æŸæœˆæŸå¤©èµ·ï¼Œçº¿ä¸ŠæœåŠ¡å¼€å§‹å˜å¾—ä¸é‚£ä¹ˆç¨³å®šã€‚åœ¨é«˜å³°æœŸï¼Œæ—¶å¸¸æœ‰å‡ å°æœºå™¨çš„å†…å­˜æŒç»­é£™å‡ï¼Œå¹¶ä¸”æ— æ³•å›æ”¶ï¼Œå¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚</p>
<a id="more"></a>
<p>ä¾‹å¦‚GCæ—¶é—´é‡‡æ ·æ›²çº¿ï¼š</p>
<p><img src="https://img-blog.csdn.net/20180204155221776" alt="img"></p>
<p>å’Œå†…å­˜ä½¿ç”¨æ›²çº¿ï¼š</p>
<p><img src="https://img-blog.csdn.net/20180204155254374" alt="img"></p>
<p>å›¾ä¸­æ‰€ç¤ºï¼Œ18:50-19:00çš„é˜¶æ®µï¼Œå·²ç»å¤„äºæœåŠ¡ä¸å¯ç”¨çš„çŠ¶æ€äº†ã€‚ä¸Šæ¸¸æœåŠ¡çš„è¶…æ—¶å¼‚å¸¸ä¼šå¢åŠ ï¼Œè¯¥å°æœºå™¨ä¼šè§¦å‘ç†”æ–­ã€‚ç†”æ–­è§¦å‘åï¼Œæ”¹å°æœºå™¨çš„æµé‡ä¼šæ‰“åˆ°å…¶ä»–æœºå™¨ï¼Œå…¶ä»–æœºå™¨å‘ç”Ÿç±»ä¼¼çš„æƒ…å†µçš„å¯èƒ½æ€§ä¼šæé«˜ï¼Œæç«¯æƒ…å†µä¼šå¼•èµ·æ‰€æœ‰æœåŠ¡å®•æœºï¼Œæ›²çº¿æ‰åº•ã€‚</p>
<p>å› ä¸ºçº¿ä¸Šå†…å­˜è¿‡å¤§ï¼Œå¦‚æœé‡‡ç”¨ jmap dumpçš„æ–¹å¼ï¼Œè¿™ä¸ªä»»åŠ¡å¯èƒ½éœ€è¦å¾ˆä¹…æ‰å¯ä»¥æ‰§è¡Œå®Œï¼ŒåŒæ—¶æŠŠè¿™ä¹ˆå¤§çš„æ–‡ä»¶å­˜æ”¾èµ·æ¥å¯¼å…¥å·¥å…·ä¹Ÿæ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹æƒ…ã€‚å†çœ‹JVMå¯åŠ¨å‚æ•°ï¼Œä¹Ÿå¾ˆä¹…æ²¡æœ‰å˜æ›´è¿‡ Xms, Xmx, -XX:NewRatio, -XX:SurvivorRatio, è™½ç„¶æ²¡æœ‰ä»”ç»†åˆ†æç¨‹åºä½¿ç”¨å†…å­˜æƒ…å†µï¼Œä½†çœ‹èµ·æ¥ä¹Ÿæ— å¤§ç¢ã€‚</p>
<p>äºæ˜¯å¼€å§‹æ‰¾ä»£ç ï¼ŒæŸå¹´æŸå¤©æŸæœˆï½ å—¯ï¼Œæ³¨æ„åˆ°ä¸€æ®µè¿™æ ·çš„ä»£ç æäº¤ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ExecutorService executor = Executors.newFixedThreadPool(<span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">push2Kafka</span><span class="params">(Object msg)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    executor.execute(<span class="keyword">new</span> WriteTask(msg,  <span class="keyword">false</span>));    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›¸å…³ä»£ç çš„å®Œæ•´åŠŸèƒ½æ˜¯ï¼Œæ¯æ¬¡çº¿ä¸Šè°ƒç”¨ï¼Œéƒ½ä¼šæŠŠè®¡ç®—ç»“æœçš„æ—¥å¿—æ‰“åˆ° Kafkaï¼ŒKafkaæ¶ˆè´¹æ–¹å†ç»§ç»­åç»­çš„é€»è¾‘ã€‚å†…å­˜è¢«è€—å°½å¯èƒ½æœ‰ä¸€ä¸ªåŸå› æ˜¯ï¼Œå› ä¸ºä½¿ç”¨äº† newFixedThreadPool çº¿ç¨‹æ± ï¼Œè€Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯ï¼Œå›ºå®šäº†Nä¸ªçº¿ç¨‹ï¼Œè€Œæäº¤ç»™çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—æ˜¯ä¸é™åˆ¶å¤§å°çš„ï¼Œå¦‚æœKafkaå‘æ¶ˆæ¯è¢«é˜»å¡æˆ–è€…å˜æ…¢ï¼Œé‚£ä¹ˆæ˜¾ç„¶é˜Ÿåˆ—é‡Œé¢çš„å†…å®¹ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¹Ÿå°±ä¼šå¯¼è‡´è¿™æ ·çš„é—®é¢˜ã€‚</p>
<p>ä¸ºäº†éªŒè¯è¿™ä¸ªæƒ³æ³•ï¼Œåšäº†ä¸ªå°å®éªŒï¼ŒæŠŠ newFixedThreadPool çº¿ç¨‹æ± çš„çº¿ç¨‹ä¸ªæ•°è°ƒå°ä¸€ç‚¹ï¼Œä¾‹å¦‚ 1ã€‚æœç„¶å‹æµ‹äº†ä¸€ä¸‹ï¼Œå¾ˆå¿«å°±å¤ç°äº†å†…å­˜è€—å°½ï¼ŒæœåŠ¡ä¸å¯ç”¨çš„æ‚²å‰§ã€‚</p>
<p>æœ€åçš„ä¿®å¤ç­–ç•¥æ˜¯ä½¿ç”¨äº†è‡ªå®šä¹‰çš„çº¿ç¨‹æ± å‚æ•°ï¼Œè€Œé Executors é»˜è®¤å®ç°è§£å†³äº†é—®é¢˜ã€‚ä¸‹é¢å°±æŠŠçº¿ç¨‹æ± ç›¸å…³çš„åŸç†å’Œå‚æ•°æ€»ç»“ä¸€ä¸‹ï¼Œé¿å…æœªæ¥è¸©å‘ã€‚</p>
<h2 id="1-Javaçº¿ç¨‹æ± "><a href="#1-Javaçº¿ç¨‹æ± " class="headerlink" title="1. Javaçº¿ç¨‹æ± "></a>1. Javaçº¿ç¨‹æ± </h2><p>è™½ç„¶Javaçº¿ç¨‹æ± ç†è®ºï¼Œä»¥åŠæ„é€ çº¿ç¨‹æ± çš„å„ç§å‚æ•°ï¼Œä»¥åŠ Executors æä¾›çš„é»˜è®¤å®ç°ä¹‹å‰ç ”è¯»è¿‡ï¼Œä¸è¿‡çº¿ä¸Šè¿˜æ²¡æœ‰å‘ç”Ÿè¿‡çº¿ç¨‹æ± è¯¯ç”¨å¼•å‘çš„äº‹æ•…ï¼Œæ‰€ä»¥æœ‰å¿…è¦æŠŠè¿™äº›å‚æ•°å†ä»”ç»†ç¢ç£¨ä¸€éã€‚</p>
<p>ä¼˜å…ˆè¡¥å……ä¸€äº›çº¿ç¨‹æ± çš„å·¥ä½œç†è®ºï¼Œæœ‰åŠ©äºå±•å¼€ä¸‹é¢çš„å†…å®¹ã€‚çº¿ç¨‹æ± é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”±å¾ˆå¤šçº¿ç¨‹æ„æˆçš„æ± å­ï¼Œæ¥ä¸€ä¸ªä»»åŠ¡ï¼Œå°±ä»æ± å­ä¸­å–ä¸€ä¸ªçº¿ç¨‹ï¼Œå¤„ç†è¿™ä¸ªä»»åŠ¡ã€‚è¿™ä¸ªç†è§£æ˜¯æˆ‘åœ¨ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°è¿™ä¸ªæ¦‚å¿µæ—¶å€™çš„ç†è§£ï¼Œè™½ç„¶æ•´ä½“åŸºæœ¬åˆ‡å…¥åˆ°æ ¸å¿ƒï¼Œä½†æ˜¯å®é™…ä¸Šä¼šæ¯”è¿™ä¸ªå¤æ‚ã€‚ä¾‹å¦‚çº¿ç¨‹æ± è‚¯å®šä¸ä¼šæ— é™æ‰©å¤§çš„ï¼Œå¦åˆ™èµ„æºä¼šè€—å°½ï¼›å½“çº¿ç¨‹æ•°åˆ°è¾¾ä¸€ä¸ªé˜¶æ®µï¼Œæäº¤çš„ä»»åŠ¡ä¼šè¢«æš‚æ—¶å­˜å‚¨åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—å†…å®¹å¯ä»¥ä¸æ–­æ‰©å¤§ï¼Œæç«¯ä¸‹ä¹Ÿä¼šè€—å°½èµ„æºï¼Œé‚£é€‰æ‹©ä»€ä¹ˆç±»å‹çš„é˜Ÿåˆ—ï¼Œå½“é˜Ÿåˆ—æ»¡å¦‚ä½•å¤„ç†ä»»åŠ¡ï¼Œéƒ½æœ‰æ¶‰åŠå¾ˆå¤šå†…å®¹ã€‚çº¿ç¨‹æ± æ€»ä½“çš„å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://img-blog.csdn.net/20180204155347335" alt="img"></p>
<p>çº¿ç¨‹æ± å†…çš„çº¿ç¨‹æ•°çš„å¤§å°ç›¸å…³çš„æ¦‚å¿µæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æ ¸å¿ƒæ± å¤§å°ï¼Œè¿˜æœ‰æœ€å¤§æ± å¤§å°ã€‚å¦‚æœå½“å‰çš„çº¿ç¨‹ä¸ªæ•°æ¯”æ ¸å¿ƒæ± ä¸ªæ•°å°ï¼Œå½“ä»»åŠ¡åˆ°æ¥ï¼Œä¼šä¼˜å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹å¹¶æ‰§è¡Œä»»åŠ¡ã€‚å½“å·²ç»åˆ°è¾¾æ ¸å¿ƒæ± å¤§å°ï¼Œåˆ™æŠŠä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼Œä¸ºäº†èµ„æºä¸è¢«è€—å°½ï¼Œé˜Ÿåˆ—çš„æœ€å¤§å®¹é‡å¯èƒ½ä¹Ÿæ˜¯æœ‰ä¸Šé™çš„ï¼Œå¦‚æœè¾¾åˆ°é˜Ÿåˆ—ä¸Šé™åˆ™è€ƒè™‘ç»§ç»­åˆ›å»ºæ–°çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœæ­¤åˆ»çº¿ç¨‹çš„ä¸ªæ•°å·²ç»åˆ°è¾¾æœ€å¤§æ± ä¸Šé™ï¼Œåˆ™è€ƒè™‘æŠŠä»»åŠ¡ä¸¢å¼ƒã€‚</p>
<p>åœ¨ java.util.concurrent åŒ…ä¸­ï¼Œæä¾›äº† ThreadPoolExecutor çš„å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ThreadPoolExecutor</span><span class="params">(<span class="keyword">int</span> corePoolSize,</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">                              <span class="keyword">int</span> maximumPoolSize,</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">                              <span class="keyword">long</span> keepAliveTime,</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">                              TimeUnit unit,</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">                              BlockingQueue&lt;Runnable&gt; workQueue,</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">                              ThreadFactory threadFactory,</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">                              RejectedExecutionHandler handler)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¢ç„¶æœ‰äº†åˆšåˆšå¯¹çº¿ç¨‹æ± å·¥ä½œåŸç†å¯¹æ¦‚è¿°ï¼Œè¿™äº›å‚æ•°å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼š</p>
<p>corePoolSize- æ ¸å¿ƒæ± å¤§å°ï¼Œæ—¢ç„¶å¦‚å‰åŸç†éƒ¨åˆ†æ‰€è¿°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨åˆåˆ›å»ºçº¿ç¨‹æ± æ—¶çº¿ç¨‹ä¸ä¼šç«‹å³å¯åŠ¨ï¼Œç›´åˆ°æœ‰ä»»åŠ¡æäº¤æ‰å¼€å§‹å¯åŠ¨çº¿ç¨‹å¹¶é€æ¸æ—¶çº¿ç¨‹æ•°ç›®è¾¾åˆ°corePoolSizeã€‚è‹¥æƒ³ä¸€å¼€å§‹å°±åˆ›å»ºæ‰€æœ‰æ ¸å¿ƒçº¿ç¨‹éœ€è°ƒç”¨prestartAllCoreThreadsæ–¹æ³•ã€‚</p>
<p>maximumPoolSize-æ± ä¸­å…è®¸çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å½“æ ¸å¿ƒçº¿ç¨‹æ»¡ä¸”é˜»å¡é˜Ÿåˆ—ä¹Ÿæ»¡æ—¶æ‰ä¼šåˆ¤æ–­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å°äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œå¹¶å†³å®šæ˜¯å¦åˆ›å»ºæ–°çº¿ç¨‹ã€‚</p>
<p>keepAliveTime - å½“çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒæ—¶ï¼Œå¤šäºçš„ç©ºé—²çº¿ç¨‹æœ€å¤šå­˜æ´»æ—¶é—´</p>
<p>unit - keepAliveTime å‚æ•°çš„æ—¶é—´å•ä½ã€‚</p>
<p>workQueue - å½“çº¿ç¨‹æ•°ç›®è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ç”¨äºä¿å­˜ä»»åŠ¡çš„é˜Ÿåˆ—ã€‚ä¸»è¦æœ‰3ç§ç±»å‹çš„BlockingQueueå¯ä¾›é€‰æ‹©ï¼šæ— ç•Œé˜Ÿåˆ—ï¼Œæœ‰ç•Œé˜Ÿåˆ—å’ŒåŒæ­¥ç§»äº¤ã€‚å°†åœ¨ä¸‹æ–‡ä¸­è¯¦ç»†é˜è¿°ã€‚ä»å‚æ•°ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ­¤é˜Ÿåˆ—ä»…ä¿å­˜å®ç°Runnableæ¥å£çš„ä»»åŠ¡ã€‚ åˆ«çœ‹è¿™ä¸ªå‚æ•°ä½ç½®å¾ˆé åï¼Œä½†æ˜¯çœŸçš„å¾ˆé‡è¦ï¼Œå› ä¸ºæ¥¼ä¸»çš„å‘å°±å› è¿™ä¸ªå‚æ•°è€Œèµ·ï¼Œè¿™äº›ç»†èŠ‚æœ‰å¿…è¦ä»”ç»†äº†è§£æ¸…æ¥šã€‚</p>
<p>threadFactory - æ‰§è¡Œç¨‹åºåˆ›å»ºæ–°çº¿ç¨‹æ—¶ä½¿ç”¨çš„å·¥å‚ã€‚</p>
<p>handler - é˜»å¡é˜Ÿåˆ—å·²æ»¡ä¸”çº¿ç¨‹æ•°è¾¾åˆ°æœ€å¤§å€¼æ—¶æ‰€é‡‡å–çš„é¥±å’Œç­–ç•¥ã€‚javaé»˜è®¤æä¾›äº†4ç§é¥±å’Œç­–ç•¥çš„å®ç°æ–¹å¼ï¼šä¸­æ­¢ã€æŠ›å¼ƒã€æŠ›å¼ƒæœ€æ—§çš„ã€è°ƒç”¨è€…è¿è¡Œã€‚å°†åœ¨ä¸‹æ–‡ä¸­è¯¦ç»†é˜è¿°ã€‚</p>
<h2 id="2-å¯é€‰æ‹©çš„é˜»å¡é˜Ÿåˆ—BlockingQueueè¯¦è§£"><a href="#2-å¯é€‰æ‹©çš„é˜»å¡é˜Ÿåˆ—BlockingQueueè¯¦è§£" class="headerlink" title="2. å¯é€‰æ‹©çš„é˜»å¡é˜Ÿåˆ—BlockingQueueè¯¦è§£"></a>2. å¯é€‰æ‹©çš„é˜»å¡é˜Ÿåˆ—BlockingQueueè¯¦è§£</h2><p>åœ¨é‡å¤ä¸€ä¸‹æ–°ä»»åŠ¡è¿›å…¥æ—¶çº¿ç¨‹æ± çš„æ‰§è¡Œç­–ç•¥ï¼š<br>å¦‚æœè¿è¡Œçš„çº¿ç¨‹å°‘äºcorePoolSizeï¼Œåˆ™ Executorå§‹ç»ˆé¦–é€‰æ·»åŠ æ–°çš„çº¿ç¨‹ï¼Œè€Œä¸è¿›è¡Œæ’é˜Ÿã€‚ï¼ˆå¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹å°äºcorePoolSizeï¼Œåˆ™ä»»åŠ¡æ ¹æœ¬ä¸ä¼šå­˜å…¥queueä¸­ï¼Œè€Œæ˜¯ç›´æ¥è¿è¡Œï¼‰<br>å¦‚æœè¿è¡Œçš„çº¿ç¨‹å¤§äºç­‰äº corePoolSizeï¼Œåˆ™ Executorå§‹ç»ˆé¦–é€‰å°†è¯·æ±‚åŠ å…¥é˜Ÿåˆ—ï¼Œè€Œä¸æ·»åŠ æ–°çš„çº¿ç¨‹ã€‚<br>å¦‚æœæ— æ³•å°†è¯·æ±‚åŠ å…¥é˜Ÿåˆ—ï¼Œåˆ™åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œé™¤éåˆ›å»ºæ­¤çº¿ç¨‹è¶…å‡º maximumPoolSizeï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»»åŠ¡å°†è¢«æ‹’ç»ã€‚<br>ä¸»è¦æœ‰3ç§ç±»å‹çš„BlockingQueueï¼š</p>
<p>æ— ç•Œé˜Ÿåˆ—</p>
<p>é˜Ÿåˆ—å¤§å°æ— é™åˆ¶ï¼Œå¸¸ç”¨çš„ä¸ºæ— ç•Œçš„LinkedBlockingQueueï¼Œä½¿ç”¨è¯¥é˜Ÿåˆ—åšä¸ºé˜»å¡é˜Ÿåˆ—æ—¶è¦å°¤å…¶å½“å¿ƒï¼Œå½“ä»»åŠ¡è€—æ—¶è¾ƒé•¿æ—¶å¯èƒ½ä¼šå¯¼è‡´å¤§é‡æ–°ä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­å †ç§¯æœ€ç»ˆå¯¼è‡´OOMã€‚é˜…è¯»ä»£ç å‘ç°ï¼ŒExecutors.newFixedThreadPool é‡‡ç”¨å°±æ˜¯ LinkedBlockingQueueï¼Œè€Œæ¥¼ä¸»è¸©åˆ°çš„å°±æ˜¯è¿™ä¸ªå‘ï¼Œå½“QPSå¾ˆé«˜ï¼Œå‘é€æ•°æ®å¾ˆå¤§ï¼Œå¤§é‡çš„ä»»åŠ¡è¢«æ·»åŠ åˆ°è¿™ä¸ªæ— ç•ŒLinkedBlockingQueue ä¸­ï¼Œå¯¼è‡´cpuå’Œå†…å­˜é£™å‡æœåŠ¡å™¨æŒ‚æ‰ã€‚</p>
<p>æœ‰ç•Œé˜Ÿåˆ—</p>
<p>å¸¸ç”¨çš„æœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯éµå¾ªFIFOåŸåˆ™çš„é˜Ÿåˆ—å¦‚ArrayBlockingQueueä¸æœ‰ç•Œçš„LinkedBlockingQueueï¼Œå¦ä¸€ç±»æ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—å¦‚PriorityBlockingQueueã€‚PriorityBlockingQueueä¸­çš„ä¼˜å…ˆçº§ç”±ä»»åŠ¡çš„Comparatorå†³å®šã€‚<br>ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—æ—¶é˜Ÿåˆ—å¤§å°éœ€å’Œçº¿ç¨‹æ± å¤§å°äº’ç›¸é…åˆï¼Œçº¿ç¨‹æ± è¾ƒå°æœ‰ç•Œé˜Ÿåˆ—è¾ƒå¤§æ—¶å¯å‡å°‘å†…å­˜æ¶ˆè€—ï¼Œé™ä½cpuä½¿ç”¨ç‡å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä½†æ˜¯å¯èƒ½ä¼šé™åˆ¶ç³»ç»Ÿååé‡ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ä¿®å¤æ–¹æ¡ˆä¸­ï¼Œé€‰æ‹©çš„å°±æ˜¯è¿™ä¸ªç±»å‹çš„é˜Ÿåˆ—ï¼Œè™½ç„¶ä¼šæœ‰éƒ¨åˆ†ä»»åŠ¡è¢«ä¸¢å¤±ï¼Œä½†æ˜¯æˆ‘ä»¬çº¿ä¸Šæ˜¯æ’åºæ—¥å¿—æœé›†ä»»åŠ¡ï¼Œæ‰€ä»¥å¯¹éƒ¨åˆ†å¯¹ä¸¢å¤±æ˜¯å¯ä»¥å®¹å¿çš„ã€‚</p>
<p>åŒæ­¥ç§»äº¤é˜Ÿåˆ—</p>
<p>å¦‚æœä¸å¸Œæœ›ä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…è€Œæ˜¯å¸Œæœ›å°†ä»»åŠ¡ç›´æ¥ç§»äº¤ç»™å·¥ä½œçº¿ç¨‹ï¼Œå¯ä½¿ç”¨SynchronousQueueä½œä¸ºç­‰å¾…é˜Ÿåˆ—ã€‚SynchronousQueueä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯ä¸€ç§çº¿ç¨‹ä¹‹é—´ç§»äº¤çš„æœºåˆ¶ã€‚è¦å°†ä¸€ä¸ªå…ƒç´ æ”¾å…¥SynchronousQueueä¸­ï¼Œå¿…é¡»æœ‰å¦ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ç­‰å¾…æ¥æ”¶è¿™ä¸ªå…ƒç´ ã€‚åªæœ‰åœ¨ä½¿ç”¨æ— ç•Œçº¿ç¨‹æ± æˆ–è€…æœ‰é¥±å’Œç­–ç•¥æ—¶æ‰å»ºè®®ä½¿ç”¨è¯¥é˜Ÿåˆ—ã€‚</p>
<h2 id="3-å¯é€‰æ‹©çš„é¥±å’Œç­–ç•¥RejectedExecutionHandlerè¯¦è§£"><a href="#3-å¯é€‰æ‹©çš„é¥±å’Œç­–ç•¥RejectedExecutionHandlerè¯¦è§£" class="headerlink" title="3. å¯é€‰æ‹©çš„é¥±å’Œç­–ç•¥RejectedExecutionHandlerè¯¦è§£"></a>3. å¯é€‰æ‹©çš„é¥±å’Œç­–ç•¥RejectedExecutionHandlerè¯¦è§£</h2><p>JDKä¸»è¦æä¾›äº†4ç§é¥±å’Œç­–ç•¥ä¾›é€‰æ‹©ã€‚4ç§ç­–ç•¥éƒ½åšä¸ºé™æ€å†…éƒ¨ç±»åœ¨ThreadPoolExcutorä¸­è¿›è¡Œå®ç°ã€‚</p>
<h2 id="3-1-AbortPolicyä¸­æ­¢ç­–ç•¥"><a href="#3-1-AbortPolicyä¸­æ­¢ç­–ç•¥" class="headerlink" title="3.1 AbortPolicyä¸­æ­¢ç­–ç•¥"></a>3.1 AbortPolicyä¸­æ­¢ç­–ç•¥</h2><p>è¯¥ç­–ç•¥æ˜¯é»˜è®¤é¥±å’Œç­–ç•¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public void rejectedExecution(Runnable r, ThreadPoolExecutor e) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            throw new RejectedExecutionException(&quot;Task &quot; + r.toString() +</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                                 &quot; rejected from &quot; +</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                                 e.toString());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¯¥ç­–ç•¥æ—¶åœ¨é¥±å’Œæ—¶ä¼šæŠ›å‡ºRejectedExecutionExceptionï¼ˆç»§æ‰¿è‡ªRuntimeExceptionï¼‰ï¼Œè°ƒç”¨è€…å¯æ•è·è¯¥å¼‚å¸¸è‡ªè¡Œå¤„ç†ã€‚</p>
<h2 id="3-2-DiscardPolicyæŠ›å¼ƒç­–ç•¥"><a href="#3-2-DiscardPolicyæŠ›å¼ƒç­–ç•¥" class="headerlink" title="3.2 DiscardPolicyæŠ›å¼ƒç­–ç•¥"></a>3.2 DiscardPolicyæŠ›å¼ƒç­–ç•¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public void rejectedExecution(Runnable r, ThreadPoolExecutor e) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä»£ç æ‰€ç¤ºï¼Œä¸åšä»»ä½•å¤„ç†ç›´æ¥æŠ›å¼ƒä»»åŠ¡</p>
<h2 id="3-3-DiscardOldestPolicyæŠ›å¼ƒæ—§ä»»åŠ¡ç­–ç•¥"><a href="#3-3-DiscardOldestPolicyæŠ›å¼ƒæ—§ä»»åŠ¡ç­–ç•¥" class="headerlink" title="3.3 DiscardOldestPolicyæŠ›å¼ƒæ—§ä»»åŠ¡ç­–ç•¥"></a>3.3 DiscardOldestPolicyæŠ›å¼ƒæ—§ä»»åŠ¡ç­–ç•¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public void rejectedExecution(Runnable r, ThreadPoolExecutor e) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            if (!e.isShutdown()) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                e.getQueue().poll();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                e.execute(r);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä»£ç ï¼Œå…ˆå°†é˜»å¡é˜Ÿåˆ—ä¸­çš„å¤´å…ƒç´ å‡ºé˜ŸæŠ›å¼ƒï¼Œå†å°è¯•æäº¤ä»»åŠ¡ã€‚å¦‚æœæ­¤æ—¶é˜»å¡é˜Ÿåˆ—ä½¿ç”¨PriorityBlockingQueueä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå°†ä¼šå¯¼è‡´ä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡è¢«æŠ›å¼ƒï¼Œå› æ­¤ä¸å»ºè®®å°†è¯¥ç§ç­–ç•¥é…åˆä¼˜å…ˆçº§é˜Ÿåˆ—ä½¿ç”¨ã€‚</p>
<h2 id="3-4-CallerRunsPolicyè°ƒç”¨è€…è¿è¡Œ"><a href="#3-4-CallerRunsPolicyè°ƒç”¨è€…è¿è¡Œ" class="headerlink" title="3.4 CallerRunsPolicyè°ƒç”¨è€…è¿è¡Œ"></a>3.4 CallerRunsPolicyè°ƒç”¨è€…è¿è¡Œ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public void rejectedExecution(Runnable r, ThreadPoolExecutor e) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            if (!e.isShutdown()) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                r.run();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¢ä¸æŠ›å¼ƒä»»åŠ¡ä¹Ÿä¸æŠ›å‡ºå¼‚å¸¸ï¼Œç›´æ¥è¿è¡Œä»»åŠ¡çš„runæ–¹æ³•ï¼Œæ¢è¨€ä¹‹å°†ä»»åŠ¡å›é€€ç»™è°ƒç”¨è€…æ¥ç›´æ¥è¿è¡Œã€‚ä½¿ç”¨è¯¥ç­–ç•¥æ—¶çº¿ç¨‹æ± é¥±å’Œåå°†ç”±è°ƒç”¨çº¿ç¨‹æ± çš„ä¸»çº¿ç¨‹è‡ªå·±æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå› æ­¤åœ¨æ‰§è¡Œä»»åŠ¡çš„è¿™æ®µæ—¶é—´é‡Œä¸»çº¿ç¨‹æ— æ³•å†æäº¤æ–°ä»»åŠ¡ï¼Œä»è€Œä½¿çº¿ç¨‹æ± ä¸­å·¥ä½œçº¿ç¨‹æœ‰æ—¶é—´å°†æ­£åœ¨å¤„ç†çš„ä»»åŠ¡å¤„ç†å®Œæˆã€‚</p>
<h2 id="4-Javaæä¾›çš„å››ç§å¸¸ç”¨çº¿ç¨‹æ± è§£æ"><a href="#4-Javaæä¾›çš„å››ç§å¸¸ç”¨çº¿ç¨‹æ± è§£æ" class="headerlink" title="4. Javaæä¾›çš„å››ç§å¸¸ç”¨çº¿ç¨‹æ± è§£æ"></a>4. Javaæä¾›çš„å››ç§å¸¸ç”¨çº¿ç¨‹æ± è§£æ</h2><p>æ—¢ç„¶æ¥¼ä¸»è¸©å‘å°±æ˜¯ä½¿ç”¨äº† JDK çš„é»˜è®¤å®ç°ï¼Œé‚£ä¹ˆå†æ¥çœ‹çœ‹è¿™äº›é»˜è®¤å®ç°åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Œå°è£…äº†å“ªäº›å‚æ•°ã€‚ç®€è€Œè¨€ä¹‹ Executors å·¥å‚æ–¹æ³•Executors.newCachedThreadPool() æä¾›äº†æ— ç•Œçº¿ç¨‹æ± ï¼Œå¯ä»¥è¿›è¡Œè‡ªåŠ¨çº¿ç¨‹å›æ”¶ï¼›Executors.newFixedThreadPool(int) æä¾›äº†å›ºå®šå¤§å°çº¿ç¨‹æ± ï¼Œå†…éƒ¨ä½¿ç”¨æ— ç•Œé˜Ÿåˆ—ï¼›Executors.newSingleThreadExecutor() æä¾›äº†å•ä¸ªåå°çº¿ç¨‹ã€‚</p>
<p>è¯¦ç»†ä»‹ç»ä¸€ä¸‹ä¸Šè¿°å››ç§çº¿ç¨‹æ± ã€‚</p>
<h2 id="4-1-newCachedThreadPool"><a href="#4-1-newCachedThreadPool" class="headerlink" title="4.1 newCachedThreadPool"></a>4.1 newCachedThreadPool</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public static ExecutorService newCachedThreadPool() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        return new ThreadPoolExecutor(0, Integer.MAX_VALUE,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                      60L, TimeUnit.SECONDS,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                      new SynchronousQueue&lt;Runnable&gt;());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨newCachedThreadPoolä¸­å¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚<br>åˆçœ‹è¯¥æ„é€ å‡½æ•°æ—¶æˆ‘æœ‰è¿™æ ·çš„ç–‘æƒ‘ï¼šæ ¸å¿ƒçº¿ç¨‹æ± ä¸º0ï¼Œé‚£æŒ‰ç…§å‰é¢æ‰€è®²çš„çº¿ç¨‹æ± ç­–ç•¥æ–°ä»»åŠ¡æ¥ä¸´æ—¶æ— æ³•è¿›å…¥æ ¸å¿ƒçº¿ç¨‹æ± ï¼Œåªèƒ½è¿›å…¥ SynchronousQueueä¸­è¿›è¡Œç­‰å¾…ï¼Œè€ŒSynchronousQueueçš„å¤§å°ä¸º1ï¼Œé‚£å²‚ä¸æ˜¯ç¬¬ä¸€ä¸ªä»»åŠ¡åˆ°è¾¾æ—¶åªèƒ½ç­‰å¾…åœ¨é˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°ç¬¬äºŒä¸ªä»»åŠ¡åˆ°è¾¾å‘ç°æ— æ³•è¿›å…¥é˜Ÿåˆ—æ‰èƒ½åˆ›å»ºç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Ÿ<br>è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆåœ¨ä¸Šé¢è®²SynchronousQueueæ—¶å…¶å®å·²ç»ç»™å‡ºäº†ï¼Œè¦å°†ä¸€ä¸ªå…ƒç´ æ”¾å…¥SynchronousQueueä¸­ï¼Œå¿…é¡»æœ‰å¦ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ç­‰å¾…æ¥æ”¶è¿™ä¸ªå…ƒç´ ã€‚å› æ­¤å³ä¾¿SynchronousQueueä¸€å¼€å§‹ä¸ºç©ºä¸”å¤§å°ä¸º1ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡ä¹Ÿæ— æ³•æ”¾å…¥å…¶ä¸­ï¼Œå› ä¸ºæ²¡æœ‰çº¿ç¨‹åœ¨ç­‰å¾…ä»SynchronousQueueä¸­å–èµ°å…ƒç´ ã€‚å› æ­¤ç¬¬ä¸€ä¸ªä»»åŠ¡åˆ°è¾¾æ—¶ä¾¿ä¼šåˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</p>
<h2 id="4-2-newFixedThreadPool"><a href="#4-2-newFixedThreadPool" class="headerlink" title="4.2 newFixedThreadPool"></a>4.2 newFixedThreadPool</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public static ExecutorService newFixedThreadPool(int nThreads) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       return new ThreadPoolExecutor(nThreads, nThreads,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                     0L, TimeUnit.MILLISECONDS,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                     new LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹ä»£ç ä¸€ç›®äº†ç„¶äº†ï¼Œçº¿ç¨‹æ•°é‡å›ºå®šï¼Œä½¿ç”¨æ— é™å¤§çš„é˜Ÿåˆ—ã€‚å†æ¬¡å¼ºè°ƒï¼Œæ¥¼ä¸»å°±æ˜¯è¸©çš„è¿™ä¸ªæ— é™å¤§é˜Ÿåˆ—çš„å‘ã€‚</p>
<h2 id="4-3-newScheduledThreadPool"><a href="#4-3-newScheduledThreadPool" class="headerlink" title="4.3 newScheduledThreadPool"></a>4.3 newScheduledThreadPool</h2><p>åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        return new ScheduledThreadPoolExecutor(corePoolSize);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ¥çœ‹çœ‹ScheduledThreadPoolExecutorï¼ˆï¼‰çš„æ„é€ å‡½æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public ScheduledThreadPoolExecutor(int corePoolSize) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       super(corePoolSize, Integer.MAX_VALUE, 0, NANOSECONDS,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">             new DelayedWorkQueue());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>ScheduledThreadPoolExecutorçš„çˆ¶ç±»å³ThreadPoolExecutorï¼Œå› æ­¤è¿™é‡Œå„å‚æ•°å«ä¹‰å’Œä¸Šé¢ä¸€æ ·ã€‚å€¼å¾—å…³å¿ƒçš„æ˜¯DelayedWorkQueueè¿™ä¸ªé˜»å¡å¯¹åˆ—ï¼Œåœ¨ä¸Šé¢æ²¡æœ‰ä»‹ç»ï¼Œå®ƒä½œä¸ºé™æ€å†…éƒ¨ç±»å°±åœ¨ScheduledThreadPoolExecutorä¸­è¿›è¡Œäº†å®ç°ã€‚ç®€å•çš„è¯´ï¼ŒDelayedWorkQueueæ˜¯ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ï¼Œå®ƒèƒ½æŒ‰ä¸€å®šçš„é¡ºåºå¯¹å·¥ä½œé˜Ÿåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ’åˆ—ã€‚</p>
<h2 id="4-4-newSingleThreadExecutor"><a href="#4-4-newSingleThreadExecutor" class="headerlink" title="4.4 newSingleThreadExecutor"></a>4.4 newSingleThreadExecutor</h2><p>åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public static ScheduledExecutorService newSingleThreadScheduledExecutor() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        return new DelegatedScheduledExecutorService</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            (new ScheduledThreadPoolExecutor(1));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆnewäº†ä¸€ä¸ªçº¿ç¨‹æ•°ç›®ä¸º 1 çš„ScheduledThreadPoolExecutorï¼Œå†æŠŠè¯¥å¯¹è±¡ä¼ å…¥DelegatedScheduledExecutorServiceä¸­ï¼Œçœ‹çœ‹DelegatedScheduledExecutorServiceçš„å®ç°ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DelegatedScheduledExecutorService(ScheduledExecutorService executor) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            super(executor);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            e = executor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨çœ‹çœ‹å®ƒçš„çˆ¶ç±»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DelegatedExecutorService(ExecutorService executor) &#123; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">           e = executor; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯ä½¿ç”¨è£…é¥°æ¨¡å¼å¢å¼ºäº†ScheduledExecutorServiceï¼ˆ1ï¼‰çš„åŠŸèƒ½ï¼Œä¸ä»…ç¡®ä¿åªæœ‰ä¸€ä¸ªçº¿ç¨‹é¡ºåºæ‰§è¡Œä»»åŠ¡ï¼Œä¹Ÿä¿è¯çº¿ç¨‹æ„å¤–ç»ˆæ­¢åä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ç»§ç»­æ‰§è¡Œä»»åŠ¡ã€‚</p>
<h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>è™½ç„¶ä¹‹å‰å­¦ä¹ äº†ä¸å°‘ç›¸å…³çŸ¥è¯†ï¼Œä½†æ˜¯åªæœ‰åœ¨å®è·µä¸­è¸©å‘æ‰èƒ½å°è±¡æ·±åˆ»å§</p>
<p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zMjg2NzE4MT91dG1fc291cmNlPXdlY2hhdF9zZXNzaW9uJmFtcDt1dG1fbWVkaXVtPXNvY2lhbA==" title="https://zhuanlan.zhihu.com/p/32867181?utm_source=wechat_session&amp;utm_medium=social">åŸæ–‡åœ°å€<i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> çº¿ç¨‹æ±  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¹¶å‘ç¼–ç¨‹å’Œçº¿ç¨‹æ± ]]></title>
      <url>/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0.html</url>
      <content type="html"><![CDATA[<p>å¹¶å‘ç¼–ç¨‹å’Œçº¿ç¨‹æ± </p>
<h2 id="ç»ƒæ°”æœŸï¼ˆå¹¶å‘ç¼–ç¨‹åŸºç¡€ï¼‰"><a href="#ç»ƒæ°”æœŸï¼ˆå¹¶å‘ç¼–ç¨‹åŸºç¡€ï¼‰" class="headerlink" title="ç»ƒæ°”æœŸï¼ˆå¹¶å‘ç¼–ç¨‹åŸºç¡€ï¼‰"></a>ç»ƒæ°”æœŸï¼ˆå¹¶å‘ç¼–ç¨‹åŸºç¡€ï¼‰</h2><h3 id="ç»ƒæ°”æœŸä¸€å±‚ï¼ˆthisï¼‰"><a href="#ç»ƒæ°”æœŸä¸€å±‚ï¼ˆthisï¼‰" class="headerlink" title="ç»ƒæ°”æœŸä¸€å±‚ï¼ˆthisï¼‰"></a>ç»ƒæ°”æœŸä¸€å±‚ï¼ˆthisï¼‰</h3><p><em>synchronized(this)å’Œsynchronizedæ–¹æ³•éƒ½æ˜¯é”å½“å‰å¯¹è±¡ã€‚</em></p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_01</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;  <span class="comment">// å­˜åœ¨å †ä¸­</span></span><br><span class="line">    <span class="keyword">private</span> Object o = <span class="keyword">new</span> Object();    <span class="comment">// å­˜åœ¨å †ä¸­</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤šä¸ªçº¿ç¨‹éƒ½èƒ½æ‰¾åˆ°çš„ï¼Œéƒ½èƒ½è®¿é—®çš„å¯¹è±¡å«ä¸´ç•Œèµ„æºå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSync1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (o) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()</span><br><span class="line">                    + <span class="string">" count = "</span> + count++);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSync2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()</span><br><span class="line">                    + <span class="string">" count = "</span> + count++);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">testSync3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()</span><br><span class="line">                + <span class="string">" count = "</span> + count++);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_01 t = <span class="keyword">new</span> Test_01();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.testSync3();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.testSync3();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸäºŒå±‚ï¼ˆstaticï¼‰"><a href="#ç»ƒæ°”æœŸäºŒå±‚ï¼ˆstaticï¼‰" class="headerlink" title="ç»ƒæ°”æœŸäºŒå±‚ï¼ˆstaticï¼‰"></a>ç»ƒæ°”æœŸäºŒå±‚ï¼ˆstaticï¼‰</h3><p><em>é™æ€åŒæ­¥æ–¹æ³•ï¼Œé”çš„æ˜¯å½“å‰ç±»å‹çš„ç±»å¯¹è±¡ã€‚</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_02</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> staticCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">testSync4</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() </span><br><span class="line">                + <span class="string">" staticCount = "</span> + staticCount++);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testSync5</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(Test_02.class)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() </span><br><span class="line">                    + <span class="string">" staticCount = "</span> + staticCount++);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸä¸‰å±‚ï¼ˆåŸå­æ€§ï¼‰"><a href="#ç»ƒæ°”æœŸä¸‰å±‚ï¼ˆåŸå­æ€§ï¼‰" class="headerlink" title="ç»ƒæ°”æœŸä¸‰å±‚ï¼ˆåŸå­æ€§ï¼‰"></a>ç»ƒæ°”æœŸä¸‰å±‚ï¼ˆåŸå­æ€§ï¼‰</h3><p><em>åŠ é”çš„ç›®çš„å°±æ˜¯ä¸ºäº†ä¿è¯æ“ä½œçš„åŸå­æ€§</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_03</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="comment">/*synchronized*/</span> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()</span><br><span class="line">                + <span class="string">" count = "</span> + count++);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Test_03 t = <span class="keyword">new</span> Test_03();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(t, <span class="string">"Thread - "</span> + i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸå››å±‚ï¼ˆåŒæ­¥ä¸éåŒæ­¥æ–¹æ³•é—´è°ƒç”¨ï¼‰"><a href="#ç»ƒæ°”æœŸå››å±‚ï¼ˆåŒæ­¥ä¸éåŒæ­¥æ–¹æ³•é—´è°ƒç”¨ï¼‰" class="headerlink" title="ç»ƒæ°”æœŸå››å±‚ï¼ˆåŒæ­¥ä¸éåŒæ­¥æ–¹æ³•é—´è°ƒç”¨ï¼‰"></a>ç»ƒæ°”æœŸå››å±‚ï¼ˆåŒæ­¥ä¸éåŒæ­¥æ–¹æ³•é—´è°ƒç”¨ï¼‰</h3><p><em>åŒæ­¥æ–¹æ³•åªå½±å“é”å®šåŒä¸€ä¸ªé”å¯¹è±¡çš„åŒæ­¥æ–¹æ³•ã€‚ä¸å½±å“å…¶ä»–çº¿ç¨‹è°ƒç”¨éåŒæ­¥æ–¹æ³•ï¼Œæˆ–è°ƒç”¨å…¶ä»–é”èµ„æºçš„åŒæ­¥æ–¹æ³•ã€‚</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_04</span> </span>&#123;</span><br><span class="line">    Object o = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span> </span>&#123; <span class="comment">// é‡é‡çº§çš„è®¿é—®æ“ä½œã€‚</span></span><br><span class="line">        System.out.println(<span class="string">"public synchronized void m1() start"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"public synchronized void m1() end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (o) &#123;</span><br><span class="line">            System.out.println(<span class="string">"public void m3() start"</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1500</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"public void m3() end"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"public void m2() start"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1500</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"public void m2() end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread01</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyThread01</span><span class="params">(<span class="keyword">int</span> i, Test_04 t)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.i = i;</span><br><span class="line">            <span class="keyword">this</span>.t = t;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        Test_04 t;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">                t.m1();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                t.m2();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                t.m3();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Test_04 t = <span class="keyword">new</span> Test_04();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Test_04.MyThread01(<span class="number">0</span>, t)).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Test_04.MyThread01(<span class="number">1</span>, t)).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Test_04.MyThread01(-<span class="number">1</span>, t)).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸäº”å±‚ï¼ˆå­˜åœ¨åŸå­æ€§é—®é¢˜ï¼‰"><a href="#ç»ƒæ°”æœŸäº”å±‚ï¼ˆå­˜åœ¨åŸå­æ€§é—®é¢˜ï¼‰" class="headerlink" title="ç»ƒæ°”æœŸäº”å±‚ï¼ˆå­˜åœ¨åŸå­æ€§é—®é¢˜ï¼‰"></a>ç»ƒæ°”æœŸäº”å±‚ï¼ˆå­˜åœ¨åŸå­æ€§é—®é¢˜ï¼‰</h3><p><em>åŒæ­¥æ–¹æ³•åªèƒ½ä¿è¯å½“å‰æ–¹æ³•çš„åŸå­æ€§ï¼Œä¸èƒ½ä¿è¯å¤šä¸ªä¸šåŠ¡æ–¹æ³•ä¹‹é—´çš„äº’ç›¸è®¿é—®çš„åŸå­æ€§ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå•†ä¸šé¡¹ç›®ä¸­ï¼Œä¸è€ƒè™‘ä¸šåŠ¡é€»è¾‘ä¸Šçš„è„è¯»é—®é¢˜ã€‚å¦‚ä½ ä¹°ä¸œè¥¿ä¸‹è®¢å•åï¼Œæç¤ºè®¢å•å·²ä¸‹ï¼ŒæŸ¥è¯¢æ—¶å€™ï¼Œå¯èƒ½çœ‹ä¸åˆ°ã€‚ä¸€èˆ¬æˆ‘ä»¬åªå…³æ³¨æ•°æ®è„è¯»ã€‚ä½†æ˜¯åœ¨é‡‘èé¢†åŸŸï¼Œä¿é™©é¢†åŸŸä¸¥æ ¼è¦æ±‚ã€‚</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_05</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> d = <span class="number">0.0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">(<span class="keyword">double</span> d)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ç›¸å½“äºå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚</span></span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.d = d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">m2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_05 t = <span class="keyword">new</span> Test_05();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m1(<span class="number">100</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">        System.out.println(t.m2());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(t.m2());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸå…­å±‚ï¼ˆé”å¯é‡å…¥ï¼‰"><a href="#ç»ƒæ°”æœŸå…­å±‚ï¼ˆé”å¯é‡å…¥ï¼‰" class="headerlink" title="ç»ƒæ°”æœŸå…­å±‚ï¼ˆé”å¯é‡å…¥ï¼‰"></a>ç»ƒæ°”æœŸå…­å±‚ï¼ˆé”å¯é‡å…¥ï¼‰</h3><p><em>åŒä¸€ä¸ªçº¿ç¨‹ï¼Œå¤šæ¬¡è°ƒç”¨åŒæ­¥ä»£ç ï¼Œé”å®šåŒä¸€ä¸ªé”å¯¹è±¡ï¼Œå¯é‡å…¥ã€‚</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_06</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span></span>&#123; <span class="comment">// é”this</span></span><br><span class="line">        System.out.println(<span class="string">"m1 start"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        m2();</span><br><span class="line">        System.out.println(<span class="string">"m1 end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span></span>&#123; <span class="comment">// é”this</span></span><br><span class="line">        System.out.println(<span class="string">"m2 start"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"m2 end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Test_06().m1();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸä¸ƒå±‚ï¼ˆè°ƒç”¨çˆ¶ç±»çš„åŒæ­¥æ–¹æ³•ï¼‰"><a href="#ç»ƒæ°”æœŸä¸ƒå±‚ï¼ˆè°ƒç”¨çˆ¶ç±»çš„åŒæ­¥æ–¹æ³•ï¼‰" class="headerlink" title="ç»ƒæ°”æœŸä¸ƒå±‚ï¼ˆè°ƒç”¨çˆ¶ç±»çš„åŒæ­¥æ–¹æ³•ï¼‰"></a>ç»ƒæ°”æœŸä¸ƒå±‚ï¼ˆè°ƒç”¨çˆ¶ç±»çš„åŒæ­¥æ–¹æ³•ï¼‰</h3><p><em>å­ç±»åŒæ­¥æ–¹æ³•è¦†ç›–çˆ¶ç±»åŒæ­¥æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šè°ƒç”¨çˆ¶ç±»çš„åŒæ­¥æ–¹æ³•ï¼Œ ç›¸å½“äºé”çš„é‡å…¥ã€‚çˆ¶ç±»çš„æ–¹æ³• &lt;&lt;==&gt;&gt; æœ¬ç±»çš„æ–¹æ³•</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_07</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Super Class m start"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"Super Class m end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Sub_Test_07().m();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub_Test_07</span> <span class="keyword">extends</span> <span class="title">Test_07</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Sub Class m start"</span>);</span><br><span class="line">        <span class="keyword">super</span>.m();</span><br><span class="line">        System.out.println(<span class="string">"Sub Class m end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸå…«å±‚ï¼ˆé”ä¸å¼‚å¸¸ï¼‰"><a href="#ç»ƒæ°”æœŸå…«å±‚ï¼ˆé”ä¸å¼‚å¸¸ï¼‰" class="headerlink" title="ç»ƒæ°”æœŸå…«å±‚ï¼ˆé”ä¸å¼‚å¸¸ï¼‰"></a>ç»ƒæ°”æœŸå…«å±‚ï¼ˆé”ä¸å¼‚å¸¸ï¼‰</h3><p><em>å½“åŒæ­¥æ–¹æ³•ä¸­å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼Œè‡ªåŠ¨é‡Šæ”¾é”èµ„æºï¼Œä¸ä¼šå½±å“å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œã€‚æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯åœ¨åŒæ­¥ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸å¦‚ä½•å¤„ç†â€”â€”â€” try/catch ã€‚å¦‚å­˜é’±æ—¶ï¼Œå‘é€ç½‘ç»œä¸­æ–­ï¼ŒæŸ¥è¯¢çš„æ—¶å€™æŸ¥åˆ°å¤šå°‘é’±ï¼Œå­˜çš„é’±è¦è¿”è¿˜</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_08</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">" - start"</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">" - "</span> + i);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/*if(i == 5)&#123;</span></span><br><span class="line"><span class="comment">                i = 1/0;</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line">            <span class="comment">//æ¨¡æ‹Ÿå­˜é’±ï¼Œä¸­æ–­å¤„ç†</span></span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    i = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    i = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_08 t = <span class="keyword">new</span> Test_08();</span><br><span class="line">        <span class="comment">// é”çš„æ˜¯å½“å‰å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">"t1"</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">"t2"</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸä¹å±‚ï¼ˆvolatileï¼‰"><a href="#ç»ƒæ°”æœŸä¹å±‚ï¼ˆvolatileï¼‰" class="headerlink" title="ç»ƒæ°”æœŸä¹å±‚ï¼ˆvolatileï¼‰"></a>ç»ƒæ°”æœŸä¹å±‚ï¼ˆvolatileï¼‰</h3><p><em>cpué»˜è®¤æŸ¥è¯¢cpuçš„é«˜é€Ÿç¼“å­˜åŒºåŸŸï¼ŒCPUä¸­æ¯ä¸€ä¸ªæ ¸éƒ½æœ‰è‡ªå·±çš„ç¼“å­˜ï¼Œå½“cpuæœ‰ä¸­æ–­çš„æ—¶å€™ï¼Œä»–å¯èƒ½æ¸…ç©ºé«˜é€Ÿç¼“å­˜åŒºåŸŸæ•°æ®ï¼Œé‡æ–°ä»å†…å­˜ä¸­è¯»å–æ•°æ®ã€‚volatileæ”¹å˜å†…å­˜ä¸­çš„æ•°æ®ï¼Œé€šçŸ¥åº•å±‚OSç³»ç»Ÿï¼Œæ¯æ¬¡ä½¿ç”¨bçš„æ—¶å€™ï¼Œæœ€å¥½çœ‹ä¸‹å†…å­˜æ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŠ¨ã€‚å³volatileåšçš„æ˜¯ä¸€ä¸ªé€šçŸ¥OSç³»ç»Ÿçš„ä½œã€‚</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_09</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">boolean</span> b = <span class="keyword">true</span>;    <span class="comment">//çº¿ç¨‹å¯è§æ€§é—®é¢˜</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start"</span>);</span><br><span class="line">        <span class="keyword">while</span>(b)&#123;&#125;</span><br><span class="line">        System.out.println(<span class="string">"end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_09 t = <span class="keyword">new</span> Test_09();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        t.b = <span class="keyword">false</span>;    <span class="comment">//å †ç©ºé—´çš„å¯¹è±¡ï¼Œçº¿ç¨‹å…±äº«</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>volatileçš„éåŸå­æ€§é—®é¢˜ï¼Œåªèƒ½ä¿è¯å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ã€‚</em></p>
<p><em>é‚£ä»€ä¹ˆæ—¶å€™ä½¿ç”¨volatileï¼Ÿæ£‹ç‰Œå®¤çš„äººæ•°ï¼Œæ–°å¢çš„äººæœ‰ä¸€ä¸ªçº¿ç¨‹å»+1ã€‚è¿™æ˜¯å¯ä»¥ä½¿ç”¨volatile</em></p>
<p><em>join()å¤šä¸ªçº¿ç¨‹åœ¨è¿è¡Œç»“æŸæ—¶ï¼Œæˆ‘æŠŠå¤šä¸ªçº¿ç¨‹å†mainçº¿ç¨‹çš„ä½ç½®è¿åœ¨ä¸€èµ·ï¼Œå½“å…¶ä»–çº¿ç¨‹éƒ½ç»“æŸï¼Œå³ä¿è¯åœ¨æ‰€æœ‰çº¿ç¨‹å¾ªç¯æ‰§è¡Œ+1åï¼Œå†æ‰§è¡Œmainçº¿ç¨‹æ‰“å°ã€‚</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_10</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*synchronized*/</span> <span class="function"><span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;    <span class="comment">//ä¿è¯åŸå­æ€§çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨synchronizedæˆ–è€…æ˜¯Atomic</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_10 t = <span class="keyword">new</span> Test_10();</span><br><span class="line">        List&lt;Thread&gt; threads = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            threads.add(<span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    t.m();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Thread thread : threads) &#123;</span><br><span class="line">            thread.start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Thread thread : threads) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                thread.join();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(t.count);    <span class="comment">//ç†è®ºä¸Šæ˜¯10wã€‚å®é™…å°‘äºè¿™ä¸ªæ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸåå±‚ï¼ˆAtomicXxxï¼‰"><a href="#ç»ƒæ°”æœŸåå±‚ï¼ˆAtomicXxxï¼‰" class="headerlink" title="ç»ƒæ°”æœŸåå±‚ï¼ˆAtomicXxxï¼‰"></a>ç»ƒæ°”æœŸåå±‚ï¼ˆAtomicXxxï¼‰</h3><p><em>ä»€ä¹ˆæ—¶å€™æœ‰åŸå­æ€§ï¼Œæ²¡æœ‰å¯è§æ€§ï¼Ÿ</em></p>
<p><em>ç­”ï¼šæ‰€è°“åŸå­æ€§æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼Œå…¶ç»“æœå¿…é¡»ä¿è¯æ­£ç¡®æ€§ã€‚</em>æ‰€è°“å¯è§æ€§æ˜¯æŒ‡å¤šçº¿ç¨‹é—´å¯ä»¥çœ‹æœ€ç»ˆç»“æœçš„å˜é‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_11</span> </span>&#123;</span><br><span class="line">    AtomicInteger count = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            <span class="comment">/*if(count.get() &lt; 1000)*/</span></span><br><span class="line">            count.incrementAndGet();    <span class="comment">//ç›¸å½“äº++count,count.getAndAccumulate()æ˜¯count++;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_11 t = <span class="keyword">new</span> Test_11();</span><br><span class="line">        List&lt;Thread&gt; threads = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            threads.add(<span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    t.m();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Thread thread : threads) &#123;</span><br><span class="line">            thread.start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Thread thread : threads) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                thread.join();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(t.count.intValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸåä¸€å±‚ï¼ˆé”å¯¹è±¡å˜æ›´ï¼‰"><a href="#ç»ƒæ°”æœŸåä¸€å±‚ï¼ˆé”å¯¹è±¡å˜æ›´ï¼‰" class="headerlink" title="ç»ƒæ°”æœŸåä¸€å±‚ï¼ˆé”å¯¹è±¡å˜æ›´ï¼‰"></a>ç»ƒæ°”æœŸåä¸€å±‚ï¼ˆé”å¯¹è±¡å˜æ›´ï¼‰</h3><ul>
<li>åŒæ­¥ä»£ç ä¸€æ—¦åŠ é”åï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªä¸´æ—¶çš„é”å¼•ç”¨æŒ‡å‘é”å¯¹è±¡ï¼Œå’ŒçœŸå®çš„å¼•ç”¨æ— ç›´æ¥å…³è”ã€‚åœ¨é”æœªé‡Šæ”¾ä¹‹å‰ï¼Œä¿®æ”¹é”å¼•ç”¨ï¼Œä¸ä¼šå½±å“åŒæ­¥ä»£ç çš„æ‰§è¡Œã€‚</li>
<li>æˆ‘ä»¬æ‰“å°çš„æ˜¯Test_13ä¸­çš„oã€‚ä¸æ˜¯é”å¼•ç”¨çš„_O;ä¸‹é¢synchronizedé”çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡ã€‚æ‰“å°çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_13</span> </span>&#123;</span><br><span class="line">    Object o = <span class="keyword">new</span> Object();    <span class="comment">//å˜é‡å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * return i -&gt;</span></span><br><span class="line"><span class="comment">             * int _returnValue = i; // 0;</span></span><br><span class="line"><span class="comment">             * return _returnValue;</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            i = <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">" start"</span>);</span><br><span class="line">        <span class="keyword">synchronized</span> (o) &#123;    <span class="comment">//è®¡ç®—å˜é‡å¼•ç”¨ä¸å˜é‡å¼•ç”¨ä¸æ˜¯ä¸€å›äº‹</span></span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">" - "</span> + o);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_13 t = <span class="keyword">new</span> Test_13();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">"thread1"</span>).start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">"thread2"</span>);</span><br><span class="line">        t.o = <span class="keyword">new</span> Object();</span><br><span class="line">        thread2.start();    <span class="comment">//æ›´æ”¹ä¸´ç•Œèµ„æºå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">        System.out.println(t.i);</span><br><span class="line">        System.out.println(t.a());</span><br><span class="line">        System.out.println(t.i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸåäºŒå±‚ï¼ˆCountDownLatchï¼‰"><a href="#ç»ƒæ°”æœŸåäºŒå±‚ï¼ˆCountDownLatchï¼‰" class="headerlink" title="ç»ƒæ°”æœŸåäºŒå±‚ï¼ˆCountDownLatchï¼‰"></a>ç»ƒæ°”æœŸåäºŒå±‚ï¼ˆCountDownLatchï¼‰</h3><ul>
<li>ä¸ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œå¯ä»¥å’Œé”æ··åˆä½¿ç”¨ï¼Œæˆ–æ›¿ä»£é”çš„åŠŸèƒ½ã€‚</li>
<li>ä¸€æ¬¡æ€§åœ¨é—¨ä¸ŠæŒ‚å¤šä¸ªé”ã€‚</li>
<li>ä½œç”¨å¦‚ï¼šinitå¯¹è±¡çš„æ—¶å€™æœ‰ä¸€ä¸ªå‰åé¡ºåºçš„é—®é¢˜ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_15</span> </span>&#123;</span><br><span class="line">    CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            latch.await();<span class="comment">// ç­‰å¾…é—¨é—©å¼€æ”¾ã€‚</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"m1() method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (latch.getCount() != <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">"latch count : "</span> + latch.getCount());</span><br><span class="line">                latch.countDown(); <span class="comment">// å‡é—¨é—©ä¸Šçš„é”ã€‚</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.MILLISECONDS.sleep(<span class="number">500</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"m2() method : "</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_15 t = <span class="keyword">new</span> Test_15();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m1();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ƒæ°”æœŸå¤§åœ†æ»¡"><a href="#ç»ƒæ°”æœŸå¤§åœ†æ»¡" class="headerlink" title="ç»ƒæ°”æœŸå¤§åœ†æ»¡"></a>ç»ƒæ°”æœŸå¤§åœ†æ»¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_14</span> </span>&#123;</span><br><span class="line">    String s1 = <span class="string">"hello"</span>;</span><br><span class="line">    String s2 = <span class="keyword">new</span> String(<span class="string">"hello"</span>); <span class="comment">// newå…³é”®å­—ï¼Œä¸€å®šæ˜¯åœ¨å †ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</span></span><br><span class="line">    Integer i1 = <span class="number">1</span>;    <span class="comment">// i1ä¸i2æ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œåœ¨å¸¸é‡æ± ä¸­ï¼Œnewæ˜¯æ”¾åœ¨å †å†…å­˜</span></span><br><span class="line">    Integer i2 = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (i1) &#123;    <span class="comment">//s1ä¸s2</span></span><br><span class="line">            System.out.println(<span class="string">"m1()"</span>);</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (i2) &#123;</span><br><span class="line">            System.out.println(<span class="string">"m2()"</span>);</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_14 t = <span class="keyword">new</span> Test_14();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m1();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è‡ªå®šä¹‰å®¹å™¨ï¼Œæä¾›æ–°å¢å…ƒç´ ï¼ˆaddï¼‰å’Œè·å–å…ƒç´ æ•°é‡ï¼ˆsizeï¼‰æ–¹æ³•ã€‚å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹1å‘å®¹å™¨ä¸­æ–°å¢10ä¸ªæ•°æ®ã€‚çº¿ç¨‹2ç›‘å¬å®¹å™¨å…ƒç´ æ•°é‡ï¼Œå½“å®¹å™¨å…ƒç´ æ•°é‡ä¸º5æ—¶ï¼Œçº¿ç¨‹2è¾“å‡ºä¿¡æ¯å¹¶ç»ˆæ­¢ã€‚</strong></p>
<ol>
<li>ä½¿ç”¨volatile</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_01_Container t = <span class="keyword">new</span> Test_01_Container();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"add Object to Container "</span> + i);</span><br><span class="line">                    t.add(<span class="keyword">new</span> Object());</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (t.size() == <span class="number">5</span>) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"size = 5"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test_01_Container</span> </span>&#123;</span><br><span class="line">    <span class="keyword">volatile</span> List&lt;Object&gt; container = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.container.add(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.container.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>ä½¿ç”¨synchronizedå’Œwait(), è°ƒç”¨wait()å°†é‡Šæ”¾é”ï¼Œå¹¶ä¸”è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å‹</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_02_Container t = <span class="keyword">new</span> Test_02_Container();</span><br><span class="line">        <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(t.size() != <span class="number">5</span>)&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            lock.wait(); <span class="comment">// çº¿ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚</span></span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(<span class="string">"size = 5"</span>);</span><br><span class="line">                    lock.notifyAll(); <span class="comment">// å”¤é†’å…¶ä»–ç­‰å¾…çº¿ç¨‹</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">                        System.out.println(<span class="string">"add Object to Container "</span> + i);</span><br><span class="line">                        t.add(<span class="keyword">new</span> Object());</span><br><span class="line">                        <span class="keyword">if</span>(t.size() == <span class="number">5</span>)&#123;</span><br><span class="line">                            lock.notifyAll();</span><br><span class="line">                            <span class="keyword">try</span> &#123;</span><br><span class="line">                                lock.wait();</span><br><span class="line">                            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                                e.printStackTrace();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test_02_Container</span></span>&#123;</span><br><span class="line">    List&lt;Object&gt; container = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.container.add(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.container.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>ä½¿ç”¨é—¨é—©é¿å…è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œæ•ˆç‡æ›´é«˜ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_03_Container t = <span class="keyword">new</span> Test_03_Container();</span><br><span class="line">        <span class="keyword">final</span> CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(t.size() != <span class="number">5</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        latch.await(); <span class="comment">// ç­‰å¾…é—¨é—©çš„å¼€æ”¾ã€‚ ä¸æ˜¯è¿›å…¥ç­‰å¾…é˜Ÿåˆ—</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">"size = 5"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">                    System.out.println(<span class="string">"add Object to Container "</span> + i);</span><br><span class="line">                    t.add(<span class="keyword">new</span> Object());</span><br><span class="line">                    <span class="keyword">if</span>(t.size() == <span class="number">5</span>)&#123;</span><br><span class="line">                        latch.countDown(); <span class="comment">// é—¨é—©-1</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test_03_Container</span></span>&#123;</span><br><span class="line">    List&lt;Object&gt; container = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.container.add(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.container.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>å°ç¼–æ˜¯ä¸€æšJava Coderï¼Œä¸šä½™å†™æ–‡ç« ï¼Œç°ä¸»è¥å¾®ä¿¡å…¬ä¼—å·ã€ŠJavaæ‚£è€…ã€‹ï¼Œå–œæ¬¢çš„è¯å…³æ³¨æˆ‘çš„å…¬ä¼—å·æˆ–è€…åŠ æˆ‘å¾®ä¿¡æˆ‘ä»¬ä¸€èµ·å­¦ä¹ Java</em></p>
<p><img src="\111å…¬ä¼—å·.jpg" alt=""></p>
<h2 id="ç­‘åŸºæœŸï¼ˆReentrantLockï¼‰"><a href="#ç­‘åŸºæœŸï¼ˆReentrantLockï¼‰" class="headerlink" title="ç­‘åŸºæœŸï¼ˆReentrantLockï¼‰"></a>ç­‘åŸºæœŸï¼ˆReentrantLockï¼‰</h2><h3 id="ç­‘åŸºåˆæœŸï¼ˆlockç­‰å¾…é”ï¼‰"><a href="#ç­‘åŸºåˆæœŸï¼ˆlockç­‰å¾…é”ï¼‰" class="headerlink" title="ç­‘åŸºåˆæœŸï¼ˆlockç­‰å¾…é”ï¼‰"></a>ç­‘åŸºåˆæœŸï¼ˆlockç­‰å¾…é”ï¼‰</h3><ul>
<li>concurrentæ˜¯jdk1.5åçš„åŒ…ï¼Œé¿å…synchronizedçš„å‡ºç°è€Œè®¾è®¡å‡ºæ¥çš„ä¸€ç§é”æœºåˆ¶ã€‚</li>
<li>ReentrantLock é‡å…¥é”ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸ŠåŠ ä¸€ä¸ªæ ‡è®°ä¿¡æ¯ï¼Œè¿™ä¸ªæ ‡è®°ä¿¡æ¯ä»£è¡¨é”æœºåˆ¶ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_01</span> </span>&#123;</span><br><span class="line">    Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock(); <span class="comment">// åŠ é”</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                System.out.println(<span class="string">"m1() method "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock(); <span class="comment">// è§£é”</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        System.out.println(<span class="string">"m2() method"</span>);</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_01 t = <span class="keyword">new</span> Test_01();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m1();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç­‘åŸºä¸­æœŸï¼ˆtryLockå°è¯•é”ï¼‰"><a href="#ç­‘åŸºä¸­æœŸï¼ˆtryLockå°è¯•é”ï¼‰" class="headerlink" title="ç­‘åŸºä¸­æœŸï¼ˆtryLockå°è¯•é”ï¼‰"></a>ç­‘åŸºä¸­æœŸï¼ˆtryLockå°è¯•é”ï¼‰</h3><p><em>å°è¯•é”æœ‰é˜»å¡å’Œéé˜»å¡ä¸¤ç§</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_02</span> </span>&#123;</span><br><span class="line">    Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                System.out.println(<span class="string">"m1() method "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> isLocked = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// å°è¯•é”ï¼Œ å¦‚æœæœ‰é”ï¼Œæ— æ³•è·å–é”æ ‡è®°ï¼Œè¿”å›falseã€‚</span></span><br><span class="line">            <span class="comment">// éé˜»å¡ï¼Œå¦‚æœè·å–é”æ ‡è®°ï¼Œè¿”å›true</span></span><br><span class="line">            <span class="comment">// isLocked = lock.tryLock();</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// é˜»å¡å°è¯•é”ï¼Œé˜»å¡å‚æ•°ä»£è¡¨çš„æ—¶é•¿ï¼Œå°è¯•è·å–é”æ ‡è®°ã€‚</span></span><br><span class="line">            <span class="comment">// å¦‚æœè¶…æ—¶ï¼Œä¸ç­‰å¾…ã€‚ç›´æ¥è¿”å›ã€‚</span></span><br><span class="line">            isLocked = lock.tryLock(<span class="number">5</span>, TimeUnit.SECONDS); </span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(isLocked)&#123;</span><br><span class="line">                System.out.println(<span class="string">"m2() method synchronized"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"m2() method unsynchronized"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(isLocked)&#123;</span><br><span class="line">                <span class="comment">// å°è¯•é”åœ¨è§£é™¤é”æ ‡è®°çš„æ—¶å€™ï¼Œä¸€å®šè¦åˆ¤æ–­æ˜¯å¦è·å–åˆ°é”æ ‡è®°ã€‚</span></span><br><span class="line">                <span class="comment">// å¦‚æœå½“å‰çº¿ç¨‹æ²¡æœ‰è·å–åˆ°é”æ ‡è®°ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_02 t = <span class="keyword">new</span> Test_02();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m1();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç­‘åŸºåæœŸï¼ˆlockInterruptiblyå¯æ‰“æ–­é”ï¼‰"><a href="#ç­‘åŸºåæœŸï¼ˆlockInterruptiblyå¯æ‰“æ–­é”ï¼‰" class="headerlink" title="ç­‘åŸºåæœŸï¼ˆlockInterruptiblyå¯æ‰“æ–­é”ï¼‰"></a>ç­‘åŸºåæœŸï¼ˆlockInterruptiblyå¯æ‰“æ–­é”ï¼‰</h3><ul>
<li>é˜»å¡çŠ¶æ€æœ‰3ç§ï¼š åŒ…æ‹¬æ™®é€šé˜»å¡ï¼ˆä¸é‡Šæ”¾é”ï¼‰ï¼Œç­‰å¾…é˜Ÿåˆ—ï¼ˆé‡Šæ”¾é”ï¼‰ï¼Œé”æ± é˜Ÿåˆ—ã€‚<ul>
<li>æ™®é€šé˜»å¡ï¼š sleep(10000)ï¼Œ å¯ä»¥è¢«æ‰“æ–­ã€‚è°ƒç”¨thread.interrupt()æ–¹æ³•ï¼Œå¯ä»¥æ‰“æ–­é˜»å¡çŠ¶æ€ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>ç­‰å¾…é˜Ÿåˆ—ï¼š wait()æ–¹æ³•è¢«è°ƒç”¨ï¼Œä¹Ÿæ˜¯ä¸€ç§é˜»å¡çŠ¶æ€ï¼Œåªèƒ½ç”±notifyå”¤é†’ã€‚æ— æ³•æ‰“æ–­ã€‚</li>
<li>é”æ± é˜Ÿåˆ—ï¼š æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°åŒæ­¥ä»£ç ï¼Œæ— æ³•è·å–é”æ ‡è®°ã€‚ä¸æ˜¯æ‰€æœ‰çš„é”æ± é˜Ÿåˆ—éƒ½å¯è¢«æ‰“æ–­ã€‚<ul>
<li>ä½¿ç”¨ReentrantLockçš„lockæ–¹æ³•ï¼Œè·å–é”æ ‡è®°çš„æ—¶å€™ï¼Œå¦‚æœéœ€è¦é˜»å¡ç­‰å¾…é”æ ‡è®°ï¼Œæ— æ³•è¢«æ‰“æ–­ã€‚</li>
<li>ä½¿ç”¨ReentrantLockçš„lockInterruptiblyæ–¹æ³•ï¼Œè·å–é”æ ‡è®°çš„æ—¶å€™ï¼Œå¦‚æœéœ€è¦é˜»å¡ç­‰å¾…ï¼Œå¯ä»¥è¢«æ‰“æ–­ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>å¯æ‰“æ–­é”æ„ä¹‰ï¼šè½¯ä»¶é”æ­»äº†ï¼Œæ— å“åº”ï¼Œå»å»ä»»åŠ¡ç®¡ç†å™¨ç»“æŸä»»åŠ¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_03</span> </span>&#123;</span><br><span class="line">    Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                System.out.println(<span class="string">"m1() method "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// çº¿ç¨‹æ‰§è¡Œåˆ°è¿™é‡Œï¼Œæœ¬æ¥æ˜¯ä¸èƒ½è·å¾—é”æ ‡è®°çš„ï¼Œè¦è¿›å…¥ç­‰å¾…é˜Ÿåˆ—çš„ã€‚</span></span><br><span class="line">            <span class="comment">// å½“é€šè¿‡è°ƒç”¨å½“å‰çº¿ç¨‹çš„interrupt()ï¼Œé€šè¿‡æ‰“æ–­å½“å‰çº¿ç¨‹ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œä½¿çº¿ç¨‹è¢«å”¤é†’ï¼Œé˜»å¡ç»“æŸ</span></span><br><span class="line">            lock.lockInterruptibly(); <span class="comment">// å¯å°è¯•æ‰“æ–­çš„ï¼Œé˜»å¡ç­‰å¾…é”ã€‚å¯ä»¥è¢«å…¶ä»–çš„çº¿ç¨‹æ‰“æ–­é˜»å¡çŠ¶æ€</span></span><br><span class="line">            System.out.println(<span class="string">"m2() method"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// è¢«æ‰“æ–­çš„å¼‚å¸¸ï¼Œè¢«æ‰“æ–­ä¸å”¤é†’ã€é˜»å¡ç»“æŸéƒ½æ˜¯ä¸ä¸€æ ·çš„</span></span><br><span class="line">            <span class="comment">// sleepä»»ä½•ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥æŠŠä»–æ‰“æ–­ï¼Œå¼ºè¡Œå”¤é†’</span></span><br><span class="line">            <span class="comment">// å¦‚æœæ˜¯lockä¸å¯è¢«æ‰“æ–­çš„</span></span><br><span class="line">            <span class="comment">// å¦‚æœæ˜¯lockInterruptiblyï¼Œé˜»å¡ç­‰å¾…è¿™æŠŠé”ï¼Œç±»ä¼¼sleepï¼Œå¯ä»¥é€šè¿‡interrupt()æ‰“æ–­</span></span><br><span class="line">            System.out.println(<span class="string">"m2() method interrupted"</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_03 t = <span class="keyword">new</span> Test_03();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m1();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                t.m2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t2.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸è°ƒç”¨interrupt()æ–¹æ³•ï¼Œt2æœ€åå¯ä»¥è·å¾—é”ï¼Œç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">        t2.interrupt();<span class="comment">// æ‰“æ–­t2çº¿ç¨‹ï¼Œé”çš„ä½ç½®ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç­‘åŸºåœ†æ»¡ï¼ˆå…¬å¹³é”ï¼‰"><a href="#ç­‘åŸºåœ†æ»¡ï¼ˆå…¬å¹³é”ï¼‰" class="headerlink" title="ç­‘åŸºåœ†æ»¡ï¼ˆå…¬å¹³é”ï¼‰"></a>ç­‘åŸºåœ†æ»¡ï¼ˆå…¬å¹³é”ï¼‰</h3><ul>
<li>åœ¨cpuå’Œosä¸­æœ¬èº«çº¿ç¨‹ç«äº‰é”æ ‡è®°æ˜¯ä¸å…¬å¹³çš„ï¼Œä¸è€ƒè™‘çº¿ç¨‹çš„ç­‰å¾…æ—¶é—´çš„ã€‚</li>
<li>è¿ç”¨åœ¨è½®è¯¢çš„åœºæ™¯ï¼Œå¦‚æ‰“ç‰Œã€‚</li>
<li>éœ€è¦æ•ˆæœä¸€éƒ¨åˆ†çš„cpuèµ„æºè®¡ç®—ç­‰å¾…çš„æ—¶é—´ï¼Œæ€§èƒ½æœ‰æ‰€é™ä½ã€‚è¦ä»…èƒ½å°‘ç”¨ï¼Œå¹¶å‘é‡åœ¨10ä¹‹å†…ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_04</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TestReentrantlock t = <span class="keyword">new</span> TestReentrantlock();</span><br><span class="line">        <span class="comment">//TestSync t = new TestSync();</span></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(t);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(t);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestReentrantlock</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªå…¬å¹³é”</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">" get lock"</span>);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestSync</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//ä¸å…¬å¹³çš„</span></span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">" get lock in TestSync"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>å°ç¼–æ˜¯ä¸€æšJava Coderï¼Œä¸šä½™å†™æ–‡ç« ï¼Œç°ä¸»è¥å¾®ä¿¡å…¬ä¼—å·ã€ŠJavaæ‚£è€…ã€‹ï¼Œå–œæ¬¢çš„è¯å…³æ³¨æˆ‘çš„å…¬ä¼—å·æˆ–è€…åŠ æˆ‘å¾®ä¿¡æˆ‘ä»¬ä¸€èµ·å­¦ä¹ Java</em></p>
<p><img src="\111å…¬ä¼—å·.jpg" alt=""></p>
<h2 id="é‡‘ä¸¹æœŸ"><a href="#é‡‘ä¸¹æœŸ" class="headerlink" title="é‡‘ä¸¹æœŸ"></a>é‡‘ä¸¹æœŸ</h2><h3 id="é‡‘ä¸¹åˆæœŸï¼ˆç”Ÿäº§è€…-amp-æ¶ˆè´¹è€…ï¼‰"><a href="#é‡‘ä¸¹åˆæœŸï¼ˆç”Ÿäº§è€…-amp-æ¶ˆè´¹è€…ï¼‰" class="headerlink" title="é‡‘ä¸¹åˆæœŸï¼ˆç”Ÿäº§è€…&amp;æ¶ˆè´¹è€…ï¼‰"></a>é‡‘ä¸¹åˆæœŸï¼ˆç”Ÿäº§è€…&amp;æ¶ˆè´¹è€…ï¼‰</h3><ul>
<li>ReenTrantLockå»ºè®®åº”ç”¨åœ¨åŒæ­¥æ–¹å¼ï¼Œç›¸å¯¹æ•ˆç‡æ¯”synchronizedé«˜ï¼Œé‡çº§è¾ƒè½»ã€‚</li>
<li>synchronizedåœ¨JDK1.5ç‰ˆæœ¬å°è¯•ä¼˜åŒ–ï¼Œåˆ°JDK1.7åï¼Œä¼˜åŒ–æ•ˆç‡å·²ç»éå¸¸å¥½äº†ã€‚åœ¨ç»å¯¹æ•ˆç‡ä¸Šä¸æ¯”ReenTrantLockå·®å¤šå°‘ã€‚</li>
<li>ä½¿ç”¨ReenTrantLockå¿…é¡»é‡Šæ”¾é”æ ‡è®°ã€‚ä¸€èˆ¬åœ¨finallyä»£ç å—é‡Šæ”¾é”æ ‡è®°çš„ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç»ƒä¹ ï¼ˆç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼‰ï¼š</span><br><span class="line">è‡ªå®šä¹‰åŒæ­¥å®¹å™¨ï¼Œå®¹å™¨å®¹é‡ä¸Šé™ä¸º10ã€‚å¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸­åº”ç”¨ï¼Œå¹¶ä¿è¯æ•°æ®çº¿ç¨‹å®‰å…¨ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestContainer01</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> LinkedList&lt;E&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(E e)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(list.size() == MAX)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">                e1.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        list.add(e);</span><br><span class="line">        count++;</span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> E <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">        E e = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(list.size() == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">                e1.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        e = list.removeFirst();</span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> TestContainer01&lt;String&gt; c = <span class="keyword">new</span> TestContainer01&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)&#123;</span><br><span class="line">                        System.out.println(c.get());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="string">"consumer"</span>+i).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">25</span>; j++)&#123;</span><br><span class="line">                        c.put(<span class="string">"container value "</span> + j); </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="string">"producer"</span>+i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ReentrantLockå®Œæˆç”Ÿäº§è€…-æ¶ˆè´¹è€…</p>
<ul>
<li>Conditionï¼Œ ä¸ºLockå¢åŠ æ¡ä»¶ã€‚å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼ˆç”Ÿæˆäº†æˆ–è€…æ˜¯è¢«æ¶ˆè´¹ï¼‰ï¼Œåšä»€ä¹ˆäº‹æƒ…ï¼Œå¦‚åŠ é”æˆ–è§£é”ã€‚å¦‚ç­‰å¾…æˆ–å”¤é†’</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestContainer02</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> LinkedList&lt;E&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> Condition producer = lock.newCondition();</span><br><span class="line">    <span class="keyword">private</span> Condition consumer = lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(E e)</span></span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(list.size() == MAX)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">" ç­‰å¾…ã€‚ã€‚ã€‚"</span>);</span><br><span class="line">                <span class="comment">// è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚é‡Šæ”¾é”æ ‡è®°ã€‚</span></span><br><span class="line">                <span class="comment">// å€ŸåŠ©æ¡ä»¶ï¼Œè¿›å…¥çš„ç­‰å¾…é˜Ÿåˆ—ã€‚</span></span><br><span class="line">                producer.await();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">" put ã€‚ã€‚ã€‚"</span>);</span><br><span class="line">            list.add(e);</span><br><span class="line">            count++;</span><br><span class="line">            <span class="comment">// å€ŸåŠ©æ¡ä»¶ï¼Œå”¤é†’æ‰€æœ‰çš„æ¶ˆè´¹è€…ã€‚</span></span><br><span class="line">            consumer.signalAll();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">        E e = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(list.size() == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">" ç­‰å¾…ã€‚ã€‚ã€‚"</span>);</span><br><span class="line">                <span class="comment">// å€ŸåŠ©æ¡ä»¶ï¼Œæ¶ˆè´¹è€…è¿›å…¥ç­‰å¾…é˜Ÿåˆ—</span></span><br><span class="line">                consumer.await();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">" get ã€‚ã€‚ã€‚"</span>);</span><br><span class="line">            e = list.removeFirst();</span><br><span class="line">            count--;</span><br><span class="line">            <span class="comment">// å€ŸåŠ©æ¡ä»¶ï¼Œå”¤é†’æ‰€æœ‰çš„ç”Ÿäº§è€…</span></span><br><span class="line">            producer.signalAll();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> TestContainer02&lt;String&gt; c = <span class="keyword">new</span> TestContainer02&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)&#123;</span><br><span class="line">                        System.out.println(c.get());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="string">"consumer"</span>+i).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">25</span>; j++)&#123;</span><br><span class="line">                        c.put(<span class="string">"container value "</span> + j); </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="string">"producer"</span>+i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é‡‘ä¸¹ä¸­æœŸï¼ˆé”çš„åº•å±‚å®ç°ï¼‰"><a href="#é‡‘ä¸¹ä¸­æœŸï¼ˆé”çš„åº•å±‚å®ç°ï¼‰" class="headerlink" title="é‡‘ä¸¹ä¸­æœŸï¼ˆé”çš„åº•å±‚å®ç°ï¼‰"></a>é‡‘ä¸¹ä¸­æœŸï¼ˆé”çš„åº•å±‚å®ç°ï¼‰</h3><p>â€‹        <em>Java è™šæ‹Ÿæœºä¸­çš„åŒæ­¥(Synchronization)åŸºäºè¿›å…¥å’Œé€€å‡ºç®¡ç¨‹(Monitor)å¯¹è±¡å®ç°ã€‚åŒæ­¥æ–¹æ³• å¹¶ä¸æ˜¯ç”± monitor enter å’Œ monitor exit æŒ‡ä»¤æ¥å®ç°åŒæ­¥çš„ï¼Œè€Œæ˜¯ç”±æ–¹æ³•è°ƒç”¨æŒ‡ä»¤è¯»å–è¿è¡Œæ—¶å¸¸é‡æ± ä¸­æ–¹æ³•çš„ACC_SYNCHRONIZED æ ‡å¿—æ¥éšå¼å®ç°çš„ã€‚æ³¨ï¼šmonitor enter å’Œ monitor exit æŒ‡ä»¤æ˜¯Cè¯­è¨€çš„å†…å®¹ã€‚</em></p>
<p><strong>å¯¹è±¡çš„å†…å­˜æ¨¡å‹</strong>ï¼ˆä¸€ä¸ªå¯¹è±¡åŒ…å«3éƒ¨åˆ†ï¼Œæ²¡æœ‰æ–¹æ³•ï¼Œæ–¹æ³•æ˜¯åœ¨æ–¹æ³•åŒºåŸŸä¸­çš„ï¼‰</p>
<p><img src="\media\å¯¹è±¡å†…å­˜æ¨¡å‹.jpg" alt="å¯¹è±¡å†…å­˜æ¨¡å‹"></p>
<ul>
<li>å¯¹è±¡å¤´ï¼šå­˜å‚¨å¯¹è±¡çš„ hashCodeã€é”ä¿¡æ¯æˆ–åˆ†ä»£å¹´é¾„æˆ– GC æ ‡å¿—ï¼Œç±»å‹æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„ç±»å…ƒæ•°æ®ï¼ŒJVM é€šè¿‡è¿™ä¸ªæŒ‡é’ˆç¡®å®šè¯¥å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ç­‰ä¿¡æ¯ã€‚ï¼ˆå…³æ³¨é”ä¿¡æ¯ï¼‰</li>
<li>å®ä¾‹å˜é‡ï¼šå­˜æ”¾ç±»çš„å±æ€§æ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„å±æ€§ä¿¡æ¯</li>
<li>å¡«å……æ•°æ®ï¼šç”±äºè™šæ‹Ÿæœºè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€ã€‚å¡«å……æ•°æ®ä¸æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œä»…ä»…æ˜¯ä¸ºäº†å­—èŠ‚å¯¹é½</li>
<li>monitoråœ¨æ ˆä¸­ï¼Œä½†ä¸æ˜¯åœ¨çº¿ç¨‹æ ˆä¸­ã€‚</li>
<li>_OwneræŒ‡å‘çº¿ç¨‹ã€‚</li>
</ul>
<p>â€‹        <em>å½“çº¿ç¨‹åœ¨å¯¹è±¡ä¸ŠåŠ é”æ—¶ï¼Œå¯¹è±¡å¤´éƒ½ä¼šæŒ‡å‘monitorï¼Œè®°å½•é”ä¿¡æ¯ã€‚å½“æ‰§è¡Œ synchronized åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—æ—¶ï¼Œä¼šåœ¨å¯¹è±¡å¤´ä¸­è®°å½•é”æ ‡è®°ï¼Œé”æ ‡è®°æŒ‡å‘çš„æ˜¯ monitor å¯¹è±¡ï¼ˆä¹Ÿç§°ä¸ºç®¡ç¨‹æˆ–ç›‘è§†å™¨é”ï¼‰çš„èµ·å§‹åœ°å€ã€‚æ¯ä¸ªå¯¹è±¡éƒ½å­˜åœ¨ç€ä¸€ä¸ª monitor ä¸ä¹‹å…³è”ï¼Œå¯¹è±¡ä¸å…¶ monitor ä¹‹é—´çš„å…³ç³»æœ‰å­˜åœ¨å¤šç§å®ç°æ–¹å¼ï¼Œå¦‚ monitor å¯ä»¥ä¸å¯¹è±¡ä¸€èµ·åˆ›å»ºé”€æ¯æˆ–å½“çº¿ç¨‹è¯•å›¾è·å–å¯¹è±¡é”æ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œä½†å½“ä¸€ä¸ª monitor è¢«æŸä¸ªçº¿ç¨‹æŒæœ‰åï¼Œå®ƒä¾¿å¤„äºé”å®šçŠ¶æ€ã€‚</em></p>
<p>â€‹        <em>å¦å¤–çš„çº¿ç¨‹æƒ³è·å–å¯¹è±¡å¤´ä¸­çš„é”ä¿¡æ¯çš„æ—¶å€™ï¼Œä¼šå‘ç°å¯¹è±¡å¤´ä¸­å·²ç»è®°å½•ä¸€æŠŠé”ï¼ˆmonitorï¼‰ï¼Œä»–å°±è·å–ä¸åˆ°ã€‚monitoræ˜¯äº’æ–¥çš„ï¼Œå¯¹è±¡å¤´è®°å½•çš„monitorå°±ä¸ä¼šåˆ†é…ç»™å…¶ä»–çº¿ç¨‹äº†ï¼Œæ­¤æ—¶è¿™ä¸ªçº¿ç¨‹å°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ã€‚</em>å½“æ‰§è¡Œä¸­çš„çº¿ç¨‹å‘ç”Ÿå¼‚å¸¸ï¼Œæˆ–è€…æ˜¯é‡Šæ”¾é”æ ‡è®°ï¼Œå¯¹è±¡å¤´çš„é”ä¿¡æ¯å°±ä¼šé‡Šæ”¾å®ƒè®°å½•çš„monitorã€‚é˜»å¡çŠ¶æ€çš„çº¿ç¨‹å°±ä¼šå¼¹å‡ºæ¥äº‰å¤ºå¯¹è±¡ä¸­çš„é”ä¿¡æ¯ï¼Œé‡æ–°åœ¨é”ä¿¡æ¯ä¸­è®°å½•monitorã€‚</p>
<p>â€‹        <em>ObjectMonitor ä¸­æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œ_WaitSet å’Œ _EntryListï¼Œä»¥åŠ_Owner æ ‡è®°ã€‚å…¶ä¸­_WaitSetæ˜¯ç”¨äºç®¡ç†ç­‰å¾…é˜Ÿåˆ—(wait)çº¿ç¨‹çš„ï¼Œ_EntryList æ˜¯ç”¨äºç®¡ç†é”æ± é˜»å¡çº¿ç¨‹çš„ï¼Œ_Owner æ ‡è®°ç”¨äºè®°å½•å½“å‰æ‰§è¡Œçº¿ç¨‹ã€‚</em></p>
<p><strong>çº¿ç¨‹çŠ¶æ€å›¾</strong></p>
<p><img src="\media\çº¿ç¨‹çŠ¶æ€å›¾.jpg" alt="çº¿ç¨‹çŠ¶æ€å›¾"></p>
<p>â€‹        å½“å¤šçº¿ç¨‹å¹¶å‘è®¿é—®åŒä¸€ä¸ªåŒæ­¥ä»£ç æ—¶ï¼Œé¦–å…ˆä¼šè¿›å…¥_EntryListï¼Œå½“çº¿ç¨‹è·å–é”æ ‡è®°åï¼Œmonitor ä¸­çš„_Owner è®°å½•æ­¤çº¿ç¨‹ï¼Œå¹¶åœ¨ monitor ä¸­çš„è®¡æ•°å™¨æ‰§è¡Œé€’å¢è®¡ç®—ï¼ˆ+1ï¼‰ï¼Œä»£è¡¨é”å®šï¼Œå…¶ä»–çº¿ç¨‹åœ¨_EntryList ä¸­ç»§ç»­é˜»å¡ã€‚è‹¥æ‰§è¡Œçº¿ç¨‹è°ƒç”¨ wait æ–¹æ³•ï¼Œåˆ™ monitor ä¸­çš„è®¡æ•°å™¨æ‰§è¡Œèµ‹å€¼ä¸º 0 è®¡ç®—ï¼Œå¹¶å°†_Owner æ ‡è®°èµ‹å€¼ä¸º nullï¼Œä»£è¡¨æ”¾å¼ƒé”ï¼Œæ‰§è¡Œçº¿ç¨‹è¿›å¦‚_WaitSet ä¸­é˜»å¡ã€‚è‹¥æ‰§è¡Œçº¿ç¨‹è°ƒç”¨ notify/notifyAll æ–¹æ³•ï¼Œ_WaitSet ä¸­çš„çº¿ç¨‹è¢«å”¤é†’ï¼Œè¿›å…¥_EntryList ä¸­é˜»å¡ï¼Œç­‰å¾…è·å–é”æ ‡è®°ã€‚è‹¥æ‰§è¡Œçº¿ç¨‹çš„åŒæ­¥ä»£ç æ‰§è¡Œç»“æŸï¼ŒåŒæ ·ä¼šé‡Šæ”¾é”æ ‡è®°ï¼Œmonitor ä¸­çš„_Owneræ ‡è®°èµ‹å€¼ä¸º nullï¼Œä¸”è®¡æ•°å™¨èµ‹å€¼ä¸º 0 è®¡ç®—ã€‚</p>
<p>â€‹        interrupt() æ–¹æ³•å¯ä»¥ä»»ä½•æ‰“æ–­é˜»å¡çŠ¶æ€çš„çº¿ç¨‹ï¼Œä»¥æŠ›å¼‚å¸¸çš„ä»£ä»·ã€‚</p>
<p>â€‹        InterruptedExceptionå¼‚å¸¸æ˜¯é˜»å¡å¼‚å¸¸ã€‚é˜»å¡ä¸­çš„çº¿ç¨‹æŠ›å‡ºçš„ã€‚</p>
<p><strong>é”çš„é‡å…¥</strong></p>
<p>â€‹        åœ¨ Java ä¸­ï¼ŒåŒæ­¥é”æ˜¯å¯ä»¥é‡å…¥çš„ã€‚åªæœ‰åŒä¸€çº¿ç¨‹è°ƒç”¨åŒæ­¥æ–¹æ³•æˆ–æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œå¯¹åŒä¸€ä¸ªå¯¹è±¡åŠ é”æ—¶æ‰å¯é‡å…¥ã€‚<br>â€‹        å½“çº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œä¼šåœ¨ monitor çš„è®¡æ•°å™¨ä¸­æ‰§è¡Œé€’å¢è®¡ç®—ï¼Œè‹¥å½“å‰çº¿ç¨‹è°ƒç”¨å…¶ä»–åŒæ­¥ä»£ç ï¼Œä¸”åŒæ­¥ä»£ç çš„é”å¯¹è±¡ç›¸åŒæ—¶ï¼Œmonitor ä¸­çš„è®¡æ•°å™¨ç»§ç»­é€’å¢ã€‚æ¯ä¸ªåŒæ­¥ä»£ç æ‰§è¡Œç»“æŸï¼Œmonitor ä¸­çš„è®¡æ•°å™¨éƒ½ä¼šé€’å‡ï¼Œç›´è‡³æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œç»“æŸï¼Œmonitor ä¸­çš„è®¡æ•°å™¨ä¸º 0 æ—¶ï¼Œé‡Šæ”¾é”æ ‡è®°ï¼Œ_Owner æ ‡è®°èµ‹å€¼ä¸º nullã€‚</p>
<h3 id="é‡‘ä¸¹åæœŸï¼ˆé”çš„ç§ç±»ï¼‰"><a href="#é‡‘ä¸¹åæœŸï¼ˆé”çš„ç§ç±»ï¼‰" class="headerlink" title="é‡‘ä¸¹åæœŸï¼ˆé”çš„ç§ç±»ï¼‰"></a>é‡‘ä¸¹åæœŸï¼ˆé”çš„ç§ç±»ï¼‰</h3><ul>
<li>Java ä¸­é”çš„ç§ç±»åŒ…æ‹¬åå‘é”ï¼Œè‡ªæ—‹é”ï¼Œè½»é‡çº§é”ï¼Œé‡é‡çº§é”ã€‚</li>
<li>é”çš„ä½¿ç”¨æ–¹å¼å…ˆæä¾›åå‘é”ï¼Œå¦‚æœä¸æ»¡è¶³çš„æ—¶å€™ï¼Œå‡çº§ä¸ºè½»é‡çº§é”ï¼Œå†ä¸æ»¡è¶³ï¼Œå‡çº§ä¸ºé‡é‡çº§é”ã€‚è‡ªæ—‹é”æ˜¯ä¸€ä¸ªè¿‡æ¸¡çš„é”çŠ¶æ€ï¼Œä¸æ˜¯ä¸€ç§å®é™…çš„é”ç±»å‹ã€‚é”åªèƒ½å‡çº§ï¼Œä¸èƒ½é™çº§ã€‚</li>
<li>åœ¨<strong>é‡‘ä¸¹åˆæœŸ</strong>æåˆ°çš„å°±æ˜¯é‡é‡çº§é”ã€‚</li>
</ul>
<p><strong>åå‘é”ï¼š</strong></p>
<p>â€‹        æ˜¯ä¸€ç§ç¼–è¯‘è§£é‡Šé”ã€‚å¦‚æœä»£ç ä¸­ä¸å¯èƒ½å‡ºç°å¤šçº¿ç¨‹å¹¶å‘äº‰æŠ¢åŒä¸€ä¸ªé”çš„æ—¶å€™ï¼ŒJVM ç¼–è¯‘ä»£ç ï¼Œè§£é‡Šæ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨çš„æ”¾å¼ƒåŒæ­¥ä¿¡æ¯ã€‚æ¶ˆé™¤ synchronized çš„åŒæ­¥ä»£ç ç»“æœã€‚ä½¿ç”¨é”æ ‡è®°çš„å½¢å¼è®°å½•é”çŠ¶æ€ã€‚åœ¨ Monitor ä¸­æœ‰å˜é‡ ACC_SYNCHRONIZEDã€‚å½“å˜é‡å€¼ä½¿ç”¨çš„æ—¶å€™ï¼Œä»£è¡¨åå‘é”é”å®šã€‚å¯ä»¥é¿å…é”çš„äº‰æŠ¢å’Œé”æ± çŠ¶æ€çš„ç»´æŠ¤ã€‚æé«˜JVMè§£é‡Šæ•ˆç‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Object o = <span class="keyword">new</span> Object();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    o = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">synchronized</span> (o) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è½»é‡çº§é”ï¼š</strong></p>
<p>â€‹        æ˜¯ä¸€ä¸ªè¿‡æ¸¡é”ã€‚å½“åå‘é”ä¸æ»¡è¶³ï¼Œä¹Ÿå°±æ˜¯æœ‰å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ï¼Œé”å®šåŒä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå…ˆæå‡ä¸ºè½»é‡çº§é”ã€‚ä¹Ÿæ˜¯ä½¿ç”¨æ ‡è®° ACC_SYNCHRONIZED æ ‡è®°è®°å½•çš„ã€‚ACC_UNSYNCHRONIZED æ ‡è®°è®°å½•æœªè·å–åˆ°é”ä¿¡æ¯çš„çº¿ç¨‹ã€‚å°±æ˜¯åªæœ‰ä¸¤ä¸ªçº¿ç¨‹äº‰æŠ¢é”æ ‡è®°çš„æ—¶å€™ï¼Œä¼˜å…ˆä½¿ç”¨è½»é‡çº§é”ã€‚Açº¿ç¨‹å’Œmonitoræœ‰ç›´æ¥å…³è”çš„ã€‚Bçº¿ç¨‹ä¸è®°å½•monitorï¼Œæ˜¯monitorè®°å½•Bçº¿ç¨‹ï¼Œçº¿ç¨‹Aç»“æŸåï¼ŒBä¸¤ä¸ªçº¿ç¨‹æ‰æ‰¾åˆ°monitorã€‚ä¹Ÿå¯èƒ½å‡ºç°é‡é‡çº§é”ã€‚</p>
<p><strong>è‡ªæ—‹é”</strong>ï¼š</p>
<p>â€‹        æ˜¯ä¸€ä¸ªè¿‡æ¸¡é”ï¼Œæ˜¯åå‘é”å’Œè½»é‡çº§é”çš„è¿‡æ¸¡ã€‚å½“è·å–é”çš„è¿‡ç¨‹ä¸­ï¼Œæœªè·å–åˆ°ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼ŒJVM è‡ªåŠ¨æ‰§è¡Œè‹¥å¹²æ¬¡ç©ºå¾ªç¯ï¼Œå†æ¬¡ç”³è¯·é”ï¼Œè€Œä¸æ˜¯è¿›å…¥é˜»å¡çŠ¶æ€çš„æƒ…å†µã€‚ç§°ä¸ºè‡ªæ—‹é”ã€‚è‡ªæ—‹é”æé«˜æ•ˆç‡å°±æ˜¯é¿å…çº¿ç¨‹çŠ¶æ€çš„å˜æ›´ã€‚</p>
<h3 id="é‡‘ä¸¹åœ†æ»¡ï¼ˆThreadLocalï¼‰"><a href="#é‡‘ä¸¹åœ†æ»¡ï¼ˆThreadLocalï¼‰" class="headerlink" title="é‡‘ä¸¹åœ†æ»¡ï¼ˆThreadLocalï¼‰"></a>é‡‘ä¸¹åœ†æ»¡ï¼ˆThreadLocalï¼‰</h3><ul>
<li>å°±æ˜¯ä¸€ä¸ªMapã€‚key æ˜¯Thread.getCurrentThread()ï¼Œvalue æ˜¯çº¿ç¨‹éœ€è¦ä¿å­˜çš„å˜é‡ã€‚</li>
<li>ThreadLocal.set(value)ç›¸å½“map.put(Thread.getCurrentThread(), value)ã€‚</li>
<li>ThreadLocal.get() ç›¸å½“map.get(Thread.getCurrentThread())ã€‚</li>
<li>å†…å­˜é—®é¢˜ ï¼š åœ¨å¹¶å‘é‡é«˜çš„æ—¶å€™ï¼Œå¯èƒ½æœ‰å†…å­˜æº¢å‡ºã€‚</li>
<li>ä½¿ç”¨ThreadLocalçš„æ—¶å€™ï¼Œä¸€å®šæ³¨æ„å›æ”¶èµ„æºé—®é¢˜ï¼Œæ¯ä¸ªçº¿ç¨‹ç»“æŸä¹‹å‰ï¼Œå°†å½“å‰çº¿ç¨‹ä¿å­˜çš„çº¿ç¨‹å˜é‡ä¸€å®šè¦åˆ é™¤ ï¼Œè°ƒç”¨ThreadLocal.remove()ï¼Œè¦ä¸ä¼šå‘ç”Ÿæ³„éœ²ã€‚runæ–¹æ³•çš„finallyä»£ç å—ã€‚</li>
</ul>
<p>â€‹        <em>åœ¨ä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹å’Œè¿›ç¨‹æ˜¯æœ‰æ•°é‡ä¸Šé™çš„ã€‚åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œç¡®å®šçº¿ç¨‹å’Œè¿›ç¨‹å”¯ä¸€æ€§çš„å”¯ä¸€æ¡ä»¶å°±æ˜¯çº¿ç¨‹æˆ–è¿›ç¨‹ IDã€‚æ“ä½œç³»ç»Ÿåœ¨å›æ”¶çº¿ç¨‹æˆ–è¿›ç¨‹çš„æ—¶å€™ï¼Œä¸æ˜¯ä¸€å®šæ€æ­»çº¿ç¨‹æˆ–è¿›ç¨‹ï¼Œåœ¨ç¹å¿™çš„æ—¶å€™ï¼Œåªä¼šåšæƒ…å†µçº¿ç¨‹æˆ–è¿›ç¨‹æ ˆæ•°æ®çš„æ“ä½œï¼Œé‡å¤ä½¿ç”¨çº¿ç¨‹æˆ–è¿›ç¨‹ã€‚</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">static</span> String name = <span class="string">"zhangsan"</span>;</span><br><span class="line">    <span class="keyword">static</span> ThreadLocal&lt;String&gt; tl = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(name);    <span class="comment">// lisi</span></span><br><span class="line">                System.out.println(tl.get());    <span class="comment">// null</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                name = <span class="string">"lisi"</span>;</span><br><span class="line">                tl.set(<span class="string">"wangwu"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>å°ç¼–æ˜¯ä¸€æšJava Coderï¼Œä¸šä½™å†™æ–‡ç« ï¼Œç°ä¸»è¥å¾®ä¿¡å…¬ä¼—å·ã€ŠJavaæ‚£è€…ã€‹ï¼Œå–œæ¬¢çš„è¯å…³æ³¨æˆ‘çš„å…¬ä¼—å·æˆ–è€…åŠ æˆ‘å¾®ä¿¡æˆ‘ä»¬ä¸€èµ·å­¦ä¹ Java</em></p>
<p><img src="\111å…¬ä¼—å·.jpg" alt=""></p>
<h2 id="å…ƒå©´æœŸï¼ˆå¹¶å‘å®¹å™¨ï¼‰"><a href="#å…ƒå©´æœŸï¼ˆå¹¶å‘å®¹å™¨ï¼‰" class="headerlink" title="å…ƒå©´æœŸï¼ˆå¹¶å‘å®¹å™¨ï¼‰"></a>å…ƒå©´æœŸï¼ˆå¹¶å‘å®¹å™¨ï¼‰</h2><p>â€‹        <em>è§£å†³å¹¶å‘æƒ…å†µä¸‹çš„å®¹å™¨çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ã€‚ç»™å¤šçº¿ç¨‹ç¯å¢ƒå‡†å¤‡ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å®¹å™¨å¯¹è±¡ã€‚çº¿ç¨‹å®‰å…¨çš„å®¹å™¨å¯¹è±¡ï¼š Vector, Hashtableã€‚çº¿ç¨‹å®‰å…¨å®¹å™¨å¯¹è±¡ï¼Œéƒ½æ˜¯ä½¿ç”¨ synchronizedæ–¹æ³•å®ç°çš„ã€‚</em><br>â€‹        <em>concurrent åŒ…ä¸­çš„åŒæ­¥å®¹å™¨ï¼Œå¤§å¤šæ•°æ˜¯ä½¿ç”¨ç³»ç»Ÿåº•å±‚æŠ€æœ¯å®ç°çš„çº¿ç¨‹å®‰å…¨ã€‚ç±»ä¼¼ nativeã€‚Java8 ä¸­ä½¿ç”¨ CASã€‚</em></p>
<h3 id="å…ƒå©´å‰æœŸï¼ˆMap-Setï¼‰"><a href="#å…ƒå©´å‰æœŸï¼ˆMap-Setï¼‰" class="headerlink" title="å…ƒå©´å‰æœŸï¼ˆMap/Setï¼‰"></a>å…ƒå©´å‰æœŸï¼ˆMap/Setï¼‰</h3><ul>
<li>ConcurrentHashMap/ConcurrentHashSetåº•å±‚å“ˆå¸Œå®ç°çš„åŒæ­¥ Map(Set)ã€‚æ•ˆç‡é«˜ï¼Œçº¿ç¨‹å®‰å…¨ã€‚ä½¿ç”¨ç³»ç»Ÿåº•å±‚æŠ€æœ¯å®ç°çº¿ç¨‹å®‰å…¨ã€‚é‡çº§è¾ƒ synchronized ä½ã€‚key å’Œ value ä¸èƒ½ä¸º nullã€‚</li>
<li>ConcurrentSkipListMap/ConcurrentSkipListSetåº•å±‚è·³è¡¨ï¼ˆSkipListï¼‰å®ç°çš„åŒæ­¥ Map(Set)ã€‚æœ‰åºï¼Œæ•ˆç‡æ¯” ConcurrentHashMap ç¨ä½ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_01_ConcurrentMap</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Map&lt;String, String&gt; map = <span class="keyword">new</span> Hashtable&lt;&gt;();    <span class="comment">// Collections.syncxxxxxx</span></span><br><span class="line">        <span class="comment">// final Map&lt;String, String&gt; map = new ConcurrentHashMap&lt;&gt;();</span></span><br><span class="line">        <span class="comment">// final Map&lt;String, String&gt; map = new ConcurrentSkipListMap&lt;&gt;();    æ•°æ®ç»“æ„è·³è¡¨</span></span><br><span class="line">        <span class="keyword">final</span> Random r = <span class="keyword">new</span> Random();</span><br><span class="line">        Thread[] array = <span class="keyword">new</span> Thread[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">final</span> CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(array.length);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            array[i] = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">10000</span>; j++) &#123;</span><br><span class="line">                        map.put(<span class="string">"key"</span> + r.nextInt(<span class="number">100000</span>), <span class="string">"value"</span> + r.nextInt(<span class="number">100000</span>));</span><br><span class="line">                    &#125;</span><br><span class="line">                    latch.countDown();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Thread t : array) &#123;</span><br><span class="line">            t.start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            latch.await();    <span class="comment">//ç­‰å¾…é—¨é—©å¼€æ”¾</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œæ—¶é—´ä¸º ï¼š "</span> + (end - begin) + <span class="string">"æ¯«ç§’ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è°ƒè¡¨æœºæ„ï¼š</strong>å­˜10ã€18ã€15ã€20ã€19ã€‚</p>
<p><img src="\media\è·³è¡¨.jpg" alt="è·³è¡¨"></p>
<h3 id="å…ƒå©´ä¸­æœŸï¼ˆListï¼‰"><a href="#å…ƒå©´ä¸­æœŸï¼ˆListï¼‰" class="headerlink" title="å…ƒå©´ä¸­æœŸï¼ˆListï¼‰"></a>å…ƒå©´ä¸­æœŸï¼ˆListï¼‰</h3><ul>
<li>CopyOnWriteArrayListï¼šå†™æ—¶å¤åˆ¶é›†åˆï¼Œæ•ˆç‡ä½ï¼Œè¯»å–æ•ˆç‡é«˜ã€‚æ¯æ¬¡å†™å…¥æ•°æ®ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åº•å±‚æ•°ç»„ã€‚</li>
<li>æµªè´¹ç©ºé—´ä¿è¯æ•°æ®çš„å®‰å…¨ã€‚</li>
<li>åˆå§‹å®¹é‡1ï¼Œæ¯æ¬¡æ–°å¢çš„å†…å®¹ï¼Œåˆ›å»ºå®¹é‡+1ã€‚</li>
<li>å–å¾—æ—¶å€™ï¼Œå–æœ€æ–°çš„æ•°ç»„ã€‚removeæœ€åä¸€ä¸ªæ•°æ®ï¼Œç›´æ¥ç”¨ä¸Šä¸€ä¸ªæ•°ç»„ã€‚</li>
<li>setå’Œremoveå…¶ä»–æ•°æ®ï¼Œé‡æ–°åˆ›å»ºæ•°ç»„ã€‚</li>
<li>å­˜åœ¨å¹»è¯»ï¼ˆå†™çš„æ—¶å€™ï¼Œæœ‰è¯»æ“ä½œï¼Œä¸æ˜¯æœ€æ–°æ·»åŠ çš„æ•°æ®ï¼‰</li>
<li>å­˜åœ¨è„è¯»ï¼ˆå†™çš„æ—¶å€™ï¼Œæœ‰è¯»æ“ä½œï¼Œä¸æ˜¯æœ€æ–°æ·»åŠ çš„æ•°æ®ï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_02_CopyOnWriteList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// final List&lt;String&gt; list = new ArrayList&lt;&gt;(); çº¿ç¨‹ä¸å®‰å…¨</span></span><br><span class="line">        <span class="comment">// final List&lt;String&gt; list = new Vector&lt;&gt;();    çº¿ç¨‹å®‰å…¨ æ›´å¿«</span></span><br><span class="line">        <span class="keyword">final</span> List&lt;String&gt; list = <span class="keyword">new</span> CopyOnWriteArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">final</span> Random r = <span class="keyword">new</span> Random();</span><br><span class="line">        Thread[] array = <span class="keyword">new</span> Thread[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">final</span> CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(array.length);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++)&#123;</span><br><span class="line">            array[i] = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++)&#123;</span><br><span class="line">                        list.add(<span class="string">"value"</span> + r.nextInt(<span class="number">100000</span>));</span><br><span class="line">                    &#125;</span><br><span class="line">                    latch.countDown();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(Thread t : array)&#123;</span><br><span class="line">            t.start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            latch.await();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œæ—¶é—´ä¸º ï¼š "</span> + (end-begin) + <span class="string">"æ¯«ç§’ï¼"</span>);</span><br><span class="line">        System.out.println(<span class="string">"List.size() : "</span> + list.size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…ƒå©´åæœŸï¼ˆQueueï¼‰"><a href="#å…ƒå©´åæœŸï¼ˆQueueï¼‰" class="headerlink" title="å…ƒå©´åæœŸï¼ˆQueueï¼‰"></a>å…ƒå©´åæœŸï¼ˆQueueï¼‰</h3><p><strong>ConcurrentLinkedQueueï¼š</strong>åŸºç¡€é“¾è¡¨åŒæ­¥é˜Ÿåˆ—ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_03_ConcurrentLinkedQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Queue&lt;String&gt; queue = <span class="keyword">new</span> ConcurrentLinkedQueue&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">            queue.offer(<span class="string">"value"</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(queue);</span><br><span class="line">        System.out.println(queue.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// peek() -&gt; æŸ¥çœ‹queueä¸­çš„é¦–æ•°æ®</span></span><br><span class="line">        System.out.println(queue.peek());</span><br><span class="line">        System.out.println(queue.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// poll() -&gt; è·å–queueä¸­çš„é¦–æ•°æ®</span></span><br><span class="line">        System.out.println(queue.poll());</span><br><span class="line">        System.out.println(queue.size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>LinkedBlockingQueueï¼š</strong>é˜»å¡é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—å®¹é‡ä¸è¶³è‡ªåŠ¨é˜»å¡ï¼Œé˜Ÿåˆ—å®¹é‡ä¸º 0 è‡ªåŠ¨é˜»å¡ã€‚</p>
<ul>
<li>putè‡ªåŠ¨é˜»å¡ï¼Œ é˜Ÿåˆ—å®¹é‡æ»¡åï¼Œè‡ªåŠ¨é˜»å¡ã€‚</li>
<li>takeè‡ªåŠ¨é˜»å¡æ–¹æ³•ï¼Œ é˜Ÿåˆ—å®¹é‡ä¸º0åï¼Œè‡ªåŠ¨é˜»å¡ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_04_LinkedBlockingQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> BlockingQueue&lt;String&gt; queue = <span class="keyword">new</span> LinkedBlockingQueue&lt;&gt;();</span><br><span class="line">    <span class="keyword">final</span> Random r = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_04_LinkedBlockingQueue t = <span class="keyword">new</span> Test_04_LinkedBlockingQueue();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        t.queue.put(<span class="string">"value"</span>+t.r.nextInt(<span class="number">1000</span>));</span><br><span class="line">                        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">"producer"</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            System.out.println(Thread.currentThread().getName() + </span><br><span class="line">                                    <span class="string">" - "</span> + t.queue.take());</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="string">"consumer"</span>+i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ArrayBlockingQueueï¼š</strong>åº•å±‚æ•°ç»„å®ç°çš„æœ‰ç•Œé˜Ÿåˆ—ã€‚è‡ªåŠ¨é˜»å¡ã€‚æ ¹æ®è°ƒç”¨ APIï¼ˆadd/put/offerï¼‰ä¸åŒï¼Œæœ‰ä¸åŒç‰¹æ€§ã€‚å½“å®¹é‡ä¸è¶³çš„æ—¶å€™ï¼Œæœ‰é˜»å¡èƒ½åŠ›ã€‚</p>
<ul>
<li>add æ–¹æ³•åœ¨å®¹é‡ä¸è¶³çš„æ—¶å€™ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>put æ–¹æ³•åœ¨å®¹é‡ä¸è¶³çš„æ—¶å€™ï¼Œé˜»å¡ç­‰å¾…ã€‚</li>
<li>offer æ–¹æ³•ï¼Œ<ul>
<li>å•å‚æ•° offer æ–¹æ³•ï¼Œä¸é˜»å¡ã€‚å®¹é‡ä¸è¶³çš„æ—¶å€™ï¼Œè¿”å› falseã€‚å½“å‰æ–°å¢æ•°æ®æ“ä½œæ”¾å¼ƒã€‚</li>
<li>ä¸‰å‚æ•° offer æ–¹æ³•ï¼ˆoffer(value,times,timeunit)ï¼‰ï¼Œå®¹é‡ä¸è¶³çš„æ—¶å€™ï¼Œé˜»å¡ times æ—¶é•¿ï¼ˆå•<br>ä½ä¸º timeunitï¼‰ï¼Œå¦‚æœåœ¨é˜»å¡æ—¶é•¿å†…ï¼Œæœ‰å®¹é‡ç©ºé—²ï¼Œæ–°å¢æ•°æ®è¿”å› trueã€‚å¦‚æœé˜»å¡æ—¶é•¿èŒƒå›´<br>å†…ï¼Œæ— å®¹é‡ç©ºé—²ï¼Œæ”¾å¼ƒæ–°å¢æ•°æ®ï¼Œè¿”å› falseã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_05_ArrayBlockingQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> BlockingQueue&lt;String&gt; queue = <span class="keyword">new</span> ArrayBlockingQueue&lt;&gt;(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_05_ArrayBlockingQueue t = <span class="keyword">new</span> Test_05_ArrayBlockingQueue();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// System.out.println("add method : " + t.queue.add("value"+i));</span></span><br><span class="line">            ---------------------------------------------------------------------</span><br><span class="line">            <span class="comment">/*try &#123;</span></span><br><span class="line"><span class="comment">                t.queue.put("put"+i);</span></span><br><span class="line"><span class="comment">            &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">                e.printStackTrace();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            System.out.println("put method : " + i);*/</span></span><br><span class="line">            ---------------------------------------------------------------------</span><br><span class="line">            <span class="comment">// System.out.println("offer method : " + t.queue.offer("value"+i));</span></span><br><span class="line">            ---------------------------------------------------------------------</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"offer method : "</span> + </span><br><span class="line">                            t.queue.offer(<span class="string">"value"</span>+i, <span class="number">1</span>, TimeUnit.SECONDS));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(t.queue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>DelayQueueï¼š</strong>å»¶æ—¶é˜Ÿåˆ—ã€‚æ ¹æ®æ¯”è¾ƒæœºåˆ¶ï¼Œå®ç°è‡ªå®šä¹‰å¤„ç†é¡ºåºçš„é˜Ÿåˆ—ã€‚å¸¸ç”¨äºå®šæ—¶ä»»åŠ¡ã€‚</p>
<ul>
<li>é€šè¿‡æ¯”è¾ƒæ–¹æ³•ï¼Œæ¯”è¾ƒæ’åˆ—ï¼Œè·å–ã€‚</li>
<li>å¯ä»¥ä¿å­˜çš„å¯¹è±¡ä¸€å®šè¦å®ç°Delayedæ¥å£ã€‚Delayedæ¥å£ç»§æ‰¿Comparableæ¥å£ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_06_DelayQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> BlockingQueue&lt;MyTask_06&gt; queue = <span class="keyword">new</span> DelayQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> value = System.currentTimeMillis();</span><br><span class="line">        MyTask_06 task1 = <span class="keyword">new</span> MyTask_06(value + <span class="number">2000</span>);</span><br><span class="line">        MyTask_06 task2 = <span class="keyword">new</span> MyTask_06(value + <span class="number">1000</span>);</span><br><span class="line">        MyTask_06 task3 = <span class="keyword">new</span> MyTask_06(value + <span class="number">3000</span>);</span><br><span class="line">        MyTask_06 task4 = <span class="keyword">new</span> MyTask_06(value + <span class="number">2500</span>);</span><br><span class="line">        MyTask_06 task5 = <span class="keyword">new</span> MyTask_06(value + <span class="number">1500</span>);</span><br><span class="line"></span><br><span class="line">        queue.put(task1);</span><br><span class="line">        queue.put(task2);</span><br><span class="line">        queue.put(task3);</span><br><span class="line">        queue.put(task4);</span><br><span class="line">        queue.put(task5);</span><br><span class="line"></span><br><span class="line">        System.out.println(queue);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            System.out.println(queue.take());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTask_06</span> <span class="keyword">implements</span> <span class="title">Delayed</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> compareValue;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyTask_06</span><span class="params">(<span class="keyword">long</span> compareValue)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.compareValue = compareValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°ã€‚è‡ªåŠ¨å®ç°å‡åº</span></span><br><span class="line"><span class="comment">     * å»ºè®®å’ŒgetDelayæ–¹æ³•é…åˆå®Œæˆã€‚</span></span><br><span class="line"><span class="comment">     * å¦‚æœåœ¨DelayQueueæ˜¯éœ€è¦æŒ‰æ—¶é—´å®Œæˆçš„è®¡åˆ’ä»»åŠ¡ï¼Œå¿…é¡»é…åˆgetDelayæ–¹æ³•å®Œæˆã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Delayed o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)(<span class="keyword">this</span>.getDelay(TimeUnit.MILLISECONDS) - o.getDelay(TimeUnit.MILLISECONDS));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è®¡åˆ’æ—¶é•¿çš„æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å‚æ•°TimeUnitæ¥å†³å®šï¼Œå¦‚ä½•è¿”å›ç»“æœå€¼ã€‚ç§’ï¼Œæ¯«ç§’</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getDelay</span><span class="params">(TimeUnit unit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> unit.convert(compareValue - System.currentTimeMillis(), TimeUnit.MILLISECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Task compare value is : "</span> + <span class="keyword">this</span>.compareValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>LinkedTransferQueueï¼š</strong>è½¬ç§»é˜Ÿåˆ—ï¼Œ</p>
<ul>
<li>ä½¿ç”¨ transfer æ–¹æ³•ï¼Œæ²¡æœ‰æ¶ˆè´¹è€…ï¼Œå°±é˜»å¡ã€‚å¿…é¡»æœ‰æ¶ˆè´¹è€…ï¼ˆtake()æ–¹æ³•çš„è°ƒç”¨è€…ï¼‰ï¼Œå®ç°æ•°æ®çš„å³æ—¶å¤„ç†ï¼ˆç”µè¯ï¼‰ã€‚</li>
<li>æ— å®¹é‡çš„ï¼Œæ”¾æ•°ç»„ï¼Œå®¹é‡ä¸ºé›¶ï¼Œè¿™æ—¶å€™è¦é˜»å¡ã€‚ç­‰å¦ä¸€ä¸ªçº¿ç¨‹æ¥æ‹¿ï¼Œä¸ç»è¿‡å®¹å™¨çš„å­˜å‚¨æ¥è½¬ç§»æ•°ç»„ã€‚</li>
<li>ä½¿ç”¨ addæ–¹æ³•ï¼Œç›´æ¥å­˜åœ¨å®¹å™¨ä¸­ã€‚é˜Ÿåˆ—ä¼šä¿å­˜æ•°æ®ï¼Œä¸åšé˜»å¡ç­‰å¾…ï¼ˆçŸ­ä¿¡ï¼‰ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_07_TransferQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    TransferQueue&lt;String&gt; queue = <span class="keyword">new</span> LinkedTransferQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_07_TransferQueue t = <span class="keyword">new</span> Test_07_TransferQueue();<span class="comment">//ä¸ºäº†åŒ¿åå†…éƒ¨ç´¯æ–¹æ³•ä¸­è·å¾—queueå¼•ç”¨ã€‚</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*new Thread(new Runnable() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public void run() &#123;</span></span><br><span class="line"><span class="comment">                try &#123;</span></span><br><span class="line"><span class="comment">                    System.out.println(Thread.currentThread().getName() + " thread begin " );</span></span><br><span class="line"><span class="comment">                    System.out.println(Thread.currentThread().getName() + " - " + t.queue.take());</span></span><br><span class="line"><span class="comment">                &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">                    e.printStackTrace();</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;, "output thread").start();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        try &#123;</span></span><br><span class="line"><span class="comment">            TimeUnit.SECONDS.sleep(2);</span></span><br><span class="line"><span class="comment">        &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">            e.printStackTrace();</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        try &#123;</span></span><br><span class="line"><span class="comment">            t.queue.transfer("test string");</span></span><br><span class="line"><span class="comment">        &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">            e.printStackTrace();</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    t.queue.transfer(<span class="string">"test string"</span>);</span><br><span class="line">                    <span class="comment">// t.queue.add("test string");</span></span><br><span class="line">                    System.out.println(<span class="string">"add ok"</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">" thread begin "</span> );</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">" - "</span> + t.queue.take());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">"output thread"</span>).start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>SynchronusQueueï¼š</strong>åŒæ­¥é˜Ÿåˆ—ï¼Œæ˜¯ä¸€ä¸ªå®¹é‡ä¸º 0 çš„é˜Ÿåˆ—ã€‚æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ TransferQueueã€‚</p>
<ul>
<li>å¿…é¡»ç°æœ‰æ¶ˆè´¹çº¿ç¨‹ç­‰å¾…ï¼Œæ‰èƒ½ä½¿ç”¨çš„é˜Ÿåˆ—ã€‚</li>
<li>add æ–¹æ³•ï¼Œæ— é˜»å¡ã€‚è‹¥æ²¡æœ‰æ¶ˆè´¹çº¿ç¨‹é˜»å¡ç­‰å¾…æ•°æ®ï¼Œåˆ™æŠ›å‡ºéé˜»å¡å¼‚å¸¸ã€‚</li>
<li>put æ–¹æ³•ï¼Œæœ‰é˜»å¡ã€‚è‹¥æ²¡æœ‰æ¶ˆè´¹çº¿ç¨‹é˜»å¡ç­‰å¾…æ•°æ®ï¼Œåˆ™é˜»å¡ã€‚</li>
<li>åœºæ™¯ï¼šç©å®¶ä¸ç©å®¶ä¹‹é—´çš„åŒ¹é…ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_08_SynchronusQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    BlockingQueue&lt;String&gt; queue = <span class="keyword">new</span> SynchronousQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Test_08_SynchronusQueue t = <span class="keyword">new</span> Test_08_SynchronusQueue();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">" thread begin "</span> );</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">" - "</span> + t.queue.take());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">"output thread"</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*try &#123;</span></span><br><span class="line"><span class="comment">            TimeUnit.SECONDS.sleep(3);</span></span><br><span class="line"><span class="comment">        &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">            e.printStackTrace();</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="comment">// t.queue.add("test add");</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            t.queue.put(<span class="string">"test put"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">" queue size : "</span> + t.queue.size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…ƒå©´åœ†æ»¡ï¼ˆçº¿ç¨‹æ± ï¼‰"><a href="#å…ƒå©´åœ†æ»¡ï¼ˆçº¿ç¨‹æ± ï¼‰" class="headerlink" title="å…ƒå©´åœ†æ»¡ï¼ˆçº¿ç¨‹æ± ï¼‰"></a>å…ƒå©´åœ†æ»¡ï¼ˆçº¿ç¨‹æ± ï¼‰</h3><p>â€‹        <strong>Executorï¼š</strong>çº¿ç¨‹æ± é¡¶çº§æ¥å£ã€‚å®šä¹‰æ–¹æ³•ï¼Œvoid execute(Runnable)ã€‚æ–¹æ³•æ˜¯ç”¨äºå¤„ç†ä»»åŠ¡çš„ä¸€ä¸ªæœåŠ¡æ–¹æ³•ã€‚è°ƒç”¨è€…æä¾› Runnable æ¥å£çš„å®ç°ï¼Œçº¿ç¨‹æ± é€šè¿‡çº¿ç¨‹æ‰§è¡Œè¿™ä¸ª Runnableã€‚æœåŠ¡æ–¹æ³•æ— è¿”å›å€¼çš„ã€‚æ˜¯ Runnable æ¥å£ä¸­çš„ run æ–¹æ³•æ— è¿”å›å€¼ã€‚å¸¸ç”¨æ–¹æ³• - void execute(Runnable)ï¼Œä½œç”¨æ˜¯å¯åŠ¨çº¿ç¨‹ä»»åŠ¡çš„ã€‚</p>
<p>â€‹        ä»–ä¸æ˜¯çº¿ç¨‹æ± ï¼Œä»–æ˜¯çº¿ç¨‹æ± çº¿ç¨‹æ± åº•å±‚å¤„ç†æœºåˆ¶ã€‚åœ¨ä½¿ç”¨çº¿ç¨‹æ± çš„æ—¶å€™ï¼Œåº•å±‚å¦‚ä½•å¤„ç†æœ¬çº¿ç¨‹çš„é€»è¾‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_01_MyExecutor</span> <span class="keyword">implements</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Test_01_MyExecutor().execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">" - test executor"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(Runnable command)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(command).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ExecutorServiceï¼š</strong>Executor æ¥å£çš„å­æ¥å£ã€‚æä¾›äº†ä¸€ä¸ªæ–°çš„æœåŠ¡æ–¹æ³•ï¼Œsubmitã€‚æœ‰è¿”å›å€¼ï¼ˆFuture ç±»å‹ï¼‰ã€‚submit æ–¹æ³•æä¾›äº† overload æ–¹æ³•ã€‚å…¶ä¸­æœ‰å‚æ•°ç±»å‹ä¸º Runnable çš„ï¼Œä¸éœ€è¦æä¾›è¿”å›å€¼çš„ï¼›æœ‰å‚æ•°ç±»å‹ä¸º Callableï¼Œå¯ä»¥æä¾›çº¿ç¨‹æ‰§è¡Œåçš„è¿”å›å€¼ã€‚</p>
<ul>
<li><p>ä»–æ˜¯çº¿ç¨‹æ± æœåŠ¡ç±»å‹ã€‚æ‰€æœ‰çš„çº¿ç¨‹æ± ç±»å‹éƒ½å®ç°è¿™ä¸ªæ¥å£ï¼Œå®ç°è¿™ä¸ªæ¥å£ï¼Œä»£è¡¨å¯ä»¥æä¾›çº¿ç¨‹æ± èƒ½åŠ›ã€‚</p>
</li>
<li><p>Futureæ˜¯ submit æ–¹æ³•çš„è¿”å›å€¼ã€‚ä»£è¡¨æœªæ¥ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„ä¸€ç§ç»“æœã€‚å¦‚è¿”å›å€¼ã€‚</p>
</li>
<li><p>å¸¸è§æ–¹æ³•</p>
<ul>
<li>void execute(Runnable)</li>
<li>Future submit(Callable)</li>
<li>Future submit(Runnable)</li>
<li>shutdown()ï¼šä¼˜é›…å…³é—­ã€‚ ä¸æ˜¯å¼ºè¡Œå…³é—­çº¿ç¨‹æ± ï¼Œå›æ”¶çº¿ç¨‹æ± ä¸­çš„èµ„æºã€‚è€Œæ˜¯ä¸å†å¤„ç†æ–°çš„ä»»åŠ¡ï¼Œå°†å·²æ¥æ”¶çš„ä»»åŠ¡å¤„ç†å®Œæ¯•åå†å…³é—­ã€‚</li>
</ul>
</li>
<li><p>çº¿ç¨‹æ± çŠ¶æ€</p>
<ul>
<li>Running - çº¿ç¨‹æ± æ­£åœ¨æ‰§è¡Œä¸­ã€‚æ´»åŠ¨çŠ¶æ€ã€‚</li>
<li>ShuttingDown - çº¿ç¨‹æ± æ­£åœ¨å…³é—­è¿‡ç¨‹ä¸­ã€‚ä¼˜é›…å…³é—­ã€‚ä¸€æ—¦è¿›å…¥è¿™ä¸ªçŠ¶æ€ï¼Œçº¿ç¨‹æ± ä¸å†æ¥æ”¶æ–°çš„ä»»åŠ¡ï¼Œå¤„ç†æ‰€æœ‰å·²æ¥æ”¶çš„ä»»åŠ¡ï¼Œå¤„ç†å®Œæ¯•åï¼Œå…³é—­çº¿ç¨‹æ± ã€‚ä¸èƒ½æ‰§è¡Œsubmitæ–¹æ³•å’Œexecuteæ–¹æ³•ã€‚</li>
<li>Terminated - çº¿ç¨‹æ± å·²ç»å…³é—­ã€‚ä¸èƒ½æ‰§è¡Œsubmitæ–¹æ³•å’Œexecuteæ–¹æ³•ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Futureï¼š</strong>æœªæ¥ç»“æœï¼Œä»£è¡¨çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œç»“æŸåçš„ç»“æœã€‚è·å–çº¿ç¨‹æ‰§è¡Œç»“æœçš„æ–¹å¼æ˜¯é€šè¿‡ get æ–¹æ³•è·å–çš„ã€‚</p>
<ul>
<li>get æ— å‚ï¼Œé˜»å¡ç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œå¹¶å¾—åˆ°ç»“æœã€‚</li>
<li>get æœ‰å‚ï¼Œé˜»å¡å›ºå®šæ—¶é•¿ï¼Œç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„ç»“æœï¼Œå¦‚æœåœ¨é˜»å¡æ—¶é•¿èŒƒå›´å†…ï¼Œçº¿ç¨‹æœªæ‰§è¡Œç»“æŸï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>å¸¸ç”¨æ–¹æ³•ï¼š<ul>
<li>T get() </li>
<li>T get(long, TimeUnit)</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_03_Future</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException </span>&#123;</span><br><span class="line">        <span class="comment">/*FutureTask&lt;String&gt; task = new FutureTask&lt;&gt;(new Callable&lt;String&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public String call() throws Exception &#123;</span></span><br><span class="line"><span class="comment">                return "first future task";</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        new Thread(task).start();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        System.out.println(task.get());*/</span></span><br><span class="line">        <span class="comment">// ä¸Šé¢ä»£ç å’Œä¸‹é¢ä¸€æ¨¡ä¸€æ ·çš„</span></span><br><span class="line">        ExecutorService service = Executors.newFixedThreadPool(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        Future&lt;String&gt; future = service.submit(<span class="keyword">new</span> Callable&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.MILLISECONDS.sleep(<span class="number">500</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">"aaa"</span>);</span><br><span class="line">                <span class="keyword">return</span> Thread.currentThread().getName() + <span class="string">" - test executor"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(future);</span><br><span class="line">        System.out.println(future.isDone()); <span class="comment">// æŸ¥çœ‹çº¿ç¨‹æ˜¯å¦ç»“æŸï¼Œ ä»»åŠ¡æ˜¯å¦å®Œæˆã€‚ callæ–¹æ³•æ˜¯å¦æ‰§è¡Œç»“æŸ</span></span><br><span class="line"></span><br><span class="line">        System.out.println(future.get()); <span class="comment">// è·å–callæ–¹æ³•çš„è¿”å›å€¼ã€‚</span></span><br><span class="line">        System.out.println(future.isDone());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Callableï¼š</strong>å¯æ‰§è¡Œæ¥å£ï¼Œ ç±»ä¼¼ Runnable æ¥å£ï¼Œä¹Ÿæ˜¯å¯ä»¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹çš„æ¥å£ã€‚å…¶ä¸­å®šä¹‰çš„æ–¹æ³•æ˜¯<br>callï¼Œcall æ–¹æ³•çš„ä½œç”¨å’Œ Runnable ä¸­çš„ run æ–¹æ³•å®Œå…¨ä¸€è‡´ï¼Œcall æ–¹æ³•æœ‰è¿”å›å€¼ã€‚</p>
<ul>
<li>æ¥å£æ–¹æ³• ï¼š Object call();ç›¸å½“äº Runnable æ¥å£ä¸­çš„ run æ–¹æ³•ã€‚åŒºåˆ«ä¸ºæ­¤æ–¹æ³•æœ‰è¿”å›å€¼ã€‚<br>ä¸èƒ½æŠ›å‡ºå·²æ£€æŸ¥å¼‚å¸¸ã€‚</li>
<li>å’Œ Runnable æ¥å£çš„é€‰æ‹© - éœ€è¦è¿”å›å€¼æˆ–éœ€è¦æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œä½¿ç”¨ Callableï¼Œå…¶ä»–æƒ…å†µå¯<br>ä»»æ„é€‰æ‹©ã€‚</li>
</ul>
<hr>
<p><strong>Executorsï¼š</strong>å·¥å…·ç±»å‹ï¼Œä¸º Executor çº¿ç¨‹æ± æä¾›å·¥å…·æ–¹æ³•ã€‚</p>
<ul>
<li>å¯ä»¥å¿«é€Ÿçš„æä¾›è‹¥å¹²ç§çº¿ç¨‹æ± ã€‚å¦‚ï¼šå›ºå®šå®¹é‡çš„ï¼Œæ— é™å®¹é‡çš„ï¼Œå®¹é‡ä¸º 1 ç­‰å„ç§çº¿ç¨‹æ± ã€‚</li>
<li>çº¿ç¨‹æ± æ˜¯ä¸€ä¸ªè¿›ç¨‹çº§çš„é‡é‡çº§èµ„æºã€‚é»˜è®¤çš„ç”Ÿå‘½å‘¨æœŸå’Œ JVM ä¸€è‡´ã€‚å½“å¼€å¯çº¿ç¨‹æ± åï¼Œç›´åˆ° JVM å…³é—­ä¸ºæ­¢ï¼Œæ˜¯çº¿ç¨‹æ± çš„é»˜è®¤ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœæ‰‹å·¥è°ƒç”¨ shutdown æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹æ± æ‰§è¡Œæ‰€æœ‰çš„ä»»åŠ¡åï¼Œè‡ªåŠ¨å…³é—­ã€‚ä¸è°ƒç”¨shutdownæ–¹æ³•ï¼Œç¨‹åºä¸€ç›´ä¸å…³é—­çš„ã€‚</li>
<li>å¼€å§‹ - åˆ›å»ºçº¿ç¨‹æ± ã€‚</li>
<li>ç»“æŸ - JVM å…³é—­æˆ–è°ƒç”¨ shutdown å¹¶å¤„ç†å®Œæ‰€æœ‰çš„ä»»åŠ¡ã€‚</li>
<li>ç±»ä¼¼ Arraysï¼ŒCollections ç­‰å·¥å…·ç±»å‹çš„åŠŸç”¨ã€‚</li>
</ul>
<hr>
<p><strong>FixedThreadPoolï¼š</strong>å®¹é‡å›ºå®šçš„çº¿ç¨‹æ± ã€‚æ´»åŠ¨çŠ¶æ€å’Œçº¿ç¨‹æ± å®¹é‡æ˜¯æœ‰ä¸Šé™çš„çº¿ç¨‹æ± ã€‚</p>
<ul>
<li><p>æ‰€æœ‰çš„çº¿ç¨‹æ± ä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ã€‚ä½¿ç”¨çš„æ˜¯ BlockingQueue<runnable>ä½œä¸ºä»»åŠ¡çš„è½½ä½“ã€‚å½“ä»»åŠ¡æ•°é‡å¤§äºçº¿ç¨‹æ± å®¹é‡çš„æ—¶å€™ï¼Œæ²¡æœ‰è¿è¡Œçš„ä»»åŠ¡ä¿å­˜åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå½“çº¿ç¨‹æœ‰ç©ºé—²çš„ï¼Œè‡ªåŠ¨ä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚</runnable></p>
</li>
<li><p>ä½¿ç”¨åœºæ™¯ï¼š å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨çš„çº¿ç¨‹æ± ï¼Œé¦–é€‰æ¨è FixedThreadPoolã€‚OS ç³»ç»Ÿå’Œç¡¬ä»¶æ˜¯æœ‰çº¿ç¨‹æ”¯æŒä¸Šé™ã€‚ä¸èƒ½éšæ„çš„æ— é™åˆ¶æä¾›çº¿ç¨‹æ± ã€‚</p>
</li>
<li><p>çº¿ç¨‹æ± é»˜è®¤çš„å®¹é‡ä¸Šé™æ˜¯ Integer.MAX_VALUEã€‚</p>
</li>
<li><p>å¸¸è§çš„çº¿ç¨‹æ± å®¹é‡ï¼š PC - 200ã€‚ æœåŠ¡å™¨ - 1000~10000</p>
</li>
<li><p>queued tasks - ä»»åŠ¡é˜Ÿåˆ—ï¼Œcompleted tasks - ç»“æŸä»»åŠ¡é˜Ÿåˆ—</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_02_FixedThreadPool</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService service =</span><br><span class="line">                Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">            service.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeUnit.MILLISECONDS.sleep(<span class="number">500</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">" - test executor"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//[Running, pool size = 5, active threads = 5, queued tasks = 1, completed tasks             = 0]</span></span><br><span class="line">        System.out.println(service);</span><br><span class="line"></span><br><span class="line">        service.shutdown();</span><br><span class="line">        <span class="comment">// æ˜¯å¦å·²ç»ç»“æŸï¼Œ ç›¸å½“äºå›æ”¶äº†èµ„æºã€‚</span></span><br><span class="line">        System.out.println(service.isTerminated()); <span class="comment">// false</span></span><br><span class="line">        <span class="comment">// æ˜¯å¦å·²ç»å…³é—­ï¼Œ æ˜¯å¦è°ƒç”¨è¿‡shutdownæ–¹æ³•</span></span><br><span class="line">        System.out.println(service.isShutdown());   <span class="comment">//true</span></span><br><span class="line">        <span class="comment">// [Shutting down, pool size = 5, active threads = 5, queued tasks = 1, completed               tasks = 0]</span></span><br><span class="line">        System.out.println(service);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// service.shutdown();</span></span><br><span class="line">        System.out.println(service.isTerminated()); <span class="comment">//true</span></span><br><span class="line">        System.out.println(service.isShutdown());   <span class="comment">//true</span></span><br><span class="line">        <span class="comment">// [Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed                 tasks = 6]</span></span><br><span class="line">        System.out.println(service);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹        <strong>CachedThreadPoolï¼š</strong>ç¼“å­˜çš„çº¿ç¨‹æ± ã€‚å®¹é‡ä¸é™ï¼ˆInteger.MAX_VALUEï¼‰ã€‚è‡ªåŠ¨æ‰©å®¹ã€‚å®¹é‡ç®¡ç†ç­–ç•¥ï¼šå¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡ä¸æ»¡è¶³ä»»åŠ¡æ‰§è¡Œï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚æ¯æ¬¡æœ‰æ–°ä»»åŠ¡æ— æ³•å³æ—¶å¤„ç†çš„æ—¶å€™ï¼Œéƒ½ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚</p>
<ul>
<li>å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ç©ºé—²æ—¶é•¿è¾¾åˆ°ä¸€å®šçš„ä¸´ç•Œå€¼ï¼ˆé»˜è®¤ 60 ç§’ï¼‰ï¼Œè‡ªåŠ¨é‡Šæ”¾çº¿ç¨‹ã€‚</li>
<li>é»˜è®¤çº¿ç¨‹ç©ºé—² 60 ç§’ï¼Œè‡ªåŠ¨é”€æ¯ã€‚</li>
<li>åº”ç”¨åœºæ™¯ï¼š å†…éƒ¨åº”ç”¨æˆ–æµ‹è¯•åº”ç”¨ã€‚ å†…éƒ¨åº”ç”¨ï¼Œæœ‰æ¡ä»¶çš„å†…éƒ¨æ•°æ®ç¬é—´å¤„ç†æ—¶åº”ç”¨ï¼Œå¦‚ï¼šç”µä¿¡å¹³å°å¤œé—´æ‰§è¡Œæ•°æ®æ•´ç†ï¼ˆæœ‰æŠŠæ¡åœ¨çŸ­æ—¶é—´å†…å¤„ç†å®Œæ‰€æœ‰å·¥ä½œï¼Œä¸”å¯¹ç¡¬ä»¶å’Œè½¯ä»¶æœ‰è¶³å¤Ÿçš„ä¿¡å¿ƒï¼‰ã€‚ </li>
<li>æµ‹è¯•åº”ç”¨ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå°è¯•å¾—åˆ°ç¡¬ä»¶æˆ–è½¯ä»¶çš„æœ€é«˜è´Ÿè½½é‡ï¼Œç”¨äºæä¾›FixedThreadPool å®¹é‡çš„æŒ‡å¯¼ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_05_CachedThreadPool</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService service = Executors.newCachedThreadPool();</span><br><span class="line">        System.out.println(service);    <span class="comment">// å®¹é‡ä¸º0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            service.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeUnit.MILLISECONDS.sleep(<span class="number">500</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">" - test executor"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(service);    <span class="comment">// å®¹é‡ä¸º5</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">65</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(service);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ScheduledThreadPoolï¼š</strong>è®¡åˆ’ä»»åŠ¡çº¿ç¨‹æ± ã€‚å¯ä»¥æ ¹æ®è®¡åˆ’è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ± ã€‚</p>
<ul>
<li>scheduleAtFixedRate(Runnable, start_limit, limit, timeunit)<ul>
<li>runnable - è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>
<li>start_limit - ç¬¬ä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œçš„é—´éš”ã€‚</li>
<li>limit - å¤šæ¬¡ä»»åŠ¡æ‰§è¡Œçš„é—´éš”ã€‚</li>
<li>timeunit - å¤šæ¬¡ä»»åŠ¡æ‰§è¡Œé—´éš”çš„æ—¶é—´å•ä½ã€‚</li>
</ul>
</li>
<li>ä»–æ˜¯é˜»å¡çš„ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</li>
<li>ä»–æœ¬è´¨å°±æ˜¯DelayedQueue</li>
<li>æ¯é—´éš”ä¸€å®šçš„æ—¶é—´ï¼Œéšæœºä¸€ä¸ªçº¿ç¨‹è¿è¡Œï¼Œå¹¶ä¸”è¿è¡Œå®Œçš„çº¿ç¨‹ï¼Œä¸ä¼šé”€æ¯ï¼Œä¼šç»§ç»­ç­‰å¾…ä¸‹æ¬¡é€‰ä¸­è¿è¡Œã€‚</li>
<li>ä½¿ç”¨åœºæ™¯ï¼š è®¡åˆ’ä»»åŠ¡æ—¶é€‰ç”¨ï¼ˆå…·ä½“ä¸DelaydQueueæ¯”è¾ƒåé€‰æ‹©ï¼‰ï¼Œå¦‚ï¼šç”µä¿¡è¡Œä¸šä¸­çš„æ•°æ®æ•´ç†ï¼Œæ¯åˆ†é’Ÿæ•´ç†ï¼Œæ¯æ¶ˆå¤±æ•´ç†ï¼Œæ¯å¤©æ•´ç†ç­‰.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_07_ScheduledThreadPool</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ScheduledExecutorService service = Executors.newScheduledThreadPool(<span class="number">3</span>);</span><br><span class="line">        System.out.println(service);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å®šæ—¶å®Œæˆä»»åŠ¡ã€‚ scheduleAtFixedRate(Runnable, start_limit, limit, timeunit)</span></span><br><span class="line">        <span class="comment">// runnable - è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚</span></span><br><span class="line">        service.scheduleAtFixedRate(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.MILLISECONDS.sleep(<span class="number">500</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">0</span>, <span class="number">300</span>, TimeUnit.MILLISECONDS);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>SingleThreadExceutorï¼š</strong>å•ä¸€å®¹é‡çš„çº¿ç¨‹æ± ã€‚ä½¿ç”¨åœºæ™¯ï¼š æ‰€æœ‰ä»»åŠ¡äº¤ç»™å®ƒå¤„ç†ï¼Œä¿è¯ä»»åŠ¡é¡ºåºæ—¶ä½¿ç”¨ã€‚å¦‚ï¼š æ¸¸æˆå¤§å…ä¸­çš„å…¬å…±é¢‘é“èŠå¤©ã€‚ç§’æ€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_06_SingleThreadExecutor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService service = Executors.newSingleThreadExecutor();</span><br><span class="line">        System.out.println(service);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            service.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeUnit.MILLISECONDS.sleep(<span class="number">500</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">" - test executor"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ForkJoinPoolï¼š</strong>åˆ†æ”¯åˆå¹¶çº¿ç¨‹æ± ï¼ˆmapduce ç±»ä¼¼çš„è®¾è®¡æ€æƒ³ï¼Œé€’å½’æ€æƒ³çš„è¿ç”¨ï¼‰ã€‚é€‚åˆç”¨äºå¤„ç†å¤æ‚ä»»åŠ¡ã€‚</p>
<ul>
<li>åˆå§‹åŒ–çº¿ç¨‹å®¹é‡ä¸ CPU æ ¸å¿ƒæ•°ç›¸å…³ã€‚</li>
<li>çº¿ç¨‹æ± ä¸­è¿è¡Œçš„å†…å®¹å¿…é¡»æ˜¯ ForkJoinTask çš„å­ç±»å‹ï¼ˆRecursiveTask,RecursiveActionï¼‰ã€‚</li>
<li>ForkJoinPool - åˆ†æ”¯åˆå¹¶çº¿ç¨‹æ± ã€‚ å¯ä»¥é€’å½’å®Œæˆå¤æ‚ä»»åŠ¡ã€‚è¦æ±‚å¯åˆ†æ”¯åˆå¹¶çš„ä»»åŠ¡å¿…é¡»æ˜¯ ForkJoinTask ç±»å‹çš„å­ç±»å‹ã€‚å…¶ä¸­æä¾›äº†åˆ†æ”¯å’Œåˆå¹¶çš„èƒ½åŠ›ã€‚ForkJoinTask ç±»å‹æä¾›äº†ä¸¤ä¸ªæŠ½è±¡å­ç±»å‹ï¼ŒRecursiveTask æœ‰è¿”å›ç»“æœçš„åˆ†æ”¯åˆå¹¶ä»»åŠ¡,RecursiveAction æ— è¿”å›ç»“æœçš„åˆ†æ”¯åˆå¹¶ä»»åŠ¡ã€‚ï¼ˆCallable/Runnableï¼‰compute æ–¹æ³•ï¼šå°±æ˜¯ä»»åŠ¡çš„æ‰§è¡Œé€»è¾‘ã€‚</li>
<li>ForkJoinPool æ²¡æœ‰æ‰€è°“çš„å®¹é‡ã€‚é»˜è®¤éƒ½æ˜¯ 1 ä¸ªçº¿ç¨‹ã€‚æ ¹æ®ä»»åŠ¡è‡ªåŠ¨çš„åˆ†æ”¯æ–°çš„å­çº¿ç¨‹ã€‚å½“å­çº¿ç¨‹ä»»åŠ¡ç»“æŸåï¼Œè‡ªåŠ¨åˆå¹¶ã€‚æ‰€è°“è‡ªåŠ¨æ˜¯æ ¹æ® fork å’Œ join ä¸¤ä¸ªæ–¹æ³•å®ç°çš„ã€‚</li>
<li>åº”ç”¨ï¼š ä¸»è¦æ˜¯åšç§‘å­¦è®¡ç®—æˆ–å¤©æ–‡è®¡ç®—çš„ã€‚æ•°æ®åˆ†æçš„.</li>
<li>æ‹¿ç©ºé—´æ¢æ—¶é—´ï¼Œæ•ˆç‡é«˜ï¼Œä½†è¦çœ‹CPUèƒ½åŠ›ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_08_ForkJoinPool</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span>[] numbers = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1000000</span>];</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MAX_SIZE = <span class="number">50000</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> Random r = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numbers.length; i++)&#123;</span><br><span class="line">            numbers[i] = r.nextInt(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AddTask</span> <span class="keyword">extends</span> <span class="title">RecursiveTask</span>&lt;<span class="title">Long</span>&gt;</span>&#123; <span class="comment">// RecursiveAction</span></span><br><span class="line">        <span class="keyword">int</span> begin, end;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">AddTask</span><span class="params">(<span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.begin = begin;</span><br><span class="line">            <span class="keyword">this</span>.end = end;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> Long <span class="title">compute</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>((end - begin) &lt; MAX_SIZE)&#123;</span><br><span class="line">                <span class="keyword">long</span> sum = <span class="number">0L</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = begin; i &lt; end; i++)&#123;</span><br><span class="line">                    sum += numbers[i];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// System.out.println("form " + begin + " to " + end + " sum is : " + sum);</span></span><br><span class="line">                <span class="keyword">return</span> sum;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">int</span> middle = begin + (end - begin)/<span class="number">2</span>;</span><br><span class="line">                AddTask task1 = <span class="keyword">new</span> AddTask(begin, middle);</span><br><span class="line">                AddTask task2 = <span class="keyword">new</span> AddTask(middle, end);</span><br><span class="line">                task1.fork();<span class="comment">// å°±æ˜¯ç”¨äºå¼€å¯æ–°çš„ä»»åŠ¡çš„ã€‚ å°±æ˜¯åˆ†æ”¯å·¥ä½œçš„ã€‚ å°±æ˜¯å¼€å¯ä¸€ä¸ªæ–°çš„çº¿ç¨‹ä»»åŠ¡ã€‚</span></span><br><span class="line">                task2.fork();</span><br><span class="line">                <span class="comment">// join - åˆå¹¶ã€‚å°†ä»»åŠ¡çš„ç»“æœè·å–ã€‚ è¿™æ˜¯ä¸€ä¸ªé˜»å¡æ–¹æ³•ã€‚ä¸€å®šä¼šå¾—åˆ°ç»“æœæ•°æ®ã€‚</span></span><br><span class="line">                <span class="keyword">return</span> task1.join() + task2.join();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> result = <span class="number">0L</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numbers.length; i++)&#123;</span><br><span class="line">            result += numbers[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        ForkJoinPool pool = <span class="keyword">new</span> ForkJoinPool();</span><br><span class="line">        AddTask task = <span class="keyword">new</span> AddTask(<span class="number">0</span>, numbers.length);</span><br><span class="line"></span><br><span class="line">        Future&lt;Long&gt; future = pool.submit(task);</span><br><span class="line">        System.out.println(future.get());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ThreadPoolExecutorï¼š</strong>çº¿ç¨‹æ± åº•å±‚å®ç°ã€‚é™¤ ForkJoinPool å¤–ï¼Œå…¶ä»–å¸¸ç”¨çº¿ç¨‹æ± åº•å±‚éƒ½æ˜¯ä½¿ç”¨ThreadPoolExecutorå®ç°çš„ã€‚public ThreadPoolExecutor(int corePoolSizeï¼Œint maximumPoolSizeï¼Œlong keepAliveTimeï¼ŒTimeUnit unitï¼ŒBlockingQueue<runnable> workQueue);</runnable></p>
<ul>
<li>corePoolSizeï¼š æ ¸å¿ƒå®¹é‡ï¼Œåˆ›å»ºçº¿ç¨‹æ± çš„æ—¶å€™ï¼Œé»˜è®¤æœ‰å¤šå°‘çº¿ç¨‹ã€‚ä¹Ÿæ˜¯çº¿ç¨‹æ± ä¿æŒçš„æœ€å°‘çº¿ç¨‹æ•°</li>
<li>maximumPoolSizeï¼š æœ€å¤§å®¹é‡ï¼Œçº¿ç¨‹æ± æœ€å¤šæœ‰å¤šå°‘çº¿ç¨‹</li>
<li>keepAliveTimeï¼šç”Ÿå‘½å‘¨æœŸï¼Œ0 ä¸ºæ°¸ä¹…ã€‚å½“çº¿ç¨‹ç©ºé—²å¤šä¹…åï¼Œè‡ªåŠ¨å›æ”¶ã€‚</li>
<li>unitï¼šç”Ÿå‘½å‘¨æœŸå•ä½ï¼Œä¸ºç”Ÿå‘½å‘¨æœŸæä¾›å•ä½ï¼Œå¦‚ï¼šç§’ï¼Œæ¯«ç§’</li>
<li>workQueueï¼šä»»åŠ¡é˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—ã€‚æ³¨æ„ï¼Œæ³›å‹å¿…é¡»æ˜¯</li>
</ul>
<p>ä½¿ç”¨åœºæ™¯ï¼š é»˜è®¤æä¾›çš„çº¿ç¨‹æ± ä¸æ»¡è¶³æ¡ä»¶æ—¶ä½¿ç”¨ã€‚å¦‚ï¼šåˆå§‹çº¿ç¨‹æ•°æ® 4ï¼Œæœ€å¤§çº¿ç¨‹æ•°200ï¼Œçº¿ç¨‹ç©ºé—²å‘¨æœŸ 30 ç§’ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_09_ThreadPoolExecutor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹ŸfixedThreadPoolï¼Œ æ ¸å¿ƒçº¿ç¨‹5ä¸ªï¼Œæœ€å¤§å®¹é‡5ä¸ªï¼Œçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ— é™ã€‚</span></span><br><span class="line">        ExecutorService service = </span><br><span class="line">                <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">5</span>, <span class="number">5</span>, <span class="number">0L</span>, TimeUnit.MILLISECONDS, </span><br><span class="line">                        <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)&#123;</span><br><span class="line">            service.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeUnit.MILLISECONDS.sleep(<span class="number">500</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">" - test executor"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(service);</span><br><span class="line"></span><br><span class="line">        service.shutdown();</span><br><span class="line">        System.out.println(service.isTerminated());</span><br><span class="line">        System.out.println(service.isShutdown());</span><br><span class="line">        System.out.println(service);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        service.shutdown();</span><br><span class="line">        System.out.println(service.isTerminated());</span><br><span class="line">        System.out.println(service.isShutdown());</span><br><span class="line">        System.out.println(service);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç»ƒä¹ ï¼š</span><br><span class="line">å¯åŠ¨è‹¥å¹²çº¿ç¨‹ï¼Œå¹¶è¡Œè®¿é—®åŒä¸€ä¸ªå®¹å™¨ä¸­çš„æ•°æ®ã€‚ä¿è¯è·å–å®¹å™¨ä¸­æ•°æ®æ—¶æ²¡æœ‰æ•°æ®é”™è¯¯ï¼Œä¸”çº¿ç¨‹å®‰å…¨ã€‚</span><br><span class="line">å¦‚ï¼šå”®ç¥¨ï¼Œç§’æ€ç­‰ä¸šåŠ¡ã€‚</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨synchronized</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test_01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">// static List&lt;String&gt; list = new Vector&lt;&gt;();</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)&#123;</span><br><span class="line">            list.add(<span class="string">"String "</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">while</span>(list.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                        System.out.println(Thread.currentThread().getName() + <span class="string">" - "</span> + list.remove(<span class="number">0</span>));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="string">"Thread"</span> + i).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*for(int i = 0; i &lt; 10; i++)&#123;</span></span><br><span class="line"><span class="comment">            new Thread(new Runnable() &#123;</span></span><br><span class="line"><span class="comment">                @Override</span></span><br><span class="line"><span class="comment">                public void run() &#123;</span></span><br><span class="line"><span class="comment">                    while(true)&#123;</span></span><br><span class="line"><span class="comment">                        synchronized (list) &#123;</span></span><br><span class="line"><span class="comment">                            if(list.size() &lt;= 0)&#123;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            &#125;</span></span><br><span class="line"><span class="comment">                            System.out.println(Thread.currentThread().getName() + " - " + list.remove(0));</span></span><br><span class="line"><span class="comment">                        &#125;</span></span><br><span class="line"><span class="comment">                    &#125;</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125;, "Thread" + i).start();</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨queue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class Test_02 &#123;</span><br><span class="line"></span><br><span class="line">    static Queue&lt;String&gt; list = new ConcurrentLinkedQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    static&#123;</span><br><span class="line">        for(int i = 0; i &lt; 10000; i++)&#123;</span><br><span class="line">            list.add(&quot;String &quot; + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        for(int i = 0; i &lt; 10; i++)&#123;</span><br><span class="line">            new Thread(new Runnable() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void run() &#123;</span><br><span class="line">                    while(true)&#123;</span><br><span class="line">                        String str = list.poll();</span><br><span class="line">                        if(str == null)&#123;</span><br><span class="line">                            break;</span><br><span class="line">                        &#125;</span><br><span class="line">                        System.out.println(Thread.currentThread().getName() + &quot; - &quot; + str);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &quot;Thread&quot; + i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>å°ç¼–æ˜¯ä¸€æšJava Coderï¼Œä¸šä½™å†™æ–‡ç« ï¼Œç°ä¸»è¥å¾®ä¿¡å…¬ä¼—å·ã€ŠJavaæ‚£è€…ã€‹ï¼Œå–œæ¬¢çš„è¯å…³æ³¨æˆ‘çš„å…¬ä¼—å·æˆ–è€…åŠ æˆ‘å¾®ä¿¡æˆ‘ä»¬ä¸€èµ·å­¦ä¹ Java</em></p>
<p><img src="\111å…¬ä¼—å·.jpg" alt=""></p>
<h2 id="åŒ–ç¥æœŸï¼ˆJVM1-7ï¼‰"><a href="#åŒ–ç¥æœŸï¼ˆJVM1-7ï¼‰" class="headerlink" title="åŒ–ç¥æœŸï¼ˆJVM1.7ï¼‰"></a>åŒ–ç¥æœŸï¼ˆJVM1.7ï¼‰</h2><h3 id="åŒ–ç¥å‰æœŸï¼ˆjvmç»“æ„ï¼‰"><a href="#åŒ–ç¥å‰æœŸï¼ˆjvmç»“æ„ï¼‰" class="headerlink" title="åŒ–ç¥å‰æœŸï¼ˆjvmç»“æ„ï¼‰"></a>åŒ–ç¥å‰æœŸï¼ˆjvmç»“æ„ï¼‰</h3><p><strong>jvmåŸºæœ¬ç»“æ„å›¾ï¼š</strong></p>
<p><img src="\media\jvmåŸºæœ¬ç»“æ„å›¾.jpg" alt="jvmåŸºæœ¬ç»“æ„å›¾"></p>
<ul>
<li><strong>ç±»åŠ è½½å­ç³»ç»Ÿï¼š</strong>ç±»åŠ è½½å­ç³»ç»Ÿè´Ÿè´£ä»æ–‡ä»¶ç³»ç»Ÿæˆ–è€…ç½‘ç»œä¸­åŠ è½½ Class ä¿¡æ¯ï¼Œå¦‚ClassLoadè¿™é‡Œé¢çš„ç»„ä»¶ã€‚</li>
<li><strong>æ–¹æ³•åŒºï¼š</strong>åŠ è½½çš„ç±»ä¿¡æ¯å­˜æ”¾äºä¸€å—ç§°ä¸ºæ–¹æ³•åŒºçš„å†…å­˜ç©ºé—´ã€‚é™¤äº†ç±»çš„ä¿¡æ¯å¤–ï¼Œæ–¹æ³•åŒºä¸­å¯èƒ½è¿˜ä¼šå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²å­—é¢é‡å’Œæ•°å­—å¸¸é‡ï¼ˆè¿™éƒ¨åˆ†å¸¸é‡ä¿¡æ¯æ˜¯ Class æ–‡ä»¶ä¸­å¸¸é‡æ± éƒ¨åˆ†çš„å†…å­˜æ˜ å°„ï¼‰ã€‚</li>
<li><strong>Java å †ï¼š</strong>java å †åœ¨è™šæ‹Ÿæœºå¯åŠ¨çš„æ—¶å€™å»ºç«‹ï¼Œå®ƒæ˜¯ java ç¨‹åºæœ€ä¸»è¦çš„å†…å­˜å·¥ä½œåŒºåŸŸã€‚å‡ ä¹æ‰€æœ‰çš„java å¯¹è±¡å®ä¾‹éƒ½å­˜æ”¾åœ¨ java å †ä¸­ã€‚å †ç©ºé—´æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œè¿™æ˜¯ä¸€å—ä¸ java åº”ç”¨å¯†åˆ‡ç›¸å…³çš„å†…å­˜ç©ºé—´ã€‚</li>
<li><strong>ç›´æ¥å†…å­˜ï¼š</strong>java çš„ NIO åº“å…è®¸ java ç¨‹åºä½¿ç”¨ç›´æ¥å†…å­˜ã€‚ç›´æ¥å†…å­˜æ˜¯åœ¨ java å †å¤–çš„ã€ç›´æ¥å‘ç³»ç»Ÿç”³è¯·çš„å†…å­˜ç©ºé—´ã€‚é€šå¸¸è®¿é—®ç›´æ¥å†…å­˜çš„é€Ÿåº¦ä¼šä¼˜äº java å †ã€‚å› æ­¤å‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œè¯»å†™é¢‘ç¹çš„åœºåˆå¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ç›´æ¥å†…å­˜ã€‚ç”±äºç›´æ¥å†…å­˜åœ¨ java å †å¤–ï¼Œå› æ­¤å®ƒçš„å¤§å°ä¸ä¼šç›´æ¥å—é™äº Xmx æŒ‡å®šçš„æœ€å¤§å †å¤§å°ï¼Œä½†æ˜¯ç³»ç»Ÿå†…å­˜æ˜¯æœ‰é™çš„ï¼Œjava å †å’Œç›´æ¥å†…å­˜çš„æ€»å’Œä¾ç„¶å—é™äºæ“ä½œç³»ç»Ÿèƒ½ç»™å‡ºçš„æœ€å¤§å†…å­˜ã€‚</li>
<li><strong>åƒåœ¾å›æ”¶ç³»ç»Ÿï¼š</strong>åƒåœ¾å›æ”¶ç³»ç»Ÿæ˜¯ java è™šæ‹Ÿæœºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œåƒåœ¾å›æ”¶å™¨å¯ä»¥å¯¹æ–¹æ³•åŒºã€java å †å’Œç›´æ¥å†…å­˜è¿›è¡Œå›æ”¶ã€‚å…¶ä¸­ï¼Œjava å †æ˜¯åƒåœ¾æ”¶é›†å™¨çš„å·¥ä½œé‡ç‚¹ã€‚å’Œ C/C++ä¸åŒï¼Œjava ä¸­æ‰€æœ‰çš„å¯¹è±¡ç©ºé—´é‡Šæ”¾éƒ½æ˜¯éšå¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œjava ä¸­æ²¡æœ‰ç±»ä¼¼ free()æˆ–è€… delete()è¿™æ ·çš„å‡½æ•°é‡Šæ”¾æŒ‡å®šçš„å†…å­˜åŒºåŸŸã€‚å¯¹äºä¸å†ä½¿ç”¨çš„åƒåœ¾å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶ç³»ç»Ÿä¼šåœ¨åå°é»˜é»˜å·¥ä½œï¼Œé»˜é»˜æŸ¥æ‰¾ã€æ ‡è¯†å¹¶é‡Šæ”¾åƒåœ¾å¯¹è±¡ï¼Œå®ŒæˆåŒ…æ‹¬ java å †ã€æ–¹æ³•åŒºå’Œç›´æ¥å†…å­˜ä¸­çš„å…¨è‡ªåŠ¨åŒ–ç®¡ç†ã€‚</li>
<li><strong>Java æ ˆï¼š</strong>æ¯ä¸€ä¸ª java è™šæ‹Ÿæœºçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„ java æ ˆï¼Œä¸€ä¸ªçº¿ç¨‹çš„ java æ ˆåœ¨çº¿ç¨‹åˆ›å»ºçš„æ—¶å€™è¢«åˆ›å»ºï¼Œjava æ ˆä¸­ä¿å­˜ç€å¸§ä¿¡æ¯ï¼Œjava æ ˆä¸­ä¿å­˜ç€å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ï¼ŒåŒæ—¶å’Œ java æ–¹æ³•çš„è°ƒç”¨ã€è¿”å›å¯†åˆ‡ç›¸å…³ã€‚</li>
<li><strong>æœ¬åœ°æ–¹æ³•æ ˆï¼š</strong>æœ¬åœ°æ–¹æ³•æ ˆå’Œ java æ ˆéå¸¸ç±»ä¼¼ï¼Œæœ€å¤§çš„ä¸åŒåœ¨äº java æ ˆç”¨äºæ–¹æ³•çš„è°ƒç”¨ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ç”¨äºæœ¬åœ°æ–¹æ³•çš„è°ƒç”¨ï¼Œä½œä¸ºå¯¹ java è™šæ‹Ÿæœºçš„é‡è¦æ‰©å±•ï¼Œjava è™šæ‹Ÿæœºå…è®¸ java ç›´æ¥è°ƒç”¨æœ¬åœ°æ–¹æ³•ï¼ˆé€šå¸¸ä½¿ç”¨ C ç¼–å†™ï¼‰ã€‚</li>
<li><strong>PC å¯„å­˜å™¨ï¼š</strong>PCï¼ˆProgram Counterï¼‰å¯„å­˜å™¨ä¹Ÿæ˜¯æ¯ä¸€ä¸ªçº¿ç¨‹ç§æœ‰çš„ç©ºé—´ï¼Œjava è™šæ‹Ÿæœºä¼šä¸ºæ¯ä¸€ä¸ª javaçº¿ç¨‹åˆ›å»º PC å¯„å­˜å™¨ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼Œä¸€ä¸ª java çº¿ç¨‹æ€»æ˜¯åœ¨æ‰§è¡Œä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ­£åœ¨è¢«æ‰§è¡Œçš„æ–¹æ³•ç§°ä¸ºå½“å‰æ–¹æ³•ã€‚å¦‚æœå½“å‰æ–¹æ³•ä¸æ˜¯æœ¬åœ°æ–¹æ³•ï¼ŒPC å¯„å­˜å™¨å°±ä¼šæŒ‡å‘å½“å‰æ­£åœ¨è¢«æ‰§è¡Œçš„æŒ‡ä»¤ã€‚å¦‚æœå½“å‰æ–¹æ³•æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œé‚£ä¹ˆ PC å¯„å­˜å™¨çš„å€¼å°±æ˜¯ undefinedã€‚</li>
<li><strong>Java HotSpot Client æ¨¡å¼å’Œ Server æ¨¡å¼çš„åŒºåˆ«ï¼š</strong>å½“è™šæ‹Ÿæœºè¿è¡Œåœ¨-client æ¨¡å¼çš„æ—¶å€™,ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªä»£å·ä¸º C1 çš„è½»é‡çº§ç¼–è¯‘å™¨, è€Œ-serveræ¨¡å¼å¯åŠ¨çš„è™šæ‹Ÿæœºé‡‡ç”¨ç›¸å¯¹é‡é‡çº§,ä»£å·ä¸º C2 çš„ç¼–è¯‘å™¨. C2 æ¯” C1 ç¼–è¯‘å™¨ç¼–è¯‘çš„ç›¸å¯¹å½»åº•,æœåŠ¡èµ·æ¥ä¹‹å,æ€§èƒ½æ›´é«˜ã€‚<ul>
<li>JDK å®‰è£…ç›®å½•/jre/lib/ï¼ˆx86ã€i386ã€amd32ã€amd64ï¼‰/jvm.cfgæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œ-server å’Œ-client å“ªä¸€ä¸ªé…ç½®åœ¨ä¸Šï¼Œæ‰§è¡Œå¼•æ“å°±æ˜¯å“ªä¸€ä¸ªã€‚å¦‚æœæ˜¯ JDK1.5ç‰ˆæœ¬ä¸”æ˜¯ 64 ä½ç³»ç»Ÿåº”ç”¨æ—¶ï¼Œ-client æ— æ•ˆã€‚</li>
<li>â€“64 ä½ç³»ç»Ÿå†…å®¹<br>-server KNOWN<br>-client IGNORE</li>
<li>â€“32 ä½ç³»ç»Ÿå†…å®¹<br>-server KNOWN<br>-client KNOWN</li>
<li>æ³¨æ„ ï¼šåœ¨éƒ¨åˆ† JDK1.6 ç‰ˆæœ¬å’Œåç»­çš„ JDK ç‰ˆæœ¬ (64 ä½ç³»ç»Ÿ ) ä¸­ï¼Œ -client å‚æ•°å·²ç»ä¸èµ·ä½œç”¨<br>äº†ï¼Œ Server æ¨¡å¼æˆä¸ºå”¯ä¸€ã€‚</li>
</ul>
</li>
</ul>
<h3 id="åŒ–ç¥ä¸­æœŸï¼ˆå †ç»“æ„åŠå¯¹è±¡åˆ†ä»£ï¼‰"><a href="#åŒ–ç¥ä¸­æœŸï¼ˆå †ç»“æ„åŠå¯¹è±¡åˆ†ä»£ï¼‰" class="headerlink" title="åŒ–ç¥ä¸­æœŸï¼ˆå †ç»“æ„åŠå¯¹è±¡åˆ†ä»£ï¼‰"></a>åŒ–ç¥ä¸­æœŸï¼ˆå †ç»“æ„åŠå¯¹è±¡åˆ†ä»£ï¼‰</h3><ul>
<li><strong>ä»€ä¹ˆæ˜¯åˆ†ä»£ï¼Œåˆ†ä»£çš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li>
</ul>
<blockquote>
<p>â€‹        Java è™šæ‹Ÿæœºæ ¹æ®å¯¹è±¡å­˜æ´»çš„å‘¨æœŸä¸åŒï¼ŒæŠŠå †å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ï¼Œä¸€èˆ¬åˆ†ä¸ºæ–°ç”Ÿä»£ã€è€å¹´ä»£å’Œæ°¸ä¹…ä»£ï¼ˆå¯¹ HotSpot è™šæ‹Ÿæœºè€Œè¨€ï¼‰ï¼Œè¿™å°±æ˜¯ JVM çš„å†…å­˜åˆ†ä»£ç­–ç•¥ã€‚<br>â€‹        å †å†…å­˜æ˜¯è™šæ‹Ÿæœºç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼Œä¹Ÿæ˜¯åƒåœ¾å›æ”¶æœ€é¢‘ç¹çš„ä¸€å—åŒºåŸŸï¼Œæˆ‘ä»¬ç¨‹åºæ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½å­˜æ”¾åœ¨å †å†…å­˜ä¸­ã€‚ç»™å †å†…å­˜åˆ†ä»£æ˜¯ä¸ºäº†æé«˜å¯¹è±¡å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶çš„æ•ˆç‡ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå †å†…å­˜æ²¡æœ‰åŒºåŸŸåˆ’åˆ†ï¼Œæ‰€æœ‰çš„æ–°åˆ›å»ºçš„å¯¹è±¡å’Œç”Ÿå‘½å‘¨æœŸå¾ˆé•¿çš„å¯¹è±¡æ”¾åœ¨ä¸€èµ·ï¼Œéšç€ç¨‹åºçš„æ‰§è¡Œï¼Œå †å†…å­˜éœ€è¦é¢‘ç¹è¿›è¡Œåƒåœ¾æ”¶é›†ï¼Œè€Œæ¯æ¬¡å›æ”¶éƒ½è¦éå†æ‰€æœ‰çš„å¯¹è±¡ï¼Œéå†è¿™äº›å¯¹è±¡æ‰€èŠ±è´¹çš„æ—¶é—´ä»£ä»·æ˜¯å·¨å¤§çš„ï¼Œä¼šä¸¥é‡å½±å“æˆ‘ä»¬çš„ GC æ•ˆç‡ï¼Œå¹¶ä¸”ä¼šäº§ç”Ÿç¢ç‰‡ã€‚<br>â€‹        æœ‰äº†å†…å­˜åˆ†ä»£ï¼Œæƒ…å†µå°±ä¸åŒäº†ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡ä¼šåœ¨æ–°ç”Ÿä»£ä¸­åˆ†é…å†…å­˜ï¼Œç»è¿‡å¤šæ¬¡å›æ”¶ä»ç„¶å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡å­˜æ”¾åœ¨è€å¹´ä»£ä¸­ï¼Œé™æ€å±æ€§ã€ç±»ä¿¡æ¯ç­‰å­˜æ”¾åœ¨æ°¸ä¹…ä»£ä¸­ï¼Œæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡å­˜æ´»æ—¶é—´çŸ­ï¼Œåªéœ€è¦åœ¨æ–°ç”Ÿä»£åŒºåŸŸä¸­é¢‘ç¹è¿›è¡Œ GCï¼Œè€å¹´ä»£ä¸­å¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿ï¼Œå†…å­˜å›æ”¶çš„é¢‘ç‡ç›¸å¯¹è¾ƒä½ï¼Œä¸éœ€è¦é¢‘ç¹è¿›è¡Œå›æ”¶ï¼Œæ°¸ä¹…ä»£ä¸­å›æ”¶æ•ˆæœå¤ªå·®ï¼Œä¸€èˆ¬ä¸è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè¿˜å¯ä»¥æ ¹æ®ä¸åŒå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨åˆé€‚çš„åƒåœ¾æ”¶é›†ç®—æ³•ã€‚åˆ†ä»£æ”¶é›†å¤§å¤§æå‡äº†æ”¶é›†æ•ˆç‡ï¼Œè¿™äº›éƒ½æ˜¯å†…å­˜åˆ†ä»£å¸¦æ¥çš„å¥½å¤„ã€‚</p>
</blockquote>
<ul>
<li><strong>åˆ†ä»£çš„åˆ’åˆ†Java</strong> </li>
</ul>
<blockquote>
<p>â€‹        è™šæ‹Ÿæœºå°†å †å†…å­˜åˆ’åˆ†ä¸º æ–°ç”Ÿä»£ã€è€å¹´ä»£å’Œæ°¸ä¹…ä»£ ï¼Œæ°¸ä¹…ä»£æ˜¯ HotSpot è™šæ‹Ÿæœºç‰¹æœ‰çš„æ¦‚å¿µï¼ˆJDK1.8 ä¹‹åä¸º metaspace æ›¿ä»£æ°¸ä¹…ä»£ï¼‰ï¼Œå®ƒé‡‡ç”¨æ°¸ä¹…ä»£çš„æ–¹å¼æ¥å®ç°æ–¹æ³•åŒºï¼Œå…¶ä»–çš„è™šæ‹Ÿæœºå®ç°æ²¡æœ‰è¿™ä¸€æ¦‚å¿µï¼Œè€Œä¸” HotSpot ä¹Ÿæœ‰å–æ¶ˆæ°¸ä¹…ä»£çš„è¶‹åŠ¿ï¼Œåœ¨ JDK 1.7 ä¸­ HotSpot å·²ç»å¼€å§‹äº†â€œå»æ°¸ä¹…åŒ–â€ï¼ŒæŠŠåŸæœ¬æ”¾åœ¨æ°¸ä¹…ä»£çš„å­—ç¬¦ä¸²å¸¸é‡æ± ç§»å‡ºã€‚æ°¸ä¹…ä¸»è¦å­˜æ”¾å¸¸é‡ã€ç±»ä¿¡æ¯ã€é™æ€å˜é‡ç­‰æ•°æ®ï¼Œä¸åƒåœ¾å›æ”¶å…³ç³»ä¸å¤§ï¼Œæ–°ç”Ÿä»£å’Œè€å¹´ä»£æ˜¯åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸã€‚</p>
</blockquote>
<p><img src="\media\å †å†…å­˜ç®€å›¾.jpg" alt="å †å†…å­˜ç®€å›¾"></p>
<ul>
<li><strong>æ–°ç”Ÿä»£ï¼ˆYoung Generation)</strong></li>
</ul>
<blockquote>
<p>â€‹        æ–°ç”Ÿæˆçš„å¯¹è±¡ä¼˜å…ˆå­˜æ”¾åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œæ–°ç”Ÿä»£å¯¹è±¡æœç”Ÿå¤•æ­»ï¼Œå­˜æ´»ç‡å¾ˆä½ï¼Œåœ¨æ–°ç”Ÿä»£Edenä¸­ï¼Œå¸¸è§„åº”ç”¨è¿›è¡Œä¸€æ¬¡åƒåœ¾æ”¶é›†ä¸€èˆ¬å¯ä»¥å›æ”¶ 70% ~ 95% çš„ç©ºé—´ï¼Œå›æ”¶æ•ˆç‡å¾ˆé«˜ã€‚<br>â€‹        HotSpot å°†æ–°ç”Ÿä»£åˆ’åˆ†ä¸ºä¸‰å—ï¼Œä¸€å—è¾ƒå¤§çš„ Edenï¼ˆä¼Šç”¸ï¼‰ç©ºé—´å’Œä¸¤å—è¾ƒå°çš„ Survivorï¼ˆå¹¸å­˜è€…ï¼‰ç©ºé—´ï¼Œé»˜è®¤æ¯”ä¾‹ä¸º 8ï¼š1ï¼š1ã€‚åˆ’åˆ†çš„ç›®çš„æ˜¯å› ä¸º HotSpot é‡‡ç”¨å¤åˆ¶ç®—æ³•æ¥å›æ”¶æ–°ç”Ÿä»£ï¼Œè®¾ç½®è¿™ä¸ªæ¯”ä¾‹æ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨å†…å­˜ç©ºé—´ï¼Œå‡å°‘æµªè´¹ã€‚æ–°ç”Ÿæˆçš„å¯¹è±¡åœ¨ Eden åŒºåˆ†é…ï¼ˆå¤§å¯¹è±¡é™¤å¤–ï¼Œå¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼‰ï¼Œå½“ Eden åŒºæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºå°†å‘èµ·ä¸€æ¬¡Minor GCã€‚<br>â€‹        GC å¼€å§‹æ—¶ï¼Œå¯¹è±¡åªä¼šå­˜åœ¨äº Eden åŒºå’Œ From Survivor åŒºï¼ŒTo Survivor åŒºæ˜¯ç©ºçš„ï¼ˆä½œä¸ºä¿ç•™åŒºåŸŸï¼‰ã€‚GC è¿›è¡Œæ—¶ï¼ŒEden åŒºä¸­æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½ä¼šè¢«å¤åˆ¶åˆ° To Survivor åŒºï¼Œè€Œåœ¨ FromSurvivor åŒºä¸­ï¼Œä»å­˜æ´»çš„å¯¹è±¡ä¼šæ ¹æ®å®ƒä»¬çš„å¹´é¾„å€¼å†³å®šå»å‘ï¼Œå¹´é¾„å€¼è¾¾åˆ°å¹´é¾„é˜€å€¼ï¼ˆé»˜è®¤ä¸º15ï¼Œæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡æ¯ç†¬è¿‡ä¸€è½®åƒåœ¾å›æ”¶ï¼Œå¹´é¾„å€¼å°±åŠ  1ï¼ŒGC åˆ†ä»£å¹´é¾„å­˜å‚¨åœ¨å¯¹è±¡çš„ headerä¸­ï¼‰çš„å¯¹è±¡ä¼šè¢«ç§»åˆ°è€å¹´ä»£ä¸­ï¼Œæ²¡æœ‰è¾¾åˆ°é˜€å€¼çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ° To Survivor åŒºã€‚æ¥ç€æ¸…ç©ºEden åŒºå’Œ From Survivor åŒºï¼Œæ–°ç”Ÿä»£ä¸­å­˜æ´»çš„å¯¹è±¡éƒ½åœ¨ To Survivor åŒºã€‚æ¥ç€ï¼Œ From SurvivoråŒºå’Œ To Survivor åŒºä¼šäº¤æ¢å®ƒä»¬çš„è§’è‰²ï¼ˆå¤åˆ¶ç®—æ³•å‡å°‘ç¢ç‰‡ï¼‰ï¼Œä¹Ÿå°±æ˜¯æ–°çš„ To Survivor åŒºå°±æ˜¯ä¸Šæ¬¡ GC æ¸…ç©ºçš„ FromSurvivor åŒºï¼Œæ–°çš„ From Survivor åŒºå°±æ˜¯ä¸Šæ¬¡ GC çš„ To Survivor åŒºï¼Œæ€»ä¹‹ï¼Œä¸ç®¡æ€æ ·éƒ½ä¼šä¿è¯To Survivor åŒºåœ¨ä¸€è½® GC åæ˜¯ç©ºçš„ã€‚GC æ—¶å½“ To Survivor åŒºæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ”¾ä¸Šä¸€æ¬¡æ–°ç”Ÿä»£æ”¶é›†ä¸‹æ¥çš„å­˜æ´»å¯¹è±¡æ—¶ï¼Œéœ€è¦ä¾èµ–è€å¹´ä»£è¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œå°†è¿™äº›å¯¹è±¡å­˜æ”¾åœ¨è€å¹´ä»£ä¸­ã€‚</p>
</blockquote>
<ul>
<li><strong>è€å¹´ä»£ï¼ˆOld Generationn ï¼‰</strong></li>
</ul>
<blockquote>
<p>â€‹        åœ¨æ–°ç”Ÿä»£ä¸­ç»å†äº†å¤šæ¬¡ï¼ˆå…·ä½“çœ‹è™šæ‹Ÿæœºé…ç½®çš„é˜€å€¼ï¼‰GC åä»ç„¶å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ä¼šè¿›å…¥è€å¹´ä»£ä¸­ã€‚è€å¹´ä»£ä¸­çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿ï¼Œå­˜æ´»ç‡æ¯”è¾ƒé«˜ï¼Œåœ¨è€å¹´ä»£ä¸­è¿›è¡Œ GC çš„é¢‘ç‡ç›¸å¯¹è€Œè¨€è¾ƒä½ï¼Œè€Œä¸”å›æ”¶çš„é€Ÿåº¦ä¹Ÿæ¯”è¾ƒæ…¢ã€‚</p>
</blockquote>
<ul>
<li><strong>æ°¸ä¹…ä»£ï¼ˆPermanent Generationnï¼‰</strong></li>
</ul>
<blockquote>
<p>â€‹        æ°¸ä¹…ä»£å­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ï¼Œå¯¹è¿™ä¸€åŒºåŸŸè€Œè¨€ï¼ŒJava è™šæ‹Ÿæœºè§„èŒƒæŒ‡å‡ºå¯ä»¥ä¸è¿›è¡Œåƒåœ¾æ”¶é›†ï¼Œä¸€èˆ¬è€Œè¨€ä¸ä¼šè¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p>
</blockquote>
<h3 id="åŒ–ç¥åæœŸï¼ˆåƒåœ¾å›æ”¶ç®—æ³•åŠåˆ†ä»£åƒåœ¾ï¼‰"><a href="#åŒ–ç¥åæœŸï¼ˆåƒåœ¾å›æ”¶ç®—æ³•åŠåˆ†ä»£åƒåœ¾ï¼‰" class="headerlink" title="åŒ–ç¥åæœŸï¼ˆåƒåœ¾å›æ”¶ç®—æ³•åŠåˆ†ä»£åƒåœ¾ï¼‰"></a>åŒ–ç¥åæœŸï¼ˆåƒåœ¾å›æ”¶ç®—æ³•åŠåˆ†ä»£åƒåœ¾ï¼‰</h3><p> <strong>å¸¸è§ åƒåœ¾å›æ”¶ç®—æ³•</strong></p>
<ul>
<li>å¼•ç”¨è®¡æ•° ï¼ˆReference Counting ï¼‰ï¼šæ¯”è¾ƒå¤è€çš„å›æ”¶ç®—æ³•ã€‚åŸç†æ˜¯æ­¤å¯¹è±¡æœ‰ä¸€ä¸ªå¼•ç”¨ï¼Œå³å¢åŠ ä¸€ä¸ªè®¡æ•°ï¼Œåˆ é™¤ä¸€ä¸ªå¼•ç”¨åˆ™å‡å°‘ä¸€ä¸ªè®¡æ•°ã€‚åƒåœ¾å›æ”¶æ—¶ï¼Œåªç”¨æ”¶é›†è®¡æ•°ä¸º 0 çš„å¯¹è±¡ã€‚æ­¤ç®—æ³•æœ€è‡´å‘½çš„æ˜¯æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</li>
<li>å¤åˆ¶ï¼ˆCopyingï¼‰ï¼šæ­¤ç®—æ³•æŠŠå†…å­˜ç©ºé—´åˆ’ä¸ºä¸¤ä¸ªç›¸ç­‰çš„åŒºåŸŸï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªåŒºåŸŸã€‚åƒåœ¾å›æ”¶æ—¶ï¼Œéå†å½“å‰ä½¿ç”¨åŒºåŸŸï¼ŒæŠŠæ­£åœ¨ä½¿ç”¨ä¸­çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªåŒºåŸŸä¸­ã€‚æ­¤ç®—æ³•æ¯æ¬¡åªå¤„ç†æ­£åœ¨ä½¿ç”¨ä¸­çš„å¯¹è±¡ï¼Œå› æ­¤å¤åˆ¶æˆæœ¬æ¯”è¾ƒå°ï¼ŒåŒæ—¶å¤åˆ¶è¿‡å»ä»¥åè¿˜èƒ½è¿›è¡Œç›¸åº”çš„å†…å­˜æ•´ç†ï¼Œä¸ä¼šå‡ºç°â€œç¢ç‰‡â€é—®é¢˜ã€‚å½“ç„¶ï¼Œæ­¤ç®—æ³•çš„ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œå°±æ˜¯éœ€è¦ä¸¤å€å†…å­˜ç©ºé—´ã€‚ç®€å›¾å¦‚ä¸‹ï¼š</li>
</ul>
<p><img src="\media\å¤åˆ¶ç®—æ³•.jpg" alt="å¤åˆ¶ç®—æ³•"></p>
<ul>
<li>æ ‡è®°- æ¸…é™¤ï¼ˆMark-Sweep ï¼‰ï¼šæœ€å¤è€çš„ç®—æ³•ï¼Œæ­¤ç®—æ³•æ‰§è¡Œåˆ†ä¸¤é˜¶æ®µã€‚ç¬¬ä¸€é˜¶æ®µä»å¼•ç”¨æ ¹èŠ‚ç‚¹å¼€å§‹æ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œç¬¬äºŒé˜¶æ®µéå†æ•´ä¸ªå †ï¼ŒæŠŠæœªæ ‡è®°çš„å¯¹è±¡æ¸…é™¤ã€‚æ­¤ç®—æ³•éœ€è¦<strong>æš‚åœæ•´ä¸ªåº”ç”¨</strong>ï¼ŒåŒæ—¶ï¼Œä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚ç®€å›¾å¦‚ä¸‹ï¼š</li>
</ul>
<p><img src="\media\æ ‡è®°-æ¸…æ¥šç®—æ³•.jpg" alt="æ ‡è®°-æ¸…æ¥šç®—æ³•"></p>
<ul>
<li>æ ‡è®°- æ•´ç†ï¼ˆMark-Compact ï¼‰ï¼šæ­¤ç®—æ³•ç»“åˆäº†â€œæ ‡è®°-æ¸…é™¤â€å’Œâ€œå¤åˆ¶â€ä¸¤ä¸ªç®—æ³•çš„ä¼˜ç‚¹ã€‚ä¹Ÿæ˜¯åˆ†ä¸¤é˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µä»æ ¹èŠ‚ç‚¹å¼€å§‹æ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨å¯¹è±¡ï¼Œç¬¬äºŒé˜¶æ®µéå†æ•´ä¸ªå †ï¼ŒæŠŠæ¸…é™¤æœªæ ‡è®°å¯¹è±¡å¹¶ä¸”æŠŠå­˜æ´»å¯¹è±¡â€œå‹ç¼©â€åˆ°å †çš„å…¶ä¸­ä¸€å—ï¼ŒæŒ‰é¡ºåºæ’æ”¾ã€‚æ­¤ç®—æ³•é¿å…äº†â€œæ ‡è®°-æ¸…é™¤â€çš„ç¢ç‰‡é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†â€œå¤åˆ¶â€ç®—æ³•çš„ç©ºé—´é—®é¢˜ã€‚ç®€å›¾å¦‚ä¸‹ï¼š</li>
</ul>
<p><img src="\media\æ ‡è®°-æ•´ç†.jpg" alt="æ ‡è®°-æ•´ç†"></p>
<p><strong>åƒåœ¾æ”¶é›†å™¨çš„åˆ†ç±»</strong></p>
<ul>
<li><p>æ¬¡æ”¶é›†å™¨ï¼šScavenge GCï¼ŒæŒ‡å‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„ GCï¼Œå› ä¸ºæ–°ç”Ÿä»£çš„ Java å¯¹è±¡å¤§å¤šéƒ½æ˜¯æœç”Ÿå¤•æ­»ï¼Œæ‰€ä»¥<br>Scavenge GC éå¸¸é¢‘ç¹ï¼Œä¸€èˆ¬å›æ”¶é€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«ã€‚</p>
<ul>
<li>å½“ Eden ç©ºé—´ä¸è¶³ä»¥ä¸ºå¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼Œä¼šè§¦å‘ Scavenge GCã€‚</li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“æ–°å¯¹è±¡ç”Ÿæˆï¼Œå¹¶ä¸”åœ¨ Eden ç”³è¯·ç©ºé—´å¤±è´¥æ—¶ï¼Œå°±ä¼šè§¦å‘ Scavenge GCï¼Œå¯¹Eden åŒºåŸŸè¿›è¡Œ GCï¼Œæ¸…é™¤éå­˜æ´»å¯¹è±¡ï¼Œå¹¶ä¸”æŠŠå°šä¸”å­˜æ´»çš„å¯¹è±¡ç§»åŠ¨åˆ° Survivor åŒºã€‚ç„¶åæ•´ç†Survivor çš„ä¸¤ä¸ªåŒºã€‚è¿™ç§æ–¹å¼çš„ GC æ˜¯å¯¹å¹´è½»ä»£çš„ Eden åŒºè¿›è¡Œï¼Œä¸ä¼šå½±å“åˆ°å¹´è€ä»£ã€‚å› ä¸ºå¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ˜¯ä» Eden åŒºå¼€å§‹çš„ï¼ŒåŒæ—¶ Eden åŒºä¸ä¼šåˆ†é…çš„å¾ˆå¤§ï¼Œæ‰€ä»¥ Eden åŒºçš„ GC ä¼šé¢‘ç¹è¿›è¡Œã€‚å› è€Œï¼Œä¸€èˆ¬åœ¨è¿™é‡Œéœ€è¦ä½¿ç”¨é€Ÿåº¦å¿«ã€æ•ˆç‡é«˜çš„ç®—æ³•ï¼Œä½¿ Eden å»èƒ½å°½å¿«ç©ºé—²å‡ºæ¥ã€‚</li>
<li>å½“å¹´è½»ä»£å †ç©ºé—´ç´§å¼ æ—¶ä¼šè¢«è§¦å‘</li>
<li>ç›¸å¯¹äºå…¨æ”¶é›†è€Œè¨€ï¼Œæ”¶é›†é—´éš”è¾ƒçŸ­</li>
</ul>
</li>
<li><p>å…¨æ”¶é›†å™¨ï¼šFull GCï¼ŒæŒ‡å‘ç”Ÿåœ¨è€å¹´ä»£çš„ GCï¼Œå‡ºç°äº† Full GC ä¸€èˆ¬ä¼šä¼´éšç€è‡³å°‘ä¸€æ¬¡çš„ Minor GCï¼ˆè€å¹´ä»£çš„å¯¹è±¡å¤§éƒ¨åˆ†æ˜¯ Scavenge GC è¿‡ç¨‹ä¸­ä»æ–°ç”Ÿä»£è¿›å…¥è€å¹´ä»£ï¼‰ï¼Œæ¯”å¦‚ï¼šåˆ†é…æ‹…ä¿å¤±è´¥ã€‚FullGC çš„é€Ÿåº¦ä¸€èˆ¬ä¼šæ¯” Scavenge GC æ…¢ 10 å€ä»¥ä¸Šã€‚</p>
<ul>
<li>å½“è€å¹´ä»£å†…å­˜ä¸è¶³æˆ–è€…æ˜¾å¼è°ƒç”¨ System.gc()æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘ Full GCã€‚</li>
<li>å½“è€å¹´ä»£æˆ–è€…æŒä¹…ä»£å †ç©ºé—´æ»¡äº†ï¼Œä¼šè§¦å‘å…¨æ”¶é›†æ“ä½œã€‚</li>
<li>å¯ä»¥ä½¿ç”¨ System.gc()æ–¹æ³•æ¥æ˜¾å¼çš„å¯åŠ¨å…¨æ”¶é›†ï¼Œå…¨æ”¶é›†ä¸€èˆ¬æ ¹æ®å †å¤§å°çš„ä¸åŒï¼Œéœ€è¦çš„æ—¶é—´ä¸å°½ç›¸åŒï¼Œä½†ä¸€èˆ¬ä¼šæ¯”è¾ƒé•¿ã€‚</li>
</ul>
</li>
<li><p>åƒåœ¾å›æ”¶å™¨çš„å¸¸è§„ç»„åˆä½¿ç”¨ï¼š</p>
<ul>
<li>Serialã€ParNewã€Parallel Scabenageæ„æˆæ–°ç”Ÿä»£å›æ”¶å™¨ã€‚</li>
<li>Serial Oldã€Parallel Oldã€CMSæ˜¯è€å¹´ä»£å›æ”¶å™¨ã€‚</li>
<li>G1æ–°è€é€šç”¨</li>
</ul>
</li>
</ul>
<p><img src="\media\åƒåœ¾å›æ”¶çš„å¸¸è§åŒ¹é….jpg" alt="åƒåœ¾å›æ”¶çš„å¸¸è§åŒ¹é…"></p>
<p><strong>åˆ†ä»£åƒåœ¾æ”¶é›†å™¨</strong></p>
<ul>
<li>ä¸²è¡Œæ”¶é›†å™¨ï¼ˆSerial ï¼‰ï¼šJDK1.3ä¹‹å‰JVMå”¯ä¸€ä¸€ä¸ªæ¬¡æ”¶é›†å™¨ï¼ˆæ–°ç”Ÿä»£æ”¶é›†å™¨ï¼‰ï¼Œ1.5ç‰ˆæœ¬ä¹Ÿæ˜¯é»˜è®¤æ¬¡æ”¶é›†å™¨ï¼Œå®ƒæ˜¯ä¸²æ”¶é›†å™¨ã€‚<ul>
<li>Serial æ”¶é›†å™¨æ˜¯ Hotspot è¿è¡Œåœ¨ Client æ¨¡å¼ä¸‹çš„é»˜è®¤æ–°ç”Ÿä»£æ”¶é›†å™¨ã€‚</li>
<li>å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šåªç”¨ä¸€ä¸ª CPUï¼ˆè®¡ç®—æ ¸å¿ƒï¼‰/ä¸€æ¡çº¿ç¨‹å»å®Œæˆ GC å·¥ä½œ, ä¸”åœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶å¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹(â€œStop The Worldâ€ -åé¢ç®€ç§° STW)ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨-XX:+UseSerialGC æ‰“å¼€ã€‚è™½ç„¶æ˜¯å•çº¿ç¨‹æ”¶é›†, ä½†å®ƒå´ç®€å•è€Œé«˜æ•ˆ, åœ¨ VM ç®¡ç†å†…å­˜ä¸å¤§çš„æƒ…å†µä¸‹(æ”¶é›†å‡ å M~ä¸€ä¸¤ç™¾ M çš„æ–°ç”Ÿä»£), åœé¡¿æ—¶é—´å®Œå…¨å¯ä»¥æ§åˆ¶åœ¨å‡ åæ¯«ç§’~ä¸€ç™¾å¤šæ¯«ç§’å†…ã€‚</li>
<li>å¤§å¤šæ•°æ”¶é›†å™¨éƒ½æ˜¯åœ¨ä¸²è¡Œæ”¶é›†å™¨è¿›è¡Œä¼˜åŒ–ï¼Œå‡å°‘ä»–åœé¡¿çš„æ—¶é—´ã€‚</li>
</ul>
</li>
</ul>
<p><img src="\media\ä¸²è¡Œæ”¶é›†å™¨.jpg" alt=""></p>
<ul>
<li><p>å¹¶è¡Œæ”¶é›†å™¨ï¼ˆParNew ï¼‰ï¼šParNew æ”¶é›†å™¨å…¶å®æ˜¯å‰é¢ Serial çš„å¤šçº¿ç¨‹ç‰ˆæœ¬,è€ƒè™‘ç”¨æˆ·ç­‰å¾…çš„æ—¶é—´ï¼Œ é™¤ä½¿ç”¨å¤šæ¡çº¿ç¨‹è¿›è¡Œ GCå¤–, åŒ…æ‹¬ Serialå¯ç”¨çš„æ‰€æœ‰æ§åˆ¶å‚æ•°ã€æ”¶é›†ç®—æ³•ã€STWã€å¯¹è±¡åˆ†é…è§„åˆ™ã€å›æ”¶ç­–ç•¥ç­‰éƒ½ä¸ Serial å®Œå…¨ä¸€æ ·(ä¹Ÿæ˜¯VMå¯ç”¨ CMS æ”¶é›†å™¨-XX: +UseConcMarkSweepGC çš„é»˜è®¤æ–°ç”Ÿä»£æ”¶é›†å™¨)ã€‚</p>
<p>ç”±äºå­˜åœ¨çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€, ParNew åœ¨å• CPU çš„ç¯å¢ƒä¸­æ¯”ä¸ä¸Š Serial, ä¸”åœ¨é€šè¿‡è¶…çº¿ç¨‹æŠ€æœ¯å®ç°çš„ä¸¤ä¸ª CPU çš„ç¯å¢ƒä¸­ä¹Ÿä¸èƒ½ 100%ä¿è¯èƒ½è¶…è¶Š Serial. ä½†éšç€å¯ç”¨çš„ CPU æ•°é‡çš„å¢åŠ ,æ”¶é›†æ•ˆç‡è‚¯å®šä¹Ÿä¼šå¤§å¤§å¢åŠ (ParNew æ”¶é›†çº¿ç¨‹æ•°ä¸ CPU çš„æ•°é‡ç›¸åŒ, å› æ­¤åœ¨ CPU æ•°é‡è¿‡å¤§çš„ç¯å¢ƒä¸­, å¯ç”¨-XX:ParallelGCThreads=<n>å‚æ•°æ§åˆ¶ GC çº¿ç¨‹æ•°ï¼Œä¸€èˆ¬ä¸CPUçš„çº¿ç¨‹æ•°ç›¸åŒ)ã€‚</n></p>
</li>
</ul>
<p><img src="\media\å¹¶è¡Œæ”¶é›†å™¨.jpg" alt=""></p>
<ul>
<li><p>Parallel Scavenge æ”¶é›†å™¨ï¼šä¸ ParNew ç±»ä¼¼, Parallel Scavenge ä¹Ÿæ˜¯ä½¿ç”¨å¤åˆ¶ç®—æ³•, ä¹Ÿæ˜¯å¹¶è¡Œå¤šçº¿ç¨‹æ”¶é›†å™¨. ä½†ä¸å…¶ä»–æ”¶é›†å™¨å…³æ³¨å°½å¯èƒ½ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶é—´ä¸åŒ, Parallel Scavenge æ›´å…³æ³¨ç³»ç»Ÿååé‡:</p>
<ul>
<li><p>ç³»ç»Ÿååé‡=è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+åƒåœ¾æ”¶é›†æ—¶é—´)</p>
</li>
<li><p>åœé¡¿æ—¶é—´è¶ŠçŸ­å°±è¶Šé€‚ç”¨äºç”¨æˆ·äº¤äº’çš„ç¨‹åº-è‰¯å¥½çš„å“åº”é€Ÿåº¦èƒ½æå‡ç”¨æˆ·çš„ä½“éªŒ;</p>
</li>
<li><p>è€Œé«˜ååé‡åˆ™é€‚ç”¨äºåå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„ä»»åŠ¡-å¯ä»¥æœ€é«˜æ•ˆç‡åœ°åˆ©ç”¨CPUæ—¶é—´,å°½å¿«åœ°å®Œæˆç¨‹åºçš„è¿ç®—ä»»åŠ¡. </p>
</li>
<li><p>Parallel Scavenge æä¾›äº†å¦‚ä¸‹å‚æ•°è®¾ç½®ç³»ç»Ÿååé‡:</p>
<p><img src="\media\Parallel Scavenge å‚æ•°.jpg" alt=""></p>
</li>
</ul>
</li>
<li><p>Serial Old æ”¶é›†å™¨ï¼šSerial Old æ˜¯ Serial æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬, åŒæ ·æ˜¯å•çº¿ç¨‹æ”¶é›†å™¨,ä½¿ç”¨â€œæ ‡è®°-æ•´ç†â€ç®—æ³•</p>
</li>
</ul>
<p><img src="\media\Serial Oldæ”¶é›†å™¨.jpg" alt=""></p>
<ul>
<li>Parallel Old æ”¶é›†å™¨ï¼šParallel Old æ˜¯ Parallel Scavenge æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬, ä½¿ç”¨å¤šçº¿ç¨‹å’Œâ€œæ ‡è®°ï¼æ•´ç†â€ç®—<br>æ³•, ååé‡ä¼˜å…ˆ, ä¸»è¦ä¸ Parallel Scavenge é…åˆåœ¨æ³¨é‡ååé‡åŠ CPU èµ„æºæ•æ„Ÿç³»ç»Ÿå†…ä½¿ç”¨ï¼›</li>
</ul>
<p><img src="\media\Parallel Old æ”¶é›†å™¨.jpg" alt=""></p>
<ul>
<li><p>CMS æ”¶é›†å™¨ ï¼ˆConcurrent Mark Sweep ï¼‰ï¼šCMS(Concurrent Mark Sweep)æ”¶é›†å™¨æ˜¯ä¸€æ¬¾å…·æœ‰åˆ’æ—¶ä»£æ„ä¹‰çš„æ”¶é›†å™¨, ä¸€æ¬¾çœŸæ­£æ„ä¹‰ä¸Šçš„å¹¶å‘æ”¶é›†å™¨, è™½ç„¶ç°åœ¨å·²ç»æœ‰äº†ç†è®ºæ„ä¹‰ä¸Šè¡¨ç°æ›´å¥½çš„ G1 æ”¶é›†å™¨, ä½†ç°åœ¨ä¸»æµäº’è”ç½‘ä¼ä¸šçº¿ä¸Šé€‰ç”¨çš„ä»æ˜¯ CMS(å¦‚ Taobaoã€å¾®åº—)ã€‚</p>
<ul>
<li>å¹¶å‘ï¼ˆconcurrentï¼‰åŒ…å«ç”¨æˆ·çº¿ç¨‹ï¼Œå¹¶è¡Œï¼ˆParallelï¼‰ä¸åŒ…å«ã€‚</li>
<li>CMSæ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨(CMSåˆç§°å¤šå¹¶å‘ä½æš‚åœçš„æ”¶é›†å™¨)ï¼ŒåŸºäºâ€æ ‡è®°-æ¸…é™¤â€ç®—æ³•å®ç°ï¼Œ æ•´ä¸ª GC è¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹ 4 ä¸ªæ­¥éª¤:<ul>
<li>åˆå§‹æ ‡è®°(CMS initial mark)</li>
<li>å¹¶å‘æ ‡è®°(CMS concurrent mark: GC Roots Tracing è¿‡ç¨‹)</li>
<li>é‡æ–°æ ‡è®°(CMS remark)</li>
<li>å¹¶å‘æ¸…é™¤(CMS concurrent sweep: å·²æ­»å¯¹è±¡å°†ä¼šå°±åœ°é‡Šæ”¾, æ³¨æ„:æ­¤å¤„æ²¡æœ‰å‹ç¼©)</li>
</ul>
</li>
<li>å…¶ä¸­ 1ï¼Œ3 ä¸¤ä¸ªæ­¥éª¤(åˆå§‹æ ‡è®°ã€é‡æ–°æ ‡è®°)ä»éœ€ STW. ä½†åˆå§‹æ ‡è®°ä»…åªæ ‡è®°ä¸€ä¸‹ GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡, é€Ÿåº¦å¾ˆå¿«; è€Œé‡æ–°æ ‡è®°åˆ™æ˜¯ä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•, è™½ç„¶ä¸€èˆ¬æ¯”åˆå§‹æ ‡è®°é˜¶æ®µç¨é•¿, ä½†è¦è¿œå°äºå¹¶å‘æ ‡è®°æ—¶é—´ã€‚CMS ç‰¹ç‚¹ï¼š<ul>
<li>CMS é»˜è®¤å¯åŠ¨çš„å›æ”¶çº¿ç¨‹æ•°=(CPU æ•°ç›®+3)4ï¼Œå½“ CPU æ•°&gt;4 æ—¶, GCçº¿ç¨‹ä¸€èˆ¬å ç”¨ä¸è¶…è¿‡ 25%çš„ CPU èµ„æº, ä½†æ˜¯å½“ CPU æ•°&lt;=4 æ—¶, GCçº¿ç¨‹å¯èƒ½å°±ä¼šè¿‡å¤šçš„å ç”¨ç”¨æˆ· CPU èµ„æº, ä»è€Œå¯¼è‡´åº”ç”¨ç¨‹åºå˜æ…¢, æ€»ååé‡é™ä½ã€‚</li>
<li>æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾, å¯èƒ½å‡ºç° Promotion Failureã€Concurrent Mode Failure è€Œå¯¼è‡´å¦ä¸€<br>æ¬¡ Full GC çš„äº§ç”Ÿ: æµ®åŠ¨åƒåœ¾æ˜¯æŒ‡åœ¨ CMS å¹¶å‘æ¸…ç†é˜¶æ®µç”¨æˆ·çº¿ç¨‹è¿è¡Œè€Œäº§ç”Ÿçš„æ–°åƒåœ¾. ç”±äº<br>åœ¨ GC é˜¶æ®µç”¨æˆ·çº¿ç¨‹è¿˜éœ€è¿è¡Œ, å› æ­¤è¿˜éœ€è¦é¢„ç•™è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ç»™ç”¨æˆ·çº¿ç¨‹ä½¿ç”¨, å¯¼è‡´ CMS<br>ä¸ èƒ½ åƒ å…¶ ä»–æ”¶ é›† å™¨é‚£ æ · ç­‰åˆ° è€ å¹´ ä»£å‡  ä¹ å¡«æ»¡ äº† å†è¿› è¡Œ æ”¶ é›†. å› æ­¤ CMS æ ä¾› äº†<br>-XX:CMSInitiatingOccupancyFraction å‚ æ•° æ¥ è®¾ ç½® GC çš„ è§¦ å‘ ç™¾ åˆ† æ¯” ( ä»¥ åŠ<br>-XX:+UseCMSInitiatingOccupancyOnly æ¥å¯ç”¨è¯¥è§¦å‘ç™¾åˆ†æ¯”), å½“è€å¹´ä»£çš„ä½¿ç”¨ç©ºé—´è¶…è¿‡è¯¥æ¯”ä¾‹<br>å CMS å°±ä¼šè¢«è§¦å‘(JDK 1.6 ä¹‹åé»˜è®¤ 92%). ä½†å½“ CMS è¿è¡ŒæœŸé—´é¢„ç•™çš„å†…å­˜æ— æ³•æ»¡è¶³ç¨‹åºéœ€<br>è¦, å°±ä¼šå‡ºç°ä¸Šè¿° Promotion Failure ç­‰å¤±è´¥, è¿™æ—¶ VM å°†å¯åŠ¨åå¤‡é¢„æ¡ˆ: ä¸´æ—¶å¯ç”¨ Serial Old<br>æ”¶é›†å™¨æ¥é‡æ–°æ‰§è¡ŒFull GC(CMSé€šå¸¸é…åˆå¤§å†…å­˜ä½¿ç”¨, ä¸€æ—¦å¤§å†…å­˜è½¬å…¥ä¸²è¡Œçš„Serial GC, é‚£åœ<br>é¡¿çš„æ—¶é—´å°±æ˜¯å¤§å®¶éƒ½ä¸æ„¿çœ‹åˆ°çš„äº†).</li>
<li>æœ€å, ç”±äº CMS é‡‡ç”¨â€æ ‡è®°-æ¸…é™¤â€ç®—æ³•å®ç°, å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡. å†…å­˜ç¢ç‰‡è¿‡<br>å¤š å¯ èƒ½ ä¼š å¯¼ è‡´ æ—  æ³• åˆ† é… å¤§ å¯¹ è±¡ è€Œ æ å‰ è§¦ å‘ Full GC. å›  æ­¤ CMS æ ä¾› äº†<br>-XX:+UseCMSCompactAtFullCollection å¼€å…³å‚æ•°, ç”¨äºåœ¨ Full GC åå†æ‰§è¡Œä¸€ä¸ªç¢ç‰‡æ•´ç†è¿‡ç¨‹.<br>ä½†å†…å­˜æ•´ç†æ˜¯æ— æ³•å¹¶å‘çš„, å†…å­˜ç¢ç‰‡é—®é¢˜è™½ç„¶æ²¡æœ‰äº†, ä½†åœé¡¿æ—¶é—´ä¹Ÿå› æ­¤å˜é•¿äº†, å› æ­¤ CMS<br>è¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªå‚æ•°-XX:CMSFullGCsBeforeCompaction ç”¨äºè®¾ç½®åœ¨æ‰§è¡Œ N æ¬¡ä¸è¿›è¡Œå†…å­˜æ•´<br>ç†çš„ Full GC å, è·Ÿç€æ¥ä¸€æ¬¡å¸¦æ•´ç†çš„(é»˜è®¤ä¸º 0: æ¯æ¬¡è¿›å…¥ Full GC æ—¶éƒ½è¿›è¡Œç¢ç‰‡æ•´ç†).</li>
</ul>
</li>
</ul>
<p><img src="\media\CMSæ”¶é›†å™¨.jpg" alt=""></p>
</li>
<li><p>åˆ†åŒºæ”¶é›†- G1 æ”¶é›†å™¨ï¼šG1(Garbage-First)æ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„æ”¶é›†å™¨, ä¸»è¦ç›®æ ‡ç”¨äºé…å¤‡å¤šé¢— CPU çš„æœåŠ¡å™¨æ²»ç†å¤§å†…å­˜ï¼Œ-XX:+UseG1GC å¯ç”¨ G1 æ”¶é›†å™¨ã€‚</p>
<ul>
<li>ä¸å…¶ä»–åŸºäºåˆ†ä»£çš„æ”¶é›†å™¨ä¸åŒ, G1 å°†æ•´ä¸ª Java å †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸ(Region), è™½ç„¶è¿˜ä¿ç•™æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„æ¦‚å¿µ, ä½†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸å†æ˜¯ç‰©ç†éš”ç¦»çš„äº†,å®ƒä»¬éƒ½æ˜¯ä¸€éƒ¨åˆ† Region(ä¸éœ€è¦è¿ç»­)çš„é›†åˆ.å¦‚ï¼š</li>
</ul>
<p><img src="\media\G1.jpg" alt=""></p>
<ul>
<li><p>æ¯å—åŒºåŸŸæ—¢æœ‰å¯èƒ½å±äº O åŒºã€ä¹Ÿæœ‰å¯èƒ½æ˜¯ Y åŒºï¼Œå› æ­¤ä¸éœ€è¦ä¸€æ¬¡å°±å¯¹æ•´ä¸ªè€å¹´ä»£/æ–°ç”Ÿä»£å›æ”¶ã€‚è€Œæ˜¯å½“çº¿ç¨‹å¹¶å‘å¯»æ‰¾å¯å›æ”¶çš„å¯¹è±¡æ—¶ï¼Œæœ‰äº›åŒºå—åŒ…å«å¯å›æ”¶çš„å¯¹è±¡è¦æ¯”å…¶ä»–åŒºå—å¤šå¾ˆå¤šã€‚ è™½ç„¶åœ¨æ¸…ç†è¿™äº›åŒºå—æ—¶ G1 ä»ç„¶éœ€è¦æš‚åœåº”ç”¨çº¿ç¨‹,ï¼Œä½†å¯ä»¥ç”¨ç›¸å¯¹è¾ƒå°‘çš„æ—¶é—´ä¼˜å…ˆå›æ”¶åƒåœ¾è¾ƒå¤šçš„ Regionã€‚è¿™ç§æ–¹å¼ä¿è¯äº† G1 å¯ä»¥åœ¨æœ‰é™çš„æ—¶é—´å†…è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚</p>
</li>
<li><p>G1çš„æ–°ç”Ÿä»£æ”¶é›†è·ŸParNewç±»ä¼¼: å­˜æ´»çš„å¯¹è±¡è¢«è½¬ç§»åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªSurvivor Regions.ï¼Œå¦‚æœå­˜æ´»æ—¶é—´è¾¾åˆ°é˜€å€¼, è¿™éƒ¨åˆ†å¯¹è±¡å°±ä¼šè¢«æå‡åˆ°è€å¹´ä»£.å¦‚å›¾ï¼š</p>
<p><img src="\media\G11.jpg" alt=""></p>
</li>
<li><p>å…¶ç‰¹å®šæ˜¯ï¼š</p>
<ul>
<li>ä¸€æ•´å—å †å†…å­˜è¢«åˆ†ä¸ºå¤šä¸ª Regions.</li>
<li>å­˜æ´»å¯¹è±¡è¢«æ‹·è´åˆ°æ–°çš„ Survivor åŒºæˆ–è€å¹´ä»£.</li>
<li>å¹´è½»ä»£å†…å­˜ç”±ä¸€ç»„ä¸è¿ç»­çš„ heap åŒºç»„æˆ, è¿™ç§æ–¹æ³•ä½¿å¾—å¯ä»¥åŠ¨æ€è°ƒæ•´å„ä»£åŒºåŸŸå°ºå¯¸.</li>
<li>Young GC ä¼šæœ‰ STW äº‹ä»¶, è¿›è¡Œæ—¶æ‰€æœ‰åº”ç”¨ç¨‹åºçº¿ç¨‹éƒ½ä¼šè¢«æš‚åœ.</li>
<li>å¤šçº¿ç¨‹å¹¶å‘ GC.</li>
</ul>
</li>
<li><p>G1 è€å¹´ä»£ GC ç‰¹ç‚¹å¦‚ä¸‹ :</p>
<ul>
<li>å¹¶å‘æ ‡è®°é˜¶æ®µ<ol>
<li>åœ¨ä¸åº”ç”¨ç¨‹åºå¹¶å‘æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼šè®¡ç®—æ´»è·ƒåº¦ä¿¡æ¯ .</li>
<li>è¿™äº›æ´»è·ƒåº¦ä¿¡æ¯æ ‡è¯†å‡ºé‚£äº› regions æœ€é€‚åˆåœ¨ STW æœŸé—´å›æ”¶ (which regions will be best<br>to reclaim during an evacuation pause).</li>
<li>ä¸åƒ CMS æœ‰æ¸…ç†é˜¶æ®µ .</li>
</ol>
</li>
<li>å†æ¬¡æ ‡è®°é˜¶æ®µ<ol>
<li>ä½¿ç”¨ Snapshot-at-the-Beginning(SATB) ç®—æ³•æ¯” CMS å¿«å¾—å¤š .</li>
<li>ç©º region ç›´æ¥è¢«å›æ”¶ .</li>
</ol>
</li>
<li>æ‹·è´ / æ¸…ç†é˜¶æ®µ (Copying/Cleanup Phase)<ol>
<li>å¹´è½»ä»£ä¸è€å¹´ä»£åŒæ—¶å›æ”¶ .</li>
<li>è€å¹´ä»£å†…å­˜å›æ”¶ä¼šåŸºäºä»–çš„æ´»è·ƒåº¦ä¿¡æ¯</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="åŒ–ç¥åœ†æ»¡ï¼ˆJVMä¼˜åŒ–ï¼‰"><a href="#åŒ–ç¥åœ†æ»¡ï¼ˆJVMä¼˜åŒ–ï¼‰" class="headerlink" title="åŒ–ç¥åœ†æ»¡ï¼ˆJVMä¼˜åŒ–ï¼‰"></a>åŒ–ç¥åœ†æ»¡ï¼ˆJVMä¼˜åŒ–ï¼‰</h3><p><strong>JDK å¸¸ç”¨ JVM ä¼˜åŒ–ç›¸å…³å‘½ä»¤</strong></p>
<p><img src="\media\JVMç›¸å…³å‘½ä»¤.jpg" alt=""></p>
<ul>
<li><p>jps</p>
<ul>
<li>jps - lï¼šæ˜¾ç¤ºçº¿ç¨‹ id å’Œæ‰§è¡Œçº¿ç¨‹çš„ä¸»ç±»å</li>
<li>jps -vï¼šæ˜¾ç¤ºçº¿ç¨‹ id å’Œæ‰§è¡Œçº¿ç¨‹çš„ä¸»ç±»åå’Œ JVM é…ç½®ä¿¡æ¯</li>
</ul>
</li>
<li><p>jstat</p>
<ul>
<li>jstat -å‚æ•° çº¿ç¨‹ id æ‰§è¡Œæ—¶é—´ï¼ˆå•ä½æ¯«ç§’ï¼‰ æ‰§è¡Œæ¬¡æ•°</li>
<li>å¦‚ï¼šjstat -gc 4488 30 10<ul>
<li>SXC - survivor åˆå§‹ç©ºé—´å¤§å°ï¼Œå•ä½å­—èŠ‚ã€‚ï¼ˆXä¸ºsurvivorä¸­XåŒºåŸŸï¼‰</li>
<li>SXU - survivor ä½¿ç”¨ç©ºé—´å¤§å°ï¼Œ å•ä½å­—èŠ‚ã€‚</li>
<li>EC - eden åˆå§‹ç©ºé—´å¤§å°</li>
<li>EU - eden ä½¿ç”¨ç©ºé—´å¤§å°</li>
<li>OC - old åˆå§‹ç©ºé—´å¤§å°</li>
<li>OU - old ä½¿ç”¨ç©ºé—´å¤§å°</li>
<li>PC - permanent åˆå§‹ç©ºé—´å¤§å°</li>
<li>PU - permanent ä½¿ç”¨ç©ºé—´å¤§å°</li>
<li>YGC - youngGC æ”¶é›†æ¬¡æ•°</li>
<li>YGCT - youngGC æ”¶é›†ä½¿ç”¨æ—¶é•¿ï¼Œ å•ä½ç§’</li>
<li>FGC - fullGC æ”¶é›†æ¬¡æ•°</li>
<li>FGCT - fullGC æ”¶é›†ä½¿ç”¨æ—¶é•¿</li>
<li>GCT - æ€»è®¡æ”¶é›†ä½¿ç”¨æ€»æ—¶é•¿ YGCT+FGCT</li>
</ul>
</li>
</ul>
</li>
<li><p>jvisualvmï¼šä¸€ä¸ª JDK å†…ç½®çš„å›¾å½¢åŒ– VM ç›‘è§†ç®¡ç†å·¥å…·ã€‚ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨é‡Œé¢å®‰è£…visualgc æ’ä»¶ã€‚ï¼ˆå·¥å…·ã€æ’ä»¶ã€å¯ç”¨æ’ä»¶ï¼‰ï¼Œè®¾ç½®ç¼–è¾‘urlè¿æ¥åœ°å€ã€‚</p>
<p><strong>JVM å¸¸è§å‚æ•°</strong><br><em>é…ç½®æ–¹å¼ï¼šjava [options] MainClass [arguments]<br>options - JVM å¯åŠ¨å‚æ•°ã€‚ é…ç½®å¤šä¸ªå‚æ•°çš„æ—¶å€™ï¼Œå‚æ•°ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚<br>å‚æ•°å‘½åï¼š å¸¸è§ä¸º -å‚æ•°å<br>å‚æ•°èµ‹å€¼ï¼š å¸¸è§ä¸º -å‚æ•°å=å‚æ•°å€¼ | -å‚æ•°å:å‚æ•°å€¼</em></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;GarbageCollectorMXBean&gt; l = ManagementFactory.getGarbageCollectorMXBeans();  </span><br><span class="line">        <span class="keyword">for</span>(GarbageCollectorMXBean b : l) &#123;  </span><br><span class="line">            System.out.println(b.getName());  <span class="comment">// æ”¶é›†å™¨åç§°</span></span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.in.read();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å†…å­˜è®¾ç½®</p>
<ul>
<li>-Xms:åˆå§‹å †å¤§å°ï¼ŒJVM å¯åŠ¨çš„æ—¶å€™ï¼Œç»™å®šå †ç©ºé—´å¤§å°ã€‚</li>
<li>-Xmx:æœ€å¤§å †å¤§å°ï¼ŒJVM è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœåˆå§‹å †ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼Œæœ€å¤§å¯ä»¥æ‰©å±•åˆ°å¤šå°‘ã€‚</li>
<li>-Xmnï¼šè®¾ç½®å¹´è½»ä»£å¤§å°ã€‚æ•´ä¸ªå †å¤§å°=å¹´è½»ä»£å¤§å°+å¹´è€ä»£å¤§å°+æŒä¹…ä»£å¤§å°ã€‚æŒä¹…ä»£ä¸€èˆ¬å›ºå®šå¤§å°ä¸º 64mï¼Œæ‰€ä»¥å¢å¤§å¹´è½»ä»£åï¼Œå°†ä¼šå‡å°å¹´è€ä»£å¤§å°ã€‚æ­¤å€¼å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“è¾ƒå¤§ï¼ŒSun å®˜æ–¹æ¨èé…ç½®ä¸ºæ•´ä¸ªå †çš„ 3/8ã€‚</li>
<li>-Xssï¼š è®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„ Java æ ˆå¤§å°ã€‚JDK5.0 ä»¥åæ¯ä¸ªçº¿ç¨‹ Java æ ˆå¤§å°ä¸º 1Mï¼Œä»¥å‰æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º 256Kã€‚æ ¹æ®åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§å°è¿›è¡Œè°ƒæ•´ã€‚åœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹ï¼Œå‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ã€‚ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸èƒ½æ— é™ç”Ÿæˆï¼Œç»éªŒå€¼åœ¨ 3000~5000 å·¦å³ã€‚</li>
<li>-XX:NewSize=n:è®¾ç½®å¹´è½»ä»£å¤§å°</li>
<li>-XX:NewRatio=n:è®¾ç½®å¹´è½»ä»£å’Œå¹´è€ä»£çš„æ¯”å€¼ã€‚å¦‚:ä¸º 3ï¼Œè¡¨ç¤ºå¹´è½»ä»£ä¸å¹´è€ä»£æ¯”å€¼ä¸º 1ï¼š3ï¼Œå¹´è½»ä»£å æ•´ä¸ªå¹´è½»ä»£+å¹´è€ä»£å’Œçš„ 1/4</li>
<li>-XX:SurvivorRatio=n:å¹´è½»ä»£ä¸­ Eden åŒºä¸ä¸¤ä¸ª Survivor åŒºçš„æ¯”å€¼ã€‚æ³¨æ„ Survivor åŒºæœ‰ä¸¤ä¸ªã€‚å¦‚ï¼š3ï¼Œè¡¨ç¤º Edenï¼šSurvivor=3ï¼š2ï¼Œä¸€ä¸ª Survivor åŒºå æ•´ä¸ªå¹´è½»ä»£çš„ 1/5</li>
<li>-XX:MaxPermSize=n:è®¾ç½®æŒä¹…ä»£å¤§å°</li>
<li>-XX:MaxTenuringThresholdï¼šè®¾ç½®åƒåœ¾æœ€å¤§å¹´é¾„ã€‚å¦‚æœè®¾ç½®ä¸º 0 çš„è¯ï¼Œåˆ™å¹´è½»ä»£å¯¹è±¡ä¸ç»è¿‡ SurvivoråŒºï¼Œç›´æ¥è¿›å…¥å¹´è€ä»£ã€‚å¯¹äºå¹´è€ä»£æ¯”è¾ƒå¤šçš„åº”ç”¨ï¼Œå¯ä»¥æé«˜æ•ˆç‡ã€‚å¦‚æœå°†æ­¤å€¼è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒå¤§å€¼ï¼Œåˆ™å¹´è½»ä»£å¯¹è±¡ä¼šåœ¨ Survivor åŒºè¿›è¡Œå¤šæ¬¡å¤åˆ¶ï¼Œè¿™æ ·å¯ä»¥å¢åŠ å¯¹è±¡å†å¹´è½»ä»£çš„å­˜æ´»æ—¶é—´ï¼Œå¢åŠ åœ¨å¹´è½»ä»£å³è¢«å›æ”¶çš„æ¦‚ç‡ã€‚</li>
</ul>
</li>
<li><p>æ”¶é›†å™¨è®¾ç½®</p>
<ul>
<li>-XX:+UseSerialGC:è®¾ç½®ä¸²è¡Œæ”¶é›†å™¨ï¼Œå¹´è½»å¸¦æ”¶é›†å™¨ï¼Œ æ¬¡æ”¶é›†å™¨</li>
<li>-XX:+UseParallelGC:è®¾ç½®å¹¶è¡Œæ”¶é›†å™¨</li>
<li>-XX:+UseParNewGC:è®¾ç½®å¹´è½»ä»£ä¸ºå¹¶è¡Œæ”¶é›†ã€‚å¯ä¸ CMS æ”¶é›†åŒæ—¶ä½¿ç”¨ã€‚JDK5.0 ä»¥ä¸Šï¼ŒJVMä¼šæ ¹æ®ç³»ç»Ÿé…ç½®è‡ªè¡Œè®¾ç½®ï¼Œæ‰€ä»¥æ— éœ€å†è®¾ç½®æ­¤å€¼ã€‚</li>
<li>-XX:+UseParallelOldGC:è®¾ç½®å¹¶è¡Œå¹´è€ä»£æ”¶é›†å™¨ï¼ŒJDK6.0 æ”¯æŒå¯¹å¹´è€ä»£å¹¶è¡Œæ”¶é›†ã€‚</li>
<li>-XX:+UseConcMarkSweepGC:è®¾ç½®å¹´è€ä»£å¹¶å‘æ”¶é›†å™¨ï¼Œæµ‹è¯•ä¸­é…ç½®è¿™ä¸ªä»¥åï¼Œ-XX:NewRatioçš„é…ç½®å¤±æ•ˆï¼ŒåŸå› ä¸æ˜ã€‚æ‰€ä»¥ï¼Œæ­¤æ—¶å¹´è½»ä»£å¤§å°æœ€å¥½ç”¨-Xmn è®¾ç½®ã€‚</li>
<li>-XX:+UseG1GC:è®¾ç½® G1 æ”¶é›†å™¨</li>
</ul>
</li>
<li><p>åƒåœ¾å›æ”¶ç»Ÿè®¡ä¿¡æ¯ï¼Œç±»ä¼¼æ—¥å¿—çš„é…ç½®ä¿¡æ¯ã€‚ä¼šæœ‰æ§åˆ¶å°ç›¸å…³ä¿¡æ¯è¾“å‡ºã€‚ å•†ä¸šé¡¹ç›®ä¸Šçº¿çš„æ—¶å€™ï¼Œä½¿ç”¨ loggc</p>
<ul>
<li>-XX:+PrintGC</li>
<li>-XX:+Printetails</li>
<li>-XX:+PrintGCTimeStamps</li>
<li>-Xloggc:filename</li>
</ul>
</li>
<li><p>å¹¶è¡Œæ”¶é›†å™¨è®¾ç½®</p>
<ul>
<li>-XX:ParallelGCThreads=n:è®¾ç½®å¹¶è¡Œæ”¶é›†å™¨æ”¶é›†æ—¶æœ€å¤§çº¿ç¨‹æ•°ä½¿ç”¨çš„ CPU æ•°ã€‚å¹¶è¡Œæ”¶é›†çº¿ç¨‹æ•°ã€‚</li>
<li>-XX:MaxGCPauseMillis=n:è®¾ç½®å¹¶è¡Œæ”¶é›†æœ€å¤§æš‚åœæ—¶é—´ï¼Œå•ä½æ¯«ç§’ã€‚å¯ä»¥å‡å°‘ STW æ—¶é—´ã€‚</li>
<li>-XX:GCTimeRatio=n:è®¾ç½®åƒåœ¾å›æ”¶æ—¶é—´å ç¨‹åºè¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚å…¬å¼ä¸º 1/(1+n)å¹¶å‘æ”¶é›†å™¨è®¾ç½®</li>
<li>-XX:+CMSIncrementalMode:è®¾ç½®ä¸ºå¢é‡æ¨¡å¼ã€‚é€‚ç”¨äºå• CPU æƒ…å†µã€‚</li>
<li>-XX:+UseAdaptiveSizePolicyï¼šè®¾ç½®æ­¤é€‰é¡¹åï¼Œå¹¶è¡Œæ”¶é›†å™¨ä¼šè‡ªåŠ¨é€‰æ‹©å¹´è½»ä»£åŒºå¤§å°å’Œç›¸åº”çš„ Survivor åŒºæ¯”ä¾‹ï¼Œä»¥è¾¾åˆ°ç›®æ ‡ç³»ç»Ÿè§„å®šçš„æœ€ä½ç›¸åº”æ—¶é—´æˆ–è€…æ”¶é›†é¢‘ç‡ç­‰ï¼Œæ­¤å€¼å»ºè®®ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨æ—¶ï¼Œä¸€ç›´æ‰“å¼€ã€‚</li>
<li>-XX:CMSFullGCsBeforeCompaction=nï¼šç”±äºå¹¶å‘æ”¶é›†å™¨ä¸å¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©ã€æ•´ç†ï¼Œæ‰€ä»¥è¿è¡Œä¸€æ®µæ—¶é—´ä»¥åä¼šäº§ç”Ÿâ€œç¢ç‰‡â€ï¼Œä½¿å¾—è¿è¡Œæ•ˆç‡é™ä½ã€‚æ­¤å€¼è®¾ç½®è¿è¡Œå¤šå°‘æ¬¡ GC ä»¥åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©ã€æ•´ç†ã€‚</li>
<li>-XX:+UseCMSCompactAtFullCollectionï¼šæ‰“å¼€å¯¹å¹´è€ä»£çš„å‹ç¼©ã€‚å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œä½†æ˜¯å¯<br>ä»¥æ¶ˆé™¤ç¢ç‰‡</li>
</ul>
</li>
<li><p>å†…å­˜è®¾ç½®ç»éªŒåˆ†äº«</p>
<ul>
<li>JVM ä¸­æœ€å¤§å †å¤§å°æœ‰ä¸‰æ–¹é¢é™åˆ¶ï¼š<ul>
<li>ç›¸å…³æ“ä½œç³»ç»Ÿçš„æ•°æ®æ¨¡å‹ï¼ˆ32-bt è¿˜æ˜¯ 64-bitï¼‰é™åˆ¶ï¼›</li>
<li>ç³»ç»Ÿçš„å¯ç”¨è™šæ‹Ÿå†…å­˜é™åˆ¶ï¼›</li>
<li>ç³»ç»Ÿçš„å¯ç”¨ç‰©ç†å†…å­˜é™åˆ¶ã€‚</li>
<li>32 ä½ç³»ç»Ÿ ä¸‹ï¼Œä¸€èˆ¬é™åˆ¶åœ¨ 1.5G~2Gï¼›64 ä¸ºæ“ä½œç³»ç»Ÿå¯¹å†…å­˜æ— é™åˆ¶ã€‚</li>
</ul>
</li>
<li>Tomcat é…ç½®æ–¹å¼ï¼š ç¼–å†™ catalina.bat|catalina.sh ï¼Œå¢åŠ  JAVA_OPTS å‚æ•°è®¾ç½®ã€‚ windowså’Œ linux é…ç½®æ–¹å¼ä¸åŒã€‚ windows - set â€œJAVA_OPTS=%JAVA_OPTS% è‡ªå®šä¹‰å‚æ•° â€œ ï¼› linux -JAVA_OPTS=â€$JAVA_OPTS è‡ªå®šä¹‰å‚æ•° â€œå¸¸è§è®¾ç½®ï¼š<ul>
<li>-Xmx3550m -Xms3550m -Xmn2g -Xss128k é€‚åˆå¼€å‘è¿‡ç¨‹çš„æµ‹è¯•åº”ç”¨ã€‚è¦æ±‚ç‰©ç†å†…å­˜å¤§äº4Gã€‚<ul>
<li>è®¾ç½®JVMæœ€å¤§å¯ç”¨å†…å­˜ä¸åˆå§‹å†…å­˜ç›¸åŒï¼Œå¯ä»¥é¿å…æ¯æ¬¡åƒåœ¾å®ŒæˆåJVMé‡æ–°åˆ†é…å†…å­˜ã€‚</li>
<li>-Xmn2gï¼Œè®¾ç½®å¹´è½»ä»£ä¸º2ä¸ªgï¼ŒæŒä¹…ä»£ä¸€èˆ¬å›ºå®šå¤§å°ä¸º64mï¼Œæ‰€ä»¥å¢å¤§å¹´è½»ä»£åï¼Œå°†ä¼šå‡å°è€å¹´ä»£å¤§å°ã€‚å®˜æ–¹æ¨èè®¾ç½®æˆæ•´ä¸ªå †çš„3/8ã€‚</li>
<li>-Xss128k ï¼Œè®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ï¼ŒJDK1.5åæ¯ä¸ªçº¿ç¨‹æ ˆå¤§å°ä¸º1Mï¼Œä»¥å‰æ¯ä¸ªçº¿ç¨‹æ ˆå¤§å°ä¸º256kã€‚åœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹ï¼Œå‡å°‘è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ï¼Œä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹å†…çš„çº¿ç¨‹æ•°é‡æ˜¯æœ‰é™çš„ï¼Œä¸èƒ½æ— çº¿ç”Ÿæˆï¼Œç»éªŒå€¼åœ¨3000~5000å·¦å³ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>æ”¶é›†å™¨è®¾ç½®ç»éªŒåˆ†äº«</p>
<ul>
<li>å…³äºæ”¶é›†å™¨çš„é€‰æ‹© JVM ç»™äº†ä¸‰ç§é€‰æ‹©ï¼šä¸²è¡Œæ”¶é›†å™¨ã€å¹¶è¡Œæ”¶é›†å™¨ã€å¹¶å‘æ”¶é›†å™¨ï¼Œä½†æ˜¯ä¸²è¡Œæ”¶é›†å™¨åªé€‚ç”¨äºå°æ•°æ®é‡çš„æƒ…å†µï¼Œæ‰€ä»¥è¿™é‡Œçš„é€‰æ‹©ä¸»è¦é’ˆå¯¹å¹¶è¡Œæ”¶é›†å™¨å’Œå¹¶å‘æ”¶é›†å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒJDK5.0 ä»¥å‰éƒ½æ˜¯ä½¿ç”¨ä¸²è¡Œæ”¶é›†å™¨ï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶ä»–æ”¶é›†å™¨éœ€è¦åœ¨å¯åŠ¨æ—¶åŠ å…¥ç›¸åº”å‚æ•°ã€‚JDK5.0 ä»¥åï¼ŒJVM ä¼šæ ¹æ®å½“å‰ç³»ç»Ÿé…ç½®è¿›è¡Œåˆ¤æ–­ã€‚</li>
<li>å¸¸è§é…ç½®ï¼š<ul>
<li>å¹¶è¡Œæ”¶é›†å™¨ä¸»è¦ä»¥åˆ°è¾¾ä¸€å®šçš„ååé‡ä¸ºç›®æ ‡ï¼Œé€‚ç”¨äºç§‘å­¦è®¡ç®—å’Œåå°å¤„ç†ç­‰ã€‚</li>
<li>-Xmx3800m -Xms3800m -Xmn2g -Xss128k -XX:+UseParallelGC -XX:ParallelGCThreads=20</li>
<li>ä½¿ç”¨ ParallelGC ä½œä¸ºå¹¶è¡Œæ”¶é›†å™¨ï¼Œ GC çº¿ç¨‹ä¸º 20ï¼ˆCPU æ ¸å¿ƒæ•°&gt;=20 æ—¶ï¼‰ï¼Œå†…å­˜é—®é¢˜æ ¹æ®ç¡¬ä»¶é…ç½®å…·ä½“æä¾›ã€‚å»ºè®®ä½¿ç”¨ç‰©ç†å†…å­˜çš„ 80%å·¦å³ä½œä¸º JVM å†…å­˜å®¹é‡ã€‚</li>
<li>-Xmx3550m -Xms3550m -Xmn2g -Xss128k -XX:+UseParallelGC -XX:ParallelGCThreads=20<br>-XX:+UseParallelOldGC</li>
<li>æŒ‡å®šè€å¹´ä»£æ”¶é›†å™¨ï¼Œåœ¨JDK5.0ä¹‹åçš„ç‰ˆæœ¬ï¼ŒParallelGCå¯¹åº”çš„å…¨æ”¶é›†å™¨å°±æ˜¯ParallelOldGCã€‚å¯ä»¥å¿½ç•¥</li>
<li>-Xmx3550m -Xms3550m -Xmn2g -Xss128k -XX:+UseParallelGC -XX:MaxGCPauseMillis=100</li>
<li>æŒ‡å®š GC æ—¶æœ€å¤§æš‚åœæ—¶é—´ã€‚å•ä½æ˜¯æ¯«ç§’ã€‚æ¯æ¬¡ GC æœ€é•¿ä½¿ç”¨ 100 æ¯«ç§’ã€‚å¯ä»¥å°½å¯èƒ½æé«˜å·¥ä½œçº¿ç¨‹çš„æ‰§è¡Œèµ„æºã€‚</li>
<li>-Xmx3550m -Xms3550m -Xmn2g -Xss128k -XX:+UseParallelGC -XX:MaxGCPauseMillis=100<br>-XX:+UseAdaptiveSizePolicy</li>
<li>UseAdaptiveSizePolicy æ˜¯æé«˜å¹´è½»ä»£ GC æ•ˆç‡çš„é…ç½®ã€‚æ¬¡æ”¶é›†å™¨æ‰§è¡Œæ•ˆç‡ã€‚</li>
<li>å¹¶å‘æ”¶é›†å™¨ä¸»è¦æ˜¯ä¿è¯ç³»ç»Ÿçš„å“åº”æ—¶é—´ï¼Œå‡å°‘åƒåœ¾æ”¶é›†æ—¶çš„åœé¡¿æ—¶é—´ã€‚é€‚ç”¨äºåº”ç”¨æœåŠ¡<br>å™¨ã€ç”µä¿¡é¢†åŸŸã€äº’è”ç½‘é¢†åŸŸç­‰ã€‚</li>
<li>-Xmx3550m -Xms3550m -Xmn2g -Xss128k -XX:ParallelGCThreads=20<br>-XX:+UseConcMarkSweepGC -XX:+UseParNewGC</li>
<li>æŒ‡å®šå¹´è½»ä»£æ”¶é›†å™¨ä¸º ParNewï¼Œå¹´è€ä»£æ”¶é›†å™¨ ConcurrentMarkSweepï¼Œå¹¶å‘ GC çº¿ç¨‹æ•°ä¸º20ï¼ˆCPU æ ¸å¿ƒ&gt;=20ï¼‰ï¼Œå¹¶å‘ GC çš„çº¿ç¨‹æ•°å»ºè®®ä½¿ç”¨ï¼ˆCPU æ ¸å¿ƒæ•°+3ï¼‰/4 æˆ– CPU æ ¸å¿ƒæ•°ã€ä¸æ¨èä½¿ç”¨ã€‘ã€‚</li>
<li>-Xmx3550m -Xms3550m -Xmn2g -Xss128k -XX:+UseConcMarkSweepGC<br>-XX:CMSFullGCsBeforeCompaction=5 -XX:+UseCMSCompactAtFullCollection</li>
<li>CMSFullGCsBeforeCompaction=5 æ‰§è¡Œ 5 æ¬¡ GC åï¼Œè¿è¡Œä¸€æ¬¡å†…å­˜çš„æ•´ç†ã€‚</li>
<li>UseCMSCompactAtFullCollection æ‰§è¡Œè€å¹´ä»£å†…å­˜æ•´ç†ã€‚å¯ä»¥é¿å…å†…å­˜ç¢ç‰‡ï¼Œæé«˜ GC è¿‡ç¨‹ä¸­çš„æ•ˆç‡ï¼Œå‡å°‘åœé¡¿æ—¶é—´ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>ç®€å•æ€»ç»“</p>
<ul>
<li>å¹´è½»ä»£å¤§å°é€‰æ‹©<ul>
<li>å“åº”æ—¶é—´ä¼˜å…ˆçš„åº”ç”¨ï¼šå°½å¯èƒ½è®¾å¤§ï¼Œç›´åˆ°æ¥è¿‘ç³»ç»Ÿçš„æœ€ä½å“åº”æ—¶é—´é™åˆ¶ï¼ˆæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼‰ã€‚åœ¨æ­¤ç§æƒ…å†µä¸‹ï¼Œå¹´è½»ä»£æ”¶é›†å‘ç”Ÿçš„é¢‘ç‡ä¹Ÿæ˜¯æœ€å°çš„ã€‚åŒæ—¶ï¼Œå‡å°‘åˆ°è¾¾å¹´è€ä»£çš„å¯¹è±¡ã€‚</li>
<li>ååé‡ä¼˜å…ˆçš„åº”ç”¨ï¼šå°½å¯èƒ½çš„è®¾ç½®å¤§ï¼Œå¯èƒ½åˆ°è¾¾ Gbit çš„ç¨‹åº¦ã€‚å› ä¸ºå¯¹å“åº”æ—¶é—´æ²¡æœ‰è¦æ±‚ï¼Œåƒåœ¾æ”¶é›†å¯ä»¥å¹¶è¡Œè¿›è¡Œï¼Œä¸€èˆ¬é€‚åˆ 8CPU ä»¥ä¸Šçš„åº”ç”¨ã€‚</li>
</ul>
</li>
<li>å¹´è€ä»£å¤§å°é€‰æ‹©<ul>
<li>å“åº”æ—¶é—´ä¼˜å…ˆçš„åº”ç”¨ï¼š å¹´è€ä»£ä½¿ç”¨å¹¶å‘æ”¶é›†å™¨ï¼Œæ‰€ä»¥å…¶å¤§å°éœ€è¦å°å¿ƒè®¾ç½®ï¼Œä¸€èˆ¬è¦è€ƒè™‘å¹¶å‘ä¼šè¯ç‡å’Œä¼šè¯æŒç»­æ—¶é—´ç­‰ä¸€äº›å‚æ•°ã€‚å¦‚æœå †è®¾ç½®å°äº†ï¼Œå¯ä»¥ä¼šé€ æˆå†…å­˜ç¢ç‰‡ã€é«˜å›æ”¶é¢‘ç‡ä»¥åŠåº”ç”¨æš‚åœè€Œä½¿ç”¨ä¼ ç»Ÿçš„æ ‡è®°æ¸…é™¤æ–¹å¼ï¼›å¦‚æœå †å¤§äº†ï¼Œåˆ™éœ€è¦è¾ƒ é•¿çš„æ”¶é›†æ—¶é—´ã€‚æœ€ä¼˜åŒ–çš„æ–¹æ¡ˆï¼Œä¸€èˆ¬éœ€è¦å‚è€ƒä»¥ä¸‹æ•°æ®è·å¾—ï¼š<ul>
<li>å¹¶å‘åƒåœ¾æ”¶é›†ä¿¡æ¯</li>
<li>æŒä¹…ä»£å¹¶å‘æ”¶é›†æ¬¡æ•°</li>
<li>ä¼ ç»Ÿ GC ä¿¡æ¯</li>
<li>èŠ±åœ¨å¹´è½»ä»£å’Œå¹´è€ä»£å›æ”¶ä¸Šçš„æ—¶é—´æ¯”ä¾‹</li>
<li>å‡å°‘å¹´è½»ä»£å’Œå¹´è€ä»£èŠ±è´¹çš„æ—¶é—´ï¼Œä¸€èˆ¬ä¼šæé«˜åº”ç”¨çš„æ•ˆç‡</li>
</ul>
</li>
<li>ååé‡ä¼˜å…ˆçš„åº”ç”¨ï¼šä¸€èˆ¬ååé‡ä¼˜å…ˆçš„åº”ç”¨éƒ½æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¹´è½»ä»£å’Œä¸€ä¸ªè¾ƒå°çš„å¹´è€ä»£ã€‚åŸå› æ˜¯ï¼Œè¿™æ ·å¯ä»¥å°½å¯èƒ½å›æ”¶æ‰å¤§éƒ¨åˆ†çŸ­æœŸå¯¹è±¡ï¼Œå‡å°‘ä¸­æœŸçš„å¯¹è±¡ï¼Œè€Œå¹´è€ä»£å­˜æ”¾é•¿æœŸå­˜æ´»å¯¹è±¡ã€‚</li>
<li>è¾ƒå°å †å¼•èµ·çš„ç¢ç‰‡é—®é¢˜ï¼Œå› ä¸ºå¹´è€ä»£çš„å¹¶å‘æ”¶é›†å™¨ä½¿ç”¨æ ‡è®°ã€æ¸…é™¤ç®—æ³•ï¼Œæ‰€ä»¥ä¸ä¼šå¯¹å †è¿›è¡Œå‹ç¼©ã€‚å½“æ”¶é›†å™¨å›æ”¶æ—¶ï¼Œä»–ä¼šæŠŠç›¸é‚»çš„ç©ºé—´è¿›è¡Œåˆå¹¶ï¼Œè¿™æ ·å¯ä»¥åˆ†é…ç»™è¾ƒå¤§çš„å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå½“å †ç©ºé—´è¾ƒå°æ—¶ï¼Œè¿è¡Œä¸€æ®µæ—¶é—´ä»¥åï¼Œå°±ä¼šå‡ºç°â€œç¢ç‰‡â€ï¼Œå¦‚æœå¹¶å‘æ”¶é›†å™¨æ‰¾ä¸åˆ°è¶³å¤Ÿçš„ç©ºé—´ï¼Œé‚£ä¹ˆå¹¶å‘æ”¶é›†å™¨å°†ä¼šåœæ­¢ï¼Œç„¶åä½¿ç”¨ä¼ ç»Ÿçš„æ ‡è®°ã€æ•´ç†æ–¹å¼è¿›è¡Œå›æ”¶ã€‚å¦‚æœå‡ºç°â€œç¢ç‰‡â€ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š<ul>
<li>-XX:+UseCMSCompactAtFullCollectionï¼šä½¿ç”¨å¹¶å‘æ”¶é›†å™¨æ—¶ï¼Œå¼€å¯å¯¹å¹´è€ä»£çš„å‹ç¼©ã€‚</li>
<li>-XX:CMSFullGCsBeforeCompaction=0ï¼šä¸Šé¢é…ç½®å¼€å¯çš„æƒ…å†µä¸‹ï¼Œè¿™é‡Œè®¾ç½®å¤šå°‘æ¬¡ Full GCåï¼Œå¯¹å¹´è€ä»£è¿›è¡Œå‹ç¼©</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><em>å°ç¼–æ˜¯ä¸€æšJava Coderï¼Œä¸šä½™å†™æ–‡ç« ï¼Œç°ä¸»è¥å¾®ä¿¡å…¬ä¼—å·ã€ŠJavaæ‚£è€…ã€‹ï¼Œå–œæ¬¢çš„è¯å…³æ³¨æˆ‘çš„å…¬ä¼—å·æˆ–è€…åŠ æˆ‘å¾®ä¿¡æˆ‘ä»¬ä¸€èµ·å­¦ä¹ Java</em></p>
<p><img src="\111å…¬ä¼—å·.jpg" alt=""></p>
<h2 id="åˆä½“æœŸï¼ˆç½‘ç»œç¼–ç¨‹ï¼‰"><a href="#åˆä½“æœŸï¼ˆç½‘ç»œç¼–ç¨‹ï¼‰" class="headerlink" title="åˆä½“æœŸï¼ˆç½‘ç»œç¼–ç¨‹ï¼‰"></a>åˆä½“æœŸï¼ˆç½‘ç»œç¼–ç¨‹ï¼‰</h2><h3 id="åˆä½“å‰æœŸï¼ˆSocketï¼‰"><a href="#åˆä½“å‰æœŸï¼ˆSocketï¼‰" class="headerlink" title="åˆä½“å‰æœŸï¼ˆSocketï¼‰"></a>åˆä½“å‰æœŸï¼ˆSocketï¼‰</h3><p>â€‹            <em>é¦–å…ˆæ³¨æ„ï¼ŒSocketä¸æ˜¯Javaä¸­ç‹¬æœ‰çš„æ¦‚å¿µï¼Œè€Œæ˜¯ä¸€ä¸ªè¯­è¨€æ— å…³æ ‡å‡†ã€‚ä»»ä½•å¯ä»¥å®ç°ç½‘ç»œç¼–ç¨‹çš„ç¼–ç¨‹è¯­è¨€éƒ½æœ‰Socketã€‚</em> </p>
<ul>
<li><p><strong>ä»€ä¹ˆæ˜¯</strong> <strong>Socket?</strong> </p>
<blockquote>
<p>â€‹        ç½‘ç»œä¸Šçš„ä¸¤ä¸ªç¨‹åºé€šè¿‡ä¸€ä¸ªåŒå‘çš„é€šä¿¡è¿æ¥å®ç°æ•°æ®çš„äº¤æ¢ï¼Œè¿™ä¸ªè¿æ¥çš„ä¸€ç«¯ç§°ä¸ºä¸€ä¸ªsocketã€‚ </p>
<p>â€‹        å»ºç«‹ç½‘ç»œé€šä¿¡è¿æ¥è‡³å°‘è¦ä¸€ä¸ªç«¯å£å·ã€‚<em>socket</em> æœ¬è´¨æ˜¯ç¼–ç¨‹æ¥å£<em>(API)</em>ï¼Œå¯¹ <em>TCP/IP</em> çš„å°è£…ï¼Œ<em>TCP/IP</em> ä¹Ÿè¦æä¾›å¯ä¾›ç¨‹åºå‘˜åšç½‘ç»œå¼€å‘æ‰€ç”¨çš„æ¥å£ï¼Œè¿™å°±æ˜¯ <em>Socket</em> ç¼–ç¨‹æ¥å£ï¼›<em>HTTP</em> æ˜¯è½¿è½¦ï¼Œ æä¾›äº†å°è£…æˆ–è€…æ˜¾ç¤ºæ•°æ®çš„å…·ä½“å½¢å¼ï¼›<em>Socket</em> æ˜¯å‘åŠ¨æœºï¼Œæä¾›äº†ç½‘ç»œé€šä¿¡çš„èƒ½åŠ›ã€‚ </p>
<p>â€‹        <em>Socket</em> çš„è‹±æ–‡åŸä¹‰æ˜¯<em>â€œ</em>å­”<em>â€</em>æˆ–<em>â€œ</em>æ’åº§<em>â€</em>ã€‚ä½œä¸º <em>BSD UNIX</em> çš„è¿›ç¨‹é€šä¿¡æœºåˆ¶ï¼Œå–åä¸€ç§æ„æ€ã€‚é€š å¸¸ä¹Ÿç§°ä½œ<em>â€œ</em>å¥—æ¥å­—<em>â€œ</em>ï¼Œç”¨äºæè¿° <em>IP</em> åœ°å€å’Œç«¯å£ï¼Œæ˜¯ä¸€ä¸ªé€šä¿¡é“¾çš„å¥æŸ„ï¼Œå¯ä»¥ç”¨æ¥å®ç°ä¸åŒè™š æ‹Ÿæœºæˆ–ä¸åŒè®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ã€‚åœ¨ <em>Internet</em> ä¸Šçš„ä¸»æœºä¸€èˆ¬è¿è¡Œäº†å¤šä¸ªæœåŠ¡è½¯ä»¶ï¼ŒåŒæ—¶æä¾›å‡  ç§æœåŠ¡ã€‚æ¯ç§æœåŠ¡éƒ½æ‰“å¼€ä¸€ä¸ª <em>Socket</em>ï¼Œå¹¶ç»‘å®šåˆ°ä¸€ä¸ªç«¯å£ä¸Šï¼Œä¸åŒçš„ç«¯å£å¯¹åº”äºä¸åŒçš„æœåŠ¡ã€‚<em>Socket</em> æ­£å¦‚å…¶è‹±æ–‡åŸä¹‰é‚£æ ·ï¼Œåƒä¸€ä¸ªå¤šå­”æ’åº§ã€‚ä¸€å°ä¸»æœºçŠ¹å¦‚å¸ƒæ»¡å„ç§æ’åº§çš„æˆ¿é—´ï¼Œæ¯ä¸ªæ’ åº§æœ‰ä¸€ä¸ªç¼–å·ï¼Œæœ‰çš„æ’åº§æä¾› <em>220</em> ä¼äº¤æµç”µï¼Œ æœ‰çš„æä¾› <em>110</em> ä¼äº¤æµç”µï¼Œæœ‰çš„åˆ™æä¾›æœ‰çº¿ç”µ è§†èŠ‚ç›®ã€‚ å®¢æˆ·è½¯ä»¶å°†æ’å¤´æ’åˆ°ä¸åŒç¼–å·çš„æ’åº§ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸åŒçš„æœåŠ¡ã€‚</p>
</blockquote>
</li>
<li><p><strong>Socket</strong> <strong>è¿æ¥æ­¥éª¤</strong> </p>
<p>â€‹        <em>æ ¹æ®è¿æ¥å¯åŠ¨çš„æ–¹å¼ä»¥åŠæœ¬åœ°å¥—æ¥å­—è¦è¿æ¥çš„ç›®æ ‡ï¼Œå¥—æ¥å­—ä¹‹é—´çš„è¿æ¥è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šæœåŠ¡å™¨ç›‘å¬ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ï¼Œè¿æ¥ç¡®è®¤ã€‚ã€å¦‚æœåŒ…å«æ•°æ®äº¤äº’+æ–­å¼€è¿æ¥ï¼Œé‚£ä¹ˆä¸€å…±æ˜¯ äº”ä¸ªæ­¥éª¤ã€‘</em></p>
<ol>
<li>æœåŠ¡å™¨ç›‘å¬ï¼šæ˜¯æœåŠ¡å™¨ç«¯å¥—æ¥å­—å¹¶ä¸å®šä½å…·ä½“çš„å®¢æˆ·ç«¯å¥—æ¥å­—ï¼Œè€Œæ˜¯å¤„äºç­‰å¾…è¿æ¥çš„çŠ¶æ€ï¼Œå®æ—¶ç›‘æ§ç½‘ç»œçŠ¶æ€ã€‚ </li>
<li>å®¢æˆ·ç«¯è¯·æ±‚ï¼šæ˜¯æŒ‡ç”±å®¢æˆ·ç«¯çš„å¥—æ¥å­—æå‡ºè¿æ¥è¯·æ±‚ï¼Œè¦è¿æ¥çš„ç›®æ ‡æ˜¯æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—ã€‚ä¸ºæ­¤ï¼Œå®¢æˆ·ç«¯çš„å¥—æ¥å­—å¿…é¡»é¦–å…ˆæè¿°å®ƒè¦è¿æ¥çš„æœåŠ¡å™¨çš„å¥—æ¥å­—ï¼ŒæŒ‡å‡ºæœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„åœ°å€å’Œç«¯å£å·ï¼Œç„¶åå°±å‘æœåŠ¡å™¨ç«¯å¥—æ¥å­—æå‡ºè¿æ¥è¯·æ±‚ã€‚ </li>
<li>è¿æ¥ç¡®è®¤(ä¸‰å±‚æ¡æ‰‹)ï¼šæ˜¯æŒ‡å½“æœåŠ¡å™¨ç«¯å¥—æ¥å­—ç›‘å¬åˆ°æˆ–è€…è¯´æ¥æ”¶åˆ°å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚ã€1ã€‘ï¼Œå®ƒå°±å“åº”å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¯·æ±‚ï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ŒæŠŠæœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„æè¿°å‘ç»™å®¢æˆ·ç«¯ã€2ã€‘ï¼Œä¸€æ—¦å®¢æˆ·ç«¯ç¡®è®¤äº†æ­¤æè¿°ï¼Œè¿æ¥å°±å»ºç«‹å¥½äº†ã€3ã€‘ã€‚è€ŒæœåŠ¡å™¨ç«¯å¥—æ¥å­—ç»§ç»­å¤„äºç›‘å¬çŠ¶æ€ï¼Œç»§ç»­æ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚ã€‚</li>
<li>æ–­å¼€è¿æ¥ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å‘èµ·ä¸€ä¸ªè¯·æ±‚å…³é—­æ¶ˆæ¯ã€1ã€‘ï¼ŒæœåŠ¡å™¨æ ¹æ®è‡ªå·±çŠ¶æ€ï¼Œç­‰åˆ°å¯ä»¥å…³é—­æ—¶å€™ï¼Œå‘ä¸€ä¸ªå¯ä»¥å…³é—­çš„æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ã€2ã€‘ï¼Œå¹¶ä¸”æœåŠ¡å™¨å†å‘æµè§ˆå™¨å‘ä¸€ä¸ªå…³é—­æˆåŠŸçš„æ¶ˆæ¯ã€3ã€‘ï¼Œå®¢æˆ·ç«¯å‘ä¸€ä¸ªå…‰ç¬”æˆåŠŸçš„æ¶ˆæ¯ï¼Œè‡³äºæœåŠ¡å™¨å¯ä»¥æ”¶åˆ°ä¸ç®¡ã€4ã€‘ã€‚</li>
</ol>
<p><img src="\media\æ¡æ‰‹å’ŒæŒ¥æ‰‹.jpg" alt=""></p>
</li>
<li><p><strong>Java</strong> <strong>ä¸­çš„</strong> <strong>Socket</strong> </p>
<p>â€‹        <em>åœ¨java.netåŒ…æ˜¯ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€ç±»åº“ã€‚å…¶ä¸­ServerSocketå’ŒSocketæ˜¯ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€ç±»å‹ServerSocketæ˜¯æœåŠ¡ç«¯åº”ç”¨ç±»å‹ã€‚Socketæ˜¯å»ºç«‹è¿æ¥çš„ç±»å‹ã€‚å½“è¿æ¥å»ºç«‹æˆåŠŸåï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½ä¼šæœ‰ä¸€ä¸ª Socketå¯¹è±¡ç¤ºä¾‹ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªSocket å¯¹è±¡ç¤ºä¾‹ï¼Œå®Œæˆä¼šè¯çš„æ‰€æœ‰æ“ä½œã€‚</em></p>
<p>â€‹        <em>å¯¹äºä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œè¿æ¥æ¥è¯´ï¼ŒSocketæ˜¯å¹³ç­‰çš„ï¼Œæ²¡æœ‰æœåŠ¡å™¨å®¢æˆ·ç«¯åˆ†çº§æƒ…å†µ</em></p>
</li>
<li><p><strong>ä»€ä¹ˆæ˜¯åŒæ­¥å’Œå¼‚æ­¥</strong> </p>
<p>â€‹        åŒæ­¥å’Œå¼‚æ­¥æ˜¯é’ˆå¯¹åº”ç”¨ç¨‹åºå’Œå†…æ ¸OSçš„äº¤äº’è€Œè¨€çš„ï¼ŒåŒæ­¥æŒ‡çš„æ˜¯ç”¨æˆ·è¿›ç¨‹è§¦å‘ <em>IO</em> æ“ä½œå¹¶ ç­‰å¾…æˆ–è€…è½®è¯¢çš„å»æŸ¥çœ‹ <em>IO</em> æ“ä½œæ˜¯å¦å°±ç»ªï¼Œè€Œå¼‚æ­¥æ˜¯æŒ‡ç”¨æˆ·è¿›ç¨‹è§¦å‘ <em>IO</em> æ“ä½œä»¥åä¾¿å¼€å§‹åšè‡ª å·±çš„äº‹æƒ…ï¼Œè€Œå½“ <em>IO</em> æ“ä½œå·²ç»å®Œæˆçš„æ—¶å€™ä¼šå¾—åˆ° <em>IO</em> å®Œæˆçš„é€šçŸ¥ï¼Œå¼‚æ­¥æ˜¯OSåº•å±‚æ”¯æŒçš„ä¸€ç§æ“ä½œã€‚ä»¥é“¶è¡Œå–æ¬¾ä¸ºä¾‹ï¼š </p>
<ul>
<li>åŒæ­¥ ï¼š è‡ªå·±äº²è‡ªå‡ºé©¬æŒé“¶è¡Œå¡åˆ°é“¶è¡Œå–é’±ï¼ˆä½¿ç”¨åŒæ­¥ <em>IO</em> æ—¶ï¼Œ<em>Java</em> è‡ªå·±å¤„ç† <em>IO</em> è¯»å†™ï¼‰ï¼› </li>
<li>å¼‚æ­¥ ï¼š å§”æ‰˜ä¸€å°å¼Ÿæ‹¿é“¶è¡Œå¡åˆ°é“¶è¡Œå–é’±ï¼Œç„¶åç»™ä½ ï¼ˆä½¿ç”¨å¼‚æ­¥ <em>IO</em> æ—¶ï¼Œ<em>Java</em> å°† <em>IO</em> è¯»å†™ å§”æ‰˜ç»™ <em>OS</em> å¤„ç†ï¼Œéœ€è¦å°†æ•°æ®ç¼“å†²åŒºåœ°å€å’Œå¤§å°ä¼ ç»™ <em>OS(</em>é“¶è¡Œå¡å’Œå¯†ç <em>)</em>ï¼Œ<em>OS</em> éœ€è¦æ”¯æŒå¼‚æ­¥ <em>IO</em> æ“ä½œ <em>API</em>ï¼‰</li>
</ul>
</li>
<li><p><strong>ä»€ä¹ˆæ˜¯é˜»å¡å’Œéé˜»å¡</strong> </p>
<p>â€‹        é˜»å¡å’Œéé˜»å¡æ˜¯é’ˆå¯¹äºè¿›ç¨‹åœ¨è®¿é—®æ•°æ®çš„æ—¶å€™ï¼Œæ ¹æ® <em>IO</em> æ“ä½œçš„å°±ç»ªçŠ¶æ€æ¥é‡‡å–çš„ä¸åŒ æ–¹å¼ï¼Œè¯´ç™½äº†æ˜¯ä¸€ç§è¯»å–æˆ–è€…å†™å…¥æ“ä½œæ–¹æ³•çš„å®ç°æ–¹å¼ï¼Œé˜»å¡æ–¹å¼ä¸‹è¯»å–æˆ–è€…å†™å…¥å‡½æ•°å°†ä¸€ç›´ç­‰å¾…ï¼Œè€Œéé˜»å¡æ–¹å¼ä¸‹ï¼Œè¯»å–æˆ–è€…å†™å…¥æ–¹æ³•ä¼šç«‹å³è¿”å›ä¸€ä¸ªçŠ¶æ€å€¼ã€‚ ä»¥é“¶è¡Œå–æ¬¾ä¸ºä¾‹ï¼š </p>
<ul>
<li>é˜»å¡ ï¼š <em>ATM</em> æ’é˜Ÿå–æ¬¾ï¼Œä½ åªèƒ½ç­‰å¾…ï¼ˆä½¿ç”¨é˜»å¡ <em>IO</em> æ—¶ï¼Œ<em>Java</em> è°ƒç”¨ä¼šä¸€ç›´é˜»å¡åˆ°è¯»å†™å®Œ æˆæ‰è¿”å›ï¼‰ï¼› </li>
<li>éé˜»å¡ ï¼š æŸœå°å–æ¬¾ï¼Œå–ä¸ªå·ï¼Œç„¶åååœ¨æ¤…å­ä¸Šåšå…¶å®ƒäº‹ï¼Œç­‰å·å¹¿æ’­ä¼šé€šçŸ¥ä½ åŠç†ï¼Œæ²¡åˆ°å·ä½ å°±ä¸èƒ½å»ï¼Œä½ å¯ä»¥ä¸æ–­é—®å¤§å ‚ç»ç†æ’åˆ°äº†æ²¡æœ‰ï¼Œå¤§å ‚ç»ç†å¦‚æœè¯´è¿˜æ²¡åˆ°ä½ å°±ä¸èƒ½å»ï¼ˆä½¿ç”¨éé˜»å¡ <em>IO</em> æ—¶ï¼Œå¦‚æœä¸èƒ½è¯»å†™ <em>Java</em> è°ƒç”¨ä¼šé©¬ä¸Šè¿”å›ï¼Œå½“ <em>IO</em> äº‹ä»¶åˆ†å‘å™¨é€šçŸ¥å¯è¯»å†™æ—¶å†ç»§ ç»­è¿›è¡Œè¯»å†™ï¼Œä¸æ–­å¾ªç¯ç›´åˆ°è¯»å†™å®Œæˆï¼‰</li>
<li>ajaxæ˜¯å¼‚æ­¥é˜»å¡çš„ã€‚</li>
</ul>
</li>
</ul>
<h3 id="åˆä½“ä¸­æœŸï¼ˆBIOã€NIO-ã€AIOï¼‰"><a href="#åˆä½“ä¸­æœŸï¼ˆBIOã€NIO-ã€AIOï¼‰" class="headerlink" title="åˆä½“ä¸­æœŸï¼ˆBIOã€NIO ã€AIOï¼‰"></a>åˆä½“ä¸­æœŸï¼ˆBIOã€NIO ã€AIOï¼‰</h3><ul>
<li><p><strong>BIO</strong> <strong>ç¼–ç¨‹</strong> ï¼š<em>Blocking IO</em>åŒæ­¥é˜»å¡çš„ç¼–ç¨‹æ–¹å¼ã€‚ </p>
<ul>
<li><em>BIO</em> ç¼–ç¨‹æ–¹å¼é€šå¸¸æ˜¯åœ¨ <em>JDK1.4</em> ç‰ˆæœ¬ä¹‹å‰å¸¸ç”¨çš„ç¼–ç¨‹æ–¹å¼ã€‚ç¼–ç¨‹å®ç°è¿‡ç¨‹ä¸ºï¼šé¦–å…ˆåœ¨æœåŠ¡ç«¯å¯åŠ¨ä¸€ä¸ª <em>ServerSocket</em> æ¥ç›‘å¬ç½‘ç»œè¯·æ±‚ï¼Œå®¢æˆ·ç«¯å¯åŠ¨ <em>Socket</em> å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ <em>ServerSocket</em> å›å»ºç«‹ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†æ­¤è¯·æ±‚ï¼Œå¦‚æœæœåŠ¡ç«¯æ²¡æœ‰çº¿ç¨‹å¯ç”¨ï¼Œå®¢æˆ·ç«¯åˆ™ä¼šé˜»å¡ç­‰å¾…æˆ–é­åˆ°æ‹’ç»ã€‚ ä¸”å»ºç«‹å¥½çš„è¿æ¥ï¼Œåœ¨é€šè®¯è¿‡ç¨‹ä¸­ï¼Œæ˜¯åŒæ­¥çš„ã€‚åœ¨å¹¶å‘å¤„ç†æ•ˆç‡ä¸Šæ¯”è¾ƒä½ã€‚å¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š</li>
</ul>
<p><img src="\media\BIOç»“æ„.jpg" alt=""></p>
<ul>
<li><p>æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ›å»ºä¸€ä¸ªserver socketå’Œä¸€ä¸ªthread</p>
</li>
<li><p>åŒæ­¥å¹¶é˜»å¡ï¼ŒæœåŠ¡å™¨å®ç°æ¨¡å¼ä¸ºä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œå³å®¢æˆ·ç«¯æœ‰è¿æ¥è¯·æ±‚æ—¶æœåŠ¡å™¨ç«¯å°± éœ€è¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå¦‚æœè¿™ä¸ªè¿æ¥ä¸åšä»»ä½•äº‹æƒ…ä¼šé€ æˆä¸å¿…è¦çš„çº¿ç¨‹å¼€é”€ï¼Œå½“ç„¶å¯ ä»¥é€šè¿‡çº¿ç¨‹æ± æœºåˆ¶æ”¹å–„ï¼ˆæœ‰äººæŠŠè¿™ç§å«åšä¼ªå¼‚æ­¥ï¼Œå®é™…ä¸Šä¸èƒ½å®ç°ä»»ä½•çš„å¼‚æ­¥çš„æ“ä½œï¼Œå½’æ ¹è¿˜æ˜¯åŒæ­¥ï¼‰ã€‚</p>
</li>
<li><p><em>BIO</em> æ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®æ¯”è¾ƒå°ä¸”å›ºå®šçš„æ¶æ„ï¼Œè¿™ç§æ–¹å¼å¯¹æœåŠ¡å™¨èµ„æºè¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ï¼Œ<em>JDK1.4</em> ä»¥å‰çš„å”¯ä¸€é€‰æ‹©ï¼Œä½†ç¨‹åºç›´è§‚ç®€å•æ˜“ç†è§£ã€‚</p>
</li>
<li><p>ä½¿ç”¨çº¿ç¨‹æ± æœºåˆ¶æ”¹å–„åçš„ <em>BIO</em> æ¨¡å‹å›¾å¦‚ä¸‹<em>:</em> </p>
<p> <img src="\media\BIOçº¿ç¨‹æ± ç»“æœå›¾.jpg" alt=""></p>
</li>
</ul>
</li>
</ul>
<p>Clientï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String host = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(args.length &gt; <span class="number">2</span>)&#123;</span><br><span class="line">            host = args[<span class="number">0</span>];</span><br><span class="line">            port = Integer.parseInt(args[<span class="number">1</span>]);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            host = <span class="string">"127.0.0.1"</span>;</span><br><span class="line">            port = <span class="number">9999</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line">        BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">        PrintWriter writer = <span class="keyword">null</span>;</span><br><span class="line">        Scanner s = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            socket = <span class="keyword">new</span> Socket(host, port);</span><br><span class="line">            String message = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">            reader = <span class="keyword">new</span> BufferedReader(</span><br><span class="line">                    <span class="keyword">new</span> InputStreamReader(socket.getInputStream(), <span class="string">"UTF-8"</span>));</span><br><span class="line">            writer = <span class="keyword">new</span> PrintWriter(</span><br><span class="line">                    socket.getOutputStream(), <span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                message = s.nextLine();</span><br><span class="line">                <span class="keyword">if</span>(message.equals(<span class="string">"exit"</span>))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                writer.println(message);</span><br><span class="line">                writer.flush();</span><br><span class="line">                System.out.println(reader.readLine());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(socket != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            socket = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">if</span>(reader != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    reader.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            reader = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">if</span>(writer != <span class="keyword">null</span>)&#123;</span><br><span class="line">                writer.close();</span><br><span class="line">            &#125;</span><br><span class="line">            writer = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> port = genPort(args);</span><br><span class="line"></span><br><span class="line">        ServerSocket server = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            server = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line">            System.out.println(<span class="string">"server started!"</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                Socket socket = server.accept();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">new</span> Thread(<span class="keyword">new</span> Handler(socket)).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(server != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    server.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            server = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Handler</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Socket socket)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.socket = socket;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">            PrintWriter writer = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">                reader = <span class="keyword">new</span> BufferedReader(</span><br><span class="line">                        <span class="keyword">new</span> InputStreamReader(socket.getInputStream(), <span class="string">"UTF-8"</span>));</span><br><span class="line">                writer = <span class="keyword">new</span> PrintWriter(</span><br><span class="line">                        <span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream(), <span class="string">"UTF-8"</span>));</span><br><span class="line">                String readMessage = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                    System.out.println(<span class="string">"server reading... "</span>);</span><br><span class="line">                    <span class="keyword">if</span>((readMessage = reader.readLine()) == <span class="keyword">null</span>)&#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(readMessage);</span><br><span class="line">                    writer.println(<span class="string">"server recive : "</span> + readMessage);</span><br><span class="line">                    writer.flush();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(socket != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        socket.close();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                socket = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">if</span>(reader != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        reader.close();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                reader = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">if</span>(writer != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125;</span><br><span class="line">                writer = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">genPort</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(args.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">            &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">9999</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">9999</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ThreadPoolç‰ˆçš„Server</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> port = genPort(args);</span><br><span class="line"></span><br><span class="line">        ServerSocket server = <span class="keyword">null</span>;</span><br><span class="line">        ExecutorService service = Executors.newFixedThreadPool(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            server = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line">            System.out.println(<span class="string">"server started!"</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                Socket socket = server.accept();</span><br><span class="line"></span><br><span class="line">                service.execute(<span class="keyword">new</span> Handler(socket));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(server != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    server.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            server = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Handler</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">        Socket socket = <span class="keyword">null</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Socket socket)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.socket = socket;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">            PrintWriter writer = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">                reader = <span class="keyword">new</span> BufferedReader(</span><br><span class="line">                        <span class="keyword">new</span> InputStreamReader(socket.getInputStream(), <span class="string">"UTF-8"</span>));</span><br><span class="line">                writer = <span class="keyword">new</span> PrintWriter(</span><br><span class="line">                        <span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream(), <span class="string">"UTF-8"</span>));</span><br><span class="line">                String readMessage = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                    System.out.println(<span class="string">"server reading... "</span>);</span><br><span class="line">                    <span class="keyword">if</span>((readMessage = reader.readLine()) == <span class="keyword">null</span>)&#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(readMessage);</span><br><span class="line">                    writer.println(<span class="string">"server recive : "</span> + readMessage);</span><br><span class="line">                    writer.flush();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(socket != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        socket.close();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                socket = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">if</span>(reader != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        reader.close();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                reader = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">if</span>(writer != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125;</span><br><span class="line">                writer = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">genPort</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(args.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">            &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">9999</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">9999</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>NIO</strong> <strong>ç¼–ç¨‹</strong> <em>Unblocking IO</em>ï¼ˆ<em>New IO</em>ï¼‰ï¼š åŒæ­¥éé˜»å¡çš„ç¼–ç¨‹æ–¹å¼ã€‚ </p>
<ul>
<li><p><em>NIO</em> æœ¬èº«æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨æ€æƒ³æ¥å®Œæˆçš„ï¼Œå…¶ä¸»è¦æƒ³è§£å†³çš„æ˜¯ <em>BIO</em> çš„å¤§å¹¶å‘é—®é¢˜ï¼Œ<em>NIO</em> åŸºäº<em>Reactor</em>ï¼Œå½“ <em>socket</em> æœ‰æµå¯è¯»æˆ–å¯å†™å…¥ <em>socket</em> æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šç›¸åº”çš„é€šçŸ¥åº”ç”¨ç¨‹åºè¿›è¡Œå¤„ç†ï¼Œåº”ç”¨å†å°†æµè¯»å–åˆ°ç¼“å†²åŒºæˆ–å†™å…¥æ“ä½œç³»ç»Ÿã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå·²ç»ä¸æ˜¯ä¸€ä¸ªè¿æ¥å°±è¦å¯¹åº”ä¸€ä¸ªå¤„ç†çº¿ç¨‹äº†ï¼Œè€Œæ˜¯æœ‰æ•ˆçš„è¯·æ±‚ï¼Œå¯¹åº”ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“è¿æ¥æ²¡æœ‰æ•°æ®æ—¶ï¼Œæ˜¯æ²¡æœ‰å·¥ä½œçº¿ç¨‹æ¥å¤„ç†çš„ï¼ˆå³ä¸€ä¸ªçº¿ç¨‹å¯¹åº”å¤šä¸ªæœ‰æ•ˆè¯·æ±‚ï¼‰ã€‚</p>
</li>
<li><p><em>NIO</em> çš„æœ€é‡è¦çš„åœ°æ–¹æ˜¯å½“ä¸€ä¸ªè¿æ¥åˆ›å»ºåï¼Œä¸éœ€è¦å¯¹åº”ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªè¿æ¥ä¼šè¢«æ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸Šé¢ï¼Œæ‰€ä»¥æ‰€æœ‰çš„è¿æ¥åªéœ€è¦ä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥æå®šï¼Œå½“è¿™ä¸ªçº¿ç¨‹ä¸­çš„å¤šè·¯å¤ç”¨å™¨è¿›è¡Œè½®è¯¢çš„æ—¶å€™ï¼Œå‘ç°è¿æ¥ä¸Šæœ‰è¯·æ±‚çš„è¯ï¼Œæ‰å¼€å¯ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹æ¨¡å¼ï¼Œå¹¶ä¸”é¢å‘ç¼“å­˜ã€‚ </p>
</li>
<li><p>åœ¨ <em>NIO</em> çš„å¤„ç†æ–¹å¼ä¸­ï¼Œå½“ä¸€ä¸ªè¯·æ±‚æ¥çš„è¯ï¼Œå¼€å¯çº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå¯èƒ½ä¼šç­‰å¾…åç«¯åº”ç”¨çš„èµ„æº<em>(JDBC</em> è¿æ¥ç­‰å¾…<em>)</em>ï¼Œå…¶å®è¿™ä¸ªçº¿ç¨‹å°±è¢«é˜»å¡äº†ï¼Œå½“å¹¶å‘ä¸Šæ¥çš„è¯ï¼Œè¿˜æ˜¯ä¼šæœ‰ <em>BIO</em> ä¸€æ ·çš„é—®é¢˜ã€‚ </p>
<p><img src="\media\NIO.jpg" alt=""></p>
</li>
<li><p>åŒæ­¥éé˜»å¡ï¼ŒæœåŠ¡å™¨å®ç°æ¨¡å¼ä¸ºä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªé€šé“ï¼Œå³å®¢æˆ·ç«¯å‘é€çš„è¿æ¥è¯·æ±‚éƒ½ä¼šæ³¨å†Œ åˆ°å¤šè·¯å¤ç”¨å™¨ä¸Šï¼Œå¤šè·¯å¤ç”¨å™¨è½®è¯¢åˆ°è¿æ¥æœ‰ <em>I/O</em> è¯·æ±‚æ—¶æ‰å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚ </p>
</li>
<li><p><em>NIO</em> æ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­ï¼ˆè½»æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå¹¶å‘å±€ é™äºåº”ç”¨ä¸­ï¼Œç¼–ç¨‹å¤æ‚ï¼Œ<em>JDK1.4</em> å¼€å§‹æ”¯æŒã€‚ </p>
</li>
<li><p><strong><em>Buffer:ByteBuffer,CharBuffer,ShortBuffer,IntBuffer,LongBuffer,FloatBuffer,DoubleBuffer<em>*</em></em></strong>ã€‚<em>*</em></p>
</li>
<li><p><strong><em>Channel:SocketChannel,ServerSocketChannel<em>*</em></em></strong>ã€‚<em>*</em> </p>
</li>
<li><p><strong><em>Selector:Selector,AbstractSelector</em></strong> </p>
</li>
<li><p><strong><em>SelectionKey:OP_READ,OP_WRITE,OP_CONNECT,OP_ACCEPT</em></strong></p>
</li>
</ul>
</li>
</ul>
<p>client</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NIOClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿œç¨‹åœ°å€åˆ›å»º</span></span><br><span class="line">        InetSocketAddress remote = <span class="keyword">new</span> InetSocketAddress(<span class="string">"localhost"</span>, <span class="number">9999</span>);</span><br><span class="line">        SocketChannel channel = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å®šä¹‰ç¼“å­˜ã€‚</span></span><br><span class="line">        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å¼€å¯é€šé“</span></span><br><span class="line">            channel = SocketChannel.open();</span><br><span class="line">            <span class="comment">// è¿æ¥è¿œç¨‹æœåŠ¡å™¨ã€‚</span></span><br><span class="line">            channel.connect(remote);</span><br><span class="line">            Scanner reader = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                System.out.print(<span class="string">"put message for send to server &gt; "</span>);</span><br><span class="line">                String line = reader.nextLine();</span><br><span class="line">                <span class="keyword">if</span>(line.equals(<span class="string">"exit"</span>))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å°†æ§åˆ¶å°è¾“å…¥çš„æ•°æ®å†™å…¥åˆ°ç¼“å­˜ã€‚</span></span><br><span class="line">                buffer.put(line.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">                <span class="comment">// é‡ç½®ç¼“å­˜æ¸¸æ ‡</span></span><br><span class="line">                buffer.flip();</span><br><span class="line">                <span class="comment">// å°†æ•°æ®å‘é€ç»™æœåŠ¡å™¨</span></span><br><span class="line">                channel.write(buffer);</span><br><span class="line">                <span class="comment">// æ¸…ç©ºç¼“å­˜æ•°æ®ã€‚</span></span><br><span class="line">                buffer.clear();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// è¯»å–æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span></span><br><span class="line">                <span class="keyword">int</span> readLength = channel.read(buffer);</span><br><span class="line">                <span class="keyword">if</span>(readLength == -<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// é‡ç½®ç¼“å­˜æ¸¸æ ‡</span></span><br><span class="line">                buffer.flip();</span><br><span class="line">                <span class="keyword">byte</span>[] datas = <span class="keyword">new</span> <span class="keyword">byte</span>[buffer.remaining()];</span><br><span class="line">                <span class="comment">// è¯»å–æ•°æ®åˆ°å­—èŠ‚æ•°ç»„ã€‚</span></span><br><span class="line">                buffer.get(datas);</span><br><span class="line">                System.out.println(<span class="string">"from server : "</span> + <span class="keyword">new</span> String(datas, <span class="string">"UTF-8"</span>));</span><br><span class="line">                <span class="comment">// æ¸…ç©ºç¼“å­˜ã€‚</span></span><br><span class="line">                buffer.clear();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != channel)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    channel.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NIOServer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤šè·¯å¤ç”¨å™¨ï¼Œ é€‰æ‹©å™¨ã€‚ ç”¨äºæ³¨å†Œé€šé“çš„ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> Selector selector;</span><br><span class="line">    <span class="comment">// å®šä¹‰äº†ä¸¤ä¸ªç¼“å­˜ã€‚åˆ†åˆ«ç”¨äºè¯»å’Œå†™ã€‚ åˆå§‹åŒ–ç©ºé—´å¤§å°å•ä½ä¸ºå­—èŠ‚ã€‚</span></span><br><span class="line">    <span class="comment">// Buffer1æ˜¯ä¸å®‰å…¨çš„ï¼Œè¦æƒ³å®‰å…¨æ¨¡ä»¿BIOï¼Œç‹¬ç«‹å®šä¹‰ä¸ºHandlerå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> ByteBuffer readBuffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">    <span class="keyword">private</span> ByteBuffer writeBuffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> NIOServer(<span class="number">9999</span>)).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NIOServer</span><span class="params">(<span class="keyword">int</span> port)</span> </span>&#123;</span><br><span class="line">        init(port);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"server starting at port "</span> + port + <span class="string">" ..."</span>);</span><br><span class="line">            <span class="comment">// å¼€å¯å¤šè·¯å¤ç”¨å™¨</span></span><br><span class="line">            <span class="keyword">this</span>.selector = Selector.open();</span><br><span class="line">            <span class="comment">// å¼€å¯æœåŠ¡é€šé“</span></span><br><span class="line">            ServerSocketChannel serverChannel = ServerSocketChannel.open();</span><br><span class="line">            <span class="comment">// éé˜»å¡ï¼Œ å¦‚æœä¼ é€’å‚æ•°trueï¼Œä¸ºé˜»å¡æ¨¡å¼ã€‚</span></span><br><span class="line">            serverChannel.configureBlocking(<span class="keyword">false</span>);</span><br><span class="line">            <span class="comment">// ç»‘å®šç«¯å£</span></span><br><span class="line">            serverChannel.bind(<span class="keyword">new</span> InetSocketAddress(port));</span><br><span class="line">            <span class="comment">// æ³¨å†Œï¼Œå¹¶æ ‡è®°å½“å‰æœåŠ¡é€šé“çŠ¶æ€</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * register(Selector, int)</span></span><br><span class="line"><span class="comment">             * int - çŠ¶æ€ç¼–ç </span></span><br><span class="line"><span class="comment">             *  OP_ACCEPT ï¼š è¿æ¥æˆåŠŸçš„æ ‡è®°ä½ã€‚</span></span><br><span class="line"><span class="comment">             *  OP_READ ï¼š å¯ä»¥è¯»å–æ•°æ®çš„æ ‡è®°</span></span><br><span class="line"><span class="comment">             *  OP_WRITE ï¼š å¯ä»¥å†™å…¥æ•°æ®çš„æ ‡è®°</span></span><br><span class="line"><span class="comment">             *  OP_CONNECT ï¼š è¿æ¥å»ºç«‹åçš„æ ‡è®°</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            serverChannel.register(<span class="keyword">this</span>.selector, SelectionKey.OP_ACCEPT);</span><br><span class="line">            System.out.println(<span class="string">"server started."</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// é˜»å¡æ–¹æ³•ï¼Œå½“è‡³å°‘ä¸€ä¸ªé€šé“è¢«é€‰ä¸­ï¼Œæ­¤æ–¹æ³•è¿”å›ã€‚</span></span><br><span class="line">                <span class="comment">// é€šé“æ˜¯å¦é€‰æ‹©ï¼Œç”±æ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸­çš„é€šé“æ ‡è®°å†³å®šã€‚</span></span><br><span class="line">                <span class="keyword">this</span>.selector.select();</span><br><span class="line">                <span class="comment">// è¿”å›ä»¥é€‰ä¸­çš„é€šé“æ ‡è®°é›†åˆï¼Œ é›†åˆä¸­ä¿å­˜çš„æ˜¯é€šé“çš„æ ‡è®°ã€‚ç›¸å½“äºæ˜¯é€šé“çš„IDã€‚</span></span><br><span class="line">                Iterator&lt;SelectionKey&gt; keys = <span class="keyword">this</span>.selector.selectedKeys().iterator();</span><br><span class="line">                <span class="keyword">while</span>(keys.hasNext())&#123;</span><br><span class="line">                    SelectionKey key = keys.next();</span><br><span class="line">                    <span class="comment">// å°†æœ¬æ¬¡è¦å¤„ç†çš„é€šé“ä»é›†åˆä¸­åˆ é™¤ï¼Œä¸‹æ¬¡å¾ªç¯æ ¹æ®æ–°çš„é€šé“åˆ—è¡¨å†æ¬¡æ‰§è¡Œå¿…è¦çš„ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">                    keys.remove();</span><br><span class="line">                    <span class="comment">// é€šé“æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">                    <span class="keyword">if</span>(key.isValid())&#123;</span><br><span class="line">                        <span class="comment">// é˜»å¡çŠ¶æ€</span></span><br><span class="line">                        <span class="keyword">try</span>&#123;</span><br><span class="line">                            <span class="keyword">if</span>(key.isAcceptable())&#123;</span><br><span class="line">                                accept(key);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;<span class="keyword">catch</span>(CancelledKeyException cke)&#123;</span><br><span class="line">                            <span class="comment">// æ–­å¼€è¿æ¥ã€‚ å‡ºç°å¼‚å¸¸ã€‚</span></span><br><span class="line">                            key.cancel();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// å¯è¯»çŠ¶æ€</span></span><br><span class="line">                        <span class="keyword">try</span>&#123;</span><br><span class="line">                            <span class="keyword">if</span>(key.isReadable())&#123;</span><br><span class="line">                                read(key);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;<span class="keyword">catch</span>(CancelledKeyException cke)&#123;</span><br><span class="line">                            key.cancel();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// å¯å†™çŠ¶æ€</span></span><br><span class="line">                        <span class="keyword">try</span>&#123;</span><br><span class="line">                            <span class="keyword">if</span>(key.isWritable())&#123;</span><br><span class="line">                                write(key);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;<span class="keyword">catch</span>(CancelledKeyException cke)&#123;</span><br><span class="line">                            key.cancel();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(SelectionKey key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.writeBuffer.clear();</span><br><span class="line">        SocketChannel channel = (SocketChannel)key.channel();</span><br><span class="line">        Scanner reader = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.print(<span class="string">"put message for send to client &gt; "</span>);</span><br><span class="line">            String line = reader.nextLine();</span><br><span class="line">            <span class="comment">// å°†æ§åˆ¶å°è¾“å…¥çš„å­—ç¬¦ä¸²å†™å…¥Bufferä¸­ã€‚ å†™å…¥çš„æ•°æ®æ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ã€‚</span></span><br><span class="line">            writeBuffer.put(line.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">            writeBuffer.flip();</span><br><span class="line">            channel.write(writeBuffer);</span><br><span class="line"></span><br><span class="line">            channel.register(<span class="keyword">this</span>.selector, SelectionKey.OP_READ);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(SelectionKey key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ¸…ç©ºè¯»ç¼“å­˜ã€‚</span></span><br><span class="line">            <span class="keyword">this</span>.readBuffer.clear();</span><br><span class="line">            <span class="comment">// è·å–é€šé“</span></span><br><span class="line">            SocketChannel channel = (SocketChannel)key.channel();</span><br><span class="line">            <span class="comment">// å°†é€šé“ä¸­çš„æ•°æ®è¯»å–åˆ°ç¼“å­˜ä¸­ã€‚é€šé“ä¸­çš„æ•°æ®ï¼Œå°±æ˜¯å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ã€‚</span></span><br><span class="line">            <span class="keyword">int</span> readLength = channel.read(readBuffer);</span><br><span class="line">            <span class="comment">// æ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦å†™å…¥æ•°æ®ã€‚</span></span><br><span class="line">            <span class="keyword">if</span>(readLength == -<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">// å…³é—­é€šé“</span></span><br><span class="line">                key.channel().close();</span><br><span class="line">                <span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line">                key.cancel();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * flipï¼Œ NIOä¸­æœ€å¤æ‚çš„æ“ä½œå°±æ˜¯Bufferçš„æ§åˆ¶ã€‚</span></span><br><span class="line"><span class="comment">             * Bufferä¸­æœ‰ä¸€ä¸ªæ¸¸æ ‡ã€‚æ¸¸æ ‡ä¿¡æ¯åœ¨æ“ä½œåä¸ä¼šå½’é›¶ï¼Œå¦‚æœç›´æ¥è®¿é—®Bufferçš„è¯ï¼Œæ•°æ®æœ‰ä¸ä¸€è‡´çš„å¯èƒ½ã€‚</span></span><br><span class="line"><span class="comment">             * flipæ˜¯é‡ç½®æ¸¸æ ‡çš„æ–¹æ³•ã€‚NIOç¼–ç¨‹ä¸­ï¼Œflipæ–¹æ³•æ˜¯å¸¸ç”¨æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">this</span>.readBuffer.flip();</span><br><span class="line">            <span class="comment">// å­—èŠ‚æ•°ç»„ï¼Œä¿å­˜å…·ä½“æ•°æ®çš„ã€‚ Buffer.remaining() -&gt; æ˜¯è·å–Bufferä¸­æœ‰æ•ˆæ•°æ®é•¿åº¦çš„æ–¹æ³•ã€‚</span></span><br><span class="line">            <span class="keyword">byte</span>[] datas = <span class="keyword">new</span> <span class="keyword">byte</span>[readBuffer.remaining()];</span><br><span class="line">            <span class="comment">// æ˜¯å°†Bufferä¸­çš„æœ‰æ•ˆæ•°æ®ä¿å­˜åˆ°å­—èŠ‚æ•°ç»„ä¸­ã€‚</span></span><br><span class="line">            readBuffer.get(datas);</span><br><span class="line">            System.out.println(<span class="string">"from "</span> + channel.getRemoteAddress() + <span class="string">" client : "</span> + <span class="keyword">new</span> String(datas, <span class="string">"UTF-8"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ³¨å†Œé€šé“ï¼Œ æ ‡è®°ä¸ºå†™æ“ä½œã€‚</span></span><br><span class="line">            channel.register(<span class="keyword">this</span>.selector, SelectionKey.OP_WRITE);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                key.channel().close();</span><br><span class="line">                key.cancel();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e1) &#123;</span><br><span class="line">                e1.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(SelectionKey key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ­¤é€šé“ä¸ºinitæ–¹æ³•ä¸­æ³¨å†Œåˆ°Selectorä¸Šçš„ServerSocketChannel</span></span><br><span class="line">            ServerSocketChannel serverChannel = (ServerSocketChannel)key.channel();</span><br><span class="line">            <span class="comment">// é˜»å¡æ–¹æ³•ï¼Œå½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åè¿”å›ã€‚ æ­¤é€šé“å’Œå®¢æˆ·ç«¯ä¸€ä¸€å¯¹åº”ã€‚</span></span><br><span class="line">            SocketChannel channel = serverChannel.accept();</span><br><span class="line">            channel.configureBlocking(<span class="keyword">false</span>);</span><br><span class="line">            <span class="comment">// è®¾ç½®å¯¹åº”å®¢æˆ·ç«¯çš„é€šé“æ ‡è®°çŠ¶æ€ï¼Œæ­¤é€šé“ä¸ºè¯»å–æ•°æ®ä½¿ç”¨çš„ã€‚</span></span><br><span class="line">            channel.register(<span class="keyword">this</span>.selector, SelectionKey.OP_READ);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>TestBuffer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * Bufferçš„åº”ç”¨å›ºå®šé€»è¾‘</span></span><br><span class="line"><span class="comment"> * å†™æ“ä½œé¡ºåº</span></span><br><span class="line"><span class="comment"> * 1. clear()</span></span><br><span class="line"><span class="comment"> * 2. put() -&gt; å†™æ“ä½œ</span></span><br><span class="line"><span class="comment"> * 3. flip() -&gt; é‡ç½®æ¸¸æ ‡</span></span><br><span class="line"><span class="comment"> * 4. SocketChannel.write(buffer); -&gt; å°†ç¼“å­˜æ•°æ®å‘é€åˆ°ç½‘ç»œçš„å¦ä¸€ç«¯</span></span><br><span class="line"><span class="comment"> * 5. clear()</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¯»æ“ä½œé¡ºåº</span></span><br><span class="line"><span class="comment"> * 1. clear()</span></span><br><span class="line"><span class="comment"> * 2. SocketChannel.read(buffer); -&gt; ä»ç½‘ç»œä¸­è¯»å–æ•°æ®</span></span><br><span class="line"><span class="comment"> * 3. buffer.flip() -&gt; é‡ç½®æ¸¸æ ‡</span></span><br><span class="line"><span class="comment"> * 4. buffer.get() -&gt; è¯»å–æ•°æ®</span></span><br><span class="line"><span class="comment"> * 5. buffer.clear()</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBuffer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] temp = <span class="keyword">new</span> <span class="keyword">byte</span>[]&#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å†™å…¥æ•°æ®ä¹‹å‰ ï¼š java.nio.HeapByteBuffer[pos=0 lim=8 cap=8]</span></span><br><span class="line">        <span class="comment">// pos - æ¸¸æ ‡ä½ç½®ï¼Œ lim - é™åˆ¶æ•°é‡ï¼Œ cap - æœ€å¤§å®¹é‡</span></span><br><span class="line">        System.out.println(<span class="string">"å†™å…¥æ•°æ®ä¹‹å‰ ï¼š "</span> + buffer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å†™å…¥å­—èŠ‚æ•°ç»„åˆ°ç¼“å­˜</span></span><br><span class="line">        buffer.put(temp);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å†™å…¥æ•°æ®ä¹‹å ï¼š java.nio.HeapByteBuffer[pos=3 lim=8 cap=8]</span></span><br><span class="line">        <span class="comment">// æ¸¸æ ‡ä¸º3ï¼Œ é™åˆ¶ä¸º8ï¼Œ å®¹é‡ä¸º8ï¼Œé»˜è®¤é™åˆ¶ä¸å®¹é‡ä¸€æ ·å¤§å°</span></span><br><span class="line">        System.out.println(<span class="string">"å†™å…¥æ•°æ®ä¹‹å ï¼š "</span> + buffer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é‡ç½®æ¸¸æ ‡ ï¼Œ lim = pos ;  pos = 0;</span></span><br><span class="line">        buffer.flip();<span class="comment">//æŠŠè¿™è¡Œæ³¨é‡Šæ‰åï¼Œä¸‹é¢çš„å¾ªç¯å°±æ˜¯5æ¬¡äº†ã€‚</span></span><br><span class="line">        <span class="comment">//åœ¨é‡ç½®ä¸€æ¬¡ï¼Œposä¸º0ï¼Œlimï¼ˆå¯è¯»å†™æ“ä½œæœ‰æ•ˆæ•°æ®ä½æ•°ï¼‰ä¸º0ï¼Œgetä¼šæŠ¥é”™ï¼Œä¹Ÿä¸è®©å†™ã€‚è¦å†™è¦clear</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// é‡ç½®æ¸¸æ ‡ä¹‹å ï¼š java.nio.HeapByteBuffer[pos=0 lim=3 cap=8]</span></span><br><span class="line">        <span class="comment">// æ¸¸æ ‡ä¸º0ï¼Œ é™åˆ¶ä¸º3ï¼Œ </span></span><br><span class="line">        System.out.println(<span class="string">"é‡ç½®æ¸¸æ ‡ä¹‹å ï¼š "</span> + buffer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¸…ç©ºBufferï¼Œ pos = 0; lim = cap;</span></span><br><span class="line">        <span class="comment">// buffer.clear();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// get() -&gt; è·å–å½“å‰æ¸¸æ ‡æŒ‡å‘çš„ä½ç½®çš„æ•°æ®ã€‚</span></span><br><span class="line">        <span class="comment">// System.out.println(buffer.get());</span></span><br><span class="line">        <span class="comment">// remainingæ˜¯lim-pos</span></span><br><span class="line">        <span class="comment">/*for(int i = 0; i &lt; buffer.remaining(); i++)&#123;</span></span><br><span class="line"><span class="comment">            // get(int index) -&gt; è·å–æŒ‡å®šä½ç½®çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">            int data = buffer.get(i);</span></span><br><span class="line"><span class="comment">            System.out.println(i + " - " + data);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>AIO</strong> <strong>ç¼–ç¨‹</strong> <em>AsynchronousIO</em>ï¼š å¼‚æ­¥éé˜»å¡çš„ç¼–ç¨‹æ–¹å¼ <ul>
<li>ä¸ <em>NIO</em> ä¸åŒï¼Œå½“è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œåªé¡»ç›´æ¥è°ƒç”¨ <em>API</em> çš„ <em>read</em> æˆ– <em>write</em> æ–¹æ³•å³å¯ã€‚è¿™ä¸¤ç§ æ–¹æ³•å‡ä¸ºå¼‚æ­¥çš„ï¼Œå¯¹äºè¯»æ“ä½œè€Œè¨€ï¼Œå½“æœ‰æµå¯è¯»å–æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†å¯è¯»çš„æµä¼ å…¥ <em>read</em> æ–¹ æ³•çš„ç¼“å†²åŒºï¼Œå¹¶é€šçŸ¥åº”ç”¨ç¨‹åºï¼›å¯¹äºå†™æ“ä½œè€Œè¨€ï¼Œå½“æ“ä½œç³»ç»Ÿå°† <em>write</em> æ–¹æ³•ä¼ é€’çš„æµå†™å…¥å®Œ æ¯•æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¸»åŠ¨é€šçŸ¥åº”ç”¨ç¨‹åºã€‚å³å¯ä»¥ç†è§£ä¸ºï¼Œ<em>read/write</em> æ–¹æ³•éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå®Œæˆåä¼š ä¸»åŠ¨è°ƒç”¨å›è°ƒå‡½æ•°ã€‚</li>
<li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘æ•°æ®ï¼Œé¦–å…ˆæ˜¯OSæ¥æ”¶åˆ°ï¼Œä»–ä¼šå°†æ•°æ®å†™åˆ°bufferé‡Œï¼Œç„¶åé€šçŸ¥åº”ç”¨ç¨‹åºä»£ç ï¼Œæ•°æ®å·²ç»å‡†å¤‡å¥½äº†ï¼Œå¯ä»¥readæ‹¿èµ°äº†ã€‚åº”ç”¨ä»£ç writeæ—¶ï¼Œä¹Ÿä¼šä¸æ•°æ®åŒæ­¥è¿›å…¥OSçš„Bufferé‡Œï¼Œé€šè¿‡åå‘é€šçŸ¥å‘Šè¯‰åº”ç”¨ç¨‹åºå·²ç»å†™å®Œäº†ã€‚bufferæ•°æ®ä¼šè‡ªåŠ¨åœ°åå›ç»™clientã€‚clientä¸serveräº¤äº’å€ŸåŠ©OSå®ç°å¼‚æ­¥æ“ä½œã€‚</li>
<li>åœ¨ <em>JDK1.7</em> ä¸­ï¼Œè¿™éƒ¨åˆ†å†…å®¹è¢«ç§°ä½œ <em>NIO.2</em>ï¼Œä¸»è¦åœ¨ <em>java.nio.channels</em> åŒ…ä¸‹å¢åŠ äº†ä¸‹é¢å››ä¸ªå¼‚æ­¥é€šé“ï¼š <ul>
<li><em>AsynchronousSocketChannel</em> </li>
<li><em>AsynchronousServerSocketChannel</em></li>
<li><em>AsynchronousFileChannel</em> </li>
<li><em>AsynchronousDatagramChannel</em> </li>
</ul>
</li>
<li>å¼‚æ­¥éé˜»å¡ï¼ŒæœåŠ¡å™¨å®ç°æ¨¡å¼ä¸ºä¸€ä¸ªæœ‰æ•ˆè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ï¼Œå®¢æˆ·ç«¯çš„ <em>I/O</em> è¯·æ±‚éƒ½æ˜¯ç”± <em>OS</em> å…ˆå®Œæˆäº†å†é€šçŸ¥æœåŠ¡å™¨åº”ç”¨å»å¯åŠ¨çº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚ </li>
<li><em>AIO</em> æ–¹å¼ä½¿ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒé•¿ï¼ˆé‡æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚ç›¸å†ŒæœåŠ¡å™¨ï¼Œå……åˆ†è°ƒ ç”¨ <em>OS</em> å‚ä¸å¹¶å‘æ“ä½œï¼Œç¼–ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œ<em>JDK7</em> å¼€å§‹æ”¯æŒã€‚ </li>
</ul>
</li>
</ul>
<p><img src="\media\AIOæ‰§è¡Œæµç¨‹å›¾.jpg" alt=""></p>
<p>server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AIOServer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çº¿ç¨‹æ± ï¼Œ æé«˜æœåŠ¡ç«¯æ•ˆç‡ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> ExecutorService service;</span><br><span class="line">    <span class="comment">// çº¿ç¨‹ç»„</span></span><br><span class="line">    <span class="comment">// private AsynchronousChannelGroup group;</span></span><br><span class="line">    <span class="comment">// æœåŠ¡ç«¯é€šé“ï¼Œ é’ˆå¯¹æœåŠ¡å™¨ç«¯å®šä¹‰çš„é€šé“ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> AsynchronousServerSocketChannel serverChannel;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AIOServer</span><span class="params">(<span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line">        init(<span class="number">9999</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"server starting at port : "</span> + port + <span class="string">" ..."</span>);</span><br><span class="line">            <span class="comment">// å®šé•¿çº¿ç¨‹æ± </span></span><br><span class="line">            service = Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line">            <span class="comment">/* ä½¿ç”¨çº¿ç¨‹ç»„</span></span><br><span class="line"><span class="comment">            group = AsynchronousChannelGroup.withThreadPool(service);</span></span><br><span class="line"><span class="comment">            serverChannel = AsynchronousServerSocketChannel.open(group);</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="comment">// å¼€å¯æœåŠ¡ç«¯é€šé“ï¼Œ é€šè¿‡é™æ€æ–¹æ³•åˆ›å»ºçš„ã€‚</span></span><br><span class="line">            serverChannel = AsynchronousServerSocketChannel.open();</span><br><span class="line">            <span class="comment">// ç»‘å®šç›‘å¬ç«¯å£ï¼Œ æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œä½†æ˜¯æœªç›‘å¬è¯·æ±‚ã€‚</span></span><br><span class="line">            serverChannel.bind(<span class="keyword">new</span> InetSocketAddress(port));</span><br><span class="line">            System.out.println(<span class="string">"server started."</span>);</span><br><span class="line">            <span class="comment">// å¼€å§‹ç›‘å¬ </span></span><br><span class="line">            <span class="comment">// accept(T attachment, CompletionHandler&lt;AsynchronousSocketChannel, ? super T&gt;)</span></span><br><span class="line">            <span class="comment">// AIOå¼€å‘ä¸­ï¼Œç›‘å¬æ˜¯ä¸€ä¸ªç±»ä¼¼é€’å½’çš„ç›‘å¬æ“ä½œã€‚æ¯æ¬¡ç›‘å¬åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œéƒ½éœ€è¦å¤„ç†é€»è¾‘å¼€å¯ä¸‹ä¸€æ¬¡çš„ç›‘å¬ã€‚</span></span><br><span class="line">            <span class="comment">// ä¸‹ä¸€æ¬¡çš„ç›‘å¬ï¼Œéœ€è¦æœåŠ¡å™¨çš„èµ„æºç»§ç»­æ”¯æŒã€‚thisä¼ é€’åˆ°AIOServerHandlerçš„completedæ–¹æ³•ä¸­</span></span><br><span class="line">            serverChannel.accept(<span class="keyword">this</span>, <span class="keyword">new</span> AIOServerHandler());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(Integer.MAX_VALUE);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> AIOServer(<span class="number">9999</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ExecutorService <span class="title">getService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> service;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setService</span><span class="params">(ExecutorService service)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.service = service;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AsynchronousServerSocketChannel <span class="title">getServerChannel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> serverChannel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setServerChannel</span><span class="params">(AsynchronousServerSocketChannel serverChannel)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.serverChannel = serverChannel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AIOServerHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AIOServerHandler</span> <span class="keyword">implements</span> <span class="title">CompletionHandler</span>&lt;<span class="title">AsynchronousSocketChannel</span>, <span class="title">AIOServer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸šåŠ¡å¤„ç†é€»è¾‘ï¼Œ å½“è¯·æ±‚åˆ°æ¥åï¼Œç›‘å¬æˆåŠŸï¼Œåº”è¯¥åšä»€ä¹ˆã€‚</span></span><br><span class="line"><span class="comment">     * ä¸€å®šè¦å®ç°çš„é€»è¾‘ï¼š ä¸ºä¸‹ä¸€æ¬¡å®¢æˆ·ç«¯è¯·æ±‚å¼€å¯ç›‘å¬ã€‚acceptæ–¹æ³•è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">     * resultå‚æ•° ï¼š å°±æ˜¯å’Œå®¢æˆ·ç«¯ç›´æ¥å»ºç«‹å…³è”çš„é€šé“ã€‚</span></span><br><span class="line"><span class="comment">     *  æ— è®ºBIOã€NIOã€AIOä¸­ï¼Œä¸€æ—¦è¿æ¥å»ºç«‹ï¼Œä¸¤ç«¯æ˜¯å¹³ç­‰çš„ã€‚</span></span><br><span class="line"><span class="comment">     *  resultä¸­æœ‰é€šé“ä¸­çš„æ‰€æœ‰ç›¸å…³æ•°æ®ã€‚å¦‚ï¼šOSæ“ä½œç³»ç»Ÿå‡†å¤‡å¥½çš„è¯»å–æ•°æ®ç¼“å­˜ï¼Œæˆ–ç­‰å¾…è¿”å›æ•°æ®çš„ç¼“å­˜ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completed</span><span class="params">(AsynchronousSocketChannel result, AIOServer attachment)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¤„ç†ä¸‹ä¸€æ¬¡çš„å®¢æˆ·ç«¯è¯·æ±‚ã€‚ç±»ä¼¼é€’å½’é€»è¾‘ã€‚</span></span><br><span class="line">        attachment.getServerChannel().accept(attachment, <span class="keyword">this</span>);</span><br><span class="line">        doRead(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œ å½“æœåŠ¡ç«¯ä»£ç å‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œåšä»€ä¹ˆäº‹æƒ…ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">failed</span><span class="params">(Throwable exc, AIOServer attachment)</span> </span>&#123;</span><br><span class="line">        exc.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çœŸå®é¡¹ç›®ä¸­ï¼ŒæœåŠ¡å™¨è¿”å›çš„ç»“æœåº”è¯¥æ˜¯æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ•°æ®è®¡ç®—å¾—åˆ°çš„ã€‚ä¸æ˜¯ç­‰å¾…æ§åˆ¶å°è¾“å…¥çš„ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doWrite</span><span class="params">(AsynchronousSocketChannel result)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            System.out.print(<span class="string">"enter message send to client &gt; "</span>);</span><br><span class="line">            Scanner s = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">            String line = s.nextLine();</span><br><span class="line">            buffer.put(line.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">            <span class="comment">// é‡ç‚¹ï¼šå¿…é¡»å¤ä½ï¼Œå¿…é¡»å¤ä½ï¼Œå¿…é¡»å¤ä½</span></span><br><span class="line">            buffer.flip();</span><br><span class="line">            <span class="comment">// writeæ–¹æ³•æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚å…·ä½“å®ç°ç”±OSå®ç°ã€‚ å¯ä»¥å¢åŠ getæ–¹æ³•ï¼Œå®ç°é˜»å¡ï¼Œç­‰å¾…OSçš„å†™æ“ä½œç»“æŸã€‚</span></span><br><span class="line">            result.write(buffer);</span><br><span class="line">            <span class="comment">// result.write(buffer).get(); // è°ƒç”¨getä»£è¡¨æœåŠ¡ç«¯çº¿ç¨‹é˜»å¡ï¼Œç­‰å¾…å†™æ“ä½œå®Œæˆ</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="comment">/* catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">            e.printStackTrace();</span></span><br><span class="line"><span class="comment">        &#125; catch (ExecutionException e) &#123;</span></span><br><span class="line"><span class="comment">            e.printStackTrace();</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doRead</span><span class="params">(<span class="keyword">final</span> AsynchronousSocketChannel channel)</span></span>&#123;</span><br><span class="line">        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * å¼‚æ­¥è¯»æ“ä½œï¼Œ read(Buffer destination, A attachment, </span></span><br><span class="line"><span class="comment">         *                    CompletionHandler&lt;Integer, ? super A&gt; handler)</span></span><br><span class="line"><span class="comment">         * destination - ç›®çš„åœ°ï¼Œ æ˜¯å¤„ç†å®¢æˆ·ç«¯ä¼ é€’æ•°æ®çš„ä¸­è½¬ç¼“å­˜ã€‚ å¯ä»¥ä¸ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="comment">         * attachment - å¤„ç†å®¢æˆ·ç«¯ä¼ é€’æ•°æ®çš„å¯¹è±¡ã€‚ é€šå¸¸ä½¿ç”¨Bufferå¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">         * handler - å¤„ç†é€»è¾‘</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.read(buffer, buffer, <span class="keyword">new</span> CompletionHandler&lt;Integer, ByteBuffer&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * ä¸šåŠ¡é€»è¾‘ï¼Œè¯»å–å®¢æˆ·ç«¯ä¼ è¾“æ•°æ®</span></span><br><span class="line"><span class="comment">             * attachment - åœ¨completedæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼ŒOSå·²ç»å°†å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®å†™å…¥åˆ°Bufferä¸­äº†ã€‚</span></span><br><span class="line"><span class="comment">             *  ä½†æ˜¯æœªå¤ä½ï¼ˆflipï¼‰ã€‚ ä½¿ç”¨å‰ä¸€å®šè¦å¤ä½ã€‚</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completed</span><span class="params">(Integer result, ByteBuffer attachment)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(attachment.capacity());</span><br><span class="line">                    <span class="comment">// å¤ä½</span></span><br><span class="line">                    attachment.flip();</span><br><span class="line">                    System.out.println(<span class="string">"from client : "</span> + <span class="keyword">new</span> String(attachment.array(), <span class="string">"UTF-8"</span>));</span><br><span class="line">                    doWrite(channel);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">failed</span><span class="params">(Throwable exc, ByteBuffer attachment)</span> </span>&#123;</span><br><span class="line">                exc.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>client</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AIOClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AsynchronousSocketChannel channel;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AIOClient</span><span class="params">(String host, <span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line">        init(host, port);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(String host, <span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å¼€å¯é€šé“</span></span><br><span class="line">            channel = AsynchronousSocketChannel.open();</span><br><span class="line">            <span class="comment">// å‘èµ·è¯·æ±‚ï¼Œå»ºç«‹è¿æ¥ã€‚</span></span><br><span class="line">            channel.connect(<span class="keyword">new</span> InetSocketAddress(host, port));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(String line)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            buffer.put(line.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">            buffer.flip();</span><br><span class="line">            channel.write(buffer);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// readæ–¹æ³•æ˜¯å¼‚æ­¥æ–¹æ³•ï¼ŒOSå®ç°çš„ã€‚getæ–¹æ³•æ˜¯ä¸€ä¸ªé˜»å¡æ–¹æ³•ï¼Œä¼šç­‰å¾…OSå¤„ç†ç»“æŸåå†è¿”å›ï¼Œè¦ä¸ä»£ç ä¸ç­‰å¾…ï¼Œä¸‹é¢æ²¡æ•°æ®æ‰“å°å‡ºæ¥ã€‚çœŸå®å¼€å‘å¯ä»¥ä¸åŠ ï¼Œå…¶ç»“æœä¾é OSè‡ªå·±å»ç­‰å¾…ï¼Œæ‹¿åˆ°æ•°æ®å†è¿”å›é€šçŸ¥ï¼Œ</span></span><br><span class="line">            channel.read(buffer).get();</span><br><span class="line">            <span class="comment">// channel.read(dst, attachment, handler);</span></span><br><span class="line">            buffer.flip();</span><br><span class="line">            System.out.println(<span class="string">"from server : "</span> + <span class="keyword">new</span> String(buffer.array(), <span class="string">"UTF-8"</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doDestory</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != channel)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                channel.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AIOClient client = <span class="keyword">new</span> AIOClient(<span class="string">"localhost"</span>, <span class="number">9999</span>);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.print(<span class="string">"enter message send to server &gt; "</span>);</span><br><span class="line">            Scanner s = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">            String line = s.nextLine();</span><br><span class="line">            client.write(line);</span><br><span class="line">            client.read();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            client.doDestory();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆä½“åæœŸï¼ˆNettyï¼‰"><a href="#åˆä½“åæœŸï¼ˆNettyï¼‰" class="headerlink" title="åˆä½“åæœŸï¼ˆNettyï¼‰"></a>åˆä½“åæœŸï¼ˆNettyï¼‰</h3><ul>
<li><p><strong>ç®€ä»‹</strong> </p>
<p>â€‹        <em>Netty</em> æ˜¯ç”± <em>JBOSS</em> æä¾›çš„ä¸€ä¸ª <em>java</em> å¼€æºæ¡†æ¶ã€‚<em>Netty</em> æä¾›å¼‚æ­¥çš„ã€äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ ç¨‹åºæ¡†æ¶å’Œå·¥å…·ï¼Œç”¨ä»¥å¿«é€Ÿå¼€å‘é«˜æ€§èƒ½ã€é«˜å¯é æ€§çš„ç½‘ç»œæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç¨‹åºã€‚ å®ƒæ˜¯å»ºç«‹å†NIOå’ŒAIOåŸºç¡€ä¹‹ä¸Šçš„ã€‚</p>
<p>â€‹        ä¹Ÿå°±æ˜¯è¯´ï¼Œ<em>Netty</em> æ˜¯ä¸€ä¸ªåŸºäº <em>NIO</em> çš„å®¢æˆ·ã€æœåŠ¡å™¨ç«¯ç¼–ç¨‹æ¡†æ¶ï¼Œä½¿ç”¨ <em>Netty</em> å¯ä»¥ç¡®ä¿ä½  å¿«é€Ÿå’Œç®€å•çš„å¼€å‘å‡ºä¸€ä¸ªç½‘ç»œåº”ç”¨ï¼Œä¾‹å¦‚å®ç°äº†æŸç§åè®®çš„å®¢æˆ·ï¼ŒæœåŠ¡ç«¯åº”ç”¨ã€‚<em>Netty</em> ç›¸å½“ ç®€åŒ–å’Œæµçº¿åŒ–äº†ç½‘ç»œåº”ç”¨çš„ç¼–ç¨‹å¼€å‘è¿‡ç¨‹ï¼Œä¾‹å¦‚ï¼Œ<em>TCP</em> å’Œ <em>UDP</em> çš„ <em>socket</em> æœåŠ¡å¼€å‘ã€‚</p>
<p>â€‹        â€œ<em>å¿«é€Ÿ</em>â€<em>å’Œ</em>â€œ<em>ç®€å•</em>â€<em>å¹¶ä¸ç”¨äº§ç”Ÿç»´æŠ¤æ€§æˆ–æ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚</em>Netty<em> æ˜¯ä¸€ä¸ªå¸æ”¶äº†å¤šç§åè®®çš„å® ç°ç»éªŒï¼Œè¿™äº›åè®®åŒ…æ‹¬ </em>FTP,SMTP,HTTP<em>ï¼Œå„ç§äºŒè¿›åˆ¶ï¼Œæ–‡æœ¬åè®®ï¼Œå¹¶ç»è¿‡ç›¸å½“ç²¾å¿ƒè®¾è®¡çš„é¡¹ ç›®ï¼Œæœ€ç»ˆï¼Œ</em>Netty* æˆåŠŸçš„æ‰¾åˆ°äº†ä¸€ç§æ–¹å¼ï¼Œåœ¨ä¿è¯æ˜“äºå¼€å‘çš„åŒæ—¶è¿˜ä¿è¯äº†å…¶åº”ç”¨çš„æ€§èƒ½ï¼Œ ç¨³å®šæ€§å’Œä¼¸ç¼©æ€§ã€‚ </p>
<p>â€‹        <em>Netty</em> ä» <em>4.x</em> ç‰ˆæœ¬å¼€å§‹ï¼Œéœ€è¦ä½¿ç”¨ <em>JDK1.6</em> åŠä»¥ä¸Šç‰ˆæœ¬æä¾›åŸºç¡€æ”¯æ’‘ã€‚ </p>
<p>â€‹        åœ¨è®¾è®¡ä¸Šï¼šé’ˆå¯¹å¤šç§ä¼ è¾“ç±»å‹çš„ç»Ÿä¸€æ¥å£ <em>-</em> é˜»å¡å’Œéé˜»å¡ï¼›ç®€å•ä½†æ›´å¼ºå¤§çš„çº¿ç¨‹æ¨¡å‹ï¼› çœŸæ­£çš„æ— è¿æ¥çš„æ•°æ®æŠ¥å¥—æ¥å­—æ”¯æŒï¼›é“¾æ¥é€»è¾‘æ”¯æŒå¤ç”¨ï¼› </p>
<p>â€‹        åœ¨æ€§èƒ½ä¸Šï¼šæ¯”æ ¸å¿ƒ <em>Java API</em> æ›´å¥½çš„ååé‡ï¼Œè¾ƒä½çš„å»¶æ—¶ï¼›èµ„æºæ¶ˆè€—æ›´å°‘ï¼Œè¿™ä¸ªå¾—ç›Šäº å…±äº«æ± å’Œé‡ç”¨ï¼›å‡å°‘å†…å­˜æ‹·è´ </p>
<p>â€‹        åœ¨å¥å£®æ€§ä¸Šï¼šæ¶ˆé™¤ç”±äºæ…¢ï¼Œå¿«ï¼Œæˆ–é‡è½½è¿æ¥äº§ç”Ÿçš„ <em>OutOfMemoryError</em>ï¼›æ¶ˆé™¤ç»å¸¸å‘ç° åœ¨ <em>NIO</em> åœ¨é«˜é€Ÿç½‘ç»œä¸­çš„åº”ç”¨ä¸­çš„ä¸å…¬å¹³çš„è¯»<em>/</em>å†™æ¯” </p>
<p>â€‹        åœ¨å®‰å…¨ä¸Šï¼šå®Œæ•´çš„ <em>SSL / TLS</em> å’Œ <em>StartTLS</em> çš„æ”¯æŒ </p>
<p>â€‹        ä¸”å·²å¾—åˆ°å¤§é‡å•†ä¸šåº”ç”¨çš„çœŸå®éªŒè¯<em>,</em>å¦‚ï¼š<em>Hadoop</em> é¡¹ç›®çš„ <em>Avro</em>ï¼ˆ<em>RPC</em> æ¡†æ¶ï¼‰ã€<em>Dubbo</em>ã€<em>Dubbox</em>ç­‰ <em>RPC</em> æ¡†æ¶ã€‚ </p>
<p>â€‹        <em>Netty</em> çš„å®˜ç½‘æ˜¯ï¼š<em><span class="exturl" data-url="aHR0cDovL25ldHR5Lmlv" title="http://netty.io">http://netty.io<i class="fa fa-external-link"></i></span></em> </p>
<p>â€‹        æœ‰ ä¸‰ æ–¹ æ ä¾› çš„ ä¸­ æ–‡ ç¿» è¯‘ <em>Netty</em> ç”¨ æˆ· æ‰‹ å†Œ ï¼ˆ å®˜ ç½‘ æ ä¾› æº ä¿¡ æ¯ ï¼‰ï¼š <em><span class="exturl" data-url="aHR0cDovL2lmZXZlLmNvbS9uZXR0eTUtdXNlci1ndWlkZS8=" title="http://ifeve.com/netty5-user-guide/">http://ifeve.com/netty5-user-guide/<i class="fa fa-external-link"></i></span></em></p>
</li>
<li><p><strong>Netty</strong> <strong>æ¶æ„</strong></p>
<p><img src="\media\Nettyæ¶æ„.jpg" alt=""></p>
</li>
<li><p>çº¿ç¨‹æ¨¡å‹ï¼ˆacceptoræ˜¯ä¸€ä¸ªç›‘å¬çº¿ç¨‹ï¼‰</p>
<p><img src="\media\1582184953(1" alt="">.jpg)</p>
<ul>
<li><p><strong>å•çº¿ç¨‹æ¨¡å‹</strong> </p>
<p>â€‹        åœ¨ <em>ServerBootstrap</em> è°ƒç”¨æ–¹æ³• <em>group</em> çš„æ—¶å€™ï¼Œä¼ é€’çš„å‚æ•°æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ç»„ï¼Œä¸”åœ¨æ„é€ çº¿ç¨‹ ç»„çš„æ—¶å€™ï¼Œæ„é€ å‚æ•°ä¸º <em>1</em>ï¼Œè¿™ç§å¼€å‘æ–¹å¼ï¼Œå°±æ˜¯ä¸€ä¸ªå•çº¿ç¨‹æ¨¡å‹ã€‚ ä¸ªäººæœºå¼€å‘æµ‹è¯•ä½¿ç”¨ã€‚ä¸æ¨èã€‚</p>
<p>â€‹        åœ¨å¤„ç†acceptorå’Œrunnable taskçš„çº¿ç¨‹ç»„åˆå¹¶æˆä¸€ä¸ªï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// åˆå§‹åŒ–çº¿ç¨‹ç»„,æ„å»ºçº¿ç¨‹ç»„çš„æ—¶å€™ï¼Œå¦‚æœä¸ä¼ é€’å‚æ•°ï¼Œåˆ™é»˜è®¤æ„å»ºçš„çº¿ç¨‹ç»„çº¿ç¨‹æ•°æ˜¯CPUæ ¸å¿ƒæ•°é‡ã€‚</span><br><span class="line">acceptorGroup = new NioEventLoopGroup(1);</span><br><span class="line">// åˆå§‹åŒ–æœåŠ¡çš„é…ç½®</span><br><span class="line">bootstrap = new ServerBootstrap();</span><br><span class="line">// ç»‘å®šçº¿ç¨‹ç»„</span><br><span class="line">bootstrap.group(acceptorGroup, acceptorGroup);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>å¤šçº¿ç¨‹æ¨¡å‹</strong> </p>
<p>â€‹        åœ¨ <em>ServerBootstrap</em> è°ƒç”¨æ–¹æ³• <em>group</em> çš„æ—¶å€™ï¼Œä¼ é€’çš„å‚æ•°æ˜¯ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹ç»„ã€‚è´Ÿè´£ç›‘å¬ çš„ <em>acceptor</em> çº¿ç¨‹ç»„ï¼Œçº¿ç¨‹æ•°ä¸º <em>1</em>ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‚æ•°ä¸º <em>1</em>ã€‚è´Ÿè´£å¤„ç†å®¢æˆ·ç«¯ä»»åŠ¡çš„çº¿ç¨‹ç»„ï¼Œçº¿ ç¨‹æ•°å¤§äº <em>1</em>ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‚æ•°å¤§äº <em>1</em>ã€‚è¿™ç§å¼€å‘æ–¹å¼ï¼Œå°±æ˜¯å¤šçº¿ç¨‹æ¨¡å‹ã€‚ </p>
<p>â€‹        é•¿è¿æ¥ï¼Œä¸”å®¢æˆ·ç«¯æ•°é‡è¾ƒå°‘ï¼Œè¿æ¥æŒç»­æ—¶é—´è¾ƒé•¿æƒ…å†µä¸‹ä½¿ç”¨ã€‚å¦‚ï¼šä¼ä¸šå†…éƒ¨äº¤æµåº”ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// åˆå§‹åŒ–çº¿ç¨‹ç»„,æ„å»ºçº¿ç¨‹ç»„çš„æ—¶å€™ï¼Œå¦‚æœä¸ä¼ é€’å‚æ•°ï¼Œåˆ™é»˜è®¤æ„å»ºçš„çº¿ç¨‹ç»„çº¿ç¨‹æ•°æ˜¯CPUæ ¸å¿ƒæ•°é‡ã€‚</span><br><span class="line">acceptorGroup = new NioEventLoopGroup(1);</span><br><span class="line">clientGroup = new NioEventLoopGroup(&gt;1);</span><br><span class="line">// åˆå§‹åŒ–æœåŠ¡çš„é…ç½®</span><br><span class="line">bootstrap = new ServerBootstrap();</span><br><span class="line">// ç»‘å®šçº¿ç¨‹ç»„</span><br><span class="line">bootstrap.group(acceptorGroup, clientGroup);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä¸»ä»å¤šçº¿ç¨‹æ¨¡å‹</strong> </p>
<p>â€‹        åœ¨ <em>ServerBootstrap</em> è°ƒç”¨æ–¹æ³• <em>group</em> çš„æ—¶å€™ï¼Œä¼ é€’çš„å‚æ•°æ˜¯ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹ç»„ã€‚è´Ÿè´£ç›‘å¬ çš„ <em>acceptor</em> çº¿ç¨‹ç»„ï¼Œçº¿ç¨‹æ•°å¤§äº <em>1</em>ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‚æ•°å¤§äº <em>1</em>ã€‚è´Ÿè´£å¤„ç†å®¢æˆ·ç«¯ä»»åŠ¡çš„çº¿ç¨‹ç»„ï¼Œ çº¿ç¨‹æ•°å¤§äº <em>1</em>ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‚æ•°å¤§äº <em>1</em>ã€‚è¿™ç§å¼€å‘æ–¹å¼ï¼Œå°±æ˜¯ä¸»ä»å¤šçº¿ç¨‹æ¨¡å‹ã€‚ </p>
<p>â€‹        é•¿è¿æ¥ï¼Œå®¢æˆ·ç«¯æ•°é‡ç›¸å¯¹è¾ƒå¤šï¼Œè¿æ¥æŒç»­æ—¶é—´æ¯”è¾ƒé•¿çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚å¦‚ï¼šå¯¹å¤–æä¾›æœåŠ¡ </p>
<p>çš„ç›¸å†ŒæœåŠ¡å™¨ã€‚ </p>
</li>
</ul>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.netty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>netty-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0.Alpha2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;version&gt;4.1.24.Final&lt;/version&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.netty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>netty-codec-http<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0.Alpha2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;version&gt;4.1.24.Final&lt;/version&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¥æ”¶å¤„ç†å·¥å…· --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jboss.marshalling<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jboss-marshalling-river<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.11.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åºåˆ—åŒ–å¤„ç†å·¥å…· --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jboss.marshalling<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jboss-marshalling-serial<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.11.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç³»ç»Ÿä¿¡æ¯æ”¶é›† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hyperic.sigar<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>com.springsource.org.hyperic.sigar<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.kaazing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sigar.dist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">classifier</span>&gt;</span>distribution<span class="tag">&lt;/<span class="name">classifier</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">type</span>&gt;</span>zip<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å·¥å…·ç±»</p>
<p>GzipUtils</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GzipUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"D:\\3\\1.jpg"</span>);</span><br><span class="line">        <span class="keyword">byte</span>[] temp = <span class="keyword">new</span> <span class="keyword">byte</span>[fis.available()];</span><br><span class="line">        <span class="keyword">int</span> length = fis.read(temp);</span><br><span class="line">        System.out.println(<span class="string">"é•¿åº¦ : "</span> + length);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] zipArray = GzipUtils.zip(temp);</span><br><span class="line">        System.out.println(<span class="string">"å‹ç¼©åçš„é•¿åº¦ : "</span> + zipArray.length);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] unzipArray = GzipUtils.unzip(zipArray);</span><br><span class="line">        System.out.println(<span class="string">"è§£å‹ç¼©åçš„é•¿åº¦ : "</span> + unzipArray.length);</span><br><span class="line"></span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"D:\\3\\101.jpg"</span>);</span><br><span class="line">        fos.write(unzipArray);</span><br><span class="line">        fos.flush();</span><br><span class="line"></span><br><span class="line">        fos.close();</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£å‹ç¼©</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> source æºæ•°æ®ã€‚éœ€è¦è§£å‹çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è§£å‹åçš„æ•°æ®ã€‚ æ¢å¤çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] unzip(<span class="keyword">byte</span>[] source) <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        ByteArrayOutputStream out = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        ByteArrayInputStream in = <span class="keyword">new</span> ByteArrayInputStream(source);</span><br><span class="line">        <span class="comment">// JDKæä¾›çš„ã€‚ ä¸“é—¨ç”¨äºå‹ç¼©ä½¿ç”¨çš„æµå¯¹è±¡ã€‚å¯ä»¥å¤„ç†å­—èŠ‚æ•°ç»„æ•°æ®ã€‚</span></span><br><span class="line">        GZIPInputStream zipIn = <span class="keyword">new</span> GZIPInputStream(in);</span><br><span class="line">        <span class="keyword">byte</span>[] temp = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">256</span>];</span><br><span class="line">        <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((length = zipIn.read(temp, <span class="number">0</span>, temp.length)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            out.write(temp, <span class="number">0</span>, length);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†å­—èŠ‚æ•°ç»„è¾“å‡ºæµä¸­çš„æ•°æ®ï¼Œè½¬æ¢ä¸ºä¸€ä¸ªå­—èŠ‚æ•°ç»„ã€‚</span></span><br><span class="line">        <span class="keyword">byte</span>[] target = out.toByteArray();</span><br><span class="line"></span><br><span class="line">        zipIn.close();</span><br><span class="line">        out.close();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‹ç¼©</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> source æºæ•°æ®ï¼Œéœ€è¦å‹ç¼©çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å‹ç¼©åçš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] zip(<span class="keyword">byte</span>[] source) <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        ByteArrayOutputStream out = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        <span class="comment">// è¾“å‡ºæµï¼ŒJDKæä¾›çš„ï¼Œæä¾›è§£å‹ç¼©åŠŸèƒ½ã€‚</span></span><br><span class="line">        GZIPOutputStream zipOut = <span class="keyword">new</span> GZIPOutputStream(out);</span><br><span class="line">        <span class="comment">// å°†å‹ç¼©ä¿¡æ¯å†™å…¥åˆ°å†…å­˜ã€‚ å†™å…¥çš„è¿‡ç¨‹ä¼šå®ç°è§£å‹ã€‚</span></span><br><span class="line">        zipOut.write(source);</span><br><span class="line">        <span class="comment">// ç»“æŸã€‚</span></span><br><span class="line">        zipOut.finish();</span><br><span class="line">        <span class="keyword">byte</span>[] target = out.toByteArray();</span><br><span class="line"></span><br><span class="line">        zipOut.close();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OSUtils</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OSUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Systemä¿¡æ¯ï¼Œä»jvmè·å–</span></span><br><span class="line">            property();</span><br><span class="line">            System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">            <span class="comment">// cpuä¿¡æ¯</span></span><br><span class="line">            cpu();</span><br><span class="line">            System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">            <span class="comment">// å†…å­˜ä¿¡æ¯</span></span><br><span class="line">            memory();</span><br><span class="line">            System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">            <span class="comment">// æ“ä½œç³»ç»Ÿä¿¡æ¯</span></span><br><span class="line">            os();</span><br><span class="line">            System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">            <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">            who();</span><br><span class="line">            System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">            <span class="comment">// æ–‡ä»¶ç³»ç»Ÿä¿¡æ¯</span></span><br><span class="line">            file();</span><br><span class="line">            System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">            <span class="comment">// ç½‘ç»œä¿¡æ¯</span></span><br><span class="line">            net();</span><br><span class="line">            System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">            <span class="comment">// ä»¥å¤ªç½‘ä¿¡æ¯</span></span><br><span class="line">            ethernet();</span><br><span class="line">            System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">property</span><span class="params">()</span> <span class="keyword">throws</span> UnknownHostException </span>&#123;</span><br><span class="line">        Runtime r = Runtime.getRuntime();</span><br><span class="line">        Properties props = System.getProperties();</span><br><span class="line">        InetAddress addr;</span><br><span class="line">        addr = InetAddress.getLocalHost();</span><br><span class="line">        String ip = addr.getHostAddress();</span><br><span class="line">        Map&lt;String, String&gt; map = System.getenv();</span><br><span class="line">        String userName = map.get(<span class="string">"USERNAME"</span>);<span class="comment">// è·å–ç”¨æˆ·å</span></span><br><span class="line">        String computerName = map.get(<span class="string">"COMPUTERNAME"</span>);<span class="comment">// è·å–è®¡ç®—æœºå</span></span><br><span class="line">        String userDomain = map.get(<span class="string">"USERDOMAIN"</span>);<span class="comment">// è·å–è®¡ç®—æœºåŸŸå</span></span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·å:    "</span> + userName);</span><br><span class="line">        System.out.println(<span class="string">"è®¡ç®—æœºå:    "</span> + computerName);</span><br><span class="line">        System.out.println(<span class="string">"è®¡ç®—æœºåŸŸå:    "</span> + userDomain);</span><br><span class="line">        System.out.println(<span class="string">"æœ¬åœ°ipåœ°å€:    "</span> + ip);</span><br><span class="line">        System.out.println(<span class="string">"æœ¬åœ°ä¸»æœºå:    "</span> + addr.getHostName());</span><br><span class="line">        System.out.println(<span class="string">"JVMå¯ä»¥ä½¿ç”¨çš„æ€»å†…å­˜:    "</span> + r.totalMemory());</span><br><span class="line">        System.out.println(<span class="string">"JVMå¯ä»¥ä½¿ç”¨çš„å‰©ä½™å†…å­˜:    "</span> + r.freeMemory());</span><br><span class="line">        System.out.println(<span class="string">"JVMå¯ä»¥ä½¿ç”¨çš„å¤„ç†å™¨ä¸ªæ•°:    "</span> + r.availableProcessors());</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„è¿è¡Œç¯å¢ƒç‰ˆæœ¬ï¼š    "</span> + props.getProperty(<span class="string">"java.version"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„è¿è¡Œç¯å¢ƒä¾›åº”å•†ï¼š    "</span> + props.getProperty(<span class="string">"java.vendor"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaä¾›åº”å•†çš„URLï¼š    "</span> + props.getProperty(<span class="string">"java.vendor.url"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„å®‰è£…è·¯å¾„ï¼š    "</span> + props.getProperty(<span class="string">"java.home"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„è™šæ‹Ÿæœºè§„èŒƒç‰ˆæœ¬ï¼š    "</span> + props.getProperty(<span class="string">"java.vm.specification.version"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„è™šæ‹Ÿæœºè§„èŒƒä¾›åº”å•†ï¼š    "</span> + props.getProperty(<span class="string">"java.vm.specification.vendor"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„è™šæ‹Ÿæœºè§„èŒƒåç§°ï¼š    "</span> + props.getProperty(<span class="string">"java.vm.specification.name"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„è™šæ‹Ÿæœºå®ç°ç‰ˆæœ¬ï¼š    "</span> + props.getProperty(<span class="string">"java.vm.version"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„è™šæ‹Ÿæœºå®ç°ä¾›åº”å•†ï¼š    "</span> + props.getProperty(<span class="string">"java.vm.vendor"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„è™šæ‹Ÿæœºå®ç°åç§°ï¼š    "</span> + props.getProperty(<span class="string">"java.vm.name"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaè¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒç‰ˆæœ¬ï¼š    "</span> + props.getProperty(<span class="string">"java.specification.version"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaè¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒä¾›åº”å•†ï¼š    "</span> + props.getProperty(<span class="string">"java.specification.vender"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaè¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒåç§°ï¼š    "</span> + props.getProperty(<span class="string">"java.specification.name"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„ç±»æ ¼å¼ç‰ˆæœ¬å·ï¼š    "</span> + props.getProperty(<span class="string">"java.class.version"</span>));</span><br><span class="line">        System.out.println(<span class="string">"Javaçš„ç±»è·¯å¾„ï¼š    "</span> + props.getProperty(<span class="string">"java.class.path"</span>));</span><br><span class="line">        System.out.println(<span class="string">"åŠ è½½åº“æ—¶æœç´¢çš„è·¯å¾„åˆ—è¡¨ï¼š    "</span> + props.getProperty(<span class="string">"java.library.path"</span>));</span><br><span class="line">        System.out.println(<span class="string">"é»˜è®¤çš„ä¸´æ—¶æ–‡ä»¶è·¯å¾„ï¼š    "</span> + props.getProperty(<span class="string">"java.io.tmpdir"</span>));</span><br><span class="line">        System.out.println(<span class="string">"ä¸€ä¸ªæˆ–å¤šä¸ªæ‰©å±•ç›®å½•çš„è·¯å¾„ï¼š    "</span> + props.getProperty(<span class="string">"java.ext.dirs"</span>));</span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿçš„åç§°ï¼š    "</span> + props.getProperty(<span class="string">"os.name"</span>));</span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿçš„æ„æ¶ï¼š    "</span> + props.getProperty(<span class="string">"os.arch"</span>));</span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ï¼š    "</span> + props.getProperty(<span class="string">"os.version"</span>));</span><br><span class="line">        System.out.println(<span class="string">"æ–‡ä»¶åˆ†éš”ç¬¦ï¼š    "</span> + props.getProperty(<span class="string">"file.separator"</span>));</span><br><span class="line">        System.out.println(<span class="string">"è·¯å¾„åˆ†éš”ç¬¦ï¼š    "</span> + props.getProperty(<span class="string">"path.separator"</span>));</span><br><span class="line">        System.out.println(<span class="string">"è¡Œåˆ†éš”ç¬¦ï¼š    "</span> + props.getProperty(<span class="string">"line.separator"</span>));</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·çš„è´¦æˆ·åç§°ï¼š    "</span> + props.getProperty(<span class="string">"user.name"</span>));</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·çš„ä¸»ç›®å½•ï¼š    "</span> + props.getProperty(<span class="string">"user.home"</span>));</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·çš„å½“å‰å·¥ä½œç›®å½•ï¼š    "</span> + props.getProperty(<span class="string">"user.dir"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">memory</span><span class="params">()</span> <span class="keyword">throws</span> SigarException </span>&#123;</span><br><span class="line">        Sigar sigar = <span class="keyword">new</span> Sigar();</span><br><span class="line">        Mem mem = sigar.getMem();</span><br><span class="line">        <span class="comment">// å†…å­˜æ€»é‡</span></span><br><span class="line">        System.out.println(<span class="string">"å†…å­˜æ€»é‡:    "</span> + mem.getTotal() / <span class="number">1024L</span> + <span class="string">"K av"</span>);</span><br><span class="line">        <span class="comment">// å½“å‰å†…å­˜ä½¿ç”¨é‡</span></span><br><span class="line">        System.out.println(<span class="string">"å½“å‰å†…å­˜ä½¿ç”¨é‡:    "</span> + mem.getUsed() / <span class="number">1024L</span> + <span class="string">"K used"</span>);</span><br><span class="line">        <span class="comment">// å½“å‰å†…å­˜å‰©ä½™é‡</span></span><br><span class="line">        System.out.println(<span class="string">"å½“å‰å†…å­˜å‰©ä½™é‡:    "</span> + mem.getFree() / <span class="number">1024L</span> + <span class="string">"K free"</span>);</span><br><span class="line">        Swap swap = sigar.getSwap();</span><br><span class="line">        <span class="comment">// äº¤æ¢åŒºæ€»é‡</span></span><br><span class="line">        System.out.println(<span class="string">"äº¤æ¢åŒºæ€»é‡:    "</span> + swap.getTotal() / <span class="number">1024L</span> + <span class="string">"K av"</span>);</span><br><span class="line">        <span class="comment">// å½“å‰äº¤æ¢åŒºä½¿ç”¨é‡</span></span><br><span class="line">        System.out.println(<span class="string">"å½“å‰äº¤æ¢åŒºä½¿ç”¨é‡:    "</span> + swap.getUsed() / <span class="number">1024L</span> + <span class="string">"K used"</span>);</span><br><span class="line">        <span class="comment">// å½“å‰äº¤æ¢åŒºå‰©ä½™é‡</span></span><br><span class="line">        System.out.println(<span class="string">"å½“å‰äº¤æ¢åŒºå‰©ä½™é‡:    "</span> + swap.getFree() / <span class="number">1024L</span> + <span class="string">"K free"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">cpu</span><span class="params">()</span> <span class="keyword">throws</span> SigarException </span>&#123;</span><br><span class="line">        Sigar sigar = <span class="keyword">new</span> Sigar();</span><br><span class="line">        CpuInfo infos[] = sigar.getCpuInfoList();</span><br><span class="line">        CpuPerc cpuList[] = <span class="keyword">null</span>;</span><br><span class="line">        cpuList = sigar.getCpuPercList();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; infos.length; i++) &#123;<span class="comment">// ä¸ç®¡æ˜¯å•å—CPUè¿˜æ˜¯å¤šCPUéƒ½é€‚ç”¨</span></span><br><span class="line">            CpuInfo info = infos[i];</span><br><span class="line">            System.out.println(<span class="string">"ç¬¬"</span> + (i + <span class="number">1</span>) + <span class="string">"å—CPUä¿¡æ¯"</span>);</span><br><span class="line">            System.out.println(<span class="string">"CPUçš„æ€»é‡MHz:    "</span> + info.getMhz());<span class="comment">// CPUçš„æ€»é‡MHz</span></span><br><span class="line">            System.out.println(<span class="string">"CPUç”Ÿäº§å•†:    "</span> + info.getVendor());<span class="comment">// è·å¾—CPUçš„å–ä¸»ï¼Œå¦‚ï¼šIntel</span></span><br><span class="line">            System.out.println(<span class="string">"CPUç±»åˆ«:    "</span> + info.getModel());<span class="comment">// è·å¾—CPUçš„ç±»åˆ«ï¼Œå¦‚ï¼šCeleron</span></span><br><span class="line">            System.out.println(<span class="string">"CPUç¼“å­˜æ•°é‡:    "</span> + info.getCacheSize());<span class="comment">// ç¼“å†²å­˜å‚¨å™¨æ•°é‡</span></span><br><span class="line">            printCpuPerc(cpuList[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printCpuPerc</span><span class="params">(CpuPerc cpu)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"CPUç”¨æˆ·ä½¿ç”¨ç‡:    "</span> + CpuPerc.format(cpu.getUser()));<span class="comment">// ç”¨æˆ·ä½¿ç”¨ç‡</span></span><br><span class="line">        System.out.println(<span class="string">"CPUç³»ç»Ÿä½¿ç”¨ç‡:    "</span> + CpuPerc.format(cpu.getSys()));<span class="comment">// ç³»ç»Ÿä½¿ç”¨ç‡</span></span><br><span class="line">        System.out.println(<span class="string">"CPUå½“å‰ç­‰å¾…ç‡:    "</span> + CpuPerc.format(cpu.getWait()));<span class="comment">// å½“å‰ç­‰å¾…ç‡</span></span><br><span class="line">        System.out.println(<span class="string">"CPUå½“å‰é”™è¯¯ç‡:    "</span> + CpuPerc.format(cpu.getNice()));<span class="comment">//</span></span><br><span class="line">        System.out.println(<span class="string">"CPUå½“å‰ç©ºé—²ç‡:    "</span> + CpuPerc.format(cpu.getIdle()));<span class="comment">// å½“å‰ç©ºé—²ç‡</span></span><br><span class="line">        System.out.println(<span class="string">"CPUæ€»çš„ä½¿ç”¨ç‡:    "</span> + CpuPerc.format(cpu.getCombined()));<span class="comment">// æ€»çš„ä½¿ç”¨ç‡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">os</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        OperatingSystem OS = OperatingSystem.getInstance();</span><br><span class="line">        <span class="comment">// æ“ä½œç³»ç»Ÿå†…æ ¸ç±»å‹å¦‚ï¼š 386ã€486ã€586ç­‰x86</span></span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿ:    "</span> + OS.getArch());</span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»ŸCpuEndian():    "</span> + OS.getCpuEndian());<span class="comment">//</span></span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»ŸDataModel():    "</span> + OS.getDataModel());<span class="comment">//</span></span><br><span class="line">        <span class="comment">// ç³»ç»Ÿæè¿°</span></span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿçš„æè¿°:    "</span> + OS.getDescription());</span><br><span class="line">        <span class="comment">// æ“ä½œç³»ç»Ÿç±»å‹</span></span><br><span class="line">        <span class="comment">// System.out.println("OS.getName():    " + OS.getName());</span></span><br><span class="line">        <span class="comment">// System.out.println("OS.getPatchLevel():    " + OS.getPatchLevel());//</span></span><br><span class="line">        <span class="comment">// æ“ä½œç³»ç»Ÿçš„å–ä¸»</span></span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿçš„å–ä¸»:    "</span> + OS.getVendor());</span><br><span class="line">        <span class="comment">// å–ä¸»åç§°</span></span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿçš„å–ä¸»å:    "</span> + OS.getVendorCodeName());</span><br><span class="line">        <span class="comment">// æ“ä½œç³»ç»Ÿåç§°</span></span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿåç§°:    "</span> + OS.getVendorName());</span><br><span class="line">        <span class="comment">// æ“ä½œç³»ç»Ÿå–ä¸»ç±»å‹</span></span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿå–ä¸»ç±»å‹:    "</span> + OS.getVendorVersion());</span><br><span class="line">        <span class="comment">// æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬å·</span></span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬å·:    "</span> + OS.getVersion());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">who</span><span class="params">()</span> <span class="keyword">throws</span> SigarException </span>&#123;</span><br><span class="line">        Sigar sigar = <span class="keyword">new</span> Sigar();</span><br><span class="line">        Who who[] = sigar.getWhoList();</span><br><span class="line">        <span class="keyword">if</span> (who != <span class="keyword">null</span> &amp;&amp; who.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; who.length; i++) &#123;</span><br><span class="line">                <span class="comment">// System.out.println("å½“å‰ç³»ç»Ÿè¿›ç¨‹è¡¨ä¸­çš„ç”¨æˆ·å" + String.valueOf(i));</span></span><br><span class="line">                Who _who = who[i];</span><br><span class="line">                System.out.println(<span class="string">"ç”¨æˆ·æ§åˆ¶å°:    "</span> + _who.getDevice());</span><br><span class="line">                System.out.println(<span class="string">"ç”¨æˆ·host:    "</span> + _who.getHost());</span><br><span class="line">                <span class="comment">// System.out.println("getTime():    " + _who.getTime());</span></span><br><span class="line">                <span class="comment">// å½“å‰ç³»ç»Ÿè¿›ç¨‹è¡¨ä¸­çš„ç”¨æˆ·å</span></span><br><span class="line">                System.out.println(<span class="string">"å½“å‰ç³»ç»Ÿè¿›ç¨‹è¡¨ä¸­çš„ç”¨æˆ·å:    "</span> + _who.getUser());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">file</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Sigar sigar = <span class="keyword">new</span> Sigar();</span><br><span class="line">        FileSystem fslist[] = sigar.getFileSystemList();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; fslist.length; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">"åˆ†åŒºçš„ç›˜ç¬¦åç§°"</span> + i);</span><br><span class="line">                FileSystem fs = fslist[i];</span><br><span class="line">                <span class="comment">// åˆ†åŒºçš„ç›˜ç¬¦åç§°</span></span><br><span class="line">                System.out.println(<span class="string">"ç›˜ç¬¦åç§°:    "</span> + fs.getDevName());</span><br><span class="line">                <span class="comment">// åˆ†åŒºçš„ç›˜ç¬¦åç§°</span></span><br><span class="line">                System.out.println(<span class="string">"ç›˜ç¬¦è·¯å¾„:    "</span> + fs.getDirName());</span><br><span class="line">                System.out.println(<span class="string">"ç›˜ç¬¦æ ‡å¿—:    "</span> + fs.getFlags());<span class="comment">//</span></span><br><span class="line">                <span class="comment">// æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œæ¯”å¦‚ FAT32ã€NTFS</span></span><br><span class="line">                System.out.println(<span class="string">"ç›˜ç¬¦ç±»å‹:    "</span> + fs.getSysTypeName());</span><br><span class="line">                <span class="comment">// æ–‡ä»¶ç³»ç»Ÿç±»å‹åï¼Œæ¯”å¦‚æœ¬åœ°ç¡¬ç›˜ã€å…‰é©±ã€ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿç­‰</span></span><br><span class="line">                System.out.println(<span class="string">"ç›˜ç¬¦ç±»å‹å:    "</span> + fs.getTypeName());</span><br><span class="line">                <span class="comment">// æ–‡ä»¶ç³»ç»Ÿç±»å‹</span></span><br><span class="line">                System.out.println(<span class="string">"ç›˜ç¬¦æ–‡ä»¶ç³»ç»Ÿç±»å‹:    "</span> + fs.getType());</span><br><span class="line">                FileSystemUsage usage = <span class="keyword">null</span>;</span><br><span class="line">                usage = sigar.getFileSystemUsage(fs.getDirName());</span><br><span class="line">                <span class="keyword">switch</span> (fs.getType()) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">// TYPE_UNKNOWN ï¼šæœªçŸ¥</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">// TYPE_NONE</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">// TYPE_LOCAL_DISK : æœ¬åœ°ç¡¬ç›˜</span></span><br><span class="line">                        <span class="comment">// æ–‡ä»¶ç³»ç»Ÿæ€»å¤§å°</span></span><br><span class="line">                        System.out.println(fs.getDevName() + <span class="string">"æ€»å¤§å°:    "</span> + usage.getTotal() + <span class="string">"KB"</span>);</span><br><span class="line">                        <span class="comment">// æ–‡ä»¶ç³»ç»Ÿå‰©ä½™å¤§å°</span></span><br><span class="line">                        System.out.println(fs.getDevName() + <span class="string">"å‰©ä½™å¤§å°:    "</span> + usage.getFree() + <span class="string">"KB"</span>);</span><br><span class="line">                        <span class="comment">// æ–‡ä»¶ç³»ç»Ÿå¯ç”¨å¤§å°</span></span><br><span class="line">                        System.out.println(fs.getDevName() + <span class="string">"å¯ç”¨å¤§å°:    "</span> + usage.getAvail() + <span class="string">"KB"</span>);</span><br><span class="line">                        <span class="comment">// æ–‡ä»¶ç³»ç»Ÿå·²ç»ä½¿ç”¨é‡</span></span><br><span class="line">                        System.out.println(fs.getDevName() + <span class="string">"å·²ç»ä½¿ç”¨é‡:    "</span> + usage.getUsed() + <span class="string">"KB"</span>);</span><br><span class="line">                        <span class="keyword">double</span> usePercent = usage.getUsePercent() * <span class="number">100</span>D;</span><br><span class="line">                        <span class="comment">// æ–‡ä»¶ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡</span></span><br><span class="line">                        System.out.println(fs.getDevName() + <span class="string">"èµ„æºçš„åˆ©ç”¨ç‡:    "</span> + usePercent + <span class="string">"%"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// TYPE_NETWORK ï¼šç½‘ç»œ</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">4</span>:<span class="comment">// TYPE_RAM_DISK ï¼šé—ªå­˜</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">5</span>:<span class="comment">// TYPE_CDROM ï¼šå…‰é©±</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">6</span>:<span class="comment">// TYPE_SWAP ï¼šé¡µé¢äº¤æ¢</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(fs.getDevName() + <span class="string">"è¯»å‡ºï¼š    "</span> + usage.getDiskReads());</span><br><span class="line">                System.out.println(fs.getDevName() + <span class="string">"å†™å…¥ï¼š    "</span> + usage.getDiskWrites());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">net</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Sigar sigar = <span class="keyword">new</span> Sigar();</span><br><span class="line">        String ifNames[] = sigar.getNetInterfaceList();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ifNames.length; i++) &#123;</span><br><span class="line">            String name = ifNames[i];</span><br><span class="line">            NetInterfaceConfig ifconfig = sigar.getNetInterfaceConfig(name);</span><br><span class="line">            System.out.println(<span class="string">"ç½‘ç»œè®¾å¤‡å:    "</span> + name);<span class="comment">// ç½‘ç»œè®¾å¤‡å</span></span><br><span class="line">            System.out.println(<span class="string">"IPåœ°å€:    "</span> + ifconfig.getAddress());<span class="comment">// IPåœ°å€</span></span><br><span class="line">            System.out.println(<span class="string">"å­ç½‘æ©ç :    "</span> + ifconfig.getNetmask());<span class="comment">// å­ç½‘æ©ç </span></span><br><span class="line">            <span class="keyword">if</span> ((ifconfig.getFlags() &amp; <span class="number">1L</span>) &lt;= <span class="number">0L</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">"!IFF_UP...skipping getNetInterfaceStat"</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            NetInterfaceStat ifstat = sigar.getNetInterfaceStat(name);</span><br><span class="line">            System.out.println(name + <span class="string">"æ¥æ”¶çš„æ€»åŒ…è£¹æ•°:"</span> + ifstat.getRxPackets());<span class="comment">// æ¥æ”¶çš„æ€»åŒ…è£¹æ•°</span></span><br><span class="line">            System.out.println(name + <span class="string">"å‘é€çš„æ€»åŒ…è£¹æ•°:"</span> + ifstat.getTxPackets());<span class="comment">// å‘é€çš„æ€»åŒ…è£¹æ•°</span></span><br><span class="line">            System.out.println(name + <span class="string">"æ¥æ”¶åˆ°çš„æ€»å­—èŠ‚æ•°:"</span> + ifstat.getRxBytes());<span class="comment">// æ¥æ”¶åˆ°çš„æ€»å­—èŠ‚æ•°</span></span><br><span class="line">            System.out.println(name + <span class="string">"å‘é€çš„æ€»å­—èŠ‚æ•°:"</span> + ifstat.getTxBytes());<span class="comment">// å‘é€çš„æ€»å­—èŠ‚æ•°</span></span><br><span class="line">            System.out.println(name + <span class="string">"æ¥æ”¶åˆ°çš„é”™è¯¯åŒ…æ•°:"</span> + ifstat.getRxErrors());<span class="comment">// æ¥æ”¶åˆ°çš„é”™è¯¯åŒ…æ•°</span></span><br><span class="line">            System.out.println(name + <span class="string">"å‘é€æ•°æ®åŒ…æ—¶çš„é”™è¯¯æ•°:"</span> + ifstat.getTxErrors());<span class="comment">// å‘é€æ•°æ®åŒ…æ—¶çš„é”™è¯¯æ•°</span></span><br><span class="line">            System.out.println(name + <span class="string">"æ¥æ”¶æ—¶ä¸¢å¼ƒçš„åŒ…æ•°:"</span> + ifstat.getRxDropped());<span class="comment">// æ¥æ”¶æ—¶ä¸¢å¼ƒçš„åŒ…æ•°</span></span><br><span class="line">            System.out.println(name + <span class="string">"å‘é€æ—¶ä¸¢å¼ƒçš„åŒ…æ•°:"</span> + ifstat.getTxDropped());<span class="comment">// å‘é€æ—¶ä¸¢å¼ƒçš„åŒ…æ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ethernet</span><span class="params">()</span> <span class="keyword">throws</span> SigarException </span>&#123;</span><br><span class="line">        Sigar sigar = <span class="keyword">null</span>;</span><br><span class="line">        sigar = <span class="keyword">new</span> Sigar();</span><br><span class="line">        String[] ifaces = sigar.getNetInterfaceList();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ifaces.length; i++) &#123;</span><br><span class="line">            NetInterfaceConfig cfg = sigar.getNetInterfaceConfig(ifaces[i]);</span><br><span class="line">            <span class="keyword">if</span> (NetFlags.LOOPBACK_ADDRESS.equals(cfg.getAddress()) || (cfg.getFlags() &amp; NetFlags.IFF_LOOPBACK) != <span class="number">0</span></span><br><span class="line">                    || NetFlags.NULL_HWADDR.equals(cfg.getHwaddr())) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(cfg.getName() + <span class="string">"IPåœ°å€:"</span> + cfg.getAddress());<span class="comment">// IPåœ°å€</span></span><br><span class="line">            System.out.println(cfg.getName() + <span class="string">"ç½‘å…³å¹¿æ’­åœ°å€:"</span> + cfg.getBroadcast());<span class="comment">// ç½‘å…³å¹¿æ’­åœ°å€</span></span><br><span class="line">            System.out.println(cfg.getName() + <span class="string">"ç½‘å¡MACåœ°å€:"</span> + cfg.getHwaddr());<span class="comment">// ç½‘å¡MACåœ°å€</span></span><br><span class="line">            System.out.println(cfg.getName() + <span class="string">"å­ç½‘æ©ç :"</span> + cfg.getNetmask());<span class="comment">// å­ç½‘æ©ç </span></span><br><span class="line">            System.out.println(cfg.getName() + <span class="string">"ç½‘å¡æè¿°ä¿¡æ¯:"</span> + cfg.getDescription());<span class="comment">// ç½‘å¡æè¿°ä¿¡æ¯</span></span><br><span class="line">            System.out.println(cfg.getName() + <span class="string">"ç½‘å¡ç±»å‹"</span> + cfg.getType());<span class="comment">//</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SerializableFactory4Marshalling</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SerializableFactory4Marshalling</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºJboss Marshallingè§£ç å™¨MarshallingDecoder</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> MarshallingDecoder</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MarshallingDecoder <span class="title">buildMarshallingDecoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//é¦–å…ˆé€šè¿‡Marshallingå·¥å…·ç±»çš„ç²¾é€šæ–¹æ³•è·å–Marshallingå®ä¾‹å¯¹è±¡ å‚æ•°serialæ ‡è¯†åˆ›å»ºçš„æ˜¯javaåºåˆ—åŒ–å·¥å‚å¯¹è±¡ã€‚</span></span><br><span class="line">        <span class="comment">//jboss-marshalling-serial åŒ…æä¾›</span></span><br><span class="line">        <span class="keyword">final</span> MarshallerFactory marshallerFactory = Marshalling.getProvidedMarshallerFactory(<span class="string">"serial"</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºäº†MarshallingConfigurationå¯¹è±¡ï¼Œé…ç½®äº†ç‰ˆæœ¬å·ä¸º5 </span></span><br><span class="line">        <span class="keyword">final</span> MarshallingConfiguration configuration = <span class="keyword">new</span> MarshallingConfiguration();</span><br><span class="line">        <span class="comment">// åºåˆ—åŒ–ç‰ˆæœ¬ã€‚åªè¦ä½¿ç”¨JDK5ä»¥ä¸Šç‰ˆæœ¬ï¼Œversionåªèƒ½å®šä¹‰ä¸º5ã€‚</span></span><br><span class="line">        configuration.setVersion(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//æ ¹æ®marshallerFactoryå’Œconfigurationåˆ›å»ºprovider</span></span><br><span class="line">        UnmarshallerProvider provider = <span class="keyword">new</span> DefaultUnmarshallerProvider(marshallerFactory, configuration);</span><br><span class="line">        <span class="comment">//æ„å»ºNettyçš„MarshallingDecoderå¯¹è±¡ï¼Œä¿©ä¸ªå‚æ•°åˆ†åˆ«ä¸ºproviderå’Œå•ä¸ªæ¶ˆæ¯åºåˆ—åŒ–åçš„æœ€å¤§é•¿åº¦</span></span><br><span class="line">        MarshallingDecoder decoder = <span class="keyword">new</span> MarshallingDecoder(provider, <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> decoder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºJboss Marshallingç¼–ç å™¨MarshallingEncoder</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> MarshallingEncoder</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MarshallingEncoder <span class="title">buildMarshallingEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> MarshallerFactory marshallerFactory = Marshalling.getProvidedMarshallerFactory(<span class="string">"serial"</span>);</span><br><span class="line">        <span class="keyword">final</span> MarshallingConfiguration configuration = <span class="keyword">new</span> MarshallingConfiguration();</span><br><span class="line">        configuration.setVersion(<span class="number">5</span>);</span><br><span class="line">        MarshallerProvider provider = <span class="keyword">new</span> DefaultMarshallerProvider(marshallerFactory, configuration);</span><br><span class="line">        <span class="comment">//æ„å»ºNettyçš„MarshallingEncoderå¯¹è±¡ï¼ŒMarshallingEncoderç”¨äºå®ç°åºåˆ—åŒ–æ¥å£çš„POJOå¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ•°ç»„</span></span><br><span class="line">        MarshallingEncoder encoder = <span class="keyword">new</span> MarshallingEncoder(provider);</span><br><span class="line">        <span class="keyword">return</span> encoder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HeatbeatMessage</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeatbeatMessage</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">2827219147304706826L</span>;</span><br><span class="line">    <span class="keyword">private</span> String ip;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; cpuMsgMap;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; memMsgMap;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; fileSysMsgMap;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"HeatbeatMessage [\nip="</span> + ip </span><br><span class="line">                + <span class="string">", \ncpuMsgMap="</span> + cpuMsgMap </span><br><span class="line">                + <span class="string">", \nmemMsgMap="</span> + memMsgMap</span><br><span class="line">                + <span class="string">", \nfileSysMsgMap="</span> + fileSysMsgMap + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getIp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ip;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIp</span><span class="params">(String ip)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ip = ip;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getCpuMsgMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cpuMsgMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCpuMsgMap</span><span class="params">(Map&lt;String, Object&gt; cpuMsgMap)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cpuMsgMap = cpuMsgMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMemMsgMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> memMsgMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMemMsgMap</span><span class="params">(Map&lt;String, Object&gt; memMsgMap)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.memMsgMap = memMsgMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getFileSysMsgMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fileSysMsgMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFileSysMsgMap</span><span class="params">(Map&lt;String, Object&gt; fileSysMsgMap)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fileSysMsgMap = fileSysMsgMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RequestMessage</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestMessage</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">7084843947860990140L</span>;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] attachment;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"RequestMessage [id="</span> + id + <span class="string">", message="</span> + message + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RequestMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RequestMessage</span><span class="params">(Long id, String message, <span class="keyword">byte</span>[] attachment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">        <span class="keyword">this</span>.attachment = attachment;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] getAttachment() &#123;</span><br><span class="line">        <span class="keyword">return</span> attachment;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAttachment</span><span class="params">(<span class="keyword">byte</span>[] attachment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.attachment = attachment;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ResponseMessage</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseMessage</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">8134313953478922076L</span>;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ResponseMessage [id="</span> + id + <span class="string">", message="</span> + message + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ResponseMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ResponseMessage</span><span class="params">(Long id, String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>serverç«¯å¼€å‘ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. åŒçº¿ç¨‹ç»„</span></span><br><span class="line"><span class="comment"> * 2. Bootstrapé…ç½®å¯åŠ¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * 3. æ³¨å†Œä¸šåŠ¡å¤„ç†Handler</span></span><br><span class="line"><span class="comment"> * 4. ç»‘å®šæœåŠ¡ç›‘å¬ç«¯å£å¹¶å¯åŠ¨æœåŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server4HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬çº¿ç¨‹ç»„ï¼Œç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">private</span> EventLoopGroup acceptorGroup = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// å¤„ç†å®¢æˆ·ç«¯ç›¸å…³æ“ä½œçº¿ç¨‹ç»„ï¼Œè´Ÿè´£å¤„ç†ä¸å®¢æˆ·ç«¯çš„æ•°æ®é€šè®¯</span></span><br><span class="line">    <span class="keyword">private</span> EventLoopGroup clientGroup = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// æœåŠ¡ç«¯å¯åŠ¨ç›¸å…³é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> ServerBootstrap bootstrap = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Server4HelloWorld</span><span class="params">()</span></span>&#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–çº¿ç¨‹ç»„,æ„å»ºçº¿ç¨‹ç»„çš„æ—¶å€™ï¼Œå¦‚æœä¸ä¼ é€’å‚æ•°ï¼Œåˆ™é»˜è®¤æ„å»ºçš„çº¿ç¨‹ç»„çº¿ç¨‹æ•°æ˜¯CPUæ ¸å¿ƒæ•°é‡ã€‚</span></span><br><span class="line">        acceptorGroup = <span class="keyword">new</span> NioEventLoopGroup();    <span class="comment">//ç›‘å¬çº¿ç¨‹ç»„</span></span><br><span class="line">        clientGroup = <span class="keyword">new</span> NioEventLoopGroup();        <span class="comment">//å¤„ç†å®¢æˆ·ç«¯çº¿ç¨‹ç»„</span></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æœåŠ¡çš„é…ç½®</span></span><br><span class="line">        bootstrap = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">        <span class="comment">// ç»‘å®šçº¿ç¨‹ç»„</span></span><br><span class="line">        bootstrap.group(acceptorGroup, clientGroup);</span><br><span class="line">        <span class="comment">// è®¾å®šé€šè®¯æ¨¡å¼ä¸ºNIOï¼Œ åŒæ­¥éé˜»å¡</span></span><br><span class="line">        bootstrap.channel(NioServerSocketChannel.class);</span><br><span class="line">        <span class="comment">// è®¾å®šç¼“å†²åŒºå¤§å°ï¼Œ ç¼“å­˜åŒºçš„å•ä½æ˜¯å­—èŠ‚ã€‚</span></span><br><span class="line">        bootstrap.option(ChannelOption.SO_BACKLOG, <span class="number">1024</span>);</span><br><span class="line">        <span class="comment">// SO_SNDBUFå‘é€ç¼“å†²åŒºï¼ŒSO_RCVBUFæ¥æ”¶ç¼“å†²åŒºï¼ŒSO_KEEPALIVEå¼€å¯å¿ƒè·³ç›‘æµ‹ï¼ˆä¿è¯è¿æ¥æœ‰æ•ˆï¼‰</span></span><br><span class="line">        bootstrap.option(ChannelOption.SO_SNDBUF, <span class="number">16</span>*<span class="number">1024</span>)</span><br><span class="line">            .option(ChannelOption.SO_RCVBUF, <span class="number">16</span>*<span class="number">1024</span>)</span><br><span class="line">            .option(ChannelOption.SO_KEEPALIVE, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›‘å¬å¤„ç†é€»è¾‘ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> port ç›‘å¬ç«¯å£ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> acceptorHandlers å¤„ç†å™¨ï¼Œ å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doAccept</span><span class="params">(<span class="keyword">int</span> port, <span class="keyword">final</span> ChannelHandler... acceptorHandlers)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * childHandleræ˜¯æœåŠ¡çš„Bootstrapç‹¬æœ‰çš„æ–¹æ³•ã€‚æ˜¯ç”¨äºæä¾›å¤„ç†å¯¹è±¡çš„ã€‚</span></span><br><span class="line"><span class="comment">         * å¯ä»¥ä¸€æ¬¡æ€§å¢åŠ è‹¥å¹²ä¸ªå¤„ç†é€»è¾‘ã€‚æ˜¯ç±»ä¼¼è´£ä»»é“¾æ¨¡å¼çš„å¤„ç†æ–¹å¼ã€‚</span></span><br><span class="line"><span class="comment">         * å¢åŠ Aï¼ŒBä¸¤ä¸ªå¤„ç†é€»è¾‘ï¼Œåœ¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®çš„æ—¶å€™ï¼Œæ ¹æ®A-ã€‹Bé¡ºåºä¾æ¬¡å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">         * </span></span><br><span class="line"><span class="comment">         * ChannelInitializer - ç”¨äºæä¾›å¤„ç†å™¨çš„ä¸€ä¸ªæ¨¡å‹å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">         *  å…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼ŒinitChannelæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">         *   æ–¹æ³•æ˜¯ç”¨äºåˆå§‹åŒ–å¤„ç†é€»è¾‘è´£ä»»é“¾æ¡çš„ã€‚</span></span><br><span class="line"><span class="comment">         *   å¯ä»¥ä¿è¯æœåŠ¡ç«¯çš„Bootstrapåªåˆå§‹åŒ–ä¸€æ¬¡å¤„ç†å™¨ï¼Œå°½é‡æä¾›å¤„ç†é€»è¾‘çš„é‡ç”¨ã€‚</span></span><br><span class="line"><span class="comment">         *   é¿å…åå¤çš„åˆ›å»ºå¤„ç†å™¨å¯¹è±¡ã€‚èŠ‚çº¦èµ„æºå¼€é”€ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        bootstrap.childHandler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                ch.pipeline().addLast(acceptorHandlers);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// bindæ–¹æ³• - ç»‘å®šç›‘å¬ç«¯å£çš„ã€‚ServerBootstrapå¯ä»¥ç»‘å®šå¤šä¸ªç›‘å¬ç«¯å£ã€‚ å¤šæ¬¡è°ƒç”¨bindæ–¹æ³•å³å¯</span></span><br><span class="line">        <span class="comment">// sync - å¼€å§‹ç›‘å¬é€»è¾‘ã€‚ è¿”å›ä¸€ä¸ªChannelFutureã€‚ è¿”å›ç»“æœä»£è¡¨çš„æ˜¯ç›‘å¬æˆåŠŸåçš„ä¸€ä¸ªå¯¹åº”çš„æœªæ¥ç»“æœ</span></span><br><span class="line">        <span class="comment">// å¯ä»¥ä½¿ç”¨ChannelFutureå®ç°åç»­çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„äº¤äº’ã€‚</span></span><br><span class="line">        ChannelFuture future = bootstrap.bind(port).sync();</span><br><span class="line">        <span class="keyword">return</span> future;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * shutdownGracefully - æ–¹æ³•æ˜¯ä¸€ä¸ªå®‰å…¨å…³é—­çš„æ–¹æ³•ã€‚å¯ä»¥ä¿è¯ä¸æ”¾å¼ƒä»»ä½•ä¸€ä¸ªå·²æ¥æ”¶çš„å®¢æˆ·ç«¯è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.acceptorGroup.shutdownGracefully();</span><br><span class="line">        <span class="keyword">this</span>.clientGroup.shutdownGracefully();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        ChannelFuture future = <span class="keyword">null</span>;</span><br><span class="line">        Server4HelloWorld server = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            server = <span class="keyword">new</span> Server4HelloWorld();</span><br><span class="line">            future = server.doAccept(<span class="number">9999</span>,<span class="keyword">new</span> Server4HelloWorldHandler());</span><br><span class="line">            System.out.println(<span class="string">"server started."</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å…³é—­è¿æ¥çš„ã€‚</span></span><br><span class="line">            future.channel().closeFuture().sync();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != future)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    future.channel().closeFuture().sync();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å›æ”¶çº¿ç¨‹ç»„èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != server)&#123;</span><br><span class="line">                server.release();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>serverHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Sharable</span>æ³¨è§£ - </span></span><br><span class="line"><span class="comment"> *  ä»£è¡¨å½“å‰Handleræ˜¯ä¸€ä¸ªå¯ä»¥åˆ†äº«çš„å¤„ç†å™¨ã€‚ä¹Ÿå°±æ„å‘³ç€ï¼ŒæœåŠ¡å™¨æ³¨å†Œæ­¤Handleråï¼Œå¯ä»¥åˆ†äº«ç»™å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="comment"> *  å¦‚æœä¸ä½¿ç”¨æ³¨è§£æè¿°ç±»å‹ï¼Œåˆ™æ¯æ¬¡å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œå¿…é¡»ä¸ºå®¢æˆ·ç«¯é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„Handlerå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"> *  å¦‚æœhandleræ˜¯ä¸€ä¸ªSharableçš„ï¼Œä¸€å®šé¿å…å®šä¹‰å¯å†™çš„å®ä¾‹å˜é‡ã€‚ä¿®æ”¹ä¼šå‘ç”Ÿæ··ä¹±</span></span><br><span class="line"><span class="comment"> *  bootstrap.childHandler(new ChannelInitializer&lt;SocketChannel&gt;() &#123;</span></span><br><span class="line"><span class="comment">            <span class="doctag">@Override</span></span></span><br><span class="line"><span class="comment">            protected void initChannel(SocketChannel ch) throws Exception &#123;</span></span><br><span class="line"><span class="comment">                ch.pipeline().addLast(new XxxHandler());</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.sxt.netty.first;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.ByteBuf;</span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.Unpooled;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelFutureListener;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelHandler.Sharable;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.SocketChannel;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelHandlerAdapter;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelHandlerContext;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelInitializer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Sharable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server4HelloWorldHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸šåŠ¡å¤„ç†é€»è¾‘</span></span><br><span class="line"><span class="comment">     * ç”¨äºå¤„ç†è¯»å–æ•°æ®è¯·æ±‚çš„é€»è¾‘ã€‚</span></span><br><span class="line"><span class="comment">     * ctx - ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚å…¶ä¸­åŒ…å«äºå®¢æˆ·ç«¯å»ºç«‹è¿æ¥çš„æ‰€æœ‰èµ„æºã€‚ å¦‚ï¼š å¯¹åº”çš„Channel</span></span><br><span class="line"><span class="comment">     * msg - è¯»å–åˆ°çš„æ•°æ®ã€‚ é»˜è®¤ç±»å‹æ˜¯ByteBufï¼Œæ˜¯Nettyè‡ªå®šä¹‰çš„ã€‚æ˜¯å¯¹ByteBufferçš„å°è£…ã€‚ ä¸éœ€è¦è€ƒè™‘å¤ä½é—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–è¯»å–çš„æ•°æ®ï¼Œ æ˜¯ä¸€ä¸ªç¼“å†²ã€‚</span></span><br><span class="line">        ByteBuf readBuffer = (ByteBuf) msg;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œç”¨äºä¿å­˜ç¼“å­˜ä¸­çš„æ•°æ®ã€‚</span></span><br><span class="line">        <span class="keyword">byte</span>[] tempDatas = <span class="keyword">new</span> <span class="keyword">byte</span>[readBuffer.readableBytes()];</span><br><span class="line">        <span class="comment">// å°†ç¼“å­˜ä¸­çš„æ•°æ®è¯»å–åˆ°å­—èŠ‚æ•°ç»„ä¸­ã€‚</span></span><br><span class="line">        readBuffer.readBytes(tempDatas);</span><br><span class="line">        String message = <span class="keyword">new</span> String(tempDatas, <span class="string">"UTF-8"</span>);</span><br><span class="line">        System.out.println(<span class="string">"from client : "</span> + message);</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"exit"</span>.equals(message))&#123;</span><br><span class="line">            ctx.close();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String line = <span class="string">"server message to client!"</span>;</span><br><span class="line">        <span class="comment">// å†™æ“ä½œè‡ªåŠ¨é‡Šæ”¾ç¼“å­˜ï¼Œé¿å…å†…å­˜æº¢å‡ºé—®é¢˜ã€‚</span></span><br><span class="line">        ctx.writeAndFlush(Unpooled.copiedBuffer(line.getBytes(<span class="string">"UTF-8"</span>)));</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼Œå¦‚æœè°ƒç”¨çš„æ˜¯writeæ–¹æ³•ã€‚ä¸ä¼šåˆ·æ–°ç¼“å­˜ï¼Œç¼“å­˜ä¸­çš„æ•°æ®ä¸ä¼šå‘é€åˆ°å®¢æˆ·ç«¯ï¼Œå¿…é¡»å†æ¬¡è°ƒç”¨flushæ–¹æ³•æ‰è¡Œã€‚</span></span><br><span class="line">        <span class="comment">// ctx.write(Unpooled.copiedBuffer(line.getBytes("UTF-8")));</span></span><br><span class="line">        <span class="comment">// ctx.flush()</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œ å½“å®¢æˆ·ç«¯å¼‚å¸¸é€€å‡ºçš„æ—¶å€™ï¼Œä¹Ÿä¼šè¿è¡Œã€‚</span></span><br><span class="line"><span class="comment">     * ChannelHandlerContextå…³é—­ï¼Œä¹Ÿä»£è¡¨å½“å‰ä¸å®¢æˆ·ç«¯è¿æ¥çš„èµ„æºå…³é—­ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"server exceptionCaught method run..."</span>);</span><br><span class="line">        <span class="comment">// cause.printStackTrace();</span></span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>client</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å› ä¸ºå®¢æˆ·ç«¯æ˜¯è¯·æ±‚çš„å‘èµ·è€…ï¼Œä¸éœ€è¦ç›‘å¬ã€‚</span></span><br><span class="line"><span class="comment"> * åªéœ€è¦å®šä¹‰å”¯ä¸€çš„ä¸€ä¸ªçº¿ç¨‹ç»„å³å¯ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client4HelloWorld</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†è¯·æ±‚å’Œå¤„ç†æœåŠ¡ç«¯å“åº”çš„çº¿ç¨‹ç»„</span></span><br><span class="line">    <span class="keyword">private</span> EventLoopGroup group = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// å®¢æˆ·ç«¯å¯åŠ¨ç›¸å…³é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> Bootstrap bootstrap = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Client4HelloWorld</span><span class="params">()</span></span>&#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        group = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        bootstrap = <span class="keyword">new</span> Bootstrap();</span><br><span class="line">        <span class="comment">// ç»‘å®šçº¿ç¨‹ç»„</span></span><br><span class="line">        bootstrap.group(group);</span><br><span class="line">        <span class="comment">// è®¾å®šé€šè®¯æ¨¡å¼ä¸ºNIO</span></span><br><span class="line">        bootstrap.channel(NioSocketChannel.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doRequest</span><span class="params">(String host, <span class="keyword">int</span> port, <span class="keyword">final</span> ChannelHandler... handlers)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * å®¢æˆ·ç«¯çš„Bootstrapæ²¡æœ‰childHandleræ–¹æ³•ã€‚åªæœ‰handleræ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">         * æ–¹æ³•å«ä¹‰ç­‰åŒServerBootstrapä¸­çš„childHandler</span></span><br><span class="line"><span class="comment">         * åœ¨å®¢æˆ·ç«¯å¿…é¡»ç»‘å®šå¤„ç†å™¨ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»è°ƒç”¨handleræ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">         * æœåŠ¡å™¨å¿…é¡»ç»‘å®šå¤„ç†å™¨ï¼Œå¿…é¡»è°ƒç”¨childHandleræ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">this</span>.bootstrap.handler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                ch.pipeline().addLast(handlers);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// å»ºç«‹è¿æ¥ã€‚</span></span><br><span class="line">        ChannelFuture future = <span class="keyword">this</span>.bootstrap.connect(host, port).sync();</span><br><span class="line">        <span class="keyword">return</span> future;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.group.shutdownGracefully();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Client4HelloWorld client = <span class="keyword">null</span>;</span><br><span class="line">        ChannelFuture future = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            client = <span class="keyword">new</span> Client4HelloWorld();</span><br><span class="line">            future = client.doRequest(<span class="string">"localhost"</span>, <span class="number">9999</span>, <span class="keyword">new</span> Client4HelloWorldHandler());</span><br><span class="line"></span><br><span class="line">            Scanner s = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                s = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">                System.out.print(<span class="string">"enter message send to server (enter 'exit' for close client) &gt; "</span>);</span><br><span class="line">                String line = s.nextLine();</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">"exit"</span>.equals(line))&#123;</span><br><span class="line">                    <span class="comment">// addListener - å¢åŠ ç›‘å¬ï¼Œå½“æŸæ¡ä»¶æ»¡è¶³çš„æ—¶å€™ï¼Œè§¦å‘ç›‘å¬å™¨ã€‚</span></span><br><span class="line">                    <span class="comment">// ChannelFutureListener.CLOSE - å…³é—­ç›‘å¬å™¨ï¼Œä»£è¡¨ChannelFutureæ‰§è¡Œè¿”å›åï¼Œå…³é—­è¿æ¥ã€‚</span></span><br><span class="line">                    future.channel().writeAndFlush(Unpooled.copiedBuffer(line.getBytes(<span class="string">"UTF-8"</span>)))</span><br><span class="line">                        .addListener(ChannelFutureListener.CLOSE);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                future.channel().writeAndFlush(Unpooled.copiedBuffer(line.getBytes(<span class="string">"UTF-8"</span>)));</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != future)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    future.channel().closeFuture().sync();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != client)&#123;</span><br><span class="line">                client.release();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>clientHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client4HelloWorldHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            ByteBuf readBuffer = (ByteBuf) msg;</span><br><span class="line">            <span class="keyword">byte</span>[] tempDatas = <span class="keyword">new</span> <span class="keyword">byte</span>[readBuffer.readableBytes()];</span><br><span class="line">            readBuffer.readBytes(tempDatas);</span><br><span class="line">            System.out.println(<span class="string">"from server : "</span> + <span class="keyword">new</span> String(tempDatas, <span class="string">"UTF-8"</span>));</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">// ç”¨äºé‡Šæ”¾ç¼“å­˜ã€‚é¿å…å†…å­˜æº¢å‡º</span></span><br><span class="line">            ReferenceCountUtil.release(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"client exceptionCaught method run..."</span>);</span><br><span class="line">        <span class="comment">// cause.printStackTrace();</span></span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*@Override // æ–­å¼€è¿æ¥æ—¶æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">    public void channelInactive(ChannelHandlerContext ctx) throws Exception &#123;</span></span><br><span class="line"><span class="comment">        System.out.println("channelInactive method run...");</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    @Override // è¿æ¥é€šé“å»ºç«‹æˆåŠŸæ—¶æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">    public void channelActive(ChannelHandlerContext ctx) throws Exception &#123;</span></span><br><span class="line"><span class="comment">        System.out.println("channelActive method run...");</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    @Override // æ¯æ¬¡è¯»å–å®Œæˆæ—¶æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">    public void channelReadComplete(ChannelHandlerContext ctx) throws Exception &#123;</span></span><br><span class="line"><span class="comment">        System.out.println("channelReadComplete method run...");</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆä½“åœ†æ»¡ï¼ˆåŸºç¡€ä»£ç æ¼”ç¤ºï¼‰"><a href="#åˆä½“åœ†æ»¡ï¼ˆåŸºç¡€ä»£ç æ¼”ç¤ºï¼‰" class="headerlink" title="åˆä½“åœ†æ»¡ï¼ˆåŸºç¡€ä»£ç æ¼”ç¤ºï¼‰"></a>åˆä½“åœ†æ»¡ï¼ˆåŸºç¡€ä»£ç æ¼”ç¤ºï¼‰</h3><p><strong>æ‹†åŒ…ç²˜åŒ…é—®é¢˜è§£å†³</strong> ï¼š</p>
<p>â€‹        <em>netty</em> ä½¿ç”¨ <em>tcp/ip</em> åè®®ä¼ è¾“æ•°æ®ã€‚è€Œ <em>tcp/ip</em> åè®®æ˜¯ç±»ä¼¼æ°´æµä¸€æ ·çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚å¤šæ¬¡ è®¿é—®çš„æ—¶å€™æœ‰å¯èƒ½å‡ºç°æ•°æ®ç²˜åŒ…çš„é—®é¢˜ã€‚ï¼ˆNettyæ˜¯NIOçš„æ¨¡å‹ï¼Œæ˜¯åŒæ­¥éé˜»å¡çš„ï¼Œä¸€å®šæ‰§è¡Œread/writeæ—¶å€™å°±ç»§ç»­å‘ä¸‹æ‰§è¡Œäº†ï¼Œè®©åº•å±‚çš„ä»£ç ç»™æˆ‘ä»¬å¤„ç†æ‰§è¡Œæ•°æ®çš„å‡†å¤‡ï¼Œæ€ä¹ˆå»è¯»å†™æ“ä½œï¼Œå¦‚æœæˆ‘ä»¬å®¢æˆ·ç«¯å‘èµ·å¤šä¸ªæ•°æ®ï¼Œreadæ–¹æ³•åˆ°åº•æ˜¯è¯»å‡ æ¡æ•°æ®ï¼Ÿä¸çŸ¥é“å®¢æˆ·ç«¯å‘é€è¿‡æ¥åˆ°åº•æ˜¯å‡ å¥—æ•°æ®ï¼Œæ¯ä¸€æ¡é—´åˆ°åº•æœ‰ä»€ä¹ˆé—´éš”ï¼‰è§£å†³è¿™ç§é—®é¢˜çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å®šé•¿æ•°æ®æµ</strong> ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œæå‰åè°ƒå¥½ï¼Œæ¯ä¸ªæ¶ˆæ¯é•¿åº¦å›ºå®šã€‚ï¼ˆå¦‚ï¼šé•¿åº¦ <em>10</em>ï¼‰ã€‚å¦‚æœå®¢æˆ·ç«¯æˆ–æœ åŠ¡å™¨å†™å‡ºçš„æ•°æ®ä¸è¶³ <em>10</em>ï¼Œåˆ™ä½¿ç”¨ç©ºç™½å­—ç¬¦è¡¥è¶³ï¼ˆå¦‚ï¼šä½¿ç”¨ç©ºæ ¼ï¼‰ã€‚ </li>
</ul>
<p>server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. åŒçº¿ç¨‹ç»„</span></span><br><span class="line"><span class="comment"> * 2. Bootstrapé…ç½®å¯åŠ¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * 3. æ³¨å†Œä¸šåŠ¡å¤„ç†Handler</span></span><br><span class="line"><span class="comment"> * 4. ç»‘å®šæœåŠ¡ç›‘å¬ç«¯å£å¹¶å¯åŠ¨æœåŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server4FixedLength</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬çº¿ç¨‹ç»„ï¼Œç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">private</span> EventLoopGroup acceptorGroup = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// å¤„ç†å®¢æˆ·ç«¯ç›¸å…³æ“ä½œçº¿ç¨‹ç»„ï¼Œè´Ÿè´£å¤„ç†ä¸å®¢æˆ·ç«¯çš„æ•°æ®é€šè®¯</span></span><br><span class="line">    <span class="keyword">private</span> EventLoopGroup clientGroup = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// æœåŠ¡å¯åŠ¨ç›¸å…³é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> ServerBootstrap bootstrap = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Server4FixedLength</span><span class="params">()</span></span>&#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        acceptorGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        clientGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        bootstrap = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">        <span class="comment">// ç»‘å®šçº¿ç¨‹ç»„</span></span><br><span class="line">        bootstrap.group(acceptorGroup, clientGroup);</span><br><span class="line">        <span class="comment">// è®¾å®šé€šè®¯æ¨¡å¼ä¸ºNIO</span></span><br><span class="line">        bootstrap.channel(NioServerSocketChannel.class);</span><br><span class="line">        <span class="comment">// è®¾å®šç¼“å†²åŒºå¤§å°</span></span><br><span class="line">        bootstrap.option(ChannelOption.SO_BACKLOG, <span class="number">1024</span>);</span><br><span class="line">        <span class="comment">// SO_SNDBUFå‘é€ç¼“å†²åŒºï¼ŒSO_RCVBUFæ¥æ”¶ç¼“å†²åŒºï¼ŒSO_KEEPALIVEå¼€å¯å¿ƒè·³ç›‘æµ‹ï¼ˆä¿è¯è¿æ¥æœ‰æ•ˆï¼‰</span></span><br><span class="line">        bootstrap.option(ChannelOption.SO_SNDBUF, <span class="number">16</span>*<span class="number">1024</span>)</span><br><span class="line">            .option(ChannelOption.SO_RCVBUF, <span class="number">16</span>*<span class="number">1024</span>)</span><br><span class="line">            .option(ChannelOption.SO_KEEPALIVE, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doAccept</span><span class="params">(<span class="keyword">int</span> port)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line"></span><br><span class="line">        bootstrap.childHandler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                ChannelHandler[] acceptorHandlers = <span class="keyword">new</span> ChannelHandler[<span class="number">3</span>];</span><br><span class="line">                <span class="comment">// å®šé•¿Handlerã€‚é€šè¿‡æ„é€ å‚æ•°è®¾ç½®æ¶ˆæ¯é•¿åº¦ï¼ˆå•ä½æ˜¯å­—èŠ‚ï¼‰ã€‚å‘é€çš„æ¶ˆæ¯é•¿åº¦ä¸è¶³å¯ä»¥ä½¿ç”¨ç©ºæ ¼è¡¥å…¨ã€‚</span></span><br><span class="line">                acceptorHandlers[<span class="number">0</span>] = <span class="keyword">new</span> FixedLengthFrameDecoder(<span class="number">3</span>);</span><br><span class="line">                <span class="comment">// å­—ç¬¦ä¸²è§£ç å™¨Handlerï¼Œä¼šè‡ªåŠ¨å¤„ç†channelReadæ–¹æ³•çš„msgå‚æ•°ï¼Œå°†ByteBufç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">                acceptorHandlers[<span class="number">1</span>] = <span class="keyword">new</span> StringDecoder(Charset.forName(<span class="string">"UTF-8"</span>));</span><br><span class="line">                acceptorHandlers[<span class="number">2</span>] = <span class="keyword">new</span> Server4FixedLengthHandler();</span><br><span class="line">                ch.pipeline().addLast(acceptorHandlers);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        ChannelFuture future = bootstrap.bind(port).sync();</span><br><span class="line">        <span class="keyword">return</span> future;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.acceptorGroup.shutdownGracefully();</span><br><span class="line">        <span class="keyword">this</span>.clientGroup.shutdownGracefully();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        ChannelFuture future = <span class="keyword">null</span>;</span><br><span class="line">        Server4FixedLength server = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            server = <span class="keyword">new</span> Server4FixedLength();</span><br><span class="line"></span><br><span class="line">            future = server.doAccept(<span class="number">9999</span>);</span><br><span class="line">            System.out.println(<span class="string">"server started."</span>);</span><br><span class="line">            future.channel().closeFuture().sync();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != future)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    future.channel().closeFuture().sync();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != server)&#123;</span><br><span class="line">                server.release();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>serverHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server4FixedLengthHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String message = msg.toString();</span><br><span class="line">        System.out.println(<span class="string">"from client : "</span> + message.trim());</span><br><span class="line">        String line = <span class="string">"ok "</span>;</span><br><span class="line">        ctx.writeAndFlush(Unpooled.copiedBuffer(line.getBytes(<span class="string">"UTF-8"</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼‚å¸¸å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"server exceptionCaught method run..."</span>);</span><br><span class="line">        <span class="comment">// cause.printStackTrace();</span></span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>client</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. å•çº¿ç¨‹ç»„</span></span><br><span class="line"><span class="comment"> * 2. Bootstrapé…ç½®å¯åŠ¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * 3. æ³¨å†Œä¸šåŠ¡å¤„ç†Handler</span></span><br><span class="line"><span class="comment"> * 4. connectè¿æ¥æœåŠ¡ï¼Œå¹¶å‘èµ·è¯·æ±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client4FixedLength</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†è¯·æ±‚å’Œå¤„ç†æœåŠ¡ç«¯å“åº”çš„çº¿ç¨‹ç»„</span></span><br><span class="line">    <span class="keyword">private</span> EventLoopGroup group = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// æœåŠ¡å¯åŠ¨ç›¸å…³é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> Bootstrap bootstrap = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Client4FixedLength</span><span class="params">()</span></span>&#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        group = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        bootstrap = <span class="keyword">new</span> Bootstrap();</span><br><span class="line">        <span class="comment">// ç»‘å®šçº¿ç¨‹ç»„</span></span><br><span class="line">        bootstrap.group(group);</span><br><span class="line">        <span class="comment">// è®¾å®šé€šè®¯æ¨¡å¼ä¸ºNIO</span></span><br><span class="line">        bootstrap.channel(NioSocketChannel.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doRequest</span><span class="params">(String host, <span class="keyword">int</span> port)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bootstrap.handler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                ChannelHandler[] handlers = <span class="keyword">new</span> ChannelHandler[<span class="number">3</span>];</span><br><span class="line">                handlers[<span class="number">0</span>] = <span class="keyword">new</span> FixedLengthFrameDecoder(<span class="number">3</span>);</span><br><span class="line">                <span class="comment">// å­—ç¬¦ä¸²è§£ç å™¨Handlerï¼Œä¼šè‡ªåŠ¨å¤„ç†channelReadæ–¹æ³•çš„msgå‚æ•°ï¼Œå°†ByteBufç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">                handlers[<span class="number">1</span>] = <span class="keyword">new</span> StringDecoder(Charset.forName(<span class="string">"UTF-8"</span>));</span><br><span class="line">                handlers[<span class="number">2</span>] = <span class="keyword">new</span> Client4FixedLengthHandler();</span><br><span class="line"></span><br><span class="line">                ch.pipeline().addLast(handlers);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        ChannelFuture future = <span class="keyword">this</span>.bootstrap.connect(host, port).sync();</span><br><span class="line">        <span class="keyword">return</span> future;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.group.shutdownGracefully();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Client4FixedLength client = <span class="keyword">null</span>;</span><br><span class="line">        ChannelFuture future = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            client = <span class="keyword">new</span> Client4FixedLength();</span><br><span class="line"></span><br><span class="line">            future = client.doRequest(<span class="string">"localhost"</span>, <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">            Scanner s = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                s = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">                System.out.print(<span class="string">"enter message send to server &gt; "</span>);</span><br><span class="line">                String line = s.nextLine();</span><br><span class="line">                <span class="keyword">byte</span>[] bs = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">5</span>];</span><br><span class="line">                <span class="keyword">byte</span>[] temp = line.getBytes(<span class="string">"UTF-8"</span>);</span><br><span class="line">                <span class="keyword">if</span>(temp.length &lt;= <span class="number">5</span>)&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; temp.length; i++)&#123;</span><br><span class="line">                        bs[i] = temp[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                future.channel().writeAndFlush(Unpooled.copiedBuffer(bs));</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != future)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    future.channel().closeFuture().sync();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != client)&#123;</span><br><span class="line">                client.release();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>clientHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client4FixedLengthHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            String message = msg.toString();</span><br><span class="line">            System.out.println(<span class="string">"from server : "</span> + message);</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">// ç”¨äºé‡Šæ”¾ç¼“å­˜ã€‚é¿å…å†…å­˜æº¢å‡º</span></span><br><span class="line">            ReferenceCountUtil.release(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"client exceptionCaught method run..."</span>);</span><br><span class="line">        <span class="comment">// cause.printStackTrace();</span></span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šæ­¤æ—¶å®¢æˆ·ç«¯åªè¦ä¸èƒ½æ»¡è¶³çš„æ•°æ®æ˜¯3çš„é•¿åº¦ï¼Œè¦å¯ä»¥è¿›è¡Œå¤šæ¬¡å‘é€ã€‚æœåŠ¡ç«¯æ‰èƒ½æ”¶åˆ°æ•°æ®ï¼Œå¹¶ä¸”æ˜¯è¿èµ·æ¥çš„ã€‚å½“å®¢æˆ·ç«¯å‘çš„æ˜¯å¤§3çš„é•¿åº¦æ˜¯ï¼Œå¦‚å‘é€abc123def4ï¼ŒæœåŠ¡å™¨ä¼šæŠŠå®ƒå½“æˆä¸‰æ¡æ•°æ®ï¼Œ4ä¸ä¼šå‡ºæ¥ï¼Œå®¢æˆ·ç«¯åœ¨å‘é€2ä¸ªé•¿åº¦æ•°æ®ï¼ŒæœåŠ¡ç«¯æ‰å¯ä»¥æ¥æ”¶åˆ°ã€‚</p>
<p>â€‹        ä¸­æ–‡é—®é¢˜ï¼Œunicodeä¸­ï¼Œä¸€ä¸ªæ±‰å­—å¯èƒ½é•¿åº¦æ˜¯2ä¹Ÿå¯èƒ½æ˜¯3ã€‚å¦‚æœåœ¨ä¸Šé¢ä»£ç ä¸­çš„å®¢æˆ·ç«¯å‘é€â€ä¸­å›½â€äºŒä¸ªå­—å°±æœ‰æ„æ€äº†ã€‚æœåŠ¡ç«¯ä¼šæ¥æ”¶åˆ°2æ¬¡ï¼Œä¸€ä¸ªå­—ä¸€æ¬¡ã€‚</p>
<ul>
<li><p><strong>ç‰¹æ®Šç»“æŸç¬¦</strong> ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œåå•†å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„åˆ†éš”ç¬¦å·ï¼Œåˆ†éš”ç¬¦å·é•¿åº¦è‡ªå®šä¹‰ã€‚å¦‚ï¼šâ€˜<em>#</em>â€™ã€â€˜<em>$_$</em>â€™ã€ </p>
<p>â€˜<em>AA@</em>â€™ã€‚åœ¨é€šè®¯çš„æ—¶å€™ï¼Œåªè¦æ²¡æœ‰å‘é€åˆ†éš”ç¬¦å·ï¼Œåˆ™ä»£è¡¨ä¸€æ¡æ•°æ®æ²¡æœ‰ç»“æŸã€‚</p>
</li>
</ul>
<p>server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doAccept</span><span class="params">(<span class="keyword">int</span> port)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line"></span><br><span class="line">    bootstrap.childHandler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="comment">// æ•°æ®åˆ†éš”ç¬¦, å®šä¹‰çš„æ•°æ®åˆ†éš”ç¬¦ä¸€å®šæ˜¯ä¸€ä¸ªByteBufç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚</span></span><br><span class="line">            ByteBuf delimiter = Unpooled.copiedBuffer(<span class="string">"$E$"</span>.getBytes());</span><br><span class="line">            ChannelHandler[] acceptorHandlers = <span class="keyword">new</span> ChannelHandler[<span class="number">3</span>];</span><br><span class="line">            <span class="comment">// å¤„ç†å›ºå®šç»“æŸæ ‡è®°ç¬¦å·çš„Handlerã€‚è¿™ä¸ªHandleræ²¡æœ‰@Sharableæ³¨è§£ä¿®é¥°ï¼Œ</span></span><br><span class="line">            <span class="comment">// å¿…é¡»æ¯æ¬¡åˆå§‹åŒ–é€šé“æ—¶åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line">            <span class="comment">// ä½¿ç”¨ç‰¹æ®Šç¬¦å·åˆ†éš”å¤„ç†æ•°æ®ç²˜åŒ…é—®é¢˜ï¼Œä¹Ÿè¦å®šä¹‰æ¯ä¸ªæ•°æ®åŒ…æœ€å¤§é•¿åº¦ã€‚nettyå»ºè®®æ•°æ®æœ‰æœ€å¤§é•¿åº¦ã€‚</span></span><br><span class="line">            acceptorHandlers[<span class="number">0</span>] = <span class="keyword">new</span> DelimiterBasedFrameDecoder(<span class="number">1024</span>, delimiter);</span><br><span class="line">            <span class="comment">// å­—ç¬¦ä¸²è§£ç å™¨Handlerï¼Œä¼šè‡ªåŠ¨å¤„ç†channelReadæ–¹æ³•çš„msgå‚æ•°ï¼Œå°†ByteBufç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">            acceptorHandlers[<span class="number">1</span>] = <span class="keyword">new</span> StringDecoder(Charset.forName(<span class="string">"UTF-8"</span>));</span><br><span class="line">            acceptorHandlers[<span class="number">2</span>] = <span class="keyword">new</span> Server4DelimiterHandler();</span><br><span class="line">            ch.pipeline().addLast(acceptorHandlers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    ChannelFuture future = bootstrap.bind(port).sync();</span><br></pre></td></tr></table></figure>
<p>serverHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span></span><br><span class="line"><span class="meta">@Overridepublic</span> <span class="function"><span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;   </span><br><span class="line">    String message = msg.toString();   </span><br><span class="line">    System.out.println(<span class="string">"from client : "</span> + message);   </span><br><span class="line">    <span class="comment">//ä¼šæ”¾å›ä¸‰æ¡å­—ç¬¦ä¸²   </span></span><br><span class="line">    String line = <span class="string">"server message $E$ test delimiter handler!! $E$ second message $E$"</span>;         ctx.writeAndFlush(Unpooled.copiedBuffer(line.getBytes(<span class="string">"UTF-8"</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>clientå’Œserveræ”¹åŠ¨åŸºæœ¬ä¸€æ ·ã€‚æ­¤æ—¶å¦‚æœå®¢æˆ·ç«¯ä¸è¾“å…¥åˆ†éš”ç¬¦ï¼Œå¯ä»¥è¿›è¡Œä¸æ–­è¾“å…¥ã€‚</p>
<ul>
<li><p><strong>åè®®</strong> ï¼šç›¸å¯¹æœ€æˆç†Ÿçš„æ•°æ®ä¼ é€’æ–¹å¼ã€‚æœ‰æœåŠ¡å™¨çš„å¼€å‘è€…æä¾›ä¸€ä¸ªå›ºå®šæ ¼å¼çš„åè®®æ ‡å‡†ã€‚å®¢æˆ·ç«¯ </p>
<p>å’ŒæœåŠ¡å™¨å‘é€æ•°æ®å’Œæ¥å—æ•°æ®çš„æ—¶å€™ï¼Œéƒ½ä¾æ®åè®®åˆ¶å®šå’Œè§£ææ¶ˆæ¯ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åè®®æ ¼å¼ï¼šHEADcontent-length:xxxxHEADBODYxxxxxxBODY</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doAccept</span><span class="params">(<span class="keyword">int</span> port, <span class="keyword">final</span> ChannelHandler... acceptorHandlers)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line"></span><br><span class="line">    bootstrap.childHandler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            ch.pipeline().addLast(<span class="keyword">new</span> StringDecoder(Charset.forName(<span class="string">"UTF-8"</span>)));</span><br><span class="line">            ch.pipeline().addLast(acceptorHandlers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    ChannelFuture future = bootstrap.bind(port).sync();</span><br><span class="line">    <span class="keyword">return</span> future;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>serverHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Sharable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server4ProtocolHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String message = msg.toString();</span><br><span class="line">        System.out.println(<span class="string">"server receive protocol content : "</span> + message);</span><br><span class="line">        message = ProtocolParser.parse(message);</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == message)&#123;</span><br><span class="line">            System.out.println(<span class="string">"error request from client"</span>);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"from client : "</span> + message);</span><br><span class="line">        String line = <span class="string">"server message"</span>;</span><br><span class="line">        line = ProtocolParser.transferTo(line);</span><br><span class="line">        System.out.println(<span class="string">"server send protocol content : "</span> + line);</span><br><span class="line">        ctx.writeAndFlush(Unpooled.copiedBuffer(line.getBytes(<span class="string">"UTF-8"</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼‚å¸¸å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"server exceptionCaught method run..."</span>);</span><br><span class="line">        cause.printStackTrace();</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ProtocolParser</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">parse</span><span class="params">(String message)</span></span>&#123;</span><br><span class="line">            String[] temp = message.split(<span class="string">"HEADBODY"</span>);</span><br><span class="line">            temp[<span class="number">0</span>] = temp[<span class="number">0</span>].substring(<span class="number">4</span>);</span><br><span class="line">            temp[<span class="number">1</span>] = temp[<span class="number">1</span>].substring(<span class="number">0</span>, (temp[<span class="number">1</span>].length()-<span class="number">4</span>));</span><br><span class="line">            <span class="keyword">int</span> length = Integer.parseInt(temp[<span class="number">0</span>].substring(temp[<span class="number">0</span>].indexOf(<span class="string">":"</span>)+<span class="number">1</span>));</span><br><span class="line">            <span class="keyword">if</span>(length != temp[<span class="number">1</span>].length())&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> temp[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">transferTo</span><span class="params">(String message)</span></span>&#123;</span><br><span class="line">            message = <span class="string">"HEADcontent-length:"</span> + message.length() + <span class="string">"HEADBODY"</span> + message + <span class="string">"BODY"</span>;</span><br><span class="line">            <span class="keyword">return</span> message;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åè®®é™å®šæ‹†åˆ†çš„æ ¼å¼ã€‚è§£å†³ç²˜åŒ…ã€‚</p>
<ul>
<li><strong>åºåˆ—åŒ–å¯¹è±¡</strong> ï¼š<em>JBoss Marshalling</em> åºåˆ—åŒ– ï¼Œ<em>Java</em> æ˜¯é¢å‘å¯¹è±¡çš„å¼€å‘è¯­è¨€ã€‚ä¼ é€’çš„æ•°æ®å¦‚æœæ˜¯ <em>Java</em> å¯¹è±¡ï¼Œåº”è¯¥æ˜¯æœ€æ–¹ä¾¿ä¸”å¯é ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doAccept</span><span class="params">(<span class="keyword">int</span> port, <span class="keyword">final</span> ChannelHandler... acceptorHandlers)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line"></span><br><span class="line">    bootstrap.childHandler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingDecoder());</span><br><span class="line">            ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingEncoder());</span><br><span class="line">            ch.pipeline().addLast(acceptorHandlers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    ChannelFuture future = bootstrap.bind(port).sync();</span><br><span class="line">    <span class="keyword">return</span> future;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>serverHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Sharable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server4SerializableHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"from client : ClassName - "</span> + msg.getClass().getName()</span><br><span class="line">                + <span class="string">" ; message : "</span> + msg.toString());</span><br><span class="line">        <span class="keyword">if</span>(msg <span class="keyword">instanceof</span> RequestMessage)&#123;</span><br><span class="line">            RequestMessage request = (RequestMessage)msg;</span><br><span class="line">            <span class="comment">// è§£å‹ç¼©</span></span><br><span class="line">            <span class="comment">// byte[] attachment = GzipUtils.unzip(request.getAttachment());</span></span><br><span class="line">            <span class="comment">// System.out.println(new String(attachment));</span></span><br><span class="line">        &#125;</span><br><span class="line">        ResponseMessage response = <span class="keyword">new</span> ResponseMessage(<span class="number">0L</span>, <span class="string">"test response"</span>);</span><br><span class="line">        ctx.writeAndFlush(response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼‚å¸¸å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"server exceptionCaught method run..."</span>);</span><br><span class="line">        cause.printStackTrace();</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>client</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doRequest</span><span class="params">(String host, <span class="keyword">int</span> port, <span class="keyword">final</span> ChannelHandler... handlers)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bootstrap.handler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingDecoder());</span><br><span class="line">            ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingEncoder());</span><br><span class="line">            ch.pipeline().addLast(handlers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    ChannelFuture future = <span class="keyword">this</span>.bootstrap.connect(host, port).sync();</span><br><span class="line">    <span class="keyword">return</span> future;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.group.shutdownGracefully();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Client4Serializable client = <span class="keyword">null</span>;</span><br><span class="line">    ChannelFuture future = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        client = <span class="keyword">new</span> Client4Serializable();</span><br><span class="line">        future = client.doRequest(<span class="string">"localhost"</span>, <span class="number">9999</span>, <span class="keyword">new</span> Client4SerializableHandler());</span><br><span class="line">        String attachment = <span class="string">"test attachment"</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] attBuf = attachment.getBytes();</span><br><span class="line">        <span class="comment">// attBuf = GzipUtils.zip(attBuf);</span></span><br><span class="line">        <span class="comment">// RequestMessage msg = new RequestMessage(new Random().nextLong(), </span></span><br><span class="line">        <span class="comment">//        "test", new byte[0]);</span></span><br><span class="line">        <span class="comment">// å‹ç¼©ï¼Œæœ‰æ•ˆå‡å°‘ç½‘ç»œä¸­ä¼ é€’çš„æ•°æ®</span></span><br><span class="line">        attBuf = GzipUtils.zip(attBuf);</span><br><span class="line">        RequestMessage msg = <span class="keyword">new</span> RequestMessage(<span class="keyword">new</span> Random().nextLong(), </span><br><span class="line">            <span class="string">"test"</span>, attBuf);</span><br><span class="line">        future.channel().writeAndFlush(msg);</span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        future.addListener(ChannelFutureListener.CLOSE);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != future)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                future.channel().closeFuture().sync();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != client)&#123;</span><br><span class="line">            client.release();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>clientHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client4SerializableHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"from server : ClassName - "</span> + msg.getClass().getName()</span><br><span class="line">                + <span class="string">" ; message : "</span> + msg.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"client exceptionCaught method run..."</span>);</span><br><span class="line">        cause.printStackTrace();</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>å®šæ—¶æ–­çº¿é‡è¿</strong> ï¼šå®¢æˆ·ç«¯æ–­çº¿é‡è¿æœºåˆ¶ã€‚ å®¢æˆ·ç«¯æ•°é‡å¤šï¼Œä¸”éœ€è¦ä¼ é€’çš„æ•°æ®é‡çº§è¾ƒå¤§ã€‚å¯ä»¥å‘¨æœŸæ€§çš„å‘é€æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨ã€‚è¦ æ±‚å¯¹æ•°æ®çš„å³æ—¶æ€§ä¸é«˜çš„æ—¶å€™ï¼Œæ‰å¯ä½¿ç”¨ã€‚ ä¼˜ç‚¹ï¼š å¯ä»¥ä½¿ç”¨æ•°æ®ç¼“å­˜ã€‚ä¸æ˜¯æ¯æ¡æ•°æ®è¿›è¡Œä¸€æ¬¡æ•°æ®äº¤äº’ã€‚å¯ä»¥å®šæ—¶å›æ”¶èµ„æºï¼Œå¯¹ èµ„æºåˆ©ç”¨ç‡é«˜ã€‚ç›¸å¯¹æ¥è¯´ï¼Œå³æ—¶æ€§å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼ä¿è¯ã€‚å¦‚ï¼š <em>120</em> ç§’è‡ªåŠ¨æ–­çº¿ã€‚æ•°æ®å˜ åŒ– <em>1000</em> æ¬¡è¯·æ±‚æœåŠ¡å™¨ä¸€æ¬¡ã€‚<em>300</em> ç§’ä¸­è‡ªåŠ¨å‘é€ä¸è¶³ <em>1000</em> æ¬¡çš„å˜åŒ–æ•°æ®ï¼ˆTimerï¼‰ã€‚</li>
</ul>
<p>server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doAccept</span><span class="params">(<span class="keyword">int</span> port)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line"></span><br><span class="line">    bootstrap.childHandler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingDecoder());</span><br><span class="line">            ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingEncoder());</span><br><span class="line">            <span class="comment">// å®šä¹‰ä¸€ä¸ªå®šæ—¶æ–­çº¿å¤„ç†å™¨ï¼Œå½“å¤šé•¿æ—¶é—´å†…ï¼Œæ²¡æœ‰ä»»ä½•çš„å¯è¯»å–æ•°æ®ï¼Œè‡ªåŠ¨æ–­å¼€è¿æ¥ã€‚</span></span><br><span class="line">            <span class="comment">// æ²¡æœ‰@Sharableçš„</span></span><br><span class="line">            <span class="comment">// æ„é€ å‚æ•°ï¼Œå°±æ˜¯é—´éš”æ—¶é•¿ã€‚ é»˜è®¤çš„å•ä½æ˜¯ç§’ã€‚</span></span><br><span class="line">            <span class="comment">// è‡ªå®šä¹‰é—´éš”æ—¶é•¿å•ä½ã€‚ new ReadTimeoutHandler(long times, TimeUnit unit);</span></span><br><span class="line">            ch.pipeline().addLast(<span class="keyword">new</span> ReadTimeoutHandler(<span class="number">3</span>));</span><br><span class="line">            ch.pipeline().addLast(<span class="keyword">new</span> Server4TimerHandler());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    ChannelFuture future = bootstrap.bind(port).sync();</span><br><span class="line">    <span class="keyword">return</span> future;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>client</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHandlers</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bootstrap.handler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingDecoder());</span><br><span class="line">            ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingEncoder());</span><br><span class="line">            <span class="comment">// å†™æ“ä½œè‡ªå®šæ–­çº¿ã€‚ åœ¨æŒ‡å®šæ—¶é—´å†…ï¼Œæ²¡æœ‰å†™æ“ä½œï¼Œè‡ªåŠ¨æ–­çº¿ã€‚</span></span><br><span class="line">            ch.pipeline().addLast(<span class="keyword">new</span> WriteTimeoutHandler(<span class="number">3</span>));</span><br><span class="line">            ch.pipeline().addLast(<span class="keyword">new</span> Client4TimerHandler());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">getChannelFuture</span><span class="params">(String host, <span class="keyword">int</span> port)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">    <span class="comment">// futureæ˜¯nullï¼Œæˆ‘ä»¬å°±è¦å»ºç«‹è¿æ¥</span></span><br><span class="line">    <span class="keyword">if</span>(future == <span class="keyword">null</span>)&#123;</span><br><span class="line">        future = <span class="keyword">this</span>.bootstrap.connect(host, port).sync();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœéç©ºï¼Œçœ‹äº›è¿æ¥æœªæ¥çŠ¶æ€ä¸­çš„é€šé“æ˜¯å¦æœ‰æ•ˆã€‚</span></span><br><span class="line">    <span class="comment">// å¦‚æœfutureéç©ºï¼Œä½†æ˜¯æœ‰ä¸ªchannelï¼Œè¯æ˜å·²ç»å’ŒæœåŠ¡å™¨æ–­å¼€äº†ï¼Œä½†æ˜¯futureæ²¡æœ‰è¢«å›æ”¶</span></span><br><span class="line">    <span class="comment">// é‡è¿æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span>(!future.channel().isActive())&#123;</span><br><span class="line">        future = <span class="keyword">this</span>.bootstrap.connect(host, port).sync();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> future;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.group.shutdownGracefully();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Client4Timer client = <span class="keyword">null</span>;</span><br><span class="line">    ChannelFuture future = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        client = <span class="keyword">new</span> Client4Timer();</span><br><span class="line">        client.setHandlers();</span><br><span class="line"></span><br><span class="line">        future = client.getChannelFuture(<span class="string">"localhost"</span>, <span class="number">9999</span>);</span><br><span class="line">        <span class="comment">// å¾ªç¯3ä»ã€‚ç¡çœ 2ç§’ï¼Œæ²¡æœ‰è¶…å‡ºæ—¶é•¿</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;</span><br><span class="line">            RequestMessage msg = <span class="keyword">new</span> RequestMessage(<span class="keyword">new</span> Random().nextLong(), </span><br><span class="line">                    <span class="string">"test"</span>+i, <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>]);</span><br><span class="line">            future.channel().writeAndFlush(msg);</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ‰è¶…å‡ºæ—¶é•¿</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        future = client.getChannelFuture(<span class="string">"localhost"</span>, <span class="number">9999</span>);</span><br><span class="line">        RequestMessage msg = <span class="keyword">new</span> RequestMessage(<span class="keyword">new</span> Random().nextLong(), </span><br><span class="line">                <span class="string">"test"</span>, <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>]);</span><br><span class="line">        future.channel().writeAndFlush(msg);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != future)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                future.channel().closeFuture().sync();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != client)&#123;</span><br><span class="line">            client.release();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>clientHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client4TimerHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"from server : ClassName - "</span> + msg.getClass().getName()</span><br><span class="line">                + <span class="string">" ; message : "</span> + msg.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"client exceptionCaught method run..."</span>);</span><br><span class="line">        cause.printStackTrace();</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“è¿æ¥å»ºç«‹æˆåŠŸåï¼Œå‡ºå‘çš„ä»£ç é€»è¾‘ã€‚</span></span><br><span class="line"><span class="comment">     * åœ¨ä¸€æ¬¡è¿æ¥ä¸­åªè¿è¡Œå”¯ä¸€ä¸€æ¬¡ã€‚</span></span><br><span class="line"><span class="comment">     * é€šå¸¸ç”¨äºå®ç°è¿æ¥ç¡®è®¤å’Œèµ„æºåˆå§‹åŒ–çš„ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelActive</span><span class="params">(ChannelHandlerContext ctx)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"client channel active"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>serverç«¯è¿è¡Œå›¾ã€‚æœ‰æ–­çº¿æœ‰å¼‚å¸¸ï¼Œ</p>
<p><img src="\media\1582293141(1" alt="">.jpg)</p>
<p><img src="\media\1582293463(1" alt="">.jpg)</p>
<ul>
<li><strong>å¿ƒè·³ç›‘æµ‹</strong> ï¼šä½¿ç”¨å®šæ—¶å‘é€æ¶ˆæ¯çš„æ–¹å¼ï¼Œå®ç°ç¡¬ä»¶æ£€æµ‹ï¼Œè¾¾åˆ°å¿ƒæ€æ£€æµ‹çš„ç›®çš„ã€‚ å¿ƒè·³ç›‘æµ‹æ˜¯ç”¨äºæ£€æµ‹ç”µè„‘ç¡¬ä»¶å’Œè½¯ä»¶ä¿¡æ¯çš„ä¸€ç§æŠ€æœ¯ã€‚å¦‚ï¼š<em>CPU</em> ä½¿ç”¨ç‡ï¼Œç£ç›˜ä½¿ç”¨ç‡ï¼Œ å†…å­˜ä½¿ç”¨ç‡ï¼Œè¿›ç¨‹æƒ…å†µï¼Œçº¿ç¨‹æƒ…å†µç­‰ã€‚ </li>
<li><strong>sigar</strong> ï¼šéœ€è¦ä¸‹è½½ä¸€ä¸ª <em>zip</em> å‹ç¼©åŒ…ã€‚å†…éƒ¨åŒ…å«è‹¥å¹² <em>sigar</em> éœ€è¦çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶ã€‚<em>sigar</em> æ’ä»¶æ˜¯é€šè¿‡ <em>JVM</em> è®¿é—®æ“ä½œç³»ç»Ÿï¼Œè¯»å–è®¡ç®—æœºç¡¬ä»¶çš„ä¸€ä¸ªæ’ä»¶åº“ã€‚è¯»å–è®¡ç®—æœºç¡¬ä»¶è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»ç”±æ“ä½œç³»ç»Ÿæä¾›ç¡¬ä»¶ä¿¡æ¯ã€‚ç¡¬ä»¶ä¿¡æ¯æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„ã€‚<em>zip</em> å‹ç¼©åŒ…ä¸­æ˜¯ <em>sigar</em> ç¼–å†™çš„æ“ä½œç³»ç»Ÿæ–‡ ä»¶ï¼Œå¦‚ï¼š<em>windows</em> ä¸­çš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ã€‚ è§£å‹éœ€è¦çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶ï¼Œå°†æ“ä½œç³»ç»Ÿæ–‡ä»¶èµ‹å€¼åˆ°<em>${Java_home}/bin</em> ç›®å½•ä¸­ã€‚</li>
</ul>
<p>server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server4Heatbeat</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬çº¿ç¨‹ç»„ï¼Œç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">private</span> EventLoopGroup acceptorGroup = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// å¤„ç†å®¢æˆ·ç«¯ç›¸å…³æ“ä½œçº¿ç¨‹ç»„ï¼Œè´Ÿè´£å¤„ç†ä¸å®¢æˆ·ç«¯çš„æ•°æ®é€šè®¯</span></span><br><span class="line">    <span class="keyword">private</span> EventLoopGroup clientGroup = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// æœåŠ¡å¯åŠ¨ç›¸å…³é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> ServerBootstrap bootstrap = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Server4Heatbeat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        acceptorGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        clientGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        bootstrap = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">        <span class="comment">// ç»‘å®šçº¿ç¨‹ç»„</span></span><br><span class="line">        bootstrap.group(acceptorGroup, clientGroup);</span><br><span class="line">        <span class="comment">// è®¾å®šé€šè®¯æ¨¡å¼ä¸ºNIO</span></span><br><span class="line">        bootstrap.channel(NioServerSocketChannel.class);</span><br><span class="line">        <span class="comment">// è®¾å®šç¼“å†²åŒºå¤§å°</span></span><br><span class="line">        bootstrap.option(ChannelOption.SO_BACKLOG, <span class="number">1024</span>);</span><br><span class="line">        <span class="comment">// SO_SNDBUFå‘é€ç¼“å†²åŒºï¼ŒSO_RCVBUFæ¥æ”¶ç¼“å†²åŒºï¼ŒSO_KEEPALIVEå¼€å¯å¿ƒè·³ç›‘æµ‹ï¼ˆä¿è¯è¿æ¥æœ‰æ•ˆï¼‰</span></span><br><span class="line">        bootstrap.option(ChannelOption.SO_SNDBUF, <span class="number">16</span>*<span class="number">1024</span>)</span><br><span class="line">            .option(ChannelOption.SO_RCVBUF, <span class="number">16</span>*<span class="number">1024</span>)</span><br><span class="line">            .option(ChannelOption.SO_KEEPALIVE, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ChannelFuture <span class="title">doAccept</span><span class="params">(<span class="keyword">int</span> port)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line"></span><br><span class="line">        bootstrap.childHandler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingDecoder());</span><br><span class="line">                ch.pipeline().addLast(SerializableFactory4Marshalling.buildMarshallingEncoder());</span><br><span class="line">                ch.pipeline().addLast(<span class="keyword">new</span> Server4HeatbeatHandler());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        ChannelFuture future = bootstrap.bind(port).sync();</span><br><span class="line">        <span class="keyword">return</span> future;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.acceptorGroup.shutdownGracefully();</span><br><span class="line">        <span class="keyword">this</span>.clientGroup.shutdownGracefully();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        ChannelFuture future = <span class="keyword">null</span>;</span><br><span class="line">        Server4Heatbeat server = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            server = <span class="keyword">new</span> Server4Heatbeat();</span><br><span class="line">            future = server.doAccept(<span class="number">9999</span>);</span><br><span class="line">            System.out.println(<span class="string">"server started."</span>);</span><br><span class="line"></span><br><span class="line">            future.channel().closeFuture().sync();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != future)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    future.channel().closeFuture().sync();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != server)&#123;</span><br><span class="line">                server.release();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>serverHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Sharable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server4HeatbeatHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; credentials = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String HEATBEAT_SUCCESS = <span class="string">"SERVER_RETURN_HEATBEAT_SUCCESS"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Server4HeatbeatHandler</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å®¢æˆ·ç«¯åˆ—è¡¨ä¿¡æ¯ã€‚ä¸€èˆ¬é€šè¿‡é…ç½®æ–‡ä»¶è¯»å–æˆ–æ•°æ®åº“è¯»å–ã€‚</span></span><br><span class="line">        credentials.add(<span class="string">"192.168.199.222_WIN-QIUB2JF5TDP"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(msg <span class="keyword">instanceof</span> String)&#123;</span><br><span class="line">            <span class="keyword">this</span>.checkCredential(ctx, msg.toString());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (msg <span class="keyword">instanceof</span> HeatbeatMessage)&#123;</span><br><span class="line">            <span class="keyword">this</span>.readHeatbeatMessage(ctx, msg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// æœåŠ¡å™¨å‘é€çš„ä¿¡æ¯æ˜¯é”™è¯¯çš„ï¼Œæˆ–è€…å¯¹å¤–æš´éœ²çš„ipå’Œç«¯å£å·è¢«ä¸ç³»ç»Ÿæ— å…³çš„äººè®¿é—®åˆ°äº†ï¼Œè‡ªåŠ¨æ–­å¼€è¿æ¥</span></span><br><span class="line">            ctx.writeAndFlush(<span class="string">"wrong message"</span>).addListener(ChannelFutureListener.CLOSE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readHeatbeatMessage</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span></span>&#123;</span><br><span class="line">        HeatbeatMessage message = (HeatbeatMessage) msg;</span><br><span class="line">        System.out.println(message);</span><br><span class="line">        System.out.println(<span class="string">"======================================="</span>);</span><br><span class="line">        ctx.writeAndFlush(<span class="string">"receive heatbeat message"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èº«ä»½æ£€æŸ¥ã€‚æ£€æŸ¥å®¢æˆ·ç«¯èº«ä»½æ˜¯å¦æœ‰æ•ˆã€‚</span></span><br><span class="line"><span class="comment">     * å®¢æˆ·ç«¯èº«ä»½ä¿¡æ¯åº”è¯¥æ˜¯é€šè¿‡æ•°æ®åº“æˆ–æ•°æ®æ–‡ä»¶å®šåˆ¶çš„ã€‚</span></span><br><span class="line"><span class="comment">     * èº«ä»½é€šè¿‡ - è¿”å›ç¡®è®¤æ¶ˆæ¯ã€‚</span></span><br><span class="line"><span class="comment">     * èº«ä»½æ— æ•ˆ - æ–­å¼€è¿æ¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ctx</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> credential</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkCredential</span><span class="params">(ChannelHandlerContext ctx, String credential)</span></span>&#123;</span><br><span class="line">        System.out.println(credential);</span><br><span class="line">        System.out.println(credentials);</span><br><span class="line">        <span class="keyword">if</span>(credentials.contains(credential))&#123;</span><br><span class="line">            ctx.writeAndFlush(HEATBEAT_SUCCESS);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            ctx.writeAndFlush(<span class="string">"no credential contains"</span>).addListener(ChannelFutureListener.CLOSE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼‚å¸¸å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"server exceptionCaught method run..."</span>);</span><br><span class="line">        <span class="comment">// cause.printStackTrace();</span></span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>clientHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client4HeatbeatHandler</span> <span class="keyword">extends</span> <span class="title">ChannelHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ScheduledExecutorService executorService = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">private</span> ScheduledFuture heatbeat;</span><br><span class="line">    <span class="keyword">private</span> InetAddress remoteAddr;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String HEATBEAT_SUCCESS = <span class="string">"SERVER_RETURN_HEATBEAT_SUCCESS"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åªè¿è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelActive</span><span class="params">(ChannelHandlerContext ctx)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–æœ¬åœ°INETä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">this</span>.remoteAddr = InetAddress.getLocalHost();</span><br><span class="line">        <span class="comment">// è·å–æœ¬åœ°è®¡ç®—æœºå</span></span><br><span class="line">        String computerName = System.getenv().get(<span class="string">"COMPUTERNAME"</span>);</span><br><span class="line">        String credentials = <span class="keyword">this</span>.remoteAddr.getHostAddress() + <span class="string">"_"</span> + computerName;</span><br><span class="line">        System.out.println(credentials);</span><br><span class="line">        <span class="comment">// å‘é€åˆ°æœåŠ¡å™¨ï¼Œä½œä¸ºä¿¡æ¯æ¯”å¯¹è¯ä¹¦</span></span><br><span class="line">        ctx.writeAndFlush(credentials);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(msg <span class="keyword">instanceof</span> String)&#123;</span><br><span class="line">                <span class="keyword">if</span>(HEATBEAT_SUCCESS.equals(msg))&#123;</span><br><span class="line">                    <span class="keyword">this</span>.heatbeat = <span class="keyword">this</span>.executorService.scheduleWithFixedDelay(<span class="keyword">new</span> HeatbeatTask(ctx), <span class="number">0L</span>, <span class="number">2L</span>, TimeUnit.SECONDS);</span><br><span class="line">                    System.out.println(<span class="string">"client receive - "</span> + msg);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    System.out.println(<span class="string">"client receive - "</span> + msg);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            ReferenceCountUtil.release(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"client exceptionCaught method run..."</span>);</span><br><span class="line">        <span class="comment">// cause.printStackTrace();</span></span><br><span class="line">        <span class="comment">// å›æ”¶èµ„æº</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.heatbeat != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.heatbeat.cancel(<span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">this</span>.heatbeat = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">HeatbeatTask</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> ChannelHandlerContext ctx;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">HeatbeatTask</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">HeatbeatTask</span><span class="params">(ChannelHandlerContext ctx)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.ctx = ctx;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                HeatbeatMessage msg = <span class="keyword">new</span> HeatbeatMessage();</span><br><span class="line">                msg.setIp(remoteAddr.getHostAddress());</span><br><span class="line">                Sigar sigar = <span class="keyword">new</span> Sigar();</span><br><span class="line">                <span class="comment">// CPUä¿¡æ¯</span></span><br><span class="line">                CpuPerc cpuPerc = sigar.getCpuPerc();</span><br><span class="line">                Map&lt;String, Object&gt; cpuMsgMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                cpuMsgMap.put(<span class="string">"Combined"</span>, cpuPerc.getCombined());</span><br><span class="line">                cpuMsgMap.put(<span class="string">"User"</span>, cpuPerc.getUser());</span><br><span class="line">                cpuMsgMap.put(<span class="string">"Sys"</span>, cpuPerc.getSys());</span><br><span class="line">                cpuMsgMap.put(<span class="string">"Wait"</span>, cpuPerc.getWait());</span><br><span class="line">                cpuMsgMap.put(<span class="string">"Idle"</span>, cpuPerc.getIdle());</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å†…å­˜ä¿¡æ¯</span></span><br><span class="line">                Map&lt;String, Object&gt; memMsgMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                Mem mem = sigar.getMem();</span><br><span class="line">                memMsgMap.put(<span class="string">"Total"</span>, mem.getTotal());</span><br><span class="line">                memMsgMap.put(<span class="string">"Used"</span>, mem.getUsed());</span><br><span class="line">                memMsgMap.put(<span class="string">"Free"</span>, mem.getFree());</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">                Map&lt;String, Object&gt; fileSysMsgMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                FileSystem[] list = sigar.getFileSystemList();</span><br><span class="line">                fileSysMsgMap.put(<span class="string">"FileSysCount"</span>, list.length);</span><br><span class="line">                List&lt;String&gt; msgList = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">for</span>(FileSystem fs : list)&#123;</span><br><span class="line">                    msgList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                    msgList.add(fs.getDevName() + <span class="string">"æ€»å¤§å°:    "</span> + sigar.getFileSystemUsage(fs.getDirName()).getTotal() + <span class="string">"KB"</span>);</span><br><span class="line">                    msgList.add(fs.getDevName() + <span class="string">"å‰©ä½™å¤§å°:    "</span> + sigar.getFileSystemUsage(fs.getDirName()).getFree() + <span class="string">"KB"</span>);</span><br><span class="line">                    fileSysMsgMap.put(fs.getDevName(), msgList);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                msg.setCpuMsgMap(cpuMsgMap);</span><br><span class="line">                msg.setMemMsgMap(memMsgMap);</span><br><span class="line">                msg.setFileSysMsgMap(fileSysMsgMap);</span><br><span class="line"></span><br><span class="line">                ctx.writeAndFlush(msg);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>HTTP</strong> <strong>åè®®å¤„ç†</strong> ï¼šä½¿ç”¨ <em>Netty</em> æœåŠ¡å¼€å‘ã€‚å®ç° <em>HTTP</em> åè®®å¤„ç†é€»è¾‘ã€‚ æ²¡æœ‰å®¢æˆ·ç«¯ï¼Œåšä¸€ä¸ªhttpåè®®æ–‡ä»¶ä¼ è¾“åˆ°nettyæœåŠ¡å™¨</li>
</ul>
<p>server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * httpåè®®æ–‡ä»¶ä¼ è¾“ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Qixuan.Chen </span></span><br><span class="line"><span class="comment"> * åˆ›å»ºæ—¶é—´ï¼š2015å¹´5æœˆ4æ—¥ </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpStaticFileServer</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> port;<span class="comment">//ç«¯å£  </span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpStaticFileServer</span><span class="params">(<span class="keyword">int</span> port)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.port = port;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">        EventLoopGroup bossGroup = <span class="keyword">new</span> NioEventLoopGroup();<span class="comment">//çº¿ç¨‹ä¸€ //è¿™ä¸ªæ˜¯ç”¨äºserversocketchannelçš„event  </span></span><br><span class="line">        EventLoopGroup workerGroup = <span class="keyword">new</span> NioEventLoopGroup();<span class="comment">//çº¿ç¨‹äºŒ//è¿™ä¸ªæ˜¯ç”¨äºå¤„ç†acceptåˆ°çš„channel  </span></span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            ServerBootstrap b = <span class="keyword">new</span> ServerBootstrap();  </span><br><span class="line">            b.group(bossGroup, workerGroup)  </span><br><span class="line">             .channel(NioServerSocketChannel.class)  </span><br><span class="line">             .childHandler(<span class="keyword">new</span> HttpStaticFileServerInitializer());  </span><br><span class="line"></span><br><span class="line">            b.bind(port).sync().channel().closeFuture().sync();  </span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">            bossGroup.shutdownGracefully();  </span><br><span class="line">            workerGroup.shutdownGracefully();  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8089</span>;  </span><br><span class="line">        <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">            port = Integer.parseInt(args[<span class="number">0</span>]);  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            port = <span class="number">8089</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">new</span> HttpStaticFileServer(port).run();<span class="comment">//å¯åŠ¨æœåŠ¡  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpStaticFileServerInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer</span>&lt;<span class="title">SocketChannel</span>&gt; </span>&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">        <span class="comment">// Create a default pipeline implementation.</span></span><br><span class="line">        <span class="comment">// é€šé“çš„è¿æ¥ç‚¹</span></span><br><span class="line">        ChannelPipeline pipeline = ch.pipeline();  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Uncomment the following line if you want HTTPS  </span></span><br><span class="line">        <span class="comment">//SSLEngine engine = SecureChatSslContextFactory.getServerContext().createSSLEngine();  </span></span><br><span class="line">        <span class="comment">//engine.setUseClientMode(false);  </span></span><br><span class="line">        <span class="comment">//pipeline.addLast("ssl", new SslHandler(engine));  </span></span><br><span class="line">       <span class="comment">/** </span></span><br><span class="line"><span class="comment">        *   ï¼ˆ1ï¼‰ReadTimeoutHandlerï¼Œç”¨äºæ§åˆ¶è¯»å–æ•°æ®çš„æ—¶å€™çš„è¶…æ—¶ï¼Œ10è¡¨ç¤ºå¦‚æœ10ç§’é’Ÿéƒ½æ²¡æœ‰æ•°æ®è¯»å–äº†ï¼Œé‚£ä¹ˆå°±å¼•å‘è¶…æ—¶ï¼Œç„¶åå…³é—­å½“å‰çš„channel </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            ï¼ˆ2ï¼‰WriteTimeoutHandlerï¼Œç”¨äºæ§åˆ¶æ•°æ®è¾“å‡ºçš„æ—¶å€™çš„è¶…æ—¶ï¼Œæ„é€ å‚æ•°1è¡¨ç¤ºå¦‚æœæŒç»­1ç§’é’Ÿéƒ½æ²¡æœ‰æ•°æ®å†™äº†ï¼Œé‚£ä¹ˆå°±è¶…æ—¶ã€‚ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            ï¼ˆ3ï¼‰HttpRequestrianDecoderï¼Œè¿™ä¸ªhandlerç”¨äºä»è¯»å–çš„æ•°æ®ä¸­å°†httpæŠ¥æ–‡ä¿¡æ¯è§£æå‡ºæ¥ï¼Œæ— éå°±æ˜¯ä»€ä¹ˆrequestlineï¼Œheaderï¼Œbodyä»€ä¹ˆçš„ã€‚ã€‚ã€‚ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            ï¼ˆ4ï¼‰ç„¶åHttpObjectAggregatoråˆ™æ˜¯ç”¨äºå°†ä¸Šå–è§£æå‡ºæ¥çš„httpæŠ¥æ–‡çš„æ•°æ®ç»„è£…æˆä¸ºå°è£…å¥½çš„httprequestå¯¹è±¡ã€‚ã€‚ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            ï¼ˆ5ï¼‰HttpresponseEncoderï¼Œç”¨äºå°†ç”¨æˆ·è¿”å›çš„httpresponseç¼–ç æˆä¸ºhttpæŠ¥æ–‡æ ¼å¼çš„æ•°æ® </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            ï¼ˆ6ï¼‰HttpHandlerï¼Œè‡ªå®šä¹‰çš„handlerï¼Œç”¨äºå¤„ç†æ¥æ”¶åˆ°çš„httpè¯·æ±‚ã€‚ </span></span><br><span class="line"><span class="comment">        */</span>  </span><br><span class="line"></span><br><span class="line">        pipeline.addLast(<span class="string">"decoder"</span>, <span class="keyword">new</span> HttpRequestDecoder());<span class="comment">// http-requestè§£ç å™¨,httpæœåŠ¡å™¨ç«¯å¯¹requestè§£ç   </span></span><br><span class="line">        pipeline.addLast(<span class="string">"aggregator"</span>, <span class="keyword">new</span> HttpObjectAggregator(<span class="number">65536</span>));<span class="comment">//å¯¹ä¼ è¾“æ–‡ä»¶å¤§å°‘è¿›è¡Œé™åˆ¶  </span></span><br><span class="line">        pipeline.addLast(<span class="string">"encoder"</span>, <span class="keyword">new</span> HttpResponseEncoder());<span class="comment">//http-responseè§£ç å™¨,httpæœåŠ¡å™¨ç«¯å¯¹responseç¼–ç   </span></span><br><span class="line">        <span class="comment">// å‘å®¢æˆ·ç«¯å‘é€æ•°æ®çš„ä¸€ä¸ªHandler</span></span><br><span class="line">        pipeline.addLast(<span class="string">"chunkedWriter"</span>, <span class="keyword">new</span> ChunkedWriteHandler());  </span><br><span class="line"></span><br><span class="line">        pipeline.addLast(<span class="string">"handler"</span>, <span class="keyword">new</span> HttpStaticFileServerHandler(<span class="keyword">true</span>)); <span class="comment">// Specify false if SSL.(å¦‚æœæ˜¯ssl,å°±æŒ‡å®šä¸ºfalse)  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>serverHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpStaticFileServerHandler</span> <span class="keyword">extends</span> <span class="title">SimpleChannelInboundHandler</span>&lt;<span class="title">FullHttpRequest</span>&gt; </span>&#123;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String HTTP_DATE_FORMAT = <span class="string">"EEE, dd MMM yyyy HH:mm:ss zzz"</span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String HTTP_DATE_GMT_TIMEZONE = <span class="string">"GMT"</span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> HTTP_CACHE_SECONDS = <span class="number">60</span>;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">boolean</span> useSendFile;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpStaticFileServerHandler</span><span class="params">(<span class="keyword">boolean</span> useSendFile)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.useSendFile = useSendFile;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»ä¼¼channelReadæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">messageReceived</span><span class="params">(  </span></span></span><br><span class="line"><span class="function"><span class="params">            ChannelHandlerContext ctx, FullHttpRequest request)</span> <span class="keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">        <span class="comment">// è¯·æ±‚å¤´ä¿¡æ¯æ˜¯å¦æ­£ç¡®çš„</span></span><br><span class="line">        <span class="keyword">if</span> (!request.decoderResult().isSuccess()) &#123;  </span><br><span class="line">            sendError(ctx, BAD_REQUEST);  </span><br><span class="line">            <span class="keyword">return</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (request.method() != GET) &#123;  </span><br><span class="line">            sendError(ctx, METHOD_NOT_ALLOWED);  </span><br><span class="line">            <span class="keyword">return</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> String uri = request.uri();  </span><br><span class="line">        System.out.println(<span class="string">"-----uri----"</span>+uri);  </span><br><span class="line">        <span class="keyword">final</span> String path = sanitizeUri(uri);  </span><br><span class="line">        System.out.println(<span class="string">"-----path----"</span>+path);  </span><br><span class="line">        <span class="keyword">if</span> (path == <span class="keyword">null</span>) &#123;  </span><br><span class="line">            sendError(ctx, FORBIDDEN);  </span><br><span class="line">            <span class="keyword">return</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        File file = <span class="keyword">new</span> File(path);  </span><br><span class="line">        <span class="keyword">if</span> (file.isHidden() || !file.exists()) &#123;  </span><br><span class="line">            sendError(ctx, NOT_FOUND);  </span><br><span class="line">            <span class="keyword">return</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (file.isDirectory()) &#123;  </span><br><span class="line">            <span class="keyword">if</span> (uri.endsWith(<span class="string">"/"</span>)) &#123;  </span><br><span class="line">                sendListing(ctx, file);  </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                sendRedirect(ctx, uri + <span class="string">'/'</span>);  </span><br><span class="line">            &#125;  </span><br><span class="line">            <span class="keyword">return</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!file.isFile()) &#123;  </span><br><span class="line">            sendError(ctx, FORBIDDEN);  </span><br><span class="line">            <span class="keyword">return</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Cache Validation  </span></span><br><span class="line">        String ifModifiedSince = (String) request.headers().get(IF_MODIFIED_SINCE);  </span><br><span class="line">        <span class="keyword">if</span> (ifModifiedSince != <span class="keyword">null</span> &amp;&amp; !ifModifiedSince.isEmpty()) &#123;  </span><br><span class="line">            SimpleDateFormat dateFormatter = <span class="keyword">new</span> SimpleDateFormat(HTTP_DATE_FORMAT, Locale.US);  </span><br><span class="line">            Date ifModifiedSinceDate = dateFormatter.parse(ifModifiedSince);  </span><br><span class="line"></span><br><span class="line">            <span class="comment">// Only compare up to the second because the datetime format we send to the client  </span></span><br><span class="line">            <span class="comment">// does not have milliseconds  </span></span><br><span class="line">            <span class="keyword">long</span> ifModifiedSinceDateSeconds = ifModifiedSinceDate.getTime() / <span class="number">1000</span>;  </span><br><span class="line">            <span class="keyword">long</span> fileLastModifiedSeconds = file.lastModified() / <span class="number">1000</span>;  </span><br><span class="line">            <span class="keyword">if</span> (ifModifiedSinceDateSeconds == fileLastModifiedSeconds) &#123;  </span><br><span class="line">                sendNotModified(ctx);  </span><br><span class="line">                <span class="keyword">return</span>;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">          <span class="comment">// æ–‡ä»¶ä¸‹è½½</span></span><br><span class="line">        RandomAccessFile raf;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            raf = <span class="keyword">new</span> RandomAccessFile(file, <span class="string">"r"</span>);  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException fnfe) &#123;  </span><br><span class="line">            sendError(ctx, NOT_FOUND);  </span><br><span class="line">            <span class="keyword">return</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">long</span> fileLength = raf.length();  </span><br><span class="line"></span><br><span class="line">        HttpResponse response = <span class="keyword">new</span> DefaultHttpResponse(HTTP_1_1, OK);  </span><br><span class="line">        <span class="comment">//setContentLength(response, fileLength);  </span></span><br><span class="line">        HttpHeaderUtil.setContentLength(response, fileLength);</span><br><span class="line">        setContentTypeHeader(response, file);  </span><br><span class="line">        setDateAndCacheHeaders(response, file);  </span><br><span class="line">        <span class="keyword">if</span> (HttpHeaderUtil.isKeepAlive(request)) &#123;</span><br><span class="line"></span><br><span class="line">            response.headers().set(CONNECTION, HttpHeaderValues.KEEP_ALIVE);  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write the initial line and the header.  </span></span><br><span class="line">        ctx.write(response);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write the content.  </span></span><br><span class="line">        ChannelFuture sendFileFuture;  </span><br><span class="line">        <span class="keyword">if</span> (useSendFile) &#123;  </span><br><span class="line">            sendFileFuture =  </span><br><span class="line">                    ctx.write(<span class="keyword">new</span> DefaultFileRegion(raf.getChannel(), <span class="number">0</span>, fileLength), ctx.newProgressivePromise());  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            sendFileFuture =  </span><br><span class="line">                    ctx.write(<span class="keyword">new</span> ChunkedFile(raf, <span class="number">0</span>, fileLength, <span class="number">8192</span>), ctx.newProgressivePromise());  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        sendFileFuture.addListener(<span class="keyword">new</span> ChannelProgressiveFutureListener() &#123;  </span><br><span class="line">            <span class="meta">@Override</span>  </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationProgressed</span><span class="params">(ChannelProgressiveFuture future, <span class="keyword">long</span> progress, <span class="keyword">long</span> total)</span> </span>&#123;  </span><br><span class="line">                <span class="keyword">if</span> (total &lt; <span class="number">0</span>) &#123; <span class="comment">// total unknown  </span></span><br><span class="line">                    System.err.println(<span class="string">"Transfer progress: "</span> + progress);  </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                    System.err.println(<span class="string">"Transfer progress: "</span> + progress + <span class="string">" / "</span> + total);  </span><br><span class="line">                &#125;  </span><br><span class="line">            &#125;  </span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span>  </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationComplete</span><span class="params">(ChannelProgressiveFuture future)</span> <span class="keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">                System.err.println(<span class="string">"Transfer complete."</span>);  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write the end marker  </span></span><br><span class="line">        ChannelFuture lastContentFuture = ctx.writeAndFlush(LastHttpContent.EMPTY_LAST_CONTENT);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Decide whether to close the connection or not.  </span></span><br><span class="line">        <span class="keyword">if</span> (!HttpHeaderUtil.isKeepAlive(request)) &#123;  </span><br><span class="line">            <span class="comment">// Close the connection when the whole content is written out.  </span></span><br><span class="line">            lastContentFuture.addListener(ChannelFutureListener.CLOSE);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">        cause.printStackTrace();  </span><br><span class="line">        <span class="keyword">if</span> (ctx.channel().isActive()) &#123;  </span><br><span class="line">            sendError(ctx, INTERNAL_SERVER_ERROR);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern INSECURE_URI = Pattern.compile(<span class="string">".*[&lt;&gt;&amp;\"].*"</span>);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * è·¯å¾„è§£ç  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> uri </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">sanitizeUri</span><span class="params">(String uri)</span> </span>&#123;  </span><br><span class="line">        <span class="comment">// Decode the path.  </span></span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            uri = URLDecoder.decode(uri, <span class="string">"UTF-8"</span>);  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;  </span><br><span class="line">            <span class="keyword">try</span> &#123;  </span><br><span class="line">                uri = URLDecoder.decode(uri, <span class="string">"ISO-8859-1"</span>);  </span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e1) &#123;  </span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Error();  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!uri.startsWith(<span class="string">"/"</span>)) &#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Convert file separators.  </span></span><br><span class="line">        uri = uri.replace(<span class="string">'/'</span>, File.separatorChar);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Simplistic dumb security check.  </span></span><br><span class="line">        <span class="comment">// You will have to do something serious in the production environment.  </span></span><br><span class="line">        <span class="keyword">if</span> (uri.contains(File.separator + <span class="string">'.'</span>) ||  </span><br><span class="line">            uri.contains(<span class="string">'.'</span> + File.separator) ||  </span><br><span class="line">            uri.startsWith(<span class="string">"."</span>) || uri.endsWith(<span class="string">"."</span>) ||  </span><br><span class="line">            INSECURE_URI.matcher(uri).matches()) &#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Convert to absolute path.  </span></span><br><span class="line">        <span class="keyword">return</span> System.getProperty(<span class="string">"user.dir"</span>) + File.separator + uri;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern ALLOWED_FILE_NAME = Pattern.compile(<span class="string">"[A-Za-z0-9][-_A-Za-z0-9\\.]*"</span>);  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendListing</span><span class="params">(ChannelHandlerContext ctx, File dir)</span> </span>&#123;  </span><br><span class="line">        FullHttpResponse response = <span class="keyword">new</span> DefaultFullHttpResponse(HTTP_1_1, OK);  </span><br><span class="line">        response.headers().set(CONTENT_TYPE, <span class="string">"text/html; charset=UTF-8"</span>);  </span><br><span class="line"></span><br><span class="line">        StringBuilder buf = <span class="keyword">new</span> StringBuilder();  </span><br><span class="line">        String dirPath = dir.getPath();  </span><br><span class="line"></span><br><span class="line">        buf.append(<span class="string">"&lt;!DOCTYPE html&gt;\r\n"</span>);  </span><br><span class="line">        buf.append(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;"</span>);  </span><br><span class="line">        buf.append(<span class="string">"Listing of: "</span>);  </span><br><span class="line">        buf.append(dirPath);  </span><br><span class="line">        buf.append(<span class="string">"&lt;/title&gt;&lt;/head&gt;&lt;body&gt;\r\n"</span>);  </span><br><span class="line"></span><br><span class="line">        buf.append(<span class="string">"&lt;h3&gt;Listing of: "</span>);  </span><br><span class="line">        buf.append(dirPath);  </span><br><span class="line">        buf.append(<span class="string">"&lt;/h3&gt;\r\n"</span>);  </span><br><span class="line"></span><br><span class="line">        buf.append(<span class="string">"&lt;ul&gt;"</span>);  </span><br><span class="line">        buf.append(<span class="string">"&lt;li&gt;&lt;a href=\"../\"&gt;..&lt;/a&gt;&lt;/li&gt;\r\n"</span>);  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (File f: dir.listFiles()) &#123;  </span><br><span class="line">            <span class="keyword">if</span> (f.isHidden() || !f.canRead()) &#123;  </span><br><span class="line">                <span class="keyword">continue</span>;  </span><br><span class="line">            &#125;  </span><br><span class="line"></span><br><span class="line">            String name = f.getName();  </span><br><span class="line">            <span class="keyword">if</span> (!ALLOWED_FILE_NAME.matcher(name).matches()) &#123;  </span><br><span class="line">                <span class="keyword">continue</span>;  </span><br><span class="line">            &#125;  </span><br><span class="line"></span><br><span class="line">            buf.append(<span class="string">"&lt;li&gt;&lt;a href=\""</span>);  </span><br><span class="line">            buf.append(name);  </span><br><span class="line">            buf.append(<span class="string">"\"&gt;"</span>);  </span><br><span class="line">            buf.append(name);  </span><br><span class="line">            buf.append(<span class="string">"&lt;/a&gt;&lt;/li&gt;\r\n"</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        buf.append(<span class="string">"&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt;\r\n"</span>);  </span><br><span class="line">        ByteBuf buffer = Unpooled.copiedBuffer(buf, CharsetUtil.UTF_8);  </span><br><span class="line">        response.content().writeBytes(buffer);  </span><br><span class="line">        buffer.release();  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Close the connection as soon as the error message is sent.  </span></span><br><span class="line">        ctx.writeAndFlush(response).addListener(ChannelFutureListener.CLOSE);  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendRedirect</span><span class="params">(ChannelHandlerContext ctx, String newUri)</span> </span>&#123;  </span><br><span class="line">        FullHttpResponse response = <span class="keyword">new</span> DefaultFullHttpResponse(HTTP_1_1, FOUND);  </span><br><span class="line">        response.headers().set(LOCATION, newUri);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Close the connection as soon as the error message is sent.  </span></span><br><span class="line">        ctx.writeAndFlush(response).addListener(ChannelFutureListener.CLOSE);  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendError</span><span class="params">(ChannelHandlerContext ctx, HttpResponseStatus status)</span> </span>&#123;  </span><br><span class="line">        FullHttpResponse response = <span class="keyword">new</span> DefaultFullHttpResponse(  </span><br><span class="line">                HTTP_1_1, status, Unpooled.copiedBuffer(<span class="string">"Failure: "</span> + status.toString() + <span class="string">"\r\n"</span>, CharsetUtil.UTF_8));  </span><br><span class="line">        response.headers().set(CONTENT_TYPE, <span class="string">"text/plain; charset=UTF-8"</span>);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Close the connection as soon as the error message is sent.  </span></span><br><span class="line">        ctx.writeAndFlush(response).addListener(ChannelFutureListener.CLOSE);  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * When file timestamp is the same as what the browser is sending up, send a "304 Not Modified" </span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ctx </span></span><br><span class="line"><span class="comment">     *            Context </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendNotModified</span><span class="params">(ChannelHandlerContext ctx)</span> </span>&#123;  </span><br><span class="line">        FullHttpResponse response = <span class="keyword">new</span> DefaultFullHttpResponse(HTTP_1_1, NOT_MODIFIED);  </span><br><span class="line">        setDateHeader(response);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Close the connection as soon as the error message is sent.  </span></span><br><span class="line">        ctx.writeAndFlush(response).addListener(ChannelFutureListener.CLOSE);  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * Sets the Date header for the HTTP response </span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response </span></span><br><span class="line"><span class="comment">     *            HTTP response </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setDateHeader</span><span class="params">(FullHttpResponse response)</span> </span>&#123;  </span><br><span class="line">        SimpleDateFormat dateFormatter = <span class="keyword">new</span> SimpleDateFormat(HTTP_DATE_FORMAT, Locale.US);  </span><br><span class="line">        dateFormatter.setTimeZone(TimeZone.getTimeZone(HTTP_DATE_GMT_TIMEZONE));  </span><br><span class="line"></span><br><span class="line">        Calendar time = <span class="keyword">new</span> GregorianCalendar();  </span><br><span class="line">        response.headers().set(DATE, dateFormatter.format(time.getTime()));  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * Sets the Date and Cache headers for the HTTP Response </span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response </span></span><br><span class="line"><span class="comment">     *            HTTP response </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileToCache </span></span><br><span class="line"><span class="comment">     *            file to extract content type </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setDateAndCacheHeaders</span><span class="params">(HttpResponse response, File fileToCache)</span> </span>&#123;  </span><br><span class="line">        SimpleDateFormat dateFormatter = <span class="keyword">new</span> SimpleDateFormat(HTTP_DATE_FORMAT, Locale.US);  </span><br><span class="line">        dateFormatter.setTimeZone(TimeZone.getTimeZone(HTTP_DATE_GMT_TIMEZONE));  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Date header  </span></span><br><span class="line">        Calendar time = <span class="keyword">new</span> GregorianCalendar();  </span><br><span class="line">        response.headers().set(DATE, dateFormatter.format(time.getTime()));  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add cache headers  </span></span><br><span class="line">        time.add(Calendar.SECOND, HTTP_CACHE_SECONDS);  </span><br><span class="line">        response.headers().set(EXPIRES, dateFormatter.format(time.getTime()));  </span><br><span class="line">        response.headers().set(CACHE_CONTROL, <span class="string">"private, max-age="</span> + HTTP_CACHE_SECONDS);  </span><br><span class="line">        response.headers().set(  </span><br><span class="line">                LAST_MODIFIED, dateFormatter.format(<span class="keyword">new</span> Date(fileToCache.lastModified())));  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * Sets the content type header for the HTTP Response </span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response </span></span><br><span class="line"><span class="comment">     *            HTTP response </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file </span></span><br><span class="line"><span class="comment">     *            file to extract content type </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setContentTypeHeader</span><span class="params">(HttpResponse response, File file)</span> </span>&#123;  </span><br><span class="line">        MimetypesFileTypeMap mimeTypesMap = <span class="keyword">new</span> MimetypesFileTypeMap();  </span><br><span class="line">        response.headers().set(CONTENT_TYPE, mimeTypesMap.getContentType(file.getPath()));  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æµæ•°æ®çš„ä¼ è¾“å¤„ç†</strong> </p>
<p>â€‹        åœ¨åŸºäºæµçš„ä¼ è¾“é‡Œæ¯”å¦‚ <em>TCP/IP</em>ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®ä¼šå…ˆè¢«å­˜å‚¨åˆ°ä¸€ä¸ª <em>socket</em> æ¥æ”¶ç¼“å†²é‡Œã€‚ä¸ å¹¸çš„æ˜¯ï¼ŒåŸºäºæµçš„ä¼ è¾“å¹¶ä¸æ˜¯ä¸€ä¸ªæ•°æ®åŒ…é˜Ÿåˆ—ï¼Œè€Œæ˜¯ä¸€ä¸ªå­—èŠ‚é˜Ÿåˆ—ã€‚å³ä½¿ä½ å‘é€äº† <em>2</em> ä¸ªç‹¬ç«‹ çš„æ•°æ®åŒ…ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿä¸ä¼šä½œä¸º <em>2</em> ä¸ªæ¶ˆæ¯å¤„ç†è€Œä»…ä»…æ˜¯ä½œä¸ºä¸€è¿ä¸²çš„å­—èŠ‚è€Œè¨€ã€‚å› æ­¤è¿™æ˜¯ä¸ èƒ½ä¿è¯ä½ è¿œç¨‹å†™å…¥çš„æ•°æ®å°±ä¼šå‡†ç¡®åœ°è¯»å–ã€‚æ‰€ä»¥ä¸€ä¸ªæ¥æ”¶æ–¹ä¸ç®¡ä»–æ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯ï¼Œéƒ½ åº”è¯¥æŠŠæ¥æ”¶åˆ°çš„æ•°æ®æ•´ç†æˆä¸€ä¸ªæˆ–è€…å¤šä¸ªæ›´æœ‰æ„æ€å¹¶ä¸”èƒ½å¤Ÿè®©ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘æ›´å¥½ç†è§£çš„ æ•°æ®ã€‚ </p>
<p>åœ¨å¤„ç†æµæ•°æ®ç²˜åŒ…æ‹†åŒ…æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹è¿°å¤„ç†æ–¹å¼ï¼š </p>
<p>ä½¿ç”¨å®šé•¿æ•°æ®å¤„ç†ï¼Œå¦‚ï¼šæ¯ä¸ªå®Œæ•´è¯·æ±‚æ•°æ®é•¿åº¦ä¸º <em>8</em> å­—èŠ‚ç­‰ã€‚ï¼ˆ<em>FixedLengthFrameDecoder</em>ï¼‰ </p>
<p>ä½¿ç”¨ç‰¹æ®Šåˆ†éš”ç¬¦çš„æ–¹å¼å¤„ç†ï¼Œå¦‚ï¼šæ¯ä¸ªå®Œæ•´è¯·æ±‚æ•°æ®æœ«å°¾ä½¿ç”¨<em>â€™\0â€™</em>ä½œä¸ºæ•°æ®ç»“æŸæ ‡è®°ã€‚ï¼ˆ<em>DelimiterBasedFrameDecoder</em>ï¼‰ </p>
<p>ä½¿ç”¨è‡ªå®šä¹‰åè®®æ–¹å¼å¤„ç†ï¼Œå¦‚ï¼š<em>http</em> åè®®æ ¼å¼ç­‰ã€‚ </p>
<p>ä½¿ç”¨ <em>POJO</em> æ¥æ›¿ä»£ä¼ é€’çš„æµæ•°æ®ï¼Œå¦‚ï¼šæ¯ä¸ªå®Œæ•´çš„è¯·æ±‚æ•°æ®éƒ½æ˜¯ä¸€ä¸ª <em>RequestMessage</em> å¯¹è±¡ï¼Œåœ¨ <em>Java</em> è¯­è¨€ä¸­ï¼Œä½¿ç”¨ <em>POJO</em> æ›´ç¬¦åˆè¯­ç§ç‰¹æ€§ï¼Œæ¨èä½¿ç”¨ã€‚</p>
<p>è½¬è½½è‡³å¾®ä¿¡å…¬ä¼—å·ã€ŠJavaæ‚£è€…ã€‹ã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> å¹¶å‘å’Œå¤šçº¿ç¨‹ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å…³äºfastjsonè§£æåçš„å±æ€§æ’åºé—®é¢˜è§£å†³æ–¹æ¡ˆ]]></title>
      <url>/%E5%85%B3%E4%BA%8Efastjson%E8%A7%A3%E6%9E%90%E5%90%8E%E7%9A%84%E5%B1%9E%E6%80%A7%E6%8E%92%E5%BA%8F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html</url>
      <content type="html"><![CDATA[<h2 id="é—®é¢˜èµ·å› ï¼š"><a href="#é—®é¢˜èµ·å› ï¼š" class="headerlink" title="é—®é¢˜èµ·å› ï¼š"></a>é—®é¢˜èµ·å› ï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String testJson = <span class="string">"&#123;\"lh_u\":32,\"ps\":7,\"qt\":24,\"ns\":87,\"gm\":11,\"dp\":2,\"lh_ua\":34,\"ft\":82,\"jzsj\":\"24æ—¶\",\"lg\":71,\"yt\":6,\"jzrq\":\"3æœˆ4æ—¥\",\"ba\":62&#125;"</span>;</span><br><span class="line">JSONObject jsonObject = JSON.parseObject(jsonString); ----- â‘ </span><br><span class="line">System.out.println(jsonObject.toJSONString());</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°æ–¹æ³•å¾—åˆ°çš„jsonObjectå±æ€§æ’åºå’Œå­—ç¬¦ä¸²çš„å­—æ®µæ’åºæ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœæƒ³å¯¹jsonObjectçš„å±æ€§è¿›è¡Œæ’åºï¼Œå¯ä»¥åšæ­¤å¤„ç†ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JSONObject jsonObjectNew1 = JSON.parseObject(JSON.toJSONString(jsonObject,SerializerFeature.MapSortField));</span><br><span class="line">JSONObject jsonObjectNew2 = JSON.parseObject(JSON.toJSONString(jsonObject,SerializerFeature.MapSortField),Feature.OrderedField);</span><br></pre></td></tr></table></figure></p>
<p>å°†jsonObjectè½¬æˆæŒ‰å­—æ¯æ’åºçš„å­—ç¬¦ä¸²ï¼Œç„¶åå†è½¬æˆjsonObjectå¯¹è±¡ï¼Œå†æ¬¡è½¬æˆjsonObjectæ—¶å¦‚æœä¸åŠ Feature.OrderedFieldï¼Œåˆ™jsonObjectå’Œâ‘ ä¸­çš„ä¸€æ ·ï¼ŒåŠ ä¸Šåˆ™ä¿æŒå±æ€§é¡ºåºä¸å˜ã€‚<br><span class="exturl" data-url="aHR0cHM6Ly93d3cub3NjaGluYS5uZXQvcXVlc3Rpb24vMjMzNjU2MF8yMjk0Nzg/c29ydD10aW1l" title="https://www.oschina.net/question/2336560_229478?sort=time">å‚è€ƒæ–‡ç« <i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> fastjson </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[hashcodeè¯¦è§£]]></title>
      <url>/hashcode%E8%AF%A6%E8%A7%A3.html</url>
      <content type="html"><![CDATA[<h2 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h2><p>å†™è¿™ç¯‡æ–‡ç« æ˜¯å› ä¸ºåœ¨çœ‹hashMapæºç æ—¶é‡åˆ°æœ‰ä»€ä¹ˆhashcodeå€¼ï¼Œç„¶åå°±å»æŸ¥ï¼Œè„‘è¢‹é‡Œé¢æ˜¯æœ‰æ˜ åƒçš„ï¼Œä¸å°±æ˜¯åœ¨Objectä¸­æœ‰equalså’Œhashcodeæ–¹æ³•å˜›ï¼Œè¿™åœ¨å­¦javaåŸºç¡€çš„æ—¶å€™å°±é‡åˆ°è¿‡ï¼Œä¸è¿‡é‚£æ—¶å€™æ— æ‰€è°“ï¼Œä¸æ‡‚å°±ä¸æ‡‚ï¼Œå°±ä¸€ç¬”å¸¦è¿‡å»äº†ï¼Œç„¶ååˆ°ç°åœ¨ï¼Œåˆå›è¿‡å¤´æ¥è¡¥æœ¬åº”è¯¥ä»¥å‰å°±ææ¸…æ¥šçš„é—®é¢˜ï¼Œæ‰€ä»¥çŸ¥é“äº†ä¸€ä¸ªé“ç†ï¼Œå­¦ä¹ ä¸æ˜¯ä¸€ä¸ªè¿½æ±‚é€Ÿåº¦çš„äº‹æƒ…ï¼Œä¸æ‡‚å°±è¦å»æŸ¥æ¸…æ¥šï¼Œå¼„æ˜ç™½ï¼Œä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œè™½ç„¶åˆšå¼€å§‹å¯èƒ½ä¼šå¾ˆæ…¢ï¼Œä¸è¿‡æ…¢æ…¢çš„ï¼Œå­¦ä¹ çš„å¤šäº†ï¼Œç†è§£çš„å¤šäº†ï¼Œä¼šè¶Šæ¥è¶Šå¿«çš„ã€‚è¶Šæ¥è¶Šè½»æ¾ï¼Œä¸è‡³äºç°åœ¨è¿˜åœ¨è¡¥åŸæ¥çš„çŸ¥è¯†ã€‚åæ‚”ä¹Ÿæ— äº‹äºè¡¥äº†ï¼Œèµ·ç ç°åœ¨çŸ¥é“äº†è¿™ä¸ªé“ç†ï¼Œå­¦ä¹ æ°¸è¿œéƒ½ä¸ä¼šè¿Ÿï¼Œåªè¦çªç„¶ä¸€å¤©çš„é†’æ‚Ÿï¼Œä¸€åˆ‡éƒ½ä¼šæ…¢æ…¢å¥½èµ·æ¥çš„ã€‚ã€€ã€€<br>å¼„æ‡‚è¿™çŸ¥è¯†ç‚¹ï¼ŒæŸ¥äº†å¾ˆå¤šåšæ–‡ï¼Œå‘ç°å¾ˆå¤šç±»ä¼¼ï¼Œæˆ‘ä¸çŸ¥é“å“ªä¸ªæ‰æ˜¯åŸè‘—ï¼Œæ‰€ä»¥å¤åˆ¶ä¸€ä¸ªæˆ‘è§‰å¾—æ¯”è¾ƒå¥½çš„ï¼Œä¸è¿‡çœ‹äº†ä¹Ÿæœ‰äº›è¿·æƒ‘ï¼Œæˆ‘ä¼šå†™ä¸‹æ¥ã€‚<br><span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhbmd5dWFuMTk4ODA2MDYvYXJ0aWNsZS9kZXRhaWxzLzUxMjQwMzcy" title="http://blog.csdn.net/zhangyuan19880606/article/details/51240372">å¼•ç”¨åšæ–‡<i class="fa fa-external-link"></i></span><br><a id="more"></a></p>
<h2 id="ä¸€ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="1ã€hashå’Œhashè¡¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1ã€hashå’Œhashè¡¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1ã€hashå’Œhashè¡¨æ˜¯ä»€ä¹ˆï¼Ÿã€€ã€€ã€€"></a>1ã€hashå’Œhashè¡¨æ˜¯ä»€ä¹ˆï¼Ÿã€€ã€€ã€€</h3><p>æƒ³è¦çŸ¥é“è¿™ä¸ªhashcodeï¼Œé¦–å…ˆå¾—çŸ¥é“hashï¼Œé€šè¿‡ç™¾åº¦ç™¾ç§‘çœ‹ä¸€ä¸‹</p>
<p>hashæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸­çš„å®ç°å°±æ˜¯ä¸€ç§ç®—æ³•ï¼Œå°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„ç®—æ³•æ¥å¾—åˆ°ä¸€ä¸ªhashå€¼ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦çŸ¥é“å¦ä¸€ä¸ªä¸œè¥¿ï¼Œhashè¡¨ï¼Œé€šè¿‡hashç®—æ³•å¾—åˆ°çš„hashå€¼å°±åœ¨è¿™å¼ hashè¡¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œhashè¡¨å°±æ˜¯æ‰€æœ‰çš„hashå€¼ç»„æˆçš„ï¼Œæœ‰å¾ˆå¤šç§hashå‡½æ•°ï¼Œä¹Ÿå°±ä»£è¡¨ç€æœ‰å¾ˆå¤šç§ç®—æ³•å¾—åˆ°hashå€¼ï¼Œå¦‚ä¸Šé¢æˆªå›¾çš„ä¸‰ç§ï¼Œç­‰ä¼šæˆ‘ä»¬å°±æ‹¿ç¬¬ä¸€ç§æ¥è¯´ã€‚</p>
<h3 id="2ã€hashcode"><a href="#2ã€hashcode" class="headerlink" title="2ã€hashcodeã€€"></a>2ã€hashcodeã€€</h3><p>æœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œè¿™é‡Œè®²è§£å°±ç®€å•äº†ï¼Œhashcodeå°±æ˜¯é€šè¿‡hashå‡½æ•°å¾—æ¥çš„ï¼Œé€šä¿—çš„è¯´ï¼Œå°±æ˜¯é€šè¿‡æŸä¸€ç§ç®—æ³•å¾—åˆ°çš„ï¼Œhashcodeå°±æ˜¯åœ¨hashè¡¨ä¸­æœ‰å¯¹åº”çš„ä½ç½®ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰hashcodeï¼Œå¯¹è±¡çš„hashcodeæ€ä¹ˆå¾—æ¥çš„å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆä¸€ä¸ªå¯¹è±¡è‚¯å®šæœ‰ç‰©ç†åœ°å€ï¼Œåœ¨åˆ«çš„åšæ–‡ä¸­ä¼šhashcodeè¯´æˆæ˜¯ä»£è¡¨å¯¹è±¡çš„åœ°å€ï¼Œè¿™é‡Œè‚¯å®šä¼šè®©è¯»è€…å½¢æˆè¯¯åŒºï¼Œå¯¹è±¡çš„ç‰©ç†åœ°å€è·Ÿè¿™ä¸ªhashcodeåœ°å€ä¸ä¸€æ ·ï¼Œhashcodeä»£è¡¨å¯¹è±¡çš„åœ°å€è¯´çš„æ˜¯å¯¹è±¡åœ¨hashè¡¨ä¸­çš„ä½ç½®ï¼Œç‰©ç†åœ°å€è¯´çš„å¯¹è±¡å­˜æ”¾åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œé‚£ä¹ˆå¯¹è±¡å¦‚ä½•å¾—åˆ°hashcodeå‘¢ï¼Ÿé€šè¿‡å¯¹è±¡çš„å†…éƒ¨åœ°å€(ä¹Ÿå°±æ˜¯ç‰©ç†åœ°å€)è½¬æ¢æˆä¸€ä¸ªæ•´æ•°ï¼Œç„¶åè¯¥æ•´æ•°é€šè¿‡hashå‡½æ•°çš„ç®—æ³•å°±å¾—åˆ°äº†hashcodeï¼Œæ‰€ä»¥ï¼Œhashcodeæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯åœ¨hashè¡¨ä¸­å¯¹åº”çš„ä½ç½®ã€‚è¿™é‡Œå¦‚æœè¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šçš„è¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œhashè¡¨ä¸­æœ‰ hashcodeä¸º1ã€hashcodeä¸º2ã€(â€¦)3ã€4ã€5ã€6ã€7ã€8è¿™æ ·å…«ä¸ªä½ç½®ï¼Œæœ‰ä¸€ä¸ªå¯¹è±¡Aï¼ŒAçš„ç‰©ç†åœ°å€è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°17(è¿™æ˜¯å‡å¦‚)ï¼Œå°±é€šè¿‡ç›´æ¥å–ä½™ç®—æ³•ï¼Œ17%8=1ï¼Œé‚£ä¹ˆAçš„hashcodeå°±ä¸º1ï¼Œä¸”Aå°±åœ¨hashè¡¨ä¸­1çš„ä½ç½®ã€‚è‚¯å®šä¼šæœ‰å…¶ä»–ç–‘é—®ï¼Œæ¥ç€çœ‹ä¸‹é¢ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¸ªä¾‹å­æ¥è®©ä½ ä»¬çŸ¥é“ä»€ä¹ˆæ˜¯hashcodeçš„æ„ä¹‰ã€‚</p>
<h2 id="äºŒã€hashcodeæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ"><a href="#äºŒã€hashcodeæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ" class="headerlink" title="äºŒã€hashcodeæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ"></a>äºŒã€hashcodeæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</h2><p>å‰é¢è¯´äº†è¿™ä¹ˆå¤šå…³äºhashå‡½æ•°ï¼Œå’Œhashcodeæ˜¯æ€ä¹ˆå¾—æ¥çš„ï¼Œè¿˜æœ‰hashcodeå¯¹åº”çš„æ˜¯hashè¡¨ä¸­çš„ä½ç½®ï¼Œå¯èƒ½å¤§å®¶å°±æœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆhashcodeä¸ç›´æ¥å†™ç‰©ç†åœ°å€å‘¢ï¼Œè¿˜è¦å¦å¤–ç”¨ä¸€å¼ hashè¡¨æ¥ä»£è¡¨å¯¹è±¡çš„åœ°å€ï¼Ÿæ¥ä¸‹æ¥å°±å‘Šè¯‰ä½ hashcodeçš„ä½œç”¨ï¼Œ</p>
<p>1ã€HashCodeçš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†æŸ¥æ‰¾çš„å¿«æ·æ€§ï¼ŒHashCodeæ˜¯ç”¨æ¥åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ç¡®å®šå¯¹è±¡çš„å­˜å‚¨åœ°å€çš„(ååŠå¥è¯´çš„ç”¨hashcodeæ¥ä»£è¡¨å¯¹è±¡å°±æ˜¯åœ¨hashè¡¨ä¸­çš„ä½ç½®)<br> ä¸ºä»€ä¹ˆhashcodeå°±æŸ¥æ‰¾çš„æ›´å¿«ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªèƒ½å­˜æ”¾1000ä¸ªæ•°è¿™æ ·å¤§çš„å†…å­˜ä¸­ï¼Œåœ¨å…¶ä¸­è¦å­˜æ”¾1000ä¸ªä¸ä¸€æ ·çš„æ•°å­—ï¼Œç”¨æœ€ç¬¨çš„æ–¹æ³•ï¼Œå°±æ˜¯å­˜ä¸€ä¸ªæ•°å­—ï¼Œå°±éå†ä¸€éï¼Œçœ‹æœ‰æ²¡æœ‰ç›¸åŒå¾—æ•°ï¼Œå½“å­˜äº†900ä¸ªæ•°å­—ï¼Œå¼€å§‹å­˜901ä¸ªæ•°å­—çš„æ—¶å€™ï¼Œå°±éœ€è¦è·Ÿ900ä¸ªæ•°å­—è¿›è¡Œå¯¹æ¯”ï¼Œè¿™æ ·å°±å¾ˆéº»çƒ¦ï¼Œå¾ˆæ˜¯æ¶ˆè€—æ—¶é—´ï¼Œç”¨hashcodeæ¥è®°å½•å¯¹è±¡çš„ä½ç½®ï¼Œæ¥çœ‹ä¸€ä¸‹ã€‚hashè¡¨ä¸­æœ‰1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ä¸ªä½ç½®ï¼Œå­˜ç¬¬ä¸€ä¸ªæ•°ï¼Œhashcodeä¸º1ï¼Œè¯¥æ•°å°±æ”¾åœ¨hashè¡¨ä¸­1çš„ä½ç½®ï¼Œå­˜åˆ°100ä¸ªæ•°å­—ï¼Œhashè¡¨ä¸­8ä¸ªä½ç½®ä¼šæœ‰å¾ˆå¤šæ•°å­—äº†ï¼Œ1ä¸­å¯èƒ½æœ‰20ä¸ªæ•°å­—ï¼Œå­˜101ä¸ªæ•°å­—æ—¶ï¼Œä»–å…ˆæŸ¥hashcodeå€¼å¯¹åº”çš„ä½ç½®ï¼Œå‡è®¾ä¸º1ï¼Œé‚£ä¹ˆå°±æœ‰20ä¸ªæ•°å­—å’Œä»–çš„hashcodeç›¸åŒï¼Œä»–åªéœ€è¦è·Ÿè¿™20ä¸ªæ•°å­—ç›¸æ¯”è¾ƒ(equals)ï¼Œå¦‚æœæ¯ä¸€ä¸ªç›¸åŒï¼Œé‚£ä¹ˆå°±æ”¾åœ¨1è¿™ä¸ªä½ç½®ï¼Œè¿™æ ·æ¯”è¾ƒçš„æ¬¡æ•°å°±å°‘äº†å¾ˆå¤šï¼Œå®é™…ä¸Šhashè¡¨ä¸­æœ‰å¾ˆå¤šä½ç½®ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¾‹åªæœ‰8ä¸ªï¼Œæ‰€ä»¥æ¯”è¾ƒçš„æ¬¡æ•°ä¼šè®©ä½ è§‰å¾—ä¹ŸæŒºå¤šçš„ï¼Œå®é™…ä¸Šï¼Œå¦‚æœhashè¡¨å¾ˆå¤§ï¼Œé‚£ä¹ˆæ¯”è¾ƒçš„æ¬¡æ•°å°±å¾ˆå°‘å¾ˆå°‘äº†ã€‚  é€šè¿‡å¯¹åŸå§‹æ–¹æ³•å’Œä½¿ç”¨hashcodeæ–¹æ³•è¿›è¡Œå¯¹æ¯”ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†hashcodeçš„ä½œç”¨ï¼Œå¹¶ä¸”ä¸ºä»€ä¹ˆè¦ä½¿ç”¨hashcodeäº†</p>
<h2 id="ä¸‰ã€equalsæ–¹æ³•å’Œhashcodeçš„å…³ç³»ï¼Ÿ"><a href="#ä¸‰ã€equalsæ–¹æ³•å’Œhashcodeçš„å…³ç³»ï¼Ÿ" class="headerlink" title="ä¸‰ã€equalsæ–¹æ³•å’Œhashcodeçš„å…³ç³»ï¼Ÿ"></a>ä¸‰ã€equalsæ–¹æ³•å’Œhashcodeçš„å…³ç³»ï¼Ÿ</h2><p>é€šè¿‡å‰é¢è¿™ä¸ªä¾‹å­ï¼Œå¤§æ¦‚å¯ä»¥çŸ¥é“ï¼Œå…ˆé€šè¿‡hashcodeæ¥æ¯”è¾ƒï¼Œå¦‚æœhashcodeç›¸ç­‰ï¼Œé‚£ä¹ˆå°±ç”¨equalsæ–¹æ³•æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œç”¨ä¸ªä¾‹å­è¯´æ˜ï¼šä¸Šé¢è¯´çš„hashè¡¨ä¸­çš„8ä¸ªä½ç½®ï¼Œå°±å¥½æ¯”8ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶é‡Œèƒ½è£…å¾ˆå¤šçš„å¯¹è±¡ï¼Œå¯¹è±¡Aé€šè¿‡hashå‡½æ•°ç®—æ³•å¾—åˆ°å°†å®ƒæ”¾åˆ°1å·æ¡¶ä¸­ï¼Œå½“ç„¶è‚¯å®šæœ‰åˆ«çš„å¯¹è±¡ä¹Ÿä¼šæ”¾åˆ°1å·æ¡¶ä¸­ï¼Œå¦‚æœå¯¹è±¡Bä¹Ÿé€šè¿‡ç®—æ³•åˆ†åˆ°äº†1å·æ¡¶ï¼Œé‚£ä¹ˆå®ƒå¦‚ä½•è¯†åˆ«æ¡¶ä¸­å…¶ä»–å¯¹è±¡æ˜¯å¦å’Œå®ƒä¸€æ ·å‘¢ï¼Œè¿™æ—¶å€™å°±éœ€è¦equalsæ–¹æ³•æ¥è¿›è¡Œç­›é€‰äº†ã€‚<br>1ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡çš„HashCodeä¸€å®šä¹Ÿç›¸åŒ<br> 2ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„HashCodeç›¸åŒï¼Œä¸ä»£è¡¨ä¸¤ä¸ªå¯¹è±¡å°±ç›¸åŒï¼Œåªèƒ½è¯´æ˜è¿™ä¸¤ä¸ªå¯¹è±¡åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ï¼Œå­˜æ”¾äºåŒä¸€ä¸ªä½ç½®<br>è¿™ä¸¤æ¡ä½ ä»¬å°±èƒ½å¤Ÿç†è§£äº†ã€‚</p>
<h2 id="å››ã€ä¸ºä»€ä¹ˆequalsæ–¹æ³•é‡å†™çš„è¯ï¼Œå»ºè®®ä¹Ÿä¸€èµ·é‡å†™hashcodeæ–¹æ³•ï¼Ÿ"><a href="#å››ã€ä¸ºä»€ä¹ˆequalsæ–¹æ³•é‡å†™çš„è¯ï¼Œå»ºè®®ä¹Ÿä¸€èµ·é‡å†™hashcodeæ–¹æ³•ï¼Ÿ" class="headerlink" title="å››ã€ä¸ºä»€ä¹ˆequalsæ–¹æ³•é‡å†™çš„è¯ï¼Œå»ºè®®ä¹Ÿä¸€èµ·é‡å†™hashcodeæ–¹æ³•ï¼Ÿ"></a>å››ã€ä¸ºä»€ä¹ˆequalsæ–¹æ³•é‡å†™çš„è¯ï¼Œå»ºè®®ä¹Ÿä¸€èµ·é‡å†™hashcodeæ–¹æ³•ï¼Ÿ</h2><p>ï¼ˆå¦‚æœå¯¹è±¡çš„equalsæ–¹æ³•è¢«é‡å†™ï¼Œé‚£ä¹ˆå¯¹è±¡çš„HashCodeæ–¹æ³•ä¹Ÿå°½é‡é‡å†™ï¼‰ä¸¾ä¸ªä¾‹å­ï¼Œå…¶å®å°±æ˜ç™½äº†è¿™ä¸ªé“ç†ï¼Œæ¯”å¦‚ï¼šæœ‰ä¸ªAç±»é‡å†™äº†equalsæ–¹æ³•ï¼Œä½†æ˜¯æ²¡æœ‰é‡å†™hashCodeæ–¹æ³•ï¼Œçœ‹è¾“å‡ºç»“æœï¼Œå¯¹è±¡a1å’Œå¯¹è±¡a2ä½¿ç”¨equalsæ–¹æ³•ç›¸ç­‰ï¼ŒæŒ‰ç…§ä¸Šé¢çš„hashcodeçš„ç”¨æ³•ï¼Œé‚£ä¹ˆä»–ä»¬ä¸¤ä¸ªçš„hashcodeè‚¯å®šç›¸ç­‰ï¼Œä½†æ˜¯è¿™é‡Œç”±äºæ²¡é‡å†™hashcodeæ–¹æ³•ï¼Œä»–ä»¬ä¸¤ä¸ªhashcodeå¹¶ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨é‡å†™äº†equalsæ–¹æ³•åï¼Œå°½é‡ä¹Ÿé‡å†™äº†hashcodeæ–¹æ³•ï¼Œé€šè¿‡ä¸€å®šçš„ç®—æ³•ï¼Œä½¿ä»–ä»¬åœ¨equalsç›¸ç­‰æ—¶ï¼Œä¹Ÿä¼šæœ‰ç›¸åŒçš„hashcodeå€¼ã€‚</p>
<p>å®ä¾‹ï¼šç°åœ¨æ¥çœ‹ä¸€ä¸‹Stringçš„æºç ä¸­çš„equalsæ–¹æ³•å’Œhashcodeæ–¹æ³•ã€‚è¿™ä¸ªç±»å°±é‡å†™äº†è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œç°åœ¨ä¸ºä»€ä¹ˆéœ€è¦é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•äº†å§ï¼Ÿ<br>equalsæ–¹æ³•ï¼šå…¶å®è·Ÿæˆ‘ä¸Šé¢å†™çš„é‚£ä¸ªä¾‹å­æ˜¯ä¸€æ ·çš„åŸç†ï¼Œæ‰€ä»¥é€šè¿‡æºç åˆçŸ¥é“äº†Stringçš„equalsæ–¹æ³•éªŒè¯çš„æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å€¼æ˜¯å¦ä¸€æ ·ã€‚è¿˜æœ‰Doubleç±»ä¹Ÿé‡å†™äº†è¿™äº›æ–¹æ³•ã€‚å¾ˆå¤šç±»æœ‰æ¯”è¾ƒè¿™ç±»çš„ï¼Œéƒ½é‡å†™äº†è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå› ä¸ºåœ¨æ‰€æœ‰ç±»çš„çˆ¶ç±»Objectä¸­ã€‚equalsçš„åŠŸèƒ½å°±æ˜¯ â€œ==â€å·çš„åŠŸèƒ½ã€‚ä½ ä»¬è¿˜å¯ä»¥æ¯”è¾ƒStringå¯¹è±¡çš„equalså’Œ==çš„åŒºåˆ«å•¦ã€‚è¿™é‡Œä¸å†è¯´æ˜ã€‚</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vd2hnay9wLzYwNzE2MTcuaHRtbA==" title="https://www.cnblogs.com/whgk/p/6071617.html">è½¬è½½è‡³<i class="fa fa-external-link"></i></span></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[greenplumå®‰è£…ä¸éƒ¨ç½²ï¼ˆè¯¦ç»†ï¼‰]]></title>
      <url>/greenplum%E5%AE%89%E8%A3%85%E4%B8%8E%E9%83%A8%E7%BD%B2%EF%BC%88%E8%AF%A6%E7%BB%86%EF%BC%89.html</url>
      <content type="html"><![CDATA[<h2 id="ä¿®æ”¹ç³»ç»Ÿé…ç½®"><a href="#ä¿®æ”¹ç³»ç»Ÿé…ç½®" class="headerlink" title="ä¿®æ”¹ç³»ç»Ÿé…ç½®"></a>ä¿®æ”¹ç³»ç»Ÿé…ç½®</h2><h3 id="1-1-gpæœåŠ¡å™¨åˆ—è¡¨"><a href="#1-1-gpæœåŠ¡å™¨åˆ—è¡¨" class="headerlink" title="1.1  gpæœåŠ¡å™¨åˆ—è¡¨"></a>1.1  gpæœåŠ¡å™¨åˆ—è¡¨</h3><p>192.168.7.11  hadoop01   ä¸»èŠ‚ç‚¹<br>192.168.7.12  hadoop02   æ•°æ®èŠ‚ç‚¹1<br>192.168.7.13  hadoop03   æ•°æ®èŠ‚ç‚¹2<br>192.168.7.14  hadoop04   ä¸»èŠ‚ç‚¹åˆ‡æ¢å¤‡ä»½èŠ‚ç‚¹<br><a id="more"></a></p>
<h3 id="1-2-ä¿®æ”¹ç³»ç»Ÿé…ç½®é¡¹"><a href="#1-2-ä¿®æ”¹ç³»ç»Ÿé…ç½®é¡¹" class="headerlink" title="1.2 ä¿®æ”¹ç³»ç»Ÿé…ç½®é¡¹"></a>1.2 ä¿®æ”¹ç³»ç»Ÿé…ç½®é¡¹</h3><p>å…³é—­SELINUX<br>vi /etc/selinux/config<br>SELINUX=disabled</p>
<h3 id="1-3-å…³é—­é˜²ç«å¢™"><a href="#1-3-å…³é—­é˜²ç«å¢™" class="headerlink" title="1.3 å…³é—­é˜²ç«å¢™"></a>1.3 å…³é—­é˜²ç«å¢™</h3><p>systemctl status firewalld<br>systemctl stop firewalld.service<br>systemctl disable firewalld.service</p>
<h3 id="1-4-ä¿®æ”¹å†…æ ¸é…ç½®å‚æ•°-å¹¶æ‰§è¡Œ-sysctl-pä½¿ä¹‹ç”Ÿæ•ˆ"><a href="#1-4-ä¿®æ”¹å†…æ ¸é…ç½®å‚æ•°-å¹¶æ‰§è¡Œ-sysctl-pä½¿ä¹‹ç”Ÿæ•ˆ" class="headerlink" title="1.4 ä¿®æ”¹å†…æ ¸é…ç½®å‚æ•°,å¹¶æ‰§è¡Œ sysctl -pä½¿ä¹‹ç”Ÿæ•ˆ"></a>1.4 ä¿®æ”¹å†…æ ¸é…ç½®å‚æ•°,å¹¶æ‰§è¡Œ sysctl -pä½¿ä¹‹ç”Ÿæ•ˆ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysctl.conf</span><br><span class="line">kernel.shmmax = 500000000</span><br><span class="line">kernel.shmmni = 4096</span><br><span class="line">kernel.shmall = 4000000000</span><br><span class="line">kernel.sem = 2000 4096000 2000 2048</span><br><span class="line">kernel.sysrq = 1</span><br><span class="line">kernel.core_uses_pid = 1</span><br><span class="line">kernel.msgmnb = 65536</span><br><span class="line">kernel.msgmax = 65536</span><br><span class="line">kernel.msgmni = 2048</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.ip_forward = 0</span><br><span class="line">net.ipv4.conf.default.accept_source_route = 0</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 4096</span><br><span class="line">net.ipv4.conf.all.arp_filter = 1</span><br><span class="line">net.ipv4.ip_local_port_range = 1025 65535</span><br><span class="line">net.core.netdev_max_backlog = 10000</span><br><span class="line">net.core.rmem_max = 2097152</span><br><span class="line">net.core.wmem_max = 2097152</span><br><span class="line">vm.overcommit_memory = 2  (æœåŠ¡å™¨æ ¸æ•°ï¼Œæ ¹æ®å®é™…æƒ…å†µä¿®æ”¹å‚æ•°)</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/security/limits.conf</span><br><span class="line">* soft nofile 65536</span><br><span class="line">* hard nofile 65536</span><br><span class="line">* soft nproc 131072</span><br><span class="line">* hard nproc 131072</span><br></pre></td></tr></table></figure>
<h3 id="1-5-é…ç½®é›†ç¾¤ä¸­å„èŠ‚ç‚¹hostsä¿¡æ¯"><a href="#1-5-é…ç½®é›†ç¾¤ä¸­å„èŠ‚ç‚¹hostsä¿¡æ¯" class="headerlink" title="1.5 é…ç½®é›†ç¾¤ä¸­å„èŠ‚ç‚¹hostsä¿¡æ¯"></a>1.5 é…ç½®é›†ç¾¤ä¸­å„èŠ‚ç‚¹hostsä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line">192.168.7.11  hadoop01   </span><br><span class="line">192.168.7.12  hadoop02   </span><br><span class="line">192.168.7.13  hadoop03   </span><br><span class="line">192.168.7.14  hadoop04</span><br></pre></td></tr></table></figure>
<h2 id="å®‰è£…greenplum-db"><a href="#å®‰è£…greenplum-db" class="headerlink" title="å®‰è£…greenplum-db"></a>å®‰è£…greenplum-db</h2><h3 id="2-1-ä¸‹è½½greenplum"><a href="#2-1-ä¸‹è½½greenplum" class="headerlink" title="2.1 ä¸‹è½½greenplum"></a>2.1 ä¸‹è½½greenplum</h3><p><span class="exturl" data-url="aHR0cHM6Ly9ncmVlbnBsdW0uY24=" title="https://greenplum.cn">ä¸‹è½½åœ°å€<i class="fa fa-external-link"></i></span><br>æ‰§è¡Œå®‰è£…åŒ…ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh greenplum-db-6.1.0-rhel7-x86_64.rpm --nodeps --force</span><br></pre></td></tr></table></figure></p>
<h3 id="2-2-åˆ›å»ºgpadminç”¨æˆ·"><a href="#2-2-åˆ›å»ºgpadminç”¨æˆ·" class="headerlink" title="2.2 åˆ›å»ºgpadminç”¨æˆ·"></a>2.2 åˆ›å»ºgpadminç”¨æˆ·</h3><p>è§£å‹å®Œæˆåä»¥rootèº«ä»½åˆ›å»ºgpadminç”¨æˆ·å’Œç»„ï¼Œç”¨æ¥ç®¡ç†greenplum-db<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">groupadd gpadmin                    # åˆ›å»ºåˆ†ç»„    </span><br><span class="line">useradd gpadmin -g gpadmin            # åˆ›å»ºç”¨æˆ·å¹¶åˆ†é…ç»„    </span><br><span class="line">passwd gpadmin                        # ä¸ºgpadminåˆ†é…å¯†ç    </span><br><span class="line"> cd /usr/local/greenplum-db</span><br><span class="line"> chown -R gpadmin:gpadmin greenplum-db/    </span><br><span class="line">chown -R gpadmin:gpadmin greenplum-cc-web/</span><br></pre></td></tr></table></figure></p>
<h3 id="2-3-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#2-3-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="2.3 åˆ›å»ºé…ç½®æ–‡ä»¶"></a>2.3 åˆ›å»ºé…ç½®æ–‡ä»¶</h3><h4 id="åˆ‡æ¢åˆ°gpadminç”¨æˆ·ä¸‹"><a href="#åˆ‡æ¢åˆ°gpadminç”¨æˆ·ä¸‹" class="headerlink" title="åˆ‡æ¢åˆ°gpadminç”¨æˆ·ä¸‹"></a>åˆ‡æ¢åˆ°gpadminç”¨æˆ·ä¸‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su - gpadmin   </span><br><span class="line">mkdir -p /usr/local/greenplum-db/gpconfigs  </span><br><span class="line">cd /usr/local/greenplum-db/gpconfigs</span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºé…ç½®æ–‡ä»¶"></a>åˆ›å»ºé…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim hostfile_exkeys</span><br><span class="line">è¾“å…¥</span><br><span class="line">hadoop01</span><br><span class="line">hadoop02</span><br><span class="line">hadoop03</span><br><span class="line">hadoop04</span><br><span class="line">vi hostfile</span><br><span class="line">hadoop02</span><br><span class="line">hadoop03</span><br><span class="line">hadoop04</span><br></pre></td></tr></table></figure>
<h3 id="2-4-åœ¨gpadminå’Œrootç”¨æˆ·ä¸‹æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#2-4-åœ¨gpadminå’Œrootç”¨æˆ·ä¸‹æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="2.4 åœ¨gpadminå’Œrootç”¨æˆ·ä¸‹æ·»åŠ ç¯å¢ƒå˜é‡"></a>2.4 åœ¨gpadminå’Œrootç”¨æˆ·ä¸‹æ·»åŠ ç¯å¢ƒå˜é‡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.bashrc</span><br><span class="line"><span class="meta">#</span>#æ·»åŠ ä»¥ä¸‹å†…å®¹   </span><br><span class="line">export LD_LIBRARY_PATH=$GPHOME/lib    </span><br><span class="line">export MASTER_DATA_DIRECTORY=/home/gpadmin/gpdata/master/gpseg-1    </span><br><span class="line">source /usr/local/greenplum-db/greenplum_path.sh    </span><br><span class="line">source  /usr/local/greenplum-cc-web/gpcc_path.sh</span><br><span class="line">ä¿å­˜é€€å‡ºï¼Œæ‰§è¡Œä¸‹é¢è¯­å¥ä½¿å…¶ç”Ÿæ•ˆ</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<h3 id="2-5-åˆ‡æ¢åˆ°rootç”¨æˆ·"><a href="#2-5-åˆ‡æ¢åˆ°rootç”¨æˆ·" class="headerlink" title="2.5 åˆ‡æ¢åˆ°rootç”¨æˆ·"></a>2.5 åˆ‡æ¢åˆ°rootç”¨æˆ·</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gpssh-exkeys -f /usr/local/greenplum-db/gpconfigs/hostfile_exkeys    </span><br><span class="line"><span class="meta">#</span>æ‹·è´msterèŠ‚ç‚¹å…¬é’¥è‡³å„segmentèŠ‚ç‚¹            </span><br><span class="line">gpseginstall -f /usr/local/greenplum-db/gpconfigs/hostfile_exkeys -p gpadmin</span><br></pre></td></tr></table></figure>
<h4 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h4><p>gpssh-exkeys -f hostfile_exkeys  å°†ä¼šåœ¨masterèŠ‚ç‚¹ç”Ÿæˆå…¬ç§é’¥ï¼Œå¹¶æ‹·è´è‡³hostfile_exkeyså„segmentèŠ‚ç‚¹ï¼Œå®ç°åç»­æ— å¯†é’¥ç™»é™†<br>gpseginstall -f /usr/local/greenplum-db/gpconfigs/hostfile_exkeys -p gpadmin  ä½¿ç”¨é»˜è®¤ç”¨æˆ·å(gpadmin) å¯†ç ï¼šgpadmin åœ¨å„segmentèŠ‚ç‚¹å®‰è£…Greenplum-db</p>
<h3 id="2-6-åœ¨masteråŠå„segmentèŠ‚ç‚¹åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•"><a href="#2-6-åœ¨masteråŠå„segmentèŠ‚ç‚¹åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•" class="headerlink" title="2.6 åœ¨masteråŠå„segmentèŠ‚ç‚¹åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•"></a>2.6 åœ¨masteråŠå„segmentèŠ‚ç‚¹åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/gpadmin/gpdata/master</span><br><span class="line">cd /home/gpadmin/</span><br><span class="line">chown -R gpadmin:gpadmin gpdata/master</span><br><span class="line">gpssh -f /usr/local/greenplum-db/gpconfigs/hostfile -e "mkdir -p /home/gpadmin/gpdata/data1/primary;mkdir -p /home/gpadmin/gpdata/data2/primaryâ€</span><br><span class="line">gpssh -f /usr/local/greenplum-db/gpconfigs/hostfile -e "mkdir -p /home/gpadmin/gpdata/data1/mirror;mkdir -p /home/gpadmin/gpdata/data2/mirror"</span><br><span class="line">gpssh -f /usr/local/greenplum-db/gpconfigs/hostfile -e "chown -R gpadmin:gpadmin /home/gpadmin/gpdata"</span><br><span class="line">gpssh -f /usr/local/greenplum-db/gpconfigs/hostfile_exkeys -v -e 'ntpd'</span><br></pre></td></tr></table></figure>
<h4 id="åˆ‡æ¢åˆ°gpadminç”¨æˆ·ä¸‹-åˆå§‹åŒ–æ•°æ®åº“é›†ç¾¤"><a href="#åˆ‡æ¢åˆ°gpadminç”¨æˆ·ä¸‹-åˆå§‹åŒ–æ•°æ®åº“é›†ç¾¤" class="headerlink" title="åˆ‡æ¢åˆ°gpadminç”¨æˆ·ä¸‹,åˆå§‹åŒ–æ•°æ®åº“é›†ç¾¤"></a>åˆ‡æ¢åˆ°gpadminç”¨æˆ·ä¸‹,åˆå§‹åŒ–æ•°æ®åº“é›†ç¾¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">su - gpadmin </span><br><span class="line">cd /usr/local/greenplum-db/</span><br><span class="line"> cp /usr/local/greenplum-db/docs/cli_help/gpconfigs/gpinitsystem_config /usr/local/greenplum-db/gpconfigs/gpinitsystem_config</span><br><span class="line"> vi /usr/local/greenplum-db/gpconfigs/gpinitsystem_config</span><br><span class="line"><span class="meta">#</span>##ä¿®æ”¹ä»¥ä¸‹å†…å®¹</span><br><span class="line">MASTER_HOSTNAME=mdw</span><br><span class="line">PORT_BASE=40000</span><br><span class="line">declare -a DATA_DIRECTORY=(/home/gpadmin/gpdata/data1/primary /home/gpadmin/gpdata/data1/primary /home/gpadmin/gpdata/data2/primary /home/gpadmin/gpdata/data2/primary)</span><br><span class="line">MASTER_DIRECTORY=/home/gpadmin/gpdata/master</span><br><span class="line">MASTER_PORT=5432</span><br><span class="line">MIRROR_PORT_BASE=50000</span><br><span class="line">REPLICATION_PORT_BASE=41000</span><br><span class="line">MIRROR_REPLICATION_PORT_BASE=51000</span><br><span class="line">declare -a MIRROR_DATA_DIRECTORY=(/home/gpadmin/gpdata/data1/mirror /home/gpadmin/gpdata/data1/mirror /home/gpadmin/gpdata/data2/mirror /home/gpadmin/gpdata/data2/mirror)</span><br><span class="line">DATABASE_NAME=gpdb</span><br><span class="line">MACHINE_LIST_FILE=/usr/local/greenplum-db/gpconfigs/hostfile</span><br></pre></td></tr></table></figure>
<h3 id="2-7-é…ç½®ä¿®æ”¹å®Œæˆä¹‹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æ•°æ®åº“"><a href="#2-7-é…ç½®ä¿®æ”¹å®Œæˆä¹‹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æ•°æ®åº“" class="headerlink" title="2.7 é…ç½®ä¿®æ”¹å®Œæˆä¹‹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æ•°æ®åº“"></a>2.7 é…ç½®ä¿®æ”¹å®Œæˆä¹‹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æ•°æ®åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpinitsystem -c /usr/local/greenplum-db/gpconfigs/gpinitsystem_config -h /usr/local/greenplum-db/gpconfigs/hostfile</span><br></pre></td></tr></table></figure>
<h3 id="2-8-psqlä¿®æ”¹æ•°æ®åº“å¯†ç "><a href="#2-8-psqlä¿®æ”¹æ•°æ®åº“å¯†ç " class="headerlink" title="2.8 psqlä¿®æ”¹æ•°æ®åº“å¯†ç "></a>2.8 psqlä¿®æ”¹æ•°æ®åº“å¯†ç </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">psql -d gpdb    </span><br><span class="line">gpdb=# alter user gpadmin with password 'gpadmin'     </span><br><span class="line">gpdb=# \q    </span><br><span class="line">ç„¶åï¼Œé‡å¯greenplumdbé›†ç¾¤</span><br><span class="line">gpstop -a</span><br><span class="line">gpstart -a</span><br></pre></td></tr></table></figure>
<h3 id="2-9-ä½¿ç”¨pgadminï¼Œnavicat-ç­‰å·¥å…·è¿æ¥"><a href="#2-9-ä½¿ç”¨pgadminï¼Œnavicat-ç­‰å·¥å…·è¿æ¥" class="headerlink" title="2.9 ä½¿ç”¨pgadminï¼Œnavicat ç­‰å·¥å…·è¿æ¥"></a>2.9 ä½¿ç”¨pgadminï¼Œnavicat ç­‰å·¥å…·è¿æ¥</h3><p>è¿æ¥æ—¶ï¼Œå¦‚æœç™»å½•ä¸æˆåŠŸï¼Œä¸€èˆ¬æŠ¥é”™å¦‚ä¸‹æ ·å­ï¼š<br> psql: FATAL:  no pg_hba.conf entry for host â€œ192.168.xxx.xxxâ€,<br>è¡¨ç¤ºè®¿é—®æƒé™ä¸å¤Ÿ<br>ä¿®æ”¹æ–‡ä»¶/home/gpadmin/gpdata/master/gpseg-1/pg_hba.conf</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> greenplum </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[gité…ç½®å¤šä¸ªSSH-Key]]></title>
      <url>/git%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AASSH-Key.html</url>
      <content type="html"><![CDATA[<h1 id="1ã€ç”Ÿæˆä¸€ä¸ªå…¬å¸ç”¨çš„SSH-Key"><a href="#1ã€ç”Ÿæˆä¸€ä¸ªå…¬å¸ç”¨çš„SSH-Key" class="headerlink" title="1ã€ç”Ÿæˆä¸€ä¸ªå…¬å¸ç”¨çš„SSH-Key"></a>1ã€ç”Ÿæˆä¸€ä¸ªå…¬å¸ç”¨çš„SSH-Key</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh-keygen -t rsa -C "youremail@yourcompany.comâ€ -f ~/.ssh/id-rsa</span><br></pre></td></tr></table></figure>
<p>åœ¨~/.ssh/ç›®å½•ä¼šç”Ÿæˆid-rsaå’Œid-rsa.pubç§é’¥å’Œå…¬é’¥ã€‚ æˆ‘ä»¬å°†id-rsa.pubä¸­çš„å†…å®¹ç²˜å¸–åˆ°å…¬å¸gitlabæœåŠ¡å™¨çš„SSH-keyçš„é…ç½®ä¸­ã€‚<br><a id="more"></a></p>
<h1 id="2ã€-ç”Ÿæˆä¸€ä¸ªgithubç”¨çš„SSH-Key"><a href="#2ã€-ç”Ÿæˆä¸€ä¸ªgithubç”¨çš„SSH-Key" class="headerlink" title="2ã€ ç”Ÿæˆä¸€ä¸ªgithubç”¨çš„SSH-Key"></a>2ã€ ç”Ÿæˆä¸€ä¸ªgithubç”¨çš„SSH-Key</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh-keygen -t rsa -C "youremail@your.comâ€ -f ~/.ssh/github-rsa</span><br></pre></td></tr></table></figure>
<p>åœ¨~/.ssh/ç›®å½•ä¼šç”Ÿæˆgithub-rsaå’Œgithub-rsa.pubç§é’¥å’Œå…¬é’¥ã€‚ æˆ‘ä»¬å°†github-rsa.pubä¸­çš„å†…å®¹ç²˜å¸–åˆ°githubæœåŠ¡å™¨çš„SSH-keyçš„é…ç½®ä¸­ã€‚</p>
<h1 id="3ã€æ·»åŠ ç§é’¥"><a href="#3ã€æ·»åŠ ç§é’¥" class="headerlink" title="3ã€æ·»åŠ ç§é’¥"></a>3ã€æ·»åŠ ç§é’¥</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh-add ~/.ssh/id_rsa $ ssh-add ~/.ssh/github_rsa</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‰§è¡Œssh-addæ—¶æç¤ºâ€Could not open a connection to your authentication agentâ€ï¼Œå¯ä»¥ç°æ‰§è¡Œå‘½ä»¤ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh-agent bash</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå†è¿è¡Œssh-addå‘½ä»¤ã€‚<br>å¯ä»¥é€šè¿‡ ssh-add -l æ¥ç¡®ç§é’¥åˆ—è¡¨<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh-add -l</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥é€šè¿‡ ssh-add -D æ¥æ¸…ç©ºç§é’¥åˆ—è¡¨<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh-add -D</span><br></pre></td></tr></table></figure></p>
<h1 id="4ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#4ã€ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="4ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>4ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h1><p>åœ¨ ~/.ssh ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªconfigæ–‡ä»¶<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch config</span><br></pre></td></tr></table></figure></p>
<p>æ·»åŠ å†…å®¹ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> gitlab</span><br><span class="line">Host gitlab.com</span><br><span class="line">    HostName gitlab.com</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"><span class="meta">#</span> github</span><br><span class="line">Host github.com</span><br><span class="line">    HostName github.com</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~/.ssh/github_rsa</span><br></pre></td></tr></table></figure></p>
<h1 id="5ã€æµ‹è¯•"><a href="#5ã€æµ‹è¯•" class="headerlink" title="5ã€æµ‹è¯•"></a>5ã€æµ‹è¯•</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh -T git@github.com</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º<br>Hi stefzhlg! Youâ€™ve successfully authenticated, but GitHub does not provide shell access.</p>
]]></content>
      
        <categories>
            
            <category> ç³»ç»Ÿ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> github </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[windowsæ·»åŠ å…¬é’¥åï¼Œæ— æ³•å…‹éš†çš„é—®é¢˜è§£å†³]]></title>
      <url>/Permission.html</url>
      <content type="html"><![CDATA[<p>èƒŒæ™¯ï¼šwindowsä¸‹æ·»åŠ å…¬é’¥åï¼Œæ— æ³•å…‹éš†github ä¸Šçš„æ–‡ä»¶ï¼ŒæŠ¥é”™Permission denied (publickey). fatal: Could not read from remote repository.<br>ã€€ã€€åšä¸»åœ¨githubä¸Šä¸‹è½½tiny faceçš„çš„æºä»£ç çš„æ—¶å€™ï¼Œé‡åˆ°git cloneå‘½ä»¤ä¸ºï¼šgit clone â€“recursive git@github.com:peiyunh/tiny.git<br>ã€€ã€€è€Œå½“æˆ‘åœ¨ternimalä¸‹æ‰§è¡Œè¿™æ¡è¯­å¥çš„æ—¶å€™ï¼Œå‡ºç°é”™è¯¯ï¼š<br>ã€€ã€€Permissiondenied (publickey).<br>ã€€ã€€fatal:Could not read from remote repository.<br>ã€€ã€€Pleasemake sure you have the correct access rights<br>ã€€ã€€and the repository exists.</p>
<a id="more"></a>
<p>ã€€ã€€ä½†æ˜¯å…¶å®æ‰§è¡Œå‘½ä»¤ï¼šgit clone git@github.com:peiyunh/tiny.git æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼ˆä¸åŠ â€“recursiveå‚æ•°ï¼‰ï¼Œäºæ˜¯ç™¾åº¦äº†ä¸€ç•ªï¼Œæˆ‘ç†è§£çš„æ˜¯åŸå› æ˜¯ç”±äºä½ åœ¨æœ¬åœ°ï¼ˆæˆ–è€…æœåŠ¡å™¨ä¸Šï¼‰æ²¡æœ‰ç”Ÿæˆssh keyï¼Œä½ å¯ä»¥åœ¨ternimalä¸‹æ‰§è¡Œï¼š<br>ã€€ã€€cd ~/.ssh lsæ¥æŸ¥çœ‹æ˜¯å¦æœ‰æ–‡ä»¶id_rsaä»¥åŠæ–‡ä»¶id_rsa.pubï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šï¼ˆæˆ‘çš„å·²ç»ç”Ÿæˆäº†ï¼Œæ‰€ä»¥æˆ‘lsåä¼šæ˜¾ç¤ºã€‚ï¼‰<br>ã€€ã€€ä¸‹é¢è®°å½•ä¸‹è§£å†³åŠæ³•ï¼š<br>ã€€ã€€1.é¦–å…ˆï¼Œå¦‚æœä½ æ²¡æœ‰ssh keyçš„è¯ï¼Œåœ¨ternimalä¸‹è¾“å…¥å‘½ä»¤ï¼šssh-keygen -t rsa -C â€œyouremail@example.comâ€ï¼Œ youremail@example.comæ”¹ä¸ºè‡ªå·±çš„é‚®ç®±å³å¯ï¼Œé€”ä¸­ä¼šè®©ä½ è¾“å…¥å¯†ç å•¥çš„ï¼Œä¸éœ€è¦ç®¡ï¼Œä¸€è·¯å›è½¦å³å¯ï¼Œä¼šç”Ÿæˆä½ çš„ssh keyã€‚ï¼ˆå¦‚æœé‡æ–°ç”Ÿæˆçš„è¯ä¼šè¦†ç›–ä¹‹å‰çš„ssh keyã€‚ï¼‰<br>ã€€ã€€2.ç„¶åå†ternimalä¸‹æ‰§è¡Œå‘½ä»¤ï¼š<br>ã€€ã€€ssh -v git@github.com<br>ã€€ã€€æœ€åä¸¤å¥ä¼šå‡ºç°ï¼š<br>ã€€ã€€No more authentication methods to try.<br>ã€€ã€€Permission denied (publickey).<br>ã€€ã€€3.è¿™æ—¶å€™å†åœ¨ternimalä¸‹è¾“å…¥ï¼š<br>ã€€ã€€ssh-agent -s<br>ã€€ã€€ç„¶åä¼šæç¤ºç±»ä¼¼çš„ä¿¡æ¯ï¼š<br>ã€€ã€€SSH_AUTH_SOCK=/tmp/ssh-GTpABX1a05qH/agent.404; export SSH_AUTH_SOCK;<br>ã€€ã€€SSH_AGENT_PID=13144; export SSH_AGENT_PID;<br>ã€€ã€€echo Agent pid 13144;<br>ã€€ã€€4.æ¥ç€å†è¾“å…¥ï¼š<br>ã€€ã€€ssh-add ~/.ssh/id_rsa<br>ã€€ã€€è¿™æ—¶å€™åº”è¯¥ä¼šæç¤ºï¼š<br>ã€€ã€€Identity added: â€¦ï¼ˆè¿™é‡Œæ˜¯ä¸€äº›ssh keyæ–‡ä»¶è·¯å¾„çš„ä¿¡æ¯ï¼‰<br>ã€€ã€€ï¼ˆæ³¨æ„ï¼‰å¦‚æœå‡ºç°é”™è¯¯æç¤ºï¼š<br>ã€€ã€€Could not open a connection to your authentication agent.<br>ã€€ã€€è¯·æ‰§è¡Œå‘½ä»¤ï¼ševal <code>ssh-agent -s</code>åç»§ç»­æ‰§è¡Œå‘½ä»¤ ssh-add ~/.ssh/id_rsaï¼Œè¿™æ—¶å€™ä¸€èˆ¬æ²¡é—®é¢˜å•¦ã€‚<br>ã€€ã€€5.æ‰“å¼€ä½ åˆšåˆšç”Ÿæˆçš„id_rsa.pubï¼Œå°†é‡Œé¢çš„å†…å®¹å¤åˆ¶ï¼Œè¿›å…¥ä½ çš„githubè´¦å·ï¼Œåœ¨settingsä¸‹ï¼ŒSSH and GPG keysä¸‹new SSH keyï¼Œtitleéšä¾¿å–ä¸€ä¸ªåå­—ï¼Œç„¶åå°†id_rsa.pubé‡Œçš„å†…å®¹å¤åˆ¶åˆ°Keyä¸­ï¼Œå®ŒæˆåAdd SSH Keyã€‚<br>ã€€ã€€6.æœ€åä¸€æ­¥ï¼ŒéªŒè¯Key<br>ã€€ã€€åœ¨ternimalä¸‹è¾“å…¥å‘½ä»¤ï¼š<br>ã€€ã€€ssh -T git@github.com<br>ã€€ã€€æç¤ºï¼šHi xxx! Youâ€™ve successfully authenticated, but GitHub does not provide shell  access.<br>ã€€ã€€è¿™æ—¶å€™ä½ çš„é—®é¢˜å°±è§£å†³å•¦ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ git clone â€“recursive git@github.com:peiyunh/tiny.git å»ä¸‹è½½ä½ çš„ä»£ç å•¦ã€‚</p>
<p>ã€€ã€€</p>
]]></content>
      
        <categories>
            
            <category> ç³»ç»Ÿ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> github </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[kafkaåŸºæœ¬æ“ä½œ]]></title>
      <url>/kafka%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html</url>
      <content type="html"><![CDATA[<h2 id="kafkaåŸºæœ¬æ“ä½œï¼š"><a href="#kafkaåŸºæœ¬æ“ä½œï¼š" class="headerlink" title="kafkaåŸºæœ¬æ“ä½œï¼š"></a>kafkaåŸºæœ¬æ“ä½œï¼š</h2><h2 id="æŸ¥çœ‹topicä¸»é¢˜ï¼š"><a href="#æŸ¥çœ‹topicä¸»é¢˜ï¼š" class="headerlink" title="æŸ¥çœ‹topicä¸»é¢˜ï¼š"></a>æŸ¥çœ‹topicä¸»é¢˜ï¼š</h2><p>kafka-topics.sh â€“list â€“zookeeper node1:2181,node2:2181,node3:2181</p>
<h2 id="æŸ¥çœ‹åˆ†åŒºï¼š"><a href="#æŸ¥çœ‹åˆ†åŒºï¼š" class="headerlink" title="æŸ¥çœ‹åˆ†åŒºï¼š"></a>æŸ¥çœ‹åˆ†åŒºï¼š</h2><p>kafka-topics.sh â€“zookeeper node2:2181,node3:2181,node4:2181  â€“describe â€“topic  MotorVehicle<br>kafka-topics.sh â€“zookeeper node2:2181,node3:2181,node4:2181  â€“describe â€“topic  WifiRecord<br>kafka-topics.sh â€“zookeeper node2:2181,node3:2181,node4:2181  â€“describe â€“topic  ImsiRecord<br><a id="more"></a></p>
<h2 id="åˆ›å»ºtopicä¸»é¢˜ï¼š"><a href="#åˆ›å»ºtopicä¸»é¢˜ï¼š" class="headerlink" title="åˆ›å»ºtopicä¸»é¢˜ï¼š"></a>åˆ›å»ºtopicä¸»é¢˜ï¼š</h2><p>kafka-topics.sh â€“create â€“zookeeper node1:2181,node2:2181,node3:2181 â€“replication-factor 1 â€“partitions 1 â€“topic MotorImsi</p>
<h2 id="åˆ é™¤ä¸»é¢˜ï¼š"><a href="#åˆ é™¤ä¸»é¢˜ï¼š" class="headerlink" title="åˆ é™¤ä¸»é¢˜ï¼š"></a>åˆ é™¤ä¸»é¢˜ï¼š</h2><p>kafka-topics.sh â€“delete â€“zookeeper node1:2181,node2:2181,node3:2181 â€“topic Test004</p>
<h2 id="å¼€å¯ç”Ÿäº§è€…ï¼šï¼ˆæ³¨æ„kafkaæ‰€åœ¨èŠ‚ç‚¹ï¼‰ç›®å‰éƒ½æ˜¯å•èŠ‚ç‚¹"><a href="#å¼€å¯ç”Ÿäº§è€…ï¼šï¼ˆæ³¨æ„kafkaæ‰€åœ¨èŠ‚ç‚¹ï¼‰ç›®å‰éƒ½æ˜¯å•èŠ‚ç‚¹" class="headerlink" title="å¼€å¯ç”Ÿäº§è€…ï¼šï¼ˆæ³¨æ„kafkaæ‰€åœ¨èŠ‚ç‚¹ï¼‰ç›®å‰éƒ½æ˜¯å•èŠ‚ç‚¹"></a>å¼€å¯ç”Ÿäº§è€…ï¼šï¼ˆæ³¨æ„kafkaæ‰€åœ¨èŠ‚ç‚¹ï¼‰ç›®å‰éƒ½æ˜¯å•èŠ‚ç‚¹</h2><p>kafka-console-producer.sh â€“broker-list node3:6667 â€“topic MotorWifi</p>
<h2 id="å¼€å¯æ¶ˆè´¹è€…ï¼š"><a href="#å¼€å¯æ¶ˆè´¹è€…ï¼š" class="headerlink" title="å¼€å¯æ¶ˆè´¹è€…ï¼š"></a>å¼€å¯æ¶ˆè´¹è€…ï¼š</h2><p>kafka-console-consumer.sh â€“bootstrap-server node1:6667,node2:6667,node3:6667 â€“topic Test003 â€“from-beginning</p>
<h2 id="kafkaä¸­é»˜è®¤æ¶ˆæ¯çš„ä¿ç•™æ—¶é—´æ˜¯7å¤©ï¼Œè‹¥æƒ³æ›´æ”¹ï¼Œéœ€åœ¨é…ç½®æ–‡ä»¶"><a href="#kafkaä¸­é»˜è®¤æ¶ˆæ¯çš„ä¿ç•™æ—¶é—´æ˜¯7å¤©ï¼Œè‹¥æƒ³æ›´æ”¹ï¼Œéœ€åœ¨é…ç½®æ–‡ä»¶" class="headerlink" title="kafkaä¸­é»˜è®¤æ¶ˆæ¯çš„ä¿ç•™æ—¶é—´æ˜¯7å¤©ï¼Œè‹¥æƒ³æ›´æ”¹ï¼Œéœ€åœ¨é…ç½®æ–‡ä»¶"></a>kafkaä¸­é»˜è®¤æ¶ˆæ¯çš„ä¿ç•™æ—¶é—´æ˜¯7å¤©ï¼Œè‹¥æƒ³æ›´æ”¹ï¼Œéœ€åœ¨é…ç½®æ–‡ä»¶</h2><p>server.propertiesé‡Œæ›´æ”¹é€‰é¡¹ï¼š<br>log.retention.hours=168<br>ä½†æ˜¯æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æŸä¸€ä¸ªä¸»é¢˜çš„æ¶ˆæ¯å­˜ç•™çš„æ—¶é—´è¿›è¡Œå˜æ›´ï¼Œè€Œä¸å½±å“å…¶ä»–ä¸»é¢˜ã€‚</p>
<h2 id="å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š"><a href="#å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š" class="headerlink" title="å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š"></a>å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š</h2><p>kafka-configs.sh â€“zookeeper localhost:2181 â€“entity-type topics â€“entity-name topicName â€“alter â€“add-config log.retention.hours=120<br>ä½¿å¾—ä¸»é¢˜çš„ç•™å­˜æ—¶é—´ä¿å­˜ä¸º5å¤©</p>
<h2 id="å¦‚æœæŠ¥é”™çš„è¯ï¼Œå¯ä»¥å°†æ—¶é—´å•ä½æ›´æ”¹æˆæ¯«ç§’ï¼š"><a href="#å¦‚æœæŠ¥é”™çš„è¯ï¼Œå¯ä»¥å°†æ—¶é—´å•ä½æ›´æ”¹æˆæ¯«ç§’ï¼š" class="headerlink" title="å¦‚æœæŠ¥é”™çš„è¯ï¼Œå¯ä»¥å°†æ—¶é—´å•ä½æ›´æ”¹æˆæ¯«ç§’ï¼š"></a>å¦‚æœæŠ¥é”™çš„è¯ï¼Œå¯ä»¥å°†æ—¶é—´å•ä½æ›´æ”¹æˆæ¯«ç§’ï¼š</h2><p>kafka-configs.sh â€“zookeeper localhost:2181 â€“entity-type topics â€“entity-name test â€“alter â€“add-config retention.ms=43200000</p>
<h2 id="å°†jaråŒ…æ”¾å…¥åå°è¿è¡Œï¼š"><a href="#å°†jaråŒ…æ”¾å…¥åå°è¿è¡Œï¼š" class="headerlink" title="å°†jaråŒ…æ”¾å…¥åå°è¿è¡Œï¼š"></a>å°†jaråŒ…æ”¾å…¥åå°è¿è¡Œï¼š</h2><p>nohup java -jar  xinyi_kafka_consumer-0.0.1-SNAPSHOT-imsi.jar &gt;&gt; xinyi_kafka_consumer-0.0.1-SNAPSHOT-imsi.out 2&gt;&amp;1 &amp;</p>
<p>nohup java -jar  xinfo-spark-scheduler.jar  &gt;&gt; xinfo-spark-scheduler.out 2&gt;&amp;1 &amp;</p>
<p>nohup java -jar  xinyi_kafka_consumer_video-0.0.1-SNAPSHOT.jar &gt;&gt; xinyi_kafka_consumer_video-0.0.1-SNAPSHOT.out 2&gt;&amp;1 &amp;</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> KafKa </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[kafkaå¦‚ä½•å½»åº•åˆ é™¤topicåŠæ•°æ®]]></title>
      <url>/kafka%E5%A6%82%E4%BD%95%E5%BD%BB%E5%BA%95%E5%88%A0%E9%99%A4topic%E5%8F%8A%E6%95%B0%E6%8D%AE.html</url>
      <content type="html"><![CDATA[<h2 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h2><p>åˆ é™¤kafka topicåŠå…¶æ•°æ®ï¼Œä¸¥æ ¼æ¥è¯´å¹¶ä¸æ˜¯å¾ˆéš¾çš„æ“ä½œã€‚ä½†æ˜¯ï¼Œå¾€å¾€ç»™kafka ä½¿ç”¨è€…å¸¦æ¥è¯¸å¤šé—®é¢˜ã€‚é¡¹ç›®ç»„ä¹‹å‰æ¥è§¦è¿‡å¤šä¸ªå¼€å‘è€…ï¼Œå‘ç°éƒ½ä¼šå¶ç„¶å‡ºç°æ— æ³•å½»åº•åˆ é™¤kafkaçš„æƒ…å†µã€‚æœ¬æ–‡æ€»ç»“å¤šä¸ªåˆ é™¤kafka topicçš„åº”ç”¨åœºæ™¯ï¼Œæ€»ç»“ä¸€å¥—åˆ é™¤kafka topicçš„æ ‡å‡†æ“ä½œæ–¹æ³•ã€‚</p>
<h2 id="step1ï¼š"><a href="#step1ï¼š" class="headerlink" title="step1ï¼š"></a>step1ï¼š</h2><p>å¦‚æœéœ€è¦è¢«åˆ é™¤topic æ­¤æ—¶æ­£åœ¨è¢«ç¨‹åº produceå’Œconsumeï¼Œåˆ™è¿™äº›ç”Ÿäº§å’Œæ¶ˆè´¹ç¨‹åºéœ€è¦åœæ­¢ã€‚<br>å› ä¸ºå¦‚æœæœ‰ç¨‹åºæ­£åœ¨ç”Ÿäº§æˆ–è€…æ¶ˆè´¹è¯¥topicï¼Œåˆ™è¯¥topicçš„offsetä¿¡æ¯ä¸€è‡´ä¼šåœ¨brokeræ›´æ–°ã€‚è°ƒç”¨kafka deleteå‘½ä»¤åˆ™æ— æ³•åˆ é™¤è¯¥topicã€‚<br>åŒæ—¶ï¼Œéœ€è¦è®¾ç½® auto.create.topics.enable = falseï¼Œé»˜è®¤è®¾ç½®ä¸ºtrueã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™produceæˆ–è€…fetch ä¸å­˜åœ¨çš„topicä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªtopicã€‚è¿™æ ·ä¼šç»™åˆ é™¤topicå¸¦æ¥å¾ˆå¤šæ„å‘ä¸åˆ°çš„é—®é¢˜ã€‚<br>æ‰€ä»¥ï¼Œè¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œå¿…é¡»è®¾ç½®auto.create.topics.enable = falseï¼Œå¹¶è®¤çœŸæŠŠç”Ÿäº§å’Œæ¶ˆè´¹ç¨‹åºå½»åº•å…¨éƒ¨åœæ­¢ã€‚<br><a id="more"></a></p>
<h2 id="step2ï¼š"><a href="#step2ï¼š" class="headerlink" title="step2ï¼š"></a>step2ï¼š</h2><p>server.properties è®¾ç½® delete.topic.enable=true<br>å¦‚æœæ²¡æœ‰è®¾ç½® delete.topic.enable=trueï¼Œåˆ™è°ƒç”¨kafka çš„deleteå‘½ä»¤æ— æ³•çœŸæ­£å°†topicåˆ é™¤ï¼Œè€Œæ˜¯æ˜¾ç¤ºï¼ˆmarked for deletionï¼‰</p>
<h2 id="step3ï¼š"><a href="#step3ï¼š" class="headerlink" title="step3ï¼š"></a>step3ï¼š</h2><p>è°ƒç”¨å‘½ä»¤åˆ é™¤topicï¼š<br>./bin/kafka-topics â€“delete â€“zookeeper ã€zookeeper server:portã€‘ â€“topic ã€topic nameã€‘</p>
<h2 id="step4ï¼š"><a href="#step4ï¼š" class="headerlink" title="step4ï¼š"></a>step4ï¼š</h2><p>åˆ é™¤kafkaå­˜å‚¨ç›®å½•ï¼ˆserver.propertiesæ–‡ä»¶log.dirsé…ç½®ï¼Œé»˜è®¤ä¸ºâ€/data/kafka-logsâ€ï¼‰ç›¸å…³topicçš„æ•°æ®ç›®å½•ã€‚<br>æ³¨æ„ï¼šå¦‚æœkafka æœ‰å¤šä¸ª brokerï¼Œä¸”æ¯ä¸ªbroker é…ç½®äº†å¤šä¸ªæ•°æ®ç›˜ï¼ˆæ¯”å¦‚ /data/kafka-logs,/data1/kafka-logs â€¦ï¼‰ï¼Œä¸”topicä¹Ÿæœ‰å¤šä¸ªåˆ†åŒºå’Œreplicaï¼Œåˆ™éœ€è¦å¯¹æ‰€æœ‰brokerçš„æ‰€æœ‰æ•°æ®ç›˜è¿›è¡Œæ‰«æï¼Œåˆ é™¤è¯¥topicçš„æ‰€æœ‰åˆ†åŒºæ•°æ®ã€‚</p>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œç»è¿‡ä¸Šé¢4æ­¥å°±å¯ä»¥æ­£å¸¸åˆ é™¤æ‰topicå’Œtopicçš„æ•°æ®ã€‚ä½†æ˜¯ï¼Œå¦‚æœç»è¿‡ä¸Šé¢å››æ­¥ï¼Œè¿˜æ˜¯æ— æ³•æ­£å¸¸åˆ é™¤topicï¼Œåˆ™éœ€è¦å¯¹kafkaåœ¨zookeeerçš„å­˜å‚¨ä¿¡æ¯è¿›è¡Œåˆ é™¤ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š<br>ï¼ˆæ³¨æ„ï¼šä»¥ä¸‹æ­¥éª¤é‡Œé¢ï¼Œkafkaåœ¨zké‡Œé¢çš„èŠ‚ç‚¹ä¿¡æ¯æ˜¯é‡‡ç”¨é»˜è®¤å€¼ï¼Œå¦‚æœä½ çš„ç³»ç»Ÿä¿®æ”¹è¿‡kafkaåœ¨zké‡Œé¢çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œåˆ™éœ€è¦æ ¹æ®ç³»ç»Ÿçš„å®é™…æƒ…å†µæ‰¾åˆ°å‡†ç¡®ä½ç½®è¿›è¡Œæ“ä½œï¼‰</p>
<h2 id="step5ï¼š"><a href="#step5ï¼š" class="headerlink" title="step5ï¼š"></a>step5ï¼š</h2><p>æ‰¾ä¸€å°éƒ¨ç½²äº†zkçš„æœåŠ¡å™¨ï¼Œä½¿ç”¨å‘½ä»¤ï¼š<br>bin/zkCli.sh -server ã€zookeeper server:portã€‘<br>ç™»å½•åˆ°zk shellï¼Œç„¶åæ‰¾åˆ°topicæ‰€åœ¨çš„ç›®å½•ï¼šls /brokers/topicsï¼Œæ‰¾åˆ°è¦åˆ é™¤çš„topicï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼š<br>rmr /brokers/topics/ã€topic nameã€‘<br>å³å¯ï¼Œæ­¤æ—¶topicè¢«å½»åº•åˆ é™¤ã€‚<br>å¦‚æœtopic æ˜¯è¢«æ ‡è®°ä¸º marked for deletionï¼Œåˆ™é€šè¿‡å‘½ä»¤ ls /admin/delete_topicsï¼Œæ‰¾åˆ°è¦åˆ é™¤çš„topicï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼š<br>rmr /admin/delete_topics/ã€topic nameã€‘<br>å¤‡æ³¨ï¼š<br>ç½‘ç»œä¸Šå¾ˆå¤šå…¶å®ƒæ–‡ç« è¿˜è¯´æ˜ï¼Œéœ€è¦åˆ é™¤topicåœ¨zkä¸Šé¢çš„æ¶ˆè´¹èŠ‚ç‚¹è®°å½•ã€é…ç½®èŠ‚ç‚¹è®°å½•ï¼Œæ¯”å¦‚ï¼š<br>rmr /consumers/ã€consumer-groupã€‘<br>rmr /config/topics/ã€topic nameã€‘<br>å…¶å®æ­£å¸¸æƒ…å†µæ˜¯ä¸éœ€è¦è¿›è¡Œè¿™ä¸¤ä¸ªæ“ä½œçš„ï¼Œå¦‚æœéœ€è¦ï¼Œé‚£éƒ½æ˜¯ç”±äºæ“ä½œä¸å½“å¯¼è‡´çš„ã€‚æ¯”å¦‚step1åœæ­¢ç”Ÿäº§å’Œæ¶ˆè´¹ç¨‹åºæ²¡æœ‰åšï¼Œstep2æ²¡æœ‰æ­£ç¡®é…ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸¥æ ¼æŒ‰ç…§step1 â€“ step5 çš„æ­¥éª¤ï¼Œæ˜¯ä¸€å®šèƒ½å¤Ÿæ­£å¸¸åˆ é™¤topicçš„ã€‚<br>step6ï¼š<br>å®Œæˆä¹‹åï¼Œè°ƒç”¨å‘½ä»¤ï¼š<br>./bin/kafka-topics.sh â€“list â€“zookeeper ã€zookeeper server:portã€‘<br>æŸ¥çœ‹ç°åœ¨kafkaçš„topicä¿¡æ¯ã€‚æ­£å¸¸æƒ…å†µä¸‹åˆ é™¤çš„topicå°±ä¸ä¼šå†æ˜¾ç¤ºã€‚<br>ä½†æ˜¯ï¼Œå¦‚æœè¿˜èƒ½å¤ŸæŸ¥è¯¢åˆ°åˆ é™¤çš„topicï¼Œåˆ™é‡å¯zkå’Œkafkaå³å¯ã€‚</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Kafka </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¿®æ”¹kafkaä¿ç•™å¤©æ•°å¯¹æ•°æ®å…¥åº“çš„å½±å“]]></title>
      <url>/%E4%BF%AE%E6%94%B9kafka%E4%BF%9D%E7%95%99%E5%A4%A9%E6%95%B0%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93%E7%9A%84%E5%BD%B1%E5%93%8D.html</url>
      <content type="html"><![CDATA[<h2 id="åœºæ™¯ä»‹ç»ï¼š"><a href="#åœºæ™¯ä»‹ç»ï¼š" class="headerlink" title="åœºæ™¯ä»‹ç»ï¼š"></a>åœºæ™¯ä»‹ç»ï¼š</h2><p>Kafkaé›†ç¾¤ä¸‰ä¸ªbrokerï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªç”Ÿäº§è€…å’Œä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œç”Ÿäº§è€…producer å·²ç”Ÿäº§2ä¸ªå¤šå°æ—¶çº¦10ä¸‡æ¡æ•°æ®ï¼ŒåŒæ—¶æ¶ˆè´¹è€…å°†æ•°æ®æ’å…¥hbaseä¸­ã€‚</p>
<h2 id="æµ‹è¯•ï¼š"><a href="#æµ‹è¯•ï¼š" class="headerlink" title="æµ‹è¯•ï¼š"></a>æµ‹è¯•ï¼š</h2><p>1ã€æ‰“å¼€ambariæ“ä½œç•Œé¢ï¼Œåœ¨kafkaé…ç½®é¡µä¸‹ä¿®æ”¹ä¿ç•™å¤©æ•°çš„å‚æ•°log.retention.hours ä¸º1å°æ—¶ï¼ŒåŒæ—¶ä¿®æ”¹æ–‡ä»¶å¤§å°segmentä¸º10000ã€‚ï¼ˆæ­¤å¤„æ•°å€¼çš„è®¾ç½®ï¼Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼‰<br><a id="more"></a><br><img src="https://hexoblog-1254111960.cos.ap-guangzhou.myqcloud.com/%E4%BF%AE%E6%94%B9kafka%E4%BF%9D%E7%95%99%E5%A4%A9%E6%95%B0%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93%E7%9A%84%E5%BD%B1%E5%93%8D.png" alt=""><br><span class="exturl" data-url="aHR0cHM6Ly9oZXhvYmxvZy0xMjU0MTExOTYwLmNvcy5hcC1ndWFuZ3pob3UubXlxY2xvdWQuY29tLyVFNCVCRiVBRSVFNiU5NCVCOWthZmthJUU0JUJGJTlEJUU3JTk1JTk5JUU1JUE0JUE5JUU2JTk1JUIwJUU1JUFGJUI5JUU2JTk1JUIwJUU2JThEJUFFJUU1JTg1JUE1JUU1JUJBJTkzJUU3JTlBJTg0JUU1JUJEJUIxJUU1JTkzJThELnBuZw==" title="https://hexoblog-1254111960.cos.ap-guangzhou.myqcloud.com/%E4%BF%AE%E6%94%B9kafka%E4%BF%9D%E7%95%99%E5%A4%A9%E6%95%B0%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93%E7%9A%84%E5%BD%B1%E5%93%8D.png">https://hexoblog-1254111960.cos.ap-guangzhou.myqcloud.com/%E4%BF%AE%E6%94%B9kafka%E4%BF%9D%E7%95%99%E5%A4%A9%E6%95%B0%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93%E7%9A%84%E5%BD%B1%E5%93%8D.png<i class="fa fa-external-link"></i></span><br>2ã€ä¿®æ”¹å®Œå‚æ•°ä¹‹åï¼Œé€ä¸€é‡å¯brokerï¼Œåœ¨é‡å¯çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨æ¶ˆè´¹è€…æ§åˆ¶å°å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é”™è¯¯ï¼š<br><img src="https://hexoblog-1254111960.cos.ap-guangzhou.myqcloud.com/%E4%BF%AE%E6%94%B9kafka%E4%BF%9D%E7%95%99%E5%A4%A9%E6%95%B0%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93%E7%9A%84%E5%BD%B1%E5%93%8D.13.png" alt=""><br>é‡å¯å®Œä¹‹åï¼Œé”™è¯¯æ¶ˆå¤±ã€‚</p>
<p>3ã€æµ‹è¯•ç»“æœï¼š<br>å½“æŠŠä¿ç•™å¤©æ•°ä¿®æ”¹ä¸º1å°æ—¶ï¼Œåˆ™kafkaä¸­çš„æ•°æ®åªä¿ç•™æœ€è¿‘1å°æ—¶çš„æ•°æ®ï¼Œæ—©äº1å°æ—¶ä¹‹å‰çš„æ•°æ®å°†è¢«åˆ é™¤ã€‚<br>æ³¨æ„ï¼šå¦‚æœè¢«åˆ é™¤çš„æ•°æ®æ²¡æœ‰è¢«æ¶ˆè´¹ï¼Œåˆ™è¯¥è¢«åˆ é™¤çš„æ•°æ®ä¸ä¼šè¢«æ’å…¥åº“ä¸­ã€‚æ‰€ä»¥ï¼Œä¿®æ”¹å‚æ•°ä¹‹å‰ï¼Œç¡®ä¿æ•°æ®å·²ç»æ¶ˆè´¹è¿‡ï¼Œå¹¶å…¥åº“ã€‚</p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[åˆ›å»ºåˆ†å¸ƒå¼å›¾æ•°æ®åº“JanusGraphå¯¹è±¡çš„ä¸¤ç§æ–¹æ³•]]></title>
      <url>/%E5%88%9B%E5%BB%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93JanusGraph%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95.html</url>
      <content type="html"><![CDATA[<p>JanusGraph æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å›¾æ•°æ®åº“ï¼Œç›¸å¯¹äºneo4jå¯è¿›è¡Œæ¨ªå‘æ‰©å±•ï¼Œä¸”å­˜å‚¨å’Œå›¾å¼•æ“åˆ†ç¦»ï¼Œæ¶æ„ä¼˜ç¾ï¼Œæœ¬æ–‡å°†ä»‹ç»JanusGraphçš„ä¸¤ç§åˆ›å»ºæ–¹å¼ã€‚<br><a id="more"></a><br>1ã€æ·»åŠ Mavenä¾èµ–<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.janusgraph<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>janusgraph-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">     </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.janusgraph<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>janusgraph-cassandra<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">     </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.janusgraph<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>janusgraph-es<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ„å»ºJanusGraphå¯¹è±¡<br>1ã€é€šè¿‡é…ç½®æ–‡ä»¶æ„å»ºå›¾å¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JanusGraph graph = JanusGraphFactory.open(<span class="string">"janusgraph/conf/janusgraph-cassandra-es.properties"</span>);</span><br><span class="line">graph.close();</span><br></pre></td></tr></table></figure></p>
<p>2ã€é€šè¿‡Configurationæ„å»ºå›¾å¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.configuration.BaseConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversalSource;</span><br><span class="line"><span class="keyword">import</span> org.janusgraph.core.JanusGraph;</span><br><span class="line"><span class="keyword">import</span> org.janusgraph.core.JanusGraphFactory;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BaseConfiguration config = <span class="keyword">new</span> BaseConfiguration();</span><br><span class="line"></span><br><span class="line">        <span class="comment">////////////ä½¿ç”¨å†…å­˜ä½œä¸ºå­˜å‚¨ç«¯</span></span><br><span class="line">        <span class="comment">//config.setProperty("storage.backend", "inmemory");</span></span><br><span class="line">        <span class="comment">//////////ä½¿ç”¨cassandra+esä½œä¸ºå­˜å‚¨ç«¯</span></span><br><span class="line">        config.setProperty(<span class="string">"storage.backend"</span>, <span class="string">"cassandrathrift"</span>);</span><br><span class="line">        config.setProperty(<span class="string">"storage.cassandra.keyspace"</span>, <span class="string">"janus"</span>);</span><br><span class="line">        config.setProperty(<span class="string">"storage.hostname"</span>, <span class="string">"127.0.0.1"</span>);</span><br><span class="line">        config.setProperty(<span class="string">"index.search.backend"</span>, <span class="string">"elasticsearch"</span>);</span><br><span class="line">        config.setProperty(<span class="string">"index.search.hostname"</span>, <span class="string">"127.0.0.1"</span>);</span><br><span class="line"> </span><br><span class="line">        config.setProperty(<span class="string">"cache.db-cache"</span>, <span class="string">"true"</span>);</span><br><span class="line">        config.setProperty(<span class="string">"cache.db-cache-time"</span>, <span class="string">"300000"</span>);</span><br><span class="line">        config.setProperty(<span class="string">"cache.db-cache-size"</span>, <span class="string">"0.5"</span>);</span><br><span class="line">        ;</span><br><span class="line"></span><br><span class="line">        JanusGraph graph = JanusGraphFactory.open(config);</span><br><span class="line">        GraphTraversalSource g = graph.traversal();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//å…¶å®ƒé€»è¾‘ä»£ç </span></span><br><span class="line"> </span><br><span class="line">        g.tx().rollback();</span><br><span class="line">        graph.close();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> å›¾æ•°æ®åº“ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JanusGraph </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JanusGraphç³»ç»Ÿæ¶æ„]]></title>
      <url>/JanusGraph%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html</url>
      <content type="html"><![CDATA[<p>JanusGraphæ˜¯ä¸€ä¸ªå›¾å½¢æ•°æ®åº“å¼•æ“ã€‚ JanusGraphæœ¬èº«ä¸“æ³¨äºå‹ç¼©å›¾åºåˆ—åŒ–ã€ä¸°å¯Œå›¾æ•°æ®å»ºæ¨¡ã€é«˜æ•ˆçš„æŸ¥è¯¢æ‰§è¡Œã€‚ æ­¤å¤–ï¼ŒJanusGraphåˆ©ç”¨Hadoopè¿›è¡Œå›¾åˆ†æå’Œæ‰¹å¤„ç†ã€‚JanusGraphä¸ºæ•°æ®æŒä¹…åŒ–ï¼Œæ•°æ®ç´¢å¼•å’Œå®¢æˆ·ç«¯è®¿é—®å®ç°äº†å¼ºå¤§çš„æ¨¡å—åŒ–æ¥å£ã€‚ JanusGraphçš„æ¨¡å—åŒ–æ¶æ„ä½¿å…¶èƒ½å¤Ÿä¸å„ç§å­˜å‚¨ï¼Œç´¢å¼•å’Œå®¢æˆ·ç«¯æŠ€æœ¯è¿›è¡Œäº’æ“ä½œ; è¿™ä¹Ÿä½¿å¾—JanusGraphå‡çº§å¯¹åº”çš„ç»„ä»¶è¿‡ç¨‹å˜å¾—æ›´åŠ ç®€å•ã€‚<br><a id="more"></a><br>åœ¨JanusGraphå’Œç£ç›˜ä¹‹é—´æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå­˜å‚¨å’Œç´¢å¼•é€‚é…å™¨ã€‚ JanusGraphæ ‡é…ä»¥ä¸‹é€‚é…å™¨ï¼Œä½†JanusGraphçš„æ¨¡å—åŒ–æ¶æ„æ”¯æŒç¬¬ä¸‰æ–¹é€‚é…å™¨ã€‚</p>
<h3 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨:"></a>æ•°æ®å­˜å‚¨:</h3><p><span class="exturl" data-url="aHR0cHM6Ly9jYXNzYW5kcmEuYXBhY2hlLm9yZy8=" title="https://cassandra.apache.org/">Apache Cassandra<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9oYmFzZS5hcGFjaGUub3JnLw==" title="https://hbase.apache.org/">Apache HBase<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cub3JhY2xlLmNvbS90ZWNobmV0d29yay9kYXRhYmFzZS9iZXJrZWxleWRiL292ZXJ2aWV3L2luZGV4LTA5MzQwNS5odG1s" title="https://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html">Oracle Berkeley DB Javaä¼ä¸šç‰ˆ<i class="fa fa-external-link"></i></span></p>
<h3 id="ç´¢å¼•ï¼Œç”¨äºåŠ å¿«è®¿é—®é€Ÿåº¦å¹¶æ”¯æŒæ›´å¤æ‚çš„æŸ¥è¯¢è¯­å¥"><a href="#ç´¢å¼•ï¼Œç”¨äºåŠ å¿«è®¿é—®é€Ÿåº¦å¹¶æ”¯æŒæ›´å¤æ‚çš„æŸ¥è¯¢è¯­å¥" class="headerlink" title="ç´¢å¼•ï¼Œç”¨äºåŠ å¿«è®¿é—®é€Ÿåº¦å¹¶æ”¯æŒæ›´å¤æ‚çš„æŸ¥è¯¢è¯­å¥:"></a>ç´¢å¼•ï¼Œç”¨äºåŠ å¿«è®¿é—®é€Ÿåº¦å¹¶æ”¯æŒæ›´å¤æ‚çš„æŸ¥è¯¢è¯­å¥:</h3><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZWxhc3RpYy5jby9jbi9wcm9kdWN0cy9lbGFzdGljc2VhcmNoLw==" title="https://www.elastic.co/cn/products/elasticsearch/">Elasticsearch<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9sdWNlbmUuYXBhY2hlLm9yZy9zb2xyLw==" title="https://lucene.apache.org/solr/">Apache Solr<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9sdWNlbmUuYXBhY2hlLm9yZy8=" title="https://lucene.apache.org/">Apache Lucene<i class="fa fa-external-link"></i></span><br>æ€»ä½“æ¥è®²ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä¸JanusGraphè¿›è¡Œäº¤äº’ï¼š<br>åµŒåœ¨åº”ç”¨ç¨‹åºä¸­çš„JanusGraphåœ¨åŒä¸€ä¸ªJVMä¸­æ‰§è¡ŒGremlinè¯­å¥ã€‚ æŸ¥è¯¢ä»»åŠ¡ã€JanusGraphç¼“å­˜å’Œäº‹åŠ¡å¤„ç†éƒ½åœ¨åŒä¸€ä¸ªJVMä¸­ï¼Œè€Œåç«¯æ•°æ®æ£€ç´¢å¯èƒ½æ˜¯åœ¨æœ¬åœ°æˆ–è¿œç¨‹ã€‚<br>é€šè¿‡å‘æœåŠ¡å™¨æäº¤GremlinæŸ¥è¯¢è¯­å¥æ¥ä¸æœ¬åœ°æˆ–è¿œç¨‹JanusGraphå®ä¾‹äº¤äº’ã€‚ JanusGraphæœ¬èº«æ”¯æŒApache TinkerPopæ ˆçš„Gremlin Serverç»„ä»¶ã€‚</p>
<h3 id="å›¾-2-1-é«˜å±‚JanusGraphæ¶æ„å’Œä¸Šä¸‹æ–‡"><a href="#å›¾-2-1-é«˜å±‚JanusGraphæ¶æ„å’Œä¸Šä¸‹æ–‡" class="headerlink" title="å›¾ 2.1. é«˜å±‚JanusGraphæ¶æ„å’Œä¸Šä¸‹æ–‡"></a>å›¾ 2.1. é«˜å±‚JanusGraphæ¶æ„å’Œä¸Šä¸‹æ–‡</h3><p><img src="https://hexoblog-1254111960.cos.ap-guangzhou.myqcloud.com/520181017214825zz7z.png" alt=""></p>
]]></content>
      
        <categories>
            
            <category> å›¾æ•°æ®åº“ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JanusGraph </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¤šèŠ‚ç‚¹æ—¶é—´åŒæ­¥]]></title>
      <url>/%E5%A4%9A%E8%8A%82%E7%82%B9%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5.html</url>
      <content type="html"><![CDATA[<p>linux ç³»ç»Ÿæœ‰ä¸¤ä¸ªæ—¶é’Ÿï¼šä¸€ä¸ªæ˜¯ç¡¬ä»¶æ—¶é’Ÿï¼Œå³BIOSæ—¶é—´ï¼›å¦ä¸€ä¸ªæ˜¯ç³»ç»Ÿæ—¶é’Ÿï¼Œæ˜¯linuxç³»ç»ŸKernelï¼ˆå†…æ ¸ï¼‰æ—¶é—´ã€‚<br>ç³»ç»Ÿå¼€å¯æ—¶ï¼Œç³»ç»Ÿä¼šè¯»å–ç¡¬ä»¶æ—¶é—´ï¼Œè®¾ç½®ç³»ç»Ÿæ—¶é—´ã€‚å› æ­¤ï¼Œè®¾ç½®äº†ç³»ç»Ÿæ—¶é—´ï¼Œé‡å¯æ—¶ä¼šå¤±æ•ˆã€‚è¦æƒ³æ°¸ä¹…æ›´æ”¹æ—¶é—´ï¼Œå¯ä»¥å…ˆåŒæ­¥ç³»ç»Ÿæ—¶é—´ï¼ˆåŸºäºç½‘ç»œæ—¶é—´ï¼Œå‡†ç¡®æ€§è¾ƒé«˜ï¼‰ï¼Œå†åŒæ­¥ç³»ç»Ÿæ—¶é—´ã€‚<br><a id="more"></a></p>
<h2 id="ç¬¬ä¸€ç§æƒ…å†µ-ï¼šæœ‰ç½‘"><a href="#ç¬¬ä¸€ç§æƒ…å†µ-ï¼šæœ‰ç½‘" class="headerlink" title="ç¬¬ä¸€ç§æƒ…å†µ ï¼šæœ‰ç½‘"></a>ç¬¬ä¸€ç§æƒ…å†µ ï¼šæœ‰ç½‘</h2><p>ä»¥ç½‘ç»œæ—¶é—´ä¸ºå‡†æ ¡éªŒ</p>
<h3 id="ï¼ˆ1ï¼‰æŸ¥çœ‹æ—¶åŒº"><a href="#ï¼ˆ1ï¼‰æŸ¥çœ‹æ—¶åŒº" class="headerlink" title="ï¼ˆ1ï¼‰æŸ¥çœ‹æ—¶åŒº"></a>ï¼ˆ1ï¼‰æŸ¥çœ‹æ—¶åŒº</h3><p>date    â€“ æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´<br>[root@develop Asia]# date -R<br>Fri, 22 Mar 2019 14:11:10 +0800      â€“ +0800  ä»£è¡¨æ˜¯ä¸œå…«åŒºï¼Œå¦‚æœä¸æ˜¯ï¼Œè‡ªè¡Œæ›´æ”¹åˆ°ä¸œå…«åŒº</p>
<h3 id="ï¼ˆ2ï¼‰å®‰è£…ntpdateå·¥å…·"><a href="#ï¼ˆ2ï¼‰å®‰è£…ntpdateå·¥å…·" class="headerlink" title="ï¼ˆ2ï¼‰å®‰è£…ntpdateå·¥å…·"></a>ï¼ˆ2ï¼‰å®‰è£…ntpdateå·¥å…·</h3><p>yum install ntpdate</p>
<h3 id="ï¼ˆ3ï¼‰åŒæ­¥æ—¶é—´ï¼Œç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„æœåŠ¡å™¨"><a href="#ï¼ˆ3ï¼‰åŒæ­¥æ—¶é—´ï¼Œç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„æœåŠ¡å™¨" class="headerlink" title="ï¼ˆ3ï¼‰åŒæ­¥æ—¶é—´ï¼Œç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„æœåŠ¡å™¨"></a>ï¼ˆ3ï¼‰åŒæ­¥æ—¶é—´ï¼Œç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„æœåŠ¡å™¨</h3><p>systemctl stop  ntpd         â€“ åœæ‰ntpd æœåŠ¡ï¼Œä½¿ ntpdate å¯ä»¥è¿è¡Œ<br>ntpdate ntp1.aliyun.com<br>æˆ–è€… ntpdate time.windows.com<br>ntpdate asia.pool.ntp.org<br>ntpdate time.nuri.net</p>
<h3 id="ï¼ˆ4ï¼‰åŒæ­¥ç¡¬ä»¶æ—¶é—´"><a href="#ï¼ˆ4ï¼‰åŒæ­¥ç¡¬ä»¶æ—¶é—´" class="headerlink" title="ï¼ˆ4ï¼‰åŒæ­¥ç¡¬ä»¶æ—¶é—´"></a>ï¼ˆ4ï¼‰åŒæ­¥ç¡¬ä»¶æ—¶é—´</h3><p>hwclock  æŸ¥çœ‹ç¡¬ä»¶æ—¶é—´<br>hwclock â€“systohc â€“localtime     â€“ åŒæ­¥ç¡¬ä»¶æ—¶é—´</p>
<h3 id="ï¼ˆ5ï¼‰æ°¸ä¹…ç”Ÿæ•ˆ"><a href="#ï¼ˆ5ï¼‰æ°¸ä¹…ç”Ÿæ•ˆ" class="headerlink" title="ï¼ˆ5ï¼‰æ°¸ä¹…ç”Ÿæ•ˆ"></a>ï¼ˆ5ï¼‰æ°¸ä¹…ç”Ÿæ•ˆ</h3><p>hwclock -w<br>systemctl start  ntpd    â€“ ç»“æŸå®Œä¹‹å ï¼Œå¼€å¯ntpd</p>
<h2 id="ç¬¬äºŒç§æƒ…å†µ-ï¼šæ²¡æœ‰ç½‘ç»œ"><a href="#ç¬¬äºŒç§æƒ…å†µ-ï¼šæ²¡æœ‰ç½‘ç»œ" class="headerlink" title="ç¬¬äºŒç§æƒ…å†µ ï¼šæ²¡æœ‰ç½‘ç»œ"></a>ç¬¬äºŒç§æƒ…å†µ ï¼šæ²¡æœ‰ç½‘ç»œ</h2><p>è¿™ç§åŒæ­¥æ—¶é—´çš„æ–¹æ³•ï¼Œå¾ˆé€‚åˆåœ¨æ— ç½‘çš„æƒ…å†µä¸‹ï¼ŒåŒæ­¥æœºå™¨é›†ç¾¤æ—¶é—´<br>ä¸‹é¢ä¸€èµ·æ“ä½œä¸€éã€‚<br>å¦‚æœ  æœ‰ä¸¤å°æœºå™¨ï¼Œé€‰æ‹©å…¶ä¸­ä¸€å°æœºå™¨Aï¼Œä½œä¸ºæœåŠ¡ç«¯ï¼Œæœºå™¨Bï¼Œä½œä¸ºå®¢æˆ·ç«¯</p>
<h3 id="ï¼ˆ1ï¼‰ä¿®æ”¹æœåŠ¡ç«¯A"><a href="#ï¼ˆ1ï¼‰ä¿®æ”¹æœåŠ¡ç«¯A" class="headerlink" title="ï¼ˆ1ï¼‰ä¿®æ”¹æœåŠ¡ç«¯A"></a>ï¼ˆ1ï¼‰ä¿®æ”¹æœåŠ¡ç«¯A</h3><h4 id="â‘ -ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#â‘ -ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="â‘  ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>â‘  ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><p>[root@hanadevelop Asia]# vi  /etc/ntp.conf</p>
<h4 id="â‘¡é‡å¯ntpd"><a href="#â‘¡é‡å¯ntpd" class="headerlink" title="â‘¡é‡å¯ntpd"></a>â‘¡é‡å¯ntpd</h4><p>systemctl restart ntpd   â€“ è¦ä¿è¯ntpd æœåŠ¡å¼€å¯ï¼Œä¸ç„¶å…¶å®ƒæœºå™¨ä¸èƒ½åŒæ­¥è¯¥æœºå™¨çš„æ—¶é—´</p>
<h3 id="ï¼ˆ2ï¼‰ä¿®æ”¹å®¢æˆ·ç«¯æœºå™¨B"><a href="#ï¼ˆ2ï¼‰ä¿®æ”¹å®¢æˆ·ç«¯æœºå™¨B" class="headerlink" title="ï¼ˆ2ï¼‰ä¿®æ”¹å®¢æˆ·ç«¯æœºå™¨B"></a>ï¼ˆ2ï¼‰ä¿®æ”¹å®¢æˆ·ç«¯æœºå™¨B</h3><h4 id="â‘ ä¿®æ”¹é…ç½®"><a href="#â‘ ä¿®æ”¹é…ç½®" class="headerlink" title="â‘ ä¿®æ”¹é…ç½®"></a>â‘ ä¿®æ”¹é…ç½®</h4><p>[root@develop Asia]# vi  /etc/ntp.conf</p>
<h4 id="â‘¡"><a href="#â‘¡" class="headerlink" title="â‘¡"></a>â‘¡</h4><p>[root@demo sysconfig]# systemctl restart ntpd<br>[root@demo sysconfig]# systemctl enable ntpd<br>[root@demo sysconfig]# systemctl stop  ntpd</p>
<h3 id="ï¼ˆ3ï¼‰æµ‹è¯•"><a href="#ï¼ˆ3ï¼‰æµ‹è¯•" class="headerlink" title="ï¼ˆ3ï¼‰æµ‹è¯•"></a>ï¼ˆ3ï¼‰æµ‹è¯•</h3><h4 id="â‘ ä¿®æ”¹æœºå™¨Açš„æ—¶é—´"><a href="#â‘ ä¿®æ”¹æœºå™¨Açš„æ—¶é—´" class="headerlink" title="â‘ ä¿®æ”¹æœºå™¨Açš„æ—¶é—´"></a>â‘ ä¿®æ”¹æœºå™¨Açš„æ—¶é—´</h4><p>[root@hanadevelop Asia]# date -s â€˜2019-3-22 17:00:11â€™<br>2019å¹´ 03æœˆ 22æ—¥ æ˜ŸæœŸäº” 17:00:11 CST</p>
<h4 id="â‘¡åŒæ­¥æœºå™¨Bçš„æ—¶é—´"><a href="#â‘¡åŒæ­¥æœºå™¨Bçš„æ—¶é—´" class="headerlink" title="â‘¡åŒæ­¥æœºå™¨Bçš„æ—¶é—´"></a>â‘¡åŒæ­¥æœºå™¨Bçš„æ—¶é—´</h4><p>æŸ¥çœ‹åŒæ­¥å®Œæˆ</p>
<h4 id="â‘¢-åŒæ­¥ç¡¬ä»¶æ—¶é—´"><a href="#â‘¢-åŒæ­¥ç¡¬ä»¶æ—¶é—´" class="headerlink" title="â‘¢ åŒæ­¥ç¡¬ä»¶æ—¶é—´"></a>â‘¢ åŒæ­¥ç¡¬ä»¶æ—¶é—´</h4><p>hwclock â€“systohc â€“localtime     â€“ åŒæ­¥ç¡¬ä»¶æ—¶é—´<br>hwclock -w     â€“ æ°¸ä¹…ç”Ÿæ•ˆ</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[FastJsonååºåˆ—åŒ–ä¸ºä»€ä¹ˆç”¨TypeReference]]></title>
      <url>/FastJson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8TypeReference.html</url>
      <content type="html"><![CDATA[<p>æ³›å‹åºåˆ—åŒ–éTypeReference codeï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Map&lt;String, Person&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">    map.put(<span class="string">"one"</span>, <span class="keyword">new</span> Person(<span class="string">"zhangsan"</span>));</span><br><span class="line">    map.put(<span class="string">"two"</span>, <span class="keyword">new</span> Person(<span class="string">"lisi"</span>));</span><br><span class="line">    String jsonStr = JSON.toJSONString(map);</span><br><span class="line">    <span class="keyword">byte</span>[] bytes = jsonStr.getBytes();</span><br><span class="line">    String json = <span class="keyword">new</span> String(bytes);</span><br><span class="line">    Map&lt;String, Person&gt; res = JSON.parseObject(json, Map.class);</span><br><span class="line">    System.out.println(res.get(<span class="string">"one"</span>));</span><br><span class="line">    System.out.println(res.get(<span class="string">"one"</span>).getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>è¾“å‡ºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.reflect.InvocationTargetException</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">	at java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">	at com.intellij.rt.execution.CommandLineWrapper.main(CommandLineWrapper.java:<span class="number">67</span>)</span><br><span class="line">Caused by: java.lang.ClassCastException: com.alibaba.fastjson.JSONObject cannot be cast to subtitle.io.Person</span><br><span class="line">	at subtitle.io.MyMain.main(MyMain.java:<span class="number">48</span>)</span><br><span class="line">	... <span class="number">5</span> more</span><br><span class="line">&#123;<span class="string">"name"</span>:<span class="string">"zhangsan"</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ³›å‹åºåˆ—åŒ–TypeReference codeï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Map&lt;String, Person&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">    map.put(<span class="string">"one"</span>, <span class="keyword">new</span> Person(<span class="string">"zhangsan"</span>));</span><br><span class="line">    map.put(<span class="string">"two"</span>, <span class="keyword">new</span> Person(<span class="string">"lisi"</span>));</span><br><span class="line">    String jsonStr = JSON.toJSONString(map);</span><br><span class="line">    <span class="keyword">byte</span>[] bytes = jsonStr.getBytes();</span><br><span class="line">    String json = <span class="keyword">new</span> String(bytes);</span><br><span class="line">    Map&lt;String, Person&gt; res = JSON.parseObject(json, <span class="keyword">new</span> TypeReference&lt;Map&lt;String, Person&gt;&gt;()&#123;&#125;);</span><br><span class="line">    System.out.println(res.get(<span class="string">"one"</span>));</span><br><span class="line">    System.out.println(res.get(<span class="string">"one"</span>).getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¾“å‡ºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person&#123;name=<span class="string">'zhangsan'</span>&#125;</span><br><span class="line">zhangsan</span><br></pre></td></tr></table></figure></p>
<p>æŠ¥é”™åŸå› ï¼š<br>    ååºåˆ—åŒ–æ—¶å€™ï¼Œè™½ç„¶æ·»åŠ Map.classï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•æŒ‡å®šPersonç±»å‹ï¼Œå¯¼è‡´ååºåˆ—åŒ–åçš„å¯¹è±¡ä¸ºMap<string, map<string,="" string="">&gt;,è€Œä¸æ˜¯Map<string, person="">ï¼Œæ‰€ä»¥é’ˆå¯¹æ³›å‹çš„ååºåˆ—åŒ–ï¼Œéœ€è¦ä½¿ç”¨TypeReference<br><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MDAxNzc2L2FydGljbGUvZGV0YWlscy84MzY1Mzg2OA==" title="https://blog.csdn.net/qq_35001776/article/details/83653868">è½¬è½½è‡³CSDN<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly95cS5hbGl5dW4uY29tL2FydGljbGVzLzYwOTQ0MQ==" title="https://yq.aliyun.com/articles/609441">å‚è€ƒæ–‡ç« <i class="fa fa-external-link"></i></span></string,></string,></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Fastjson </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sparké¡¹ç›®åœ¨IDEAè¿è¡Œæ­£å¸¸ï¼Œspark-submitæç¤ºæ²¡æœ‰åˆé€‚é©±åŠ¨]]></title>
      <url>/driver.html</url>
      <content type="html"><![CDATA[<h2 id="java-sql-SQLException-No-suitable-driver-è§£å†³æ–¹æ¡ˆ"><a href="#java-sql-SQLException-No-suitable-driver-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="java.sql.SQLException: No suitable driver è§£å†³æ–¹æ¡ˆ"></a>java.sql.SQLException: No suitable driver è§£å†³æ–¹æ¡ˆ</h2><p>æŠ¥é”™ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.sql.SQLException: No suitable driver	at java.sql.DriverManager.getDriver(DriverManager.java:<span class="number">315</span>)	at org.apache.spark.sql.execution.datasources.jdbc.JDBCOptions$$anonfun$<span class="number">7</span>.apply(JDBCOptions.scala:<span class="number">85</span>)	at org.apache.spark.sql.execution.datasources.jdbc.JDBCOptions$$anonfun$<span class="number">7</span>.apply(JDBCOptions.scala:<span class="number">85</span>)	at scala.Option.getOrElse(Option.scala:<span class="number">121</span>)	at org.apache.spark.sql.execution.datasources.jdbc.JDBCOptions.&lt;init&gt;(JDBCOptions.scala:<span class="number">84</span>)	at org.apache.spark.sql.execution.datasources.jdbc.JDBCOptions.&lt;init&gt;(JDBCOptions.scala:<span class="number">35</span>)	at org.apache.spark.sql.execution.datasources.jdbc.JdbcRelationProvider.createRelation(JdbcRelationProvider.scala:<span class="number">60</span>)	at org.apache.spark.sql.execution.datasources.SaveIntoDataSourceCommand.run(SaveIntoDataSourceCommand.scala:<span class="number">45</span>)	at org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult$lzycompute(commands.scala:<span class="number">70</span>)	at org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult(commands.scala:<span class="number">68</span>)	at org.apache.spark.sql.execution.command.ExecutedCommandExec.doExecute(commands.scala:<span class="number">86</span>)	at org.apache.spark.sql.execution.SparkPlan$$anonfun$execute$<span class="number">1</span>.apply(SparkPlan.scala:<span class="number">131</span>)	at org.apache.spark.sql.execution.SparkPlan$$anonfun$execute$<span class="number">1</span>.apply(SparkPlan.scala:<span class="number">127</span>)	at org.apache.spark.sql.execution.SparkPlan$$anonfun$executeQuery$<span class="number">1</span>.apply(SparkPlan.scala:<span class="number">155</span>)	at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:<span class="number">151</span>)	at org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:<span class="number">152</span>)	at org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:<span class="number">127</span>)	at org.apache.spark.sql.execution.QueryExecution.toRdd$lzycompute(QueryExecution.scala:<span class="number">80</span>)	at org.apache.spark.sql.execution.QueryExecution.toRdd(QueryExecution.scala:<span class="number">80</span>)	at org.apache.spark.sql.DataFrameWriter$$anonfun$runCommand$<span class="number">1</span>.apply(DataFrameWriter.scala:<span class="number">656</span>)	at org.apache.spark.sql.DataFrameWriter$$anonfun$runCommand$<span class="number">1</span>.apply(DataFrameWriter.scala:<span class="number">656</span>)	at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:<span class="number">77</span>)	at org.apache.spark.sql.DataFrameWriter.runCommand(DataFrameWriter.scala:<span class="number">656</span>)	at org.apache.spark.sql.DataFrameWriter.saveToV1Source(DataFrameWriter.scala:<span class="number">273</span>)	at org.apache.spark.sql.DataFrameWriter.save(DataFrameWriter.scala:<span class="number">267</span>)	at org.apache.spark.sql.DataFrameWriter.jdbc(DataFrameWriter.scala:<span class="number">501</span>)	at com.xinyi.multiCollision.service.JobService$.dealWithMoreData(JobService.scala:<span class="number">406</span>)	at com.xinyi.multiCollision.sparkJob.MultiCollisionApp$.main(MultiCollisionApp.scala:<span class="number">70</span>)	at com.xinyi.multiCollision.sparkJob.MultiCollisionApp.main(MultiCollisionApp.scala)	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)	at java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)	at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:<span class="number">52</span>)	at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:<span class="number">904</span>)	at org.apache.spark.deploy.SparkSubmit$.doRunMain$<span class="number">1</span>(SparkSubmit.scala:<span class="number">198</span>)	at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:<span class="number">228</span>)	at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:<span class="number">137</span>)	at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ­¤æŠ¥é”™åŸå› æ˜¯å› ä¸ºç¼ºå°‘è¿æ¥æ•°æ®åº“çš„é©±åŠ¨ã€‚<br>æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿æ¥å‚æ•°ï¼Œé©±åŠ¨éƒ½æ˜¯èƒ½è€ƒè™‘åˆ°çš„ã€‚ä½†æ˜¯åœ¨è¿æ¥å‚æ•°ï¼Œé©±åŠ¨å·²æ·»åŠ çš„æƒ…å†µä¸‹ä¹Ÿä¼šæŠ¥é”™ã€‚æœ¬äººsparké¡¹ç›®åœ¨IDEAæ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯spark-submitçš„æ—¶å€™å‡ºç°æ­¤é”™è¯¯ï¼ˆä¹‹å‰æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼Œåé¢æŠ¥é”™ï¼Œæ€€ç–‘è·Ÿé›†ç¾¤ç¯å¢ƒæœ‰å…³ï¼‰ã€‚æäº¤è„šæœ¬å·²ç»é…ç½®äº†å‚æ•°â€“conf spark.yarn.jars ï¼ˆè™½ç„¶å·²ç»é…ç½®ï¼Œé©±åŠ¨ï¼ŒjaråŒ…æœ‰å¯èƒ½ä¸åŠ è½½è¿›å»ï¼‰ã€‚æ­¤æ—¶çš„è§£å†³æ–¹æ¡ˆï¼š<br>å°†mysql-connector-java-5.1.24-bin.jarçš„jaråŒ…åŠ å…¥é›†ç¾¤JAVA_HOME\jre\lib\extæ–‡ä»¶å¤¹ä¸‹ï¼Œå†æ¬¡è¿è¡Œï¼Œé—®é¢˜å¾—ä»¥è§£å†³ã€‚</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[spark2.4.2ç¼–è¯‘ï¼ˆmacç³»ç»Ÿä¸‹ï¼‰]]></title>
      <url>/spark2-4-2%E7%BC%96%E8%AF%91.html</url>
      <content type="html"><![CDATA[<h2 id="ç¼–è¯‘å‰æ‰€æ³¨æ„äº‹é¡¹ï¼š"><a href="#ç¼–è¯‘å‰æ‰€æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="ç¼–è¯‘å‰æ‰€æ³¨æ„äº‹é¡¹ï¼š"></a>ç¼–è¯‘å‰æ‰€æ³¨æ„äº‹é¡¹ï¼š</h2><p>é¦–å…ˆï¼Œå°½å¯èƒ½é˜…è¯»å®˜ç½‘ç¼–è¯‘æ–‡æ¡£ <span class="exturl" data-url="aHR0cDovL3NwYXJrLmFwYWNoZS5vcmcvZG9jcy9sYXRlc3QvYnVpbGRpbmctc3BhcmsuaHRtbA==" title="http://spark.apache.org/docs/latest/building-spark.html">Building Apache Spark<i class="fa fa-external-link"></i></span><br>æºç ä¸‹è½½æ¨ègit clone æˆ–è€… wget ã€‚<br>ç¼–è¯‘å‰ç¡®ä¿ç½‘ç»œè‰¯å¥½ã€‚</p>
<h2 id="ä¸‹è½½æ‰€éœ€è¦çš„è½¯ä»¶ï¼ˆæ³¨æ„ç‰ˆæœ¬ï¼‰"><a href="#ä¸‹è½½æ‰€éœ€è¦çš„è½¯ä»¶ï¼ˆæ³¨æ„ç‰ˆæœ¬ï¼‰" class="headerlink" title="ä¸‹è½½æ‰€éœ€è¦çš„è½¯ä»¶ï¼ˆæ³¨æ„ç‰ˆæœ¬ï¼‰"></a>ä¸‹è½½æ‰€éœ€è¦çš„è½¯ä»¶ï¼ˆæ³¨æ„ç‰ˆæœ¬ï¼‰</h2><p>Â· Spark-2.4.2.tgz<br>Â· Hadoop-2.7.6<br>Â· Scala-2.11.12<br>Â· jdk1.8.0_191<br>Â· apache-maven-3.6.x<br>Â· git<br>æ³¨æ„ï¼šå…¶ä¸­sparkæ˜¯æºç ï¼Œå…¶ä»–æ˜¯å¯è¿è¡ŒåŒ…<br><a id="more"></a></p>
<h2 id="è§£å‹å®‰è£…å¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆè¿‡ç¨‹ç•¥ï¼‰"><a href="#è§£å‹å®‰è£…å¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆè¿‡ç¨‹ç•¥ï¼‰" class="headerlink" title="è§£å‹å®‰è£…å¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆè¿‡ç¨‹ç•¥ï¼‰"></a>è§£å‹å®‰è£…å¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆè¿‡ç¨‹ç•¥ï¼‰</h2><p>é…ç½®å®Œï¼Œæ³¨æ„æµ‹è¯•ã€‚å…¶ä¸­ï¼Œmavené…ç½®æœ¬åœ°åº“ï¼Œé•œåƒåœ°å€è®¾ç½®ä¸ºé˜¿é‡Œäº‘åœ°å€ã€‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> åˆ›å»ºæœ¬åœ°ä»“åº“æ–‡ä»¶å¤¹</span><br><span class="line">mkdir ~/maven_repo</span><br><span class="line"><span class="meta">#</span> ä¿®æ”¹settings.xmlæ–‡ä»¶</span><br><span class="line">vim $MAVEN_HOME/conf/settings.xml</span><br></pre></td></tr></table></figure></p>
<p>éƒ¨åˆ†ä»£ç ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- localRepository</span></span><br><span class="line"><span class="comment">   | The path to the local repository maven will use to store artifacts.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">   | Default: $&#123;user.home&#125;/.m2/repository</span></span><br><span class="line"><span class="comment">  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/home/max/maven_repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*,!cloudera<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span>                     </span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span></span><br><span class="line">      http://maven.aliyun.com/nexus/content/groups/public</span><br><span class="line">    <span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ä¿®æ”¹è„šæœ¬make-distribution-sh"><a href="#ä¿®æ”¹è„šæœ¬make-distribution-sh" class="headerlink" title="ä¿®æ”¹è„šæœ¬make-distribution.sh"></a>ä¿®æ”¹è„šæœ¬make-distribution.sh</h2><p>ç¼–è¯‘ä¸ä½¿ç”¨mvnè¿™ä¸ªå‘½ä»¤,ç›´æ¥ç”¨make-distribution.shè„šæœ¬ï¼Œä½†æ˜¯éœ€è¦ä¿®æ”¹è¯¥è„šæœ¬<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>spark-2.4.2æ–‡ä»¶å¤¹ä¸‹</span><br><span class="line">vim ./dev/make-distribution.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>å°†è¿™äº›è¡Œæ³¨é‡Šæ‰    æ­¤å¤„ä¸ºæœ€ä½³å®è·µï¼Œä¸ºçš„æ˜¯é€šè¿‡æŒ‡å®šç‰ˆæœ¬å·å‡å°‘ç¼–è¯‘æ—¶é—´</span><br><span class="line"><span class="meta">#</span>VERSION=$("$MVN" help:evaluate -Dexpression=project.version $@ 2&gt;/dev/null\</span><br><span class="line"><span class="meta">#</span>    | grep -v "INFO"\</span><br><span class="line"><span class="meta">#</span>    | grep -v "WARNING"\</span><br><span class="line"><span class="meta">#</span>    | tail -n 1)</span><br><span class="line"><span class="meta">#</span>SCALA_VERSION=$("$MVN" help:evaluate -Dexpression=scala.binary.version $@ 2&gt;/dev/null\</span><br><span class="line"><span class="meta">#</span>    | grep -v "INFO"\</span><br><span class="line"><span class="meta">#</span>    | grep -v "WARNING"\</span><br><span class="line"><span class="meta">#</span>    | tail -n 1)</span><br><span class="line"><span class="meta">#</span>SPARK_HADOOP_VERSION=$("$MVN" help:evaluate -Dexpression=hadoop.version $@ 2&gt;/dev/null\</span><br><span class="line"><span class="meta">#</span>    | grep -v "INFO"\</span><br><span class="line"><span class="meta">#</span>    | grep -v "WARNING"\</span><br><span class="line"><span class="meta">#</span>    | tail -n 1)</span><br><span class="line"><span class="meta">#</span>SPARK_HIVE=$("$MVN" help:evaluate -Dexpression=project.activeProfiles -pl sql/hive $@ 2&gt;/dev/null\</span><br><span class="line"><span class="meta">#</span>    | grep -v "INFO"\</span><br><span class="line"><span class="meta">#</span>    | grep -v "WARNING"\</span><br><span class="line"><span class="meta">#</span>    | fgrep --count "&lt;id&gt;hive&lt;/id&gt;";\</span><br><span class="line"><span class="meta">#</span>    # Reset exit status to 0, otherwise the script stops here if the last grep finds nothing\</span><br><span class="line"><span class="meta">#</span>    # because we use "set -o pipefail"</span><br><span class="line"><span class="meta">#</span>    echo -n)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>#æ·»åŠ ä¸€ä¸‹å‚æ•°ï¼Œæ³¨æ„ï¼Œç‰ˆæœ¬å·è¦å¯¹åº”è‡ªå·±æƒ³è¦çš„ç”Ÿäº§ç¯å¢ƒ</span><br><span class="line">VERSION=2.4.2</span><br><span class="line">SCALA_VERSION=2.11</span><br><span class="line">SPARK_HADOOP_VERSION=hadoop-2.6.0-cdh5.14.0</span><br><span class="line">SPARK_HIVE=1</span><br></pre></td></tr></table></figure></p>
<h2 id="ä¿®æ”¹æºç åŒ…spark-2-4-2ä¸‹çš„pom-xml"><a href="#ä¿®æ”¹æºç åŒ…spark-2-4-2ä¸‹çš„pom-xml" class="headerlink" title="ä¿®æ”¹æºç åŒ…spark-2.4.2ä¸‹çš„pom.xml"></a>ä¿®æ”¹æºç åŒ…spark-2.4.2ä¸‹çš„pom.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;repositories&gt;</span></span><br><span class="line"><span class="comment">     This should be at top, it makes maven try the central repo first and then others</span></span><br><span class="line"><span class="comment">and hence faster dep resolution</span></span><br><span class="line"><span class="comment">    &lt;repository&gt;</span></span><br><span class="line"><span class="comment">        &lt;id&gt;central&lt;/id&gt;</span></span><br><span class="line"><span class="comment">        &lt;name&gt;Maven Repository&lt;/name&gt;</span></span><br><span class="line"><span class="comment">        &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;</span></span><br><span class="line"><span class="comment">        &lt;releases&gt;</span></span><br><span class="line"><span class="comment">            &lt;enabled&gt;true&lt;/enabled&gt;</span></span><br><span class="line"><span class="comment">        &lt;/releases&gt;</span></span><br><span class="line"><span class="comment">        &lt;snapshots&gt;</span></span><br><span class="line"><span class="comment">            &lt;enabled&gt;false&lt;/enabled&gt;</span></span><br><span class="line"><span class="comment">        &lt;/snapshots&gt;</span></span><br><span class="line"><span class="comment">    &lt;/repository&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>central<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public//<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span>always<span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span>fail<span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>cloudera<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repository.cloudera.com/artifactory/cloudera-repos/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å¼€å§‹ç¼–è¯‘"><a href="#å¼€å§‹ç¼–è¯‘" class="headerlink" title="å¼€å§‹ç¼–è¯‘"></a>å¼€å§‹ç¼–è¯‘</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./dev/make-distribution.sh \</span><br><span class="line">--name hadoop-2.6.0-cdh5.14.0  \</span><br><span class="line">--tgz \</span><br><span class="line">-Phadoop-2.6 \</span><br><span class="line">-Dhadoop.version=2.6.0-cdh5.14.0 \</span><br><span class="line">-Phive -Phive-thriftserver  \</span><br><span class="line">-Pyarn \</span><br><span class="line">-Pkubernetes</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å¤§æ¦‚éœ€è¦åŠå°æ—¶ä»¥ä¸Šï¼Œè€å¿ƒç­‰å¾…å°±è¡Œã€‚ç¼–è¯‘è¿‡ç¨‹ä¸­å¦‚æœæŠ¥é”™ï¼Œä¸€èˆ¬æœ‰errorå­—æ ·ã€‚<br>å‡ºç°ä»¥ä¸‹å­—æ ·ï¼Œä»£è¡¨ç¼–è¯‘å®Œæˆï¼š<br><img src="https://hexoblog-1254111960.cos.ap-guangzhou.myqcloud.com/spark%E7%BC%96%E8%AF%91%E6%88%90%E5%8A%9F.png" alt=""><br>ç¼–è¯‘ååŒ…æ‰€åœ¨ä½ç½®ï¼Œæºç åŒ…spark-2.4.2æ ¹ç›®å½•ä¸‹ï¼š<br><img src="https://hexoblog-1254111960.cos.ap-guangzhou.myqcloud.com/spark%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%BC%96%E8%AF%91%E5%8C%85%E5%9C%B0%E5%9D%80.png" alt=""><br>è‡³æ­¤ï¼Œç¼–è¯‘å®Œï¼</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼šæ¶æ„å’Œè®¾è®¡]]></title>
      <url>/Hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9A%E6%9E%B6%E6%9E%84%E5%92%8C%E8%AE%BE%E8%AE%A1.html</url>
      <content type="html"><![CDATA[<h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ(HDFS)è¢«è®¾è®¡æˆé€‚åˆè¿è¡Œåœ¨é€šç”¨ç¡¬ä»¶(commodity hardware)ä¸Šçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒå’Œç°æœ‰çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæœ‰å¾ˆå¤šå…±åŒç‚¹ã€‚ä½†åŒæ—¶ï¼Œå®ƒå’Œå…¶ä»–çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„åŒºåˆ«ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ã€‚HDFSæ˜¯ä¸€ä¸ªé«˜åº¦å®¹é”™æ€§çš„ç³»ç»Ÿï¼Œé€‚åˆéƒ¨ç½²åœ¨å»‰ä»·çš„æœºå™¨ä¸Šã€‚HDFSèƒ½æä¾›é«˜ååé‡çš„æ•°æ®è®¿é—®ï¼Œéå¸¸é€‚åˆå¤§è§„æ¨¡æ•°æ®é›†ä¸Šçš„åº”ç”¨ã€‚HDFSæ”¾å®½äº†ä¸€éƒ¨åˆ†POSIXçº¦æŸï¼Œæ¥å®ç°æµå¼è¯»å–æ–‡ä»¶ç³»ç»Ÿæ•°æ®çš„ç›®çš„ã€‚HDFSåœ¨æœ€å¼€å§‹æ˜¯ä½œä¸ºApache Nutchæœç´¢å¼•æ“é¡¹ç›®çš„åŸºç¡€æ¶æ„è€Œå¼€å‘çš„ã€‚HDFSæ˜¯Apache Hadoop Coreé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªé¡¹ç›®çš„åœ°å€æ˜¯<span class="exturl" data-url="aHR0cDovL2hhZG9vcC5hcGFjaGUub3JnL2NvcmUv44CC" title="http://hadoop.apache.org/core/ã€‚">http://hadoop.apache.org/core/ã€‚<i class="fa fa-external-link"></i></span><br><a id="more"></a></p>
<h2 id="å‰æå’Œè®¾è®¡ç›®æ ‡"><a href="#å‰æå’Œè®¾è®¡ç›®æ ‡" class="headerlink" title="å‰æå’Œè®¾è®¡ç›®æ ‡"></a>å‰æå’Œè®¾è®¡ç›®æ ‡</h2><h3 id="ç¡¬ä»¶é”™è¯¯"><a href="#ç¡¬ä»¶é”™è¯¯" class="headerlink" title="ç¡¬ä»¶é”™è¯¯"></a>ç¡¬ä»¶é”™è¯¯</h3><p>ç¡¬ä»¶é”™è¯¯æ˜¯å¸¸æ€è€Œä¸æ˜¯å¼‚å¸¸ã€‚HDFSå¯èƒ½ç”±æˆç™¾ä¸Šåƒçš„æœåŠ¡å™¨æ‰€æ„æˆï¼Œæ¯ä¸ªæœåŠ¡å™¨ä¸Šå­˜å‚¨ç€æ–‡ä»¶ç³»ç»Ÿçš„éƒ¨åˆ†æ•°æ®ã€‚æˆ‘ä»¬é¢å¯¹çš„ç°å®æ˜¯æ„æˆç³»ç»Ÿçš„ç»„ä»¶æ•°ç›®æ˜¯å·¨å¤§çš„ï¼Œè€Œä¸”ä»»ä¸€ç»„ä»¶éƒ½æœ‰å¯èƒ½å¤±æ•ˆï¼Œè¿™æ„å‘³ç€æ€»æ˜¯æœ‰ä¸€éƒ¨åˆ†HDFSçš„ç»„ä»¶æ˜¯ä¸å·¥ä½œçš„ã€‚å› æ­¤é”™è¯¯æ£€æµ‹å’Œå¿«é€Ÿã€è‡ªåŠ¨çš„æ¢å¤æ˜¯HDFSæœ€æ ¸å¿ƒçš„æ¶æ„ç›®æ ‡ã€‚</p>
<h3 id="æµå¼æ•°æ®è®¿é—®"><a href="#æµå¼æ•°æ®è®¿é—®" class="headerlink" title="æµå¼æ•°æ®è®¿é—®"></a>æµå¼æ•°æ®è®¿é—®</h3><p>è¿è¡Œåœ¨HDFSä¸Šçš„åº”ç”¨å’Œæ™®é€šçš„åº”ç”¨ä¸åŒï¼Œéœ€è¦æµå¼è®¿é—®å®ƒä»¬çš„æ•°æ®é›†ã€‚HDFSçš„è®¾è®¡ä¸­æ›´å¤šçš„è€ƒè™‘åˆ°äº†æ•°æ®æ‰¹å¤„ç†ï¼Œè€Œä¸æ˜¯ç”¨æˆ·äº¤äº’å¤„ç†ã€‚æ¯”ä¹‹æ•°æ®è®¿é—®çš„ä½å»¶è¿Ÿé—®é¢˜ï¼Œæ›´å…³é”®çš„åœ¨äºæ•°æ®è®¿é—®çš„é«˜ååé‡ã€‚POSIXæ ‡å‡†è®¾ç½®çš„å¾ˆå¤šç¡¬æ€§çº¦æŸå¯¹HDFSåº”ç”¨ç³»ç»Ÿä¸æ˜¯å¿…éœ€çš„ã€‚ä¸ºäº†æé«˜æ•°æ®çš„ååé‡ï¼Œåœ¨ä¸€äº›å…³é”®æ–¹é¢å¯¹POSIXçš„è¯­ä¹‰åšäº†ä¸€äº›ä¿®æ”¹ã€‚</p>
<h3 id="å¤§è§„æ¨¡æ•°æ®é›†"><a href="#å¤§è§„æ¨¡æ•°æ®é›†" class="headerlink" title="å¤§è§„æ¨¡æ•°æ®é›†"></a>å¤§è§„æ¨¡æ•°æ®é›†</h3><p>è¿è¡Œåœ¨HDFSä¸Šçš„åº”ç”¨å…·æœ‰å¾ˆå¤§çš„æ•°æ®é›†ã€‚HDFSä¸Šçš„ä¸€ä¸ªå…¸å‹æ–‡ä»¶å¤§å°ä¸€èˆ¬éƒ½åœ¨Gå­—èŠ‚è‡³Tå­—èŠ‚ã€‚å› æ­¤ï¼ŒHDFSè¢«è°ƒèŠ‚ä»¥æ”¯æŒå¤§æ–‡ä»¶å­˜å‚¨ã€‚å®ƒåº”è¯¥èƒ½æä¾›æ•´ä½“ä¸Šé«˜çš„æ•°æ®ä¼ è¾“å¸¦å®½ï¼Œèƒ½åœ¨ä¸€ä¸ªé›†ç¾¤é‡Œæ‰©å±•åˆ°æ•°ç™¾ä¸ªèŠ‚ç‚¹ã€‚ä¸€ä¸ªå•ä¸€çš„HDFSå®ä¾‹åº”è¯¥èƒ½æ”¯æ’‘æ•°ä»¥åƒä¸‡è®¡çš„æ–‡ä»¶ã€‚</p>
<h3 id="ç®€å•çš„ä¸€è‡´æ€§æ¨¡å‹"><a href="#ç®€å•çš„ä¸€è‡´æ€§æ¨¡å‹" class="headerlink" title="ç®€å•çš„ä¸€è‡´æ€§æ¨¡å‹"></a>ç®€å•çš„ä¸€è‡´æ€§æ¨¡å‹</h3><p>HDFSåº”ç”¨éœ€è¦ä¸€ä¸ªâ€œä¸€æ¬¡å†™å…¥å¤šæ¬¡è¯»å–â€çš„æ–‡ä»¶è®¿é—®æ¨¡å‹ã€‚ä¸€ä¸ªæ–‡ä»¶ç»è¿‡åˆ›å»ºã€å†™å…¥å’Œå…³é—­ä¹‹åå°±ä¸éœ€è¦æ”¹å˜ã€‚è¿™ä¸€å‡è®¾ç®€åŒ–äº†æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œå¹¶ä¸”ä½¿é«˜ååé‡çš„æ•°æ®è®¿é—®æˆä¸ºå¯èƒ½ã€‚Map/Reduceåº”ç”¨æˆ–è€…ç½‘ç»œçˆ¬è™«åº”ç”¨éƒ½éå¸¸é€‚åˆè¿™ä¸ªæ¨¡å‹ã€‚ç›®å‰è¿˜æœ‰è®¡åˆ’åœ¨å°†æ¥æ‰©å……è¿™ä¸ªæ¨¡å‹ï¼Œä½¿ä¹‹æ”¯æŒæ–‡ä»¶çš„é™„åŠ å†™æ“ä½œã€‚</p>
<h3 id="â€œç§»åŠ¨è®¡ç®—æ¯”ç§»åŠ¨æ•°æ®æ›´åˆ’ç®—â€"><a href="#â€œç§»åŠ¨è®¡ç®—æ¯”ç§»åŠ¨æ•°æ®æ›´åˆ’ç®—â€" class="headerlink" title="â€œç§»åŠ¨è®¡ç®—æ¯”ç§»åŠ¨æ•°æ®æ›´åˆ’ç®—â€"></a>â€œç§»åŠ¨è®¡ç®—æ¯”ç§»åŠ¨æ•°æ®æ›´åˆ’ç®—â€</h3><p>ä¸€ä¸ªåº”ç”¨è¯·æ±‚çš„è®¡ç®—ï¼Œç¦»å®ƒæ“ä½œçš„æ•°æ®è¶Šè¿‘å°±è¶Šé«˜æ•ˆï¼Œåœ¨æ•°æ®è¾¾åˆ°æµ·é‡çº§åˆ«çš„æ—¶å€™æ›´æ˜¯å¦‚æ­¤ã€‚å› ä¸ºè¿™æ ·å°±èƒ½é™ä½ç½‘ç»œé˜»å¡çš„å½±å“ï¼Œæé«˜ç³»ç»Ÿæ•°æ®çš„ååé‡ã€‚å°†è®¡ç®—ç§»åŠ¨åˆ°æ•°æ®é™„è¿‘ï¼Œæ¯”ä¹‹å°†æ•°æ®ç§»åŠ¨åˆ°åº”ç”¨æ‰€åœ¨æ˜¾ç„¶æ›´å¥½ã€‚HDFSä¸ºåº”ç”¨æä¾›äº†å°†å®ƒä»¬è‡ªå·±ç§»åŠ¨åˆ°æ•°æ®é™„è¿‘çš„æ¥å£ã€‚</p>
<h3 id="å¼‚æ„è½¯ç¡¬ä»¶å¹³å°é—´çš„å¯ç§»æ¤æ€§"><a href="#å¼‚æ„è½¯ç¡¬ä»¶å¹³å°é—´çš„å¯ç§»æ¤æ€§" class="headerlink" title="å¼‚æ„è½¯ç¡¬ä»¶å¹³å°é—´çš„å¯ç§»æ¤æ€§"></a>å¼‚æ„è½¯ç¡¬ä»¶å¹³å°é—´çš„å¯ç§»æ¤æ€§</h3><p>HDFSåœ¨è®¾è®¡çš„æ—¶å€™å°±è€ƒè™‘åˆ°å¹³å°çš„å¯ç§»æ¤æ€§ã€‚è¿™ç§ç‰¹æ€§æ–¹ä¾¿äº†HDFSä½œä¸ºå¤§è§„æ¨¡æ•°æ®åº”ç”¨å¹³å°çš„æ¨å¹¿ã€‚</p>
<h3 id="Namenode-å’Œ-Datanode"><a href="#Namenode-å’Œ-Datanode" class="headerlink" title="Namenode å’Œ Datanode"></a>Namenode å’Œ Datanode</h3><p>HDFSé‡‡ç”¨master/slaveæ¶æ„ã€‚ä¸€ä¸ªHDFSé›†ç¾¤æ˜¯ç”±ä¸€ä¸ªNamenodeå’Œä¸€å®šæ•°ç›®çš„Datanodesç»„æˆã€‚Namenodeæ˜¯ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨ï¼Œè´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´(namespace)ä»¥åŠå®¢æˆ·ç«¯å¯¹æ–‡ä»¶çš„è®¿é—®ã€‚é›†ç¾¤ä¸­çš„Datanodeä¸€èˆ¬æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ä¸€ä¸ªï¼Œè´Ÿè´£ç®¡ç†å®ƒæ‰€åœ¨èŠ‚ç‚¹ä¸Šçš„å­˜å‚¨ã€‚HDFSæš´éœ²äº†æ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´ï¼Œç”¨æˆ·èƒ½å¤Ÿä»¥æ–‡ä»¶çš„å½¢å¼åœ¨ä¸Šé¢å­˜å‚¨æ•°æ®ã€‚ä»å†…éƒ¨çœ‹ï¼Œä¸€ä¸ªæ–‡ä»¶å…¶å®è¢«åˆ†æˆä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å—ï¼Œè¿™äº›å—å­˜å‚¨åœ¨ä¸€ç»„Datanodeä¸Šã€‚Namenodeæ‰§è¡Œæ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´æ“ä½œï¼Œæ¯”å¦‚æ‰“å¼€ã€å…³é—­ã€é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•ã€‚å®ƒä¹Ÿè´Ÿè´£ç¡®å®šæ•°æ®å—åˆ°å…·ä½“DatanodeèŠ‚ç‚¹çš„æ˜ å°„ã€‚Datanodeè´Ÿè´£å¤„ç†æ–‡ä»¶ç³»ç»Ÿå®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚ã€‚åœ¨Namenodeçš„ç»Ÿä¸€è°ƒåº¦ä¸‹è¿›è¡Œæ•°æ®å—çš„åˆ›å»ºã€åˆ é™¤å’Œå¤åˆ¶ã€‚</p>
<h3 id="HDFS-æ¶æ„"><a href="#HDFS-æ¶æ„" class="headerlink" title="HDFS æ¶æ„"></a>HDFS æ¶æ„</h3><p>Namenodeå’ŒDatanodeè¢«è®¾è®¡æˆå¯ä»¥åœ¨æ™®é€šçš„å•†ç”¨æœºå™¨ä¸Šè¿è¡Œã€‚è¿™äº›æœºå™¨ä¸€èˆ¬è¿è¡Œç€GNU/Linuxæ“ä½œç³»ç»Ÿ(OS)ã€‚HDFSé‡‡ç”¨Javaè¯­è¨€å¼€å‘ï¼Œå› æ­¤ä»»ä½•æ”¯æŒJavaçš„æœºå™¨éƒ½å¯ä»¥éƒ¨ç½²Namenodeæˆ–Datanodeã€‚ç”±äºé‡‡ç”¨äº†å¯ç§»æ¤æ€§æå¼ºçš„Javaè¯­è¨€ï¼Œä½¿å¾—HDFSå¯ä»¥éƒ¨ç½²åˆ°å¤šç§ç±»å‹çš„æœºå™¨ä¸Šã€‚ä¸€ä¸ªå…¸å‹çš„éƒ¨ç½²åœºæ™¯æ˜¯ä¸€å°æœºå™¨ä¸Šåªè¿è¡Œä¸€ä¸ªNamenodeå®ä¾‹ï¼Œè€Œé›†ç¾¤ä¸­çš„å…¶å®ƒæœºå™¨åˆ†åˆ«è¿è¡Œä¸€ä¸ªDatanodeå®ä¾‹ã€‚è¿™ç§æ¶æ„å¹¶ä¸æ’æ–¥åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œå¤šä¸ªDatanodeï¼Œåªä¸è¿‡è¿™æ ·çš„æƒ…å†µæ¯”è¾ƒå°‘è§ã€‚</p>
<p>é›†ç¾¤ä¸­å•ä¸€Namenodeçš„ç»“æ„å¤§å¤§ç®€åŒ–äº†ç³»ç»Ÿçš„æ¶æ„ã€‚Namenodeæ˜¯æ‰€æœ‰HDFSå…ƒæ•°æ®çš„ä»²è£è€…å’Œç®¡ç†è€…ï¼Œè¿™æ ·ï¼Œç”¨æˆ·æ•°æ®æ°¸è¿œä¸ä¼šæµè¿‡Namenodeã€‚</p>
<h3 id="æ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´-namespace"><a href="#æ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´-namespace" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´ (namespace)"></a>æ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´ (namespace)</h3><p>HDFSæ”¯æŒä¼ ç»Ÿçš„å±‚æ¬¡å‹æ–‡ä»¶ç»„ç»‡ç»“æ„ã€‚ç”¨æˆ·æˆ–è€…åº”ç”¨ç¨‹åºå¯ä»¥åˆ›å»ºç›®å½•ï¼Œç„¶åå°†æ–‡ä»¶ä¿å­˜åœ¨è¿™äº›ç›®å½•é‡Œã€‚æ–‡ä»¶ç³»ç»Ÿåå­—ç©ºé—´çš„å±‚æ¬¡ç»“æ„å’Œå¤§å¤šæ•°ç°æœ‰çš„æ–‡ä»¶ç³»ç»Ÿç±»ä¼¼ï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºã€åˆ é™¤ã€ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶ã€‚å½“å‰ï¼ŒHDFSä¸æ”¯æŒç”¨æˆ·ç£ç›˜é…é¢å’Œè®¿é—®æƒé™æ§åˆ¶ï¼Œä¹Ÿä¸æ”¯æŒç¡¬é“¾æ¥å’Œè½¯é“¾æ¥ã€‚ä½†æ˜¯HDFSæ¶æ„å¹¶ä¸å¦¨ç¢å®ç°è¿™äº›ç‰¹æ€§ã€‚</p>
<p>Namenodeè´Ÿè´£ç»´æŠ¤æ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´ï¼Œä»»ä½•å¯¹æ–‡ä»¶ç³»ç»Ÿåå­—ç©ºé—´æˆ–å±æ€§çš„ä¿®æ”¹éƒ½å°†è¢«Namenodeè®°å½•ä¸‹æ¥ã€‚åº”ç”¨ç¨‹åºå¯ä»¥è®¾ç½®HDFSä¿å­˜çš„æ–‡ä»¶çš„å‰¯æœ¬æ•°ç›®ã€‚æ–‡ä»¶å‰¯æœ¬çš„æ•°ç›®ç§°ä¸ºæ–‡ä»¶çš„å‰¯æœ¬ç³»æ•°ï¼Œè¿™ä¸ªä¿¡æ¯ä¹Ÿæ˜¯ç”±Namenodeä¿å­˜çš„ã€‚</p>
<h3 id="æ•°æ®å¤åˆ¶"><a href="#æ•°æ®å¤åˆ¶" class="headerlink" title="æ•°æ®å¤åˆ¶"></a>æ•°æ®å¤åˆ¶</h3><p>HDFSè¢«è®¾è®¡æˆèƒ½å¤Ÿåœ¨ä¸€ä¸ªå¤§é›†ç¾¤ä¸­è·¨æœºå™¨å¯é åœ°å­˜å‚¨è¶…å¤§æ–‡ä»¶ã€‚å®ƒå°†æ¯ä¸ªæ–‡ä»¶å­˜å‚¨æˆä¸€ç³»åˆ—çš„æ•°æ®å—ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼Œæ‰€æœ‰çš„æ•°æ®å—éƒ½æ˜¯åŒæ ·å¤§å°çš„ã€‚ä¸ºäº†å®¹é”™ï¼Œæ–‡ä»¶çš„æ‰€æœ‰æ•°æ®å—éƒ½ä¼šæœ‰å‰¯æœ¬ã€‚æ¯ä¸ªæ–‡ä»¶çš„æ•°æ®å—å¤§å°å’Œå‰¯æœ¬ç³»æ•°éƒ½æ˜¯å¯é…ç½®çš„ã€‚åº”ç”¨ç¨‹åºå¯ä»¥æŒ‡å®šæŸä¸ªæ–‡ä»¶çš„å‰¯æœ¬æ•°ç›®ã€‚å‰¯æœ¬ç³»æ•°å¯ä»¥åœ¨æ–‡ä»¶åˆ›å»ºçš„æ—¶å€™æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨ä¹‹åæ”¹å˜ã€‚HDFSä¸­çš„æ–‡ä»¶éƒ½æ˜¯ä¸€æ¬¡æ€§å†™å…¥çš„ï¼Œå¹¶ä¸”ä¸¥æ ¼è¦æ±‚åœ¨ä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªå†™å…¥è€…ã€‚</p>
<p>Namenodeå…¨æƒç®¡ç†æ•°æ®å—çš„å¤åˆ¶ï¼Œå®ƒå‘¨æœŸæ€§åœ°ä»é›†ç¾¤ä¸­çš„æ¯ä¸ªDatanodeæ¥æ”¶å¿ƒè·³ä¿¡å·å’Œå—çŠ¶æ€æŠ¥å‘Š(Blockreport)ã€‚æ¥æ”¶åˆ°å¿ƒè·³ä¿¡å·æ„å‘³ç€è¯¥DatanodeèŠ‚ç‚¹å·¥ä½œæ­£å¸¸ã€‚å—çŠ¶æ€æŠ¥å‘ŠåŒ…å«äº†ä¸€ä¸ªè¯¥Datanodeä¸Šæ‰€æœ‰æ•°æ®å—çš„åˆ—è¡¨ã€‚</p>
<h2 id="HDFS-Datanodes"><a href="#HDFS-Datanodes" class="headerlink" title="HDFS Datanodes"></a>HDFS Datanodes</h2><h3 id="å‰¯æœ¬å­˜æ”¾-æœ€æœ€å¼€å§‹çš„ä¸€æ­¥"><a href="#å‰¯æœ¬å­˜æ”¾-æœ€æœ€å¼€å§‹çš„ä¸€æ­¥" class="headerlink" title="å‰¯æœ¬å­˜æ”¾: æœ€æœ€å¼€å§‹çš„ä¸€æ­¥"></a>å‰¯æœ¬å­˜æ”¾: æœ€æœ€å¼€å§‹çš„ä¸€æ­¥</h3><p>å‰¯æœ¬çš„å­˜æ”¾æ˜¯HDFSå¯é æ€§å’Œæ€§èƒ½çš„å…³é”®ã€‚ä¼˜åŒ–çš„å‰¯æœ¬å­˜æ”¾ç­–ç•¥æ˜¯HDFSåŒºåˆ†äºå…¶ä»–å¤§éƒ¨åˆ†åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„é‡è¦ç‰¹æ€§ã€‚è¿™ç§ç‰¹æ€§éœ€è¦åšå¤§é‡çš„è°ƒä¼˜ï¼Œå¹¶éœ€è¦ç»éªŒçš„ç§¯ç´¯ã€‚HDFSé‡‡ç”¨ä¸€ç§ç§°ä¸ºæœºæ¶æ„ŸçŸ¥(rack-aware)çš„ç­–ç•¥æ¥æ”¹è¿›æ•°æ®çš„å¯é æ€§ã€å¯ç”¨æ€§å’Œç½‘ç»œå¸¦å®½çš„åˆ©ç”¨ç‡ã€‚ç›®å‰å®ç°çš„å‰¯æœ¬å­˜æ”¾ç­–ç•¥åªæ˜¯åœ¨è¿™ä¸ªæ–¹å‘ä¸Šçš„ç¬¬ä¸€æ­¥ã€‚å®ç°è¿™ä¸ªç­–ç•¥çš„çŸ­æœŸç›®æ ‡æ˜¯éªŒè¯å®ƒåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„æœ‰æ•ˆæ€§ï¼Œè§‚å¯Ÿå®ƒçš„è¡Œä¸ºï¼Œä¸ºå®ç°æ›´å…ˆè¿›çš„ç­–ç•¥æ‰“ä¸‹æµ‹è¯•å’Œç ”ç©¶çš„åŸºç¡€ã€‚</p>
<p>å¤§å‹HDFSå®ä¾‹ä¸€èˆ¬è¿è¡Œåœ¨è·¨è¶Šå¤šä¸ªæœºæ¶çš„è®¡ç®—æœºç»„æˆçš„é›†ç¾¤ä¸Šï¼Œä¸åŒæœºæ¶ä¸Šçš„ä¸¤å°æœºå™¨ä¹‹é—´çš„é€šè®¯éœ€è¦ç»è¿‡äº¤æ¢æœºã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªæœºæ¶å†…çš„ä¸¤å°æœºå™¨é—´çš„å¸¦å®½ä¼šæ¯”ä¸åŒæœºæ¶çš„ä¸¤å°æœºå™¨é—´çš„å¸¦å®½å¤§ã€‚</p>
<p>é€šè¿‡ä¸€ä¸ªæœºæ¶æ„ŸçŸ¥çš„è¿‡ç¨‹ï¼ŒNamenodeå¯ä»¥ç¡®å®šæ¯ä¸ªDatanodeæ‰€å±çš„æœºæ¶idã€‚ä¸€ä¸ªç®€å•ä½†æ²¡æœ‰ä¼˜åŒ–çš„ç­–ç•¥å°±æ˜¯å°†å‰¯æœ¬å­˜æ”¾åœ¨ä¸åŒçš„æœºæ¶ä¸Šã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆé˜²æ­¢å½“æ•´ä¸ªæœºæ¶å¤±æ•ˆæ—¶æ•°æ®çš„ä¸¢å¤±ï¼Œå¹¶ä¸”å…è®¸è¯»æ•°æ®çš„æ—¶å€™å……åˆ†åˆ©ç”¨å¤šä¸ªæœºæ¶çš„å¸¦å®½ã€‚è¿™ç§ç­–ç•¥è®¾ç½®å¯ä»¥å°†å‰¯æœ¬å‡åŒ€åˆ†å¸ƒåœ¨é›†ç¾¤ä¸­ï¼Œæœ‰åˆ©äºå½“ç»„ä»¶å¤±æ•ˆæƒ…å†µä¸‹çš„è´Ÿè½½å‡è¡¡ã€‚ä½†æ˜¯ï¼Œå› ä¸ºè¿™ç§ç­–ç•¥çš„ä¸€ä¸ªå†™æ“ä½œéœ€è¦ä¼ è¾“æ•°æ®å—åˆ°å¤šä¸ªæœºæ¶ï¼Œè¿™å¢åŠ äº†å†™çš„ä»£ä»·ã€‚</p>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‰¯æœ¬ç³»æ•°æ˜¯3ï¼ŒHDFSçš„å­˜æ”¾ç­–ç•¥æ˜¯å°†ä¸€ä¸ªå‰¯æœ¬å­˜æ”¾åœ¨æœ¬åœ°æœºæ¶çš„èŠ‚ç‚¹ä¸Šï¼Œä¸€ä¸ªå‰¯æœ¬æ”¾åœ¨åŒä¸€æœºæ¶çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæœ€åä¸€ä¸ªå‰¯æœ¬æ”¾åœ¨ä¸åŒæœºæ¶çš„èŠ‚ç‚¹ä¸Šã€‚è¿™ç§ç­–ç•¥å‡å°‘äº†æœºæ¶é—´çš„æ•°æ®ä¼ è¾“ï¼Œè¿™å°±æé«˜äº†å†™æ“ä½œçš„æ•ˆç‡ã€‚æœºæ¶çš„é”™è¯¯è¿œè¿œæ¯”èŠ‚ç‚¹çš„é”™è¯¯å°‘ï¼Œæ‰€ä»¥è¿™ä¸ªç­–ç•¥ä¸ä¼šå½±å“åˆ°æ•°æ®çš„å¯é æ€§å’Œå¯ç”¨æ€§ã€‚äºæ­¤åŒæ—¶ï¼Œå› ä¸ºæ•°æ®å—åªæ”¾åœ¨ä¸¤ä¸ªï¼ˆä¸æ˜¯ä¸‰ä¸ªï¼‰ä¸åŒçš„æœºæ¶ä¸Šï¼Œæ‰€ä»¥æ­¤ç­–ç•¥å‡å°‘äº†è¯»å–æ•°æ®æ—¶éœ€è¦çš„ç½‘ç»œä¼ è¾“æ€»å¸¦å®½ã€‚åœ¨è¿™ç§ç­–ç•¥ä¸‹ï¼Œå‰¯æœ¬å¹¶ä¸æ˜¯å‡åŒ€åˆ†å¸ƒåœ¨ä¸åŒçš„æœºæ¶ä¸Šã€‚ä¸‰åˆ†ä¹‹ä¸€çš„å‰¯æœ¬åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä¸‰åˆ†ä¹‹äºŒçš„å‰¯æœ¬åœ¨ä¸€ä¸ªæœºæ¶ä¸Šï¼Œå…¶ä»–å‰¯æœ¬å‡åŒ€åˆ†å¸ƒåœ¨å‰©ä¸‹çš„æœºæ¶ä¸­ï¼Œè¿™ä¸€ç­–ç•¥åœ¨ä¸æŸå®³æ•°æ®å¯é æ€§å’Œè¯»å–æ€§èƒ½çš„æƒ…å†µä¸‹æ”¹è¿›äº†å†™çš„æ€§èƒ½ã€‚</p>
<p>å½“å‰ï¼Œè¿™é‡Œä»‹ç»çš„é»˜è®¤å‰¯æœ¬å­˜æ”¾ç­–ç•¥æ­£åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ã€‚</p>
<h3 id="å‰¯æœ¬é€‰æ‹©"><a href="#å‰¯æœ¬é€‰æ‹©" class="headerlink" title="å‰¯æœ¬é€‰æ‹©"></a>å‰¯æœ¬é€‰æ‹©</h3><p>ä¸ºäº†é™ä½æ•´ä½“çš„å¸¦å®½æ¶ˆè€—å’Œè¯»å–å»¶æ—¶ï¼ŒHDFSä¼šå°½é‡è®©è¯»å–ç¨‹åºè¯»å–ç¦»å®ƒæœ€è¿‘çš„å‰¯æœ¬ã€‚å¦‚æœåœ¨è¯»å–ç¨‹åºçš„åŒä¸€ä¸ªæœºæ¶ä¸Šæœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œé‚£ä¹ˆå°±è¯»å–è¯¥å‰¯æœ¬ã€‚å¦‚æœä¸€ä¸ªHDFSé›†ç¾¤è·¨è¶Šå¤šä¸ªæ•°æ®ä¸­å¿ƒï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¹Ÿå°†é¦–å…ˆè¯»æœ¬åœ°æ•°æ®ä¸­å¿ƒçš„å‰¯æœ¬ã€‚</p>
<h3 id="å®‰å…¨æ¨¡å¼"><a href="#å®‰å…¨æ¨¡å¼" class="headerlink" title="å®‰å…¨æ¨¡å¼"></a>å®‰å…¨æ¨¡å¼</h3><p>Namenodeå¯åŠ¨åä¼šè¿›å…¥ä¸€ä¸ªç§°ä¸ºå®‰å…¨æ¨¡å¼çš„ç‰¹æ®ŠçŠ¶æ€ã€‚å¤„äºå®‰å…¨æ¨¡å¼çš„Namenodeæ˜¯ä¸ä¼šè¿›è¡Œæ•°æ®å—çš„å¤åˆ¶çš„ã€‚Namenodeä»æ‰€æœ‰çš„ Datanodeæ¥æ”¶å¿ƒè·³ä¿¡å·å’Œå—çŠ¶æ€æŠ¥å‘Šã€‚å—çŠ¶æ€æŠ¥å‘ŠåŒ…æ‹¬äº†æŸä¸ªDatanodeæ‰€æœ‰çš„æ•°æ®å—åˆ—è¡¨ã€‚æ¯ä¸ªæ•°æ®å—éƒ½æœ‰ä¸€ä¸ªæŒ‡å®šçš„æœ€å°å‰¯æœ¬æ•°ã€‚å½“Namenodeæ£€æµ‹ç¡®è®¤æŸä¸ªæ•°æ®å—çš„å‰¯æœ¬æ•°ç›®è¾¾åˆ°è¿™ä¸ªæœ€å°å€¼ï¼Œé‚£ä¹ˆè¯¥æ•°æ®å—å°±ä¼šè¢«è®¤ä¸ºæ˜¯å‰¯æœ¬å®‰å…¨(safely replicated)çš„ï¼›åœ¨ä¸€å®šç™¾åˆ†æ¯”ï¼ˆè¿™ä¸ªå‚æ•°å¯é…ç½®ï¼‰çš„æ•°æ®å—è¢«Namenodeæ£€æµ‹ç¡®è®¤æ˜¯å®‰å…¨ä¹‹åï¼ˆåŠ ä¸Šä¸€ä¸ªé¢å¤–çš„30ç§’ç­‰å¾…æ—¶é—´ï¼‰ï¼ŒNamenodeå°†é€€å‡ºå®‰å…¨æ¨¡å¼çŠ¶æ€ã€‚æ¥ä¸‹æ¥å®ƒä¼šç¡®å®šè¿˜æœ‰å“ªäº›æ•°æ®å—çš„å‰¯æœ¬æ²¡æœ‰è¾¾åˆ°æŒ‡å®šæ•°ç›®ï¼Œå¹¶å°†è¿™äº›æ•°æ®å—å¤åˆ¶åˆ°å…¶ä»–Datanodeä¸Šã€‚</p>
<h3 id="æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„æŒä¹…åŒ–"><a href="#æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„æŒä¹…åŒ–" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„æŒä¹…åŒ–"></a>æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„æŒä¹…åŒ–</h3><p>Namenodeä¸Šä¿å­˜ç€HDFSçš„åå­—ç©ºé—´ã€‚å¯¹äºä»»ä½•å¯¹æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®äº§ç”Ÿä¿®æ”¹çš„æ“ä½œï¼ŒNamenodeéƒ½ä¼šä½¿ç”¨ä¸€ç§ç§°ä¸ºEditLogçš„äº‹åŠ¡æ—¥å¿—è®°å½•ä¸‹æ¥ã€‚ä¾‹å¦‚ï¼Œåœ¨HDFSä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼ŒNamenodeå°±ä¼šåœ¨Editlogä¸­æ’å…¥ä¸€æ¡è®°å½•æ¥è¡¨ç¤ºï¼›åŒæ ·åœ°ï¼Œä¿®æ”¹æ–‡ä»¶çš„å‰¯æœ¬ç³»æ•°ä¹Ÿå°†å¾€Editlogæ’å…¥ä¸€æ¡è®°å½•ã€‚Namenodeåœ¨æœ¬åœ°æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸­å­˜å‚¨è¿™ä¸ªEditlogã€‚æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´ï¼ŒåŒ…æ‹¬æ•°æ®å—åˆ°æ–‡ä»¶çš„æ˜ å°„ã€æ–‡ä»¶çš„å±æ€§ç­‰ï¼Œéƒ½å­˜å‚¨åœ¨ä¸€ä¸ªç§°ä¸ºFsImageçš„æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯æ”¾åœ¨Namenodeæ‰€åœ¨çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚</p>
<p>Namenodeåœ¨å†…å­˜ä¸­ä¿å­˜ç€æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´å’Œæ–‡ä»¶æ•°æ®å—æ˜ å°„(Blockmap)çš„æ˜ åƒã€‚è¿™ä¸ªå…³é”®çš„å…ƒæ•°æ®ç»“æ„è®¾è®¡å¾—å¾ˆç´§å‡‘ï¼Œå› è€Œä¸€ä¸ªæœ‰4Gå†…å­˜çš„Namenodeè¶³å¤Ÿæ”¯æ’‘å¤§é‡çš„æ–‡ä»¶å’Œç›®å½•ã€‚å½“Namenodeå¯åŠ¨æ—¶ï¼Œå®ƒä»ç¡¬ç›˜ä¸­è¯»å–Editlogå’ŒFsImageï¼Œå°†æ‰€æœ‰Editlogä¸­çš„äº‹åŠ¡ä½œç”¨åœ¨å†…å­˜ä¸­çš„FsImageä¸Šï¼Œå¹¶å°†è¿™ä¸ªæ–°ç‰ˆæœ¬çš„FsImageä»å†…å­˜ä¸­ä¿å­˜åˆ°æœ¬åœ°ç£ç›˜ä¸Šï¼Œç„¶ååˆ é™¤æ—§çš„Editlogï¼Œå› ä¸ºè¿™ä¸ªæ—§çš„Editlogçš„äº‹åŠ¡éƒ½å·²ç»ä½œç”¨åœ¨FsImageä¸Šäº†ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºä¸€ä¸ªæ£€æŸ¥ç‚¹(checkpoint)ã€‚åœ¨å½“å‰å®ç°ä¸­ï¼Œæ£€æŸ¥ç‚¹åªå‘ç”Ÿåœ¨Namenodeå¯åŠ¨æ—¶ï¼Œåœ¨ä¸ä¹…çš„å°†æ¥å°†å®ç°æ”¯æŒå‘¨æœŸæ€§çš„æ£€æŸ¥ç‚¹ã€‚</p>
<p>Datanodeå°†HDFSæ•°æ®ä»¥æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨æœ¬åœ°çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå®ƒå¹¶ä¸çŸ¥é“æœ‰å…³HDFSæ–‡ä»¶çš„ä¿¡æ¯ã€‚å®ƒæŠŠæ¯ä¸ªHDFSæ•°æ®å—å­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚Datanodeå¹¶ä¸åœ¨åŒä¸€ä¸ªç›®å½•åˆ›å»ºæ‰€æœ‰çš„æ–‡ä»¶ï¼Œå®é™…ä¸Šï¼Œå®ƒç”¨è¯•æ¢çš„æ–¹æ³•æ¥ç¡®å®šæ¯ä¸ªç›®å½•çš„æœ€ä½³æ–‡ä»¶æ•°ç›®ï¼Œå¹¶ä¸”åœ¨é€‚å½“çš„æ—¶å€™åˆ›å»ºå­ç›®å½•ã€‚åœ¨åŒä¸€ä¸ªç›®å½•ä¸­åˆ›å»ºæ‰€æœ‰çš„æœ¬åœ°æ–‡ä»¶å¹¶ä¸æ˜¯æœ€ä¼˜çš„é€‰æ‹©ï¼Œè¿™æ˜¯å› ä¸ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå¯èƒ½æ— æ³•é«˜æ•ˆåœ°åœ¨å•ä¸ªç›®å½•ä¸­æ”¯æŒå¤§é‡çš„æ–‡ä»¶ã€‚å½“ä¸€ä¸ªDatanodeå¯åŠ¨æ—¶ï¼Œå®ƒä¼šæ‰«ææœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œäº§ç”Ÿä¸€ä¸ªè¿™äº›æœ¬åœ°æ–‡ä»¶å¯¹åº”çš„æ‰€æœ‰HDFSæ•°æ®å—çš„åˆ—è¡¨ï¼Œç„¶åä½œä¸ºæŠ¥å‘Šå‘é€åˆ°Namenodeï¼Œè¿™ä¸ªæŠ¥å‘Šå°±æ˜¯å—çŠ¶æ€æŠ¥å‘Šã€‚</p>
<h3 id="é€šè®¯åè®®"><a href="#é€šè®¯åè®®" class="headerlink" title="é€šè®¯åè®®"></a>é€šè®¯åè®®</h3><p>æ‰€æœ‰çš„HDFSé€šè®¯åè®®éƒ½æ˜¯å»ºç«‹åœ¨TCP/IPåè®®ä¹‹ä¸Šã€‚å®¢æˆ·ç«¯é€šè¿‡ä¸€ä¸ªå¯é…ç½®çš„TCPç«¯å£è¿æ¥åˆ°Namenodeï¼Œé€šè¿‡ClientProtocolåè®®ä¸Namenodeäº¤äº’ã€‚è€ŒDatanodeä½¿ç”¨DatanodeProtocolåè®®ä¸Namenodeäº¤äº’ã€‚ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨(RPC)æ¨¡å‹è¢«æŠ½è±¡å‡ºæ¥å°è£…ClientProtocolå’ŒDatanodeprotocolåè®®ã€‚åœ¨è®¾è®¡ä¸Šï¼ŒNamenodeä¸ä¼šä¸»åŠ¨å‘èµ·RPCï¼Œè€Œæ˜¯å“åº”æ¥è‡ªå®¢æˆ·ç«¯æˆ– Datanode çš„RPCè¯·æ±‚ã€‚</p>
<h3 id="å¥å£®æ€§"><a href="#å¥å£®æ€§" class="headerlink" title="å¥å£®æ€§"></a>å¥å£®æ€§</h3><p>HDFSçš„ä¸»è¦ç›®æ ‡å°±æ˜¯å³ä½¿åœ¨å‡ºé”™çš„æƒ…å†µä¸‹ä¹Ÿè¦ä¿è¯æ•°æ®å­˜å‚¨çš„å¯é æ€§ã€‚å¸¸è§çš„ä¸‰ç§å‡ºé”™æƒ…å†µæ˜¯ï¼šNamenodeå‡ºé”™, Datanodeå‡ºé”™å’Œç½‘ç»œå‰²è£‚(network partitions)ã€‚</p>
<h3 id="ç£ç›˜æ•°æ®é”™è¯¯ï¼Œå¿ƒè·³æ£€æµ‹å’Œé‡æ–°å¤åˆ¶"><a href="#ç£ç›˜æ•°æ®é”™è¯¯ï¼Œå¿ƒè·³æ£€æµ‹å’Œé‡æ–°å¤åˆ¶" class="headerlink" title="ç£ç›˜æ•°æ®é”™è¯¯ï¼Œå¿ƒè·³æ£€æµ‹å’Œé‡æ–°å¤åˆ¶"></a>ç£ç›˜æ•°æ®é”™è¯¯ï¼Œå¿ƒè·³æ£€æµ‹å’Œé‡æ–°å¤åˆ¶</h3><p>æ¯ä¸ªDatanodeèŠ‚ç‚¹å‘¨æœŸæ€§åœ°å‘Namenodeå‘é€å¿ƒè·³ä¿¡å·ã€‚ç½‘ç»œå‰²è£‚å¯èƒ½å¯¼è‡´ä¸€éƒ¨åˆ†Datanodeè·ŸNamenodeå¤±å»è”ç³»ã€‚Namenodeé€šè¿‡å¿ƒè·³ä¿¡å·çš„ç¼ºå¤±æ¥æ£€æµ‹è¿™ä¸€æƒ…å†µï¼Œå¹¶å°†è¿™äº›è¿‘æœŸä¸å†å‘é€å¿ƒè·³ä¿¡å·Datanodeæ ‡è®°ä¸ºå®•æœºï¼Œä¸ä¼šå†å°†æ–°çš„IOè¯·æ±‚å‘ç»™å®ƒä»¬ã€‚ä»»ä½•å­˜å‚¨åœ¨å®•æœºDatanodeä¸Šçš„æ•°æ®å°†ä¸å†æœ‰æ•ˆã€‚Datanodeçš„å®•æœºå¯èƒ½ä¼šå¼•èµ·ä¸€äº›æ•°æ®å—çš„å‰¯æœ¬ç³»æ•°ä½äºæŒ‡å®šå€¼ï¼ŒNamenodeä¸æ–­åœ°æ£€æµ‹è¿™äº›éœ€è¦å¤åˆ¶çš„æ•°æ®å—ï¼Œä¸€æ—¦å‘ç°å°±å¯åŠ¨å¤åˆ¶æ“ä½œã€‚åœ¨ä¸‹åˆ—æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦é‡æ–°å¤åˆ¶ï¼šæŸä¸ªDatanodeèŠ‚ç‚¹å¤±æ•ˆï¼ŒæŸä¸ªå‰¯æœ¬é­åˆ°æŸåï¼ŒDatanodeä¸Šçš„ç¡¬ç›˜é”™è¯¯ï¼Œæˆ–è€…æ–‡ä»¶çš„å‰¯æœ¬ç³»æ•°å¢å¤§ã€‚</p>
<h3 id="é›†ç¾¤å‡è¡¡"><a href="#é›†ç¾¤å‡è¡¡" class="headerlink" title="é›†ç¾¤å‡è¡¡"></a>é›†ç¾¤å‡è¡¡</h3><p>HDFSçš„æ¶æ„æ”¯æŒæ•°æ®å‡è¡¡ç­–ç•¥ã€‚å¦‚æœæŸä¸ªDatanodeèŠ‚ç‚¹ä¸Šçš„ç©ºé—²ç©ºé—´ä½äºç‰¹å®šçš„ä¸´ç•Œç‚¹ï¼ŒæŒ‰ç…§å‡è¡¡ç­–ç•¥ç³»ç»Ÿå°±ä¼šè‡ªåŠ¨åœ°å°†æ•°æ®ä»è¿™ä¸ªDatanodeç§»åŠ¨åˆ°å…¶ä»–ç©ºé—²çš„Datanodeã€‚å½“å¯¹æŸä¸ªæ–‡ä»¶çš„è¯·æ±‚çªç„¶å¢åŠ ï¼Œé‚£ä¹ˆä¹Ÿå¯èƒ½å¯åŠ¨ä¸€ä¸ªè®¡åˆ’åˆ›å»ºè¯¥æ–‡ä»¶æ–°çš„å‰¯æœ¬ï¼Œå¹¶ä¸”åŒæ—¶é‡æ–°å¹³è¡¡é›†ç¾¤ä¸­çš„å…¶ä»–æ•°æ®ã€‚è¿™äº›å‡è¡¡ç­–ç•¥ç›®å‰è¿˜æ²¡æœ‰å®ç°ã€‚</p>
<h3 id="æ•°æ®å®Œæ•´æ€§"><a href="#æ•°æ®å®Œæ•´æ€§" class="headerlink" title="æ•°æ®å®Œæ•´æ€§"></a>æ•°æ®å®Œæ•´æ€§</h3><p>ä»æŸä¸ªDatanodeè·å–çš„æ•°æ®å—æœ‰å¯èƒ½æ˜¯æŸåçš„ï¼ŒæŸåå¯èƒ½æ˜¯ç”±Datanodeçš„å­˜å‚¨è®¾å¤‡é”™è¯¯ã€ç½‘ç»œé”™è¯¯æˆ–è€…è½¯ä»¶bugé€ æˆçš„ã€‚HDFSå®¢æˆ·ç«¯è½¯ä»¶å®ç°äº†å¯¹HDFSæ–‡ä»¶å†…å®¹çš„æ ¡éªŒå’Œ(checksum)æ£€æŸ¥ã€‚å½“å®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæ–°çš„HDFSæ–‡ä»¶ï¼Œä¼šè®¡ç®—è¿™ä¸ªæ–‡ä»¶æ¯ä¸ªæ•°æ®å—çš„æ ¡éªŒå’Œï¼Œå¹¶å°†æ ¡éªŒå’Œä½œä¸ºä¸€ä¸ªå•ç‹¬çš„éšè—æ–‡ä»¶ä¿å­˜åœ¨åŒä¸€ä¸ªHDFSåå­—ç©ºé—´ä¸‹ã€‚å½“å®¢æˆ·ç«¯è·å–æ–‡ä»¶å†…å®¹åï¼Œå®ƒä¼šæ£€éªŒä»Datanodeè·å–çš„æ•°æ®è·Ÿç›¸åº”çš„æ ¡éªŒå’Œæ–‡ä»¶ä¸­çš„æ ¡éªŒå’Œæ˜¯å¦åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ä»å…¶ä»–Datanodeè·å–è¯¥æ•°æ®å—çš„å‰¯æœ¬ã€‚</p>
<h3 id="å…ƒæ•°æ®ç£ç›˜é”™è¯¯"><a href="#å…ƒæ•°æ®ç£ç›˜é”™è¯¯" class="headerlink" title="å…ƒæ•°æ®ç£ç›˜é”™è¯¯"></a>å…ƒæ•°æ®ç£ç›˜é”™è¯¯</h3><p>FsImageå’ŒEditlogæ˜¯HDFSçš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚å¦‚æœè¿™äº›æ–‡ä»¶æŸåäº†ï¼Œæ•´ä¸ªHDFSå®ä¾‹éƒ½å°†å¤±æ•ˆã€‚å› è€Œï¼ŒNamenodeå¯ä»¥é…ç½®æˆæ”¯æŒç»´æŠ¤å¤šä¸ªFsImageå’ŒEditlogçš„å‰¯æœ¬ã€‚ä»»ä½•å¯¹FsImageæˆ–è€…Editlogçš„ä¿®æ”¹ï¼Œéƒ½å°†åŒæ­¥åˆ°å®ƒä»¬çš„å‰¯æœ¬ä¸Šã€‚è¿™ç§å¤šå‰¯æœ¬çš„åŒæ­¥æ“ä½œå¯èƒ½ä¼šé™ä½Namenodeæ¯ç§’å¤„ç†çš„åå­—ç©ºé—´äº‹åŠ¡æ•°é‡ã€‚ç„¶è€Œè¿™ä¸ªä»£ä»·æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå› ä¸ºå³ä½¿HDFSçš„åº”ç”¨æ˜¯æ•°æ®å¯†é›†çš„ï¼Œå®ƒä»¬ä¹Ÿéå…ƒæ•°æ®å¯†é›†çš„ã€‚å½“Namenodeé‡å¯çš„æ—¶å€™ï¼Œå®ƒä¼šé€‰å–æœ€è¿‘çš„å®Œæ•´çš„FsImageå’ŒEditlogæ¥ä½¿ç”¨ã€‚</p>
<p>Namenodeæ˜¯HDFSé›†ç¾¤ä¸­çš„å•ç‚¹æ•…éšœ(single point of failure)æ‰€åœ¨ã€‚å¦‚æœNamenodeæœºå™¨æ•…éšœï¼Œæ˜¯éœ€è¦æ‰‹å·¥å¹²é¢„çš„ã€‚ç›®å‰ï¼Œè‡ªåŠ¨é‡å¯æˆ–åœ¨å¦ä¸€å°æœºå™¨ä¸ŠåšNamenodeæ•…éšœè½¬ç§»çš„åŠŸèƒ½è¿˜æ²¡å®ç°ã€‚</p>
<h3 id="å¿«ç…§"><a href="#å¿«ç…§" class="headerlink" title="å¿«ç…§"></a>å¿«ç…§</h3><p>å¿«ç…§æ”¯æŒæŸä¸€ç‰¹å®šæ—¶åˆ»çš„æ•°æ®çš„å¤åˆ¶å¤‡ä»½ã€‚åˆ©ç”¨å¿«ç…§ï¼Œå¯ä»¥è®©HDFSåœ¨æ•°æ®æŸåæ—¶æ¢å¤åˆ°è¿‡å»ä¸€ä¸ªå·²çŸ¥æ­£ç¡®çš„æ—¶é—´ç‚¹ã€‚HDFSç›®å‰è¿˜ä¸æ”¯æŒå¿«ç…§åŠŸèƒ½ï¼Œä½†è®¡åˆ’åœ¨å°†æ¥çš„ç‰ˆæœ¬è¿›è¡Œæ”¯æŒã€‚</p>
<h2 id="æ•°æ®ç»„ç»‡"><a href="#æ•°æ®ç»„ç»‡" class="headerlink" title="æ•°æ®ç»„ç»‡"></a>æ•°æ®ç»„ç»‡</h2><h3 id="æ•°æ®å—"><a href="#æ•°æ®å—" class="headerlink" title="æ•°æ®å—"></a>æ•°æ®å—</h3><p>HDFSè¢«è®¾è®¡æˆæ”¯æŒå¤§æ–‡ä»¶ï¼Œé€‚ç”¨HDFSçš„æ˜¯é‚£äº›éœ€è¦å¤„ç†å¤§è§„æ¨¡çš„æ•°æ®é›†çš„åº”ç”¨ã€‚è¿™äº›åº”ç”¨éƒ½æ˜¯åªå†™å…¥æ•°æ®ä¸€æ¬¡ï¼Œä½†å´è¯»å–ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œå¹¶ä¸”è¯»å–é€Ÿåº¦åº”èƒ½æ»¡è¶³æµå¼è¯»å–çš„éœ€è¦ã€‚HDFSæ”¯æŒæ–‡ä»¶çš„â€œä¸€æ¬¡å†™å…¥å¤šæ¬¡è¯»å–â€è¯­ä¹‰ã€‚ä¸€ä¸ªå…¸å‹çš„æ•°æ®å—å¤§å°æ˜¯64MBã€‚å› è€Œï¼ŒHDFSä¸­çš„æ–‡ä»¶æ€»æ˜¯æŒ‰ç…§64Mè¢«åˆ‡åˆ†æˆä¸åŒçš„å—ï¼Œæ¯ä¸ªå—å°½å¯èƒ½åœ°å­˜å‚¨äºä¸åŒçš„Datanodeä¸­ã€‚</p>
<h3 id="Staging"><a href="#Staging" class="headerlink" title="Staging"></a>Staging</h3><p>å®¢æˆ·ç«¯åˆ›å»ºæ–‡ä»¶çš„è¯·æ±‚å…¶å®å¹¶æ²¡æœ‰ç«‹å³å‘é€ç»™Namenodeï¼Œäº‹å®ä¸Šï¼Œåœ¨åˆšå¼€å§‹é˜¶æ®µHDFSå®¢æˆ·ç«¯ä¼šå…ˆå°†æ–‡ä»¶æ•°æ®ç¼“å­˜åˆ°æœ¬åœ°çš„ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚åº”ç”¨ç¨‹åºçš„å†™æ“ä½œè¢«é€æ˜åœ°é‡å®šå‘åˆ°è¿™ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚å½“è¿™ä¸ªä¸´æ—¶æ–‡ä»¶ç´¯ç§¯çš„æ•°æ®é‡è¶…è¿‡ä¸€ä¸ªæ•°æ®å—çš„å¤§å°ï¼Œå®¢æˆ·ç«¯æ‰ä¼šè”ç³»Namenodeã€‚Namenodeå°†æ–‡ä»¶åæ’å…¥æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ä¸­ï¼Œå¹¶ä¸”åˆ†é…ä¸€ä¸ªæ•°æ®å—ç»™å®ƒã€‚ç„¶åè¿”å›Datanodeçš„æ ‡è¯†ç¬¦å’Œç›®æ ‡æ•°æ®å—ç»™å®¢æˆ·ç«¯ã€‚æ¥ç€å®¢æˆ·ç«¯å°†è¿™å—æ•°æ®ä»æœ¬åœ°ä¸´æ—¶æ–‡ä»¶ä¸Šä¼ åˆ°æŒ‡å®šçš„Datanodeä¸Šã€‚å½“æ–‡ä»¶å…³é—­æ—¶ï¼Œåœ¨ä¸´æ—¶æ–‡ä»¶ä¸­å‰©ä½™çš„æ²¡æœ‰ä¸Šä¼ çš„æ•°æ®ä¹Ÿä¼šä¼ è¾“åˆ°æŒ‡å®šçš„Datanodeä¸Šã€‚ç„¶åå®¢æˆ·ç«¯å‘Šè¯‰Namenodeæ–‡ä»¶å·²ç»å…³é—­ã€‚æ­¤æ—¶Namenodeæ‰å°†æ–‡ä»¶åˆ›å»ºæ“ä½œæäº¤åˆ°æ—¥å¿—é‡Œè¿›è¡Œå­˜å‚¨ã€‚å¦‚æœNamenodeåœ¨æ–‡ä»¶å…³é—­å‰å®•æœºäº†ï¼Œåˆ™è¯¥æ–‡ä»¶å°†ä¸¢å¤±ã€‚</p>
<p>ä¸Šè¿°æ–¹æ³•æ˜¯å¯¹åœ¨HDFSä¸Šè¿è¡Œçš„ç›®æ ‡åº”ç”¨è¿›è¡Œè®¤çœŸè€ƒè™‘åå¾—åˆ°çš„ç»“æœã€‚è¿™äº›åº”ç”¨éœ€è¦è¿›è¡Œæ–‡ä»¶çš„æµå¼å†™å…¥ã€‚å¦‚æœä¸é‡‡ç”¨å®¢æˆ·ç«¯ç¼“å­˜ï¼Œç”±äºç½‘ç»œé€Ÿåº¦å’Œç½‘ç»œå µå¡ä¼šå¯¹åä¼°é‡é€ æˆæ¯”è¾ƒå¤§çš„å½±å“ã€‚è¿™ç§æ–¹æ³•å¹¶ä¸æ˜¯æ²¡æœ‰å…ˆä¾‹çš„ï¼Œæ—©æœŸçš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ¯”å¦‚AFSï¼Œå°±ç”¨å®¢æˆ·ç«¯ç¼“å­˜æ¥æé«˜æ€§èƒ½ã€‚ä¸ºäº†è¾¾åˆ°æ›´é«˜çš„æ•°æ®ä¸Šä¼ æ•ˆç‡ï¼Œå·²ç»æ”¾æ¾äº†POSIXæ ‡å‡†çš„è¦æ±‚ã€‚</p>
<h3 id="æµæ°´çº¿å¤åˆ¶"><a href="#æµæ°´çº¿å¤åˆ¶" class="headerlink" title="æµæ°´çº¿å¤åˆ¶"></a>æµæ°´çº¿å¤åˆ¶</h3><p>å½“å®¢æˆ·ç«¯å‘HDFSæ–‡ä»¶å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œä¸€å¼€å§‹æ˜¯å†™åˆ°æœ¬åœ°ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚å‡è®¾è¯¥æ–‡ä»¶çš„å‰¯æœ¬ç³»æ•°è®¾ç½®ä¸º3ï¼Œå½“æœ¬åœ°ä¸´æ—¶æ–‡ä»¶ç´¯ç§¯åˆ°ä¸€ä¸ªæ•°æ®å—çš„å¤§å°æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šä»Namenodeè·å–ä¸€ä¸ªDatanodeåˆ—è¡¨ç”¨äºå­˜æ”¾å‰¯æœ¬ã€‚ç„¶åå®¢æˆ·ç«¯å¼€å§‹å‘ç¬¬ä¸€ä¸ªDatanodeä¼ è¾“æ•°æ®ï¼Œç¬¬ä¸€ä¸ªDatanodeä¸€å°éƒ¨åˆ†ä¸€å°éƒ¨åˆ†(4 KB)åœ°æ¥æ”¶æ•°æ®ï¼Œå°†æ¯ä¸€éƒ¨åˆ†å†™å…¥æœ¬åœ°ä»“åº“ï¼Œå¹¶åŒæ—¶ä¼ è¾“è¯¥éƒ¨åˆ†åˆ°åˆ—è¡¨ä¸­ç¬¬äºŒä¸ªDatanodeèŠ‚ç‚¹ã€‚ç¬¬äºŒä¸ªDatanodeä¹Ÿæ˜¯è¿™æ ·ï¼Œä¸€å°éƒ¨åˆ†ä¸€å°éƒ¨åˆ†åœ°æ¥æ”¶æ•°æ®ï¼Œå†™å…¥æœ¬åœ°ä»“åº“ï¼Œå¹¶åŒæ—¶ä¼ ç»™ç¬¬ä¸‰ä¸ªDatanodeã€‚æœ€åï¼Œç¬¬ä¸‰ä¸ªDatanodeæ¥æ”¶æ•°æ®å¹¶å­˜å‚¨åœ¨æœ¬åœ°ã€‚å› æ­¤ï¼ŒDatanodeèƒ½æµæ°´çº¿å¼åœ°ä»å‰ä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶æ•°æ®ï¼Œå¹¶åœ¨åŒæ—¶è½¬å‘ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ•°æ®ä»¥æµæ°´çº¿çš„æ–¹å¼ä»å‰ä¸€ä¸ªDatanodeå¤åˆ¶åˆ°ä¸‹ä¸€ä¸ªã€‚</p>
<h3 id="å¯è®¿é—®æ€§"><a href="#å¯è®¿é—®æ€§" class="headerlink" title="å¯è®¿é—®æ€§"></a>å¯è®¿é—®æ€§</h3><p>HDFSç»™åº”ç”¨æä¾›äº†å¤šç§è®¿é—®æ–¹å¼ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡Java APIæ¥å£è®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Cè¯­è¨€çš„å°è£…APIè®¿é—®ï¼Œè¿˜å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„æ–¹å¼è®¿é—®HDFSä¸­çš„æ–‡ä»¶ã€‚é€šè¿‡WebDAVåè®®è®¿é—®çš„æ–¹å¼æ­£åœ¨å¼€å‘ä¸­ã€‚</p>
<h3 id="DFSShell"><a href="#DFSShell" class="headerlink" title="DFSShell"></a>DFSShell</h3><p>HDFSä»¥æ–‡ä»¶å’Œç›®å½•çš„å½¢å¼ç»„ç»‡ç”¨æˆ·æ•°æ®ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œçš„æ¥å£(DFSShell)è®©ç”¨æˆ·ä¸HDFSä¸­çš„æ•°æ®è¿›è¡Œäº¤äº’ã€‚å‘½ä»¤çš„è¯­æ³•å’Œç”¨æˆ·ç†Ÿæ‚‰çš„å…¶ä»–shell(ä¾‹å¦‚ bash, csh)å·¥å…·ç±»ä¼¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›åŠ¨ä½œ/å‘½ä»¤çš„ç¤ºä¾‹ï¼š</p>
<h3 id="åŠ¨ä½œå‘½ä»¤"><a href="#åŠ¨ä½œå‘½ä»¤" class="headerlink" title="åŠ¨ä½œå‘½ä»¤"></a>åŠ¨ä½œå‘½ä»¤</h3><p>åˆ›å»ºä¸€ä¸ªåä¸º /foodir çš„ç›®å½•    bin/hadoop dfs -mkdir /foodir<br>åˆ›å»ºä¸€ä¸ªåä¸º /foodir çš„ç›®å½•    bin/hadoop dfs -mkdir /foodir<br>æŸ¥çœ‹åä¸º /foodir/myfile.txt çš„æ–‡ä»¶å†…å®¹    bin/hadoop dfs -cat /foodir/myfile.txt<br>DFSShell å¯ä»¥ç”¨åœ¨é‚£äº›é€šè¿‡è„šæœ¬è¯­è¨€å’Œæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œäº¤äº’çš„åº”ç”¨ç¨‹åºä¸Šã€‚</p>
<h3 id="DFSAdmin"><a href="#DFSAdmin" class="headerlink" title="DFSAdmin"></a>DFSAdmin</h3><p>DFSAdmin å‘½ä»¤ç”¨æ¥ç®¡ç†HDFSé›†ç¾¤ã€‚è¿™äº›å‘½ä»¤åªæœ‰HDSFçš„ç®¡ç†å‘˜æ‰èƒ½ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€äº›åŠ¨ä½œ/å‘½ä»¤çš„ç¤ºä¾‹ï¼š</p>
<h3 id="åŠ¨ä½œå‘½ä»¤-1"><a href="#åŠ¨ä½œå‘½ä»¤-1" class="headerlink" title="åŠ¨ä½œå‘½ä»¤"></a>åŠ¨ä½œå‘½ä»¤</h3><p>å°†é›†ç¾¤ç½®äºå®‰å…¨æ¨¡å¼    bin/hadoop dfsadmin -safemode enter<br>æ˜¾ç¤ºDatanodeåˆ—è¡¨    bin/hadoop dfsadmin -report<br>ä½¿DatanodeèŠ‚ç‚¹ datanodenameé€€å½¹    bin/hadoop dfsadmin -decommission datanodename</p>
<h3 id="æµè§ˆå™¨æ¥å£"><a href="#æµè§ˆå™¨æ¥å£" class="headerlink" title="æµè§ˆå™¨æ¥å£"></a>æµè§ˆå™¨æ¥å£</h3><p>ä¸€ä¸ªå…¸å‹çš„HDFSå®‰è£…ä¼šåœ¨ä¸€ä¸ªå¯é…ç½®çš„TCPç«¯å£å¼€å¯ä¸€ä¸ªWebæœåŠ¡å™¨ç”¨äºæš´éœ²HDFSçš„åå­—ç©ºé—´ã€‚ç”¨æˆ·å¯ä»¥ç”¨æµè§ˆå™¨æ¥æµè§ˆHDFSçš„åå­—ç©ºé—´å’ŒæŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ã€‚</p>
<h2 id="å­˜å‚¨ç©ºé—´å›æ”¶"><a href="#å­˜å‚¨ç©ºé—´å›æ”¶" class="headerlink" title="å­˜å‚¨ç©ºé—´å›æ”¶"></a>å­˜å‚¨ç©ºé—´å›æ”¶</h2><h3 id="æ–‡ä»¶çš„åˆ é™¤å’Œæ¢å¤"><a href="#æ–‡ä»¶çš„åˆ é™¤å’Œæ¢å¤" class="headerlink" title="æ–‡ä»¶çš„åˆ é™¤å’Œæ¢å¤"></a>æ–‡ä»¶çš„åˆ é™¤å’Œæ¢å¤</h3><p>å½“ç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºåˆ é™¤æŸä¸ªæ–‡ä»¶æ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¹¶æ²¡æœ‰ç«‹åˆ»ä»HDFSä¸­åˆ é™¤ã€‚å®é™…ä¸Šï¼ŒHDFSä¼šå°†è¿™ä¸ªæ–‡ä»¶é‡å‘½åè½¬ç§»åˆ°/trashç›®å½•ã€‚åªè¦æ–‡ä»¶è¿˜åœ¨/trashç›®å½•ä¸­ï¼Œè¯¥æ–‡ä»¶å°±å¯ä»¥è¢«è¿…é€Ÿåœ°æ¢å¤ã€‚æ–‡ä»¶åœ¨/trashä¸­ä¿å­˜çš„æ—¶é—´æ˜¯å¯é…ç½®çš„ï¼Œå½“è¶…è¿‡è¿™ä¸ªæ—¶é—´æ—¶ï¼ŒNamenodeå°±ä¼šå°†è¯¥æ–‡ä»¶ä»åå­—ç©ºé—´ä¸­åˆ é™¤ã€‚åˆ é™¤æ–‡ä»¶ä¼šä½¿å¾—è¯¥æ–‡ä»¶ç›¸å…³çš„æ•°æ®å—è¢«é‡Šæ”¾ã€‚æ³¨æ„ï¼Œä»ç”¨æˆ·åˆ é™¤æ–‡ä»¶åˆ°HDFSç©ºé—²ç©ºé—´çš„å¢åŠ ä¹‹é—´ä¼šæœ‰ä¸€å®šæ—¶é—´çš„å»¶è¿Ÿã€‚</p>
<p>åªè¦è¢«åˆ é™¤çš„æ–‡ä»¶è¿˜åœ¨/trashç›®å½•ä¸­ï¼Œç”¨æˆ·å°±å¯ä»¥æ¢å¤è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœç”¨æˆ·æƒ³æ¢å¤è¢«åˆ é™¤çš„æ–‡ä»¶ï¼Œä»–/å¥¹å¯ä»¥æµè§ˆ/trashç›®å½•æ‰¾å›è¯¥æ–‡ä»¶ã€‚/trashç›®å½•ä»…ä»…ä¿å­˜è¢«åˆ é™¤æ–‡ä»¶çš„æœ€åå‰¯æœ¬ã€‚/trashç›®å½•ä¸å…¶ä»–çš„ç›®å½•æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé™¤äº†ä¸€ç‚¹ï¼šåœ¨è¯¥ç›®å½•ä¸ŠHDFSä¼šåº”ç”¨ä¸€ä¸ªç‰¹æ®Šç­–ç•¥æ¥è‡ªåŠ¨åˆ é™¤æ–‡ä»¶ã€‚ç›®å‰çš„é»˜è®¤ç­–ç•¥æ˜¯åˆ é™¤/trashä¸­ä¿ç•™æ—¶é—´è¶…è¿‡6å°æ—¶çš„æ–‡ä»¶ã€‚å°†æ¥ï¼Œè¿™ä¸ªç­–ç•¥å¯ä»¥é€šè¿‡ä¸€ä¸ªè¢«è‰¯å¥½å®šä¹‰çš„æ¥å£é…ç½®ã€‚</p>
<h3 id="å‡å°‘å‰¯æœ¬ç³»æ•°"><a href="#å‡å°‘å‰¯æœ¬ç³»æ•°" class="headerlink" title="å‡å°‘å‰¯æœ¬ç³»æ•°"></a>å‡å°‘å‰¯æœ¬ç³»æ•°</h3><p>å½“ä¸€ä¸ªæ–‡ä»¶çš„å‰¯æœ¬ç³»æ•°è¢«å‡å°åï¼ŒNamenodeä¼šé€‰æ‹©è¿‡å‰©çš„å‰¯æœ¬åˆ é™¤ã€‚ä¸‹æ¬¡å¿ƒè·³æ£€æµ‹æ—¶ä¼šå°†è¯¥ä¿¡æ¯ä¼ é€’ç»™Datanodeã€‚Datanodeé‚å³ç§»é™¤ç›¸åº”çš„æ•°æ®å—ï¼Œé›†ç¾¤ä¸­çš„ç©ºé—²ç©ºé—´åŠ å¤§ã€‚åŒæ ·ï¼Œåœ¨è°ƒç”¨setReplication APIç»“æŸå’Œé›†ç¾¤ä¸­ç©ºé—²ç©ºé—´å¢åŠ é—´ä¼šæœ‰ä¸€å®šçš„å»¶è¿Ÿã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><span class="exturl" data-url="aHR0cDovL2hhZG9vcC5hcGFjaGUub3JnL2NvcmUvZG9jcy9jdXJyZW50L2FwaS8=" title="http://hadoop.apache.org/core/docs/current/api/">HDFS Java API<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cDovL2hhZG9vcC5hcGFjaGUub3JnL2NvcmUvdmVyc2lvbl9jb250cm9sLmh0bWw=" title="http://hadoop.apache.org/core/version_control.html">HDFS æºä»£ç <i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hadoop2.7.5HAé›†ç¾¤æ­å»º]]></title>
      <url>/Hadoop2-7-5HA%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA.html</url>
      <content type="html"><![CDATA[<h2 id="hadoop-HAåŸç†æ¦‚è¿°"><a href="#hadoop-HAåŸç†æ¦‚è¿°" class="headerlink" title="hadoop HAåŸç†æ¦‚è¿°"></a>hadoop HAåŸç†æ¦‚è¿°</h2><h3 id="ä¸ºä»€ä¹ˆä¼šæœ‰-hadoop-HA-æœºåˆ¶å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰-hadoop-HA-æœºåˆ¶å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰ hadoop HA æœºåˆ¶å‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šæœ‰ hadoop HA æœºåˆ¶å‘¢ï¼Ÿ</h3><ol>
<li>HAï¼šHigh Availableï¼Œé«˜å¯ç”¨<br>åœ¨Hadoop 2.0ä¹‹å‰,åœ¨HDFS é›†ç¾¤ä¸­NameNode å­˜åœ¨å•ç‚¹æ•…éšœ (SPOFï¼šA Single Point of Failure)ã€‚å¯¹äºåªæœ‰ä¸€ä¸ª NameNode çš„é›†ç¾¤ï¼Œå¦‚æœ NameNode æœºå™¨å‡ºç°æ•…éšœ(æ¯”å¦‚å®•æœºæˆ–æ˜¯è½¯ä»¶ã€ç¡¬ä»¶å‡çº§)ï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤å°†æ— æ³•ä½¿ç”¨ï¼Œç›´åˆ° NameNode é‡æ–°å¯åŠ¨ã€‚</li>
<li>é‚£å¦‚ä½•è§£å†³å‘¢ï¼ŸHDFS çš„ HA åŠŸèƒ½é€šè¿‡é…ç½® Active/Standby ä¸¤ä¸ª NameNodes å®ç°åœ¨é›†ç¾¤ä¸­å¯¹ NameNode çš„çƒ­å¤‡æ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚å¦‚æœå‡ºç°æ•…éšœï¼Œå¦‚æœºå™¨å´©æºƒæˆ–æœºå™¨éœ€è¦å‡çº§ç»´æŠ¤ï¼Œè¿™æ—¶å¯é€šè¿‡æ­¤ç§æ–¹å¼å°† NameNode å¾ˆå¿«çš„åˆ‡æ¢åˆ°å¦å¤–ä¸€å°æœºå™¨ã€‚</li>
<li>åœ¨ä¸€ä¸ªå…¸å‹çš„ HDFS(HA) é›†ç¾¤ä¸­ï¼Œä½¿ç”¨ä¸¤å°å•ç‹¬çš„æœºå™¨é…ç½®ä¸º NameNodes ã€‚åœ¨ä»»ä½•æ—¶é—´ç‚¹ï¼Œç¡®ä¿ NameNodes ä¸­åªæœ‰ä¸€ä¸ªå¤„äº Active çŠ¶æ€ï¼Œå…¶ä»–çš„å¤„åœ¨ Standby çŠ¶æ€ã€‚å…¶ä¸­ActiveNameNode è´Ÿè´£é›†ç¾¤ä¸­çš„æ‰€æœ‰å®¢æˆ·ç«¯æ“ä½œï¼ŒStandbyNameNode ä»…ä»…å……å½“å¤‡æœºï¼Œä¿è¯ä¸€æ—¦ ActiveNameNode å‡ºç°é—®é¢˜èƒ½å¤Ÿå¿«é€Ÿåˆ‡æ¢ã€‚<a id="more"></a></li>
<li>ä¸ºäº†èƒ½å¤Ÿå®æ—¶åŒæ­¥ Active å’Œ Standby ä¸¤ä¸ª NameNode çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆå®é™…ä¸Š editlogï¼‰ï¼Œéœ€æä¾›ä¸€ä¸ªå…±äº«å­˜å‚¨ç³»ç»Ÿï¼Œå¯ä»¥æ˜¯ NFSã€QJMï¼ˆQuorum Journal Managerï¼‰æˆ–è€… Zookeeperï¼ŒActiveNamenode å°†æ•°æ®å†™å…¥å…±äº«å­˜å‚¨ç³»ç»Ÿï¼Œè€Œ Standby ç›‘å¬è¯¥ç³»ç»Ÿï¼Œä¸€æ—¦å‘ç°æœ‰æ–°æ•°æ®å†™å…¥ï¼Œåˆ™è¯»å–è¿™äº›æ•°æ®ï¼Œå¹¶åŠ è½½åˆ°è‡ªå·±å†…å­˜ä¸­ï¼Œä»¥ä¿è¯è‡ªå·±å†…å­˜çŠ¶æ€ä¸ Active NameNode ä¿æŒåŸºæœ¬ä¸€è‡´ï¼Œå¦‚æ­¤è¿™èˆ¬ï¼Œåœ¨ç´§æ€¥æƒ…å†µä¸‹ standby ä¾¿å¯å¿«é€Ÿåˆ‡ä¸º active namenodeã€‚ä¸ºäº†å®ç°å¿«é€Ÿåˆ‡æ¢ï¼ŒStandby èŠ‚ç‚¹è·å–é›†ç¾¤çš„æœ€æ–°æ–‡ä»¶å—ä¿¡æ¯ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼ŒDataNode éœ€è¦é…ç½® NameNodes çš„ä½ç½®ï¼Œå¹¶åŒæ—¶ç»™ä»–ä»¬å‘é€æ–‡ä»¶å—ä¿¡æ¯ä»¥åŠå¿ƒè·³æ£€æµ‹ã€‚</li>
</ol>
<p><img src="https://img-blog.csdn.net/20180324172504472?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="SecondaryNameNode-å’Œ-Standby-Namenode-çš„åŒºåˆ«ï¼Ÿ"><a href="#SecondaryNameNode-å’Œ-Standby-Namenode-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="SecondaryNameNode å’Œ Standby Namenode çš„åŒºåˆ«ï¼Ÿ"></a>SecondaryNameNode å’Œ Standby Namenode çš„åŒºåˆ«ï¼Ÿ</h2><p>åœ¨1.xç‰ˆæœ¬ä¸­ï¼ŒSecondaryNameNodeå°†fsimageè·Ÿeditsè¿›è¡Œåˆå¹¶ï¼Œç”Ÿæˆæ–°çš„fsimageæ–‡ä»¶ç”¨http postä¼ å›NameNodeèŠ‚ç‚¹ã€‚SecondaryNameNodeä¸èƒ½åšNameNodeçš„å¤‡ä»½ã€‚<br>åœ¨hadoop 2.xç‰ˆæœ¬ä¸­æ‰å¼•å…¥StandbyNameNodeï¼Œä»journalNodeä¸Šæ‹·è´çš„ã€‚StandbyNameNodeæ˜¯å¯ä»¥åšnamenodeçš„å¤‡ä»½ã€‚</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phcnRoL2FydGljbGUvZGV0YWlscy81MjgzOTg2NA==" title="https://blog.csdn.net/jarth/article/details/52839864">Hadoop2çš„é«˜å¯ç”¨å¹¶å–ä»£SecondaryNamenode<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L28zNDAxNzY2MzUvYXJ0aWNsZS9kZXRhaWxzLzQ2OTMxOTIx" title="https://blog.csdn.net/o340176635/article/details/46931921">åœ¨hadoop2å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦SecondeNamenode<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vY2hlbnlhbGluZy9wLzU1MjE0NjQuaHRtbA==" title="https://www.cnblogs.com/chenyaling/p/5521464.html">secondary namenodeå’Œnamenodeçš„åŒºåˆ« <i class="fa fa-external-link"></i></span></p>
<h2 id="é›†ç¾¤è§„åˆ’"><a href="#é›†ç¾¤è§„åˆ’" class="headerlink" title="é›†ç¾¤è§„åˆ’"></a>é›†ç¾¤è§„åˆ’</h2><p>æè¿°ï¼šhadoop HA é›†ç¾¤çš„æ­å»ºä¾èµ–äº zookeeperï¼Œæ‰€ä»¥é€‰å–ä¸‰å°å½“åš zookeeper é›†ç¾¤æˆ‘æ€»å…±å‡†å¤‡äº†å››å°ä¸»æœºï¼Œåˆ†åˆ«æ˜¯ hadoop02ï¼Œhadoop03ï¼Œhadoop04ï¼Œhadoop05å…¶ä¸­ hadoop02 å’Œ hadoop03 åš namenode çš„ä¸»å¤‡åˆ‡æ¢ï¼Œhadoop04 å’Œ hadoop05 åšresourcemanager çš„ä¸»å¤‡åˆ‡æ¢</p>
<p><img src="https://img-blog.csdn.net/20180324174153453?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdn.net/2018032417421737?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="é›†ç¾¤æœåŠ¡å™¨å‡†å¤‡"><a href="#é›†ç¾¤æœåŠ¡å™¨å‡†å¤‡" class="headerlink" title="é›†ç¾¤æœåŠ¡å™¨å‡†å¤‡"></a>é›†ç¾¤æœåŠ¡å™¨å‡†å¤‡</h2><p>1ã€ ä¿®æ”¹ä¸»æœºå<br>2ã€ ä¿®æ”¹ IP åœ°å€<br>3ã€ æ·»åŠ ä¸»æœºåå’Œ IP æ˜ å°„<br>4ã€ æ·»åŠ æ™®é€šç”¨æˆ· hadoop ç”¨æˆ·å¹¶é…ç½® sudoer æƒé™<br>5ã€ è®¾ç½®ç³»ç»Ÿå¯åŠ¨çº§åˆ«<br>6ã€ å…³é—­é˜²ç«å¢™/å…³é—­ Selinux<br>7ã€ å®‰è£… JDK<br>ä¸¤ç§å‡†å¤‡æ–¹å¼ï¼š<br>1ã€ æ¯ä¸ªèŠ‚ç‚¹éƒ½å•ç‹¬è®¾ç½®ï¼Œè¿™æ ·æ¯”è¾ƒéº»çƒ¦ã€‚çº¿ä¸Šç¯å¢ƒå¯ä»¥ç¼–å†™è„šæœ¬å®ç°<br>2ã€ è™šæ‹Ÿæœºç¯å¢ƒå¯æ˜¯åœ¨åšå®Œä»¥ä¸Š 7 æ­¥ä¹‹åï¼Œå°±è¿›è¡Œå…‹éš†<br>3ã€ ç„¶åæ¥ç€å†ç»™ä½ çš„é›†ç¾¤é…ç½® SSH å…å¯†ç™»é™†å’Œæ­å»ºæ—¶é—´åŒæ­¥æœåŠ¡<br>8ã€ é…ç½® SSH å…å¯†ç™»å½•<br>9ã€ åŒæ­¥æœåŠ¡å™¨æ—¶é—´</p>
<h2 id="é›†ç¾¤å®‰è£…"><a href="#é›†ç¾¤å®‰è£…" class="headerlink" title="é›†ç¾¤å®‰è£…"></a>é›†ç¾¤å®‰è£…</h2><p>1ã€å®‰è£… Zookeeper é›†ç¾¤ï¼ˆç•¥ï¼‰<br>2ã€ å®‰è£… hadoop é›†ç¾¤</p>
<h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</h4><p>core-site.xml :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!-- æŒ‡å®šhdfsçš„nameserviceä¸ºmyha01 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hdfs://myha01/&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- æŒ‡å®šhadoopä¸´æ—¶ç›®å½• --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;/home/hadoop/data1/hadoopdata/&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- æŒ‡å®šzookeeperåœ°å€ --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop01:2181,hadoop02:2181,hadoop03:2181,hadoop04:2181,hadoop05:2181&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- hadoopé“¾æ¥zookeeperçš„è¶…æ—¶æ—¶é•¿è®¾ç½® --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;ha.zookeeper.session-timeout.ms&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;1000&lt;/value&gt;</span><br><span class="line">		&lt;description&gt;ms&lt;/description&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>
<p>hdfs-site.xml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- æŒ‡å®šå‰¯æœ¬æ•°--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;2&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- é…ç½®namenodeå’Œdatanodeçš„å·¥ä½œç›®å½•-æ•°æ®å­˜å‚¨ç›®å½•--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;/home/hadoop/data1/hadoopdata/dfs/name&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;/home/hadoop/data1/hadoopdata/dfs/data&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- å¯ç”¨webhdfs--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.webhdfs.enabled&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!--æŒ‡å®šhdfsçš„nameserviceä¸ºmyha01ï¼Œéœ€è¦å’Œcore-site.xmlä¸­çš„ä¿æŒä¸€è‡´ </span><br><span class="line">	     		dfs.ha.namenodes.[nameservice id]ä¸ºåœ¨nameserviceä¸­çš„æ¯ä¸€ä¸ªNameNodeè®¾ç½®å”¯ä¸€æ ‡ç¤ºç¬¦ã€‚ </span><br><span class="line">		é…ç½®ä¸€ä¸ªé€—å·åˆ†éš”çš„NameNode IDåˆ—è¡¨ã€‚è¿™å°†æ˜¯è¢«DataNodeè¯†åˆ«ä¸ºæ‰€æœ‰çš„NameNodeã€‚ </span><br><span class="line">		ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨&quot;myha01&quot;ä½œä¸ºnameservice IDï¼Œå¹¶ä¸”ä½¿ç”¨&quot;nn1&quot;å’Œ&quot;nn2&quot;ä½œä¸ºNameNodesæ ‡ç¤ºç¬¦ </span><br><span class="line">	--&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.nameservices&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;myha01&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- myha01ä¸‹é¢æœ‰ä¸¤ä¸ªNameNode,åˆ†åˆ«æ˜¯nn1,nn2--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.namenodes.myha01&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;nn1,nn2&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- nn1çš„RPCé€šä¿¡åœ°å€--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.rpc-address.myha01.nn1&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop01:9000&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- nn1çš„httpé€šä¿¡åœ°å€--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.http-address.myha01.nn1&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop01:50070&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- nn2çš„RPCé€šä¿¡åœ°å€--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.rpc-address.myha01.nn2&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop02:9000&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- nn2çš„httpé€šä¿¡åœ°å€ --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.http-address.myha01.nn2&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop02:50070&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- æŒ‡å®šNameNodeçš„editså…ƒæ•°æ®çš„å…±äº«å­˜å‚¨ä½ç½®ã€‚ä¹Ÿå°±æ˜¯JournalNodeåˆ—è¡¨ </span><br><span class="line">			è¯¥urlçš„é…ç½®æ ¼å¼ï¼šqjournal://host1:port1;host2:port2;host3:port3/journalId </span><br><span class="line">	journalIdæ¨èä½¿ç”¨nameserviceï¼Œé»˜è®¤ç«¯å£å·æ˜¯ï¼š8485 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;qjournal://hadoop02:8485;hadoop03:8485;hadoop04:8485/myha01&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- æŒ‡å®šJournalNodeåœ¨æœ¬åœ°ç£ç›˜å­˜æ”¾æ•°æ®çš„ä½ç½®--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;/home/hadoop/data1/journaldata&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- å¼€å¯NameNodeå¤±è´¥è‡ªåŠ¨åˆ‡æ¢--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- é…ç½®å¤±è´¥è‡ªåŠ¨åˆ‡æ¢å®ç°æ–¹å¼--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.client.failover.proxy.provider.myha01&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- é…ç½®éš”ç¦»æœºåˆ¶æ–¹æ³•ï¼Œå¤šä¸ªæœºåˆ¶ç”¨æ¢è¡Œåˆ†å‰²ï¼Œå³æ¯ä¸ªæœºåˆ¶æš‚ç”¨ä¸€è¡Œ--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;</span><br><span class="line">			sshfence</span><br><span class="line">			shell(/bin/true)</span><br><span class="line">		&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- ä½¿ç”¨sshfenceéš”ç¦»æœºåˆ¶æ—¶éœ€è¦sshå…å¯†ç™»é™†--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;/home/hadoop/.ssh/id_rsa&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- é…ç½®sshfenceéš”ç¦»æœºåˆ¶èµ¶è¶…æ—¶é—´--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.fencing.ssh.connect-timeout&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;30000&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;ha.failover-controller.cli-check.rpc-timeout.ms&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;60000&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p>mapred-site.xml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!--æŒ‡å®šmræ¡†æ¶ä¸ºyarnæ–¹å¼--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!--æŒ‡å®šmapreduce jobhistory--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop01:10020&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!--ä»»åŠ¡å†å²æœåŠ¡å™¨çš„webåœ°å€--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop01:19888&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p>yarn-site.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- å¼€å¯RMé«˜å¯ç”¨--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- æŒ‡å®šRMçš„cluster id--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yrc&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- æŒ‡å®šRMçš„åå­—--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;rm1,rm2&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!--åˆ†åˆ«æŒ‡å®šRMçš„åœ°å€--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop03&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop04&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- æŒ‡å®šzké›†ç¾¤åœ°å€--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hadoop01:2181,hadoop02:2181,hadoop03:2181,hadoop04:2181,hadoop05:2181&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;86400&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!--å¯ç”¨è‡ªåŠ¨æ¢å¤--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- åˆ¶å®šresourcemanagerçš„çŠ¶æ€ä¿¡æ¯å­˜å‚¨åœ¨zookeeperé›†ç¾¤ä¸Š --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p>hadoop-env.sh: ä¿®æ”¹JAVA_HOME<br>slavesæ–‡ä»¶ï¼šä¿®æ”¹æ˜ å°„</p>
<p>#æ³¨æ„ï¼šé…ç½®æ–‡ä»¶æ˜¯æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ï¼Œå»ºè®®å¤åˆ¶ï¼Œä¸å»ºè®®æ‰‹å†™ï¼Œå®¹æ˜“å‡ºé”™ã€‚æ ¼å¼åŒ–namenodeä¹‹åï¼Œå¦‚æœå‡ºé”™äº†ï¼Œå»ºè®®åˆ é™¤ä¸´æ—¶æ–‡ä»¶æ—¥å¿—ç›®å½•ï¼Œæ¯å°æœºå™¨éƒ½è¦åˆ é™¤ï¼Œé‡æ–°æ ¼å¼åŒ–ï¼Œæ³¨æ„é¡ºåºæ­¥éª¤ã€‚</p>
<p>å¦‚æœDFSZKFailoverControllerè‡ªåŠ¨æ­»æ‰ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯å› ä¸ºä»¥ä¸‹é…ç½®é—®é¢˜ï¼š<br>é”™è¯¯é…ç½®ï¼Œä¼šå¯¼è‡´DFSZKFailoverControlleræ­»æ‰ï¼š<br><img src="https://img-blog.csdn.net/20180324192833687?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>æ­£ç¡®å†™æ³•ï¼Œæ³¨æ„sshfenceä¸èƒ½æ¢è¡Œï¼š<br><img src="https://img-blog.csdn.net/20180324192845271?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="åˆ†å‘å®‰è£…åŒ…åˆ°å…¶ä»–æœºå™¨"><a href="#åˆ†å‘å®‰è£…åŒ…åˆ°å…¶ä»–æœºå™¨" class="headerlink" title="åˆ†å‘å®‰è£…åŒ…åˆ°å…¶ä»–æœºå™¨"></a>åˆ†å‘å®‰è£…åŒ…åˆ°å…¶ä»–æœºå™¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r hadoop-2.7.5 hadoop@hadoop02:$PWD</span><br><span class="line">scp -r hadoop-2.7.5 hadoop@hadoop03:$PWD</span><br><span class="line">scp -r hadoop-2.7.5 hadoop@hadoop04:$PWD</span><br><span class="line">scp -r hadoop-2.7.5 hadoop@hadoop05:$PWD</span><br></pre></td></tr></table></figure>
<h2 id="å¹¶åˆ†åˆ«é…ç½®ç¯å¢ƒå˜é‡"><a href="#å¹¶åˆ†åˆ«é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="å¹¶åˆ†åˆ«é…ç½®ç¯å¢ƒå˜é‡"></a>å¹¶åˆ†åˆ«é…ç½®ç¯å¢ƒå˜é‡</h2><p>vi ~/.bashrc<br>æ·»åŠ ä¸¤è¡Œï¼š<br>export HADOOP_HOME=/home/hadoop/apps/hadoop-2.6.5<br>export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin<br>ä¿å­˜é€€å‡º</p>
<h2 id="é›†ç¾¤åˆå§‹åŒ–æ“ä½œï¼šï¼ˆæ³¨æ„ï¼šä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼‰"><a href="#é›†ç¾¤åˆå§‹åŒ–æ“ä½œï¼šï¼ˆæ³¨æ„ï¼šä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼‰" class="headerlink" title="é›†ç¾¤åˆå§‹åŒ–æ“ä½œï¼šï¼ˆæ³¨æ„ï¼šä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼‰"></a>é›†ç¾¤åˆå§‹åŒ–æ“ä½œï¼šï¼ˆæ³¨æ„ï¼šä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼‰</h2><p>1ã€ å…ˆå¯åŠ¨ zookeeper é›†ç¾¤<br>å¯åŠ¨ï¼šzkServer.sh start<br>æ£€æŸ¥å¯åŠ¨æ˜¯å¦æ­£å¸¸ï¼šzkServer.sh status<br>2ã€ åˆ†åˆ«åœ¨æ¯ä¸ª zookeeperï¼ˆä¹Ÿå°±æ˜¯è§„åˆ’çš„ä¸‰ä¸ª journalnode èŠ‚ç‚¹ï¼Œä¸ä¸€å®šè·Ÿ zookeeper<br>èŠ‚ç‚¹ä¸€æ ·ï¼‰èŠ‚ç‚¹ä¸Šå¯åŠ¨ journalnode è¿›ç¨‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 ~]$ hadoop-daemon.sh start journalnode</span><br><span class="line">[hadoop@hadoop02 ~]$ hadoop-daemon.sh start journalnode</span><br><span class="line">[hadoop@hadoop03 ~]$ hadoop-daemon.sh start journalnode</span><br><span class="line">[hadoop@hadoop04 ~]$ hadoop-daemon.sh start journalnode</span><br><span class="line">[hadoop@hadoop05 ~]$ hadoop-daemon.sh start journalnode</span><br></pre></td></tr></table></figure>
<p>ç„¶åç”¨ jps å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å„ä¸ª datanode èŠ‚ç‚¹ä¸Šéƒ½å¯åŠ¨äº† journalnode è¿›ç¨‹<br>å¦‚æœæŠ¥é”™ï¼Œæ ¹æ®é”™è¯¯æç¤ºæ”¹è¿›<br>3ã€åœ¨ç¬¬ä¸€ä¸ª namenode ä¸Šæ‰§è¡Œæ ¼å¼åŒ–æ“ä½œ<br>ç„¶åä¼šåœ¨ core-site.xml ä¸­é…ç½®çš„ä¸´æ—¶ç›®å½•ä¸­ç”Ÿæˆä¸€äº›é›†ç¾¤çš„ä¿¡æ¯<br>æŠŠä»–æ‹·è´çš„ç¬¬äºŒä¸ª namenode çš„ç›¸åŒç›®å½•ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">&lt;value&gt;/home/hadoop/data/hadoopdata/&lt;/value&gt;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªç›®å½•ä¸‹ï¼Œåƒä¸‡è®°ä½ï¼šä¸¤ä¸ª namenode èŠ‚ç‚¹è¯¥ç›®å½•ä¸­çš„æ•°æ®ç»“æ„æ˜¯ä¸€è‡´çš„<br>[hadoop@hadoop02 ~]$ scp -r ~/data/hadoopdata/ hadoop03:~/data<br>æˆ–è€…ä¹Ÿå¯ä»¥åœ¨å¦ä¸€ä¸ª namenode ä¸Šæ‰§è¡Œï¼šhadoop namenode -bootstrapStandby</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop02 ~]$ hadoop namenode -format</span><br></pre></td></tr></table></figure>
<p>4ã€æ ¼å¼åŒ– ZKFC</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop02 ~]$ hdfs zkfc -formatZK</span><br></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ä¸€å°æœºå™¨ä¸Šå³å¯<br>5ã€å¯åŠ¨ HDFS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop02 ~]$ start-dfs.sh</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹å„èŠ‚ç‚¹è¿›ç¨‹æ˜¯å¦å¯åŠ¨æ­£å¸¸ï¼šä¾æ¬¡ä¸º 2345 å››å°æœºå™¨çš„è¿›ç¨‹</p>
<h2 id="æœ€ç»ˆæ•ˆæœï¼š"><a href="#æœ€ç»ˆæ•ˆæœï¼š" class="headerlink" title="æœ€ç»ˆæ•ˆæœï¼š"></a>æœ€ç»ˆæ•ˆæœï¼š</h2><p>è®¿é—® web é¡µé¢ <span class="exturl" data-url="aHR0cDovL2hhZG9vcDAxOjUwMDcw" title="http://hadoop01:50070">http://hadoop01:50070<i class="fa fa-external-link"></i></span><br><img src="https://img-blog.csdn.net/20180324181322961?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="http://hadoop02:50070"><br>è®¿é—® web é¡µé¢ <span class="exturl" data-url="aHR0cDovL2hhZG9vcDAyOjUwMDcw" title="http://hadoop02:50070">http://hadoop02:50070<i class="fa fa-external-link"></i></span><br><img src="https://img-blog.csdn.net/20180324181415193?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdn.net/20180324181335196?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdn.net/20180324181353110?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="å¯åŠ¨-YARN"><a href="#å¯åŠ¨-YARN" class="headerlink" title="å¯åŠ¨ YARN"></a>å¯åŠ¨ YARN</h2><p>[hadoop@hadoop04 ~]$ start-yarn.sh<br>åœ¨ä¸»å¤‡ resourcemanager ä¸­éšä¾¿é€‰æ‹©ä¸€å°è¿›è¡Œå¯åŠ¨ï¼Œæ­£å¸¸å¯åŠ¨ä¹‹åï¼Œæ£€æŸ¥å„èŠ‚ç‚¹çš„è¿›ç¨‹ï¼š<br>è‹¥å¤‡ç”¨èŠ‚ç‚¹çš„ resourcemanager æ²¡æœ‰å¯åŠ¨èµ·æ¥ï¼Œåˆ™æ‰‹åŠ¨å¯åŠ¨èµ·æ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop04 ~]$ yarn-daemon.sh start resourcemanager</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®é¡µé¢ï¼š<span class="exturl" data-url="aHR0cDovL2hhZG9vcDAzOjgwODg=" title="http://hadoop03:8088">http://hadoop03:8088<i class="fa fa-external-link"></i></span><br><img src="https://img-blog.csdn.net/20180324181845442?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>è®¿é—®é¡µé¢ï¼š<span class="exturl" data-url="aHR0cDovL2hhZG9vcDA0OjgwODg=" title="http://hadoop04:8088">http://hadoop04:8088<i class="fa fa-external-link"></i></span> è‡ªåŠ¨è·³è½¬è‡³hadoop03æœºå™¨<br><img src="https://img-blog.csdn.net/20180324181852559?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="æŸ¥çœ‹å„ä¸»èŠ‚ç‚¹çš„çŠ¶æ€"><a href="#æŸ¥çœ‹å„ä¸»èŠ‚ç‚¹çš„çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹å„ä¸»èŠ‚ç‚¹çš„çŠ¶æ€"></a>æŸ¥çœ‹å„ä¸»èŠ‚ç‚¹çš„çŠ¶æ€</h2><p>HDFS:<br>hdfs haadmin -getServiceState nn1<br>hdfs haadmin -getServiceState nn2<br><img src="https://img-blog.csdn.net/20180324182718707?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>YARN:<br>yarn rmadmin -getServiceState rm1<br>yarn rmadmin -getServiceState rm2<br><img src="https://img-blog.csdn.net/20180324182811489?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="å¯åŠ¨-mapreduce-ä»»åŠ¡å†å²æœåŠ¡å™¨"><a href="#å¯åŠ¨-mapreduce-ä»»åŠ¡å†å²æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨ mapreduce ä»»åŠ¡å†å²æœåŠ¡å™¨"></a>å¯åŠ¨ mapreduce ä»»åŠ¡å†å²æœåŠ¡å™¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop01 ~]$ mr-jobhistory-daemon.sh start historyserver</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§é…ç½®æ–‡ä»¶é…ç½®çš„å†å²æœåŠ¡å™¨çš„ web è®¿é—®åœ°å€å»è®¿é—®ï¼š<br><span class="exturl" data-url="aHR0cDovL2hhZG9vcDAxOjE5ODg4" title="http://hadoop01:19888">http://hadoop01:19888<i class="fa fa-external-link"></i></span><br><img src="https://img-blog.csdn.net/20180324183754653?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="é›†ç¾¤å¯åŠ¨æµ‹è¯•"><a href="#é›†ç¾¤å¯åŠ¨æµ‹è¯•" class="headerlink" title="é›†ç¾¤å¯åŠ¨æµ‹è¯•"></a>é›†ç¾¤å¯åŠ¨æµ‹è¯•</h2><p>1ã€å¹²æ‰ active namenodeï¼Œ çœ‹çœ‹é›†ç¾¤æœ‰ä»€ä¹ˆå˜åŒ–<br>      å¹²æ‰active namenodeï¼Œstandby namenodeç¬é—´è½¬ä¸ºactiveçŠ¶æ€ï¼›é‡æ–°å¯åŠ¨åˆšæ‰é‚£å°å¹²æ‰çš„èŠ‚ç‚¹åï¼Œè¯¥èŠ‚ç‚¹å˜ä¸ºstandby çŠ¶æ€ã€‚<br>2ã€åœ¨ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™å¹²æ‰ active namenodeï¼Œ çœ‹çœ‹æœ‰ä»€ä¹ˆå˜åŒ–<br>        ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å¯ä»¥ä¸Šä¼ æˆåŠŸã€‚<br>3ã€å¹²æ‰ active resourcemanagerï¼Œ çœ‹çœ‹é›†ç¾¤æœ‰ä»€ä¹ˆå˜åŒ–<br>    hadoop03ä¸Šçš„yarnèŠ‚ç‚¹å°±ä¸èƒ½è®¿é—®ï¼Œhadoop05ä¸Šçš„yarnèŠ‚ç‚¹å¯ä»¥æ­£å¸¸è®¿é—®ã€‚<br>4ã€åœ¨æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™å¹²æ‰ active resourcemanagerï¼Œçœ‹çœ‹é›†ç¾¤<br>    æ‰§è¡Œwordcountç¨‹åºï¼Œæ‰§è¡Œçš„æ—¶å€™ï¼Œåœ¨hadoop03èŠ‚ç‚¹ä¸Šæ€æ­»ResourceManagerï¼Œæœ€ç»ˆèƒ½å¤ŸæˆåŠŸæ‰§è¡Œã€‚</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[åœ¨å¤§æ•°æ®ç¯å¢ƒä¸­æ‰§è¡Œæƒ…æ„Ÿåˆ†æ]]></title>
      <url>/%E5%9C%A8%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E4%B8%AD%E6%89%A7%E8%A1%8C%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90.html</url>
      <content type="html"><![CDATA[<h2 id="æƒ…æ„Ÿåˆ†æ"><a href="#æƒ…æ„Ÿåˆ†æ" class="headerlink" title="æƒ…æ„Ÿåˆ†æ"></a>æƒ…æ„Ÿåˆ†æ</h2><p>æƒ…æ„Ÿåˆ†ææ˜¯åˆ©ç”¨æ–‡æœ¬åˆ†ææ¥æŒ–æ˜å„ç§è§‚ç‚¹çš„æ•°æ®æ¥æºçš„è¿‡ç¨‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæƒ…æ„Ÿåˆ†ææ˜¯åœ¨ä»äº’è”ç½‘å’Œå„ç§ç¤¾äº¤åª’ä½“å¹³å°æ”¶é›†çš„æ•°æ®ä¸Šæ‰§è¡Œçš„ã€‚æ”¿æ²»å®¶å’Œæ”¿åºœç»å¸¸åˆ©ç”¨æƒ…æ„Ÿåˆ†ææ¥äº†è§£äººä»¬å¦‚ä½•çœ‹å¾…ä»–ä»¬å’Œä»–ä»¬çš„æ”¿ç­–ã€‚<br>éšç€ç¤¾äº¤åª’ä½“çš„å‡ºç°ï¼Œäººä»¬å¯ä»¥ä»å„ç§ä¸åŒæ¥æºï¼ˆæ¯”å¦‚ç§»åŠ¨è®¾å¤‡å’Œ Web æµè§ˆå™¨ï¼‰æ•è·æ•°æ®ï¼Œå¹¶ç”¨ä¸åŒçš„æ•°æ®æ ¼å¼å­˜å‚¨è¿™äº›æ•°æ®ã€‚ç”±äºç¤¾äº¤åª’ä½“å†…å®¹å¯¹äºä¼ ç»Ÿå­˜å‚¨ç³»ç»Ÿï¼ˆæ¯”å¦‚ RDBMSã€å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼‰æ˜¯éç»“æ„åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€äº›å¯ä»¥å¤„ç†å’Œåˆ†æå„ç§ä¸åŒæ•°æ®çš„å·¥å…·ã€‚ä¸è¿‡ï¼Œå¤§æ•°æ®æŠ€æœ¯æ—¨åœ¨å¤„ç†ä¸åŒæ¥æºã€ä¸åŒæ ¼å¼çš„ç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•åˆ©ç”¨å¤§æ•°æ®å·¥å…·æ¥æ•è·æ•°æ®ï¼Œä»¥ä¾¿å­˜å‚¨å’Œå¤„ç†ç”¨äºæƒ…æ„Ÿåˆ†æçš„æ•°æ®ã€‚<br><a id="more"></a></p>
<h2 id="å¤„ç†å¤§æ•°æ®"><a href="#å¤„ç†å¤§æ•°æ®" class="headerlink" title="å¤„ç†å¤§æ•°æ®"></a>å¤„ç†å¤§æ•°æ®</h2><p>æ— è®ºä½•æ—¶ä»é‡‡ç”¨å¤šç§æ ¼å¼ï¼ˆç»“æ„åŒ–ã€åŠç»“æ„åŒ–æˆ–éç»“æ„åŒ–çš„ï¼‰çš„å¤šä¸ªæ¥æºæ”¶é›†æ•°æ®ï¼Œéƒ½éœ€è¦è€ƒè™‘å»ºç«‹ä¸€ä¸ª Hadoop é›†ç¾¤å’Œä¸€ä¸ª Hadoop åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰æ¥å­˜å‚¨æ•°æ®ã€‚HDFS æä¾›äº†ä¸€ç§ç®¡ç†å¤§æ•°æ®çš„çµæ´»æ–¹å¼ï¼š</p>
<ul>
<li>å¯ä»¥å°†æ‚¨çš„ä¸€äº›åˆ†ææ•°æ®ç§»åŠ¨åˆ°ç°æœ‰çš„å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰ä¸­ï¼Œæ¯”å¦‚ Oracle æˆ– MySQLï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥åˆ©ç”¨ç°æœ‰çš„ BI å’ŒæŠ¥å‘Šå·¥å…·ã€‚</li>
<li>å¯ä»¥å°†æ•°æ®å­˜å‚¨åœ¨ HDFS ä¸­ï¼Œä¾›å°†æ¥åˆ†æä½¿ç”¨ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡æ‰§è¡Œåƒ ANOVA.T è¿™æ ·çš„æµ‹è¯•æ¥æ¯”è¾ƒæ—§æ•°æ®ä¸æ–°æ•°æ®ã€‚</li>
<li>å¦‚æœåªéœ€è¦åˆ†ææ•°æ®çš„å½±å“ï¼Œé‚£ä¹ˆå¯ä»¥åˆ é™¤è¿™äº›æ•°æ®ã€‚<br>è¦äº†è§£å¦‚ä½•è®¾ç½® Hadoop é›†ç¾¤ï¼Œè¯·å°†æ•°æ®å¯¼å…¥ HDFSï¼Œç„¶ååœ¨æ‚¨çš„ Hadoop ç¯å¢ƒä¸­åˆ†æè¿™äº›æ•°æ®ï¼Œè¯·å‚é˜…æˆ‘çš„å…¶ä»– developerWorks æ–‡ç« ï¼Œ â€œ<span class="exturl" data-url="aHR0cHM6Ly93d3cuaWJtLmNvbS9kZXZlbG9wZXJ3b3Jrcy9jbi9kYXRhL2xpYnJhcnkvYmEvYmEtaGFkb29wLXJkYm1zLw==" title="https://www.ibm.com/developerworks/cn/data/library/ba/ba-hadoop-rdbms/">å°† Hadoop ä¸ç°æœ‰çš„ RDBMS ç›¸é›†æˆ<i class="fa fa-external-link"></i></span>â€œã€‚<h2 id="æ£€ç´¢æ•°æ®å¹¶å°†æ•°æ®å­˜å‚¨åœ¨-HDFS-ä¸­"><a href="#æ£€ç´¢æ•°æ®å¹¶å°†æ•°æ®å­˜å‚¨åœ¨-HDFS-ä¸­" class="headerlink" title="æ£€ç´¢æ•°æ®å¹¶å°†æ•°æ®å­˜å‚¨åœ¨ HDFS ä¸­"></a>æ£€ç´¢æ•°æ®å¹¶å°†æ•°æ®å­˜å‚¨åœ¨ HDFS ä¸­</h2>æœ€å¥½çš„æƒ…æ„Ÿåˆ†æåŒ…æ‹¬æ¥è‡ªå¤šä¸ªæ¥æºçš„æ•°æ®ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•ä»è¿™äº›æ¥æºä¸­æ£€ç´¢æ•°æ®ï¼š</li>
<li>Twitter æè¦</li>
<li>RSS æè¦</li>
<li>ç§»åŠ¨åº”ç”¨ç¨‹åº<br>æˆ‘è¿˜å°†è§£é‡Šå¦‚ä½•å°†æ¥è‡ªä¸åŒæ¥æºçš„æ•°æ®å­˜å‚¨åœ¨ HDFS ä¸­ï¼ˆå­˜å‚¨åœ¨æ‚¨çš„ Hadoop é›†ç¾¤ä¸­ï¼‰ã€‚<h2 id="ä»-Twitter-æè¦ä¸­æ£€ç´¢æ•°æ®"><a href="#ä»-Twitter-æè¦ä¸­æ£€ç´¢æ•°æ®" class="headerlink" title="ä» Twitter æè¦ä¸­æ£€ç´¢æ•°æ®"></a>ä» Twitter æè¦ä¸­æ£€ç´¢æ•°æ®</h2>Twitterï¼ˆä¸€ç§æµè¡Œçš„å¾®åšç½‘ç«™ï¼‰æœ‰ä¸€ç»„ APIï¼Œå®ƒä»¬ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæ£€ç´¢å’Œæ“ä½œ tweetã€‚ä½†æ˜¯é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®ç° Twitter çš„ OAuth æ¡†æ¶ã€‚ç®€å•åœ°è®²ï¼Œæœ‰äº†è¿™ä¸ªæ¡†æ¶ï¼Œåº”ç”¨ç¨‹åºå°±å¯ä»¥ä»£è¡¨æ‚¨ç™»å½•åˆ° Twitterï¼Œæ— éœ€æ‚¨ç™»å½•åˆ° Twitter ç½‘ç«™ã€‚æŸ¥çœ‹ <span class="exturl" data-url="aHR0cHM6Ly9kZXYudHdpdHRlci5jb20vb2F1dGgvb3ZlcnZpZXcvaW50cm9kdWN0aW9u" title="https://dev.twitter.com/oauth/overview/introduction">Twitter å¼€å‘äººå‘˜ç«™ç‚¹çš„è®¾ç½®è¿‡ç¨‹<i class="fa fa-external-link"></i></span>ï¼Œå…¶ä¸­è§£é‡Šäº†å¦‚ä½•æŒ‡æ´¾å®ç°æ­¤æ“ä½œçš„åº”ç”¨ç¨‹åºã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šä¸ºæ‚¨åˆ†é…ä¸€ä¸ªå¯†é’¥å’Œä¸€ä¸ªå¯†é’¥ä»¤ç‰Œï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå°†ä½¿ç”¨å®ƒä»¬æ¥ä»£è¡¨æ‚¨æ‰§è¡Œèº«ä»½éªŒè¯ã€‚åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå®Œæˆèº«ä»½éªŒè¯åï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨ Twitter API æ¥è·å– tweetã€‚<br>æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ R æˆ–é€šè¿‡ä½¿ç”¨ Jaql è·å–æ¥è‡ª Twitter æè¦çš„æ•°æ®ã€‚å› ä¸º Jaql è¢«è®¾è®¡ç”¨äºå¤„ç† JSON æ•°æ®ï¼Œæ‰€ä»¥å®ƒæ˜¯é€‚ç”¨äº tweet çš„é»˜è®¤æ•°æ®æ ¼å¼ï¼Œä½¿ç”¨ Jaql å¯èƒ½æ›´ç®€å•ä¸€äº›ã€‚æœ‰äººå¯èƒ½ä¼šå†³å®šä½¿ç”¨ Rï¼Œè¿™æ ·åšå¯èƒ½çº¯ç²¹æ˜¯å› ä¸ºä»–ä»¬è‡ªå·±çš„ R æŠ€èƒ½ã€‚<h3 id="é€šè¿‡ä½¿ç”¨-Jaql-æ£€ç´¢æ¥è‡ª-Twitter-çš„æ•°æ®"><a href="#é€šè¿‡ä½¿ç”¨-Jaql-æ£€ç´¢æ¥è‡ª-Twitter-çš„æ•°æ®" class="headerlink" title="é€šè¿‡ä½¿ç”¨ Jaql æ£€ç´¢æ¥è‡ª Twitter çš„æ•°æ®"></a>é€šè¿‡ä½¿ç”¨ Jaql æ£€ç´¢æ¥è‡ª Twitter çš„æ•°æ®</h3>åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå®Œæˆèº«ä»½éªŒè¯åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Twitter API æ¥è·å– tweetã€‚<br>å› ä¸ºæˆ‘ä»¬æƒ³è¦åœ¨æµåŒ–æ¨¡å¼ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ Twitter URL æ˜¯ï¼š<br>url = â€œ<span class="exturl" data-url="aHR0cHM6Ly9zdHJlYW0udHdpdHRlci5jb20vMS4xL3N0YXR1c2VzL2ZpbHRlci5qc29uP3RyYWNrPWdvdmVybm1lbnRUb3BpYw==" title="https://stream.twitter.com/1.1/statuses/filter.json?track=governmentTopic">https://stream.twitter.com/1.1/statuses/filter.json?track=governmentTopic<i class="fa fa-external-link"></i></span>â€œ;<br>ä½¿ç”¨æˆ‘ä»¬æ­£åœ¨æŒ–æ˜çš„æ”¿åºœä¸»é¢˜çš„åç§°æ¥æ›¿æ¢ governmentTopicã€‚é€šè¿‡ä½¿ç”¨ä¸ä»¥ä¸‹ä»£ç ç±»ä¼¼çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡æ¥è·å– tweetï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jsonResultTweets = read(http(url));</span><br><span class="line">jsonResultTweets;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>åœ¨è¿è¡Œ Jaql è„šæœ¬æ—¶ï¼Œå®ƒä¼šæå–ä¸æ”¿åºœä¸»é¢˜ç›¸å…³çš„ tweetã€‚è¿™äº› tweet æ˜¯ä»¥ JSON æ ¼å¼è¿”å›çš„ã€‚<br>å¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡ä½ç½®çŸ¥é“å…³äºæˆ‘ä»¬çš„æ”¿åºœä¸»é¢˜çš„è®¨è®ºèŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ¥è·å– tweetï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">governmentTopicDiscussionByLocation = jsonResultTweets -&gt; transform</span><br><span class="line">&#123;location: $.location,user_id: $.from_user_id_str,date_created:</span><br><span class="line">$.created_at,comment:$text&#125; -&gt; group by key = $.location</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µå°†æ­¤ä¿¡æ¯å­˜å‚¨åˆ°æ‚¨çš„ HDFS ä¸­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">governmentTopicDiscussionByLocation Cnt -&gt;</span><br><span class="line">write(del(&quot;/user/governmentTopics/governmentTopic_1Tweets.del&quot;, schema =</span><br><span class="line">schema &#123; list_of_comma_seperated_json_fields&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä¸­çš„ list_of_comma_seperated_json_fields æ˜¯ä¸€äº›é€—å·åˆ†éš”çš„å­—æ®µï¼šlocationã€from_user_id_str å’Œ created_atã€‚<br>è¿™æ ·å°±å¯ä»¥é€šè¿‡ Oozie å·¥ä½œæµæ¥è¿è¡Œæ•´ä¸ª Jaql è„šæœ¬ï¼Œä»£ç å¯èƒ½ç±»ä¼¼äºä»¥ä¸‹ä»£ç ç¤ºä¾‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">url = &quot;https://stream.twitter.com/1.1/statuses/filter.json?track=governmentTopic&quot;; </span><br><span class="line"> jsonResultTweets = read(http(url));</span><br><span class="line">jsonResultTweets;</span><br><span class="line">governmentTopicDiscussionByLocation = jsonResultTweets -&gt; </span><br><span class="line">transform &#123;location: $.location,user_id: $.from_user_id_str,user_name:</span><br><span class="line">  $.user.name,user_location: $.user.location,date_created: $.created_at,comment: $.text&#125; -&gt; </span><br><span class="line">group by key = $.location </span><br><span class="line">governmentTopicDiscussionByLocation -&gt; </span><br><span class="line">write(del(&quot;/user/governmentTopics/governmentTopic_1Tweets.del&quot;, </span><br><span class="line">  schema = schema &#123;location,user_id,user_name,user_location,date_created,comment&#125;</span><br></pre></td></tr></table></figure></p>
<p>transform æ–¹æ³•å°†ä¼šæ¸…é™¤æ•°æ®ï¼Œè€Œ write æ–¹æ³•ä¼šå°†æ•°æ®ä¿å­˜åˆ° HDFSã€‚è¦å¤„ç†æµæ•°æ®æˆ–åŠ¨æ€æ•°æ®ï¼Œéœ€è¦å°†æ­¤è„šæœ¬ä¸ Flume æ•´åˆï¼ŒFlume æ˜¯ Apache Hadoop ç”Ÿæ€ç³»ç»Ÿä¸­çš„å¦ä¸€ä¸ªå¤§æ•°æ®å·¥å…·ã€‚ï¼ˆæ‚¨å¯ä»¥é€šè¿‡é˜…è¯»äº†è§£æœ‰å…³æ­¤ developerWorks æ–‡ç« ä¸­çš„ Flume çš„æ›´å¤šä¿¡æ¯ï¼Œâ€ä½¿ç”¨ Flume éƒ¨ç½²å’Œç®¡ç†å¯æ‰©å±•çš„ Web æœåŠ¡â€ã€‚ï¼‰<br>é€šè¿‡ä½¿ç”¨ R ä» Twitter ä¸­æ£€ç´¢æ•°æ®<br>è¦ä½¿ç”¨ R æ£€ç´¢ tweetï¼Œéœ€è¦åœ¨æ‚¨çš„ç³»ç»Ÿä¸Šå®‰è£…æŸäº›è½¯ä»¶åŒ…ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ RStudioï¼Œä½†ä¸‹é¢è¿™äº›æ­¥éª¤æ˜¾ç¤ºäº†å¦‚ä½•è®¾ç½®å’Œä½¿ç”¨ R æ§åˆ¶å°ã€‚<br>åœ¨ Ubuntu ç”µè„‘ä¸Šï¼Œæˆ‘å®Œæˆäº†ä¸‹é¢è¿™äº›æ­¥éª¤æ¥å®‰è£…å¿…è¦çš„ R è½¯ä»¶åŒ…ï¼š<br>å®‰è£…è¿™äº›è½¯ä»¶åŒ…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">libcurl4-gnutls-dev </span><br><span class="line">libcurl4-nss-dev </span><br><span class="line">libcurl4-openssl-dev </span><br><span class="line">r-base r-base-dev</span><br><span class="line">r-cran-rjson</span><br></pre></td></tr></table></figure></p>
<p>æ‰“å¼€ R æ§åˆ¶å°ï¼Œå¹¶è¿è¡Œè¿™äº›å‘½ä»¤æ¥å®‰è£…è¿™äº›åŒ…æ¥è®¿é—® Twitterï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">install.packages(â€œtwitteRâ€)</span><br><span class="line">install.packages(â€œROAuthâ€)</span><br><span class="line">install.packages(â€œRCurlâ€)</span><br></pre></td></tr></table></figure></p>
<p>å°†è¿™äº›åº“åŠ è½½åˆ°æ‚¨çš„ R å·¥ä½œåŒºä¸­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm(list=ls())</span><br><span class="line">library(twitteR)</span><br><span class="line">library(ROAuth)</span><br><span class="line">library(RCurl)</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ R è„šæœ¬å¯¹ Twitter è¿›è¡Œèº«ä»½éªŒè¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">download.file(url=&quot;http://curl.haxx.se/ca/cacert.pem&quot;,destfile=&quot;cacert.pem&quot;)</span><br><span class="line">requestURL &lt;- &quot;https://api.twitter.com/oauth/request_token&quot;</span><br><span class="line">accessURL &lt;- &quot;https://api.twitter.com/oauth/access_token&quot;</span><br><span class="line">authURL &lt;- &quot;https://api.twitter.com/oauth/authorize&quot;</span><br><span class="line">consumerKey &lt;- myConsumerKeyFromTwitter</span><br><span class="line">consumerSecret &lt;- myConsumerSeccretFromTwitter</span><br><span class="line">myCred &lt;- OAuthFactory$new(consumerKey=consumerKey,</span><br><span class="line">                             consumerSecret=consumerSecret,</span><br><span class="line">                             requestURL=requestURL,</span><br><span class="line">                             accessURL=accessURL,</span><br><span class="line">                             authURL=authURL)</span><br><span class="line"> </span><br><span class="line">accessToken &lt;- myAccessTokenFromTwitter</span><br><span class="line">accessSecret &lt;- myAccessSecretFromTwitter</span><br><span class="line"> </span><br><span class="line">setup_twitter_oauth(consumerKey,consumerSecret,accessToken,accessSecret)</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ¥è·å– tweetï¼š<br>govt_sentiment_data &lt;- searchTwitter(â€œ#keyWordâ€,since={last_date_pulled}<br>keyWord æ˜¯æ‚¨è¦åˆ†æçš„æ”¿åºœä¸»é¢˜ï¼Œlast_date_pulled æ˜¯æ‚¨æœ€åä¸€æ¬¡è·å– tweet çš„æ—¥æœŸã€‚<br>å¦‚æœæ‚¨æƒ³è¦æŒ‰å›ºå®šæ—¶é—´é—´éš”è‡ªåŠ¨æµåŒ– Twitter æ•°æ®å’Œæ‹‰å–æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ç‰‡æ®µæ›¿æ¢å‰é¢çš„ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">govt_sentiment_data &lt;- filterStream( file=&quot;tweets_rstats.json&quot;,</span><br><span class="line">track=&quot;#keyWord&quot;, timeout=3600, oauth=myCred)</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ R è„šæœ¬æ¥æ¸…ç†æ•°æ®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">govt_sentiment_data_txt = govt_sentiment_data$text</span><br><span class="line"># remove retweet entities</span><br><span class="line">govt_sentiment_data_txt = gsub(â€œ(RT|via)((?:\\b\\W*@\\w+)+)â€, â€œâ€, tweet_txt)</span><br><span class="line"># remove at people</span><br><span class="line">govt_sentiment_data_txt = gsub(â€œ@\\w+â€, â€œâ€, tweet_txt)</span><br><span class="line"># remove punctuation</span><br><span class="line">govt_sentiment_data_txt = gsub(â€œ[[:punct:]]â€, â€œâ€, tweet_txt)</span><br><span class="line"># remove numbers</span><br><span class="line">govt_sentiment_data_txt = gsub(â€œ[[:digit:]]â€, â€œâ€, tweet_txt)</span><br><span class="line"># remove html links</span><br><span class="line">govt_sentiment_data_txt = gsub(â€œhttp\\w+â€, â€œâ€, tweet_txt)</span><br><span class="line"># remove unnecessary spaces</span><br><span class="line">govt_sentiment_data_txt = gsub(â€œ[ \t]&#123;2,&#125;â€, â€œâ€, tweet_txt)</span><br><span class="line">govt_sentiment_data_txt = gsub(â€œ^\\s+|\\s+$â€, â€œâ€, tweet_txt)</span><br><span class="line">govt_sentiment_data_txt=gsub(â€œ[^0-9a-zA-Z ,./?&gt;&lt;:;â€™~`!@#&amp;*â€™]â€,â€â€, tweet_txt)</span><br></pre></td></tr></table></figure></p>
<p>æœ€åï¼Œè¦å°†å·²æ¸…ç†çš„æ•°æ®ä¿å­˜åˆ°æ‚¨çš„ HDFSï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hdfsFile &lt;- hdfs.file(&quot;/tmp/govt_sentiment_data.txt&quot;, &quot;w&quot;)</span><br><span class="line">hdfs.write(govt_sentiment_data_txt, hdfsFile)</span><br><span class="line">hdfs.close(hdfsFile)</span><br><span class="line">write(govt_sentiment_data, &quot;govt_sentiment_data.txt&quot;)</span><br></pre></td></tr></table></figure></p>
<p>ä» RSS æè¦æ£€ç´¢æ•°æ®<br>é™¤äº† tweet ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æƒ³ä»æ–°é—»æ–‡ç« ä¸­æ”¶é›†ä¸ªäººæ„è§æˆ–è§‚ç‚¹ã€‚å¯¹äºè¿™ç§ç±»å‹çš„æ•°æ®ï¼Œå»ºè®®æ‚¨ç»„åˆä½¿ç”¨ Java å’Œ Rome å·¥å…·ä» RSS æè¦ä¸­è·å–æ•°æ®ã€‚Rome æ˜¯ä¸€ä¸ª Java åº“ï¼Œç”¨äºè®¿é—®å’Œæ“çºµç½‘ç»œä¸Šçš„æ–°é—»æè¦ã€‚<br>åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è·å¾—äº†æœ‰å…³æ–°é—»æ–‡ç« çš„ä»¥ä¸‹ä¿¡æ¯ï¼šæ ‡é¢˜ã€é“¾æ¥å’Œæè¿°ã€‚ç„¶åï¼Œæˆ‘ä»¬ä»è¿™äº›æ•°æ®ç‚¹æå–æˆ‘ä»¬æ‰€éœ€çš„ä¿¡æ¯ã€‚<br>è¦ç¡®å®šå°†è¦ä½¿ç”¨çš„æ–°é—»æè¦ï¼Œéœ€è¦ä½¿ç”¨æŸç§å½¢å¼çš„ç½‘é¡µæ’å æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯è¢«ç”¨åœ¨æœç´¢ç®—æ³•ä¸­ï¼Œç”¨äºç¡®å®šæŸä¸€äº‹é¡¹åœ¨å…¶å¼•ç”¨å’Œæ™®åŠæ–¹é¢çš„ç›¸å…³æ€§ã€‚åŸºæœ¬åŸç†æ˜¯ï¼Œè¢«å¤–éƒ¨å®ä½“ç‚¹å‡»æˆ–å¼•ç”¨çš„å‡ ç‡è¶Šé«˜ï¼Œä¼˜å…ˆçº§å°±è¶Šé«˜ï¼Œå› æ­¤å°±ä¼šå‡ºç°åœ¨æœç´¢ç»“æœçš„é¡¶éƒ¨ã€‚<br>ä¸‹é¢çš„ Java ä»£ç æ ‡è¯†äº†ä¸€äº›æ–°é—»æè¦å’Œä½¿ç”¨ç½‘é¡µæ’åï¼Œä»¥ç¡®å®šå®ƒä»¬ä¸æˆ‘ä»¬çš„æ•°æ®ç›¸å…³ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">private static void getFeeds(String newsFeedUrlLink)&#123;</span><br><span class="line"> </span><br><span class="line">File f = new File(â€œnewsFeeds.txtâ€);</span><br><span class="line">        boolean ok = false;</span><br><span class="line">            try &#123;</span><br><span class="line">                URL feedUrl = new URL(newsFeedUrlLink);</span><br><span class="line">                SyndFeedInput input = new SyndFeedInput();</span><br><span class="line">                InputSource source = new InputSource(feedUrl.openStream());</span><br><span class="line">                SyndFeed feed = input.build(source);</span><br><span class="line">                for (Iterator i = feed.getEntries().iterator(); i.hasNext();) &#123;</span><br><span class="line">                   SyndEntry entry = (SyndEntry) i.next();</span><br><span class="line">         writeToFile(f,entry);</span><br><span class="line">                       &#125;</span><br><span class="line">                ok = true;</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">            catch (Exception ex) &#123;</span><br><span class="line">                ex.printStackTrace();</span><br><span class="line">                System.out.println(&quot;ERROR: &quot;+ex.getMessage());</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">        if (!ok) &#123;</span><br><span class="line">            System.out.println();</span><br><span class="line">            System.out.println(&quot;FeedReader reads and prints any RSS/Atom feed type.&quot;);</span><br><span class="line">            System.out.println(&quot;The first parameter must be the URL of the feed to read.&quot;);</span><br><span class="line">            System.out.println();</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">private static void writeToFile(File f, SyndEntry entry) throws IOException &#123;</span><br><span class="line">        FileWriter fw = new FileWriter(f.getName(),true);</span><br><span class="line">           BufferedWriter bw = new BufferedWriter(fw);</span><br><span class="line">           bw.write(entry.getTitle()+â€\nâ€);</span><br><span class="line">           bw.close();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µå°†æ•°æ®å­˜å‚¨åœ¨æˆ‘ä»¬ä½¿ç”¨ Twitter æ•°æ®åˆ›å»ºçš„ HDFS æ–‡ä»¶ä¸­ã€‚è¦å°†æ­¤æ•°æ®æ·»åŠ åˆ°æˆ‘ä»¬ä½¿ç”¨ Twitter æ•°æ®åˆ›å»ºçš„ HDFS æ–‡ä»¶ä¸­ï¼Œå¿…é¡»ä¿®æ”¹ hdfs-site.xml æ–‡ä»¶ä¸­çš„ dfs.support.append å±æ€§å€¼ï¼Œå› ä¸º HDFS é»˜è®¤æƒ…å†µä¸‹ä¸å…è®¸å°†æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mydata &lt;- readLines(&quot;newsFeeds.txt&quot;)</span><br><span class="line">myfile &lt;-  hdfs.file(&quot;/tmp/govt_sentiment_data.txt&quot;, &quot;r&quot;)</span><br><span class="line">dfserialized &lt;- hdfs.read(myfile)</span><br><span class="line">df &lt;- unserialize(dfserialized)</span><br><span class="line">hdfs.close(myfile)</span><br><span class="line"> </span><br><span class="line">//write(mydata, file = &quot;/tmp/govt_sentiment_data.txt&quot;,append = TRUE)</span><br><span class="line">hdfs.write(mydata, file = &quot;/tmp/govt_sentiment_data.txt&quot;,append = TRUE)</span><br><span class="line">government_sentiment_data &lt;- read.hdfs(â€œ/tmp/govt_sentiment_data.txtâ€)</span><br></pre></td></tr></table></figure></p>
<p>ä»ç§»åŠ¨åº”ç”¨ç¨‹åºä¸­æ£€ç´¢æ•°æ®<br>é™¤äº† Twitter æ•°æ®å’Œ RSS æè¦æ•°æ®ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä»åŒ…å«ä¸ªäººæ„è§å’Œè§‚ç‚¹çš„ç§»åŠ¨åº”ç”¨ç¨‹åºä¸­æ”¶é›†æ•°æ®ã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘å‡è®¾æ‚¨åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ç§»åŠ¨åº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºå·²å®‰è£…åœ¨å…è®¸ç”¨æˆ·æä¾›å…³äºæ”¿åºœä¸»é¢˜æˆ–æ”¿ç­–çš„æ„è§çš„ç§»åŠ¨è®¾å¤‡ä¸Šã€‚å¯ä»¥å°† J2ME åº”ç”¨ç¨‹åºä¸Šä¼ åˆ°æŸä¸ª WAP æœåŠ¡å™¨ï¼Œç§»åŠ¨è®¾å¤‡ï¼ˆç”šè‡³æ˜¯åƒè¯ºåŸºäºš 3310 è¿™æ ·çš„è€æ¬¾è®¾å¤‡ï¼‰å¯ä»¥ä»è¯¥æœåŠ¡å™¨ä¸‹è½½å’Œå®‰è£…åº”ç”¨ç¨‹åºã€‚ç”¨æˆ·æä¾›çš„ä¿¡æ¯è¢«å‘é€å›ä¸€ä¸ª RDBMS å¹¶è¿›è¡Œå‚¨å­˜ï¼Œä»¥ä¾›å°†æ¥åˆ†æä½¿ç”¨ã€‚<br>æ‚¨å¯ä»¥ä½¿ç”¨ Sqoop å°†æ•°æ®ä» RDBMS æœåŠ¡å™¨ç§»åŠ¨åˆ°æˆ‘ä»¬çš„ Hadoop é›†ç¾¤ã€‚åœ¨ Hadoop é›†ç¾¤ä¸Šè¿è¡Œ sqoop è„šæœ¬çš„ä»¥ä¸‹è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqoop import --options-file dbCredentials.txt --connect</span><br><span class="line">jdbc:mysql://217.8.156.117/govt_policy_app --table opinions â€“-target-dir /tmp \ --append</span><br></pre></td></tr></table></figure></p>
<p>â€“append æ ‡è®°å‘Šè¯‰ Sqoop å°†å¯¼å…¥çš„æ•°æ®æ·»åŠ åˆ°æˆ‘ä»¬å·²ç»ä»ä»¥å‰çš„æ•°æ®æ¥æºè·å¾—çš„æ•°æ®é›†ä¸­ï¼Œè¯¥æ•°æ®é›†é€šè¿‡ â€“target-dir æ ‡è®°æ¥æŒ‡ç¤ºã€‚<br>å°†å·²æ”¶é›†çš„æ•°æ®åˆå¹¶æˆä¸€ä¸ªæ•°æ®æº<br>åœ¨æ”¶é›†äº†æ¥è‡ª Twitter çš„æ•°æ®ï¼ˆé€šè¿‡ä½¿ç”¨ Jaql æˆ– Rï¼‰ã€æ¥è‡ª RSS æè¦çš„æ•°æ®ï¼ˆé€šè¿‡ä½¿ç”¨ Javaï¼‰å’Œæ¥è‡ªç§»åŠ¨åº”ç”¨ç¨‹åºçš„æ•°æ®ï¼ˆé€šè¿‡ä½¿ç”¨ Sqoopï¼‰åï¼Œæˆ‘ä»¬ä¼šå°†æ•°æ®æ·»åŠ åˆ°å•ä¸ª HDFS æ–‡ä»¶ä¸­ã€‚å¯ä»¥é€šè¿‡å®ç°äº† Oozie å·¥ä½œæµå¼•æ“æ¥è‡ªåŠ¨åŒ–è¿™äº›è„šæœ¬ï¼Œå¹¶è®¾ç½®å‘½ä»¤æ¥æŒ‰ç…§æŸä¸ªæ—¶é—´é—´éš”è¿è¡Œè„šæœ¬ï¼Œæˆ–è€…ä½œä¸ºè§¦å‘äº‹ä»¶å‘ç”Ÿçš„ç»“æœã€‚æœ‰å…³å¦‚ä½•è®¾ç½® Sqoop å’Œ Oozie çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘çš„å…¶ä»– developerWorks æ–‡ç« ï¼Œâ€å°† Hadoop ä¸ç°æœ‰çš„ RDBMS ç›¸é›†æˆâ€ã€‚<br>æ‚¨å¯ä»¥å¢å¼ºæ‚¨çš„ Oozie å·¥ä½œæµç¨‹ï¼Œä»¥ä¾¿å®ç°å‡å°‘é‡å¤æ•°æ®çš„é™åˆ¶ï¼Œé‡å¤æ•°æ®æ˜¯æ•´åˆæ¥è‡ªä¸åŒæ¥æºçš„æ•°æ®æ‰€å¯¼è‡´çš„ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½ä¼šé™åˆ¶æ¯ä¸ªè¯é¢˜ä¸€ä¸ª Twitter å¥æŸ„ï¼Œåœ¨æ‚¨çš„æ•°æ®é›†ä¸­ï¼Œæ¯ä¸ªè§‚ç‚¹ä¸€ä¸ªç§»åŠ¨å·ç ã€‚<br>åœ¨ç»„åˆæ•°æ®ä¸Šæ‰§è¡Œæƒ…æ„Ÿåˆ†æ<br>åœ¨ç»„åˆæ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å•ä¸ªæ•°æ®æºä¸Šå®Œæˆæƒ…æ„Ÿåˆ†æï¼Œè¿™ä½¿æˆ‘ä»¬å¯ä»¥è·å¾—åˆ†æçš„ç»Ÿä¸€æ€§ã€ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Rã€Jaqlã€Pig æˆ– Hive æ¥æ‰§è¡Œè¿™äº›åˆ†æã€‚Pig å’Œ Hive æ˜¯å…·æœ‰ç±»ä¼¼ SQL çš„è¯­æ³•çš„è¯­è¨€ï¼Œè¿è¡Œåœ¨ Hadoop å¹³å°ä¸Šã€‚æœ¬ä¾‹ä¸­ï¼Œæˆ‘å†³å®šç”¨ R æ¥åˆ†ææ£€ç´¢æ•°æ®ï¼Œå› ä¸º R å…·æœ‰ç”¨äºå›¾å½¢è¡¨ç¤ºçš„ä¸°å¯Œçš„å†…ç½®æ¨¡å‹å‡½æ•°å’Œåº“ï¼Œæ¯”å¦‚ ggplot2ã€‚<br>è¦å®Œæˆæƒ…æ„Ÿåˆ†æï¼Œéœ€è¦æœ‰ä¸€ä¸ªè¯å…¸æˆ–å•è¯åˆ—è¡¨ã€‚å­—å…¸åŒ…æ‹¬ä¸€ç»„æè¿°æŸä¸€èŒƒå›´å†…çš„ç§¯æè¯å’Œæ¶ˆæè¯çš„æ ‡å‡†å•è¯ã€‚è¯å…¸ç¡®å®šäº†ç¤¾äº¤åª’ä½“ä¸­å¸¸å¸¸ä½¿ç”¨çš„å˜²è®½è¯ã€å½±å°„è¯ã€ä¿šè¯­ã€æ–°è¯æ±‡ã€å­—ç¬¦å’Œè¡¨æƒ…ã€‚è¿™äº›è¯æ±‡åˆ—è¡¨å¯ä»äº’è”ç½‘ä¸Šè·å¾—ï¼Œå®šæœŸæ›´æ–°ï¼Œå¹¶æ•´åˆåˆ°æˆ‘ä»¬çš„æƒ…æ„Ÿåˆ†æé€»è¾‘ä¸­ã€‚<br>ä»¥ä¸‹ä»£ç åˆ©ç”¨äº†æ£€ç´¢åˆ°çš„æ•°æ®ï¼Œå¹¶å°†å®ƒä»¬ä¸æˆ‘ä»¬çš„å•è¯åˆ—è¡¨ç›¸åŒ¹é…ï¼Œä»¥è·å¾—ç§¯æè¯å’Œæ¶ˆæè¯çš„æ•°é‡ã€‚ç§¯æè¯å’Œæ¶ˆæè¯çš„æ€»æ•°å·®è·ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¾—åˆ†ï¼Œè¯¥å¾—åˆ†æŒ‡ç¤ºäº†æˆ‘ä»¬çš„æ•°æ®å¯¹äºæˆ‘ä»¬è¦åˆ†æçš„æ”¿åºœä¸»é¢˜æ˜¯ç§¯æçš„è¿˜æ˜¯æ¶ˆæçš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sentiment.pos=scan(&apos;/Users/charles/Downloads/r/positive-words.txt&apos;,what=&apos;character&apos;,comment.char=&apos;;&apos;)</span><br><span class="line">sentiment.neg=scan(&apos;/Users/charles/Downloads/r/negative-words.txt&apos;,what=&apos;character&apos;,comment.char=&apos;;&apos;)</span><br><span class="line">pos.words=c(sentiment.pos,&apos;good&apos;,&apos;reelect&apos;,&apos;accountable&apos;,&apos;stable&apos;)</span><br><span class="line">neg.words=c(sentiment.neg,&apos;bad&apos;,&apos;corrupt&apos;,&apos;greedy&apos;,&apos;unstable&apos;)</span><br></pre></td></tr></table></figure></p>
<p>æ­¤å¤–ï¼Œä»¥ä¸‹ä»£ç è¡¨ç¤ºäº†æƒ…æ„Ÿè¯„åˆ†ç®—æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">require(plyr)</span><br><span class="line">require(stringr)</span><br><span class="line">score.sentiment = function(sentences, pos.words, neg.words, .progress=&apos;none&apos;)</span><br><span class="line">&#123;</span><br><span class="line">sentence = tolower(sentence)</span><br><span class="line">word.list = str_split(sentence, &apos;\\s+&apos;)</span><br><span class="line">words = unlist(word.list)</span><br><span class="line">pos.matches = match(words, pos.words)</span><br><span class="line">neg.matches = match(words, neg.words)</span><br><span class="line">pos.matches = !is.na(pos.matches)</span><br><span class="line">neg.matches = !is.na(neg.matches)</span><br><span class="line">score = sum(pos.matches) - sum(neg.matches)</span><br><span class="line">return(score)</span><br><span class="line">&#125;, pos.words, neg.words, .progress=.progress )</span><br><span class="line">scores.df = data.frame(score=scores, text=sentences)</span><br><span class="line">return(scores.df)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼Œè°ƒç”¨æƒ…æ„Ÿå¾—åˆ†ç®—æ³•å‡½æ•°æ¥è®¡ç®—æ•°æ®çš„å¾—åˆ†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">require(plyr)</span><br><span class="line">opinion.score &lt;- score.sentiment(opinion.txt,pos.words,neg.words,progress=&apos;text&apos;)</span><br></pre></td></tr></table></figure></p>
<p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ R çš„å†…ç½®å›¾è¡¨å’Œå›¾å½¢åŠŸèƒ½ï¼Œå¯¹å¾—åˆ†æ•°æ®æ‰§è¡Œè¿›ä¸€æ­¥åˆ†æï¼Œå¹¶é€šè¿‡ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼Œç»˜åˆ¶ä¸€å¹…å›¾è¡¨æ¥æ˜¾ç¤ºåˆ†æ•°æ¡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">library(&quot;ggplot2&quot;)</span><br><span class="line">hist(opinion.scores$score)</span><br><span class="line">qplot(opinion.scores$score)</span><br></pre></td></tr></table></figure></p>
<p>æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ BigSheets è¿›ä¸€æ­¥åœ°åˆ†ææ•°æ®ï¼ŒBigSheets ç”± IBM InfoSphere BigInsights æä¾›ã€‚è¯¥å·¥å…·ä½¿å¾—éæŠ€æœ¯ç”¨æˆ·å¯ä»¥è¿›è¡Œå„ç§åˆ†æï¼Œå¹¶ç”¨å›¾è¡¨æŸ¥çœ‹æ•°æ®ã€‚æœ‰å…³å¦‚ä½•ä½¿ç”¨ BigSheets å·¥å…·çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯» developerWorks æ–‡ç«  â€œé€‚ç”¨äºæ™®é€šäººçš„ BigSheetsâ€ã€‚<br>ç»“æŸè¯­<br>å¤§æ•°æ®å·¥å…·å¯ä»¥æ ¹æ®æ¥è‡ªä»»ä½•æ¥æºæˆ–ç©ºé—´çš„æ•°æ®ï¼Œæä¾›ä¸å¸¦åè§çš„æ´å¯Ÿï¼Œä»è€Œåˆ¶å®šæ­£ç¡®çš„ã€å‡†ç¡®çš„å†³ç­–ï¼Œå¹¶å®æ–½è¿™äº›å†³ç­–ã€‚é€šè¿‡é‡‡ç”¨å¤§æ•°æ®å·¥å…·ï¼Œæ¯”å¦‚æœ¬æ–‡ä¸­æ‰€æè¿°çš„é‚£äº›å·¥å…·ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°å®ç°è‡ªå·±çš„æŠ•èµ„å›æŠ¥ã€‚</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æƒ…æ„Ÿæ•°æ®åˆ†æ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[é‡‘èè¡Œä¸šå¤§æ•°æ®ç”¨æˆ·ç”»åƒå®è·µ]]></title>
      <url>/%E9%87%91%E8%9E%8D%E8%A1%8C%E4%B8%9A%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%94%A8%E6%88%B7%E7%94%BB%E5%83%8F%E5%AE%9E%E8%B7%B5.html</url>
      <content type="html"><![CDATA[<p><strong>é‡‘èæ¶ˆè´¹è€…é€æ¸å¹´è½»åŒ–ï¼Œ80ã€90åæˆä¸ºå®¢æˆ·ä¸»åŠ›ï¼Œä»–ä»¬çš„æ¶ˆè´¹æ„è¯†å’Œé‡‘èæ„è¯†æ­£åœ¨å¢å¼ºã€‚é‡‘èæœåŠ¡æ­£åœ¨ä»ä»¥äº§å“ä¸ºä¸­å¿ƒï¼Œè½¬å‘ä»¥æ¶ˆè´¹è€…ä¸ºä¸­å¿ƒã€‚æ‰€æœ‰é‡‘èè¡Œä¸šé¢å¯¹çš„æœ€å¤§æŒ‘æˆ˜æ˜¯æ¶ˆè´¹è€…çš„æ¶ˆè´¹è¡Œä¸ºå’Œæ¶ˆè´¹éœ€æ±‚çš„è½¬å˜ï¼Œé‡‘èä¼ä¸šè¿«åˆ‡éœ€è¦ä¸ºäº§å“å¯»æ‰¾ç›®æ ‡å®¢æˆ·å’Œä¸ºå®¢æˆ·å®šåˆ¶äº§å“ã€‚</strong><br>è¿›å…¥ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ä¹‹åï¼Œé‡‘èä¸šåŠ¡åœ°åŸŸé™åˆ¶è¢«æ‰“ç ´ã€‚é‡‘èä¼ä¸šæ²¡æœ‰å›ºå®šä¸šåŠ¡åŒºåŸŸï¼Œé‡‘èæœåŠ¡é¢å¯¹æ‰€æœ‰ç”¨æˆ·æ˜¯å¹³çš„ã€‚<br>é‡‘èæ¶ˆè´¹è€…é€æ¸å¹´è½»åŒ–ï¼Œ80ã€90åæˆä¸ºå®¢æˆ·ä¸»åŠ›ï¼Œä»–ä»¬çš„æ¶ˆè´¹æ„è¯†å’Œé‡‘èæ„è¯†æ­£åœ¨å¢å¼ºã€‚é‡‘èæœåŠ¡æ­£åœ¨ä»ä»¥äº§å“ä¸ºä¸­å¿ƒï¼Œè½¬å‘ä»¥æ¶ˆè´¹è€…ä¸ºä¸­å¿ƒã€‚æ‰€æœ‰é‡‘èè¡Œä¸šé¢å¯¹çš„æœ€å¤§æŒ‘æˆ˜æ˜¯æ¶ˆè´¹è€…çš„æ¶ˆè´¹è¡Œä¸ºå’Œæ¶ˆè´¹éœ€æ±‚çš„è½¬å˜ï¼Œé‡‘èä¼ä¸šè¿«åˆ‡éœ€è¦ä¸ºäº§å“å¯»æ‰¾ç›®æ ‡å®¢æˆ·å’Œä¸ºå®¢æˆ·å®šåˆ¶äº§å“ã€‚<br><a id="more"></a></p>
<h2 id="ä¸€ã€ç”¨æˆ·ç”»åƒèƒŒåçš„åŸå› "><a href="#ä¸€ã€ç”¨æˆ·ç”»åƒèƒŒåçš„åŸå› " class="headerlink" title="ä¸€ã€ç”¨æˆ·ç”»åƒèƒŒåçš„åŸå› "></a>ä¸€ã€ç”¨æˆ·ç”»åƒèƒŒåçš„åŸå› </h2><h3 id="1ã€é‡‘èæ¶ˆè´¹è¡Œä¸ºçš„æ”¹å˜ï¼Œä¼ä¸šæ— æ³•æ¥è§¦åˆ°å®¢æˆ·"><a href="#1ã€é‡‘èæ¶ˆè´¹è¡Œä¸ºçš„æ”¹å˜ï¼Œä¼ä¸šæ— æ³•æ¥è§¦åˆ°å®¢æˆ·" class="headerlink" title="1ã€é‡‘èæ¶ˆè´¹è¡Œä¸ºçš„æ”¹å˜ï¼Œä¼ä¸šæ— æ³•æ¥è§¦åˆ°å®¢æˆ·"></a>1ã€é‡‘èæ¶ˆè´¹è¡Œä¸ºçš„æ”¹å˜ï¼Œä¼ä¸šæ— æ³•æ¥è§¦åˆ°å®¢æˆ·</h3><p>80åã€90åæ€»è®¡å…±æœ‰3.4äº¿äººå£ï¼Œå¹¶æ—¥ç›Šæˆä¸ºé‡‘èä¼ä¸šä¸»è¦çš„æ¶ˆè´¹è€…ï¼Œä½†æ˜¯ä»–ä»¬çš„é‡‘èæ¶ˆè´¹ä¹ æƒ¯æ­£åœ¨æ”¹å˜ï¼Œä»–ä»¬ä¸æ„¿æ„åˆ°é‡‘èç½‘ç‚¹åŠç†ä¸šåŠ¡ï¼Œä¸å–œæ¬¢è¢«åŠ¨æ¥å—é‡‘èäº§å“å’ŒæœåŠ¡ã€‚å¹´è½»äººå°†ä¸»è¦çš„æ—¶é—´éƒ½æ¶ˆè´¹åœ¨ç§»åŠ¨äº’è”ç½‘ï¼Œæ¶ˆè´¹åœ¨æ™ºèƒ½æ‰‹æœºä¸Šã€‚å¹³å‡æ¯ä¸ªäººï¼Œæ¯å¤©ä½¿ç”¨æ™ºèƒ½æ‰‹æœºçš„æ—¶é—´è¶…è¿‡äº†3å°æ—¶ï¼Œå¹´è½»äººå¯èƒ½ä¼šè¶…è¿‡4ä¸ªå°æ—¶ã€‚æµè§ˆæ‰‹æœºå·²ç»æˆä¸ºå·¥ä½œå’Œç¡è§‰ä¹‹åçš„ï¼Œäººç±»ç¬¬ä¸‰å¤§ç”Ÿæ´»ä¹ æƒ¯ï¼Œç§»åŠ¨APPä¹Ÿæˆä¸ºæ‰€æœ‰é‡‘èä¼ä¸šçš„å®¢æˆ·å…¥å£ã€æœåŠ¡å…¥å£ã€æ¶ˆè´¹å…¥å£ã€æ•°æ®å…¥å£ã€‚<br>é‡‘èä¼ä¸šè¶Šæ¥è¶Šéš¾é¢å¯¹é¢æ¥è§¦åˆ°å¹´è½»äººï¼Œæ— æ³•åƒè¿‡å»ä¸€æ ·ï¼Œä»å¯¹è¯ä¸­äº†è§£å¹´è½»äººçš„æƒ³æ³•ï¼Œäº†è§£å¹´è½»äººé‡‘èäº§å“çš„éœ€æ±‚ã€‚</p>
<h3 id="2ã€æ¶ˆè´¹è€…éœ€æ±‚å‡ºç°åˆ†åŒ–ï¼Œéœ€è¦å¯»æ‰¾ç›®æ ‡å®¢æˆ·"><a href="#2ã€æ¶ˆè´¹è€…éœ€æ±‚å‡ºç°åˆ†åŒ–ï¼Œéœ€è¦å¯»æ‰¾ç›®æ ‡å®¢æˆ·" class="headerlink" title="2ã€æ¶ˆè´¹è€…éœ€æ±‚å‡ºç°åˆ†åŒ–ï¼Œéœ€è¦å¯»æ‰¾ç›®æ ‡å®¢æˆ·"></a>2ã€æ¶ˆè´¹è€…éœ€æ±‚å‡ºç°åˆ†åŒ–ï¼Œéœ€è¦å¯»æ‰¾ç›®æ ‡å®¢æˆ·</h3><p>å®¢æˆ·ç¾¤ä½“æ­£åœ¨å‡ºç°åˆ†åŒ–ï¼Œå¸‚åœºä¸Šå¾ˆå°‘æœ‰ä¸€ç§äº§å“å’Œä¸€ç§é‡‘èæœåŠ¡å¯ä»¥æ»¡è¶³æ‰€æœ‰ç”¨æˆ·çš„éœ€æ±‚ã€‚é‡‘èäº§å“ä¹Ÿéœ€è¦è¿›è¡Œç»†åŒ–ï¼Œä¸ºä¸åŒå®¢æˆ·æä¾›ä¸åŒäº§å“ã€‚<br>é‡‘èä¼ä¸šé¢å¯¹çš„å®¢æˆ·ç¾¤ä½“åŸºæ•°å¾ˆå¤§ï¼Œæœ‰çš„å®¢æˆ·é«˜é£é™©åå¥½é«˜ï¼Œå¸Œæœ›é«˜é£é™©é«˜æ”¶ç›Š;æœ‰çš„å®¢æˆ·é£é™©åå¥½ä½ï¼Œå¸Œæœ›ç¨³å¥æ”¶ç›Š;æœ‰çš„å®¢æˆ·é‡‘èç†è´¢æ„è¯†ä½ï¼Œåªéœ€æœåŠ¡è¾ƒå¥½å³å¯;æœ‰çš„å®¢æˆ·å®Œå…¨æ²¡æœ‰ä¸»æ„ï¼Œä½ è¯´æ˜¯å•¥å°±æ˜¯å•¥;æœ‰çš„å®¢æˆ·æ³¨é‡ä½“éªŒï¼Œæœ‰çš„å®¢æˆ·æ³¨é‡å®æƒ ï¼Œæœ‰çš„å®¢æˆ·æ³¨é‡å“ç‰Œï¼Œæœ‰çš„å®¢æˆ·æ³¨é‡é£é™©ç­‰ç­‰ã€‚ä¸åŒå¹´é¾„ï¼Œä¸åŒæ”¶å…¥ï¼Œä¸åŒèŒä¸šï¼Œä¸åŒèµ„äº§çš„å®¢æˆ·å¯¹é‡‘èäº§å“çš„éœ€æ±‚éƒ½ä¸å°½ç›¸åŒã€‚é‡‘èä¼ä¸šéœ€è¦ä¸ºä¸åŒçš„å®¢æˆ·å®šåˆ¶äº§å“ï¼Œæ»¡è¶³ä¸åŒå®¢æˆ·çš„éœ€è¦ã€‚å¯¹äºé‡‘èä¼ä¸šï¼Œç†è´¢å’Œæ¶ˆè´¹æ˜¯ä¸»è¦çš„ä¸šåŠ¡éœ€æ±‚ã€‚<br>å®¢æˆ·æ¶ˆè´¹ä¹ æƒ¯çš„æ”¹å˜ï¼Œä¼ä¸šæ— æ³•æ¥è§¦åˆ°å®¢æˆ·ï¼Œæ— æ³•äº†è§£å®¢æˆ·éœ€æ±‚;<br>å®¢æˆ·éœ€æ±‚çš„åˆ†åŒ–ï¼Œä¼ä¸šéœ€è¦ç»†åˆ†å®¢æˆ·ï¼Œä¸ºç›®æ ‡å®¢æˆ·å¼€å‘è®¾è®¡äº§å“ã€‚<br>é‡‘èä¼ä¸šéœ€è¦å€ŸåŠ©äºæˆ·ç”»åƒï¼Œæ¥äº†è§£å®¢æˆ·ï¼Œæ‰¾åˆ°ç›®æ ‡å®¢æˆ·ï¼Œè§¦è¾¾å®¢æˆ·ã€‚</p>
<h2 id="äºŒã€ç”¨æˆ·ç”»åƒçš„ç›®çš„"><a href="#äºŒã€ç”¨æˆ·ç”»åƒçš„ç›®çš„" class="headerlink" title="äºŒã€ç”¨æˆ·ç”»åƒçš„ç›®çš„"></a>äºŒã€ç”¨æˆ·ç”»åƒçš„ç›®çš„</h2><p>ç”¨æˆ·ç”»åƒæ˜¯åœ¨è§£å®¢æˆ·éœ€æ±‚å’Œæ¶ˆè´¹èƒ½åŠ›ï¼Œä»¥åŠå®¢æˆ·ä¿¡ç”¨é¢åº¦çš„åŸºç¡€ä¸Šï¼Œå¯»æ‰¾æ½œåœ¨äº§å“çš„ç›®æ ‡å®¢æˆ·ï¼Œå¹¶åˆ©ç”¨ç”»åƒä¿¡æ¯ä¸ºå®¢æˆ·å¼€å‘äº§å“ã€‚<br>æåˆ°ç”¨æˆ·ç”»åƒï¼Œå¾ˆå¤šå‚å•†éƒ½ä¼šæåˆ°360åº¦ç”¨æˆ·ç”»åƒï¼Œå…¶å®ç»å¸¸360åº¦å®¢æˆ·ç”»åƒæ˜¯ä¸€ä¸ªå¹¿å‘Šå®£ä¼ ç”¨è¯­ï¼Œæ ¹æœ¬ä¸å­˜æ•°æ®å¯ä»¥å…¨é¢æè¿°å®¢æˆ·ï¼Œé€å½»äº†è§£å®¢æˆ·ã€‚äººæ˜¯éå¸¸å¤æ‚çš„åŠ¨ç‰©ï¼Œä¿¡æ¯çº¬åº¦éå¸¸å¤æ‚ï¼Œä»…ä»…ä¾é å¤–éƒ¨ä¿¡æ¯æ¥åˆ»ç”»å®¢æˆ·å†…å¿ƒéœ€è¦æ ¹æœ¬ä¸å¯èƒ½ã€‚<br>ç”¨æˆ·ç”»åƒä¸€è¯å…·æœ‰å¾ˆé‡çš„åœºæ™¯å› ç´ ï¼Œä¸åŒä¼ä¸šå¯¹äºç”¨æˆ·ç”»åƒæœ‰ç€ä¸åŒå¯¹ç†è§£å’Œéœ€æ±‚ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œé‡‘èè¡Œä¸šå’Œæ±½è½¦è¡Œä¸šå¯¹äºç”¨æˆ·ç”»åƒéœ€æ±‚çš„ä¿¡æ¯å®Œå…¨ä¸ä¸€æ ·ï¼Œä¿¡æ¯çº¬åº¦ä¹Ÿä¸åŒï¼Œå¯¹ç”»åƒç»“æœè¦æ±‚ä¹Ÿä¸åŒã€‚æ¯ä¸ªè¡Œä¸šéƒ½æœ‰ä¸€å¥—é€‚åˆè‡ªå·±è¡Œä¸šçš„ç”¨æˆ·ç”»åƒæ–¹æ³•ï¼Œä½†æ˜¯å…¶æ ¸å¿ƒéƒ½æ˜¯ä¸ºå®¢æˆ·æœåŠ¡ï¼Œä¸ºä¸šåŠ¡åœºæ™¯æœåŠ¡ã€‚<br>ç”¨æˆ·ç”»åƒæœ¬è´¨å°±æ˜¯ä»ä¸šåŠ¡è§’åº¦å‡ºå‘å¯¹ç”¨æˆ·è¿›è¡Œåˆ†æï¼Œäº†è§£ç”¨æˆ·éœ€æ±‚ï¼Œå¯»æ‰¾ç›®æ ‡å®¢æˆ·ã€‚å¦å¤–ä¸€ä¸ªæ–¹é¢å°±æ˜¯ï¼Œé‡‘èä¼ä¸šåˆ©ç”¨ç»Ÿè®¡çš„ä¿¡æ¯ï¼Œå¼€å‘å‡ºé€‚åˆç›®æ ‡å®¢æˆ·çš„äº§å“ã€‚<br>ä»å•†ä¸šè§’åº¦å‡ºå‘çš„ç”¨æˆ·ç”»åƒå¯¹ä¼ä¸šå…·æœ‰å¾ˆå¤§çš„ä»·å€¼ï¼Œç”¨æˆ·ç”»åƒç›®çš„æœ‰ä¸¤ä¸ªã€‚<br>ä¸€ä¸ªæ˜¯ä¸šåŠ¡åœºæ™¯å‡ºå‘ï¼Œå¯»æ‰¾ç›®æ ‡å®¢æˆ·ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯ï¼Œå‚è€ƒç”¨æˆ·ç”»åƒçš„ä¿¡æ¯ï¼Œä¸ºç”¨æˆ·è®¾è®¡äº§å“æˆ–å¼€å±•è¥é”€æ´»åŠ¨ã€‚</p>
<h2 id="ä¸‰ã€ç”¨æˆ·ç”»åƒå·¥ä½œåšæŒçš„åŸåˆ™"><a href="#ä¸‰ã€ç”¨æˆ·ç”»åƒå·¥ä½œåšæŒçš„åŸåˆ™" class="headerlink" title="ä¸‰ã€ç”¨æˆ·ç”»åƒå·¥ä½œåšæŒçš„åŸåˆ™"></a>ä¸‰ã€ç”¨æˆ·ç”»åƒå·¥ä½œåšæŒçš„åŸåˆ™</h2><p>å¸‚åœºä¸Šç”¨æˆ·ç”»åƒçš„æ–¹æ³•å¾ˆå¤šï¼Œè®¸å¤šä¼ä¸šä¹Ÿæä¾›ç”¨æˆ·ç”»åƒæœåŠ¡ï¼Œå°†ç”¨æˆ·ç”»åƒæå‡åˆ°å¾ˆæœ‰é€¼æ ¼ä¸€ä»¶äº‹ã€‚é‡‘èä¼ä¸šæ˜¯æœ€æ—©å¼€å§‹ç”¨æˆ·ç”»åƒçš„è¡Œä¸šï¼Œç”±äºæ‹¥æœ‰ä¸°å¯Œçš„æ•°æ®ï¼Œé‡‘èä¼ä¸šåœ¨è¿›è¡Œç”¨æˆ·ç”»åƒæ—¶ï¼Œå¯¹ä¼—å¤šçº¬åº¦çš„æ•°æ®æ— ä»ä¸‹æ‰‹ï¼Œæ€»æ˜¯è®¤ä¸ºç”¨æˆ·ç”»åƒæ•°æ®çº¬åº¦è¶Šå¤šè¶Šå¥½ï¼Œç”»åƒæ•°æ®è¶Šä¸°å¯Œè¶Šå¥½ï¼ŒæŸäº›è¾“å…¥çš„æ•°æ®è¿˜è®¾å®šäº†æƒé‡ç”šè‡³å»ºç«‹äº†æ¨¡å‹ï¼Œæçš„ç”¨æˆ·ç”»åƒæ˜¯ä¸€ä¸ªå·¨å¤§è€Œè´Ÿè´£çš„å·¥ç¨‹ã€‚ä½†æ˜¯è´¹åŠ›å¾ˆå¤§åŠ›æ°”è¿›è¡Œäº†ç”»åƒä¹‹åï¼Œå´å‘ç°åªå‰©ä¸‹äº†ç”¨æˆ·ç”»åƒï¼Œå’Œä¸šåŠ¡ç›¸èšç”šè¿œï¼Œæ²¡æœ‰åŠæ³•ç›´æ¥æ”¯æŒä¸šåŠ¡è¿è¥ï¼ŒæŠ•å…¥ç²¾åŠ›å·¨å¤§ä½†æ˜¯å›æŠ¥å¾®å°ï¼Œå¯ä»¥è¯´æ˜¯å¾—ä¸å¿å¤±ï¼Œæ— æ³•å‘é¢†å¯¼äº¤ä»£ã€‚<br>äº‹å®ä¸Šï¼Œç”¨æˆ·ç”»åƒæ¶‰åŠæ•°æ®çš„çº¬åº¦éœ€è¦ä¸šåŠ¡åœºæ™¯ç»“åˆï¼Œæ—¢è¦ç®€å•å¹²ç»ƒåˆè¦å’Œä¸šåŠ¡å¼ºç›¸å…³ï¼Œæ—¢è¦ç­›é€‰ä¾¿æ·åˆè¦æ–¹ä¾¿è¿›ä¸€æ­¥æ“ä½œã€‚ç”¨æˆ·ç”»åƒéœ€è¦åšæŒä¸‰ä¸ªåŸåˆ™ï¼Œåˆ†åˆ«æ˜¯äººå£å±æ€§å’Œä¿¡ç”¨ä¿¡æ¯ä¸ºä¸»ï¼Œå¼ºç›¸å…³ä¿¡æ¯ä¸ºä¸»ï¼Œå®šæ€§æ•°æ®ä¸ºä¸»ã€‚ä¸‹é¢å°±åˆ†åˆ«å±•å¼€è¿›è¡Œè§£é‡Šå’Œåˆ†æã€‚</p>
<h3 id="1ã€ä¿¡ç”¨ä¿¡æ¯å’Œäººå£å±æ€§ä¸ºä¸»"><a href="#1ã€ä¿¡ç”¨ä¿¡æ¯å’Œäººå£å±æ€§ä¸ºä¸»" class="headerlink" title="1ã€ä¿¡ç”¨ä¿¡æ¯å’Œäººå£å±æ€§ä¸ºä¸»"></a>1ã€ä¿¡ç”¨ä¿¡æ¯å’Œäººå£å±æ€§ä¸ºä¸»</h3><p>æè¿°ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯å¾ˆå¤šï¼Œä¿¡ç”¨ä¿¡æ¯æ˜¯ç”¨æˆ·ç”»åƒä¸­é‡è¦çš„ä¿¡æ¯ï¼Œä¿¡ç”¨ä¿¡æ¯æ˜¯æè¿°ä¸€ä¸ªäººåœ¨ç¤¾ä¼šä¸­çš„æ¶ˆè´¹èƒ½åŠ›ä¿¡æ¯ã€‚ä»»ä½•ä¼ä¸šè¿›è¡Œç”¨æˆ·ç”»åƒçš„ç›®çš„æ˜¯å¯»æ‰¾ç›®æ ‡å®¢æˆ·ï¼Œå…¶å¿…é¡»æ˜¯å…·æœ‰æ½œåœ¨æ¶ˆè´¹èƒ½åŠ›çš„ç”¨æˆ·ã€‚ä¿¡ç”¨ä¿¡æ¯å¯ä»¥ç›´æ¥è¯æ˜å®¢æˆ·çš„æ¶ˆè´¹èƒ½åŠ›ï¼Œæ˜¯ç”¨æˆ·ç”»åƒä¸­æœ€é‡è¦å’ŒåŸºç¡€çš„ä¿¡æ¯ã€‚ä¸€å¥æˆè¨€ï¼Œæ‰€æœ‰çš„ä¿¡æ¯éƒ½æ˜¯ä¿¡ç”¨ä¿¡æ¯å°±æ˜¯è¿™ä¸ªé“ç†ã€‚å…¶åŒ…å«æ¶ˆè´¹è€…å·¥ä½œã€æ”¶å…¥ã€å­¦å†ã€è´¢äº§ç­‰ä¿¡æ¯ã€‚<br>å®šä½å®Œç›®æ ‡å®¢æˆ·ä¹‹åï¼Œé‡‘èä¼ä¸šéœ€è¦è§¦è¾¾å®¢æˆ·ï¼Œäººå£å±æ€§ä¿¡æ¯å°±æ˜¯èµ·åˆ°è§¦è¾¾å®¢æˆ·çš„ä½œç”¨ï¼Œäººå£å±æ€§ä¿¡æ¯åŒ…å«å§“åã€æ€§åˆ«ï¼Œç”µè¯å·ç ï¼Œé‚®ä»¶åœ°å€ï¼Œå®¶åº­ä½å€ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å¯ä»¥å¸®åŠ©é‡‘èä¼ä¸šè”ç³»å®¢æˆ·ï¼Œå°†äº§å“å’ŒæœåŠ¡æ¨é”€ç»™å®¢æˆ·ã€‚</p>
<h3 id="2ã€é‡‡ç”¨å¼ºç›¸å…³ä¿¡æ¯ï¼Œå¿½ç•¥å¼±ç›¸å…³ä¿¡æ¯"><a href="#2ã€é‡‡ç”¨å¼ºç›¸å…³ä¿¡æ¯ï¼Œå¿½ç•¥å¼±ç›¸å…³ä¿¡æ¯" class="headerlink" title="2ã€é‡‡ç”¨å¼ºç›¸å…³ä¿¡æ¯ï¼Œå¿½ç•¥å¼±ç›¸å…³ä¿¡æ¯"></a>2ã€é‡‡ç”¨å¼ºç›¸å…³ä¿¡æ¯ï¼Œå¿½ç•¥å¼±ç›¸å…³ä¿¡æ¯</h3><p>æˆ‘ä»¬éœ€è¦ä»‹ç»ä¸€ä¸‹å¼ºç›¸å…³ä¿¡æ¯å’Œå¼±ç›¸å…³ä¿¡æ¯ã€‚å¼ºç›¸å…³ä¿¡æ¯å°±æ˜¯åŒåœºæ™¯éœ€æ±‚ç›´æ¥ç›¸å…³çš„ä¿¡æ¯ï¼Œå…¶å¯ä»¥æ˜¯å› æœä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å…³ç¨‹åº¦å¾ˆé«˜çš„ä¿¡æ¯ã€‚<br>å¦‚æœå®šä¹‰é‡‡ç”¨0åˆ°1ä½œä¸ºç›¸å…³ç³»æ•°å–å€¼èŒƒå›´çš„åŒ–ï¼Œ0.6ä»¥ä¸Šçš„ç›¸å…³ç³»æ•°å°±åº”è¯¥å®šä¹‰ä¸ºå¼ºç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚åœ¨å…¶ä»–æ¡ä»¶ç›¸åŒçš„å‰æä¸‹ï¼Œ35å²å·¦å³äººçš„å¹³å‡å·¥èµ„é«˜äºå¹³å‡å¹´é¾„ä¸º30å²çš„äººï¼Œè®¡ç®—æœºä¸“ä¸šæ¯•ä¸šçš„å­¦ç”Ÿå¹³å‡å·¥èµ„é«˜äºå“²å­¦ä¸“ä¸šå­¦ç”Ÿï¼Œä»äº‹é‡‘èè¡Œä¸šå·¥ä½œçš„å¹³å‡å·¥èµ„é«˜äºä»äº‹çººç»‡è¡Œä¸šçš„å¹³å‡å·¥èµ„ï¼Œä¸Šæµ·çš„å¹³å‡å·¥èµ„è¶…è¿‡æµ·å—çœå¹³å‡å·¥èµ„ã€‚ä»è¿™äº›ä¿¡æ¯å¯ä»¥çœ‹å‡ºæ¥äººçš„å¹´é¾„ã€å­¦å†ã€èŒä¸šã€åœ°ç‚¹å¯¹æ”¶å…¥çš„å½±å“è¾ƒå¤§ï¼ŒåŒæ”¶å…¥é«˜ä½æ˜¯å¼ºç›¸å…³å…³ç³»ã€‚ç®€å•çš„å°†ï¼Œå¯¹ä¿¡ç”¨ä¿¡æ¯å½±å“è¾ƒå¤§çš„ä¿¡æ¯å°±æ˜¯å¼ºç›¸å…³ä¿¡æ¯ï¼Œåä¹‹åˆ™æ˜¯å¼±ç›¸å…³ä¿¡æ¯ã€‚<br>ç”¨æˆ·å…¶ä»–çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·çš„èº«é«˜ã€ä½“é‡ã€å§“åã€æ˜Ÿåº§ç­‰ä¿¡æ¯ï¼Œå¾ˆéš¾ä»æ¦‚ç‡ä¸Šåˆ†æå‡ºå…¶å¯¹æ¶ˆè´¹èƒ½åŠ›çš„å½±å“ï¼Œè¿™äº›å¼±ç›¸å…³ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å°±ä¸åº”è¯¥æ”¾åˆ°ç”¨æˆ·ç”»åƒä¸­è¿›è¡Œåˆ†æï¼Œå¯¹ç”¨æˆ·çš„ä¿¡ç”¨æ¶ˆè´¹èƒ½åŠ›å½±å“å¾ˆå°ï¼Œä¸å…·æœ‰è¾ƒå¤§çš„å•†ä¸šä»·å€¼ã€‚<br>ç”¨æˆ·ç”»åƒå’Œç”¨æˆ·åˆ†ææ—¶ï¼Œéœ€è¦è€ƒè™‘å¼ºç›¸å…³ä¿¡æ¯ï¼Œä¸è¦è€ƒè™‘å¼±ç›¸å…³ä¿¡æ¯ï¼Œè¿™æ˜¯ç”¨æˆ·ç”»åƒçš„ä¸€ä¸ªåŸåˆ™ã€‚</p>
<h3 id="3ã€å°†å®šé‡çš„ä¿¡æ¯å½’ç±»ä¸ºå®šæ€§çš„ä¿¡æ¯"><a href="#3ã€å°†å®šé‡çš„ä¿¡æ¯å½’ç±»ä¸ºå®šæ€§çš„ä¿¡æ¯" class="headerlink" title="3ã€å°†å®šé‡çš„ä¿¡æ¯å½’ç±»ä¸ºå®šæ€§çš„ä¿¡æ¯"></a>3ã€å°†å®šé‡çš„ä¿¡æ¯å½’ç±»ä¸ºå®šæ€§çš„ä¿¡æ¯</h3><p>ç”¨æˆ·ç”»åƒçš„ç›®çš„æ˜¯ä¸ºäº§å“ç­›é€‰å‡ºç›®æ ‡å®¢æˆ·ï¼Œå®šé‡çš„ä¿¡æ¯ä¸åˆ©äºå¯¹å®¢æˆ·è¿›è¡Œç­›é€‰ï¼Œéœ€è¦å°†å®šé‡ä¿¡æ¯è½¬åŒ–ä¸ºå®šæ€§ä¿¡æ¯ï¼Œé€šè¿‡ä¿¡æ¯ç±»åˆ«æ¥ç­›é€‰äººç¾¤ã€‚<br>ä¾‹å¦‚å¯ä»¥å°†å¹´é¾„æ®µå¯¹å®¢æˆ·è¿›è¡Œåˆ’åˆ†ï¼Œ18å²-25å²å®šä¹‰ä¸ºå¹´è½»äººï¼Œ25å²-35å²å®šä¹‰ä¸ºä¸­é’å¹´ï¼Œ36-45å®šä¹‰ä¸ºä¸­å¹´äººç­‰ã€‚å¯ä»¥å‚è€ƒä¸ªäººæ”¶å…¥ä¿¡æ¯ï¼Œå°†äººç¾¤å®šä¹‰ä¸ºé«˜æ”¶å…¥äººç¾¤ï¼Œä¸­ç­‰æ”¶å…¥äººç¾¤ï¼Œä½æ”¶å…¥äººç¾¤ã€‚å‚è€ƒèµ„äº§ä¿¡æ¯ä¹Ÿå¯ä»¥å°†å®¢æˆ·å®šä¹‰ä¸ºé«˜ã€ä¸­ã€ä½çº§åˆ«ã€‚å®šæ€§ä¿¡æ¯çš„ç±»åˆ«å’Œæ–¹å¼æ–¹æ³•ï¼Œé‡‘èå¯ä»¥ä»è‡ªèº«ä¸šåŠ¡å‡ºå‘ï¼Œæ²¡æœ‰å›ºå®šçš„æ¨¡å¼ã€‚<br>å°†é‡‘èä¼ä¸šå„ç±»å®šé‡ä¿¡æ¯ï¼Œé›†ä¸­åœ¨ä¸€èµ·ï¼Œå¯¹å®šæ€§ä¿¡æ¯è¿›è¡Œåˆ†ç±»ï¼Œå¹¶è¿›è¡Œå®šæ€§åŒ–ï¼Œæœ‰åˆ©ä¸å¯¹ç”¨æˆ·è¿›è¡Œç­›é€‰ï¼Œå¿«é€Ÿå®šä½ç›®æ ‡å®¢æˆ·ï¼Œæ˜¯ç”¨æˆ·ç”»åƒçš„å¦å¤–ä¸€ä¸ªåŸåˆ™ã€‚</p>
<h2 id="å››ã€ç”¨æˆ·ç”»åƒçš„æ–¹æ³•ä»‹ç»ï¼Œä¸è¦å¤ªå¤æ‚"><a href="#å››ã€ç”¨æˆ·ç”»åƒçš„æ–¹æ³•ä»‹ç»ï¼Œä¸è¦å¤ªå¤æ‚" class="headerlink" title="å››ã€ç”¨æˆ·ç”»åƒçš„æ–¹æ³•ä»‹ç»ï¼Œä¸è¦å¤ªå¤æ‚"></a>å››ã€ç”¨æˆ·ç”»åƒçš„æ–¹æ³•ä»‹ç»ï¼Œä¸è¦å¤ªå¤æ‚</h2><p>é‡‘èä¼ä¸šéœ€è¦ç»“åˆä¸šåŠ¡éœ€æ±‚è¿›è¡Œç”¨æˆ·ç”»åƒï¼Œä»å®ç”¨è§’åº¦å‡ºå‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·ç”»åƒä¿¡æ¯åˆ†æˆäº”ç±»ä¿¡æ¯ã€‚åˆ†åˆ«æ˜¯äººå£å±æ€§ï¼Œä¿¡ç”¨å±æ€§ï¼Œæ¶ˆè´¹ç‰¹å¾ï¼Œå…´è¶£çˆ±å¥½ï¼Œç¤¾äº¤å±æ€§ã€‚å®ƒä»¬åŸºæœ¬è¦†ç›–äº†ä¸šåŠ¡éœ€æ±‚æ‰€éœ€è¦çš„å¼ºç›¸å…³ä¿¡æ¯ï¼Œç»“åˆå¤–éƒ¨åœºæ™¯æ•°æ®å°†ä¼šäº§ç”Ÿå·¨å¤§çš„å•†ä¸šä»·å€¼ã€‚æˆ‘ä»¬å…ˆäº†è§£ä¸‹ç”¨æˆ·ç”»åƒçš„äº”å¤§ç±»ä¿¡æ¯çš„ä½œç”¨ï¼Œä»¥åŠæ¶‰åŠçš„å¼ºç›¸å…³ä¿¡æ¯ã€‚ç‰¹åˆ«å¤æ‚çš„ç”¨æˆ·ç”»åƒçº¬åº¦ä¾‹å¦‚å…«ä¸ªçº¬åº¦ï¼Œåä¸ªçº¬åº¦ä¿¡æ¯éƒ½ä¸åˆ©äºå•†ä¸šåº”ç”¨ï¼Œä¸å»ºè®®é‡‘èä¼ä¸šè¿›è¡Œé‡‡ç”¨ï¼Œå…¶ä»–å…·æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥å½’çº³åˆ°è¿™äº”ä¸ªçº¬åº¦ã€‚é‡‘èä¼ä¸šè¾¾åˆ°å…¶å•†ä¸šéœ€æ±‚ï¼Œä»è¿™äº”ä¸ªçº¬åº¦ä¿¡æ¯è¿›è¡Œåº”ç”¨å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦è¿‡äºå¤æ‚ç”¨æˆ·ç”»åƒè¿™ä¸ªå·¥ä½œï¼ŒåŒæ—¶å•†ä¸šæ„ä¹‰ä¹Ÿä¸å¤ªå¤§ã€‚</p>
<h3 id="1ã€äººå£å±æ€§ï¼š"><a href="#1ã€äººå£å±æ€§ï¼š" class="headerlink" title="1ã€äººå£å±æ€§ï¼š"></a>1ã€äººå£å±æ€§ï¼š</h3><p>ç”¨äºæè¿°ä¸€ä¸ªäººåŸºæœ¬ç‰¹å¾çš„ä¿¡æ¯ï¼Œä¸»è¦ä½œç”¨æ˜¯å¸®åŠ©é‡‘èä¼ä¸šçŸ¥é“å®¢æˆ·æ˜¯è°ï¼Œå¦‚ä½•è§¦è¾¾ç”¨æˆ·ã€‚å§“åï¼Œæ€§åˆ«ï¼Œå¹´é¾„ï¼Œç”µè¯å·ç ï¼Œé‚®ç®±ï¼Œå®¶åº­ä½å€éƒ½å±äºäººå£å±æ€§ä¿¡æ¯ã€‚</p>
<h3 id="2ã€ä¿¡ç”¨å±æ€§ï¼š"><a href="#2ã€ä¿¡ç”¨å±æ€§ï¼š" class="headerlink" title="2ã€ä¿¡ç”¨å±æ€§ï¼š"></a>2ã€ä¿¡ç”¨å±æ€§ï¼š</h3><p>ç”¨äºæè¿°ç”¨æˆ·æ”¶å…¥æ½œåŠ›å’Œæ”¶å…¥æƒ…å†µï¼Œæ”¯ä»˜èƒ½åŠ›ã€‚å¸®åŠ©ä¼ä¸šäº†è§£å®¢æˆ·èµ„äº§æƒ…å†µå’Œä¿¡ç”¨æƒ…å†µï¼Œæœ‰åˆ©äºå®šä½ç›®æ ‡å®¢æˆ·ã€‚å®¢æˆ·èŒä¸šã€æ”¶å…¥ã€èµ„äº§ã€è´Ÿå€ºã€å­¦å†ã€ä¿¡ç”¨è¯„åˆ†ç­‰éƒ½å±äºä¿¡ç”¨ä¿¡æ¯ã€‚</p>
<h3 id="3ã€æ¶ˆè´¹ç‰¹å¾ï¼š"><a href="#3ã€æ¶ˆè´¹ç‰¹å¾ï¼š" class="headerlink" title="3ã€æ¶ˆè´¹ç‰¹å¾ï¼š"></a>3ã€æ¶ˆè´¹ç‰¹å¾ï¼š</h3><p>ç”¨äºæè¿°å®¢æˆ·ä¸»è¦æ¶ˆè´¹ä¹ æƒ¯å’Œæ¶ˆè´¹åå¥½ï¼Œç”¨äºå¯»æ‰¾é«˜é¢‘å’Œé«˜ä»·å€¼å®¢æˆ·ã€‚å¸®åŠ©ä¼ä¸šä¾æ®å®¢æˆ·æ¶ˆè´¹ç‰¹ç‚¹æ¨èç›¸å…³é‡‘èäº§å“å’ŒæœåŠ¡ï¼Œè½¬åŒ–ç‡å°†éå¸¸é«˜ã€‚ä¸ºäº†ä¾¿äºç­›é€‰å®¢æˆ·ï¼Œå¯ä»¥å‚è€ƒå®¢æˆ·çš„æ¶ˆè´¹è®°å½•å°†å®¢æˆ·ç›´æ¥å®šæ€§ä¸ºæŸäº›æ¶ˆè´¹ç‰¹å¾äººç¾¤ï¼Œä¾‹å¦‚å·®æ—…äººç¾¤ï¼Œå¢ƒå¤–æ¸¸äººç¾¤ï¼Œæ—…æ¸¸äººç¾¤ï¼Œé¤é¥®ç”¨æˆ·ï¼Œæ±½è½¦ç”¨æˆ·ï¼Œæ¯å©´ç”¨æˆ·ï¼Œç†è´¢äººç¾¤ç­‰ã€‚</p>
<h3 id="4ã€å…´è¶£çˆ±å¥½ï¼š"><a href="#4ã€å…´è¶£çˆ±å¥½ï¼š" class="headerlink" title="4ã€å…´è¶£çˆ±å¥½ï¼š"></a>4ã€å…´è¶£çˆ±å¥½ï¼š</h3><p>ç”¨äºæè¿°å®¢æˆ·å…·æœ‰å“ªæ–¹é¢çš„å…´è¶£çˆ±å¥½ï¼Œåœ¨è¿™äº›å…´è¶£æ–¹é¢å¯èƒ½æ¶ˆè´¹åå¥½æ¯”è¾ƒé«˜ã€‚å¸®åŠ©ä¼ä¸šäº†è§£å®¢æˆ·å…´è¶£å’Œæ¶ˆè´¹å€¾å‘ï¼Œå®šå‘è¿›è¡Œæ´»åŠ¨è¥é”€ã€‚å…´è¶£çˆ±å¥½çš„ä¿¡æ¯å¯èƒ½ä¼šå’Œæ¶ˆè´¹ç‰¹å¾ä¸­éƒ¨åˆ†ä¿¡æ¯æœ‰é‡å¤ï¼ŒåŒºåˆ«åœ¨äºæ•°æ®æ¥æºä¸åŒã€‚æ¶ˆè´¹ç‰¹å¾æ¥æºäºå·²æœ‰çš„æ¶ˆè´¹è®°å½•ï¼Œä½†æ˜¯è´­ä¹°çš„ç‰©å“å’ŒæœåŠ¡ä¸ä¸€å®šæ˜¯è‡ªå·±äº«ç”¨ï¼Œä½†æ˜¯å…´è¶£çˆ±å¥½ä»£è¡¨æœ¬äººçš„çœŸå®å…´è¶£ã€‚ä¾‹å¦‚æˆ·å¤–è¿åŠ¨çˆ±å¥½è€…ï¼Œæ—…æ¸¸çˆ±å¥½è€…ï¼Œç”µå½±çˆ±å¥½è€…ï¼Œç§‘æŠ€å‘çƒ§å‹ï¼Œå¥èº«çˆ±å¥½è€…ï¼Œå¥¢ä¾ˆå“çˆ±å¥½è€…ç­‰ã€‚å…´è¶£çˆ±å¥½çš„ä¿¡æ¯å¯èƒ½æ¥æºäºç¤¾äº¤ä¿¡æ¯å’Œå®¢æˆ·ä½ç½®ä¿¡æ¯ã€‚</p>
<h3 id="5ã€ç¤¾äº¤ä¿¡æ¯ï¼š"><a href="#5ã€ç¤¾äº¤ä¿¡æ¯ï¼š" class="headerlink" title="5ã€ç¤¾äº¤ä¿¡æ¯ï¼š"></a>5ã€ç¤¾äº¤ä¿¡æ¯ï¼š</h3><p>ç”¨äºæè¿°ç”¨æˆ·åœ¨ç¤¾äº¤åª’ä½“çš„è¯„è®ºï¼Œè¿™äº›ä¿¡æ¯å¾€å¾€ä»£è¡¨ç”¨æˆ·å†…å¿ƒçš„æƒ³æ³•å’Œéœ€æ±‚ï¼Œå…·æœ‰å®æ—¶æ€§é«˜ï¼Œè½¬åŒ–ç‡é«˜çš„ç‰¹ç‚¹ã€‚ä¾‹å¦‚å®¢æˆ·è¯¢é—®ä¸Šæµ·å“ªé‡Œå¥½ç©?æ¾³å¤§åˆ©äºšå¢¨å°”æœ¬çš„äº¤é€š?æˆ¿å±‹è´·æ¬¾å“ªå®¶ä¼˜æƒ å¤š?é‚£ä¸ªç†è´¢äº§å“å¥½?è¿™äº›ç¤¾äº¤ä¿¡æ¯éƒ½æ˜¯ä»£è¡¨å®¢æˆ·å¤šéœ€æ±‚ï¼Œå¦‚æœä¼ä¸šå¯ä»¥åŠæ—¶äº†è§£åˆ°ï¼Œå°†ä¼šæœ‰åŠ©äºäº§å“æ¨å¹¿ã€‚<br>è¿™äº›ç”¨æˆ·ç”»åƒä¿¡æ¯å½’ç±»åŸºæœ¬è¦†ç›–äº†ä¸šåŠ¡éœ€æ±‚å’Œäº§å“å¼€å‘æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œéœ€è¦å¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œè¿›è¡Œæ•´ç†å’Œå¤„ç†ã€‚æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œå°†å®šé‡çš„æ•°æ®è½¬åŒ–ä¸ºå®šæ€§çš„æ•°æ®ï¼Œå¹¶å°†å¼ºç›¸å…³æ•°æ®è¿›è¡Œæ•´ç†ã€‚</p>
<h2 id="äº”ã€é‡‘èä¼ä¸šç”¨æˆ·ç”»åƒçš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹"><a href="#äº”ã€é‡‘èä¼ä¸šç”¨æˆ·ç”»åƒçš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹" class="headerlink" title="äº”ã€é‡‘èä¼ä¸šç”¨æˆ·ç”»åƒçš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹"></a>äº”ã€é‡‘èä¼ä¸šç”¨æˆ·ç”»åƒçš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹</h2><p>å‚è€ƒé‡‘èä¼ä¸šçš„æ•°æ®ç±»å‹å’Œä¸šåŠ¡éœ€æ±‚ï¼Œå¯ä»¥å°†é‡‘èä¼ä¸šç”¨æˆ·ç”»åƒå·¥ä½œè¿›è¡Œç»†åŒ–ã€‚åŸºæœ¬ä¸Šä»æ•°æ®é›†ä¸­åˆ°æ•°æ®å¤„ç†ï¼Œä»å¼ºç›¸å…³æ•°æ®åˆ°å®šæ€§åˆ†ç±»æ•°æ®ï¼Œä»å¼•å…¥å¤–éƒ¨æ•°æ®åˆ°ä¾æ®ä¸šåŠ¡åœºæ™¯è¿›è¡Œç­›é€‰ç›®æ ‡ç”¨æˆ·ã€‚</p>
<h3 id="1-ç”»åƒç›¸å…³æ•°æ®çš„æ•´ç†å’Œé›†ä¸­"><a href="#1-ç”»åƒç›¸å…³æ•°æ®çš„æ•´ç†å’Œé›†ä¸­" class="headerlink" title="1)ç”»åƒç›¸å…³æ•°æ®çš„æ•´ç†å’Œé›†ä¸­"></a>1)ç”»åƒç›¸å…³æ•°æ®çš„æ•´ç†å’Œé›†ä¸­</h3><p>é‡‘èä¼ä¸šå†…éƒ¨çš„ä¿¡æ¯åˆ†å¸ƒåœ¨ä¸åŒçš„ç³»ç»Ÿä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œäººå£å±æ€§ä¿¡æ¯ä¸»è¦é›†ä¸­åœ¨å®¢æˆ·å…³ç³»ç®¡ç†ç³»ç»Ÿï¼Œä¿¡ç”¨ä¿¡æ¯ä¸»è¦é›†ä¸­åœ¨äº¤æ˜“ç³»ç»Ÿå’Œäº§å“ç³»ç»Ÿä¹‹ä¸­ï¼Œä¹Ÿé›†ä¸­åœ¨å®¢æˆ·å…³ç³»ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæ¶ˆè´¹ç‰¹å¾ä¸»è¦é›†ä¸­åœ¨æ¸ é“å’Œäº§å“ç³»ç»Ÿä¸­ã€‚<br>å…´è¶£çˆ±å¥½å’Œç¤¾äº¤ä¿¡æ¯éœ€è¦ä»å¤–éƒ¨å¼•å…¥ï¼Œä¾‹å¦‚å®¢æˆ·çš„è¡Œä¸ºè½¨è¿¹å¯ä»¥ä»£è¡¨å…¶å…´è¶£çˆ±å¥½å’Œå“ç‰Œçˆ±å¥½ï¼Œç§»åŠ¨è®¾å¤‡åˆ°ä½ç½®ä¿¡æ¯å¯ä»¥æä¾›è¾ƒä¸ºå‡†ç¡®çš„å…´è¶£çˆ±å¥½ä¿¡æ¯ã€‚ç¤¾äº¤ä¿¡æ¯ï¼Œå¯ä»¥å€ŸåŠ©äºé‡‘èè¡Œä¸šè‡ªèº«çš„æ–‡æœ¬æŒ–æ˜èƒ½åŠ›è¿›è¡Œé‡‡é›†å’Œåˆ†æï¼Œä¹Ÿæ˜¯å¯ä»¥å€ŸåŠ©äºå‚å•†çš„æŠ€æœ¯èƒ½åŠ›åœ¨ç¤¾äº¤ç½‘ç«™ä¸Šç›´æ¥è·å¾—ã€‚ç¤¾äº¤ä¿¡æ¯å¾€å¾€æ˜¯å®æ—¶ä¿¡æ¯ï¼Œå•†ä¸šä»·å€¼è¾ƒé«˜ï¼Œè½¬åŒ–ç‡ä¹Ÿè¾ƒé«˜ï¼Œæ˜¯å¤§æ•°æ®é¢„æµ‹æ–¹é¢çš„ä¸»è¦ä¿¡æ¯æ¥æºã€‚ä¾‹å¦‚ç”¨ç”¨æˆ·åœ¨ç¤¾äº¤ç½‘ç«™ä¸Šæå‡ºç½—é©¬å“ªé‡Œå¥½ç©çš„é—®é¢˜ï¼Œå°±ä»£è¡¨ç”¨æˆ·æœªæ¥å¯èƒ½æœ‰å‡ºå›½æ—…æ¸¸çš„éœ€æ±‚;å¦‚æœå®¢æˆ·åœ¨å¯¹æ¯”ä¸¤æ¬¾æ±½è½¦çš„ä¼˜è‰¯ï¼Œå®¢æˆ·è´­ä¹°æ±½è½¦çš„å¯èƒ½æ€§å°±è¾ƒå¤§ã€‚é‡‘èä¼ä¸šå¯ä»¥åŠæ—¶ä»‹å…¥ï¼Œä¸ºå®¢æˆ·æä¾›é‡‘èæœåŠ¡ã€‚<br>å®¢æˆ·ç”»åƒæ•°æ®ä¸»è¦åˆ†ä¸ºäº”ç±»ï¼Œäººå£å±æ€§ã€ä¿¡ç”¨ä¿¡æ¯ã€æ¶ˆè´¹ç‰¹å¾ã€å…´è¶£çˆ±å¥½ã€ç¤¾äº¤ä¿¡æ¯ã€‚è¿™äº›æ•°æ®éƒ½åˆ†å¸ƒåœ¨ä¸åŒçš„ä¿¡æ¯ç³»ç»Ÿï¼Œé‡‘èä¼ä¸šéƒ½ä¸Šçº¿äº†æ•°æ®ä»“åº“(DW)ï¼Œæ‰€æœ‰ç”»åƒç›¸å…³çš„å¼ºç›¸å…³ä¿¡æ¯éƒ½å¯ä»¥ä»æ•°æ®ä»“åº“é‡Œé¢æ•´ç†å’Œé›†ä¸­ï¼Œå¹¶ä¸”ä¾æ®ç”»åƒå•†ä¸šéœ€æ±‚ï¼Œåˆ©ç”¨è·‘æ‰¹ä½œä¸šï¼ŒåŠ å·¥æ•°æ®ï¼Œç”Ÿæˆç”¨æˆ·ç”»åƒçš„åŸå§‹æ•°æ®ã€‚<br>æ•°æ®ä»“åº“æˆä¸ºç”¨æˆ·ç”»åƒæ•°æ®çš„ä¸»è¦å¤„ç†å·¥å…·ï¼Œä¾æ®ä¸šåŠ¡åœºæ™¯å’Œç”»åƒéœ€æ±‚å°†åŸå§‹æ•°æ®è¿›è¡Œåˆ†ç±»ã€ç­›é€‰ã€å½’çº³ã€åŠ å·¥ç­‰ï¼Œç”Ÿæˆç”¨æˆ·ç”»åƒéœ€è¦çš„åŸå§‹æ•°æ®ã€‚<br>ç”¨æˆ·ç”»åƒçš„çº¬åº¦ä¿¡æ¯ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œåªéœ€è¦æ‰¾åˆ°å¯äº”å¤§ç±»ç”»åƒä¿¡æ¯å¼ºç›¸å…³ä¿¡æ¯ï¼ŒåŒä¸šåŠ¡åœºæ™¯å¼ºç›¸å…³ä¿¡æ¯ï¼ŒåŒäº§å“å’Œç›®æ ‡å®¢æˆ·å¼ºç›¸å…³ä¿¡æ¯å³å¯ã€‚æ ¹æœ¬ä¸å­˜åœ¨360åº¦çš„ç”¨æˆ·ç”»åƒä¿¡æ¯ï¼Œä¹Ÿä¸å­˜åœ¨ä¸°å¯Œçš„ä¿¡æ¯å¯ä»¥å®Œå…¨äº†è§£å®¢æˆ·ï¼Œå¦å¤–æ•°æ®çš„å®æ•ˆæ€§ä¹Ÿè¦é‡ç‚¹è€ƒè™‘ã€‚</p>
<h3 id="2-æ‰¾åˆ°åŒä¸šåŠ¡åœºæ™¯å¼ºç›¸å…³æ•°æ®"><a href="#2-æ‰¾åˆ°åŒä¸šåŠ¡åœºæ™¯å¼ºç›¸å…³æ•°æ®" class="headerlink" title="2)æ‰¾åˆ°åŒä¸šåŠ¡åœºæ™¯å¼ºç›¸å…³æ•°æ®"></a>2)æ‰¾åˆ°åŒä¸šåŠ¡åœºæ™¯å¼ºç›¸å…³æ•°æ®</h3><p>ä¾æ®ç”¨æˆ·ç”»åƒçš„åŸåˆ™ï¼Œæ‰€æœ‰ç”»åƒä¿¡æ¯åº”è¯¥æ˜¯5å¤§åˆ†ç±»çš„å¼ºç›¸å…³ä¿¡æ¯ã€‚å¼ºç›¸å…³ä¿¡æ¯æ˜¯æŒ‡åŒä¸šåŠ¡åœºæ™¯å¼ºç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥å¸®åŠ©é‡‘èè¡Œä¸šå®šä½ç›®æ ‡å®¢æˆ·ï¼Œäº†è§£å®¢æˆ·æ½œåœ¨éœ€æ±‚ï¼Œå¼€å‘éœ€æ±‚äº§å“ã€‚<br>åªæœ‰å¼ºç›¸å…³ä¿¡æ¯æ‰èƒ½å¸®åŠ©é‡‘èä¼ä¸šæœ‰æ•ˆç»“åˆä¸šåŠ¡éœ€æ±‚ï¼Œåˆ›é€ å•†ä¸šä»·å€¼ã€‚ä¾‹å¦‚å§“åã€æ‰‹æœºå·ã€å®¶åº­åœ°å€å°±æ˜¯èƒ½å¤Ÿè§¦è¾¾å®¢æˆ·çš„å¼ºäººå£å±æ€§ä¿¡æ¯ï¼Œæ”¶å…¥ã€å­¦å†ã€èŒä¸šã€èµ„äº§å°±æ˜¯å®¢æˆ·ä¿¡ç”¨ä¿¡æ¯çš„å¼ºç›¸å…³ä¿¡æ¯ã€‚å·®æ—…äººç¾¤ã€å¢ƒå¤–æ¸¸äººç¾¤ã€æ±½è½¦ç”¨æˆ·ã€æ—…æ¸¸äººç¾¤ã€æ¯å©´äººç¾¤å°±æ˜¯æ¶ˆè´¹ç‰¹å¾çš„å¼ºç›¸å…³ä¿¡æ¯ã€‚æ‘„å½±çˆ±å¥½è€…ã€æ¸¸æˆçˆ±å¥½è€…ã€å¥èº«çˆ±å¥½è€…ã€ç”µå½±äººç¾¤ã€æˆ·å¤–çˆ±å¥½è€…å°±æ˜¯å®¢æˆ·å…´è¶£çˆ±å¥½çš„å¼ºç›¸å…³ä¿¡æ¯ã€‚ç¤¾äº¤åª’ä½“ä¸Šå‘è¡¨çš„æ—…æ¸¸éœ€æ±‚ï¼Œæ—…æ¸¸æ”»ç•¥ï¼Œç†è´¢å’¨è¯¢ï¼Œæ±½è½¦éœ€æ±‚ï¼Œæˆ¿äº§éœ€æ±‚ç­‰ä¿¡æ¯ä»£è¡¨äº†ç”¨æˆ·çš„å†…å¿ƒéœ€æ±‚ï¼Œæ˜¯ç¤¾äº¤ä¿¡æ¯åœºæ™¯åº”ç”¨çš„å¼ºç›¸å…³ä¿¡æ¯ã€‚<br>é‡‘èä¼ä¸šå†…éƒ¨ä¿¡æ¯è¾ƒå¤šï¼Œåœ¨ç”¨æˆ·ç”»åƒé˜¶æ®µä¸éœ€è¦å¯¹æ‰€æœ‰ä¿¡æ¯éƒ½é‡‡ç”¨ï¼Œåªéœ€è¦é‡‡ç”¨åŒä¸šåŠ¡åœºæ™¯å’Œç›®æ ‡å®¢æˆ·å¼ºç›¸å…³çš„ä¿¡æ¯å³å¯ï¼Œè¿™æ ·æœ‰åŠ©äºæé«˜äº§å“è½¬åŒ–ç‡ï¼Œé™ä½ROIï¼Œæœ‰åˆ©äºç®€å•æ‰¾åˆ°ä¸šåŠ¡åº”ç”¨åœºæ™¯ï¼Œåœ¨æ•°æ®å˜ç°è¿‡ç¨‹ä¸­ä¹Ÿå®¹æ˜“å®ç°ã€‚<br>åƒä¸‡ä¸è¦å°†ç”¨æˆ·ç”»åƒå·¥ä½œæçš„è¿‡äºå¤æ‚ï¼ŒåŒä¸šåŠ¡åœºæ™¯å…³ç³»ä¸å¤§ï¼Œè¿™æ ·å°±è®©å¾ˆå¤šé‡‘èä¼ä¸šç‰¹åˆ«æ˜¯é¢†å¯¼å¤±å»ç”¨æˆ·ç”»åƒçš„å…´è¶£ï¼Œçœ‹ä¸åˆ°ç”¨æˆ·ç”»åƒçš„å•†ä¸šï¼Œä¸æ„¿æ„åœ¨å¤§æ•°æ®é¢†åŸŸæŠ•èµ„ã€‚ä¸ºä¼ä¸šå¸¦æ¥å•†ä¸šä»·å€¼æ‰æ˜¯ç”¨æˆ·ç”»åƒå·¥ä½œçš„ä¸»è¦åŠ¨åŠ›å’Œä¸»è¦ç›®çš„ã€‚</p>
<h3 id="3-å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»å’Œæ ‡ç­¾åŒ–-å®šé‡toå®šæ€§"><a href="#3-å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»å’Œæ ‡ç­¾åŒ–-å®šé‡toå®šæ€§" class="headerlink" title="3)å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»å’Œæ ‡ç­¾åŒ–(å®šé‡toå®šæ€§)"></a>3)å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»å’Œæ ‡ç­¾åŒ–(å®šé‡toå®šæ€§)</h3><p>é‡‘èä¼ä¸šé›†ä¸­äº†æ‰€æœ‰ä¿¡æ¯ä¹‹åï¼Œä¾æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¯¹ä¿¡æ¯è¿›è¡ŒåŠ å·¥æ•´ç†ï¼Œéœ€è¦å¯¹å®šé‡çš„ä¿¡æ¯è¿›è¡Œå®šæ€§ï¼Œæ–¹ä¾¿ä¿¡æ¯åˆ†ç±»å’Œç­›é€‰ã€‚è¿™éƒ¨åˆ†å·¥ä½œå»ºè®®åœ¨æ•°æ®ä»“åº“è¿›è¡Œï¼Œä¸å»ºè®®åœ¨å¤§æ•°æ®ç®¡ç†å¹³å°(DMP)é‡Œè¿›è¡ŒåŠ å·¥ã€‚<br>å®šæ€§ä¿¡æ¯è¿›è¡Œå®šé‡åˆ†ç±»æ˜¯ç”¨æˆ·ç”»åƒçš„ä¸€ä¸ªé‡è¦å·¥ä½œç¯èŠ‚ï¼Œå…·æœ‰è¾ƒé«˜çš„ä¸šåŠ¡åœºæ™¯è¦æ±‚ï¼Œè€ƒéªŒç”¨æˆ·ç”»åƒå•†ä¸šéœ€æ±‚çš„è½¬åŒ–ã€‚å…¶ä¸»è¦ç›®çš„æ˜¯å¸®åŠ©ä¼ä¸šå°†å¤æ‚æ•°æ®ç®€å•åŒ–ï¼Œå°†äº¤æ˜“æ•°æ®å®šæ€§è¿›è¡Œå½’ç±»ï¼Œå¹¶ä¸”èå…¥å•†ä¸šåˆ†æçš„è¦æ±‚ï¼Œå¯¹æ•°æ®è¿›è¡Œå•†ä¸šåŠ å·¥ã€‚<br>ä¾‹å¦‚å¯ä»¥å°†å®¢æˆ·æŒ‰ç…§å¹´é¾„åŒºé—´åˆ†ä¸ºå­¦ç”Ÿï¼Œé’å¹´ï¼Œä¸­é’å¹´ï¼Œä¸­å¹´ï¼Œä¸­è€å¹´ï¼Œè€å¹´ç­‰äººç”Ÿé˜¶æ®µã€‚æºäºå„äººç”Ÿé˜¶æ®µçš„é‡‘èæœåŠ¡éœ€æ±‚ä¸åŒï¼Œåœ¨å¯»æ‰¾ç›®æ ‡å®¢æˆ·æ—¶ï¼Œå¯ä»¥é€šè¿‡äººç”Ÿé˜¶æ®µè¿›è¡Œç›®æ ‡å®¢æˆ·å®šä½ã€‚ä¼ä¸šå¯ä»¥åˆ©ç”¨å®¢æˆ·çš„æ”¶å…¥ã€å­¦å†ã€èµ„äº§ç­‰æƒ…å†µå°†å®¢æˆ·åˆ†ä¸ºä½ã€ä¸­ã€é«˜ç«¯å®¢æˆ·ï¼Œå¹¶ä¾æ®å…¶é‡‘èæœåŠ¡éœ€æ±‚ï¼Œæä¾›ä¸åŒçš„é‡‘èæœåŠ¡ã€‚å¯ä»¥å‚è€ƒå…¶é‡‘èæ¶ˆè´¹è®°å½•å’Œèµ„äº§ä¿¡æ¯ï¼Œä»¥åŠäº¤æ˜“äº§å“ï¼Œè´­ä¹°çš„äº§å“ï¼Œå°†å®¢æˆ·æ¶ˆè´¹ç‰¹å¾è¿›è¡Œå®šæ€§æè¿°ï¼ŒåŒºåˆ†å‡ºç”µå•†å®¢æˆ·ï¼Œç†è´¢å®¢æˆ·ï¼Œä¿é™©å®¢æˆ·ï¼Œç¨³å¥æŠ•èµ„å®¢æˆ·ï¼Œæ¿€è¿›æŠ•èµ„å®¢æˆ·ï¼Œé¤é¥®å®¢æˆ·ï¼Œæ—…æ¸¸å®¢æˆ·ï¼Œé«˜ç«¯å®¢æˆ·ï¼Œå…¬åŠ¡å‘˜å®¢æˆ·ç­‰ã€‚<br>åˆ©ç”¨å¤–éƒ¨çš„æ•°æ®å¯ä»¥å°†å®šæ€§å®¢æˆ·çš„å…´è¶£çˆ±å¥½ï¼Œä¾‹å¦‚æˆ·å¤–çˆ±å¥½è€…ï¼Œå¥¢ä¾ˆå“çˆ±å¥½è€…ï¼Œç§‘æŠ€äº§å“å‘çƒ§å‹ï¼Œæ‘„å½±çˆ±å¥½è€…ï¼Œé«˜ç«¯æ±½è½¦éœ€æ±‚è€…ç­‰ä¿¡æ¯ã€‚<br>å°†å®šé‡ä¿¡æ¯å½’çº³ä¸ºå®šæ€§ä¿¡æ¯ï¼Œå¹¶ä¾æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œæ ‡ç­¾åŒ–ï¼Œæœ‰åŠ©äºé‡‘èä¼ä¸šæ‰¾åˆ°ç›®æ ‡å®¢æˆ·ï¼Œå¹¶ä¸”äº†è§£å®¢æˆ·çš„æ½œåœ¨éœ€æ±‚ï¼Œä¸ºé‡‘èè¡Œä¸šçš„äº§å“æ‰¾åˆ°ç›®æ ‡å®¢æˆ·ï¼Œè¿›è¡Œç²¾å‡†è¥é”€ï¼Œé™ä½è¥é”€æˆæœ¬ï¼Œæé«˜äº§å“è½¬åŒ–ç‡ã€‚å¦å¤–é‡‘èä¼ä¸šè¿˜å¯ä»¥ä¾æ®å®¢æˆ·çš„æ¶ˆè´¹ç‰¹å¾ã€å…´è¶£çˆ±å¥½ã€ç¤¾äº¤ä¿¡æ¯åŠæ—¶ä¸ºå®¢æˆ·æ¨èäº§å“ï¼Œè®¾è®¡äº§å“ï¼Œä¼˜åŒ–äº§å“æµç¨‹ã€‚æé«˜äº§å“é”€å”®çš„æ´»è·ƒç‡ï¼Œå¸®åŠ©é‡‘èä¼ä¸šæ›´å¥½åœ°ä¸ºå®¢æˆ·è®¾è®¡äº§å“ã€‚</p>
<h3 id="4-ä¾æ®ä¸šåŠ¡éœ€æ±‚å¼•å…¥å¤–éƒ¨æ•°æ®"><a href="#4-ä¾æ®ä¸šåŠ¡éœ€æ±‚å¼•å…¥å¤–éƒ¨æ•°æ®" class="headerlink" title="4)ä¾æ®ä¸šåŠ¡éœ€æ±‚å¼•å…¥å¤–éƒ¨æ•°æ®"></a>4)ä¾æ®ä¸šåŠ¡éœ€æ±‚å¼•å…¥å¤–éƒ¨æ•°æ®</h3><p>åˆ©ç”¨æ•°æ®è¿›è¡Œç”»åƒç›®çš„ä¸»è¦æ—¶ä¸ºä¸šåŠ¡åœºæ™¯æä¾›æ•°æ®æ”¯æŒï¼ŒåŒ…æ‹¬å¯»æ‰¾åˆ°äº§å“çš„ç›®æ ‡å®¢æˆ·å’Œè§¦è¾¾å®¢æˆ·ã€‚é‡‘èä¼ä¸šè‡ªèº«çš„æ•°æ®ä¸è¶³ä»¥äº†è§£å®¢æˆ·çš„æ¶ˆè´¹ç‰¹å¾ã€å…´è¶£çˆ±å¥½ã€ç¤¾äº¤ä¿¡æ¯ã€‚<br>é‡‘èä¼ä¸šå¯ä»¥å¼•å…¥å¤–éƒ¨ä¿¡æ¯æ¥ä¸°å¯Œå®¢æˆ·ç”»åƒä¿¡æ¯ï¼Œä¾‹å¦‚å¼•å…¥é“¶è”å’Œç”µå•†çš„ä¿¡æ¯æ¥ä¸°å¯Œæ¶ˆè´¹ç‰¹å¾ä¿¡æ¯ï¼Œå¼•å…¥ç§»åŠ¨å¤§æ•°æ®çš„ä½ç½®ä¿¡æ¯æ¥ä¸°å¯Œå®¢æˆ·çš„å…´è¶£çˆ±å¥½ä¿¡æ¯ï¼Œå¼•å…¥å¤–éƒ¨å‚å•†çš„æ•°æ®æ¥ä¸°å¯Œç¤¾äº¤ä¿¡æ¯ç­‰ã€‚<br>å¤–éƒ¨ä¿¡æ¯çš„çº¬åº¦è¾ƒå¤šï¼Œå†…å®¹ä¹Ÿå¾ˆä¸°å¯Œï¼Œä½†æ˜¯å¦‚ä½•å¼•å…¥å¤–éƒ¨ä¿¡æ¯æ˜¯ä¸€é¡¹å…·æœ‰æŒ‘æˆ˜çš„å·¥ä½œã€‚å¤–éƒ¨ä¿¡æ¯åœ¨å¼•å…¥æ—¶éœ€è¦è€ƒè™‘å‡ ä¸ªé—®é¢˜ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨æ•°æ®çš„è¦†ç›–é‡Œï¼Œå¦‚ä½•å’Œå†…éƒ¨æ•°æ®æ‰“é€šï¼Œå’Œå†…éƒ¨ä¿¡æ¯çš„åŒ¹é…ç‡ï¼Œä»¥åŠä¿¡æ¯çš„ç›¸å…³ç¨‹åº¦ï¼Œè¿˜æœ‰æ•°æ®çš„é²œæ´»åº¦ï¼Œè¿™äº›éƒ½æ˜¯å¼•å…¥å¤–éƒ¨ä¿¡æ¯çš„ä¸»è¦è€ƒè™‘çº¬åº¦ã€‚<br>å¤–éƒ¨æ•°æ®é±¼é¾™æ··æ‚ï¼Œæ•°æ®çš„åˆè§„æ€§ä¹Ÿæ˜¯é‡‘èä¼ä¸šåœ¨å¼•å…¥å¤–éƒ¨æ•°æ®æ—¶çš„ä¸€ä¸ªé‡è¦è€ƒè™‘ï¼Œæ•æ„Ÿçš„ä¿¡æ¯ä¾‹å¦‚æ‰‹æœºå·ã€å®¶åº­ä½å€ã€èº«ä»½è¯å·åœ¨å¼•å…¥æˆ–åŒ¹é…æ—¶éƒ½åº”è¯¥æ³¨æ„éšç§é—®é¢˜ï¼ŒåŸºæœ¬çš„åŸåˆ™æ˜¯ä¸è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œå¯ä»¥è¿›è¡Œæ•°æ®åŒ¹é…å’ŒéªŒè¯ã€‚<br>å¤–éƒ¨æ•°æ®ä¸ä¼šé›†ä¸­åœ¨æŸä¸€å®¶ï¼Œéœ€è¦é‡‘èä¼ä¸šèŠ±è´¹å¤§é‡æ—¶é—´è¿›è¡Œå¯»æ‰¾ã€‚å¤–éƒ¨æ•°æ®å’Œå†…éƒ¨æ•°æ®çš„æ‰“é€šæ˜¯ä¸ªå¾ˆå¤æ‚çš„é—®é¢˜ï¼Œæ‰‹æœºå·/è®¾å¤‡å·/èº«ä»½è¯å·çš„MD5æ•°å€¼åŒ¹é…æ˜¯ä¸€ç§å¥½çš„æ–¹æ³•ï¼Œä¸æ¶‰åŠéšç§æ•°æ®çš„äº¤æ¢ï¼Œå¯ä»¥è¿›è¡Œå”¯ä¸€åŒ¹é…ã€‚ä¾æ®è¡Œä¸šå†…éƒ¨çš„ç»éªŒï¼Œæ²¡æœ‰ä¸€å®¶ä¼ä¸šå¤–éƒ¨æ•°æ®å¯ä»¥æ»¡è¶³ä¼ä¸šè¦æ±‚ï¼Œå¤–éƒ¨æ•°æ®çš„å¼•å…¥éœ€è¦å¤šæ–¹é¢æ•°æ®ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ•°æ®è¦†ç›–ç‡è¾¾åˆ°70%ä»¥ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªéå¸¸é«˜çš„è¦†ç›–ç‡ã€‚è¦†ç›–ç‡è¾¾åˆ°20%ä»¥ä¸Šå°±å¯ä»¥è¿›è¡Œå•†ä¸šåº”ç”¨äº†ã€‚<br>é‡‘èè¡Œä¸šå¤–éƒ¨æ•°æ®æºè¾ƒå¥½åˆä½œæ–¹æœ‰é“¶è”ã€èŠéº»ä¿¡ç”¨ã€è¿è¥å•†ã€ä¸­èˆªä¿¡ã€è…¾äº‘å¤©ä¸‹ã€è…¾è®¯ã€å¾®åšã€å‰æµ·å¾ä¿¡ï¼Œå„å¤§ç”µå•†å¹³å°ç­‰ã€‚å¸‚åœºä¸Šæ•°æ®æä¾›å•†å·²ç»å¾ˆå¤šï¼Œå¹¶ä¸”æ•°æ®è´¨é‡éƒ½ä¸é”™ï¼Œéœ€è¦é‡‘èè¡Œä¸šä¸€å®¶ä¸€å®¶å»æŒ–æ˜ï¼Œæˆ–è€…å§”æ‰˜ä¸€ä¸ªå‚å•†ä»£ç†å¼•å…¥ä¹Ÿå¯ä»¥ã€‚ç‹¬ç«‹ç¬¬ä¸‰æ–¹å¸®åŠ©é‡‘èè¡Œä¸šå¼•å…¥å¤–éƒ¨æ•°æ®å¯ä»¥é™ä½æ•°æ®äº¤æ˜“æˆæœ¬ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é™ä½æ•°æ®åˆè§„é£é™©ï¼Œæ˜¯ä¸€ä¸ªä¸é”™å¾—å°è¯•ã€‚å¦å¤–å„å¤§åŸå¸‚å’ŒåŒºåŸŸçš„å¤§æ•°æ®äº¤æ˜“å¹³å°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè¾ƒå¥½çš„å¤–éƒ¨æ•°æ®å¼•å…¥æ–¹å¼ã€‚</p>
<h3 id="5-æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚è¿›è¡Œç­›é€‰å®¢æˆ·-DMPçš„ä½œç”¨"><a href="#5-æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚è¿›è¡Œç­›é€‰å®¢æˆ·-DMPçš„ä½œç”¨" class="headerlink" title="5)æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚è¿›è¡Œç­›é€‰å®¢æˆ·(DMPçš„ä½œç”¨)"></a>5)æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚è¿›è¡Œç­›é€‰å®¢æˆ·(DMPçš„ä½œç”¨)</h3><p>ç”¨æˆ·ç”»åƒä¸»è¦ç›®çš„æ˜¯è®©é‡‘èä¼ä¸šæŒ–æ˜å·²æœ‰çš„æ•°æ®ä»·å€¼ï¼Œåˆ©ç”¨æ•°æ®ç”»åƒæŠ€æœ¯å¯»æ‰¾åˆ°ç›®æ ‡å®¢æˆ·å’Œå®¢æˆ·åˆ°æ½œåœ¨éœ€æ±‚ï¼Œè¿›è¡Œäº§å“æ¨é”€å’Œè®¾è®¡æ”¹è‰¯äº§å“ã€‚<br>ç”¨æˆ·ç”»åƒä»ä¸šåŠ¡åœºæ™¯å‡ºå‘ï¼Œå®ç°æ•°æ®å•†ä¸šå˜ç°é‡è¦æ–¹å¼ã€‚ç”¨æˆ·ç”»åƒæ˜¯æ•°æ®æ€ç»´è¿è¥è¿‡ç¨‹ä¸­åˆ°ä¸€ä¸ªé‡è¦é—­ç¯ï¼Œå¸®åŠ©é‡‘èä¼ä¸šåˆ©ç”¨æ•°æ®è¿›è¡Œç²¾ç»†åŒ–è¿è¥å’Œå¸‚åœºè¥é”€ï¼Œä»¥åŠäº§å“è®¾è®¡ã€‚ç”¨æˆ·ç”»åƒå°±æ˜¯ä¸€åˆ‡ä»¥æ•°æ®å•†ä¸šåŒ–è¿è¥ä¸ºä¸­å¿ƒï¼Œä»¥å•†ä¸šåœºæ™¯ä¸ºä¸­ï¼Œå¸®åŠ©é‡‘èä¼ä¸šæ·±åº¦åˆ†æå®¢æˆ·ï¼Œæ‰¾åˆ°ç›®æ ‡å®¢æˆ·ã€‚<br>DMP(å¤§æ•°æ®ç®¡ç†å¹³å°)åœ¨æ•´ä¸ªç”¨æˆ·ç”»åƒè¿‡ç¨‹ä¸­èµ·åˆ°äº†ä¸€ä¸ªæ•°æ®å˜ç°çš„ä½œç”¨ã€‚ä»æŠ€æœ¯è§’åº¦æ¥è®²ï¼ŒDMPå°†ç”»åƒæ•°æ®è¿›è¡Œæ ‡ç­¾åŒ–ï¼Œåˆ©ç”¨æœºå™¨å­¦ä¹ ç®—æ³•æ¥æ‰¾åˆ°ç›¸ä¼¼äººç¾¤ï¼ŒåŒä¸šåŠ¡åœºæ™¯æ·±åº¦ç»“åˆï¼Œç­›é€‰å‡ºå…·æœ‰ä»·å€¼çš„æ•°æ®å’Œå®¢æˆ·ï¼Œå®šä½ç›®æ ‡å®¢æˆ·ï¼Œè§¦è¾¾å®¢æˆ·ï¼Œå¯¹è¥é”€æ•ˆæœè¿›è¡Œè®°å½•å’Œåé¦ˆã€‚å¤§æ•°æ®ç®¡ç†å¹³å°DMPè¿‡å»ä¸»è¦åº”ç”¨åœ¨å¹¿å‘Šè¡Œä¸šï¼Œåœ¨é‡‘èè¡Œä¸šåº”ç”¨ä¸å¤šï¼Œæœªæ¥ä¼šæˆä¸ºæ•°æ®å•†ä¸šåº”ç”¨çš„ä¸»è¦å¹³å°ã€‚<br>DMPå¯ä»¥å¸®åŠ©ä¿¡ç”¨å¡å…¬å¸ç­›é€‰å‡ºæœªæ¥ä¸€ä¸ªæœˆå¯èƒ½è¿›è¡Œåˆ†æœŸä»˜æ¬¾çš„å®¢æˆ·ï¼Œç”µå­äº§å“é‡åº¦è´­ä¹°å®¢æˆ·ï¼Œç­›é€‰å‡ºé‡‘èç†è´¢å®¢æˆ·ï¼Œç­›é€‰å‡ºé«˜ç«¯å®¢æˆ·(åœ¨æœ¬è¡Œèµ„äº§å¾ˆå°‘ï¼Œä½†æ˜¯åœ¨ä»–è¡Œèµ„äº§å¾ˆå¤š)ï¼Œç­›é€‰å‡ºä¿éšœé™©ç§ï¼Œå¯¿é™©ï¼Œæ•™è‚²é™©ï¼Œè½¦é™©ç­‰å®¢æˆ·ï¼Œç­›é€‰å‡ºç¨³å¥æŠ•èµ„äººï¼Œæ¿€è¿›æŠ•èµ„äººï¼Œè´¢å¯Œç®¡ç†ç­‰æ–¹é¢ç­‰å®¢æˆ·ï¼Œå¹¶ä¸”å¯ä»¥è§¦è¾¾è¿™äº›å®¢æˆ·ï¼Œæé«˜äº§å“è½¬åŒ–ç‡ï¼Œåˆ©ç”¨æ•°æ®è¿›è¡Œä»·å€¼å˜ç°ã€‚DMPè¿˜å¯ä»¥äº†è§£å®¢æˆ·çš„æ¶ˆè´¹ä¹ æƒ¯ã€å…´è¶£çˆ±å¥½ã€ä»¥åŠè¿‘æœŸéœ€æ±‚ï¼Œä¸ºå®¢æˆ·å®šåˆ¶é‡‘èäº§å“å’ŒæœåŠ¡ï¼Œè¿›è¡Œè·¨ç•Œè¥é”€ã€‚åˆ©ç”¨å®¢æˆ·çš„æ¶ˆè´¹åå¥½ï¼Œæé«˜äº§å“è½¬åŒ–ç‡ï¼Œæé«˜ç”¨æˆ·é»åº¦ã€‚<br>DMPè¿˜ä½œä¸ºå¼•å…¥å¤–éƒ¨æ•°æ®çš„å¹³å°ï¼Œå°†å¤–éƒ¨å…·æœ‰ä»·å€¼çš„æ•°æ®å¼•å…¥åˆ°é‡‘èä¼ä¸šå†…éƒ¨ï¼Œè¡¥å……ç”¨æˆ·ç”»åƒæ•°æ®ï¼Œåˆ›å»ºä¸åŒä¸šåŠ¡åº”ç”¨åœºæ™¯å’Œå•†ä¸šéœ€æ±‚ï¼Œç‰¹åˆ«æ˜¯ç§»åŠ¨å¤§æ•°æ®ã€ç”µå•†æ•°æ®ã€ç¤¾äº¤æ•°æ®çš„åº”ç”¨ï¼Œå¯ä»¥å¸®åŠ©é‡‘èä¼ä¸šæ¥è¿›è¡Œæ•°æ®ä»·å€¼å˜ç°ï¼Œè®©ç”¨æˆ·ç”»åƒç¦»å•†ä¸šåº”ç”¨æ›´åŠ è¿‘ä¸€äº›ï¼Œä½“ç°ç”¨æˆ·ç”»åƒçš„å•†ä¸šä»·å€¼ã€‚<br>ç”¨æˆ·ç”»åƒçš„å…³é”®ä¸æ˜¯360åº¦åˆ†æå®¢æˆ·ï¼Œè€Œæ˜¯ä¸ºä¼ä¸šå¸¦æ¥å•†ä¸šä»·å€¼ï¼Œç¦»å¼€äº†å•†ä¸šä»·å€¼è°ˆç”¨æˆ·ç”»åƒå°±æ˜¯è€æµæ°“ã€‚é‡‘èä¼ä¸šç”¨æˆ·ç”»åƒé¡¹ç›®å‡ºå‘ç‚¹ä¸€å®šè¦ä»ä¸šåŠ¡éœ€æ±‚å‡ºå‘ï¼Œä»å¼ºç›¸å…³æ•°æ®å‡ºå‘ï¼Œä»ä¸šåŠ¡åœºæ™¯åº”ç”¨å‡ºå‘ã€‚ç”¨æˆ·ç”»åƒçš„æœ¬è´¨å°±æ˜¯æ·±åº¦åˆ†æå®¢æˆ·ï¼ŒæŒæ¡å…·æœ‰ä»·å€¼æ•°æ®ï¼Œæ‰¾åˆ°ç›®æ ‡å®¢æˆ·ï¼ŒæŒ‰ç…§å®¢æˆ·éœ€æ±‚æ¥å®šåˆ¶äº§å“ï¼Œåˆ©ç”¨æ•°æ®å®ç°ä»·å€¼å˜ç°ã€‚</p>
<h2 id="å…­ã€é‡‘èè¡Œä¸šç”¨æˆ·ç”»åƒå®è·µ"><a href="#å…­ã€é‡‘èè¡Œä¸šç”¨æˆ·ç”»åƒå®è·µ" class="headerlink" title="å…­ã€é‡‘èè¡Œä¸šç”¨æˆ·ç”»åƒå®è·µ"></a>å…­ã€é‡‘èè¡Œä¸šç”¨æˆ·ç”»åƒå®è·µ</h2><h3 id="1-é“¶è¡Œç”¨æˆ·ç”»åƒå®è·µä»‹ç»"><a href="#1-é“¶è¡Œç”¨æˆ·ç”»åƒå®è·µä»‹ç»" class="headerlink" title="1)é“¶è¡Œç”¨æˆ·ç”»åƒå®è·µä»‹ç»"></a>1)é“¶è¡Œç”¨æˆ·ç”»åƒå®è·µä»‹ç»</h3><p>é“¶è¡Œå…·æœ‰ä¸°å¯Œçš„äº¤æ˜“æ•°æ®ã€ä¸ªäººå±æ€§æ•°æ®ã€æ¶ˆè´¹æ•°æ®ã€ä¿¡ç”¨æ•°æ®å’Œå®¢æˆ·æ•°æ®ï¼Œç”¨æˆ·ç”»åƒçš„éœ€æ±‚è¾ƒå¤§ã€‚ä½†æ˜¯ç¼ºå°‘ç¤¾äº¤ä¿¡æ¯å’Œå…´è¶£çˆ±å¥½ä¿¡æ¯ã€‚<br>åˆ°é“¶è¡Œç½‘ç‚¹æ¥åŠä¸šåŠ¡çš„äººå¹´çºªåå¤§ï¼Œæœªæ¥æ¶ˆè´¹è€…ä¸»è¦åœ¨ç½‘ä¸Šè¿›è¡Œä¸šåŠ¡åŠç†ã€‚é“¶è¡Œæ¥è§¦ä¸åˆ°å®¢æˆ·ï¼Œæ— æ³•äº†è§£å®¢æˆ·éœ€æ±‚ï¼Œç¼ºå°‘è§¦è¾¾å®¢æˆ·çš„æ‰‹æ®µã€‚åˆ†æå®¢æˆ·ã€äº†è§£å®¢æˆ·ã€æ‰¾åˆ°ç›®æ ‡å®¢æˆ·ã€ä¸ºå®¢æˆ·è®¾è®¡å…¶éœ€è¦çš„äº§å“ï¼Œæˆäº†é“¶è¡Œè¿›è¡Œç”¨æˆ·ç”»åƒçš„ä¸»è¦ç›®çš„ã€‚é“¶è¡Œçš„ä¸»è¦ä¸šåŠ¡éœ€æ±‚é›†ä¸­åœ¨æ¶ˆè´¹é‡‘èã€è´¢å¯Œç®¡ç†ã€èèµ„æœåŠ¡ï¼Œç”¨æˆ·ç”»åƒè¦ä»è¿™å‡ ä¸ªè§’åº¦å‡ºå‘ï¼Œå¯»æ‰¾ç›®æ ‡å®¢æˆ·ã€‚<br>é“¶è¡Œçš„å®¢æˆ·æ•°æ®å¾ˆä¸°å¯Œï¼Œæ•°æ®ç±»å‹å’Œæ€»é‡è¾ƒå¤šï¼Œç³»ç»Ÿä¹Ÿå¾ˆå¤šã€‚å¯ä»¥ä¸¥æ ¼éµå¾ªç”¨æˆ·ç”»åƒçš„äº”å¤§æ­¥éª¤ã€‚<br>å…ˆåˆ©ç”¨æ•°æ®ä»“åº“è¿›è¡Œæ•°æ®é›†ä¸­ï¼Œç­›é€‰å‡ºå¼ºç›¸å…³ä¿¡æ¯ï¼Œå¯¹å®šé‡ä¿¡æ¯å®šæ€§åŒ–ï¼Œç”ŸæˆDMPéœ€è¦çš„æ•°æ®ã€‚<br>åˆ©ç”¨DMPè¿›è¡ŒåŸºç¡€æ ‡ç­¾å’Œåº”ç”¨å®šåˆ¶ï¼Œç»“åˆä¸šåŠ¡åœºæ™¯éœ€æ±‚ï¼Œè¿›è¡Œç›®æ ‡å®¢æˆ·ç­›é€‰æˆ–å¯¹ç”¨æˆ·è¿›è¡Œæ·±åº¦åˆ†æã€‚<br>åŒæ—¶åˆ©ç”¨DMPå¼•å…¥å¤–éƒ¨æ•°æ®ï¼Œå®Œå–„æ•°æ®åœºæ™¯è®¾è®¡ï¼Œæé«˜ç›®æ ‡å®¢æˆ·ç²¾å‡†åº¦ã€‚<br>æ‰¾åˆ°è§¦è¾¾å®¢æˆ·çš„æ–¹å¼ï¼Œå¯¹å®¢æˆ·è¿›è¡Œè¥é”€ï¼Œå¹¶å¯¹è¥é”€æ•ˆæœè¿›è¡Œåé¦ˆï¼Œè¡¡é‡æ•°æ®äº§å“çš„å•†ä¸šä»·å€¼ã€‚<br>åˆ©ç”¨åé¦ˆæ•°æ®æ¥ä¿®æ­£è¥é”€æ´»åŠ¨å’Œæé«˜ROIã€‚å½¢æˆå¸‚åœºè¥é”€çš„é—­ç¯ï¼Œå®ç°æ•°æ®å•†ä¸šä»·å€¼å˜ç°çš„é—­ç¯ã€‚<br>å¦å¤–DMPè¿˜å¯ä»¥æ·±åº¦åˆ†æå®¢æˆ·ï¼Œä¾æ®å®¢æˆ·çš„æ¶ˆè´¹ç‰¹å¾ã€å…´è¶£çˆ±å¥½ã€ç¤¾äº¤éœ€æ±‚ã€ä¿¡ç”¨ä¿¡æ¯æ¥å¼€å‘è®¾è®¡äº§å“ï¼Œä¸ºé‡‘èä¼ä¸šçš„äº§å“å¼€å‘æä¾›æ•°æ®æ”¯æ’‘ï¼Œå¹¶ä¸ºäº§å“é”€å”®æ–¹å¼æä¾›åœºæ™¯æ•°æ®ã€‚<br>ç®€å•ä»‹ç»ä¸€äº›DMPå¯ä»¥åšåˆ°çš„æ•°æ®åœºæ™¯å˜ç°ã€‚<br>Aï¼šå¯»æ‰¾åˆ†æœŸå®¢æˆ·<br>åˆ©ç”¨é“¶è”æ•°æ®+è‡ªèº«æ•°æ®+ä¿¡ç”¨å¡æ•°æ®ï¼Œå‘ç°ä¿¡ç”¨å¡æ¶ˆè´¹è¶…è¿‡å…¶æœˆæ”¶å…¥çš„ç”¨æˆ·ï¼Œæ¨èå…¶è¿›è¡Œæ¶ˆè´¹åˆ†æœŸã€‚<br>Bï¼šå¯»æ‰¾é«˜ç«¯èµ„äº§å®¢æˆ·<br>åˆ©ç”¨é“¶è”æ•°æ®+ç§»åŠ¨ä½ç½®æ•°æ®(åˆ«å¢…/é«˜æ¡£å°åŒº)+ç‰©ä¸šè´¹ä»£æ‰£æ•°æ®+é“¶è¡Œè‡ªèº«æ•°æ®+æ±½è½¦å‹å·æ•°æ®ï¼Œå‘ç°åœ¨é“¶è¡Œèµ„äº§è¾ƒå°‘ï¼Œåœ¨å…¶ä»–è¡Œèµ„äº§è¾ƒå¤šçš„ç”¨æˆ·ï¼Œä¸ºå…¶æä¾›é«˜ç«¯èµ„äº§ç®¡ç†æœåŠ¡<br>Cï¼šéœ€æ‰¾ç†è´¢å®¢æˆ·<br>åˆ©ç”¨è‡ªèº«æ•°æ®(äº¤æ˜“+å·¥èµ„)+ç§»åŠ¨ç«¯ç†è´¢å®¢æˆ·ç«¯/ç”µå•†æ´»è·ƒæ•°æ®ã€‚å‘ç°å®¢æˆ·å°†å·¥èµ„/èµ„äº§è½¬åˆ°å¤–éƒ¨ï¼Œä½†æ˜¯ç”µå•†æ¶ˆè´¹ä¸æ´»è·ƒå®¢æˆ·ï¼Œå…¶äº’è”ç½‘ç†è´¢å¯èƒ½æ€§è¾ƒå¤§ï¼Œå¯ä»¥ä¸ºå…¶æä¾›ç†è´¢æœåŠ¡ï¼Œå°†èµ„é‡‘ç•™åœ¨æœ¬è¡Œã€‚<br>Dï¼šå¯»æ‰¾å¢ƒå¤–æ¸¸å®¢æˆ·<br>åˆ©ç”¨è‡ªèº«å¡æ¶ˆè´¹æ•°æ®+ç§»åŠ¨è®¾å¤‡ä½ç½®ä¿¡æ¯+ç¤¾äº¤å¥½å¢ƒå¤–å¼ºç›¸å…³æ•°æ®(æ”»ç•¥ï¼Œèˆªçº¿ï¼Œæ™¯ç‚¹ï¼Œè´¹ç”¨)ï¼Œå¯»æ‰¾å¢ƒå¤–æ¸¸å®¢æˆ·ä¸ºå…¶æä¾›é‡‘èæœåŠ¡ã€‚<br>Eï¼šå¯»æ‰¾è´·æ¬¾å®¢æˆ·ï¼š<br>åˆ©ç”¨è‡ªèº«æ•°æ®(äººå£å±æ€§+ä¿¡ç”¨ä¿¡æ¯)+ç§»åŠ¨è®¾å¤‡ä½ç½®ä¿¡æ¯+ç¤¾äº¤è´­æˆ¿/æ¶ˆè´¹å¼ºç›¸å…³ä¿¡æ¯ï¼Œå¯»æ‰¾å³å°†è´­è½¦/è´­æˆ¿çš„ç›®æ ‡å®¢æˆ·ï¼Œä¸ºå…¶æä¾›é‡‘èæœåŠ¡(æŠµæŠ¼è´·æ¬¾/æ¶ˆè´¹è´·æ¬¾)ã€‚</p>
<h3 id="2-ä¿é™©è¡Œä¸šç”¨æˆ·ç”»åƒå®è·µ"><a href="#2-ä¿é™©è¡Œä¸šç”¨æˆ·ç”»åƒå®è·µ" class="headerlink" title="2)ä¿é™©è¡Œä¸šç”¨æˆ·ç”»åƒå®è·µ"></a>2)ä¿é™©è¡Œä¸šç”¨æˆ·ç”»åƒå®è·µ</h3><p>ä¿é™©è¡Œä¸šçš„äº§å“æ˜¯ä¸€ä¸ªé•¿å‘¨æœŸäº§å“ï¼Œä¿é™©å®¢æˆ·å†æ¬¡è´­ä¹°ä¿é™©äº§å“çš„è½¬åŒ–ç‡å¾ˆé«˜ï¼Œç»è¥å¥½è€å®¢æˆ·æ˜¯ä¿é™©å…¬å¸ä¸€é¡¹é‡è¦ä»»åŠ¡ã€‚ä¿é™©å…¬å¸å†…éƒ¨çš„äº¤æ˜“ç³»ç»Ÿä¸å¤šï¼Œäº¤æ˜“æ–¹å¼ä¸æ˜¯å¾ˆå¤æ‚ï¼Œæ•°æ®ä¸»è¦é›†ä¸­åœ¨äº§å“ç³»ç»Ÿå’Œäº¤æ˜“ç³»ç»Ÿä¹‹ä¸­ï¼Œå®¢æˆ·å…³ç³»ç®¡ç†ç³»ç»Ÿä¸­ä¹ŸåŒ…å«ä¸°å¯Œäº†ä¿¡æ¯ï¼Œä½†æ˜¯æ•°æ®é›†ä¸­åœ¨å¾ˆå¤šä¿é™©å…¬å¸è¿˜æ²¡æœ‰å®Œæˆï¼Œæ•°æ®ä»“åº“å»ºè®¾å¯èƒ½éœ€è¦åœ¨ç”¨æˆ·ç”»åƒå»ºè®¾å‰å®Œæˆã€‚<br>ä¿é™©å…¬å¸ä¸»è¦æ•°æ®æœ‰äººå£å±æ€§ä¿¡æ¯ï¼Œä¿¡ç”¨ä¿¡æ¯ï¼Œäº§å“é”€å”®ä¿¡æ¯ï¼Œå®¢æˆ·å®¶äººä¿¡æ¯ã€‚ç¼ºå°‘å…´è¶£çˆ±å¥½ã€æ¶ˆè´¹ç‰¹å¾ã€ç¤¾äº¤ä¿¡æ¯ç­‰ä¿¡æ¯ã€‚ä¿é™©äº§å“ä¸»è¦æœ‰å¯¿é™©ï¼Œè½¦é™©ï¼Œä¿éšœï¼Œè´¢äº§é™©ï¼Œæ„å¤–é™©ï¼Œå…»è€é™©ï¼Œæ—…æ¸¸é™©ã€‚<br>ä¿é™©è¡Œä¸šDMPç”¨æˆ·ç”»åƒçš„ä¸šåŠ¡åœºæ™¯éƒ½æ˜¯å›´ç»•ä¿é™©äº§å“è¿›è¡Œçš„ï¼Œç®€å•çš„åº”ç”¨åœºæ™¯å¯ä»¥æ˜¯ã€‚<br>Aï¼šä¾æ®è‡ªèº«æ•°æ®(ä¸ªäººå±æ€§)+å¤–éƒ¨å…»è½¦Appæ´»è·ƒæƒ…å†µï¼Œä¸ºä¿é™©å…¬å¸æ‰¾åˆ°è½¦é™©å®¢æˆ·<br>Bï¼šä¾æ®è‡ªèº«æ•°æ®(ä¸ªäººå±æ€§)+ç§»åŠ¨è®¾å¤‡ä½ç½®ä¿¡æ¯â€”æˆ·å¤–è¿åŠ¨äººç¾¤ï¼Œä¸ºä¿é™©ä¼ä¸šæ‰¾åˆ°å•†æ—…äººç¾¤ï¼Œæ¨é”€æ„å¤–é™©å’Œä¿éšœé™©ã€‚<br>Cï¼šä¾æ®è‡ªèº«æ•°æ®(å®¶äººæ•°æ®)+äººç”Ÿé˜¶æ®µä¿¡æ¯ï¼Œä¸ºç”¨æˆ·æ¨èç†è´¢ä¿é™©ï¼Œå¯¿é™©ï¼Œä¿éšœä¿é™©ï¼Œå…»è€é™©ï¼Œæ•™è‚²é™©<br>Dï¼šä¾æ®è‡ªèº«æ•°æ®+å¤–éƒ¨æ•°æ®ï¼Œä¸ºé«˜ç«¯äººå£«æä¾›è´¢äº§é™©å’Œå¯¿é™©</p>
<h3 id="3-è¯åˆ¸è¡Œä¸šç”¨æˆ·ç”»åƒ"><a href="#3-è¯åˆ¸è¡Œä¸šç”¨æˆ·ç”»åƒ" class="headerlink" title="3)è¯åˆ¸è¡Œä¸šç”¨æˆ·ç”»åƒ"></a>3)è¯åˆ¸è¡Œä¸šç”¨æˆ·ç”»åƒ</h3><p>2015å¹´4æœˆ13æ—¥ï¼Œä¸€ç é€šå®æ–½ä¹‹åï¼Œè¯åˆ¸è¡Œä¸šé¢ä¸´äº†äº’è”ç½‘è¯åˆ¸å¹³å°çš„å¼ºåŠ›ç«äº‰ï¼Œä¾æ®TalkingDataå‘å¸ƒçš„é‡‘èAppæ’è¡Œæ¦œï¼Œç§»åŠ¨äº’è”ç½‘è¯åˆ¸Appï¼Œæ’åå‰5ä½çš„è¯åˆ¸ç±»Appï¼Œåªæœ‰ä¸€å®¶ä¼ ç»Ÿåˆ¸å•†åæ³°è¯åˆ¸ã€‚æ’åç¬¬ä¸€çš„äº’è”ç½‘åˆ¸å•†åŒåŒ–é¡ºè¦†è£…æœºé‡æ˜¯æ’åç¬¬ä¸€ä¼ ç»Ÿåˆ¸å•†çš„6å€ï¼Œå‰ä¸‰åçš„äº’è”åˆ¸å•†æ€»ä½“è¦†ç›–ç”¨æˆ·æ¥è¿‘6000ä¸‡ç”¨æˆ·ã€‚ç”¨æˆ·æ€»æ•°è¿˜åœ¨ä¸æ–­å¢åŠ ã€‚ä¼ ç»Ÿè¯åˆ¸è¡Œä¸šç°åœ¨é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜æ˜¯ç”¨æˆ·äº¤æ˜“è´¦æˆ·çš„äº‰å¤ºï¼Œè¯åˆ¸è¡Œä¸šå¦‚ä½•å¢åŠ æ–°ç”¨æˆ·?å¦‚ä½•ç•™ä½ç”¨æˆ·?å¦‚ä½•æé«˜è¯åˆ¸è¡Œä¸šç”¨æˆ·çš„æ´»è·ƒ?å¦‚ä½•æé«˜å•ä¸ªå®¢æˆ·çš„æ”¶å…¥?æ˜¯è¯åˆ¸è¡Œä¸šä¸»è¦çš„ä¸šåŠ¡éœ€æ±‚ã€‚<br>è¯åˆ¸è¡Œä¸šæ‹¥æœ‰çš„æ•°æ®ç±»å‹æœ‰ä¸ªäººå±æ€§ä¿¡æ¯ä¾‹å¦‚ç”¨æˆ·åç§°ï¼Œæ‰‹æœºå·ç ï¼Œå®¶åº­åœ°å€ï¼Œé‚®ä»¶åœ°å€ç­‰ã€‚è¯åˆ¸å…¬å¸è¿˜æ‹¥æœ‰äº¤æ˜“ç”¨æˆ·çš„èµ„äº§å’Œäº¤æ˜“çºªå½•ï¼ŒåŒæ—¶è¿˜æ‹¥æœ‰ç”¨æˆ·æ”¶ç›Šæ•°æ®ï¼Œåˆ©ç”¨è¿™äº›æ•°æ®å’Œå¤–éƒ¨æ•°æ®ï¼Œè¯åˆ¸å…¬å¸å¯ä»¥åˆ©ç”¨æ•°æ®å»ºç«‹ä¸šåŠ¡åœºæ™¯ï¼Œç­›é€‰ç›®æ ‡å®¢æˆ·ï¼Œä¸ºç”¨æˆ·æä¾›é€‚åˆçš„äº§å“ï¼ŒåŒæ—¶æé«˜å•ä¸ªå®¢æˆ·æ”¶å…¥ã€‚<br>è¯åˆ¸å…¬å¸å¯ä»¥åˆ©ç”¨ç”¨æˆ·ç”»åƒæ•°æ®æ¥è¿›è¡Œäº§å“è®¾è®¡ï¼Œä¸‹é¢ä¸¾å‡ ä¸ªä¾‹å­ï¼Œçœ‹çœ‹ç”¨æˆ·ç”»åƒå’Œç”¨æˆ·åˆ†ææ¥å¸®åŠ©è¯åˆ¸å…¬å¸åˆ›é€ å•†ä¸šä»·å€¼ã€‚</p>
<h2 id="ä¸ƒã€å¤–éƒ¨æ•°æ®ä»‹ç»"><a href="#ä¸ƒã€å¤–éƒ¨æ•°æ®ä»‹ç»" class="headerlink" title="ä¸ƒã€å¤–éƒ¨æ•°æ®ä»‹ç»"></a>ä¸ƒã€å¤–éƒ¨æ•°æ®ä»‹ç»</h2><p>é‡‘èä¼ä¸šå†…éƒ¨æ•°æ®ä¸»è¦é›†ä¸­åœ¨ä¸ªäººå±æ€§ï¼Œä¿¡ç”¨å±æ€§å’Œæ¶ˆè´¹ç‰¹å¾ä¸Šï¼Œç¼ºå°‘ç¤¾äº¤å±æ€§å’Œå…´è¶£åå¥½ç­‰ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹è·å¾—ã€‚<br>ç¤¾äº¤æ•°æ®å°±æ˜¯å®¢æˆ·åœ¨ç¤¾äº¤åª’ä½“ä¸Šå‘è¡¨çš„è¨€è®ºå’Œè¡Œä¸ºï¼Œå¯ä»¥æ˜¯è¯„è®ºï¼Œæ–‡ç« ï¼Œå›¾ç‰‡ï¼Œç”šè‡³å¯ä»¥æ˜¯è¡¨æƒ…ç¬¦å·ï¼ŒéŸ³é¢‘å’Œè§†é¢‘ã€‚ç¤¾äº¤æ•°æ®å¯ä»¥ä¾é ç¬¬ä¸‰æ–¹å¹³å°ï¼Œåœ¨ç¤¾äº¤ç½‘ç«™ä¸Šåˆ©ç”¨çˆ¬è™«æŠ€æœ¯è¿›è¡Œè·å¾—(Spider)ã€‚ç¤¾äº¤æ•°æ®çš„æ‰“é€šæ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå¦‚æœèƒ½å¤Ÿå®¢æˆ·çš„æˆæƒæœ€å¥½ï¼Œé‡‘èä¼ä¸šå°±å¯ä»¥å°†ç¤¾äº¤æ•°æ®çº³å…¥åˆ°ç”¨æˆ·ç”»åƒä¹‹ä¸­ã€‚ç¤¾äº¤æ•°æ®å…·æœ‰å®æ—¶å’Œåæ˜ å†…å¿ƒéœ€è¦çš„ç‰¹ç‚¹ï¼Œå¯Œå›½é“¶è¡Œå·²ç»å°†ç¤¾äº¤æ•°æ®ä½œä¸ºåˆ†æå®¢æˆ·éœ€æ±‚çš„ä¸€ä¸ªé‡è¦æ•°æ®çº¬åº¦ã€‚ä¾‹å¦‚å¦‚æœæŸä¸€ä¸ªå®¢æˆ·åœ¨ç¤¾äº¤åª’ä½“ä¸Šå‘è¡¨äº†ä¸€ä¸ªé—®é¢˜ï¼Œç½—é©¬æœ‰å“ªäº›å¥½ç©çš„åœ°æ–¹ï¼Œé‡‘èä¼ä¸šå°±ä¼šæ¨æµ‹å®¢æˆ·å¯èƒ½è¿‘æœŸä¼šæœ‰å‡ºå¢ƒæ¸¸çš„è®¡åˆ’ï¼Œå°±ä¼šå‘å®¢æˆ·æ¨é”€ä¸€äº›æ—…æ¸¸ç›¸å…³äº§å“ã€‚<br>ç¤¾äº¤åª’ä½“æ•°æ®æ­£åœ¨æˆä¸ºé‡‘èä¼ä¸šç§¯æäº‰å–è·å¾—çš„æ•°æ®ï¼Œé™¤äº†åˆ©ç”¨ç½‘ç»œçˆ¬è™«æŠ€æœ¯åˆ°å¾®åšä¸Šè¿›è¡Œæ•°æ®é‡‡é›†ä¹‹å¤–ï¼Œé‡‘èä¼ä¸šè‡ªèº«ç½‘ç«™ä¸Šåˆ°æ–‡æœ¬æ•°æ®é‡‡é›†å’Œå‘¼å«ä¸­å¿ƒ(callcenter)çºªå½•çš„ä¿¡æ¯éƒ½å¯ä»¥è¿›è¡Œæ–‡æœ¬æŒ–æ˜ã€‚é€šè¿‡å®¢æˆ·ç¼–å·ï¼Œè¿›è¡Œæ‰“é€šï¼Œå°†å…¶è¡¥å……åˆ°å®¢æˆ·ç”»åƒä¹‹ä¸­ã€‚ç¤¾äº¤æ•°æ®éœ€è¦é€šè¿‡æ•°æ®æŒ–æ˜å°†å…¶å®šä¹‰ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œå¹¶ä¸”åŒä¸šåŠ¡åœºæ™¯ã€å®¢æˆ·éœ€æ±‚å‘ç»“åˆï¼Œæ¸…æ™°è¿›è¡Œåˆ†ç±»ã€‚ä¾‹å¦‚å°†æ¯å©´è®ºå›å‘è¨€æ´»è·ƒçš„ç”¨æˆ·å®šä¹‰ä¸ºæ½œåœ¨æ•™è‚²éœ€æ±‚å®¢æˆ·ï¼Œå°†å­¦ç”Ÿè®ºå›æ´»è·ƒçš„å®¢æˆ·å®šä¹‰ä¸ºå­¦åŒºæˆ¿éœ€è¦å®¢æˆ·ï¼Œå°†å¢ƒå¤–è‡ªåŠ©æ¸¸è®ºå›ä¸Šæ´»è·ƒçš„å®¢æˆ·å®šä¹‰ä¸ºå¢ƒå¤–æ—…æ¸¸å®¢æˆ·ï¼Œå°†é›ªçƒä¸Šæ´»è·ƒçš„å®¢æˆ·å®šä¹‰ä¸ºç†è´¢å®¢æˆ·ç­‰ã€‚é‡‘èä¼ä¸šå®Œå…¨å¯ä»¥ä»ç¤¾äº¤æ•°æ®ä¸­æŒ–æ˜å‡ºå®¢æˆ·è¿‘æœŸçš„æ¶ˆè´¹éœ€æ±‚ï¼ŒåŠæ—¶è¿›è¡Œå¸‚åœºè¥é”€å’Œå®šåˆ¶äº§å“ã€‚<br>å…´è¶£çˆ±å¥½æ•°æ®å¯ä»¥å€ŸåŠ©äºç§»åŠ¨å¤§æ•°æ®ä½ç½®ä¿¡æ¯è·å¾—ï¼Œå®¢æˆ·æ‰‹æœºè®¾å¤‡çš„ä½ç½®è½¨è¿¹ä¿¡æ¯å¯ä»¥æ­ç¤ºå®¢æˆ·å–œæ¬¢ä½•ç§å“ç‰Œï¼Œå–œæ¬¢åƒè¾£è¿˜æ˜¯åƒç«é”…ï¼Œå®¢æˆ·å–œæ¬¢æ—…æ¸¸è¿˜æ˜¯å–œæ¬¢å®…åœ¨å®¶é‡Œï¼Œå®¢æˆ·å–œæ¬¢çœ‹ç”µå½±è¿˜æ˜¯å–œæ¬¢è¿åŠ¨ã€‚å®¢æˆ·å–œæ¬¢ä¸­æ¡£å“ç‰Œè¿˜æ˜¯é«˜æ¡£å“ç‰Œï¼Œå®¢æˆ·å–œæ¬¢å–èŒ¶è¿˜æ˜¯å–å’–å•¡ã€‚ç§»åŠ¨æ‰‹æœºä¸ŠAppçš„å®‰è£…æƒ…å†µå’Œæ´»åŠ¨é¢‘æ¬¡ä¸€æ ·å¯ä»¥æ­ç¤ºå®¢æˆ·çš„å…´è¶£å’Œçˆ±å¥½ã€‚åŒæ—¶ç§»åŠ¨å¤§æ•°æ®è¿›è¡ŒåŠ å·¥ä¹‹åè¿˜å¯ä»¥å‘Šè¯‰é‡‘èä¼ä¸šï¼Œå®¢æˆ·è¿‘æœŸçš„éœ€æ±‚æ˜¯ä¹°è½¦è¿˜æ˜¯ä¹°æˆ¿ã€‚<br>å¤–éƒ¨æ•°æ®å¼•å…¥è¿‡ç¨‹ä¸­ï¼Œé‡‘èä¼ä¸šé¢ä¸´çš„å·¨å¤§æŒ‘æˆ˜æ˜¯å¤–éƒ¨æ•°æ®çš„è¦†ç›–ç‡ï¼Œå¦‚ä½•æ‰“é€šå†…å¤–éƒ¨æ•°æ®ï¼Œå¤–éƒ¨æ•°æ®åŒå†…éƒ¨å®¢æˆ·çš„åŒ¹é…ç‡ï¼Œå¤–éƒ¨æ•°æ®åŒä¸šåŠ¡çš„ç›¸å…³åº¦ï¼Œå¤–éƒ¨æ•°æ®çš„æ´»è·ƒç¨‹åº¦ç­‰ã€‚ç”¨æˆ·ç”»åƒå¹³å°(DMP)å¯ä»¥é€šè¿‡æŠ€æœ¯æ‰‹æ®µå°†å¤–éƒ¨æ•°æ®å¼•å…¥åˆ°é‡‘èä¼ä¸šå†…éƒ¨ï¼Œå»ºç«‹æ ‡å‡†çš„æ ‡ç­¾ä½“ç³»ï¼Œæä¾›çµæ´»çš„ç”¨æˆ·ç”»åƒæ–¹å¼ï¼ŒæŒ‰ç…§ä¸šåŠ¡åœºæ™¯è¿›è¡Œç­›é€‰å®¢æˆ·ã€‚</p>
<h2 id="å…«ã€ç§»åŠ¨å¤§æ•°æ®çš„å•†ä¸šä»·å€¼"><a href="#å…«ã€ç§»åŠ¨å¤§æ•°æ®çš„å•†ä¸šä»·å€¼" class="headerlink" title="å…«ã€ç§»åŠ¨å¤§æ•°æ®çš„å•†ä¸šä»·å€¼"></a>å…«ã€ç§»åŠ¨å¤§æ•°æ®çš„å•†ä¸šä»·å€¼</h2><p>ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼Œç§»åŠ¨å¤§æ•°æ®å…·æœ‰è¾ƒé«˜çš„å•†ä¸šä»·å€¼ã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·ä¸å–œæ¬¢ä¸€ä¸ªAppï¼Œå…¶ä¸ä¼šè£…åœ¨æ‰‹æœºä¸Šã€‚å®¢æˆ·ç»å¸¸ä½¿ç”¨çš„Appå¯ä»¥æ¨æµ‹ç”¨æˆ·çš„å…´è¶£çˆ±å¥½å’Œæ¶ˆè´¹åå¥½ã€‚å¦å¤–ç§»åŠ¨è®¾å¤‡çš„ä½ç½®ä¿¡æ¯å¯ä»¥å¸®åŠ©é‡‘èä¼ä¸šäº†è§£å®¢æˆ·è¡Œä¸ºè½¨è¿¹ã€å…´è¶£çˆ±å¥½ã€å“ç‰Œåå¥½å’Œæ¶ˆè´¹éœ€æ±‚ã€‚</p>
<h3 id="1-ç§»åŠ¨Appæä¾›ä¸€åˆ‡æœåŠ¡ï¼ŒAppå¯ä»¥åæ˜ ç”¨æˆ·å–œå¥½"><a href="#1-ç§»åŠ¨Appæä¾›ä¸€åˆ‡æœåŠ¡ï¼ŒAppå¯ä»¥åæ˜ ç”¨æˆ·å–œå¥½" class="headerlink" title="1)ç§»åŠ¨Appæä¾›ä¸€åˆ‡æœåŠ¡ï¼ŒAppå¯ä»¥åæ˜ ç”¨æˆ·å–œå¥½"></a>1)ç§»åŠ¨Appæä¾›ä¸€åˆ‡æœåŠ¡ï¼ŒAppå¯ä»¥åæ˜ ç”¨æˆ·å–œå¥½</h3><p>æ™ºèƒ½æ‰‹æœºä¸Šå®‰è£…çš„Appæ­£åœ¨ä»£æ›¿PCäº’è”ç½‘ä¸ºæ‰€æœ‰å®¢æˆ·æä¾›æœåŠ¡ï¼Œæ¸…æ™¨èµ·åºŠå¯ä»¥çœ‹çœ‹å¢¨è¿¹å¤©æ°”ï¼Œäº†è§£ä¸€ä¸‹ä»Šå¤©çš„å¤©æ°”æƒ…å†µã€‚å‡ºé—¨æ—¶å¯ä»¥é€šè¿‡å˜€å˜€æ‰“è½¦æ¥é¢„å®šå‡ºç§Ÿè½¦ï¼Œå®‰æ’å‡ºè¡Œã€‚æˆ–è€…é€šè¿‡ç™¾åº¦åœ°å›¾æ¥äº†è§£è·¯å†µä¿¡æ¯ï¼Œå†³å®šè¿›è¡Œä»å“ªæ¡è·¯åˆ°å…¬å¸ã€‚<br>å¿«åˆ°ä¸­åˆæ—¶ï¼Œå¯ä»¥é€šè¿‡é¥¿äº†å—æˆ–è€…ç™¾åº¦å¤–å–é¢„å®šåˆé¤ï¼Œå¦‚æœæƒ³å‡ºå»åƒé¥­å¯ä»¥åˆ©ç”¨å¤§ä¼—ç‚¹è¯„è®¢é¤å’Œä¹°å•ã€‚ä¸­åˆå¯ä»¥åˆ©ç”¨æºç¨‹Appé¢„å®šå®¶åº­æ—…è¡Œæœºç¥¨å’Œé…’åº—ï¼Œè¿˜å¯ä»¥å°†é€šè¿‡Appçœ‹çœ‹ç†è´¢äº§å“ã€‚å¦‚æœéœ€è¦çœ‹ç”µå½±ï¼Œå¯ä»¥é€šè¿‡æ ¼ç“¦æ‹‰æ¥é¢„å®šè¦ç”µå½±ç¥¨ï¼Œå¦‚æœéœ€è¦çœ‹åŒ»ç”Ÿï¼Œå¯ä»¥é€šè¿‡å¾®åŒ»ç½‘é¢„çº¦åŒ»ç”Ÿã€‚æ™šä¸Šå¯ä»¥é€šè¿‡æ·˜å®æ¥è´­ç‰©ï¼Œé€šè¿‡å­¦ä¹ å®æ¥ç›‘ç£å­å¥³æ•™è‚²ç­‰ã€‚å¯ä»¥çœ‹å‡ºç§»åŠ¨Appå·²ç»å¯ä»¥æ»¡è¶³äººä»¬å¤§éƒ¨åˆ†ç”Ÿæ´»éœ€è¦ï¼Œæä¾›äº†äººä»¬çš„è¡£é£Ÿä½è¡Œã€æ•™è‚²ã€åŒ»ç–—ã€æ—…æ¸¸ã€é‡‘èç­‰æœåŠ¡ã€‚ç§»åŠ¨AppåŒ…å›´äº†äººä»¬çš„æ—¥å¸¸ç”Ÿæ´»ï¼Œæˆä¸ºäººä»¬æ¶ˆè´¹çš„ä¸»è¦åœºæ‰€ã€‚<br>æ™ºèƒ½æ‰‹æœºä¸ŠAppä½¿ç”¨çš„é¢‘ç‡ï¼Œå¯ä»¥ä»£è¡¨ç”¨æˆ·çš„å–œå¥½ã€‚ä¾‹å¦‚å–œæ¬¢ç†è´¢çš„å®¢æˆ·ï¼Œå…¶æ™ºèƒ½æ‰‹æœºä¸Šä¸€å®šä¼šå®‰è£…ç†è´¢Appï¼Œå¹¶ç»å¸¸ä½¿ç”¨;æ¯å©´äººç¾¤ä¹Ÿä¼šå®‰è£…å’Œæ¯å©´ç›¸å…³çš„Appï¼Œé¢‘ç¹ä½¿ç”¨;å•†æ—…äººç¾¤ä½¿ç”¨å•†æ—…Appçš„é¢‘ç‡ä¸€å®šä¼šé«˜äºå…¶ä»–ç§»åŠ¨ç”¨æˆ·ã€‚80åã€90åçš„æ¶ˆè´¹è¡Œä¸ºå°†ä¼šä»¥ç§»åŠ¨äº’è”ç½‘ä¸ºä¸»ï¼ŒAppçš„å®‰è£…å’Œæ´»è·ƒæ•°æ®æ›´åŠ èƒ½å¤Ÿååº”å‡ºå¹´è½»äººçš„æ¶ˆè´¹åå¥½ã€‚</p>
<h3 id="2-æ™ºèƒ½è®¾å¤‡çš„ä½ç½®ä¿¡æ¯ï¼Œå•†ä¸šä»·å€¼å¹¿å¤§"><a href="#2-æ™ºèƒ½è®¾å¤‡çš„ä½ç½®ä¿¡æ¯ï¼Œå•†ä¸šä»·å€¼å¹¿å¤§" class="headerlink" title="2)æ™ºèƒ½è®¾å¤‡çš„ä½ç½®ä¿¡æ¯ï¼Œå•†ä¸šä»·å€¼å¹¿å¤§"></a>2)æ™ºèƒ½è®¾å¤‡çš„ä½ç½®ä¿¡æ¯ï¼Œå•†ä¸šä»·å€¼å¹¿å¤§</h3><p>æ™ºèƒ½æ‰‹æœºè®¾å¤‡çš„ä½ç½®ä¿¡æ¯ä»£è¡¨äº†æ¶ˆè´¹è€…çš„ä½ç½®è½¨è¿¹ï¼Œè¿™ä¸ªè½¨è¿¹å¯ä»¥æ¨æµ‹å‡ºæ¶ˆè´¹è€…çš„æ¶ˆè´¹åå¥½å’Œä¹ æƒ¯ã€‚åœ¨ç¾å›½ï¼Œç§»åŠ¨è®¾å¤‡ä½ç½®ä¿¡æ¯çš„å•†ä¸šåŒ–è¾ƒä¸ºæˆç†Ÿï¼ŒGPSæ•°æ®æ­£åœ¨å¸®åŠ©å¾ˆå¤šä¼ä¸šè¿›è¡Œæ•°æ®å˜ç°ï¼Œæé«˜ç¤¾ä¼šè¿è¥æ•ˆç‡ã€‚åœ¨ä¸­å›½ï¼Œç§»åŠ¨å¤§æ•°æ®çš„å•†ä¸šåº”ç”¨åˆšåˆšå¼€å§‹ï¼Œåœ¨æˆ¿åœ°äº§ä¸šã€é›¶å”®è¡Œä¸šã€é‡‘èè¡Œä¸šã€å¸‚åœºåˆ†æç­‰é¢†åŸŸå–å¾—äº†ä¸€äº›æ•ˆæœã€‚ç§»åŠ¨å¤§æ•°æ®ä¸­çš„ä½ç½®ä¿¡æ¯ä»£è¡¨äº†ç”¨æˆ·è½¨è¿¹ï¼Œå•†ä¸šåº”ç”¨è¾ƒæ—©ã€‚2014å¹´ï¼Œç¾å›½ç§»åŠ¨è®¾å¤‡ä½ç½®ä¿¡æ¯çš„å¸‚åœºè§„æ¨¡æ¥è¿‘1000äº¿ç¾é‡‘ã€‚ä½†ä¸­å›½ç§»åŠ¨è®¾å¤‡ä½ç½®ä¿¡æ¯çš„å•†ä¸šåº”ç”¨æ‰åˆšåˆšå¼€å§‹ã€‚ç›®å‰ä¸»è¦çš„åº”ç”¨åœ¨äº’è”ç½‘é‡‘èçš„åæ¬ºè¯ˆé¢†åŸŸã€‚<br>çº¿ä¸Šçš„æ¬ºè¯ˆè¡Œä¸ºå…·æœ‰è¾ƒé«˜çš„éšè”½æ€§ï¼Œå¾ˆéš¾è¯†åˆ«å’Œä¾¦æµ‹ã€‚P2Pè´·æ¬¾ç”¨æˆ·å¾ˆå¤§ä¸€éƒ¨åˆ†æ¥æºäºçº¿ä¸Šï¼Œå› æ­¤æ¶æ„æ¬ºè¯ˆäº‹ä»¶å‘ç”Ÿåœ¨çº¿ä¸Šçš„é£é™©è¿œè¿œå¤§äºçº¿ä¸‹ã€‚ä¸­å›½çš„å¾ˆå¤šæ•°æ®å¤„äºå°é—­çŠ¶æ€ï¼ŒP2På…¬å¸åœ¨å®¢æˆ·çœŸå®ä¿¡æ¯éªŒè¯æ–¹é¢é¢ä¸´è¾ƒå¤§çš„æŒ‘æˆ˜ã€‚<br>ç§»åŠ¨å¤§æ•°æ®å¯ä»¥éªŒè¯P2På®¢æˆ·çš„å±…ä½åœ°ç‚¹ï¼Œä¾‹å¦‚æŸä¸ªå®¢æˆ·åœ¨åˆ©ç”¨æ‰‹æœºç”³è¯·è´·æ¬¾æ—¶ï¼Œå¡«å†™è‡ªå·±å±…ä½åœ°æ˜¯ä¸Šæµ·ã€‚ä½†æ˜¯P2Pä¼ä¸šä¾æ®å…¶æä¾›çš„æ‰‹æœºè®¾å¤‡ä¿¡æ¯ï¼Œå‘ç°å…¶è¿‡å»ä¸‰ä¸ªæœˆä»æ¥æ²¡æœ‰å±…ä½åœ¨ä¸Šæµ·ï¼Œè¿™ä¸ªäººæäº¤çš„ä¿¡æ¯å¯èƒ½æ˜¯å‡ä¿¡æ¯ï¼Œå‘ç”Ÿæ¶æ„æ¬ºè¯ˆçš„é£é™©è¾ƒé«˜ã€‚ç§»åŠ¨è®¾å¤‡çš„ä½ç½®ä¿¡æ¯å¯ä»¥è¾¨è¯†å‡ºè®¾å¤‡æŒæœ‰äººçš„å±…ä½åœ°ç‚¹ï¼Œå¸®åŠ©P2På…¬å¸éªŒè¯è´·æ¬¾ç”³è¯·äººçš„å±…ä½åœ°ã€‚<br>å€Ÿæ¬¾ç”¨æˆ·çš„å·¥ä½œå•ä½æ˜¯ç”¨æˆ·è¿˜æ¬¾èƒ½åŠ›çš„å¼ºç›¸å…³ä¿¡æ¯ï¼Œå…·æœ‰é«˜è–ªå·¥ä½œçš„ç”¨æˆ·ï¼Œå…¶è´·æ¬¾ä¿¡ç”¨è¿çº¦ç‡è¾ƒä½ã€‚è¿™äº›å®¢æˆ·æˆä¸ºå¾ˆå¤šè´·æ¬¾å¹³å°ç§¯æäº‰å–çš„å®¢æˆ·ï¼Œä¹Ÿæ˜¯æ¶æ„æ¬ºè¯ˆå›¢ä¼™ä¸»è¦å‡å†’çš„å®¢æˆ·ã€‚<br>æŸä¸ªç”¨æˆ·åœ¨ç”³è¯·è´·æ¬¾æ—¶ï¼Œå¦‚æœå£°æ˜è‡ªå·±æ˜¯å·¥ä½œåœ¨ä¸Šæµ·é™†å®¶å˜´é‡‘èä¼ä¸šçš„é«˜è–ªäººå£«ï¼Œå…¶è´·æ¬¾å®¡æ‰¹ä¼šå¾ˆå¿«å¹¶ä¸”é¢åº¦ä¹Ÿä¼šè¾ƒé«˜ã€‚ä½†æ˜¯P2På…¬å¸åˆ©ç”¨ç§»åŠ¨å¤§æ•°æ®ï¼Œå‘ç°è¿™ä¸ªç”¨æˆ·åœ¨è¿‡å»çš„ä¸‰ä¸ªæœˆé‡Œé¢ï¼Œä»æ¥æ²¡æœ‰å‡ºç°åœ¨é™†å®¶å˜´ï¼Œå¤§å¤šæ•°æ—¶é—´åœ¨åŸä¹¡ç»“åˆå¤„æ´»åŠ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨æˆ·æ¶æ„æ¬ºè¯ˆçš„å¯èƒ½æ€§å°±è¾ƒå¤§ã€‚<br>ç§»åŠ¨å¤§æ•°æ®å¯ä»¥å¸®åŠ©P2På…¬å¸åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¥éªŒè¯è´·æ¬¾ç”¨æˆ·çœŸå®å·¥ä½œåœ°ç‚¹ï¼Œé™ä½çŠ¯ç½ªåˆ†å­åˆ©ç”¨é«˜è–ªå·¥ä½œè¿›è¡Œæ¶æ„æ¬ºè¯ˆçš„é£é™©ã€‚<br>P2Pä¼ä¸šå¯ä»¥åˆ©ç”¨ç§»åŠ¨è®¾å¤‡çš„ä½ç½®ä¿¡æ¯ï¼Œäº†è§£è¿‡å»3ä¸ªæœˆç”¨æˆ·çš„è¡Œä¸ºè½¨è¿¹ã€‚å¦‚æœæŸä¸ªç”¨æˆ·ç»å¸¸åœ¨åŠå¤œ2ç‚¹å‡ºç°åœ¨é…’å§ç­‰å±é™©åŒºåŸŸï¼Œå¹¶ä¸”ç»å¸¸æœ‰é£™è½¦è¡Œä¸ºï¼Œè¿™ä¸ªå®¢æˆ·å®šä¹‰æˆé«˜é£é™©å®¢æˆ·çš„æ¦‚ç‡å°±è¾ƒé«˜ã€‚ç§»åŠ¨Appçš„ä½¿ç”¨ä¹ æƒ¯å’ŒæŸäº›é«˜é£é™©Appä¹Ÿå¯ä»¥å¸®åŠ©P2Pä¼ä¸šè¯†åˆ«å‡ºç”¨æˆ·çš„é«˜é£é™©è¡Œä¸ºã€‚å¦‚æœç”¨æˆ·ç»å¸¸åœ¨åŠå¤œ2ç‚¹é¢‘ç¹ä½¿ç”¨Appï¼Œå…¶æˆä¸ºé«˜é£é™©å®¢æˆ·çš„æ¦‚ç‡å°±è¾ƒå¤§ã€‚<br>ç§»åŠ¨å¤§æ•°æ®åœ¨é¢„é˜²äº’è”ç½‘æ¶æ„æ¬ºè¯ˆå’Œé«˜é£é™©å®¢æˆ·è¯†åˆ«æ–¹é¢ï¼Œå·²ç»æœ‰äº†æˆç†Ÿçš„åº”ç”¨åœºæ™¯ã€‚å‰æµ·å¾ä¿¡ã€å®œä¿¡ã€èšä¿¡ç«‹ã€é—ªé“¶å·²ç»å¼€å§‹åˆ©ç”¨TalkingDataçš„æ•°æ®ï¼Œé¢„é˜²äº’è”ç½‘æ¶æ„æ¬ºè¯ˆå’Œè¯†åˆ«é«˜é£é™©å®¢æˆ·ï¼Œå¹¶å–å¾—äº†è¾ƒå¥½çš„æ•ˆæœã€‚ç§»åŠ¨å¤§æ•°æ®åº”ç”¨åœºæ™¯æ­£åœ¨è¢«é€æ­¥æŒ–æ˜å‡ºæ¥ï¼Œæœªæ¥ç§»åŠ¨å¤§æ•°å•†ä¸šåº”ç”¨å°†æ›´åŠ å¹¿é˜”ã€‚<br>ç”¨æˆ·ç”»åƒæ˜¯å¤§æ•°æ®å•†ä¸šåº”ç”¨çš„é‡è¦é¢†åŸŸï¼Œå…¶å®å¹¶æ²¡æœ‰å¤šä¹ˆå¤æ‚ï¼Œåªè¦æŒæ¡ç”¨æˆ·ç”»åƒçš„åŸåˆ™å’Œæ–¹æ³•ï¼Œä»¥åŠå®æ–½æ­¥éª¤ã€‚ç»“åˆé‡‘èä¼ä¸šçš„ä¸šåŠ¡åœºæ™¯ï¼Œç”¨æˆ·ç”»åƒå¯ä»¥å¸®åŠ©é‡‘èä¼ä¸šåˆ›é€ å•†ä¸šä»·å€¼ï¼Œå®ç°å¤§æ•°æ®ç›´æ¥å˜ç°ã€‚<br><span class="exturl" data-url="aHR0cDovL3d3dy5yYWluY2VudC5jb20vY29udGVudC0xMC03ODY3LTEuaHRtbA==" title="http://www.raincent.com/content-10-7867-1.html">æ–‡ç« æ¥æº<i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç”¨æˆ·ç”»åƒ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[RDDè½¬DataFrameçš„ä¸€é“é¢è¯•é¢˜]]></title>
      <url>/RDD%E8%BD%ACDataFrame%E7%9A%84%E4%B8%80%E9%81%93%E9%9D%A2%E8%AF%95%E9%A2%98.html</url>
      <content type="html"><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç°åœ¨åœ¨æˆ‘ä»¬HDFSæ–‡ä»¶ç³»ç»Ÿä¸Šé¢ å­˜äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ ¼å¼æ˜¯ .txtæ–‡ä»¶æ ¼å¼ï¼Œè¦æ±‚æŠŠè¿™ä¸ªæ–‡ä»¶æ ¼å¼è½¬æ¢æˆä¸ºparquetæ–‡ä»¶æ ¼å¼ :<br>è§£é¢˜æ€è·¯:<br>1ï¼‰å…ˆè¯»å–æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªRDD<br>2ï¼‰æŠŠRDDè½¬æ¢æˆä¸ºä¸€ä¸ªDataFrameï¼ŒRDD[Person].toDF<br>3) å†™æ•°æ®ï¼ŒæŒ‡å®šæ–‡ä»¶æ ¼å¼å°±å¯ä»¥äº†ï¼ï¼<br><a id="more"></a><br>ä»£ç å®ç° :<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">"local"</span>).setAppName(<span class="string">"DataFrameReflection"</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line">    <span class="keyword">val</span> sqlContext = <span class="keyword">new</span> <span class="type">SQLContext</span>(sc)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">import</span> sqlContext.implicits._</span><br><span class="line">    <span class="keyword">val</span> peopelRDD: <span class="type">RDD</span>[<span class="type">People</span>] = sc.textFile(<span class="string">"hdfs://hadoop01:9000/resources/people.txt"</span>)</span><br><span class="line">      .map(line =&gt; <span class="type">People</span>(line.split(<span class="string">","</span>)(<span class="number">0</span>),line.split(<span class="string">","</span>)(<span class="number">1</span>).trim.toInt))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> df = peopelRDD.toDF()</span><br><span class="line">    df.write.format(<span class="string">"parquet"</span>).save(<span class="string">"hdfs://hadoop01:9000/test/"</span>)</span><br></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> é¢è¯•é¢˜ </tag>
            
            <tag> RDD </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[RDDè½¬DataFrameçš„ä¸¤ç§æ–¹æ³•]]></title>
      <url>/RDD%E8%BD%ACDataFrame%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95.html</url>
      <content type="html"><![CDATA[<p>ä»‹ç»ä¸€ä¸‹Sparkå°†RDDè½¬æ¢æˆDataFrameçš„ä¸¤ç§æ–¹å¼ã€‚ </p>
<ol>
<li>é€šè¿‡æ˜¯ä½¿ç”¨case classçš„æ–¹å¼ï¼Œä¸è¿‡åœ¨scala 2.10ä¸­æœ€å¤§æ”¯æŒ22ä¸ªå­—æ®µçš„case class,è¿™ç‚¹éœ€è¦æ³¨æ„ </li>
<li>æ˜¯é€šè¿‡sparkå†…éƒ¨çš„StructTypeæ–¹å¼ï¼Œå°†æ™®é€šçš„RDDè½¬æ¢æˆDataFrame è£…æ¢æˆDataFrameåï¼Œå°±å¯ä»¥ä½¿ç”¨SparkSQLæ¥è¿›è¡Œæ•°æ®ç­›é€‰è¿‡æ»¤ç­‰æ“ä½œ <a id="more"></a>
</li>
</ol>
<h2 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.<span class="type">SQLContext</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éœ€è¦æå‰çŸ¥é“åˆ—ååŠç±»å‹</span></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">People</span>(<span class="params">var name: <span class="type">String</span>,var age:<span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">object</span> <span class="title">DataFrameReflection</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">"local"</span>).setAppName(<span class="string">"DataFrameReflection"</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line">    <span class="keyword">val</span> sqlContext = <span class="keyword">new</span> <span class="type">SQLContext</span>(sc)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">import</span> sqlContext.implicits._</span><br><span class="line">    <span class="keyword">val</span> peopelRDD: <span class="type">RDD</span>[<span class="type">People</span>] = sc.textFile(<span class="string">"people.txt"</span>)</span><br><span class="line">      .map(line =&gt; <span class="type">People</span>(line.split(<span class="string">","</span>)(<span class="number">0</span>),line.split(<span class="string">","</span>)(<span class="number">1</span>).trim.toInt))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> df = peopelRDD.toDF()</span><br><span class="line">    df.createOrReplaceTempView(<span class="string">"people"</span>)</span><br><span class="line">    sqlContext.sql(<span class="string">"select * from people"</span>).show()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.&#123;<span class="type">IntegerType</span>, <span class="type">StringType</span>, <span class="type">StructField</span>, <span class="type">StructType</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.&#123;<span class="type">DataFrame</span>, <span class="type">Row</span>, <span class="type">SQLContext</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">DataFrameProgrammatically</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">"local"</span>).setAppName(<span class="string">"DataFrameProgrammatically"</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line">    <span class="keyword">val</span> sqlContext = <span class="keyword">new</span> <span class="type">SQLContext</span>(sc)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¯»å–æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">val</span> rdd: <span class="type">RDD</span>[<span class="type">String</span>] = sc.textFile(<span class="string">"people.txt"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * å¾—åˆ° rowRDD</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    <span class="keyword">val</span> rowRDD: <span class="type">RDD</span>[<span class="type">Row</span>] = rdd.map(line =&gt; &#123;</span><br><span class="line">      <span class="keyword">val</span> fields = line.split(<span class="string">","</span>)</span><br><span class="line">      <span class="type">Row</span>(fields(<span class="number">0</span>), fields(<span class="number">1</span>).trim.toInt)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * å¾—åˆ°structType</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    <span class="keyword">val</span> structType = <span class="type">StructType</span>(</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">"name"</span>,<span class="type">StringType</span>,<span class="literal">true</span>) ::</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">"age"</span>,<span class="type">IntegerType</span>,<span class="literal">true</span>) :: <span class="type">Nil</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * rowRDD:RDD[Row]</span></span><br><span class="line"><span class="comment">      * schema: StructType</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    <span class="keyword">val</span> df: <span class="type">DataFrame</span> = sqlContext.createDataFrame(rowRDD,structType)</span><br><span class="line">    df.createOrReplaceTempView(<span class="string">"people"</span>)</span><br><span class="line">    sqlContext.sql(<span class="string">"select * from people"</span>).show()</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    /**</span></span><br><span class="line"><span class="comment">//      * å®˜ç½‘schemaå®ç°æ–¹æ³•</span></span><br><span class="line"><span class="comment">//      */</span></span><br><span class="line"><span class="comment">//    val schemaString = "name age"</span></span><br><span class="line"><span class="comment">//    val fields = schemaString.split(" ")</span></span><br><span class="line"><span class="comment">//      .map(fieldName =&gt; StructField(</span></span><br><span class="line"><span class="comment">//        fieldName,StringType,nullable = true</span></span><br><span class="line"><span class="comment">//      ))</span></span><br><span class="line"><span class="comment">//    val schema = StructType(fields)</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> RDD </tag>
            
            <tag> DataFrame </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaå•ä¾‹æ¨¡å¼]]></title>
      <url>/Java%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html</url>
      <content type="html"><![CDATA[<ol>
<li>é¥¿æ±‰å¼<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¥¿æ±‰å¼å•ä¾‹ç±»ï¼Œåœ¨ç±»åˆå§‹åŒ–æ—¶ï¼Œå·²ç»è‡ªè¡Œå®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton1</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç§æœ‰çš„é»˜è®¤æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="comment">//å·²ç»è‡ªè¡Œå®ä¾‹åŒ–</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton1 single = <span class="keyword">new</span> Singleton1() ;</span><br><span class="line">    <span class="comment">//é™æ€å·¥å‚æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Singleton1 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> single ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<a id="more"></a>
<ol>
<li><p>æ‡’æ±‰å¼å•ä¾‹ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‡’æ±‰å¼å•ä¾‹ç±»ï¼Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton2</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç§æœ‰çš„é»˜è®¤æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton2</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="comment">//æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰final</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton2 single = <span class="keyword">null</span> ;</span><br><span class="line">    <span class="comment">//é™æ€å·¥å‚æ–¹æ³•ï¼Œå¦‚æœä¸åŠ synchronizedçº¿ç¨‹ä¸å®‰å…¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> Singleton2 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(single == <span class="keyword">null</span> )&#123;</span><br><span class="line">            single = <span class="keyword">new</span> Singleton2() ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> single ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç™»è®°å¼å•ä¾‹ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegistSingleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç”¨ConcurrentHashMapæ¥ç»´æŠ¤æ˜ å°„å…³ç³»ï¼Œè¿™æ˜¯çº¿ç¨‹å®‰å…¨çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String,Object&gt; REGIST=<span class="keyword">new</span> ConcurrentHashMap&lt;String, Object&gt;();</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//æŠŠRegistSingletonè‡ªå·±ä¹Ÿçº³å…¥å®¹å™¨ç®¡ç†</span></span><br><span class="line">        RegistSingleton registSingleton=<span class="keyword">new</span> RegistSingleton();</span><br><span class="line">        REGIST.put(registSingleton.getClass().getName(),registSingleton);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">RegistSingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getInstance</span><span class="params">(String className)</span></span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœä¼ å…¥çš„ç±»åä¸ºç©ºï¼Œå°±è¿”å›RegistSingletonå®ä¾‹</span></span><br><span class="line">        <span class="keyword">if</span>(className==<span class="keyword">null</span>)</span><br><span class="line">            className=RegistSingleton.class.getName();</span><br><span class="line">            <span class="comment">//å¦‚æœæ²¡æœ‰ç™»è®°å°±ç”¨åå°„newä¸€ä¸ª</span></span><br><span class="line">        <span class="keyword">if</span> (!REGIST.containsKey(className))&#123;</span><br><span class="line">            <span class="comment">//æ²¡æœ‰ç™»è®°å°±è¿›å…¥åŒæ­¥å—</span></span><br><span class="line">            <span class="keyword">synchronized</span> (RegistSingleton.class)&#123;</span><br><span class="line">            <span class="comment">//å†æ¬¡æ£€æµ‹æ˜¯å¦ç™»è®°</span></span><br><span class="line">                <span class="keyword">if</span> (!REGIST.containsKey(className))&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">                        REGIST.put(className,Class.forName(className).newInstance());</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¿”å›å•ä¾‹</span></span><br><span class="line">        <span class="keyword">return</span> REGIST.get(className);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>javaä¸­å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œå•ä¾‹æ¨¡å¼åˆ†ä¸‰ç§ï¼šæ‡’æ±‰å¼å•ä¾‹ã€é¥¿æ±‰å¼å•ä¾‹ã€ç™»è®°å¼å•ä¾‹ä¸‰ç§ã€‚<br>å•ä¾‹æ¨¡å¼æœ‰ä¸€ä¸‹ç‰¹ç‚¹ï¼š<br>1ã€å•ä¾‹ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚<br>2ã€å•ä¾‹ç±»å¿…é¡»è‡ªå·±è‡ªå·±åˆ›å»ºè‡ªå·±çš„å”¯ä¸€å®ä¾‹ã€‚<br>3ã€å•ä¾‹ç±»å¿…é¡»ç»™æ‰€æœ‰å…¶ä»–å¯¹è±¡æä¾›è¿™ä¸€å®ä¾‹ã€‚<br>å•ä¾‹æ¨¡å¼ç¡®ä¿æŸä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹æ± ã€ç¼“å­˜ã€æ—¥å¿—å¯¹è±¡ã€å¯¹è¯æ¡†ã€æ‰“å°æœºã€æ˜¾å¡çš„é©±åŠ¨ç¨‹åºå¯¹è±¡å¸¸è¢«è®¾è®¡æˆå•ä¾‹ã€‚è¿™äº›åº”ç”¨éƒ½æˆ–å¤šæˆ–å°‘å…·æœ‰èµ„æºç®¡ç†å™¨çš„åŠŸèƒ½ã€‚æ¯å°è®¡ç®—æœºå¯ä»¥æœ‰è‹¥å¹²ä¸ªæ‰“å°æœºï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªPrinter Spoolerï¼Œä»¥é¿å…ä¸¤ä¸ªæ‰“å°ä½œä¸šåŒæ—¶è¾“å‡ºåˆ°æ‰“å°æœºä¸­ã€‚æ¯å°è®¡ç®—æœºå¯ä»¥æœ‰è‹¥å¹²é€šä¿¡ç«¯å£ï¼Œç³»ç»Ÿåº”å½“é›†ä¸­ç®¡ç†è¿™äº›é€šä¿¡ç«¯å£ï¼Œä»¥é¿å…ä¸€ä¸ªé€šä¿¡ç«¯å£åŒæ—¶è¢«ä¸¤ä¸ªè¯·æ±‚åŒæ—¶è°ƒç”¨ã€‚æ€»ä¹‹ï¼Œé€‰æ‹©å•ä¾‹æ¨¡å¼å°±æ˜¯ä¸ºäº†é¿å…ä¸ä¸€è‡´çŠ¶æ€ï¼Œé¿å…æ”¿å‡ºå¤šå¤´ã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç»éªŒä¹‹è°ˆ]]></title>
      <url>/%E7%BB%8F%E9%AA%8C%E4%B9%8B%E8%B0%88.html</url>
      <content type="html"><![CDATA[<p>1ã€é‡æ„æ˜¯ç¨‹åºå‘˜çš„ä¸»åŠ›æŠ€èƒ½ã€‚<br>2ã€å·¥ä½œæ—¥å¿—èƒ½æå‡è„‘å®¹é‡ã€‚<br>3ã€å…ˆç”¨profilerè°ƒæŸ¥ï¼Œæ‰æœ‰è„¸è°ˆä¼˜åŒ–ã€‚<br>4ã€æ³¨é‡Šè´µç²¾ä¸è´µå¤šã€‚æœç»å¤§å§¨å¦ˆèˆ¬çš„â€œä¾‹æ³¨â€ã€‚æ¼«å±±éé‡çš„ç¢ç¢å¿µæ³¨é‡Šï¼Œå®é™…å°±æ˜¯èƒŒæ™¯å™ªéŸ³ã€‚<br>5ã€æ™®é€šç¨‹åºå‘˜+google=è¶…çº§ç¨‹åºå‘˜ã€‚<br><a id="more"></a><br>6ã€å•å…ƒæµ‹è¯•æ€»æ˜¯åˆç®—çš„ã€‚<br>7ã€ä¸è¦å…ˆå†™æ¡†æ¶å†å†™å®ç°ã€‚æœ€å¥½åè¿‡æ¥ï¼Œä»åŸå‹ä¸­æç‚¼æ¡†æ¶ã€‚<br>8ã€ä»£ç ç»“æ„æ¸…æ™°ï¼Œå…¶å®ƒé—®é¢˜éƒ½ä¸ç®—äº‹å„¿ã€‚<br>9ã€å¥½çš„é¡¹ç›®ä½œé£ç¡¬æ´¾ï¼Œä¸€é”®æµ‹è¯•ï¼Œä¸€é”®å‘å¸ƒï¼Œä¸€é”®éƒ¨ç½²ï¼›çƒ‚çš„é¡¹ç›®ç”Ÿæ€§çŒ¥çï¼Œå£å£ç›¸ä¼ ï¼Œä¸ç«‹æ–‡å­—ï¼Œç¥ç¥ç§˜ç§˜ã€‚<br>10ã€ç¼–ç ä¸è¦ç•æƒ§å˜åŒ–ï¼Œè¦æ‹¥æŠ±å˜åŒ–ã€‚<br>11ã€å¸¸å……ç”µã€‚ç¨‹åºå‘˜åªæœ‰ä¸€ç§æ­»æ³•ï¼šåœŸæ­»çš„ã€‚<br>12ã€ç¼–ç¨‹ä¹‹äº‹ï¼Œéš”ç¦»æ˜¯æ–¹å‘ï¼Œèµ·åæ˜¯å…³é”®ï¼Œæµ‹è¯•æ˜¯ä¸»è§’ï¼Œè°ƒè¯•æ˜¯è¡¥å……ï¼Œç‰ˆæœ¬æ§åˆ¶æ˜¯åæ‚”è¯ã€‚<br>13ã€ä¸€è¡Œä»£ç ä¸€ä¸ªå…µã€‚å½¢æˆå»ºåˆ¶æ‰èƒ½æœ‰æˆ˜æ–—åŠ›ã€‚å•ä½è§„æ¨¡ä¸å®œè¿‡å¤§ï¼Œåƒäººç­ï¼Œä¸‡äººæ’æ˜“æˆä¸‡äººå‘ã€‚<br>14ã€é‡æ„/ä¼˜åŒ–/ä¿®å¤Bugï¼ŒåŒæ—¶åªèƒ½åšä¸€ä»¶ã€‚<br>15ã€ç®€å•æ¨¡å—æ³¨æ„å°è£…ï¼Œå¤æ‚æ¨¡å—æ³¨æ„åˆ†å±‚ã€‚<br>16ã€äººè„‘æ€§èƒ½æœ‰é™ï¼Œæ•´æ´èƒœäºæ‚ä¹±ã€‚è¯»ä¸æ‡‚çš„ä»£ç ï¼Œå°è¯•æ•´ç†ä¸‹æ ¼å¼ï¼›ä¸å¥½ç”¨çš„æ¥å£ï¼Œå°è¯•é‡æ–°å°è£…ä¸‹ã€‚<br>17ã€è¿­ä»£é€Ÿåº¦å†³å®šå·¥ä½œå¼ºåº¦ã€‚æƒ³å¤šå¿«å¥½çœï¼Œå°±ä»ç®€åŒ–å¼€å‘æµç¨‹ï¼ŒåŠ å¿«è¿­ä»£é€Ÿåº¦å¼€å§‹ã€‚<br>18ã€å¿˜æ‰ä¼˜åŒ–å†™ä»£ç ã€‚è¿‡æ—©ä¼˜åŒ–ç­‰åŒæ¶æ„ç ´åï¼›å¿˜æ‰ä»£ç åšä¼˜åŒ–ã€‚ä¼˜åŒ–è¦åŸºäºæ€§èƒ½æµ‹è¯•ï¼Œè€Œä¸æ˜¯çº ç»“äºå­—é‡Œè¡Œé—´ã€‚<br>19ã€æœ€å¥½çš„å·¥å…·æ˜¯çº¸ç¬”ï¼›å…¶æ¬¡å¥½çš„æ˜¯markdownã€‚<br>20ã€Leaderé—®ä»»åŠ¡æ—¶é—´ï¼Œè‹¥ç­”ä¸ä¸Šæ¥ï¼Œå¯èƒ½æ˜¯ä»»åŠ¡æ‹†åˆ†è¿˜ä¸å¤Ÿç»†ã€‚<br>21ã€å®å¯å¤šç®—ä¸€å‘¨ï¼Œä¸å¯å°‘ä¼°ä¸€å¤©ã€‚è¿‡äºâ€œä¹è§‚â€å®¹æ˜“è®©bosså—æƒŠå“ã€‚<br>22ã€æœ€æœ‰ç”¨çš„è¯­è¨€æ˜¯Englishã€‚å…¶æ¬¡çš„å¯èƒ½æ˜¯Pythonã€‚<br>23ã€ç™¾é—»ä¸å¦‚ä¸€è§ã€‚ç”»å‡ºç»“æœï¼Œä¸€ç›®äº†ç„¶ã€‚è°ƒè¯•è€—æ—¶å°†å¤§å¤§ç¼©çŸ­ã€‚<br>24ã€èµ„æºã€ä»£ç åº”ä¸€é“å—ç‰ˆæœ¬ç®¡ç†ã€‚èµ„æºåŒ¹é…é”™è¯¯è¿œæ¯”ä»£ç åŒ¹é…é”™è¯¯æ›´éš¾æ’æŸ¥ã€‚<br>25ã€ä¸è¦åŸºäºæƒ³è±¡å¼€å‘ï¼Œ è¦åŸºäºåŸå‹å¼€å‘ã€‚åŸå‹çš„ä»·å€¼æ˜¯å¿«é€ŸéªŒè¯æƒ³æ³•ï¼Œå¸®å¤§å®¶èŠ‚çœæ—¶é—´ã€‚<br>26ã€åºåˆ—åŒ–é¦–é€‰æ˜æ–‡æ–‡æœ¬ ã€‚è¯¸å¦‚äºŒè¿›åˆ¶ã€æ··æ·†ã€åŠ å¯†ã€å‹ç¼©ç­‰ç­‰æœ‰éœ€è¦æ—¶å†åŠ ã€‚<br>27ã€ç¼–è¯‘å™¨æ°¸è¿œæ¯”ä½ æ‡‚å¾®è§‚ä¼˜åŒ–ã€‚åªèƒ½å‘å®ƒä¸æ“…é•¿çš„æ–¹å‘åŠªåŠ›ã€‚<br>28ã€ä¸è¦å®šè¿‡å¤§ã€è¿‡è¿œã€è¿‡ç»†çš„è®¡åˆ’ã€‚å³ä½¿å®šäº†ä¹Ÿæ²¡æœ‰ç”¨ã€‚<br>29ã€è‡³å°‘åŠæ•°æ—¶é—´å°†èŠ±åœ¨é›†æˆä¸Šã€‚æ—¶é—´ï¼Œæ—¶é—´ï¼Œæ—¶é—´æ€»æ˜¯ä¸å¤Ÿã€‚<br>30ã€ä¸ä¸»æµæ„è§/æ–¹æ³•/é£æ ¼/ä¹ æƒ¯ç›¸æ‚–æ—¶ï¼Œå…ˆæ£€è®¨è‡ªå·±æœ€å¯é ã€‚<br>31ã€å‡ºç°bugä¸»åŠ¨æŸ¥ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯ä½ çš„ã€‚è¿™èƒ½è®©ä½ ä¸šåŠ¡èƒ½åŠ›çŒ›æ¶¨ã€ä¸ªäººå½¢è±¡é£™å‡ï¼›å¦‚æœä½ çš„bugè¢«åˆ«äººæªå‡ºæ¥â€¦..å‘µå‘µï¼Œé‚£ä½ ä¼šå¾ˆè¢«åŠ¨ï½â‰§ï¹â‰¦<br>32ã€ä¸çŸ¥æ€ä¹ˆé€‰æŠ€æœ¯ä¹¦æ—¶å°±æŒ‘è–„çš„ã€‚èµ·ç ä¸ä¼šå¤ªè´µï¼Œä¸”ä½ èƒ½çœ‹å®Œã€‚<br>33ã€gitæ˜¯æœ€æ£’çš„ã€‚ç®€å•ï¼Œå¯é ï¼Œå…è´¹ã€‚<br>34ã€ä»…å¯¹â€œå¯é¢„æµ‹çš„éç†æ€§â€æŠ›æ–­è¨€ã€‚<br>35ã€Logè¦å†™æ—¶é—´ä¸åˆ†ç±»ã€‚å¹¶ä¸”è¦èƒ½é‡å®šå‘è¾“å‡ºã€‚<br>36ã€æ³¨é‡Šæ˜¯ç¨å·®çš„æ–‡æ¡£ã€‚æ›´å¥½çš„æ˜¯æ¸…æ™°çš„å‘½åã€‚è®©ä»£ç è®²è‡ªå·±çš„æ•…äº‹ã€‚<br>37ã€é€ è½®å­æ˜¯å¾ˆå¥½çš„é”»ç‚¼æ–¹æ³•ã€‚å‰ææ˜¯ä½ è§è¿‡åˆ«çš„è½®å­ã€‚<br>38ã€code reviewæœ€å¥½ä»¥å°ç»„/ç»“å¯¹çš„å½¢å¼ã€‚å¯¹ä¸šåŠ¡æœ‰ä¸€å®šäº†è§£ï¼Œå»ºè®®ä¼šæ›´æœ‰ä»·å€¼ï¼ˆä½†ä¸ç»å¯¹ï¼‰ã€‚è€Œä¸”ä¸ä¼šæˆä¸ºè´Ÿæ‹…ã€‚ç®¡ç†å‘˜ä¸ªäººreviewåˆ™å¾ˆå®¹æ˜“æˆteamçš„ç“¶é¢ˆã€‚<br>39ã€æé—®å‰å…ˆåšè°ƒç ”ã€‚é—®ä¸åˆ°ç‚¹ä¸Šæ—¢è¢«é„™è§†ï¼Œåˆæµªè´¹è‡ªå·±çš„æ—¶é—´ã€‚<br><span class="exturl" data-url="aHR0cDovL3d3dy56aGlodS5jb20vcXVlc3Rpb24vMzY0MjYwNTEvYW5zd2VyLzc2MDMxNzQz" title="http://www.zhihu.com/question/36426051/answer/76031743">åŸæ–‡åœ°å€<i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> å¹²è´§ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç»éªŒä¹‹è°ˆ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JVMå¸¸è§é¢è¯•é¢˜]]></title>
      <url>/JVM%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98.html</url>
      <content type="html"><![CDATA[<h2 id="ç®€å•è¯´è¯´JVMçš„æ¶æ„"><a href="#ç®€å•è¯´è¯´JVMçš„æ¶æ„" class="headerlink" title="ç®€å•è¯´è¯´JVMçš„æ¶æ„"></a>ç®€å•è¯´è¯´JVMçš„æ¶æ„</h2><h3 id="è¿è¡Œæ—¶åŒº"><a href="#è¿è¡Œæ—¶åŒº" class="headerlink" title="è¿è¡Œæ—¶åŒº"></a>è¿è¡Œæ—¶åŒº</h3><ul>
<li>å †</li>
<li>æ ˆ</li>
<li>æ–¹æ³•åŒº</li>
<li>ç¨‹åºè®¡æ•°å™¨</li>
<li>æœ¬åœ°æ–¹æ³•<a id="more"></a>
<h2 id="æè¿°ä¸€ä¸‹åƒåœ¾å›æ”¶çš„è¿‡ç¨‹-å¸¸è§"><a href="#æè¿°ä¸€ä¸‹åƒåœ¾å›æ”¶çš„è¿‡ç¨‹-å¸¸è§" class="headerlink" title="æè¿°ä¸€ä¸‹åƒåœ¾å›æ”¶çš„è¿‡ç¨‹(å¸¸è§)"></a>æè¿°ä¸€ä¸‹åƒåœ¾å›æ”¶çš„è¿‡ç¨‹(å¸¸è§)</h2><h3 id="åƒåœ¾å›æ”¶ä¸»è¦å‘ç”Ÿåœ¨å †ä¸­"><a href="#åƒåœ¾å›æ”¶ä¸»è¦å‘ç”Ÿåœ¨å †ä¸­" class="headerlink" title="åƒåœ¾å›æ”¶ä¸»è¦å‘ç”Ÿåœ¨å †ä¸­"></a>åƒåœ¾å›æ”¶ä¸»è¦å‘ç”Ÿåœ¨å †ä¸­</h3></li>
<li>å¹´è½»ä»£</li>
</ul>
<ol>
<li>edenåŒº</li>
<li>s1</li>
<li>s2</li>
</ol>
<ul>
<li>å¹´è€ä»£<h2 id="å¸¸è§çš„åƒåœ¾å›æ”¶çš„ç®—æ³•"><a href="#å¸¸è§çš„åƒåœ¾å›æ”¶çš„ç®—æ³•" class="headerlink" title="å¸¸è§çš„åƒåœ¾å›æ”¶çš„ç®—æ³•"></a>å¸¸è§çš„åƒåœ¾å›æ”¶çš„ç®—æ³•</h2></li>
</ul>
<ol>
<li>æ ‡è®°æ¸…é™¤æ³•</li>
<li>å¤åˆ¶ç®—æ³•</li>
<li>æ ‡è®°æ•´ç†ç®—æ³•<h2 id="è¯´è¯´å¸¸è§çš„åƒåœ¾å›æ”¶å™¨"><a href="#è¯´è¯´å¸¸è§çš„åƒåœ¾å›æ”¶å™¨" class="headerlink" title="è¯´è¯´å¸¸è§çš„åƒåœ¾å›æ”¶å™¨"></a>è¯´è¯´å¸¸è§çš„åƒåœ¾å›æ”¶å™¨</h2></li>
<li>ä¸²è¡Œâ€”Serial</li>
<li>å¹¶è¡Œâ€”Parallel</li>
<li>å¹¶å‘â€”CMS<h2 id="å†™ä¸€æ®µä»£ç ï¼Œè®©å®ƒæŠ¥å †å†…å­˜æº¢å‡º"><a href="#å†™ä¸€æ®µä»£ç ï¼Œè®©å®ƒæŠ¥å †å†…å­˜æº¢å‡º" class="headerlink" title="å†™ä¸€æ®µä»£ç ï¼Œè®©å®ƒæŠ¥å †å†…å­˜æº¢å‡º"></a>å†™ä¸€æ®µä»£ç ï¼Œè®©å®ƒæŠ¥å †å†…å­˜æº¢å‡º</h2></li>
<li>ä¸æ–­çš„åˆ›å»ºå¯¹è±¡</li>
<li>ä½ è¦å»ç”¨è¿™äº›å¯¹è±¡<h2 id="å†™ä¸€æ®µä»£ç ï¼Œè®©å®ƒæŠ¥æ ˆå†…å­˜æº¢å‡º"><a href="#å†™ä¸€æ®µä»£ç ï¼Œè®©å®ƒæŠ¥æ ˆå†…å­˜æº¢å‡º" class="headerlink" title="å†™ä¸€æ®µä»£ç ï¼Œè®©å®ƒæŠ¥æ ˆå†…å­˜æº¢å‡º"></a>å†™ä¸€æ®µä»£ç ï¼Œè®©å®ƒæŠ¥æ ˆå†…å­˜æº¢å‡º</h2></li>
<li>é€’å½’ä¸€ç›´è°ƒç”¨å³å¯<h2 id="è®¾ç½®å †æˆ–æ ˆçš„å‚æ•°"><a href="#è®¾ç½®å †æˆ–æ ˆçš„å‚æ•°" class="headerlink" title="è®¾ç½®å †æˆ–æ ˆçš„å‚æ•°"></a>è®¾ç½®å †æˆ–æ ˆçš„å‚æ•°</h2></li>
<li>-Xms</li>
<li>-Xmx</li>
<li>-Xss364k</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JVM </tag>
            
            <tag> é¢è¯•é¢˜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ·±å…¥ç†è§£javaè™šæ‹Ÿæœºç²¾åæ€»ç»“]]></title>
      <url>/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B2%BE%E5%8D%8E%E6%80%BB%E7%BB%93%EF%BC%88%E9%9D%A2%E8%AF%95%EF%BC%89.html</url>
      <content type="html"><![CDATA[<h2 id="è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"><a href="#è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ" class="headerlink" title="è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"></a>è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h2><p>Javaè™šæ‹Ÿæœºç®¡ç†çš„å†…å­˜åŒ…æ‹¬å‡ ä¸ªè¿è¡Œæ—¶æ•°æ®å†…å­˜ï¼š<strong>æ–¹æ³•åŒºã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€å †ã€ç¨‹åºè®¡æ•°å™¨</strong>ï¼Œå…¶ä¸­æ–¹æ³•åŒºå’Œå †æ˜¯ç”±çº¿ç¨‹å…±äº«çš„æ•°æ®åŒºï¼Œå…¶ä»–å‡ ä¸ªæ˜¯çº¿ç¨‹éš”ç¦»çš„æ•°æ®åŒº</p>
<h3 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h3><p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ï¼Œä»–å¯ä»¥çœ‹åšæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚</p>
<p>å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œçš„æ—¶å€™å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç çš„æŒ‡ä»¤ï¼Œ<strong>åˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆ</strong>ã€‚å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªJavaæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨åˆ™ä¸ºç©ºã€‚<br><a id="more"></a><br><strong>æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½•OutOfMemotyErroræƒ…å†µçš„åŒºåŸŸ</strong></p>
<h3 id="Javaè™šæ‹Ÿæœºæ ˆ"><a href="#Javaè™šæ‹Ÿæœºæ ˆ" class="headerlink" title="Javaè™šæ‹Ÿæœºæ ˆ"></a>Javaè™šæ‹Ÿæœºæ ˆ</h3><p>è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ç”¨äºå‚¨å­˜å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³å®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
<p>æ ˆå†…å­˜å°±æ˜¯è™šæ‹Ÿæœºæ ˆï¼Œæˆ–è€…è¯´æ˜¯è™šæ‹Ÿæœºæ ˆä¸­å±€éƒ¨å˜é‡è¡¨çš„éƒ¨åˆ†</p>
<p>å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¾‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€longã€doubleï¼‰ã€å¯¹è±¡å¼•ç”¨ï¼ˆrefrenceï¼‰ç±»å‹å’ŒreturnAddressç±»å‹ï¼ˆæŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰</p>
<p>å…¶ä¸­64ä½é•¿åº¦çš„longå’Œdoubleç±»å‹çš„æ•°æ®ä¼šå ç”¨ä¸¤ä¸ªå±€éƒ¨å˜é‡ç©ºé—´ï¼Œå…¶ä½™çš„æ•°æ®ç±»å‹åªå ç”¨1ä¸ªã€‚</p>
<p>Javaè™šæ‹Ÿæœºè§„èŒƒå¯¹è¿™ä¸ªåŒºåŸŸè§„å®šäº†ä¸¤ç§å¼‚å¸¸çŠ¶å†µï¼š<strong>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowErrorå¼‚å¸¸ã€‚å¦‚æœè™šæ‹Ÿæœºæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œå°±ä¼šè·‘å‡ºOutOfMemoryErrorå¼‚å¸¸</strong></p>
<h3 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h3><p>æœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆå‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œä»–ä»¬çš„åŒºåˆ«æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡<br>æœ¬åœ°æ–¹æ³•æ ˆåŒºåŸŸä¹Ÿä¼šæŠ›å‡ºStackOverflowErrorå’ŒOutOfMemoryErroyå¼‚å¸¸</p>
<h3 id="Javaå †"><a href="#Javaå †" class="headerlink" title="Javaå †"></a>Javaå †</h3><ul>
<li>å †æ˜¯Javaè™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚</li>
<li>Javaå †æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œæ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹å’Œæ•°ç»„éƒ½åœ¨å †ä¸Šåˆ†é…ã€‚</li>
<li>Javaå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚<strong>Javaå †ç»†åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£</strong>ã€‚</li>
</ul>
<p>ä¸ç®¡æ€æ ·ï¼Œåˆ’åˆ†çš„ç›®çš„éƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„å›æ”¶å†…å­˜ï¼Œæˆ–è€…æ›´å¿«åœ°åˆ†é…å†…å­˜ã€‚Javaå †å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œåªè¦é€»è¾‘ä¸Šæ˜¯è¿ç»­çš„å³å¯ã€‚å¦‚æœåœ¨å †ä¸­æ²¡æœ‰å®Œæˆå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•åœ¨æ‰©å±•æ—¶å°†ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸</p>
<h3 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h3><p>æ–¹æ³•åŒºå®ƒç”¨äºå‚¨å­˜å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ï¼Œé™¤äº†Javaå †ä¸€æ ·ä¸éœ€è¦è¿ç»­çš„å†…å­˜å’Œå¯ä»¥é€‰æ‹©å›ºå®šå¤§å°æˆ–è€…å¯æ‰©å±•å¤–ï¼Œè¿˜å¯ä»¥é€‰æ‹©ä¸å®ç°åƒåœ¾æ”¶é›†ã€‚è¿™ä¸ªåŒºåŸŸçš„å†…å­˜å›æ”¶ç›®æ ‡ä¸»è¦æ˜¯é’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»å‹çš„å¸è½½ã€‚å½“æ–¹æ³•åŒºæ— æ³•æ»¡è¶³å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡ºOutOfMemoryErroyå¼‚å¸¸ã€‚</p>
<h3 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h3><p>å®ƒæ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚Classæ–‡ä»¶ä¸­é™¤äº†æœ‰å…³çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ã€è¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± ï¼Œç”¨äºå­˜æ”¾ç¼–è¾‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åè¿›å…¥æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å­˜æ”¾<br>Javaè¯­è¨€å¹¶ä¸è¦æ±‚å¸¸é‡ä¸€å®šåªæœ‰ç¼–è¾‘æœŸæ‰èƒ½äº§ç”Ÿï¼Œä¹Ÿå°±æ˜¯å¯èƒ½å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œè¿™ç§ç‰¹æ€§è¢«å¼€å‘äººå‘˜åˆ©ç”¨å¾—æ¯”è¾ƒå¤šçš„ä¾¿æ˜¯Stringç±»çš„intern()æ–¹æ³•<br>å½“å¸¸é‡æ± æ— æ³•å†ç”³è¯·åˆ°å†…å­˜æ—¶ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸</p>
<h2 id="hotspotè™šæ‹Ÿæœºå¯¹è±¡"><a href="#hotspotè™šæ‹Ÿæœºå¯¹è±¡" class="headerlink" title="hotspotè™šæ‹Ÿæœºå¯¹è±¡"></a>hotspotè™šæ‹Ÿæœºå¯¹è±¡</h2><h3 id="å¯¹è±¡çš„åˆ›å»º"><a href="#å¯¹è±¡çš„åˆ›å»º" class="headerlink" title="å¯¹è±¡çš„åˆ›å»º"></a>å¯¹è±¡çš„åˆ›å»º</h3><ol>
<li><p>æ£€æŸ¥<br>è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡newæŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå°†å»æ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹</p>
</li>
<li><p>åˆ†é…å†…å­˜<br>æ¥ä¸‹æ¥å°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ï¼Œä¸ºå¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´çš„ä»»åŠ¡ç­‰åŒäºæŠŠä¸€å—ç¡®å®šçš„å¤§å°çš„å†…å­˜ä»Javaå †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚<br>å‡è®¾Javaå †ä¸­å†…å­˜æ˜¯ç»å¯¹è§„æ•´çš„ï¼Œæ‰€æœ‰ç”¨è¿‡çš„å†…å­˜æ”¾åœ¨ä¸€éï¼Œç©ºé—²çš„å†…å­˜æ”¾åœ¨å¦ä¸€è¾¹ï¼Œä¸­é—´æ”¾ç€ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºåˆ†ç•Œç‚¹çš„æŒ‡ç¤ºå™¨ï¼Œé‚£æ‰€åˆ†é…å†…å­˜å°±ä»…ä»…æ˜¯æŠŠé‚£ä¸ªæŒ‡é’ˆæŒ‡å‘ç©ºé—²ç©ºé—´é‚£è¾¹æŒªåŠ¨ä¸€æ®µä¸å¯¹è±¡å¤§å°ç›¸ç­‰çš„è·ç¦»ï¼Œè¿™ä¸ªåˆ†é…æ–¹å¼å«åšâ€œæŒ‡é’ˆç¢°æ’â€</p>
</li>
</ol>
<p>å¦‚æœJavaå †ä¸­çš„å†…å­˜å¹¶ä¸æ˜¯è§„æ•´çš„ï¼Œå·²ä½¿ç”¨çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜ç›¸äº’äº¤é”™ï¼Œé‚£å°±æ²¡åŠæ³•ç®€å•åœ°è¿›è¡ŒæŒ‡é’ˆç¢°æ’äº†ï¼Œè™šæ‹Ÿæœºå°±å¿…é¡»ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•ä¸Šå“ªäº›å†…å­˜å—æ˜¯å¯ç”¨çš„ï¼Œåœ¨åˆ†é…çš„æ—¶å€™ä»åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´åˆ’åˆ†ç»™å¯¹è±¡å®ä¾‹ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸Šçš„è®°å½•ï¼Œè¿™ç§åˆ†é…æ–¹å¼æˆä¸ºâ€œç©ºé—²åˆ—è¡¨â€<br>é€‰æ‹©é‚£ç§åˆ†é…æ–¹å¼ç”±Javaå †æ˜¯å¦è§„æ•´å†³å®šï¼Œè€ŒJavaå †æ˜¯å¦è§„æ•´åˆç”±æ‰€é‡‡ç”¨çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å¦å¸¦æœ‰å‹ç¼©æ•´ç†åŠŸèƒ½å†³å®šã€‚</p>
<ol>
<li>Init<br>æ‰§è¡ŒnewæŒ‡ä»¤ä¹‹åä¼šæ¥ç€æ‰§è¡ŒInitæ–¹æ³•ï¼Œè¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªå¯¹è±¡æ‰ç®—äº§ç”Ÿå‡ºæ¥</li>
</ol>
<h3 id="å¯¹è±¡çš„å†…å­˜å¸ƒå±€"><a href="#å¯¹è±¡çš„å†…å­˜å¸ƒå±€" class="headerlink" title="å¯¹è±¡çš„å†…å­˜å¸ƒå±€"></a>å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h3><p>åœ¨HotSpotè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­å‚¨å­˜çš„å¸ƒå±€å¯ä»¥åˆ†ä¸º3å—åŒºåŸŸï¼š<strong>å¯¹è±¡å¤´ã€å®ä¾‹æ•°æ®å’Œå¯¹é½å¡«å……</strong></p>
<p>å¯¹è±¡å¤´åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š<br>a) å‚¨å­˜å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ã€GCåˆ†å¸¦å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³<br>b) å¦ä¸€éƒ¨åˆ†æ˜¯æŒ‡ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯é‚£ä¸ªç±»çš„å®ä¾‹</p>
<h3 id="å¯¹è±¡çš„è®¿é—®å®šä½"><a href="#å¯¹è±¡çš„è®¿é—®å®šä½" class="headerlink" title="å¯¹è±¡çš„è®¿é—®å®šä½"></a>å¯¹è±¡çš„è®¿é—®å®šä½</h3><ol>
<li><p>ä½¿ç”¨å¥æŸ„è®¿é—®<br>Javaå †ä¸­å°†ä¼šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreferenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªçš„å…·ä½“åœ°å€<br>ä¼˜åŠ¿:referenceä¸­å­˜å‚¨çš„æ˜¯ç¨³ç‚¹çš„å¥æŸ„åœ°å€,åœ¨å¯¹è±¡è¢«ç§»åŠ¨(åƒåœ¾æ”¶é›†æ—¶ç§»åŠ¨å¯¹è±¡æ˜¯éå¸¸æ™®éçš„è¡Œä¸º)æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œreferenceæœ¬èº«ä¸éœ€è¦ä¿®æ”¹</p>
</li>
<li><p>ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®<br>Javaå †å¯¹è±¡çš„å¸ƒå±€å°±å¿…é¡»è€ƒè™‘å¦‚ä½•è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯,è€Œrefreenceä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯å¯¹è±¡çš„åœ°å€</p>
</li>
</ol>
<p>ä¼˜åŠ¿ï¼šé€Ÿåº¦æ›´å¿«ï¼ŒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œç”±äºå¯¹è±¡çš„è®¿é—®åœ¨Javaä¸­éå¸¸é¢‘ç¹ï¼Œå› æ­¤è¿™ç±»å¼€é”€ç§¯å°‘æˆå¤šåä¹Ÿæ˜¯ä¸€é¡¹éå¸¸å¯è§‚çš„æ‰§è¡Œæˆæœ¬</p>
<h2 id="OutOfMemoryError-å¼‚å¸¸"><a href="#OutOfMemoryError-å¼‚å¸¸" class="headerlink" title="OutOfMemoryError å¼‚å¸¸"></a>OutOfMemoryError å¼‚å¸¸</h2><h3 id="Javaå †æº¢å‡º"><a href="#Javaå †æº¢å‡º" class="headerlink" title="Javaå †æº¢å‡º"></a>Javaå †æº¢å‡º</h3><p>Javaå †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼Œåªè¦ä¸æ–­çš„åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯GCRootsåˆ°å¯¹è±¡ä¹‹é—´æœ‰å¯è¾¾è·¯å¾„æ¥é¿å…åƒåœ¾å›æ”¶æœºåˆ¶æ¸…é™¤è¿™äº›å¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨æ•°é‡åˆ°è¾¾æœ€å¤§å †çš„å®¹é‡é™åˆ¶åå°±ä¼šäº§ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ï¼Œå¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œå¯è¿›ä¸€æ­¥é€šè¿‡å·¥å…·æŸ¥çœ‹æ³„æ¼å¯¹è±¡åˆ°GC Rootsçš„å¼•ç”¨é“¾ã€‚äºæ˜¯å°±èƒ½æ‰¾åˆ°æ³„éœ²å¯¹è±¡æ˜¯é€šè¿‡æ€æ ·çš„è·¯å¾„ä¸GC</p>
<p>Rootsç›¸å…³è”å¹¶å¯¼è‡´åƒåœ¾æ”¶é›†å™¨æ— æ³•è‡ªåŠ¨å›æ”¶å®ƒä»¬çš„ã€‚æŒæ¡äº†æ³„æ¼å¯¹è±¡çš„ç±»å‹ä¿¡æ¯åŠGC Rootså¼•ç”¨é“¾çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥æ¯”è¾ƒå‡†ç¡®åœ°å®šä½å‡ºæ³„æ¼ä»£ç çš„ä½ç½®<br>å¦‚æœä¸å­˜åœ¨æ³„éœ²ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯å†…å­˜ä¸­çš„å¯¹è±¡ç¡®å®éƒ½è¿˜å¿…é¡»å­˜æ´»ç€ï¼Œé‚£å°±åº”å½“æ£€æŸ¥è™šæ‹Ÿæœºçš„å †å‚æ•°ï¼ˆ-Xmxä¸-Xmsï¼‰ï¼Œä¸æœºå™¨ç‰©ç†å†…å­˜å¯¹æ¯”çœ‹æ˜¯å¦è¿˜å¯ä»¥è°ƒå¤§ï¼Œä»ä»£ç ä¸Šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸäº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ã€æŒæœ‰çŠ¶æ€æ—¶é—´è¿‡é•¿çš„æƒ…å†µï¼Œå°è¯•å‡å°‘ç¨‹åºè¿è¡ŒæœŸçš„å†…å­˜æ¶ˆè€—</p>
<h3 id="è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º"><a href="#è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º" class="headerlink" title="è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º"></a>è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º</h3><p>å¯¹äºHotSpotæ¥è¯´ï¼Œè™½ç„¶-Xosså‚æ•°ï¼ˆè®¾ç½®æœ¬åœ°æ–¹æ³•æ ˆå¤§å°ï¼‰å­˜åœ¨ï¼Œä½†å®é™…ä¸Šæ˜¯æ— æ•ˆçš„ï¼Œæ ˆå®¹é‡åªç”±-Xsså‚æ•°è®¾å®šã€‚å…³äºè™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œåœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æè¿°äº†ä¸¤ç§å¼‚å¸¸ï¼š</p>
<p>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowError<br>å¦‚æœè™šæ‹Ÿæœºåœ¨æ‰©å±•æ ˆæ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼Œåˆ™æŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸<br>åœ¨å•çº¿ç¨‹ä¸‹ï¼Œæ— è®ºç”±äºæ ˆå¸§å¤ªå¤§è¿˜æ˜¯è™šæ‹Ÿæœºæ ˆå®¹é‡å¤ªå°ï¼Œå½“å†…å­˜æ— æ³•åˆ†é…çš„æ—¶å€™ï¼Œè™šæ‹ŸæœºæŠ›å‡ºçš„éƒ½æ˜¯StackOverflowErrorå¼‚å¸¸<br>å¦‚æœæ˜¯å¤šçº¿ç¨‹å¯¼è‡´çš„å†…å­˜æº¢å‡ºï¼Œä¸æ ˆç©ºé—´æ˜¯å¦è¶³å¤Ÿå¤§å¹¶ä¸å­˜åœ¨ä»»ä½•è”ç³»ï¼Œè¿™ä¸ªæ—¶å€™æ¯ä¸ªçº¿ç¨‹çš„æ ˆåˆ†é…çš„å†…å­˜è¶Šå¤§ï¼Œåè€Œè¶Šå®¹æ˜“äº§ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚è§£å†³çš„æ—¶å€™æ˜¯åœ¨ä¸èƒ½å‡å°‘çº¿ç¨‹æ•°æˆ–æ›´æ¢64ä¸ºçš„è™šæ‹Ÿæœºçš„æƒ…å†µä¸‹ï¼Œå°±åªèƒ½é€šè¿‡å‡å°‘æœ€å¤§å †å’Œå‡å°‘æ ˆå®¹é‡æ¥æ¢å–æ›´å¤šçš„çº¿ç¨‹</p>
<h3 id="æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º"><a href="#æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º" class="headerlink" title="æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º"></a>æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º</h3><p>String.intern()æ˜¯ä¸€ä¸ªNativeæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼šå¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²ç»åŒ…å«ä¸€ä¸ªç­‰äºæ­¤Stringå¯¹è±¡çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›ä»£è¡¨æ± ä¸­è¿™ä¸ªå­—ç¬¦ä¸²çš„Stringå¯¹è±¡ï¼›å¦åˆ™ï¼Œå°†æ­¤Stringå¯¹è±¡åŒ…å«çš„å­—ç¬¦ä¸²æ·»åŠ åˆ°å¸¸é‡æ± ä¸­ï¼Œå¹¶ä¸”è¿”å›æ­¤Stringå¯¹è±¡çš„å¼•ç”¨</p>
<p>ç”±äºå¸¸é‡æ± åˆ†é…åœ¨æ°¸ä¹…ä»£ä¸­ï¼Œå¯ä»¥é€šè¿‡-XX:PermSizeå’Œ-XX:MaxPermSizeé™åˆ¶æ–¹æ³•åŒºå¤§å°ï¼Œä»è€Œé—´æ¥é™åˆ¶å…¶ä¸­å¸¸é‡æ± çš„å®¹é‡ã€‚</p>
<p>Intern():</p>
<p>JDK1.6 internæ–¹æ³•ä¼šæŠŠé¦–æ¬¡é‡åˆ°çš„å­—ç¬¦ä¸²å®ä¾‹å¤åˆ¶åˆ°æ°¸ä¹…ä»£ï¼Œè¿”å›çš„ä¹Ÿæ˜¯æ°¸ä¹…ä»£ä¸­è¿™ä¸ªå­—ç¬¦ä¸²å®ä¾‹çš„å¼•ç”¨ï¼Œè€Œç”±StringBuilderåˆ›å»ºçš„å­—ç¬¦ä¸²å®ä¾‹åœ¨Javaå †ä¸Šï¼Œæ‰€ä»¥å¿…ç„¶ä¸æ˜¯ä¸€ä¸ªå¼•ç”¨</p>
<p>JDK1.7 intern()æ–¹æ³•çš„å®ç°ä¸ä¼šå†å¤åˆ¶å®ä¾‹ï¼Œåªæ˜¯åœ¨å¸¸é‡æ± ä¸­è®°å½•é¦–æ¬¡å‡ºç°çš„å®ä¾‹å¼•ç”¨ï¼Œå› æ­¤intern()è¿”å›çš„å¼•ç”¨å’Œç”±StringBuilderåˆ›å»ºçš„é‚£ä¸ªå­—ç¬¦ä¸²å®ä¾‹æ˜¯åŒä¸€ä¸ª</p>
<h2 id="åƒåœ¾æ”¶é›†"><a href="#åƒåœ¾æ”¶é›†" class="headerlink" title="åƒåœ¾æ”¶é›†"></a>åƒåœ¾æ”¶é›†</h2><p>ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ3ä¸ªåŒºåŸŸéšçº¿ç¨‹è€Œç”Ÿï¼Œéšçº¿ç¨‹è€Œç­ï¼Œåœ¨è¿™å‡ ä¸ªåŒºåŸŸå†…å°±ä¸éœ€è¦è¿‡å¤šè€ƒè™‘å›æ”¶çš„é—®é¢˜ï¼Œå› ä¸ºæ–¹æ³•ç»“æŸæˆ–è€…çº¿ç¨‹ç»“æŸæ—¶ï¼Œå†…å­˜è‡ªç„¶å°±è·Ÿéšç€å›æ”¶äº†</p>
<h3 id="åˆ¤æ–­å¯¹è±¡å­˜æ´»"><a href="#åˆ¤æ–­å¯¹è±¡å­˜æ´»" class="headerlink" title="åˆ¤æ–­å¯¹è±¡å­˜æ´»"></a>åˆ¤æ–­å¯¹è±¡å­˜æ´»</h3><h4 id="å¼•ç”¨è®¡æ•°å™¨æ³•"><a href="#å¼•ç”¨è®¡æ•°å™¨æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°å™¨æ³•"></a>å¼•ç”¨è®¡æ•°å™¨æ³•</h4><p>ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“ç”±ä¸€ä¸ªåœ°æ–¹å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±åŠ 1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±å‡1ï¼›ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨ä¸º0çš„å¯¹è±¡å°±æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„</p>
<h4 id="å¯è¾¾æ€§åˆ†æç®—æ³•"><a href="#å¯è¾¾æ€§åˆ†æç®—æ³•" class="headerlink" title="å¯è¾¾æ€§åˆ†æç®—æ³•"></a>å¯è¾¾æ€§åˆ†æç®—æ³•</h4><p>é€šè¿‡ä¸€ç³»åˆ—çš„æˆä¸ºâ€œGC Rootsâ€çš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„æˆä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC<br>ROOTSæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ—¶ä¸å¯ç”¨çš„</p>
<p>Javaè¯­è¨€ä¸­GC Rootsçš„å¯¹è±¡åŒ…æ‹¬ä¸‹é¢å‡ ç§ï¼š</p>
<ol>
<li>è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡</li>
<li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li>
<li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆJNIï¼ˆNativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡</li>
</ol>
<h3 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h3><p>å¼ºå¼•ç”¨å°±æ˜¯åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„ï¼Œç±»ä¼¼Object obj = new Object() è¿™ç±»çš„å¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡<br>è½¯å¼•ç”¨ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ä½†å¹¶éå¿…é¡»çš„å…ƒç´ ã€‚å¯¹äºå®ƒåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œå°†ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ï¼Œå¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸</p>
<p>å¼±å¼•ç”¨ç”¨æ¥æè¿°éå¿…é¡»å¯¹è±¡çš„ï¼Œä½†æ˜¯å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¹‹å‰ï¼Œå½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡</p>
<p>è™šå¼•ç”¨çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥</p>
<h3 id="Finalizeæ–¹æ³•"><a href="#Finalizeæ–¹æ³•" class="headerlink" title="Finalizeæ–¹æ³•"></a>Finalizeæ–¹æ³•</h3><p>ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•éƒ½åªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœå¯¹è±¡é¢ä¸´ä¸‹ä¸€æ¬¡å›æ”¶ï¼Œå®ƒçš„finalize()æ–¹æ³•ä¸ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œå› æ­¤ç¬¬äºŒæ®µä»£ç çš„è‡ªæ•‘è¡ŒåŠ¨å¤±è´¥äº†</p>
<h3 id="å›æ”¶æ–¹æ³•åŒº"><a href="#å›æ”¶æ–¹æ³•åŒº" class="headerlink" title="å›æ”¶æ–¹æ³•åŒº"></a>å›æ”¶æ–¹æ³•åŒº</h3><p>æ°¸ä¹…ä»£çš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼šåºŸå¼ƒå¸¸é‡å’Œæ— ç”¨çš„ç±»</p>
<p>åºŸå¼ƒå¸¸é‡ï¼šå‡å¦‚ä¸€ä¸ªå­—ç¬¦ä¸²abcå·²ç»è¿›å…¥äº†å¸¸é‡æ± ä¸­ï¼Œå¦‚æœå½“å‰ç³»ç»Ÿæ²¡æœ‰ä»»ä½•ä¸€ä¸ªStringå¯¹è±¡abcï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä»»ä½•Stirngå¯¹è±¡å¼•ç”¨å¸¸é‡æ± çš„abcå¸¸é‡ï¼Œä¹Ÿæ²¡æœ‰å…¶ä»–åœ°æ–¹å¼•ç”¨çš„è¿™ä¸ªå­—é¢é‡ï¼Œè¿™ä¸ªæ—¶å€™å‘ç”Ÿå†…å­˜å›æ”¶è¿™ä¸ªå¸¸é‡å°±ä¼šè¢«æ¸…ç†å‡ºå¸¸é‡æ± </p>
<p>æ— ç”¨çš„ç±»ï¼š</p>
<ol>
<li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹</li>
<li>åŠ è½½è¯¥ç±»çš„ClassLoaderå·²ç»è¢«å›æ”¶</li>
<li>è¯¥ç±»å¯¹ç”¨çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•å†ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•</li>
<li>åƒåœ¾æ”¶é›†ç®—æ³•</li>
</ol>
<ul>
<li><p>æ ‡è®°â€”æ¸…é™¤ç®—æ³•</p>
<p>  ç®—æ³•åˆ†ä¸ºæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªé˜¶æ®µï¼šé¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€<br>ä¸è¶³:ä¸€ä¸ªæ˜¯æ•ˆç‡é—®é¢˜ï¼Œæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªè¿‡ç¨‹çš„æ•ˆç‡éƒ½ä¸é«˜ï¼›å¦ä¸€ä¸ªæ˜¯ç©ºé—´é—®é¢˜ï¼Œæ ‡è®°æ¸…æ¥šä¹‹åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œç©ºé—´ç¢ç‰‡å¤ªå¤šå¯èƒ½ä¼šå¯¼è‡´ä»¥åå†ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦åˆ†é…è¾ƒå¤§çš„å¯¹è±¡æ—¶ï¼Œæ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†åŠ¨ä½œ</p>
</li>
<li><p>å¤åˆ¶ç®—æ³•<br>  ä»–å°†å¯ç”¨å†…å­˜æŒ‰ç…§å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™å—çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢ï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨è¿‡çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚è¿™æ ·ä½¿å¾—æ¯æ¬¡éƒ½æ˜¯å¯¹æ•´ä¸ªåŠåŒºè¿›è¡Œå†…å­˜å›æ”¶ï¼Œå†…å­˜åˆ†é…æ—¶ä¹Ÿå°±ä¸ç”¨è€ƒè™‘å†…å­˜ç¢ç‰‡ç­‰å¤æ‚æƒ…å†µï¼Œåªè¦ç§»åŠ¨å †é¡¶æŒ‡é’ˆï¼ŒæŒ‰é¡ºåºåˆ†é…å†…å­˜å³å¯</p>
<p>  ä¸è¶³ï¼šå°†å†…å­˜ç¼©å°ä¸ºäº†åŸæ¥çš„ä¸€åŠ</p>
<p>  å®é™…ä¸­æˆ‘ä»¬å¹¶ä¸éœ€è¦æŒ‰ç…§1:1æ¯”ä¾‹æ¥åˆ’åˆ†å†…å­˜ç©ºé—´ï¼Œè€Œæ˜¯å°†å†…å­˜åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„Edenç©ºé—´å’Œä¸¤å—è¾ƒå°çš„Survivorç©ºé—´ï¼Œæ¯æ¬¡ä½¿ç”¨Edenå’Œå…¶ä¸­ä¸€å—Survivor<br>  å½“å¦ä¸€ä¸ªSurvivorç©ºé—´æ²¡æœ‰è¶³å¤Ÿç©ºé—´å­˜æ”¾ä¸Šä¸€æ¬¡æ–°ç”Ÿä»£æ”¶é›†ä¸‹æ¥çš„å­˜æ´»å¯¹è±¡æ—¶ï¼Œè¿™äº›å¯¹è±¡å°†ç›´æ¥é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶è¿›å…¥è€å¹´ä»£</p>
</li>
<li><p>æ ‡è®°æ•´ç†ç®—æ³•<br>  è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜</p>
</li>
<li><p>åˆ†ä»£æ”¶é›†ç®—æ³•<br>  åªæ˜¯æ ¹æ®å¯¹è±¡å­˜æ´»å‘¨æœŸçš„ä¸åŒå°†å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ã€‚ä¸€èˆ¬æ˜¯æŠŠjavaå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨æœ€é€‚å½“çš„æ”¶é›†ç®—æ³•ã€‚åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œæ¯æ¬¡åƒåœ¾æ”¶é›†æ—¶éƒ½å‘ç°æœ‰å¤§æ‰¹å¯¹è±¡æ­»å»ï¼Œåªæœ‰å°‘é‡å­˜æ´»ï¼Œé‚£å°±é€‰ç”¨å¤åˆ¶ç®—æ³•ï¼Œåªéœ€è¦ä»˜å‡ºå°‘é‡å­˜æ´»å¯¹è±¡çš„å¤åˆ¶æˆæœ¬å°±å¯ä»¥å®Œæˆæ”¶é›†ã€‚è€Œè€å¹´ä»£ä¸­å› ä¸ºå¯¹è±¡å­˜æ´»ç‡é«˜ã€æ²¡æœ‰é¢å¤–ç©ºé—´å¯¹å®ƒè¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œå°±å¿…é¡»ä½¿ç”¨æ ‡è®°æ¸…ç†æˆ–è€…æ ‡è®°æ•´ç†ç®—æ³•æ¥è¿›è¡Œå›æ”¶</p>
</li>
</ul>
<h2 id="åƒåœ¾æ”¶é›†å™¨"><a href="#åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨"></a>åƒåœ¾æ”¶é›†å™¨</h2><ul>
<li>Serialæ”¶é›†å™¨ï¼š<br>  è¿™ä¸ªæ”¶é›†å™¨æ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œä½†å®ƒçš„å•çº¿ç¨‹çš„æ„ä¹‰ä¸ä»…ä»…è¯´æ˜å®ƒä¼šåªä½¿ç”¨ä¸€ä¸ªCOUæˆ–ä¸€æ¡æ”¶é›†çº¿ç¨‹å»å®Œæˆåƒåœ¾æ”¶é›†å·¥ä½œï¼Œæ›´é‡è¦çš„æ˜¯å®ƒåœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ï¼Œç›´åˆ°å®ƒæ‰‹æœºç»“æŸ</li>
<li><p>ParNew æ”¶é›†å™¨ï¼š<br>  Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œé™¤äº†ä½¿ç”¨äº†å¤šçº¿ç¨‹è¿›è¡Œæ”¶é›†ä¹‹å¤–ï¼Œå…¶ä½™è¡Œä¸ºå’ŒSerialæ”¶é›†å™¨ä¸€æ ·</p>
<p>  å¹¶è¡Œï¼šæŒ‡å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä½†æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ä»ç„¶å¤„äºç­‰å¾…çŠ¶æ€</p>
<p>  å¹¶å‘ï¼šæŒ‡ç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼ˆä¸ä¸€å®šæ˜¯å¹¶è¡Œçš„ï¼Œå¯èƒ½ä¼šäº¤æ›¿æ‰§è¡Œï¼‰ï¼Œç”¨æˆ·ç¨‹åºåœ¨ç»§ç»­æ‰§è¡Œï¼Œè€Œåƒåœ¾æ”¶é›†ç¨‹åºè¿è¡Œäºå¦ä¸€ä¸ªCPUä¸Š</p>
</li>
<li><p>Parallel Scavenge<br>  æ”¶é›†å™¨æ˜¯ä¸€ä¸ªæ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå®ƒæ˜¯ä½¿ç”¨å¤åˆ¶ç®—æ³•çš„æ”¶é›†å™¨ï¼Œåˆæ˜¯å¹¶è¡Œçš„å¤šçº¿ç¨‹æ”¶é›†å™¨ã€‚</p>
<p>  ååé‡ï¼šå°±æ˜¯CPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸CPUæ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ã€‚å³ååé‡=è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/ï¼ˆè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+åƒåœ¾æ”¶é›†æ—¶é—´ï¼‰</p>
</li>
<li>Serial Old æ”¶é›†å™¨ï¼š<br>  æ˜¯Serialæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬,æ˜¯ä¸€ä¸ªå•çº¿ç¨‹æ”¶é›†å™¨ï¼Œä½¿ç”¨æ ‡è®°æ•´ç†ç®—æ³•</li>
<li>Parallel Old æ”¶é›†å™¨ï¼š<br>  Parallel Oldæ˜¯Paraller Seavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å’Œæ ‡è®°æ•´ç†ç®—æ³•</li>
<li><p>CMSæ”¶é›†å™¨ï¼š<br>  CMSæ”¶é›†å™¨æ˜¯åŸºäºæ ‡è®°æ¸…é™¤ç®—æ³•å®ç°çš„ï¼Œæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š</p>
<p>  1.åˆå§‹æ ‡è®°2.å¹¶å‘æ ‡è®°3.é‡æ–°æ ‡è®°4.å¹¶å‘æ¸…é™¤</p>
<p>  ä¼˜ç‚¹ï¼šå¹¶å‘æ”¶é›†ã€ä½åœé¡¿<br>  ç¼ºç‚¹ï¼š</p>
<ol>
<li>CMSæ”¶é›†å™¨å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿï¼ŒCMSé»˜è®¤å¯åŠ¨çš„å›æ”¶çº¿ç¨‹æ•°æ˜¯ï¼ˆCPUæ•°é‡+3ï¼‰/4ï¼Œ</li>
<li>CMSæ”¶é›†å™¨æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œå¯èƒ½å‡ºç°Failureå¤±è´¥è€Œå¯¼è‡´ä¸€æ¬¡Full Gåœºåœ°äº§ç”Ÿ</li>
<li>CMSæ˜¯åŸºäºæ ‡è®°æ¸…é™¤ç®—æ³•å®ç°çš„</li>
</ol>
</li>
<li>G1æ”¶é›†å™¨ï¼š<br>  å®ƒæ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡å™¨åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨<ol>
<li>å¹¶è¡Œä¸å¹¶å‘ï¼šåˆ©ç”¨å¤šCPUç¼©çŸ­STOP-The-Worldåœé¡¿çš„æ—¶é—´</li>
<li>åˆ†ä»£æ”¶é›†</li>
<li>ç©ºé—´æ•´åˆï¼šä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡</li>
<li>å¯é¢„æµ‹çš„åœé¡¿<br> è¿ä½œæ–¹å¼ï¼šåˆå§‹æ ‡è®°ï¼Œå¹¶å‘æ ‡è®°ï¼Œæœ€ç»ˆæ ‡è®°ï¼Œç­›é€‰å›æ”¶<br>6.å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥<h4 id="å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…ï¼š"><a href="#å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…ï¼š" class="headerlink" title="å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…ï¼š"></a>å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…ï¼š</h4>å¤§å¤šæ•°æƒ…å†µå¯¹è±¡åœ¨æ–°ç”Ÿä»£EdenåŒºåˆ†é…ï¼Œå½“EdenåŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºå°†å‘èµ·ä¸€æ¬¡Minor GC</li>
</ol>
</li>
</ul>
<h4 id="å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼š"><a href="#å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼š" class="headerlink" title="å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼š"></a>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼š</h4><p>æ‰€è°“å¤§å¯¹è±¡å°±æ˜¯æŒ‡éœ€è¦å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„Javaå¯¹è±¡ï¼Œæœ€å…¸å‹çš„å¤§å¯¹è±¡å°±æ˜¯é‚£ç§å¾ˆé•¿çš„å­—ç¬¦ä¸²ä»¥åŠæ•°ç»„ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯é¿å…EdenåŒºåŠä¸¤ä¸ªServivorä¹‹é—´å‘ç”Ÿå¤§é‡çš„å†…å­˜å¤åˆ¶</p>
<h4 id="é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"><a href="#é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£" class="headerlink" title="é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"></a>é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£</h4><p>å¦‚æœå¯¹è±¡åœ¨EdenåŒºå‡ºç”Ÿå¹¶ä¸”å°½åŠ›è¿‡ä¸€æ¬¡Minor GCåä»ç„¶å­˜æ´»ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«Servivorå®¹çº³ï¼Œå°†è¢«ç§»åŠ¨åˆ°Servivorç©ºé—´ä¸­ï¼Œå¹¶ä¸”æŠŠå¯¹è±¡å¹´é¾„è®¾ç½®æˆä¸º1.å¯¹è±¡åœ¨ServivoråŒºä¸­æ¯ç†¬è¿‡ä¸€æ¬¡Minor GCï¼Œå¹´é¾„å°±å¢åŠ 1å²ï¼Œå½“å®ƒçš„å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦ï¼ˆé»˜è®¤15å²ï¼‰ï¼Œå°±å°†ä¼šè¢«æ™‹çº§åˆ°è€å¹´ä»£ä¸­</p>
<h4 id="åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"><a href="#åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š" class="headerlink" title="åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"></a>åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š</h4><p>ä¸ºäº†æ›´å¥½åœ°é€‚åº”ä¸åŒç¨‹åºçš„å†…å­˜çŠ¶å†µï¼Œè™šæ‹Ÿæœºå¹¶ä¸æ˜¯æ°¸è¿œåœ°è¦æ±‚å¯¹è±¡çš„å¹´é¾„å¿…é¡»è¾¾åˆ°äº†MaxTenuringThresholdæ‰èƒ½æ™‹çº§åˆ°è€å¹´ä»£ï¼Œå¦‚æœåœ¨Servivorç©ºé—´ä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡çš„å¤§å°æ€»å’Œå¤§äºSurvivorç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å…¥åˆ°è€å¹´ä»£ï¼Œæ— é¡»ç™»åˆ°MaxTenuringThresholdä¸­è¦æ±‚çš„å¹´é¾„</p>
<h4 id="ç©ºé—´åˆ†é…æ‹…ä¿ï¼š"><a href="#ç©ºé—´åˆ†é…æ‹…ä¿ï¼š" class="headerlink" title="ç©ºé—´åˆ†é…æ‹…ä¿ï¼š"></a>ç©ºé—´åˆ†é…æ‹…ä¿ï¼š</h4><p>åœ¨å‘ç”ŸMinor GC ä¹‹å‰ï¼Œè™šæ‹Ÿæœºä¼šæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡æ€»ç©ºé—´ï¼Œå¦‚æœè¿™ä¸ªæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆMinor DCå¯ä»¥ç¡®ä¿æ˜¯å®‰å…¨çš„ã€‚å¦‚æœä¸æˆç«‹ï¼Œåˆ™è™šæ‹Ÿæœºä¼šæŸ¥çœ‹HandlePromotionFailureè®¾ç½®å€¼æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥ã€‚å¦‚æœå…è®¸é‚£ä¹ˆä¼šç»§ç»­æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ™‹çº§åˆ°è€å¹´ä»£å¯¹è±¡çš„å¹³å‡å¤§å°ï¼Œå¦‚æœå¤§äºï¼Œå°†å°è¯•è¿›è¡Œä¸€æ¬¡Minor GCï¼Œå°½ç®¡è¿™æ¬¡MinorGC æ˜¯æœ‰é£é™©çš„ï¼šå¦‚æœå°äºï¼Œæˆ–è€…HandlePromotionFailureè®¾ç½®ä¸å…è®¸å†’é™©ï¼Œé‚£è¿™æ—¶ä¹Ÿè¦æ”¹ä¸ºè¿›è¡Œä¸€æ¬¡Full GC</p>
<h2 id="è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶"><a href="#è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶" class="headerlink" title="è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶"></a>è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶</h2><p>è™šæ‹Ÿæœºå§æè¿°ç±»çš„æ•°æ®ä»Classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Javaç±»å‹ï¼Œè¿™å°±æ˜¯è™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶<br>åœ¨Javaè¯­è¨€é‡Œé¢ï¼Œç±»å‹çš„åŠ è½½ã€‚è¿æ¥å’Œåˆå§‹åŒ–è¿‡ç¨‹éƒ½æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å®Œæˆçš„</p>
<h3 id="ç±»åŠ è½½çš„æ—¶æœº"><a href="#ç±»åŠ è½½çš„æ—¶æœº" class="headerlink" title="ç±»åŠ è½½çš„æ—¶æœº"></a>ç±»åŠ è½½çš„æ—¶æœº</h3><p>ç±»è¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­å¼€å§‹ï¼Œåˆ°å¸è½½ä¸ºæ­¢ï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œå¸è½½7ä¸ªé˜¶æ®µ</p>
<p>åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€åˆå§‹åŒ–å’Œå¸è½½è¿™5ä¸ªé˜¶æ®µçš„é¡ºåºæ˜¯ç¡®å®šçš„ï¼Œç±»çš„åŠ è½½è¿‡ç¨‹å¿…é¡»æŒ‰ç…§è¿™ç§é¡ºåºæŒ‰éƒ¨å°±ç­åœ°å¼€å§‹ï¼Œè€Œè§£æé˜¶æ®µåˆ™ä¸ä¸€å®šï¼šå®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥å†åˆå§‹åŒ–é˜¶æ®µä¹‹åå†å¼€å§‹ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†æ”¯æŒJavaè¯­è¨€è¿è¡Œæ—¶ç»‘å®šï¼ˆä¹Ÿæˆä¸ºåŠ¨æ€ç»‘å®šæˆ–æ™šæœŸç»‘å®šï¼‰</p>
<p>è™šæ‹Ÿæœºè§„èŒƒè§„å®šæœ‰ä¸”åªæœ‰5ç§æƒ…å†µå¿…é¡»ç«‹å³å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼š</p>
<ol>
<li>é‡åˆ°newã€getstaticã€putstaticæˆ–invokestaticè¿™4æ¡å­—èŠ‚ç æŒ‡ä»¤æ—¶ï¼Œå¦‚æœç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦è§¦å‘å…¶åˆå§‹åŒ–ã€‚ç”Ÿæˆè¿™4æ¡æŒ‡ä»¤çš„æœ€å¸¸è§çš„Javaä»£ç åœºæ™¯æ˜¯ï¼šä½¿ç”¨newå…³é”®å­—å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ã€è¯»å–æˆ–è®¾ç½®ä¸€ä¸ªç±»çš„é™æ€å­—æ®µï¼ˆè¢«finalä¿®é¥°ã€å·²åœ¨ç¼–è¯‘æœŸæŠŠç»“æœæ”¾å…¥å¸¸é‡æ± çš„é™æ€å­—æ®µé™¤å¤–ï¼‰çš„æ—¶å€™ï¼Œä»¥åŠè°ƒç”¨ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•çš„æ—¶å€™</li>
<li>ä½¿ç”¨java.lang.reflectåŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚æœç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–</li>
<li>å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å…¶çˆ¶ç±»è¿˜æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–</li>
<li>å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶å€™ï¼Œç”¨æˆ·éœ€è¦æŒ‡å®šä¸€ä¸ªè¦æ‰§è¡Œçš„ä¸»ç±»ï¼ˆåŒ…å«main()æ–¹æ³•çš„é‚£ä¸ªç±»ï¼‰ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¿™ä¸ªä¸»ç±»</li>
<li>å½“ä½¿ç”¨JDK1.7çš„åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼Œå¦‚æœä¸€ä¸ªjava.lang.invoke.MethodHandleå®ä¾‹æœ€åçš„è§£æç»“æœREF_getStaticã€REF_putStaticã€REF_invokeStaticçš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•å¥æŸ„æ‰€å¯¹åº”çš„ç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–<br>è¢«åŠ¨å¼•ç”¨ï¼š</li>
</ol>
<ul>
<li>é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œä¸ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ–</li>
<li>é€šè¿‡æ•°ç»„å®šä¹‰æ¥å¼•ç”¨ç±»ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–</li>
<li>å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨åˆ°å®šä¹‰å¸¸é‡çš„ç±»ï¼Œå› æ­¤ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡çš„ç±»çš„åˆå§‹åŒ–<br>æ¥å£çš„åˆå§‹åŒ–ï¼šæ¥å£åœ¨åˆå§‹åŒ–æ—¶ï¼Œå¹¶ä¸è¦æ±‚å…¶çˆ¶æ¥å£å…¨éƒ¨å®Œæˆç±»åˆå§‹åŒ–ï¼Œåªæœ‰åœ¨æ­£æ•´ä½¿ç”¨åˆ°çˆ¶æ¥å£çš„æ—¶å€™ï¼ˆå¦‚å¼•ç”¨æ¥å£ä¸­å®šä¹‰çš„å¸¸é‡ï¼‰æ‰ä¼šåˆå§‹åŒ–<h2 id="ç±»åŠ è½½çš„è¿‡ç¨‹"><a href="#ç±»åŠ è½½çš„è¿‡ç¨‹" class="headerlink" title="ç±»åŠ è½½çš„è¿‡ç¨‹"></a>ç±»åŠ è½½çš„è¿‡ç¨‹</h2><h3 id="åŠ è½½"><a href="#åŠ è½½" class="headerlink" title="åŠ è½½"></a>åŠ è½½</h3></li>
<li>é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåç±»è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµ</li>
<li>å°†è¿™å­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºè¿è¡Œæ—¶æ•°æ®ç»“æ„</li>
<li>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£</li>
</ul>
<p>æ€ä¹ˆè·å–äºŒè¿›åˆ¶å­—èŠ‚æµï¼Ÿ</p>
<ul>
<li>ä»ZIPåŒ…ä¸­è¯»å–ï¼Œè¿™å¾ˆå¸¸è§ï¼Œæœ€ç»ˆæˆä¸ºæ—¥åJARã€EARã€WARæ ¼å¼çš„åŸºç¡€</li>
<li>ä»ç½‘ç»œä¸­è·å–ï¼Œè¿™ç§åœºæ™¯æœ€å…¸å‹çš„åº”ç”¨å°±æ˜¯Applet</li>
<li>è¿è¡Œæ—¶è®¡ç®—ç”Ÿæˆï¼Œè¿™ç§å¸¸è§ä½¿ç”¨å¾—æœ€å¤šçš„å°±æ˜¯åŠ¨æ€ä»£ç†æŠ€æœ¯</li>
<li>ç”±å…¶ä»–æ–‡ä»¶ç”Ÿæˆï¼Œå…¸å‹åœºæ™¯å°±æ˜¯JSPåº”ç”¨</li>
<li><p>ä»æ•°æ®åº“ä¸­è¯»å–ï¼Œè¿™ç§åœºæ™¯ç›¸å¯¹å°‘ä¸€äº›ï¼ˆä¸­é—´ä»¶æœåŠ¡å™¨ï¼‰<br>æ•°ç»„ç±»æœ¬èº«ä¸é€šè¿‡ç±»åŠ è½½å™¨åˆ›å»ºï¼Œå®ƒæ˜¯ç”±Javaè™šæ‹Ÿæœºç›´æ¥åˆ›å»ºçš„<br>æ•°ç»„ç±»çš„åˆ›å»ºè¿‡ç¨‹éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
</li>
<li><p>å¦‚æœæ•°ç»„çš„ç»„ä»¶ç±»å‹(æŒ‡çš„æ˜¯æ•°ç»„å»æ‰ä¸€ä¸ªç»´åº¦çš„ç±»å‹)æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£å°±é€’å½’é‡‡ç”¨ä¸Šé¢çš„åŠ è½½è¿‡ç¨‹å»åŠ è½½è¿™ä¸ªç»„ä»¶ç±»å‹ï¼Œæ•°ç»„Cå°†åœ¨åŠ è½½è¯¥ç»„ä»¶ç±»å‹çš„ç±»åŠ è½½å™¨çš„ç±»åç§°ç©ºé—´ä¸Šè¢«æ ‡è¯†</p>
</li>
<li>å¦‚æœæ•°ç»„çš„ç»„ä»¶ç±»å‹ä¸æ˜¯å¼•ç”¨ç±»å‹(åˆ—å¦‚int[]ç»„æ•°)ï¼ŒJavaè™šæ‹Ÿæœºå°†ä¼šæŠŠæ•°ç»„Cæ ‡è¯†ä¸ºä¸å¼•å¯¼ç±»åŠ è½½å™¨å…³è”</li>
<li>æ•°ç»„ç±»çš„å¯è§æ€§ä¸å®ƒçš„ç»„ä»¶ç±»å‹çš„å¯è§æ€§ä¸€è‡´ï¼Œå¦‚æœç»„ä»¶ç±»å‹ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£æ•°ç»„ç±»çš„å¯è§æ€§å°†é»˜è®¤ä¸ºpublic</li>
</ul>
<h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>éªŒè¯é˜¶æ®µä¼šå®Œæˆä¸‹é¢4ä¸ªé˜¶æ®µçš„æ£€éªŒåŠ¨ä½œï¼šæ–‡ä»¶æ ¼å¼éªŒè¯ï¼Œå…ƒæ•°æ®éªŒè¯ï¼Œå­—èŠ‚ç éªŒè¯ï¼Œç¬¦å·å¼•ç”¨éªŒè¯</p>
<h3 id="æ–‡ä»¶æ ¼å¼éªŒè¯"><a href="#æ–‡ä»¶æ ¼å¼éªŒè¯" class="headerlink" title="æ–‡ä»¶æ ¼å¼éªŒè¯"></a>æ–‡ä»¶æ ¼å¼éªŒè¯</h3><p>ç¬¬ä¸€é˜¶æ®µè¦éªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆClassæ–‡ä»¶æ ¼å¼çš„è§„èŒƒï¼Œå¹¶ä¸”èƒ½è¢«å½“å‰ç‰ˆæœ¬çš„è™šæ‹Ÿæœºå¤„ç†ã€‚è¿™ä¸€é˜¶æ®µå¯èƒ½åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ˜¯å¦ä»¥é­”æ•°oxCAFEBABEå¼€å¤´</li>
<li>ä¸»ã€æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰è™šæ‹Ÿæœºå¤„ç†èŒƒå›´ä¹‹å†…</li>
<li>å¸¸é‡æ± çš„å¸¸é‡ä¸­æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„å¸¸é‡ç±»å‹(æ£€æŸ¥å¸¸é‡tagæ ‡å¿—)</li>
<li>æŒ‡å‘å¸¸é‡çš„å„ç§ç´¢å¼•å€¼ä¸­æ˜¯å¦æœ‰æŒ‡å‘ä¸å­˜åœ¨çš„å¸¸é‡æˆ–ä¸ç¬¦åˆç±»å‹çš„å¸¸é‡</li>
<li>CONSTANT_Itf8_info å‹çš„å¸¸é‡ä¸­æ˜¯å¦æœ‰ä¸ç¬¦åˆUTF8ç¼–ç çš„æ•°æ®</li>
<li>Classæ–‡ä»¶ä¸­å„ä¸ªéƒ¨åˆ†åŠæ–‡ä»¶æœ¬èº«æ˜¯å¦æœ‰è¢«åˆ é™¤çš„æˆ–é™„åŠ çš„å…¶ä»–ä¿¡æ¯<br>è¿™ä¸ªé˜¶æ®µçš„éªŒè¯æ—¶åŸºäºäºŒè¿›åˆ¶å­—èŠ‚æµè¿›è¡Œçš„ï¼Œåªæœ‰é€šè¿‡ç±»è¿™ä¸ªé˜¶æ®µçš„éªŒè¯åï¼Œå­—èŠ‚æµæ‰ä¼šè¿›å…¥å†…å­˜çš„æ–¹æ³•åŒºè¿›è¡Œå­˜å‚¨ï¼Œæ‰€ä»¥åé¢çš„3ä¸ªéªŒè¯é˜¶æ®µå…¨éƒ¨æ˜¯åŸºäºæ–¹æ³•åŒºçš„å­˜å‚¨ç»“æ„è¿›è¡Œçš„ï¼Œä¸ä¼šå†ç›´æ¥æ“ä½œå­—èŠ‚æµ<h3 id="å…ƒæ•°æ®éªŒè¯"><a href="#å…ƒæ•°æ®éªŒè¯" class="headerlink" title="å…ƒæ•°æ®éªŒè¯"></a>å…ƒæ•°æ®éªŒè¯</h3></li>
<li>è¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»(é™¤äº†java.lang.Objectä¹‹å¤–,æ‰€æœ‰çš„ç±»éƒ½åº”å½“æœ‰çˆ¶ç±»)</li>
<li>è¿™ä¸ªç±»çš„çˆ¶ç±»æ˜¯å¦ç»§æ‰¿äº†ä¸å…è®¸è¢«ç»§æ‰¿çš„ç±»ï¼ˆè¢«finalä¿®é¥°çš„ç±»ï¼‰</li>
<li>å¦‚æœè¿™ä¸ªç±»ä¸æ˜¯æŠ½è±¡ç±»ï¼Œæ˜¯å¦å®ç°ç±»å…¶çˆ¶ç±»æˆ–æ¥å£ä¹‹ä¸­è¦æ±‚å®ç°çš„æ‰€æœ‰æ–¹æ³•</li>
<li>ç±»ä¸­çš„å­—æ®µã€æ–¹æ³•æ˜¯å¦ä¸çˆ¶ç±»äº§ç”ŸçŸ›ç›¾(åˆ—å¦‚è¦†ç›–ç±»çˆ¶ç±»çš„finalå­—æ®µ,æˆ–è€…å‡ºç°ä¸ç¬¦åˆè§„åˆ™çš„æ–¹æ³•é‡è½½ï¼Œåˆ—å¦‚æ–¹æ³•å‚æ•°éƒ½ä¸€è‡´ï¼Œä½†è¿”å›å€¼ç±»å‹å´ä¸åŒç­‰)<br>ç¬¬äºŒé˜¶æ®µçš„ä¸»è¦ç›®çš„æ˜¯å¯¹ç±»å…ƒæ•°æ®ä¿¡æ¯è¿›è¡Œè¯­ä¹‰æ ¡éªŒï¼Œä¿è¯ä¸å­˜åœ¨ä¸ç¬¦åˆJavaè¯­è¨€è§„èŒƒçš„å…ƒæ•°æ®ä¿¡æ¯<h3 id="å­—èŠ‚ç éªŒè¯"><a href="#å­—èŠ‚ç éªŒè¯" class="headerlink" title="å­—èŠ‚ç éªŒè¯"></a>å­—èŠ‚ç éªŒè¯</h3>ç¬¬ä¸‰é˜¶æ®µæ˜¯æ•´ä¸ªéªŒè¯è¿‡ç¨‹ä¸­æœ€å¤æ‚çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¸»è¦ç›®çš„ä¼¼ä¹é€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµåˆ†æï¼Œç¡®å®šç¨‹åºè¯­è¨€æ˜¯åˆæ³•çš„ã€ç¬¦åˆé€»è¾‘çš„ã€‚åœ¨ç¬¬äºŒé˜¶æ®µå¯¹å…ƒæ•°æ®ä¿¡æ¯ä¸­çš„æ•°æ®ç±»å‹åšå®Œæ ¡éªŒåï¼Œè¿™ä¸ªé˜¶æ®µå°†å¯¹ç±»çš„æ–¹æ³•ä½“è¿›è¡Œæ ¡éªŒåˆ†æï¼Œä¿è¯è¢«æ ¡éªŒç±»çš„æ–¹æ³•åœ¨è¿è¡Œæ—¶ä¸ä¼šåšå‡ºå±å®³è™šæ‹Ÿæœºå®‰å…¨çš„äº‹ä»¶ã€‚</li>
<li>ä¿è¯ä»»æ„æ—¶åˆ»æ“ä½œæ•°æ ˆçš„æ•°æ®ç±»å‹ä¸æŒ‡ä»¤ä»£ç åºåˆ—éƒ½èƒ½é…åˆå·¥ä½œï¼Œåˆ—å¦‚ï¼Œåˆ—å¦‚åœ¨æ“ä½œæ•°æ ˆæ”¾ç½®ç±»ä¸€ä¸ªintç±»å‹çš„æ•°æ®ï¼Œä½¿ç”¨æ—¶å´æŒ‰longç±»å‹æ¥åŠ è½½å…¥æœ¬åœ°å˜é‡è¡¨ä¸­</li>
<li>ä¿è¯è·³è½¬æŒ‡ä»¤ä¸ä¼šè·³è½¬åˆ°æ–¹æ³•ä½“ä»¥å¤–çš„å­—èŠ‚ç æŒ‡ä»¤ä¸Š</li>
<li>ä¿è¯æ–¹æ³•ä½“ä¸­çš„ç±»å‹è½¬æ¢æ—¶æœ‰æ•ˆçš„ï¼Œåˆ—å¦‚å¯ä»¥æŠŠä¸€ä¸ªå­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»æ•°æ®ç±»å‹ï¼Œè¿™ä¸ªæ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯å§çˆ¶ç±»å¯¹è±¡èµ‹å€¼ç»™å­ç±»æ•°æ®ç±»å‹ï¼Œç”šè‡³æŠŠå¯¹è±¡èµ‹å€¼ç»™ä¸å®ƒæ¯«æ— ç»§æ‰¿å…³ç³»ã€å®Œå…¨ä¸ç›¸å¹²çš„ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œåˆ™æ˜¯å±é™©å’Œä¸åˆæ³•çš„<h3 id="ç¬¦å·å¼•ç”¨éªŒè¯"><a href="#ç¬¦å·å¼•ç”¨éªŒè¯" class="headerlink" title="ç¬¦å·å¼•ç”¨éªŒè¯"></a>ç¬¦å·å¼•ç”¨éªŒè¯</h3>å‘ç”Ÿåœ¨è™šæ‹Ÿæœºå°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªè½¬åŒ–åŠ¨ä½œå°†åœ¨è¿æ¥çš„ç¬¬ä¸‰é˜¶æ®µâ€”â€”è§£æé˜¶æ®µä¸­å‘ç”Ÿã€‚</li>
<li>ç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å­—ç¬¦ä¸²æè¿°çš„å…¨é™å®šåæ˜¯å¦èƒ½æ‰¾åˆ°ç›¸å¯¹åº”çš„ç±»</li>
<li>åœ¨æŒ‡å®šç±»ä¸­æ˜¯å¦å­˜åœ¨ç¬¦åˆæ–¹æ³•çš„å­—æ®µæè¿°ç¬¦ä»¥åŠç®€å•åç§°æ‰€æè¿°çš„æ–¹æ³•å’Œå­—æ®µ</li>
<li>ç¬¦å·å¼•ç”¨ä¸­çš„ç±»ã€å­—æ®µã€æ–¹æ³•çš„è®¿é—®æ€§æ˜¯å¦å¯è¢«å½“å‰ç±»è®¿é—®</li>
</ol>
<p>å¯¹äºè™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶æ¥è¯´ï¼ŒéªŒè¯é˜¶æ®µæ˜¯éå¸¸é‡è¦çš„ï¼Œä½†æ˜¯ä¸ä¸€å®šå¿…è¦ï¼ˆå› ä¸ºå¯¹ç¨‹åºè¿è¡ŒæœŸæ²¡æœ‰å½±å“ï¼‰çš„é˜¶æ®µã€‚å¦‚æœå…¨éƒ¨ä»£ç éƒ½å·²ç»è¢«åå¤ä½¿ç”¨å’ŒéªŒè¯è¿‡ï¼Œé‚£ä¹ˆåœ¨å®æ–½é˜¶æ®µå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨Xverifyï¼šnoneå‚æ•°æ¥å…³é—­å¤§éƒ¨åˆ†çš„ç±»éªŒè¯æªæ–½ï¼Œä»¥ç¼©çŸ­è™šæ‹Ÿæœºç±»åŠ è½½çš„æ—¶é—´</p>
<h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å˜é‡éƒ½åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…ã€‚è¿™ä¸ªæ—¶å€™è¿›è¡Œå†…å­˜åˆ†é…çš„ä»…åŒ…æ‹¬ç±»å˜é‡(è¢«staticä¿®é¥°çš„å˜é‡)ï¼Œè€Œä¸åŒ…æ‹¬å®ä¾‹å˜é‡ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨Javaå †ä¸­ã€‚å…¶æ¬¡ï¼Œè¿™é‡Œè¯´çš„åˆå§‹å€¼é€šå¸¸ä¸‹æ˜¯æ•°æ®ç±»å‹çš„é›¶å€¼ã€‚<br>å‡è®¾public static int value = 123ï¼›<br>é‚£å˜é‡valueåœ¨å‡†å¤‡é˜¶æ®µè¿‡åçš„åˆå§‹å€¼ä¸º0è€Œä¸æ˜¯123ï¼Œå› ä¸ºè¿™æ—¶å€™å°šæœªå¼€å§‹æ‰§è¡Œä»»ä½•Javaæ–¹æ³•ï¼Œè€ŒæŠŠvalueèµ‹å€¼ä¸º123çš„putstaticæŒ‡ä»¤æ˜¯ç¨‹åºè¢«ç¼–è¯‘åï¼Œå­˜æ”¾äºç±»æ„é€ å™¨<clinit>()æ–¹æ³•ä¹‹ä¸­ï¼Œæ‰€ä»¥æŠŠvalueèµ‹å€¼ä¸º123çš„åŠ¨ä½œå°†åœ¨åˆå§‹åŒ–é˜¶æ®µæ‰ä¼šæ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨finalä¿®é¥°ï¼Œåˆ™åœ¨è¿™ä¸ªé˜¶æ®µå…¶åˆå§‹å€¼è®¾ç½®ä¸º123</clinit></p>
<h4 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h4><p>è§£æé˜¶æ®µæ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡</p>
<h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><p>ç±»çš„åˆå§‹åŒ–é˜¶æ®µæ˜¯ç±»åŠ è½½è¿‡ç¨‹çš„æœ€åä¸€æ­¥ï¼Œå‰é¢çš„ç±»åŠ è½½è¿‡ç¨‹ä¸­ï¼Œé™¤äº†åœ¨åŠ è½½é˜¶æ®µç”¨æˆ·åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨å‚ä¸ä¹‹å¤–ï¼Œå…¶ä½™åŠ¨ä½œå®Œå…¨ç”±è™šæ‹Ÿæœºä¸»å¯¼å’Œæ§åˆ¶ã€‚åˆ°äº†åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰æ­£çœŸå¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„Javaç¨‹åºä»£ç (æˆ–è€…è¯´æ˜¯å­—èŠ‚ç )</p>
<h2 id="ç±»çš„åŠ è½½å™¨"><a href="#ç±»çš„åŠ è½½å™¨" class="headerlink" title="ç±»çš„åŠ è½½å™¨"></a>ç±»çš„åŠ è½½å™¨</h2><h4 id="åŒäº²å§”æ´¾æ¨¡å‹ï¼š"><a href="#åŒäº²å§”æ´¾æ¨¡å‹ï¼š" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹ï¼š"></a>åŒäº²å§”æ´¾æ¨¡å‹ï¼š</h4><p>åªå­˜åœ¨ä¸¤ç§ä¸åŒçš„ç±»åŠ è½½å™¨ï¼šå¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼Œä½¿ç”¨C++å®ç°ï¼Œæ˜¯è™šæ‹Ÿæœºè‡ªèº«çš„ä¸€éƒ¨åˆ†ã€‚å¦ä¸€ç§æ˜¯æ‰€æœ‰å…¶ä»–çš„ç±»åŠ è½½å™¨ï¼Œä½¿ç”¨JAVAå®ç°ï¼Œç‹¬ç«‹äºJVMï¼Œå¹¶ä¸”å…¨éƒ¨ç»§æ‰¿è‡ªæŠ½è±¡ç±»java.lang.ClassLoader.</p>
<p>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼Œè´Ÿè´£å°†å­˜æ”¾åœ¨<java+home>\libç›®å½•ä¸­çš„ï¼Œæˆ–è€…è¢«-Xbootclasspathå‚æ•°æ‰€åˆ¶å®šçš„è·¯å¾„ä¸­çš„ï¼Œå¹¶ä¸”æ˜¯JVMè¯†åˆ«çš„ï¼ˆä»…æŒ‰ç…§æ–‡ä»¶åè¯†åˆ«ï¼Œå¦‚rt.jarï¼Œå¦‚æœåå­—ä¸ç¬¦åˆï¼Œå³ä½¿æ”¾åœ¨libç›®å½•ä¸­ä¹Ÿä¸ä¼šè¢«åŠ è½½ï¼‰ï¼ŒåŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­ï¼Œå¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•è¢«JAVAç¨‹åºç›´æ¥å¼•ç”¨ã€‚</java+home></p>
<p>æ‰©å±•ç±»åŠ è½½å™¨ï¼Œç”±sun.misc.Launcher$ExtClassLoaderå®ç°ï¼Œè´Ÿè´£åŠ è½½<java_home>\lib\extç›®å½•ä¸­çš„ï¼Œæˆ–è€…è¢«java.ext.dirsç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„ä¸­çš„æ‰€æœ‰ç±»åº“ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨ã€‚</java_home></p>
<p>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰ï¼Œç”±sun.misc.Launcher$AppClassLoaderæ¥å®ç°ã€‚ç”±äºè¿™ä¸ªç±»åŠ è½½å™¨æ˜¯ClassLoaderä¸­çš„getSystemClassLoader()æ–¹æ³•çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ä¸€èˆ¬ç§°å®ƒä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ã€‚è´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ï¼ˆClassPathï¼‰ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“ï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªç±»åŠ è½½å™¨ï¼Œå¦‚æœåº”ç”¨ç¨‹åºä¸­æ²¡æœ‰è‡ªå®šä¹‰è¿‡è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªå°±æ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚</p>
<p>è¿™å¼ å›¾è¡¨ç¤ºç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParents Delegation modelï¼‰. åŒäº²å§”æ´¾æ¨¡å‹è¦æ±‚é™¤äº†é¡¶å±‚çš„å¯åŠ¨åŠ è½½ç±»å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½åº”å½“æœ‰è‡ªå·±çš„çˆ¶ç±»åŠ è½½å™¨ã€‚ï¼Œè¿™é‡Œç±»åŠ è½½å™¨ä¹‹é—´çš„çˆ¶å­å…³ç³»ä¸€èˆ¬ä¸ä¼šä»¥ç»§æ‰¿çš„å…³ç³»æ¥å®ç°ï¼Œè€Œæ˜¯ä½¿ç”¨ç»„åˆå…³ç³»æ¥å¤ç”¨çˆ¶ç±»åŠ è½½å™¨çš„ä»£ç ã€‚</p>
<h4 id="åŒäº²å§”æ´¾æ¨¡å‹çš„å·¥ä½œè¿‡ç¨‹æ˜¯ï¼š"><a href="#åŒäº²å§”æ´¾æ¨¡å‹çš„å·¥ä½œè¿‡ç¨‹æ˜¯ï¼š" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹çš„å·¥ä½œè¿‡ç¨‹æ˜¯ï¼š"></a>åŒäº²å§”æ´¾æ¨¡å‹çš„å·¥ä½œè¿‡ç¨‹æ˜¯ï¼š</h4><p>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼Œæ¯ä¸€ä¸ªå±‚æ¬¡çš„ç±»åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤ï¼Œå› æ­¤æ‰€æœ‰çš„åŠ è½½è¯·æ±‚æœ€ç»ˆéƒ½æ˜¯åº”è¯¥ä¼ é€åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¸­ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•å®Œæˆè¿™ä¸ªåŠ è½½è¯·æ±‚ï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€çš„ç±»ï¼‰æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚</p>
<h4 id="è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š"><a href="#è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š" class="headerlink" title="è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š"></a>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š</h4><p>Javaç±»éšç€å®ƒçš„ç±»åŠ è½½å™¨ä¸€èµ·å…·å¤‡äº†ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ã€‚ä¾‹å¦‚ç±»java.lang.Object,å®ƒå­˜æ”¾åœ¨rt.jarä¸­ï¼Œæ— è®ºå“ªä¸€ä¸ªç±»åŠ è½½å™¨è¦åŠ è½½è¿™ä¸ªç±»ï¼Œæœ€ç»ˆéƒ½æ˜¯å§”æ´¾ç»™å¤„äºæ¨¡å‹æœ€é¡¶ç«¯çš„å¯åŠ¨ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œå› æ­¤Objectç±»åœ¨ç¨‹åºçš„å„ç§ç±»åŠ è½½å™¨ç¯å¢ƒä¸­éƒ½æ˜¯åŒä¸€ä¸ªç±»ã€‚ç›¸åï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨åŒäº²å§”æ´¾æ¨¡å‹ï¼Œç”±å„ä¸ªç±»åŠ è½½å™¨è‡ªè¡Œå»åŠ è½½çš„è¯ï¼Œå¦‚æœç”¨æˆ·è‡ªå·±ç¼–å†™äº†ä¸€ä¸ªç§°ä¸ºjava.lang.objectçš„ç±»ï¼Œå¹¶æ”¾åœ¨ç¨‹åºçš„ClassPathä¸­ï¼Œé‚£ç³»ç»Ÿä¸­å°†ä¼šå‡ºç°å¤šä¸ªä¸åŒçš„Objectç±»ï¼ŒJavaç±»å‹ä½“ç³»ä¸­æœ€åŸºç¡€çš„è¡Œä¸ºä¹Ÿå°±æ— æ³•ä¿è¯ï¼Œåº”ç”¨ç¨‹åºä¹Ÿå°†ä¼šå˜å¾—ä¸€ç‰‡æ··ä¹±<br>å°±æ˜¯ä¿è¯æŸä¸ªèŒƒå›´çš„ç±»ä¸€å®šæ˜¯è¢«æŸä¸ªç±»åŠ è½½å™¨æ‰€åŠ è½½çš„ï¼Œè¿™å°±ä¿è¯åœ¨ç¨‹åºä¸­åŒ ä¸€ä¸ªç±»ä¸ä¼šè¢«ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½ã€‚è¿™æ ·åšçš„ä¸€ä¸ªä¸»è¦çš„è€ƒé‡ï¼Œå°±æ˜¯ä»å®‰å…¨å±‚ é¢ä¸Šï¼Œæœç»é€šè¿‡ä½¿ç”¨å’ŒJREç›¸åŒçš„ç±»åå†’å……ç°æœ‰JREçš„ç±»è¾¾åˆ°æ›¿æ¢çš„æ”»å‡»æ–¹å¼</p>
<h2 id="Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹"><a href="#Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹" class="headerlink" title="Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹"></a>Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹</h2><h3 id="å†…å­˜é—´çš„äº¤äº’æ“ä½œ"><a href="#å†…å­˜é—´çš„äº¤äº’æ“ä½œ" class="headerlink" title="å†…å­˜é—´çš„äº¤äº’æ“ä½œ"></a>å†…å­˜é—´çš„äº¤äº’æ“ä½œ</h3><p>å…³äºä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜ä¹‹é—´çš„å…·ä½“äº¤äº’åè®®ï¼Œå³ä¸€ä¸ªå˜é‡å¦‚ä½•ä»ä¸»å†…å­˜æ‹·è´åˆ°å·¥ä½œå†…å­˜ã€å¦‚ä½•ä»å·¥ä½œå†…å­˜åŒæ­¥åˆ°ä¸»å†…å­˜ä¹‹é—´çš„å®ç°ç»†èŠ‚ï¼ŒJavaå†…å­˜æ¨¡å‹å®šä¹‰äº†ä»¥ä¸‹å…«ç§æ“ä½œæ¥å®Œæˆï¼š</p>
<ul>
<li>lockï¼ˆé”å®šï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çŠ¶æ€ã€‚</li>
<li>unlockï¼ˆè§£é”ï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åçš„å˜é‡æ‰å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®šã€‚</li>
<li>readï¼ˆè¯»å–ï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåçš„loadåŠ¨ä½œä½¿ç”¨</li>
<li>loadï¼ˆè½½å…¥ï¼‰ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠreadæ“ä½œä»ä¸»å†…å­˜ä¸­å¾—åˆ°çš„å˜é‡å€¼æ”¾å…¥å·¥ä½œå†…å­˜çš„å˜é‡å‰¯æœ¬ä¸­ã€‚</li>
<li>useï¼ˆä½¿ç”¨ï¼‰ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªéœ€è¦ä½¿ç”¨å˜é‡çš„å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶å°†ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚</li>
<li>assignï¼ˆèµ‹å€¼ï¼‰ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªä»æ‰§è¡Œå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹å€¼ç»™å·¥ä½œå†…å­˜çš„å˜é‡ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªç»™å˜é‡èµ‹å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚<br>storeï¼ˆå­˜å‚¨ï¼‰ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåçš„writeçš„æ“ä½œã€‚</li>
<li>writeï¼ˆå†™å…¥ï¼‰ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠstoreæ“ä½œä»å·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜çš„å˜é‡ä¸­ã€‚<br>ã€€ã€€å¦‚æœè¦æŠŠä¸€ä¸ªå˜é‡ä»ä¸»å†…å­˜ä¸­å¤åˆ¶åˆ°å·¥ä½œå†…å­˜ï¼Œå°±éœ€è¦æŒ‰é¡ºå¯»åœ°æ‰§è¡Œreadå’Œloadæ“ä½œï¼Œ å¦‚æœæŠŠå˜é‡ä»å·¥ä½œå†…å­˜ä¸­åŒæ­¥å›ä¸»å†…å­˜ä¸­ï¼Œå°±è¦æŒ‰é¡ºåºåœ°æ‰§è¡Œstoreå’Œwriteæ“ä½œã€‚Javaå†…å­˜ æ¨¡å‹åªè¦æ±‚ä¸Šè¿°æ“ä½œå¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œï¼Œè€Œæ²¡æœ‰ä¿è¯å¿…é¡»æ˜¯è¿ç»­æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯readå’Œloadä¹‹é—´ï¼Œ storeå’Œwriteä¹‹é—´æ˜¯å¯ä»¥æ’å…¥å…¶ä»–æŒ‡ä»¤çš„ï¼Œå¦‚å¯¹ä¸»å†…å­˜ä¸­çš„å˜é‡aã€bè¿›è¡Œè®¿é—®æ—¶ï¼Œå¯èƒ½çš„é¡º åºæ˜¯read aï¼Œread bï¼Œload bï¼Œ load aã€‚</li>
</ul>
<p>Javaå†…å­˜æ¨¡å‹è¿˜è§„å®šäº†åœ¨æ‰§è¡Œä¸Šè¿°å…«ç§åŸºæœ¬æ“ä½œæ—¶ï¼Œå¿…é¡»æ»¡è¶³å¦‚ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>ä¸å…è®¸readå’Œloadã€storeå’Œwriteæ“ä½œä¹‹ä¸€å•ç‹¬å‡ºç°</li>
<li>ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹ä¸¢å¼ƒå®ƒçš„æœ€è¿‘assignçš„æ“ä½œï¼Œå³å˜é‡åœ¨å·¥ä½œå†…å­˜ä¸­æ”¹å˜äº†ä¹‹åå¿…é¡»åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ã€‚</li>
<li>ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹æ— åŸå› åœ°ï¼ˆæ²¡æœ‰å‘ç”Ÿè¿‡ä»»ä½•assignæ“ä½œï¼‰æŠŠæ•°æ®ä»å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜ä¸­ã€‚</li>
<li>ä¸€ä¸ªæ–°çš„å˜é‡åªèƒ½åœ¨ä¸»å†…å­˜ä¸­è¯ç”Ÿï¼Œä¸å…è®¸åœ¨å·¥ä½œå†…å­˜ä¸­ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–ï¼ˆloadæˆ–assignï¼‰çš„å˜é‡ã€‚å³å°±æ˜¯å¯¹ä¸€ä¸ªå˜é‡å®æ–½useå’Œstoreæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰§è¡Œè¿‡äº†assignå’Œloadæ“ä½œã€‚</li>
<li>ä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œlockæ“ä½œï¼Œä½†lockæ“ä½œå¯ä»¥è¢«åŒä¸€æ¡çº¿ç¨‹é‡å¤æ‰§è¡Œå¤šæ¬¡ï¼Œå¤šæ¬¡æ‰§è¡Œlockåï¼Œåªæœ‰æ‰§è¡Œç›¸åŒæ¬¡æ•°çš„unlockæ“ä½œï¼Œå˜é‡æ‰ä¼šè¢«è§£é”ã€‚lockå’Œunlockå¿…é¡»æˆå¯¹å‡ºç°<br>å¦‚æœå¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œlockæ“ä½œï¼Œå°†ä¼šæ¸…ç©ºå·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“ä½¿ç”¨è¿™ä¸ªå˜é‡å‰éœ€è¦é‡æ–°æ‰§è¡Œloadæˆ–assignæ“ä½œåˆå§‹åŒ–å˜é‡çš„å€¼<br>å¦‚æœä¸€ä¸ªå˜é‡äº‹å…ˆæ²¡æœ‰è¢«lockæ“ä½œé”å®šï¼Œåˆ™ä¸å…è®¸å¯¹å®ƒæ‰§è¡Œunlockæ“ä½œï¼›ä¹Ÿä¸å…è®¸å»unlockä¸€ä¸ªè¢«å…¶ä»–çº¿ç¨‹é”å®šçš„å˜é‡ã€‚<br>å¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œunlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼ˆæ‰§è¡Œstoreå’Œwriteæ“ä½œï¼‰ã€‚</li>
</ul>
<h3 id="é‡æ’åº"><a href="#é‡æ’åº" class="headerlink" title="é‡æ’åº"></a>é‡æ’åº</h3><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶ä¸ºäº†æé«˜æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ç»å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºã€‚é‡æ’åºåˆ†æˆä¸‰ç§ç±»å‹ï¼š</p>
<ol>
<li>ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’åºã€‚ç¼–è¯‘å™¨åœ¨ä¸æ”¹å˜å•çº¿ç¨‹ç¨‹åºè¯­ä¹‰æ”¾å…¥å‰æä¸‹ï¼Œå¯ä»¥é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåºã€‚</li>
<li>æŒ‡ä»¤çº§å¹¶è¡Œçš„é‡æ’åºã€‚ç°ä»£å¤„ç†å™¨é‡‡ç”¨äº†æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯æ¥å°†å¤šæ¡æŒ‡ä»¤é‡å æ‰§è¡Œã€‚å¦‚æœä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜è¯­å¥å¯¹åº”æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºã€‚</li>
<li>å†…å­˜ç³»ç»Ÿçš„é‡æ’åºã€‚ç”±äºå¤„ç†å™¨ä½¿ç”¨ç¼“å­˜å’Œè¯»å†™ç¼“å†²åŒºï¼Œè¿™ä½¿å¾—åŠ è½½å’Œå­˜å‚¨æ“ä½œçœ‹ä¸Šå»å¯èƒ½æ˜¯åœ¨ä¹±åºæ‰§è¡Œã€‚</li>
</ol>
<p>ä»Javaæºä»£ç åˆ°æœ€ç»ˆå®é™…æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ï¼Œä¼šç»è¿‡ä¸‹é¢ä¸‰ç§é‡æ’åºï¼š</p>
<p>ä¸ºäº†ä¿è¯å†…å­˜çš„å¯è§æ€§ï¼ŒJavaç¼–è¯‘å™¨åœ¨ç”ŸæˆæŒ‡ä»¤åºåˆ—çš„é€‚å½“ä½ç½®ä¼šæ’å…¥å†…å­˜å±éšœæŒ‡ä»¤æ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºã€‚Javaå†…å­˜æ¨¡å‹æŠŠå†…å­˜å±éšœåˆ†ä¸ºLoadLoadã€LoadStoreã€StoreLoadå’ŒStoreStoreå››ç§ï¼š</p>
<h3 id="å¯¹äºvolatileå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"><a href="#å¯¹äºvolatileå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™" class="headerlink" title="å¯¹äºvolatileå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"></a>å¯¹äºvolatileå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™</h3><p>å½“ä¸€ä¸ªå˜é‡å®šä¹‰ä¸ºvolatileä¹‹åï¼Œå®ƒå°†å…·å¤‡ä¸¤ç§ç‰¹æ€§ï¼š</p>
<p>ç¬¬ä¸€ï¼šä¿è¯æ­¤å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Œè¿™é‡Œçš„å¯è§æ€§æ˜¯æŒ‡å½“ä¸€æ¡çº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œæ–°å€¼å¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯å¯ä»¥ç«‹å³å¾—çŸ¥çš„ã€‚æ™®é€šå˜é‡çš„å€¼åœ¨çº¿ç¨‹é—´ä¼ é€’éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆ<br>ç”±äºvalatileåªèƒ½ä¿è¯å¯è§æ€§ï¼Œåœ¨ä¸ç¬¦åˆä¸€ä¸‹ä¸¤æ¡è§„åˆ™çš„è¿ç®—åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä»è¦é€šè¿‡åŠ é”æ¥ä¿è¯åŸå­æ€§</p>
<ol>
<li>è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡çš„å½“å‰å€¼ï¼Œæˆ–è€…èƒ½å¤Ÿç¡®ä¿åªæœ‰å•ä¸€çš„çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ã€‚</li>
<li>å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çš„çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸ</li>
<li>ç¬¬äºŒï¼šç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œæ™®é€šçš„å˜é‡ä»…ä»…ä¼šä¿è¯åœ¨è¯¥æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€æœ‰ä¾èµ–èµ‹å€¼ç»“æœçš„åœ°æ–¹éƒ½èƒ½è·å–åˆ°æ­£ç¡®çš„ç»“æœï¼Œè€Œä¸èƒ½ä¿è¯å˜é‡èµ‹å€¼æ“ä½œçš„é¡ºåºä¸ç¨‹åºä»£ç ä¸­æ‰§è¡Œé¡ºåºä¸€è‡´ï¼Œè¿™ä¸ªå°±æ˜¯æ‰€è°“çš„çº¿ç¨‹å†…è¡¨ç°ä¸ºä¸²è¡Œçš„è¯­ä¹‰</li>
</ol>
<p>Javaå†…å­˜æ¨¡å‹ä¸­å¯¹volatileå˜é‡å®šä¹‰çš„ç‰¹æ®Šè§„åˆ™ã€‚å‡å®šTè¡¨ç¤ºä¸€ä¸ªçº¿ç¨‹ï¼ŒVå’ŒWåˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªvolatileå˜é‡ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œreadã€loadã€useã€assignã€storeã€writeæ“ä½œæ—¶éœ€è¦æ»¡è¶³å¦‚ä¸‹çš„è§„åˆ™ï¼š</p>
<ol>
<li>åªæœ‰å½“çº¿ç¨‹Tå¯¹å˜é‡Væ‰§è¡Œçš„å‰ä¸€ä¸ªåŠ¨ä½œæ˜¯loadçš„æ—¶å€™ï¼Œçº¿ç¨‹Tæ‰èƒ½å¯¹å˜é‡Væ‰§è¡ŒuseåŠ¨ä½œï¼›å¹¶ä¸”ï¼Œåªæœ‰å½“çº¿ç¨‹Tå¯¹å˜é‡Væ‰§è¡Œçš„åä¸€ä¸ªåŠ¨ä½œæ˜¯useçš„æ—¶å€™ï¼Œçº¿ç¨‹Tæ‰èƒ½å¯¹å˜é‡Væ‰§è¡Œloadæ“ä½œã€‚çº¿ç¨‹Tå¯¹å˜é‡Vçš„useæ“ä½œå¯ä»¥è®¤ä¸ºæ˜¯ä¸çº¿ç¨‹Tå¯¹å˜é‡Vçš„loadå’Œreadæ“ä½œç›¸å…³è”çš„ï¼Œå¿…é¡»ä¸€èµ·è¿ç»­å‡ºç°ã€‚è¿™æ¡è§„åˆ™è¦æ±‚åœ¨å·¥ä½œå†…å­˜ä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨å˜é‡Vä¹‹å‰éƒ½å¿…é¡»å…ˆä»ä¸»å†…å­˜åˆ·æ–°æœ€æ–°å€¼ï¼Œç”¨äºä¿è¯èƒ½çœ‹åˆ°å…¶å®ƒçº¿ç¨‹å¯¹å˜é‡Væ‰€ä½œçš„ä¿®æ”¹åçš„å€¼ã€‚</li>
<li>åªæœ‰å½“çº¿ç¨‹Tå¯¹å˜é‡Væ‰§è¡Œçš„å‰ä¸€ä¸ªåŠ¨æ˜¯assignçš„æ—¶å€™ï¼Œçº¿ç¨‹Tæ‰èƒ½å¯¹å˜é‡Væ‰§è¡Œstoreæ“ä½œï¼›å¹¶ä¸”ï¼Œåªæœ‰å½“çº¿ç¨‹Tå¯¹å˜é‡Væ‰§è¡Œçš„åä¸€ä¸ªåŠ¨ä½œæ˜¯storeæ“ä½œçš„æ—¶å€™ï¼Œçº¿ç¨‹Tæ‰èƒ½å¯¹å˜é‡Væ‰§è¡Œassignæ“ä½œã€‚çº¿ç¨‹Tå¯¹å˜é‡Vçš„assignæ“ä½œå¯ä»¥è®¤ä¸ºæ˜¯ä¸çº¿ç¨‹Tå¯¹å˜é‡Vçš„storeå’Œwriteæ“ä½œç›¸å…³è”çš„ï¼Œå¿…é¡»ä¸€èµ·è¿ç»­å‡ºç°ã€‚è¿™ä¸€æ¡è§„åˆ™è¦æ±‚åœ¨å·¥ä½œå†…å­˜ä¸­ï¼Œæ¯æ¬¡ä¿®æ”¹Våéƒ½å¿…é¡»ç«‹å³åŒæ­¥å›ä¸»å†…å­˜ä¸­ï¼Œç”¨äºä¿è¯å…¶å®ƒçº¿ç¨‹å¯ä»¥çœ‹åˆ°è‡ªå·±å¯¹å˜é‡Vçš„ä¿®æ”¹ã€‚</li>
<li>å‡å®šæ“ä½œAæ˜¯çº¿ç¨‹Tå¯¹å˜é‡Vå®æ–½çš„useæˆ–assignåŠ¨ä½œï¼Œå‡å®šæ“ä½œFæ˜¯æ“ä½œAç›¸å…³è”çš„loadæˆ–storeæ“ä½œï¼Œå‡å®šæ“ä½œPæ˜¯ä¸æ“ä½œFç›¸åº”çš„å¯¹å˜é‡Vçš„readæˆ–writeæ“ä½œï¼›ç±»å‹åœ°ï¼Œå‡å®šåŠ¨ä½œBæ˜¯çº¿ç¨‹Tå¯¹å˜é‡Wå®æ–½çš„useæˆ–assignåŠ¨ä½œï¼Œå‡å®šæ“ä½œGæ˜¯æ“ä½œBç›¸å…³è”çš„loadæˆ–storeæ“ä½œï¼Œå‡å®šæ“ä½œQæ˜¯ä¸æ“ä½œGç›¸åº”çš„å¯¹å˜é‡Vçš„readæˆ–writeæ“ä½œã€‚å¦‚æœAå…ˆäºBï¼Œé‚£ä¹ˆPå…ˆäºQã€‚è¿™æ¡è§„åˆ™è¦æ±‚valitileä¿®æ”¹çš„å˜é‡ä¸ä¼šè¢«æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ï¼Œä¿è¯ä»£ç çš„æ‰§è¡Œé¡ºåºä¸ç¨‹åºçš„é¡ºåºç›¸åŒã€‚<h3 id="å¯¹äºlongå’Œdoubleå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"><a href="#å¯¹äºlongå’Œdoubleå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™" class="headerlink" title="å¯¹äºlongå’Œdoubleå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"></a>å¯¹äºlongå’Œdoubleå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™</h3>Javaæ¨¡å‹è¦æ±‚lockã€unlockã€readã€loadã€assignã€useã€storeã€writeè¿™8ä¸ªæ“ä½œéƒ½å…·æœ‰åŸå­æ€§ï¼Œä½†æ˜¯å¯¹äº64ä¸ºçš„æ•°æ®ç±»å‹ï¼ˆlongå’Œdoubleï¼‰ï¼Œåœ¨æ¨¡å‹ä¸­ç‰¹åˆ«å®šä¹‰äº†ä¸€æ¡ç›¸å¯¹å®½æ¾çš„è§„å®šï¼šå…è®¸è™šæ‹Ÿæœºå°†æ²¡æœ‰è¢«volatileä¿®é¥°çš„64ä½æ•°æ®çš„è¯»å†™æ“ä½œåˆ†ä¸ºä¸¤æ¬¡32ä¸ºçš„æ“ä½œæ¥è¿›è¡Œï¼Œå³å…è®¸è™šæ‹Ÿæœºå®ç°é€‰æ‹©å¯ä»¥ä¸ä¿è¯64ä½æ•°æ®ç±»å‹çš„loadã€storeã€readå’Œwriteè¿™4ä¸ªæ“ä½œçš„åŸå­æ€§<h3 id="åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§"><a href="#åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§" class="headerlink" title="åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§"></a>åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§</h3>åŸå­æ€§ï¼šå³ä¸€ä¸ªæ“ä½œæˆ–è€…å¤šä¸ªæ“ä½œ</li>
</ol>
<p>è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¹¶ä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œã€‚Javaå†…å­˜æ¨¡å‹æ˜¯é€šè¿‡åœ¨å˜é‡ä¿®æ”¹åå°†æ–°å€¼åŒæ­¥ä¼šä¸»å†…å­˜ï¼Œåœ¨å˜é‡è¯»å–å‰ä»ä¸»å†…å­˜åˆ·æ–°å˜é‡å€¼è¿™ç§ä¾èµ–ä¸»å†…å­˜ä½œä¸ºä¼ é€’åª’ä»‹çš„æ–¹å¼æ¥å®ç°å¯è§æ€§ï¼Œvalatileç‰¹æ®Šè§„åˆ™ä¿éšœæ–°å€¼å¯ä»¥ç«‹å³åŒæ­¥åˆ°ç¥å†…å­˜ä¸­ã€‚Synchronizedæ˜¯åœ¨å¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œunlockä¹‹å‰ï¼Œå¿…é¡»æŠŠå˜é‡åŒæ­¥å›ä¸»å†…å­˜ä¸­ï¼ˆæ‰§è¡Œstoreã€writeæ“ä½œï¼‰ã€‚è¢«finalä¿®é¥°çš„å­—æ®µåœ¨æ„é€ å™¨ä¸­ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œå¹¶ä¸”æ„é€ å™¨æ²¡æœ‰å§thisçš„å¼•ç”¨ä¼ é€’å‡ºå»ï¼Œé‚£åœ¨å…¶ä»–çº¿ç¨‹ä¸­å°±èƒ½çœ‹è§finalå­—æ®µçš„å€¼</p>
<p>å¯è§æ€§ï¼šå¯è§æ€§æ˜¯æŒ‡å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹å¾—åˆ°ä¿®æ”¹çš„å€¼ã€‚</p>
<p>æœ‰åºæ€§ï¼šå³ç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚</p>
<h3 id="å…ˆè¡Œå‘ç”ŸåŸåˆ™"><a href="#å…ˆè¡Œå‘ç”ŸåŸåˆ™" class="headerlink" title="å…ˆè¡Œå‘ç”ŸåŸåˆ™"></a>å…ˆè¡Œå‘ç”ŸåŸåˆ™</h3><p>è¿™äº›å…ˆè¡Œå‘ç”Ÿå…³ç³»æ— é¡»ä»»ä½•åŒæ­¥å°±å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å†æ­¤åˆ—å°±ä¸èƒ½ä¿éšœé¡ºåºæ€§ï¼Œè™šæ‹Ÿæœºå°±å¯ä»¥å¯¹å®ƒä»¬ä»»æ„åœ°è¿›è¡Œé‡æ’åº</p>
<ol>
<li>ç¨‹åºæ¬¡åºè§„åˆ™ï¼šåœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§ç¨‹åºä»£ç é¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºä¹¦å†™åœ¨åé¢çš„æ“ä½œã€‚å‡†ç¡®çš„è¯´ï¼Œåº”è¯¥æ˜¯æ§åˆ¶é¡ºåºè€Œä¸æ˜¯ç¨‹åºä»£ç é¡ºåºï¼Œå› ä¸ºè¦è€ƒè™‘åˆ†æ”¯ã€‚å¾ªç¯ç­‰ç»“æ„</li>
<li>ç®¡ç¨‹é”å®šè§„åˆ™ï¼šä¸€ä¸ªunlockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œã€‚è¿™é‡Œå¿…é¡»å¼ºè°ƒçš„æ˜¯åŒä¸€ä¸ªé”ï¼Œè€Œåé¢çš„æ˜¯æŒ‡æ—¶é—´ä¸Šçš„å…ˆåé¡ºåº</li>
<li>Volatileå˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ªvolatileå˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼Œè¿™é‡Œçš„åé¢åŒæ ·æ˜¯æŒ‡æ—¶é—´ä¸Šçš„å…ˆåé¡ºåº</li>
<li>çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼šThreadå¯¹è±¡çš„start()æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸€ä¸ªåŠ¨ä½œ</li>
<li>çº¿ç¨‹ç»ˆæ­¢è§„åˆ™ï¼šçº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºå¯¹æ­¤çº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Thread.joke()æ–¹æ³•ç»“æŸã€ThradisAlive()çš„è¿”å›å€¼ç­‰æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œ</li>
<li>çº¿ç¨‹ä¸­æ–­è§„åˆ™ï¼šå¯¹çº¿ç¨‹interrupt()æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­æ—¶é—´çš„å‘ç”Ÿï¼Œå¯ä»¥é€šè¿‡Thread.interrupted()æ–¹æ³•æ£€æµ‹åˆ°æ˜¯å¦æœ‰ä¸­æ–­å‘ç”Ÿ</li>
<li>å¯¹è±¡ç»ˆç»“è§„åˆ™ï¼šä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆ(æ„é€ å‡½æ•°æ‰§è¡Œç»“æŸ)å…ˆè¡Œå‘ç”Ÿäºå®ƒçš„finalize()æ–¹æ³•çš„å¼€å§‹</li>
<li>ä¼ é€’æ€§ï¼šå¦‚æœæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œBï¼Œæ“ä½œBå…ˆè¡Œå‘ç”Ÿäºæ“ä½œCï¼Œé‚£å°±å¯ä»¥å¾—å‡ºæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œCçš„ç»“è®º<h3 id="Javaçº¿ç¨‹è°ƒåº¦"><a href="#Javaçº¿ç¨‹è°ƒåº¦" class="headerlink" title="Javaçº¿ç¨‹è°ƒåº¦"></a>Javaçº¿ç¨‹è°ƒåº¦</h3></li>
</ol>
<p>ååŒå¼è°ƒåº¦ï¼šçº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´ç”±çº¿ç¨‹æœ¬èº«æ§åˆ¶</p>
<p>æŠ¢å å¼è°ƒåº¦ï¼šçº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´ç”±ç³»ç»Ÿæ¥åˆ†é…</p>
<h3 id="çŠ¶æ€è½¬æ¢"><a href="#çŠ¶æ€è½¬æ¢" class="headerlink" title="çŠ¶æ€è½¬æ¢"></a>çŠ¶æ€è½¬æ¢</h3><ol>
<li>æ–°å»º</li>
<li>è¿è¡Œï¼šå¯èƒ½æ­£åœ¨æ‰§è¡Œã€‚å¯èƒ½æ­£åœ¨ç­‰å¾…CPUä¸ºå®ƒåˆ†é…æ‰§è¡Œæ—¶é—´</li>
<li>æ— é™æœŸç­‰å¾…ï¼šä¸ä¼šè¢«åˆ†é…CUPæ‰§è¡Œæ—¶é—´ï¼Œå®ƒä»¬è¦ç­‰å¾…è¢«å…¶ä»–çº¿ç¨‹æ˜¾å¼å”¤é†’</li>
<li>é™æœŸç­‰å¾…ï¼šä¸ä¼šè¢«åˆ†é…CUPæ‰§è¡Œæ—¶é—´ï¼Œå®ƒä»¬æ— é¡»ç­‰å¾…è¢«å…¶ä»–çº¿ç¨‹æ˜¾å¼å”¤é†’ï¼Œä¸€å®šæ—¶é—´ä¼šç”±ç³»ç»Ÿè‡ªåŠ¨å”¤é†’</li>
<li>é˜»å¡ï¼šé˜»å¡çŠ¶æ€åœ¨ç­‰å¾…è¿™è·å–åˆ°ä¸€ä¸ªæ’ä»–é”ï¼Œè¿™ä¸ªæ—¶é—´å°†åœ¨å¦ä¸€ä¸ªçº¿ç¨‹æ”¾å¼ƒè¿™ä¸ªé”çš„æ—¶å€™å‘ç”Ÿï¼›ç­‰å¾…çŠ¶æ€å°±æ˜¯åœ¨ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€…å”¤é†’åŠ¨ä½œçš„å‘ç”Ÿ</li>
<li>ç»“æŸï¼šå·²ç»ˆæ­¢çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ï¼Œçº¿ç¨‹å·²ç»ç»“æŸæ‰§è¡Œ</li>
</ol>
<h3 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h3><ol>
<li>ä¸å¯å˜ï¼šä¸å¯å˜çš„å¯¹è±¡ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€æ— è®ºæ˜¯å¯¹è±¡çš„æ–¹æ³•å®ç°è¿˜æ˜¯æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œéƒ½ä¸éœ€è¦å†é‡‡å–ä»»ä½•çš„çº¿ç¨‹å®‰å…¨ä¿éšœã€‚ä¾‹å¦‚ï¼šæŠŠå¯¹è±¡ä¸­å¸¦æœ‰çŠ¶æ€çš„å˜é‡éƒ½å£°æ˜ä¸ºfinalï¼Œè¿™æ ·åœ¨æ„é€ å‡½æ•°ç»“æŸä¹‹åï¼Œå®ƒå°±æ˜¯ä¸å¯å˜çš„ã€‚</li>
<li>ç»å¯¹çº¿ç¨‹å®‰å…¨</li>
<li>ç›¸å¯¹çº¿ç¨‹å®‰å…¨ï¼šç›¸å¯¹çš„çº¿ç¨‹å®‰å…¨å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ„ä¹‰ä¸Šæ‰€è®²çš„çº¿ç¨‹å®‰å…¨ï¼Œå®ƒéœ€è¦ä¿è¯å¯¹è¿™ä¸ªå¯¹è±¡å•ç‹¬çš„æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨çš„æ—¶å€™ä¸éœ€è¦åšé¢å¤–çš„ä¿éšœæªæ–½ï¼Œä½†æ˜¯å¯¹äºä¸€äº›ç‰¹å®šé¡ºåºçš„è¿ç»­è°ƒç”¨ï¼Œå°±å¯èƒ½éœ€è¦åœ¨è°ƒç”¨ç«¯ä½¿ç”¨é¢å¤–çš„åŒæ­¥æ‰‹æ®µæ¥ä¿è¯è°ƒç”¨çš„æ­£ç¡®æ€§</li>
<li>çº¿ç¨‹å…¼å®¹ï¼šå¯¹è±¡æœ¬èº«å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åœ¨è°ƒç”¨ç«¯æ­£ç¡®åœ°ä½¿ç”¨åŒæ­¥æ‰‹æ®µæ¥ä¿è¯å¯¹è±¡åœ¨å¹¶å‘ç¯å¢ƒä¸­å¯ä»¥å®‰å…¨ä½¿ç”¨</li>
<li>çº¿ç¨‹å¯¹ç«‹ï¼šæ˜¯æŒ‡æ— è®ºè°ƒç”¨ç«¯æ˜¯å¦é‡‡å–äº†åŒæ­¥æªæ–½ï¼Œéƒ½æ— æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å¹¶å‘ä½¿ç”¨çš„ä»£ç <h3 id="çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•"><a href="#çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•" class="headerlink" title="çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•"></a>çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•</h3></li>
<li>äº’æ–¥åŒæ­¥ï¼š<br>åŒæ­¥æ˜¯æŒ‡åœ¨å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®å…±äº«æ•°æ®æ—¶ï¼Œä¿è¯å…±äº«æ•°æ®åœ¨åŒä¸€ä¸ªæ—¶åˆ»åªè¢«ä¸€ä¸ªï¼ˆæˆ–è€…æ˜¯ä¸€äº›ï¼Œä½¿ç”¨ä¿¡å·é‡çš„æ—¶å€™ï¼‰çº¿ç¨‹ä½¿ç”¨ã€‚è€Œäº’æ–¥æ˜¯å®ç°åŒæ­¥çš„ä¸€ç§æ‰‹æ®µï¼Œä¸´ç•ŒåŒºã€äº’æ–¥é‡å’Œä¿¡å·é‡éƒ½æ˜¯ä¸»è¦çš„äº’æ–¥å®ç°æ–¹å¼ã€‚äº’æ–¥æ˜¯å› ï¼ŒåŒæ­¥æ˜¯æœï¼šäº’æ–¥æ˜¯æ–¹æ³•ï¼ŒåŒæ­¥æ˜¯ç›®çš„.</li>
</ol>
<p>åœ¨Javaä¸­ï¼Œæœ€åŸºæœ¬çš„äº’æ–¥åŒæ­¥æ‰‹æ®µå°±æ˜¯synchronizedå…³é”®å­—ï¼Œå®ƒç»è¿‡ç¼–è¯‘ä¹‹åï¼Œä¼šåœ¨åŒæ­¥å—çš„å‰ååˆ†åˆ«å½¢æˆmonitorenterå’Œmonitorexitè¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚ç éƒ½éœ€è¦ä¸€ä¸ªreferenceç±»å‹çš„å‚æ•°æ¥æŒ‡æ˜è¦é”å®šå’Œè§£é”çš„å¯¹è±¡ã€‚å¦‚æœJavaç¨‹åºä¸­çš„synchronizedæ˜ç¡®æŒ‡å®šäº†å¯¹è±¡å‚æ•°ï¼Œé‚£å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„referenceï¼›å¦‚æœæ²¡æœ‰æŒ‡æ˜ï¼Œé‚£å°±æ ¹æ®synchronizedä¿®é¥°çš„æ˜¯å®ä¾‹æ–¹æ³•è¿˜æ˜¯ç±»æ–¹æ³•ï¼Œå»å–å¯¹åº”çš„å¯¹è±¡å®ä¾‹æˆ–Classå¯¹è±¡æ¥ä½œä¸ºé”å¯¹è±¡ã€‚åœ¨æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å°è¯•è·å–å¯¹è±¡çš„é”ã€‚å¦‚æœè¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†é‚£ä¸ªå¯¹è±¡çš„é”ï¼ŒæŠŠé”çš„è®¡æ•°å™¨åŠ 1ï¼Œå¯¹åº”çš„åœ¨æ‰§è¡ŒmonitorexitæŒ‡ä»¤æ—¶ä¼šå°†é”è®¡æ•°å™¨å‡1ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œé”å°±è¢«é‡Šæ”¾ã€‚å¦‚æœè·å–å¯¹è±¡é”å¤±è´¥ï¼Œå“ªå½“å‰çº¿ç¨‹å°±è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å¯¹è±¡é”è¢«å¦å¤–ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢</p>
<p>Synchronizedï¼ŒReentrantLockå¢åŠ äº†ä¸€äº›é«˜çº§åŠŸèƒ½</p>
<ol>
<li>ç­‰å¾…å¯ä¸­æ–­ï¼šæ˜¯æŒ‡å½“æŒæœ‰é”çš„çº¿ç¨‹é•¿æœŸä¸é‡Šæ”¾é”çš„æ—¶å€™ï¼Œæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œæ”¹ä¸ºå¤„ç†å…¶ä»–äº‹æƒ…ï¼Œå¯ä¸­æ–­ç‰¹æ€§å¯¹å¤„ç†æ‰§è¡Œæ—¶é—´éå¸¸é•¿çš„åŒæ­¥å—å¾ˆæœ‰å¸®åŠ©</li>
<li>å…¬å¹³é”ï¼šæ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…åŒä¸€ä¸ªé”æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ç”³è¯·é”çš„æ—¶é—´é¡ºåºæ¥ä¾æ¬¡è·å¾—é”ï¼›éå…¬å¹³é”åˆ™ä¸èƒ½ä¿è¯è¿™ä¸€ç‚¹ï¼Œåœ¨é”è¢«é‡Šæ”¾æ—¶ï¼Œä»»ä½•ä¸€ä¸ªç­‰å¾…é”çš„çº¿ç¨‹éƒ½æœ‰æœºä¼šè·å¾—é”ã€‚Synchronizedä¸­çš„é”æ˜¯éå…¬å¹³çš„ï¼ŒReentrantLocké»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯éå…¬å¹³çš„ï¼Œä½†å¯ä»¥é€šè¿‡å¸¦å¸ƒå°”å€¼çš„æ„é€ å‡½æ•°è¦æ±‚ä½¿ç”¨å…¬å¹³é”</li>
<li>é”ç»‘å®šå¤šä¸ªæ¡ä»¶æ˜¯æŒ‡ä¸€ä¸ªReentrantLockå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªConditionå¯¹è±¡ï¼Œè€Œåœ¨synchronizedä¸­ï¼Œé”å¯¹è±¡çš„wait()å’Œnotify()æˆ–notifyAll()æ–¹æ³•å¯ä»¥å®ç°ä¸€ä¸ªéšå«çš„æ¡ä»¶ï¼Œå¦‚æœè¦å’Œå¤šä½™ä¸€ä¸ªçš„æ¡ä»¶å…³è”çš„æ—¶å€™ï¼Œå°±ä¸å¾—ä¸é¢å¤–åœ°æ·»åŠ ä¸€ä¸ªé”ï¼Œè€ŒReentrantLockåˆ™æ— é¡»è¿™æ ·åšï¼Œåªéœ€è¦å¤šæ¬¡è°ƒç”¨newConditionæ–¹æ³•å³å¯</li>
<li>éé˜»å¡åŒæ­¥</li>
<li>æ— åŒæ­¥æ–¹æ¡ˆ<br>å¯é‡å…¥ä»£ç ï¼šä¹Ÿå«çº¯ä»£ç ï¼Œå¯ä»¥åœ¨ä»£ç æ‰§è¡Œçš„ä»»ä½•æ—¶åˆ»ä¸­æ–­å®ƒï¼Œè½¬è€Œå»æ‰§è¡Œå¦å¤–ä¸€æ®µä»£ç ï¼ˆåŒ…æ‹¬é€’å½’è°ƒç”¨å®ƒæœ¬èº«ï¼‰è€Œåœ¨æ§åˆ¶æƒè¿”å›åï¼ŒåŸæ¥çš„ç¨‹åºä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯ã€‚æ‰€æœ‰çš„å¯é‡å…¥ä»£ç éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å¹¶éæ‰€æœ‰çš„çº¿ç¨‹å®‰å…¨çš„ä»£ç éƒ½æ˜¯å¯é‡å…¥çš„ã€‚</li>
</ol>
<p>åˆ¤æ–­ä¸€ä¸ªä»£ç æ˜¯å¦å…·å¤‡å¯é‡å…¥æ€§ï¼šå¦‚æœä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„è¿”å›ç»“æœæ˜¯å¯é¢„æµ‹çš„ï¼Œåªè¦è¾“å…¥äº†ç›¸åŒçš„æ•°æ®ï¼Œå°±éƒ½èƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œé‚£å®ƒå°±æ»¡è¶³å¯é‡å…¥æ€§çš„è¦æ±‚ï¼Œå½“ç„¶ä¹Ÿå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„</p>
<p>çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼šå¦‚æœä¸€æ®µä»£ç ä¸­æ‰€éœ€è¦çš„æ•°æ®å¿…é¡»ä¸å…¶ä»–ä»£ç å…±äº«ï¼Œé‚£å°±çœ‹çœ‹è¿™äº›å…±äº«æ•°æ®çš„ä»£ç æ˜¯å¦èƒ½ä¿è¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼Ÿå¦‚æœèƒ½ä¿éšœï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå…±äº«æ•°æ®çš„å¯è§èŒƒå›´é™åˆ¶åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¹‹å†…ï¼Œè¿™æ ·ï¼Œæ— é¡»åŒæ­¥ä¹Ÿèƒ½ä¿è¯çº¿ç¨‹ä¹‹é—´ä¸å‡ºç°æ•°æ®äº‰ç”¨çš„é—®é¢˜</p>
<h3 id="é”ä¼˜åŒ–"><a href="#é”ä¼˜åŒ–" class="headerlink" title="é”ä¼˜åŒ–"></a>é”ä¼˜åŒ–</h3><p>é€‚åº”æ€§è‡ªæ—‹ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ã€è½»é‡çº§é”å’Œåå‘é”</p>
<h3 id="è‡ªæ—‹é”ä¸è‡ªé€‚åº”è‡ªæ—‹"><a href="#è‡ªæ—‹é”ä¸è‡ªé€‚åº”è‡ªæ—‹" class="headerlink" title="è‡ªæ—‹é”ä¸è‡ªé€‚åº”è‡ªæ—‹"></a>è‡ªæ—‹é”ä¸è‡ªé€‚åº”è‡ªæ—‹</h3><p>è‡ªæ—‹é”ï¼šå¦‚æœç‰©ç†æœºå™¨ä¸Šæœ‰ä¸€ä¸ªä»¥ä¸Šçš„å¤„ç†å™¨ï¼Œèƒ½è®©ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„çº¿ç¨‹åŒæ—¶å¹¶è¡Œæ‰§è¡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©åé¢è¯·æ±‚é”çš„é‚£ä¸ªçº¿ç¨‹ç¨ç­‰ä¸€ä¸‹ï¼Œä½†ä¸æ”¾å¼ƒå¤„ç†å™¨çš„æ‰§è¡Œæ—¶é—´ï¼Œçœ‹çœ‹æŒæœ‰é”çš„çº¿ç¨‹æ˜¯å¦å¾ˆå¿«å°±ä¼šé‡Šæ”¾é”ã€‚ä¸ºäº†è®©çº¿ç¨‹ç­‰å¾…ï¼Œæˆ‘ä»¬åªéœ€è®©çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå¿™å¾ªç¯ï¼ˆè‡ªæ—‹ï¼‰ï¼Œè¿™é¡¹æŠ€æœ¯å°±æ˜¯æ‰€è°“çš„è‡ªæ—‹é”</p>
<p>è‡ªé€‚åº”è‡ªæ—‹è½¬ï¼šæ˜¯ç”±å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”å¯¹è±¡ä¸Šï¼Œè‡ªæ—‹ç­‰å¾…åˆšåˆšæˆåŠŸè·å¾—è¿‡é”ï¼Œå¹¶ä¸”æŒæœ‰é”çš„çº¿ç¨‹æ­£åœ¨è¿è¡Œä¸­ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°±ä¼šè®¤ä¸ºè¿™æ¬¡è‡ªæ—‹ä¹Ÿå¾ˆæœ‰å¯èƒ½å†æ¬¡æˆåŠŸï¼Œè¿›è€Œå®ƒå°†å…è®¸è‡ªæ—‹ç­‰å¾…æŒç»­ç›¸å¯¹æ›´é•¿çš„æ—¶é—´ã€‚å¦‚æœå¯¹äºæŸä¸ªé”ï¼Œè‡ªæ—‹å¾ˆå°‘æˆåŠŸè·å¾—è¿‡ï¼Œé‚£åœ¨ä»¥åè¦è·å–è¿™ä¸ªé”æ—¶å°†å¯èƒ½çœç•¥æ‰è‡ªè¿‡ç¨‹ï¼Œä»¥é¿å…æµªè´¹å¤„ç†å™¨èµ„æºã€‚</p>
<h3 id="é”æ¶ˆé™¤"><a href="#é”æ¶ˆé™¤" class="headerlink" title="é”æ¶ˆé™¤"></a>é”æ¶ˆé™¤</h3><p>é”æ¶ˆé™¤æ˜¯æŒ‡è™šæ‹Ÿæœºå³æ—¶ç¼–è¾‘å™¨åœ¨è¿è¡Œæ—¶ï¼Œå¯¹ä¸€äº›ä»£ç ä¸Šè¦æ±‚åŒæ­¥ï¼Œä½†æ˜¯è¢«æ£€æµ‹åˆ°ä¸å¯èƒ½å­˜åœ¨å…±äº«æ•°æ®ç«äº‰çš„é”è¿›è¡Œæ¶ˆé™¤ã€‚å¦‚æœåœ¨ä¸€æ®µä»£ç ä¸­ã€‚æ¨ä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½ä¸ä¼šé€ƒé€¸å‡ºå»ä»è€Œè¢«å…¶ä»–çº¿ç¨‹è®¿é—®åˆ°ï¼Œé‚£å°±å¯ä»¥æŠŠå®ƒä»¬å½“ä½œæ ˆä¸Šæ•°æ®å¯¹å¾…ï¼Œè®¤ä¸ºå®ƒä»¬æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼ŒåŒæ­¥åŠ é”è‡ªç„¶å°±æ— é¡»è¿›è¡Œ</p>
<h3 id="é”ç²—åŒ–"><a href="#é”ç²—åŒ–" class="headerlink" title="é”ç²—åŒ–"></a>é”ç²—åŒ–</h3><p>å¦‚æœè™šæ‹Ÿæœºæ£€æµ‹åˆ°æœ‰ä¸€ä¸²é›¶ç¢çš„æ“ä½œéƒ½æ˜¯å¯¹åŒä¸€å¯¹è±¡çš„åŠ é”ï¼Œå°†ä¼šæŠŠåŠ é”åŒæ­¥çš„èŒƒå›´æ‰©å±•ï¼ˆç²—åŒ–ï¼‰åˆ°æ•´ä¸ªæ“ä½œåºåˆ—çš„å¤–éƒ¨</p>
<h3 id="è½»é‡çº§é”"><a href="#è½»é‡çº§é”" class="headerlink" title="è½»é‡çº§é”"></a>è½»é‡çº§é”</h3><h3 id="åå‘é”"><a href="#åå‘é”" class="headerlink" title="åå‘é”"></a>åå‘é”</h3><p>å®ƒçš„ç›®çš„æ˜¯æ¶ˆé™¤æ— ç«äº‰æƒ…å†µä¸‹çš„åŒæ­¥åŸè¯­ï¼Œè¿›ä¸€æ­¥æé«˜ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚å¦‚æœè½»é‡çº§é”æ˜¯åœ¨æ— ç«äº‰çš„æƒ…å†µä¸‹ä½¿ç”¨CASæ“ä½œå»æ¶ˆé™¤åŒæ­¥ä½¿ç”¨çš„äº’æ–¥é‡ï¼Œé‚£åå‘é”å°±æ˜¯åœ¨æ— ç«äº‰çš„æƒ…å†µä¸‹æŠŠè¿™ä¸ªåŒæ­¥éƒ½æ¶ˆé™¤æ‰ï¼ŒCASæ“ä½œéƒ½ä¸åšäº†<br>å¦‚æœåœ¨æ¥ä¸‹ä¿©çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥é”æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹è·å–ï¼Œåˆ™æŒæœ‰åå‘é”çš„çº¿ç¨‹å°†æ°¸è¿œä¸éœ€è¦åœ¨è¿›è¡ŒåŒæ­¥</p>
<h2 id="é€ƒé€¸åˆ†æ"><a href="#é€ƒé€¸åˆ†æ" class="headerlink" title="é€ƒé€¸åˆ†æ"></a>é€ƒé€¸åˆ†æ</h2><p>é€ƒé€¸åˆ†æçš„åŸºæœ¬è¡Œä¸ºå°±æ˜¯åˆ†æå¯¹è±¡åŠ¨æ€ä½œç”¨åŸŸï¼šå½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åï¼Œå®ƒå¯èƒ½è¢«å¤–éƒ¨æ–¹æ³•æ‰€å¼•ç”¨ï¼Œä¾‹å¦‚ä½œä¸ºè°ƒç”¨å‚æ•°ä¼ é€’åˆ°å…¶ä»–æ–¹æ³•ä¸­ï¼Œæˆä¸ºæ–¹æ³•é€ƒé€¸ã€‚ç”šè‡³è¿˜å¯èƒ½è¢«å¤–éƒ¨çº¿ç¨‹è®¿é—®åˆ°ï¼Œæ¯”å¦‚èµ‹å€¼ç»™ç±»å˜é‡æˆ–å¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹ä¸­è®¿é—®çš„å®ä¾‹å˜é‡ï¼Œç§°ä¸ºçº¿ç¨‹é€ƒé€¸</p>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸ä¼šé€ƒé€¸åˆ°æ–¹æ³•æˆ–çº¿ç¨‹ä¹‹å¤–ï¼Œä¹Ÿå°±æ˜¯åˆ«çš„æ–¹æ³•æˆ–çº¿ç¨‹æ— æ³•é€šè¿‡ä»»ä½•é€”å¾„è®¿é—®åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œåˆ™å¯èƒ½ä¸ºè¿™ä¸ªå˜é‡è¿›è¡Œä¸€äº›é«˜æ•ˆçš„ä¼˜åŒ–<br>æ ˆä¸Šåˆ†é…ï¼šå¦‚æœç¡®å®šä¸€ä¸ªå¯¹è±¡ä¸ä¼šé€ƒé€¸å‡ºæ–¹æ³•å¤–ï¼Œé‚£è®©è¿™ä¸ªå¯¹è±¡åœ¨æ ˆä¸Šåˆ†é…å†…å­˜å°†ä¼šæ˜¯ä¸€ä¸ªä¸é”™çš„æ³¨æ„ï¼Œå¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å°±å¯ä»¥éšæ ˆå¸§å‡ºæ ˆè€Œé”€æ¯ã€‚å¦‚æœèƒ½ä½¿ç”¨æ ˆä¸Šåˆ†é…ï¼Œé‚£å¤§é‡çš„å¯¹è±¡å°±éšç€æ–¹æ³•çš„ç»“æŸè€Œé”€æ¯äº†ï¼Œåƒåœ¾æ”¶é›†ç³»ç»Ÿçš„å‹åŠ›å°†ä¼šå°å¾ˆå¤š</p>
<p>åŒæ­¥æ¶ˆé™¤ï¼šå¦‚æœç¡®å®šä¸€ä¸ªå˜é‡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹ï¼Œæ— æ³•è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼Œé‚£è¿™ä¸ªå˜é‡çš„è¯»å†™è‚¯å®šå°±ä¸ä¼šæœ‰ç«äº‰ï¼Œå¯¹è¿™ä¸ªå˜é‡å®æ–½çš„åŒæ­¥æªæ–½ä¹Ÿå°±å¯ä»¥æ¶ˆé™¤æ‰</p>
<p>æ ‡é‡æ›¿æ¢ï¼šæ ‡é‡å°±æ˜¯æŒ‡ä¸€ä¸ªæ•°æ®æ— æ³•åœ¨åˆ†è§£æˆæ›´å°çš„æ•°æ®è¡¨ç¤ºäº†ï¼Œintã€longç­‰åŠrefrenceç±»å‹ç­‰éƒ½ä¸èƒ½åœ¨è¿›ä¸€æ­¥åˆ†è§£ï¼Œå®ƒä»¬ç§°ä¸ºæ ‡é‡ã€‚</p>
<p>å¦‚æœä¸€ä¸ªæ•°æ®å¯ä»¥ç»§ç»­åˆ†è§£ï¼Œå°±ç§°ä¸ºèšåˆé‡ï¼ŒJavaä¸­çš„å¯¹è±¡å°±æ˜¯æœ€å…¸å‹çš„èšåˆé‡</p>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«å¤–éƒ¨è®¿é—®ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«æ‹†æ•£çš„åŒ–ï¼Œé‚£ç¨‹åºæ­£æ•´æ‰§è¡Œçš„æ—¶å€™å°†å¯èƒ½ä¸åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ”¹ä¸ºç›´æ¥åˆ›å»ºå®ƒçš„è‹¥å¹²ä¸ªè¢«è¿™ä¸ªæ–¹æ³•ä½¿ç”¨åˆ°çš„æˆå‘˜å˜é‡æ¥ä»£æ›¿</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Sparkæ¶æ„åŠåŸç†]]></title>
      <url>/Spark%E6%9E%B6%E6%9E%84%E5%8F%8A%E5%8E%9F%E7%90%86.html</url>
      <content type="html"><![CDATA[<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1ZGVmdTAxMS9hcnRpY2xlL2RldGFpbHMvODAwODA2NDU=" title="https://blog.csdn.net/dudefu011/article/details/80080645">Sparkæ¶æ„åŠåŸç†<i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[RDDåŸç†]]></title>
      <url>/RDD%E5%8E%9F%E7%90%86.html</url>
      <content type="html"><![CDATA[<h2 id="RDDæ¦‚å¿µ"><a href="#RDDæ¦‚å¿µ" class="headerlink" title="RDDæ¦‚å¿µ"></a>RDDæ¦‚å¿µ</h2><p>RDDï¼ˆResilient Distributed Datasetï¼‰å«åšåˆ†å¸ƒå¼æ•°æ®é›†ï¼Œæ˜¯Sparkä¸­æœ€åŸºæœ¬çš„æ•°æ®æŠ½è±¡ï¼Œå®ƒä»£è¡¨ä¸€ä¸ªä¸å¯å˜ã€å¯åˆ†åŒºã€é‡Œé¢çš„å…ƒç´ å¯å¹¶è¡Œè®¡ç®—çš„é›†åˆã€‚RDDå…·æœ‰æ•°æ®æµæ¨¡å‹çš„ç‰¹ç‚¹ï¼šè‡ªåŠ¨å®¹é”™ã€ä½ç½®æ„ŸçŸ¥æ€§è°ƒåº¦å’Œå¯ä¼¸ç¼©æ€§ã€‚RDDå…è®¸ç”¨æˆ·åœ¨æ‰§è¡Œå¤šä¸ªæŸ¥è¯¢æ—¶æ˜¾å¼åœ°å°†å·¥ä½œé›†ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œåç»­çš„æŸ¥è¯¢èƒ½å¤Ÿé‡ç”¨å·¥ä½œé›†ï¼Œè¿™æå¤§åœ°æå‡äº†æŸ¥è¯¢é€Ÿåº¦ã€‚<br><a id="more"></a><br>RDDæ˜¯Sparkçš„æœ€åŸºæœ¬æŠ½è±¡,æ˜¯å¯¹åˆ†å¸ƒå¼å†…å­˜çš„æŠ½è±¡ä½¿ç”¨ï¼Œå®ç°äº†ä»¥æ“ä½œæœ¬åœ°é›†åˆçš„æ–¹å¼æ¥æ“ä½œåˆ†å¸ƒå¼æ•°æ®é›†çš„æŠ½è±¡å®ç°ã€‚RDDæ˜¯Sparkæœ€æ ¸å¿ƒçš„ä¸œè¥¿ï¼Œå®ƒè¡¨ç¤ºå·²è¢«åˆ†åŒºï¼Œä¸å¯å˜çš„å¹¶èƒ½å¤Ÿè¢«å¹¶è¡Œæ“ä½œçš„æ•°æ®é›†åˆï¼Œä¸åŒçš„æ•°æ®é›†æ ¼å¼å¯¹åº”ä¸åŒçš„RDDå®ç°ã€‚RDDå¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚RDDå¯ä»¥cacheåˆ°å†…å­˜ä¸­ï¼Œæ¯æ¬¡å¯¹RDDæ•°æ®é›†çš„æ“ä½œä¹‹åçš„ç»“æœï¼Œéƒ½å¯ä»¥å­˜æ”¾åˆ°å†…å­˜ä¸­ï¼Œä¸‹ä¸€ä¸ªæ“ä½œå¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¾“å…¥ï¼Œçœå»äº†MapReduceå¤§é‡çš„ç£ç›˜IOæ“ä½œ</p>
<p>RDDå¯ä»¥æ¨ªå‘å¤šåˆ†åŒºï¼Œå½“è®¡ç®—è¿‡ç¨‹ä¸­å†…å­˜ä¸è¶³æ—¶ï¼Œå°†æ•°æ®åˆ·åˆ°ç£ç›˜ç­‰å¤–éƒ¨å­˜å‚¨ä¸Šï¼Œä»è€Œå®ç°æ•°æ®åœ¨å†…å­˜å’Œå¤–å­˜çš„çµæ´»åˆ‡æ¢ã€‚å¯ä»¥è¯´ï¼ŒRDDæ˜¯æœ‰è™šæ‹Ÿæ•°æ®ç»“æ„ç»„æˆï¼Œå¹¶ä¸åŒ…å«çœŸå®æ•°æ®ä½“ã€‚</p>
<h2 id="RDDçš„å†…éƒ¨å±æ€§"><a href="#RDDçš„å†…éƒ¨å±æ€§" class="headerlink" title="RDDçš„å†…éƒ¨å±æ€§"></a>RDDçš„å†…éƒ¨å±æ€§</h2><p>é€šè¿‡RDDçš„å†…éƒ¨å±æ€§ï¼Œç”¨æˆ·å¯ä»¥è·å–ç›¸åº”çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚é€šè¿‡è¿™äº›ä¿¡æ¯å¯ä»¥æ”¯æŒæ›´å¤æ‚çš„ç®—æ³•æˆ–ä¼˜åŒ–ã€‚</p>
<h3 id="ä¸€ç»„åˆ†ç‰‡ï¼ˆPartitionï¼‰ï¼Œå³æ•°æ®é›†çš„åŸºæœ¬ç»„æˆå•ä½"><a href="#ä¸€ç»„åˆ†ç‰‡ï¼ˆPartitionï¼‰ï¼Œå³æ•°æ®é›†çš„åŸºæœ¬ç»„æˆå•ä½" class="headerlink" title="ä¸€ç»„åˆ†ç‰‡ï¼ˆPartitionï¼‰ï¼Œå³æ•°æ®é›†çš„åŸºæœ¬ç»„æˆå•ä½"></a>ä¸€ç»„åˆ†ç‰‡ï¼ˆPartitionï¼‰ï¼Œå³æ•°æ®é›†çš„åŸºæœ¬ç»„æˆå•ä½</h3><p>å¯¹äºRDDæ¥è¯´ï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½ä¼šè¢«ä¸€ä¸ªtaskè®¡ç®—ä»»åŠ¡å¤„ç†ï¼Œå¹¶å†³å®šå¹¶è¡Œè®¡ç®—çš„ç²’åº¦ã€‚ç”¨æˆ·å¯ä»¥åœ¨åˆ›å»ºRDDæ—¶æŒ‡å®šRDDçš„åˆ†ç‰‡ä¸ªæ•°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆå°±ä¼šé‡‡ç”¨é»˜è®¤å€¼ã€‚é»˜è®¤å€¼å°±æ˜¯ç¨‹åºæ‰€åˆ†é…çš„CPU Coreçš„æ•°æ®ã€‚</p>
<h3 id="è®¡ç®—æ¯ä¸ªåˆ†ç‰‡çš„å‡½æ•°"><a href="#è®¡ç®—æ¯ä¸ªåˆ†ç‰‡çš„å‡½æ•°" class="headerlink" title="è®¡ç®—æ¯ä¸ªåˆ†ç‰‡çš„å‡½æ•°"></a>è®¡ç®—æ¯ä¸ªåˆ†ç‰‡çš„å‡½æ•°</h3><p>Sparkä¸­RDDçš„è®¡ç®—æ˜¯ä»¥åˆ†ç‰‡ä¸ºå•ä½çš„ï¼Œé€šè¿‡å‡½æ•°å¯ä»¥å¯¹æ¯ä¸ªæ•°æ®å—è¿›è¡ŒRDDéœ€è¦è¿›è¡Œçš„ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°è¿ç®—ã€‚å‡½æ•°ä¼šå¯¹è¿­ä»£å™¨è¿›è¡Œå¤åˆï¼Œä¸éœ€è¦ä¿å­˜æ¯æ¬¡è®¡ç®—çš„ç»“æœã€‚</p>
<h3 id="RDDä¹‹é—´çš„ä¾èµ–å…³ç³»"><a href="#RDDä¹‹é—´çš„ä¾èµ–å…³ç³»" class="headerlink" title="RDDä¹‹é—´çš„ä¾èµ–å…³ç³»"></a>RDDä¹‹é—´çš„ä¾èµ–å…³ç³»</h3><p>å¯¹çˆ¶RDDçš„ä¾èµ–åˆ—è¡¨ï¼Œä¾èµ–è¿˜å…·ä½“åˆ†ä¸ºå®½ä¾èµ–å’Œçª„ä¾èµ–ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„RDDéƒ½æœ‰ä¾èµ–ã€‚RDDçš„<strong>æ¯æ¬¡è½¬æ¢éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„RDD</strong>ï¼Œæ‰€ä»¥RDDä¹‹é—´å°±ä¼šå½¢æˆç±»ä¼¼äºæµæ°´çº¿ä¸€æ ·çš„å‰åä¾èµ–å…³ç³»ã€‚åœ¨éƒ¨åˆ†åˆ†åŒºæ•°æ®ä¸¢å¤±æ—¶ï¼ŒSparkå¯ä»¥é€šè¿‡è¿™ä¸ªä¾èµ–å…³ç³»é‡æ–°è®¡ç®—ä¸¢å¤±çš„åˆ†åŒºæ•°æ®ï¼Œè€Œä¸æ˜¯å¯¹RDDçš„æ‰€æœ‰åˆ†åŒºè¿›è¡Œé‡æ–°è®¡ç®—ã€‚</p>
<h3 id="ä¸€ä¸ªPartitionerï¼Œå³RDDçš„åˆ†ç‰‡å‡½æ•°"><a href="#ä¸€ä¸ªPartitionerï¼Œå³RDDçš„åˆ†ç‰‡å‡½æ•°" class="headerlink" title="ä¸€ä¸ªPartitionerï¼Œå³RDDçš„åˆ†ç‰‡å‡½æ•°"></a>ä¸€ä¸ªPartitionerï¼Œå³RDDçš„åˆ†ç‰‡å‡½æ•°</h3><p>å½“å‰Sparkä¸­å®ç°äº†ä¸¤ç§ç±»å‹çš„åˆ†ç‰‡å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯åŸºäºå“ˆå¸Œçš„HashPartitionerï¼Œå¦å¤–ä¸€ä¸ªæ˜¯åŸºäºèŒƒå›´çš„RangePartitionerã€‚åªæœ‰å¯¹äºäºkey-valueçš„RDDï¼Œæ‰ä¼šæœ‰Partitionerï¼Œékey-valueçš„RDDçš„Parititionerçš„å€¼æ˜¯Noneã€‚Partitionerå‡½æ•°ä¸ä½†å†³å®šäº†RDDæœ¬èº«çš„åˆ†ç‰‡æ•°é‡ï¼Œä¹Ÿå†³å®šäº†parent RDD Shuffleè¾“å‡ºæ—¶çš„åˆ†ç‰‡æ•°é‡ã€‚</p>
<h3 id="åˆ†åŒºåˆ—è¡¨ï¼Œå­˜å‚¨å­˜å–æ¯ä¸ªPartitionçš„ä¼˜å…ˆä½ç½®ï¼ˆpreferred-locationï¼‰"><a href="#åˆ†åŒºåˆ—è¡¨ï¼Œå­˜å‚¨å­˜å–æ¯ä¸ªPartitionçš„ä¼˜å…ˆä½ç½®ï¼ˆpreferred-locationï¼‰" class="headerlink" title="åˆ†åŒºåˆ—è¡¨ï¼Œå­˜å‚¨å­˜å–æ¯ä¸ªPartitionçš„ä¼˜å…ˆä½ç½®ï¼ˆpreferred locationï¼‰"></a>åˆ†åŒºåˆ—è¡¨ï¼Œå­˜å‚¨å­˜å–æ¯ä¸ªPartitionçš„ä¼˜å…ˆä½ç½®ï¼ˆpreferred locationï¼‰</h3><p>å¯¹äºä¸€ä¸ªHDFSæ–‡ä»¶æ¥è¯´ï¼Œè¿™ä¸ªåˆ—è¡¨ä¿å­˜çš„å°±æ˜¯æ¯ä¸ªPartitionæ‰€åœ¨çš„å—çš„ä½ç½®ã€‚æŒ‰ç…§â€œç§»åŠ¨æ•°æ®ä¸å¦‚ç§»åŠ¨è®¡ç®—â€çš„ç†å¿µï¼ŒSparkåœ¨è¿›è¡Œä»»åŠ¡è°ƒåº¦çš„æ—¶å€™ï¼Œä¼šå°½å¯èƒ½åœ°å°†è®¡ç®—ä»»åŠ¡åˆ†é…åˆ°å…¶æ‰€è¦å¤„ç†æ•°æ®å—çš„å­˜å‚¨ä½ç½®ã€‚</p>
<h3 id="å¯é€‰å±æ€§"><a href="#å¯é€‰å±æ€§" class="headerlink" title="å¯é€‰å±æ€§"></a>å¯é€‰å±æ€§</h3><p>key-valueå‹çš„RDDæ˜¯æ ¹æ®å“ˆå¸Œæ¥åˆ†åŒºçš„ï¼Œç±»ä¼¼äºmapreduceå½“ä¸­çš„Paritioneræ¥å£ï¼Œæ§åˆ¶keyåˆ†åˆ°å“ªä¸ªreduceã€‚</p>
<h3 id="å¯é€‰å±æ€§-1"><a href="#å¯é€‰å±æ€§-1" class="headerlink" title="å¯é€‰å±æ€§"></a>å¯é€‰å±æ€§</h3><p>æ¯ä¸€ä¸ªåˆ†ç‰‡çš„ä¼˜å…ˆè®¡ç®—ä½ç½®ï¼ˆpreferred locationsï¼‰ï¼Œæ¯”å¦‚HDFSçš„blockçš„æ‰€åœ¨ä½ç½®åº”è¯¥æ˜¯ä¼˜å…ˆè®¡ç®—çš„ä½ç½®ã€‚(å­˜å‚¨çš„æ˜¯ä¸€ä¸ªè¡¨ï¼Œå¯ä»¥å°†å¤„ç†çš„åˆ†åŒºâ€œæœ¬åœ°åŒ–â€)</p>
<h2 id="RDDçš„ç‰¹ç‚¹"><a href="#RDDçš„ç‰¹ç‚¹" class="headerlink" title="RDDçš„ç‰¹ç‚¹"></a>RDDçš„ç‰¹ç‚¹</h2><ol>
<li>åˆ›å»ºï¼šåªèƒ½é€šè¿‡è½¬æ¢ ( transformation ï¼Œå¦‚map/filter/groupBy/join ç­‰ï¼ŒåŒºåˆ«äºåŠ¨ä½œ action) ä»ä¸¤ç§æ•°æ®æºä¸­åˆ›å»º RDD 1 ï¼‰ç¨³å®šå­˜å‚¨ä¸­çš„æ•°æ®ï¼› 2 ï¼‰å…¶ä»– RDDã€‚</li>
<li><p>åªè¯»ï¼šçŠ¶æ€ä¸å¯å˜ï¼Œä¸èƒ½ä¿®æ”¹ã€‚</p>
</li>
<li><p>åˆ†åŒºï¼šæ”¯æŒä½¿ RDD ä¸­çš„å…ƒç´ æ ¹æ®é‚£ä¸ª key æ¥åˆ†åŒº ( partitioning ) ï¼Œä¿å­˜åˆ°å¤šä¸ªç»“ç‚¹ä¸Šã€‚è¿˜åŸæ—¶åªä¼šé‡æ–°è®¡ç®—ä¸¢å¤±åˆ†åŒºçš„æ•°æ®ï¼Œè€Œä¸ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿã€‚</p>
</li>
<li><p>è·¯å¾„ï¼šåœ¨ RDD ä¸­å«ä¸–æ—æˆ–è¡€ç»Ÿ ( lineage ) ï¼Œå³ RDD æœ‰å……è¶³çš„ä¿¡æ¯å…³äºå®ƒæ˜¯å¦‚ä½•ä»å…¶ä»– RDD äº§ç”Ÿè€Œæ¥çš„ã€‚</p>
</li>
<li><p>æŒä¹…åŒ–ï¼šæ”¯æŒå°†ä¼šè¢«é‡ç”¨çš„ RDD ç¼“å­˜ ( å¦‚ in-memory æˆ–æº¢å‡ºåˆ°ç£ç›˜ )ã€‚</p>
</li>
<li><p>å»¶è¿Ÿè®¡ç®—ï¼šSpark ä¹Ÿä¼šå»¶è¿Ÿè®¡ç®— RDD ï¼Œä½¿å…¶èƒ½å¤Ÿå°†è½¬æ¢ç®¡é“åŒ– (pipeline transformation)ã€‚</p>
</li>
<li><p>æ“ä½œï¼šä¸°å¯Œçš„è½¬æ¢ï¼ˆtransformationï¼‰å’ŒåŠ¨ä½œ ( action ) ï¼Œ count/reduce/collect/save ç­‰ã€‚<br>   æ‰§è¡Œäº†å¤šå°‘æ¬¡transformationæ“ä½œï¼ŒRDDéƒ½ä¸ä¼šçœŸæ­£æ‰§è¡Œè¿ç®—ï¼ˆè®°å½•lineageï¼‰ï¼Œåªæœ‰å½“actionæ“ä½œè¢«æ‰§è¡Œæ—¶ï¼Œè¿ç®—æ‰ä¼šè§¦å‘ã€‚</p>
</li>
</ol>
<h2 id="RDDçš„ä¼˜ç‚¹"><a href="#RDDçš„ä¼˜ç‚¹" class="headerlink" title="RDDçš„ä¼˜ç‚¹"></a>RDDçš„ä¼˜ç‚¹</h2><ol>
<li>RDDåªèƒ½ä»æŒä¹…å­˜å‚¨æˆ–é€šè¿‡Transformationsæ“ä½œäº§ç”Ÿï¼Œç›¸æ¯”äºåˆ†å¸ƒå¼å…±äº«å†…å­˜(DSM)å¯ä»¥æ›´é«˜æ•ˆå®ç°å®¹é”™ï¼Œå¯¹äºä¸¢å¤±éƒ¨åˆ†æ•°æ®åˆ†åŒºåªéœ€æ ¹æ®å®ƒçš„lineageå°±å¯é‡æ–°è®¡ç®—å‡ºæ¥ï¼Œè€Œä¸éœ€è¦åšç‰¹å®šçš„Checkpointã€‚</li>
<li>RDDçš„ä¸å˜æ€§ï¼Œå¯ä»¥å®ç°ç±»Hadoop MapReduceçš„æ¨æµ‹å¼æ‰§è¡Œã€‚</li>
<li>RDDçš„æ•°æ®åˆ†åŒºç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡æ•°æ®çš„æœ¬åœ°æ€§æ¥æé«˜æ€§èƒ½ï¼Œè¿™ä¸Hadoop MapReduceæ˜¯ä¸€æ ·çš„ã€‚</li>
<li>RDDéƒ½æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œåœ¨å†…å­˜ä¸è¶³æ—¶å¯è‡ªåŠ¨é™çº§ä¸ºç£ç›˜å­˜å‚¨ï¼ŒæŠŠRDDå­˜å‚¨äºç£ç›˜ä¸Šï¼Œè¿™æ—¶æ€§èƒ½ä¼šæœ‰å¤§çš„ä¸‹é™ä½†ä¸ä¼šå·®äºç°åœ¨çš„MapReduceã€‚</li>
<li>æ‰¹é‡æ“ä½œï¼šä»»åŠ¡èƒ½å¤Ÿæ ¹æ®æ•°æ®æœ¬åœ°æ€§ (data locality) è¢«åˆ†é…ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li>
</ol>
<h2 id="RDDçš„å­˜å‚¨ä¸åˆ†åŒº"><a href="#RDDçš„å­˜å‚¨ä¸åˆ†åŒº" class="headerlink" title="RDDçš„å­˜å‚¨ä¸åˆ†åŒº"></a>RDDçš„å­˜å‚¨ä¸åˆ†åŒº</h2><ol>
<li>ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸åŒçš„å­˜å‚¨çº§åˆ«å­˜å‚¨RDDä»¥ä¾¿é‡ç”¨ã€‚</li>
<li>å½“å‰RDDé»˜è®¤æ˜¯å­˜å‚¨äºå†…å­˜ï¼Œä½†å½“å†…å­˜ä¸è¶³æ—¶ï¼ŒRDDä¼šspillåˆ°diskã€‚</li>
<li>RDDåœ¨éœ€è¦è¿›è¡Œåˆ†åŒºæŠŠæ•°æ®åˆ†å¸ƒäºé›†ç¾¤ä¸­æ—¶ä¼šæ ¹æ®æ¯æ¡è®°å½•Keyè¿›è¡Œåˆ†åŒºï¼ˆå¦‚Hash åˆ†åŒºï¼‰ï¼Œä»¥æ­¤ä¿è¯ä¸¤ä¸ªæ•°æ®é›†åœ¨Joinæ—¶èƒ½é«˜æ•ˆã€‚</li>
<li>RDDæ ¹æ®useDiskã€useMemoryã€useOffHeapã€deserializedã€replicationå‚æ•°çš„ç»„åˆå®šä¹‰äº†ä»¥ä¸‹å­˜å‚¨çº§åˆ«ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//å­˜å‚¨ç­‰çº§å®šä¹‰ï¼š  </span><br><span class="line">val NONE = new StorageLevel(false, false, false, false)  </span><br><span class="line">val DISK_ONLY = new StorageLevel(true, false, false, false)  </span><br><span class="line">val DISK_ONLY_2 = new StorageLevel(true, false, false, false, 2)  </span><br><span class="line">val MEMORY_ONLY = new StorageLevel(false, true, false, true)  </span><br><span class="line">val MEMORY_ONLY_2 = new StorageLevel(false, true, false, true, 2)  </span><br><span class="line">val MEMORY_ONLY_SER = new StorageLevel(false, true, false, false)  </span><br><span class="line">val MEMORY_ONLY_SER_2 = new StorageLevel(false, true, false, false, 2)  </span><br><span class="line">val MEMORY_AND_DISK = new StorageLevel(true, true, false, true)  </span><br><span class="line">val MEMORY_AND_DISK_2 = new StorageLevel(true, true, false, true, 2)  </span><br><span class="line">val MEMORY_AND_DISK_SER = new StorageLevel(true, true, false, false)  </span><br><span class="line">val MEMORY_AND_DISK_SER_2 = new StorageLevel(true, true, false, false, 2)  </span><br><span class="line">val OFF_HEAP = new StorageLevel(false, false, true, false)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="RDDçš„å®¹é”™æœºåˆ¶"><a href="#RDDçš„å®¹é”™æœºåˆ¶" class="headerlink" title="RDDçš„å®¹é”™æœºåˆ¶"></a>RDDçš„å®¹é”™æœºåˆ¶</h2><p>RDDçš„å®¹é”™æœºåˆ¶å®ç°åˆ†å¸ƒå¼æ•°æ®é›†å®¹é”™æ–¹æ³•æœ‰ä¸¤ç§ï¼š<strong>æ•°æ®æ£€æŸ¥ç‚¹</strong>å’Œ<strong>è®°å½•æ›´æ–°</strong></p>
<p>RDDé‡‡ç”¨è®°å½•æ›´æ–°çš„æ–¹å¼ï¼šè®°å½•æ‰€æœ‰æ›´æ–°ç‚¹çš„æˆæœ¬å¾ˆé«˜ã€‚æ‰€ä»¥ï¼ŒRDDåªæ”¯æŒç²—é¢—ç²’å˜æ¢ï¼Œå³åªè®°å½•å•ä¸ªå—ï¼ˆåˆ†åŒºï¼‰ä¸Šæ‰§è¡Œçš„å•ä¸ªæ“ä½œï¼Œç„¶ååˆ›å»ºæŸä¸ªRDDçš„å˜æ¢åºåˆ—ï¼ˆè¡€ç»Ÿ lineageï¼‰å­˜å‚¨ä¸‹æ¥ï¼›</p>
<p>å˜æ¢åºåˆ—æŒ‡ï¼Œæ¯ä¸ªRDDéƒ½åŒ…å«äº†å®ƒæ˜¯å¦‚ä½•ç”±å…¶ä»–RDDå˜æ¢è¿‡æ¥çš„ä»¥åŠå¦‚ä½•é‡å»ºæŸä¸€å—æ•°æ®çš„ä¿¡æ¯ã€‚å› æ­¤RDDçš„å®¹é”™æœºåˆ¶åˆç§°â€œ<strong>è¡€ç»Ÿ</strong>â€å®¹é”™ã€‚</p>
<p>è¦å®ç°è¿™ç§â€œè¡€ç»Ÿâ€å®¹é”™æœºåˆ¶ï¼Œæœ€å¤§çš„éš¾é¢˜å°±æ˜¯<strong>å¦‚ä½•è¡¨è¾¾çˆ¶RDDå’Œå­RDDä¹‹é—´çš„ä¾èµ–å…³ç³»</strong>ã€‚å®é™…ä¸Šä¾èµ–å…³ç³»å¯ä»¥åˆ†ä¸¤ç§ï¼Œ<strong>çª„ä¾èµ–</strong>å’Œ<strong>å®½ä¾èµ–</strong>ã€‚</p>
<p><strong>çª„ä¾èµ–</strong>ï¼šå­RDDä¸­çš„æ¯ä¸ªæ•°æ®å—åªä¾èµ–äºçˆ¶RDDä¸­å¯¹åº”çš„æœ‰é™ä¸ªå›ºå®šçš„æ•°æ®å—</p>
<p><strong>å®½ä¾èµ–</strong>ï¼šå­RDDä¸­çš„ä¸€ä¸ªæ•°æ®å—å¯ä»¥ä¾èµ–äºçˆ¶RDDä¸­çš„<strong>æ‰€æœ‰æ•°æ®å—</strong>ã€‚ä¾‹å¦‚ï¼šmapå˜æ¢ï¼Œå­RDDä¸­çš„æ•°æ®å—åªä¾èµ–äºçˆ¶RDDä¸­å¯¹åº”çš„ä¸€ä¸ªæ•°æ®å—ï¼›groupByKeyå˜æ¢ï¼Œå­RDDä¸­çš„æ•°æ®å—ä¼šä¾èµ–äºå¤šå—çˆ¶RDDä¸­çš„æ•°æ®å—ï¼Œå› ä¸ºä¸€ä¸ªkeyå¯èƒ½åˆ†å¸ƒäºçˆ¶RDDçš„ä»»ä½•ä¸€ä¸ªæ•°æ®å—ä¸­</p>
<p>å°†ä¾èµ–å…³ç³»åˆ†ç±»çš„ä¸¤ä¸ªç‰¹æ€§ï¼š</p>
<ol>
<li>çª„ä¾èµ–å¯ä»¥åœ¨æŸä¸ªè®¡ç®—èŠ‚ç‚¹ä¸Šç›´æ¥é€šè¿‡è®¡ç®—çˆ¶RDDçš„æŸå—æ•°æ®è®¡ç®—å¾—åˆ°å­RDDå¯¹åº”çš„æŸå—æ•°æ®ï¼›å®½ä¾èµ–åˆ™è¦ç­‰åˆ°çˆ¶RDDæ‰€æœ‰æ•°æ®éƒ½è®¡ç®—å®Œæˆä¹‹åï¼Œå¹¶ä¸”çˆ¶RDDçš„è®¡ç®—ç»“æœè¿›è¡Œhashå¹¶ä¼ åˆ°å¯¹åº”èŠ‚ç‚¹ä¸Šä¹‹åæ‰èƒ½è®¡ç®—å­RDDã€‚</li>
<li>æ•°æ®ä¸¢å¤±æ—¶ï¼Œå¯¹äºçª„ä¾èµ–åªéœ€è¦é‡æ–°è®¡ç®—ä¸¢å¤±çš„é‚£ä¸€å—æ•°æ®æ¥æ¢å¤ï¼›å¯¹äºå®½ä¾èµ–åˆ™è¦å°†ç¥–å…ˆRDDä¸­çš„æ‰€æœ‰æ•°æ®å—å…¨éƒ¨é‡æ–°è®¡ç®—æ¥æ¢å¤ã€‚</li>
</ol>
<p><strong>æ‰€ä»¥åœ¨â€œè¡€ç»Ÿâ€é“¾ç‰¹åˆ«æ˜¯æœ‰å®½ä¾èµ–çš„æ—¶å€™ï¼Œéœ€è¦åœ¨é€‚å½“çš„æ—¶æœºè®¾ç½®æ•°æ®æ£€æŸ¥ç‚¹ã€‚ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªç‰¹æ€§è¦æ±‚å¯¹äºä¸åŒä¾èµ–å…³ç³»è¦é‡‡å–ä¸åŒçš„ä»»åŠ¡è°ƒåº¦æœºåˆ¶å’Œå®¹é”™æ¢å¤æœºåˆ¶ã€‚</strong></p>
<h2 id="Sparkè®¡ç®—å·¥ä½œæµ"><a href="#Sparkè®¡ç®—å·¥ä½œæµ" class="headerlink" title="Sparkè®¡ç®—å·¥ä½œæµ"></a>Sparkè®¡ç®—å·¥ä½œæµ</h2><ol>
<li>è¾“å…¥ï¼šåœ¨Sparkç¨‹åºè¿è¡Œä¸­ï¼Œæ•°æ®ä»å¤–éƒ¨æ•°æ®ç©ºé—´ï¼ˆä¾‹å¦‚ï¼ŒHDFSã€Scalaé›†åˆæˆ–æ•°æ®ï¼‰è¾“å…¥åˆ°Sparkï¼Œæ•°æ®å°±è¿›å…¥äº†Sparkè¿è¡Œæ—¶æ•°æ®ç©ºé—´ï¼Œä¼šè½¬åŒ–ä¸ºSparkä¸­çš„æ•°æ®å—ï¼Œé€šè¿‡BlockManagerè¿›è¡Œç®¡ç†ã€‚</li>
<li>è¿è¡Œï¼šåœ¨Sparkæ•°æ®è¾“å…¥å½¢æˆRDDåï¼Œä¾¿å¯ä»¥é€šè¿‡å˜æ¢ç®—å­fliterç­‰ï¼Œå¯¹æ•°æ®æ“ä½œå¹¶å°†RDDè½¬åŒ–ä¸ºæ–°çš„RDDï¼Œé€šè¿‡è¡ŒåŠ¨ï¼ˆActionï¼‰ç®—å­ï¼Œè§¦å‘Sparkæäº¤ä½œä¸šã€‚å¦‚æœæ•°æ®éœ€è¦å¤ç”¨ï¼Œå¯ä»¥é€šè¿‡Cacheç®—å­ï¼Œå°†æ•°æ®ç¼“å­˜åˆ°å†…å­˜ã€‚</li>
<li>è¾“å‡ºï¼šç¨‹åºè¿è¡Œç»“æŸæ•°æ®ä¼šè¾“å‡ºSparkè¿è¡Œæ—¶ç©ºé—´ï¼Œå­˜å‚¨åˆ°åˆ†å¸ƒå¼å­˜å‚¨ä¸­ï¼ˆå¦‚saveAsTextFileè¾“å‡ºåˆ°HDFSï¼‰æˆ–Scalaæ•°æ®æˆ–é›†åˆä¸­ï¼ˆcollectè¾“å‡ºåˆ°Scalaé›†åˆï¼Œcountè¿”å›Scala Intå‹æ•°æ®ï¼‰ã€‚</li>
</ol>
<p>Sparkçš„æ ¸å¿ƒæ•°æ®æ¨¡å‹æ˜¯RDDï¼Œä½†RDDæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå…·ä½“ç”±å„å­ç±»å®ç°ï¼Œå¦‚MappedRDDã€ShuffledRDDç­‰å­ç±»ã€‚Sparkå°†å¸¸ç”¨çš„å¤§æ•°æ®æ“ä½œéƒ½è½¬åŒ–æˆä¸ºRDDçš„å­ç±»ã€‚</p>
<p><img src="http://ou3xxg3hg.bkt.clouddn.com/spark%E8%AE%A1%E7%AE%97%E5%B7%A5%E4%BD%9C%E6%B5%81.jpg" alt="image"><br><img src="http://ou3xxg3hg.bkt.clouddn.com/Spark%E8%BF%90%E8%A1%8C%E7%9A%84%E6%B5%81%E7%A8%8B.png" alt="image"><br><img src="http://ou3xxg3hg.bkt.clouddn.com/timg.jpg" alt="image"><br><img src="http://ou3xxg3hg.bkt.clouddn.com/spark%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.jpg" alt="image"></p>
<h2 id="RDDç¼–ç¨‹æ¨¡å‹"><a href="#RDDç¼–ç¨‹æ¨¡å‹" class="headerlink" title="RDDç¼–ç¨‹æ¨¡å‹"></a>RDDç¼–ç¨‹æ¨¡å‹</h2><p>textFileç®—å­ä»HDFSè¯»å–æ—¥å¿—æ–‡ä»¶ï¼Œè¿”å›â€œfileâ€ï¼ˆRDDï¼‰ï¼›filterç®—å­ç­›å‡ºå¸¦â€œERRORâ€çš„è¡Œï¼Œèµ‹ç»™ â€œerrorsâ€ï¼ˆæ–°RDDï¼‰ï¼›cacheç®—å­æŠŠå®ƒç¼“å­˜ä¸‹æ¥ä»¥å¤‡æœªæ¥ä½¿ç”¨ï¼›countç®—å­è¿”å›â€œerrorsâ€çš„è¡Œæ•°ã€‚RDDçœ‹èµ·æ¥ä¸Scalaé›†åˆç±»å‹ æ²¡æœ‰å¤ªå¤§å·®åˆ«ï¼Œä½†å®ƒä»¬çš„æ•°æ®å’Œè¿è¡Œæ¨¡å‹å¤§ç›¸è¿¥å¼‚ã€‚<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> file = sc.textFile(<span class="string">"hdfs://..."</span>)</span><br><span class="line"><span class="keyword">val</span> errors = file.filter(_.contains(<span class="string">"ERROR"</span>))</span><br><span class="line">errors.cache()</span><br><span class="line">errors.count()</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢ä»£ç ç»™å‡ºäº†RDDæ•°æ®æ¨¡å‹ï¼Œå¹¶å°†ä¸Šä¾‹ä¸­ç”¨åˆ°çš„å››ä¸ªç®—å­æ˜ å°„åˆ°å››ç§ç®—å­ç±»å‹ã€‚Sparkç¨‹åºå·¥ä½œåœ¨ä¸¤ä¸ªç©ºé—´ä¸­ï¼šSpark RDDç©ºé—´å’ŒScalaåŸç”Ÿæ•°æ®ç©ºé—´ã€‚åœ¨åŸç”Ÿæ•°æ®ç©ºé—´é‡Œï¼Œæ•°æ®è¡¨ç°ä¸ºæ ‡é‡ï¼ˆscalarï¼Œå³ScalaåŸºæœ¬ç±»å‹ï¼Œç”¨æ©˜è‰²å°æ–¹å—è¡¨ç¤ºï¼‰ã€é›†åˆç±»å‹ï¼ˆè“è‰²è™šçº¿ æ¡†ï¼‰å’ŒæŒä¹…å­˜å‚¨ï¼ˆçº¢è‰²åœ†æŸ±ï¼‰ã€‚</p>
<p>ä¸‹å›¾æè¿°äº†Sparkè¿è¡Œè¿‡ç¨‹ä¸­é€šè¿‡ç®—å­å¯¹RDDè¿›è¡Œè½¬æ¢ï¼Œ ç®—å­æ˜¯RDDä¸­å®šä¹‰çš„å‡½æ•°ï¼Œå¯ä»¥å¯¹RDDä¸­çš„æ•°æ®è¿›è¡Œè½¬æ¢å’Œæ“ä½œã€‚<br><img src="https://img-blog.csdn.net/20160622185230526" alt="image"></p>
<p>è¾“å…¥ç®—å­ï¼ˆæ©˜è‰²ç®­å¤´ï¼‰å°†Scalaé›†åˆç±»å‹æˆ–å­˜å‚¨ä¸­çš„æ•°æ®å¸å…¥RDDç©ºé—´ï¼Œè½¬ä¸ºRDDï¼ˆè“è‰²å®çº¿æ¡†ï¼‰ã€‚è¾“å…¥ç®—å­çš„è¾“å…¥å¤§è‡´æœ‰ä¸¤ç±»ï¼šä¸€ç±»é’ˆå¯¹ Scalaé›†åˆç±»å‹ï¼Œå¦‚parallelizeï¼›å¦ä¸€ç±»é’ˆå¯¹å­˜å‚¨æ•°æ®ï¼Œå¦‚ä¸Šä¾‹ä¸­çš„textFileã€‚è¾“å…¥ç®—å­çš„è¾“å‡ºå°±æ˜¯Sparkç©ºé—´çš„RDDã€‚</p>
<p>å› ä¸ºå‡½æ•°è¯­ä¹‰ï¼ŒRDDç»è¿‡å˜æ¢ï¼ˆtransformationï¼‰ç®—å­ï¼ˆè“è‰²ç®­å¤´ï¼‰ç”Ÿæˆæ–°çš„RDDã€‚å˜æ¢ç®—å­çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯RDDã€‚RDDä¼šè¢«åˆ’åˆ† æˆå¾ˆå¤šçš„åˆ†åŒº ï¼ˆpartitionï¼‰åˆ†å¸ƒåˆ°é›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ä¸­ï¼Œå›¾1ç”¨è“è‰²å°æ–¹å—ä»£è¡¨åˆ†åŒºã€‚æ³¨æ„ï¼Œåˆ†åŒºæ˜¯ä¸ªé€»è¾‘æ¦‚å¿µï¼Œå˜æ¢å‰åçš„æ–°æ—§åˆ†åŒºåœ¨ç‰©ç†ä¸Šå¯èƒ½æ˜¯åŒä¸€å—å†…å­˜æˆ–å­˜ å‚¨ã€‚è¿™æ˜¯å¾ˆé‡è¦çš„ä¼˜åŒ–ï¼Œä»¥é˜²æ­¢å‡½æ•°å¼ä¸å˜æ€§å¯¼è‡´çš„å†…å­˜éœ€æ±‚æ— é™æ‰©å¼ ã€‚æœ‰äº›RDDæ˜¯è®¡ç®—çš„ä¸­é—´ç»“æœï¼Œå…¶åˆ†åŒºå¹¶ä¸ä¸€å®šæœ‰ç›¸åº”çš„å†…å­˜æˆ–å­˜å‚¨ä¸ä¹‹å¯¹åº”ï¼Œå¦‚æœéœ€è¦ ï¼ˆå¦‚ä»¥å¤‡æœªæ¥ä½¿ç”¨ï¼‰ï¼Œå¯ä»¥è°ƒç”¨ç¼“å­˜ç®—å­ï¼ˆä¾‹å­ä¸­çš„cacheç®—å­ï¼Œç°è‰²ç®­å¤´è¡¨ç¤ºï¼‰å°†åˆ†åŒºç‰©åŒ–ï¼ˆmaterializeï¼‰å­˜ä¸‹æ¥ï¼ˆç°è‰²æ–¹å—ï¼‰ã€‚</p>
<p>ä¸€éƒ¨åˆ†å˜æ¢ç®—å­è§†RDDçš„å…ƒç´ ä¸ºç®€å•å…ƒç´ ï¼Œåˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li><p>è¾“å…¥è¾“å‡ºä¸€å¯¹ä¸€ï¼ˆelement-wiseï¼‰çš„ç®—å­ï¼Œä¸”ç»“æœRDDçš„åˆ†åŒºç»“æ„ä¸å˜ï¼Œä¸»è¦æ˜¯mapã€flatMapï¼ˆmapåå±•å¹³ä¸ºä¸€ç»´RDDï¼‰ï¼›</p>
</li>
<li><p>è¾“å…¥è¾“å‡ºä¸€å¯¹ä¸€ï¼Œä½†ç»“æœRDDçš„åˆ†åŒºç»“æ„å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚unionï¼ˆä¸¤ä¸ªRDDåˆä¸ºä¸€ä¸ªï¼‰ã€coalesceï¼ˆåˆ†åŒºå‡å°‘ï¼‰ï¼›</p>
</li>
<li><p>ä»è¾“å…¥ä¸­é€‰æ‹©éƒ¨åˆ†å…ƒç´ çš„ç®—å­ï¼Œå¦‚filterã€distinctï¼ˆå»é™¤å†—ä½™å…ƒç´ ï¼‰ã€subtractï¼ˆæœ¬RDDæœ‰ã€å®ƒRDDæ— çš„å…ƒç´ ç•™ä¸‹æ¥ï¼‰å’Œsampleï¼ˆé‡‡æ ·ï¼‰ã€‚</p>
</li>
</ul>
<p>å¦ä¸€éƒ¨åˆ†å˜æ¢ç®—å­é’ˆå¯¹Key-Valueé›†åˆï¼Œåˆåˆ†ä¸ºï¼š</p>
<ul>
<li><p>å¯¹å•ä¸ªRDDåšelement-wiseè¿ç®—ï¼Œå¦‚mapValuesï¼ˆä¿æŒæºRDDçš„åˆ†åŒºæ–¹å¼ï¼Œè¿™ä¸mapä¸åŒï¼‰ï¼›</p>
</li>
<li><p>å¯¹å•ä¸ªRDDé‡æ’ï¼Œå¦‚sortã€partitionByï¼ˆå®ç°ä¸€è‡´æ€§çš„åˆ†åŒºåˆ’åˆ†ï¼Œè¿™ä¸ªå¯¹æ•°æ®æœ¬åœ°æ€§ä¼˜åŒ–å¾ˆé‡è¦ï¼Œåé¢ä¼šè®²ï¼‰ï¼›</p>
</li>
<li><p>å¯¹å•ä¸ªRDDåŸºäºkeyè¿›è¡Œé‡ç»„å’Œreduceï¼Œå¦‚groupByKeyã€reduceByKeyï¼›</p>
</li>
<li><p>å¯¹ä¸¤ä¸ªRDDåŸºäºkeyè¿›è¡Œjoinå’Œé‡ç»„ï¼Œå¦‚joinã€cogroupã€‚</p>
</li>
</ul>
<p>åä¸‰ç±»æ“ä½œéƒ½æ¶‰åŠé‡æ’ï¼Œç§°ä¸ºshuffleç±»æ“ä½œã€‚</p>
<p>ä»RDDåˆ°RDDçš„å˜æ¢ç®—å­åºåˆ—ï¼Œä¸€ç›´åœ¨RDDç©ºé—´å‘ç”Ÿã€‚è¿™é‡Œå¾ˆé‡è¦çš„è®¾è®¡æ˜¯lazy evaluationï¼šè®¡ç®—å¹¶ä¸å®é™…å‘ç”Ÿï¼Œåªæ˜¯ä¸æ–­åœ°è®°å½•åˆ°å…ƒæ•°æ®ã€‚å…ƒæ•°æ®çš„ç»“æ„æ˜¯DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªâ€œé¡¶ç‚¹â€æ˜¯RDDï¼ˆåŒ…æ‹¬ç”Ÿäº§è¯¥RDD çš„ç®—å­ï¼‰ï¼Œä»çˆ¶RDDåˆ°å­RDDæœ‰â€œè¾¹â€ï¼Œè¡¨ç¤ºRDDé—´çš„ä¾èµ–æ€§ã€‚Sparkç»™å…ƒæ•°æ®DAGå–äº†ä¸ªå¾ˆé…·çš„åå­—ï¼ŒLineageï¼ˆä¸–ç³»ï¼‰ã€‚è¿™ä¸ª Lineageä¹Ÿæ˜¯å‰é¢å®¹é”™è®¾è®¡ä¸­æ‰€è¯´çš„æ—¥å¿—æ›´æ–°ã€‚</p>
<p>Lineageä¸€ç›´å¢é•¿ï¼Œç›´åˆ°é‡ä¸Šè¡ŒåŠ¨ï¼ˆactionï¼‰ç®—å­ï¼ˆå›¾1ä¸­çš„ç»¿è‰²ç®­å¤´ï¼‰ï¼Œè¿™æ—¶ å°±è¦evaluateäº†ï¼ŒæŠŠåˆšæ‰ç´¯ç§¯çš„æ‰€æœ‰ç®—å­ä¸€æ¬¡æ€§æ‰§è¡Œã€‚è¡ŒåŠ¨ç®—å­çš„è¾“å…¥æ˜¯RDDï¼ˆä»¥åŠè¯¥RDDåœ¨Lineageä¸Šä¾èµ–çš„æ‰€æœ‰RDDï¼‰ï¼Œè¾“å‡ºæ˜¯æ‰§è¡Œåç”Ÿ æˆçš„åŸç”Ÿæ•°æ®ï¼Œå¯èƒ½æ˜¯Scalaæ ‡é‡ã€é›†åˆç±»å‹çš„æ•°æ®æˆ–å­˜å‚¨ã€‚å½“ä¸€ä¸ªç®—å­çš„è¾“å‡ºæ˜¯ä¸Šè¿°ç±»å‹æ—¶ï¼Œè¯¥ç®—å­å¿…ç„¶æ˜¯è¡ŒåŠ¨ç®—å­ï¼Œå…¶æ•ˆæœåˆ™æ˜¯ä»RDDç©ºé—´è¿”å›åŸç”Ÿæ•°æ®ç©ºé—´ã€‚</p>
<h2 id="RDDçš„è¿è¡Œé€»è¾‘"><a href="#RDDçš„è¿è¡Œé€»è¾‘" class="headerlink" title="RDDçš„è¿è¡Œé€»è¾‘"></a>RDDçš„è¿è¡Œé€»è¾‘</h2><p>å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨Sparkåº”ç”¨ä¸­ï¼Œæ•´ä¸ªæ‰§è¡Œæµç¨‹åœ¨é€»è¾‘ä¸Šè¿ç®—ä¹‹é—´ä¼šå½¢æˆæœ‰å‘æ— ç¯å›¾ã€‚Actionç®—å­è§¦å‘ä¹‹åä¼šå°†æ‰€æœ‰ç´¯ç§¯çš„ç®—å­å½¢æˆä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼Œç„¶åç”±è°ƒåº¦å™¨è°ƒåº¦è¯¥å›¾ä¸Šçš„ä»»åŠ¡è¿›è¡Œè¿ç®—ã€‚Sparkçš„è°ƒåº¦æ–¹å¼ä¸MapReduceæœ‰æ‰€ä¸åŒã€‚Sparkæ ¹æ®RDDä¹‹é—´ä¸åŒçš„ä¾èµ–å…³ç³»åˆ‡åˆ†å½¢æˆä¸åŒçš„é˜¶æ®µï¼ˆStageï¼‰ï¼Œä¸€ä¸ªé˜¶æ®µåŒ…å«ä¸€ç³»åˆ—å‡½æ•°è¿›è¡Œæµæ°´çº¿æ‰§è¡Œã€‚å›¾ä¸­çš„Aã€Bã€Cã€Dã€Eã€Fã€Gï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçš„RDDï¼ŒRDDå†…çš„ä¸€ä¸ªæ–¹æ¡†ä»£è¡¨ä¸€ä¸ªæ•°æ®å—ã€‚æ•°æ®ä»HDFSè¾“å…¥Sparkï¼Œå½¢æˆRDD Aå’ŒRDD Cï¼ŒRDD Cä¸Šæ‰§è¡Œmapæ“ä½œï¼Œè½¬æ¢ä¸ºRDD Dï¼ŒRDD Bå’ŒRDD Fè¿›è¡Œjoinæ“ä½œè½¬æ¢ä¸ºGï¼Œè€Œåœ¨Båˆ°Gçš„è¿‡ç¨‹ä¸­åˆä¼šè¿›è¡ŒShuffleã€‚æœ€åRDD Gé€šè¿‡å‡½æ•°saveAsSequenceFileè¾“å‡ºä¿å­˜åˆ°HDFSä¸­ã€‚<br><img src="http://ou3xxg3hg.bkt.clouddn.com/spark%E6%B5%81%E7%A8%8B%E5%9B%BE1.jpg" alt="image"><br><img src="http://ou3xxg3hg.bkt.clouddn.com/RDD%E6%B5%81%E7%A8%8B%E5%9B%BE.jpg" alt="image"></p>
<h2 id="RDDä¾èµ–å…³ç³»"><a href="#RDDä¾èµ–å…³ç³»" class="headerlink" title="RDDä¾èµ–å…³ç³»"></a>RDDä¾èµ–å…³ç³»</h2><p>RDDä¾èµ–å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://img-blog.csdn.net/20160622174357363" alt="image"></p>
<p>çª„ä¾èµ– (narrowdependencies) å’Œå®½ä¾èµ– (widedependencies) ã€‚</p>
<p>çª„ä¾èµ–æ˜¯æŒ‡ çˆ¶ RDD çš„æ¯ä¸ªåˆ†åŒºéƒ½åªè¢«å­ RDD çš„ä¸€ä¸ªåˆ†åŒºæ‰€ä½¿ç”¨ï¼Œä¾‹å¦‚mapã€filterã€‚</p>
<p>å®½ä¾èµ–å°±æ˜¯æŒ‡çˆ¶ RDD çš„åˆ†åŒºè¢«å¤šä¸ªå­ RDD çš„åˆ†åŒºæ‰€ä¾èµ–ï¼Œä¾‹å¦‚groupByKeyã€reduceByKeyç­‰æ“ä½œã€‚å¦‚æœçˆ¶RDDçš„ä¸€ä¸ªPartitionè¢«ä¸€ä¸ªå­RDDçš„Partitionæ‰€ä½¿ç”¨å°±æ˜¯çª„ä¾èµ–ï¼Œå¦åˆ™çš„è¯å°±æ˜¯å®½ä¾èµ–ã€‚</p>
<p>è¿™ç§åˆ’åˆ†æœ‰ä¸¤ä¸ªç”¨å¤„ã€‚é¦–å…ˆï¼Œçª„ä¾èµ–æ”¯æŒåœ¨ä¸€ä¸ªç»“ç‚¹ä¸Šç®¡é“åŒ–æ‰§è¡Œã€‚ä¾‹å¦‚åŸºäºä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œå¯ä»¥åœ¨ filter ä¹‹åæ‰§è¡Œ map ã€‚å…¶æ¬¡ï¼Œçª„ä¾èµ–æ”¯æŒæ›´é«˜æ•ˆçš„æ•…éšœè¿˜åŸã€‚å› ä¸ºå¯¹äºçª„ä¾èµ–ï¼Œåªæœ‰ä¸¢å¤±çš„çˆ¶ RDD çš„åˆ†åŒºéœ€è¦é‡æ–°è®¡ç®—ã€‚è€Œå¯¹äºå®½ä¾èµ–ï¼Œä¸€ä¸ªç»“ç‚¹çš„æ•…éšœå¯èƒ½å¯¼è‡´æ¥è‡ªæ‰€æœ‰çˆ¶ RDD çš„åˆ†åŒºä¸¢å¤±ï¼Œå› æ­¤å°±éœ€è¦å®Œå…¨é‡æ–°æ‰§è¡Œã€‚å› æ­¤å¯¹äºå®½ä¾èµ–ï¼ŒSpark ä¼šåœ¨æŒæœ‰å„ä¸ªçˆ¶åˆ†åŒºçš„ç»“ç‚¹ä¸Šï¼Œå°†ä¸­é—´æ•°æ®æŒä¹…åŒ–æ¥ç®€åŒ–æ•…éšœè¿˜åŸï¼Œå°±åƒ MapReduce ä¼šæŒä¹…åŒ– map çš„è¾“å‡ºä¸€æ ·ã€‚</p>
<p>ç‰¹åˆ«è¯´æ˜ï¼šå¯¹äºjoinæ“ä½œæœ‰ä¸¤ç§æƒ…å†µï¼Œå¦‚æœjoinæ“ä½œçš„ä½¿ç”¨æ¯ä¸ªpartitionä»…ä»…å’Œå·²çŸ¥çš„Partitionè¿›è¡Œjoinï¼Œæ­¤æ—¶çš„joinæ“ä½œå°±æ˜¯çª„ä¾èµ–ï¼›å…¶ä»–æƒ…å†µçš„joinæ“ä½œå°±æ˜¯å®½ä¾èµ–ï¼›å› ä¸ºæ˜¯ç¡®å®šçš„Partitionæ•°é‡çš„ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥å°±æ˜¯çª„ä¾èµ–ï¼Œå¾—å‡ºä¸€ä¸ªæ¨è®ºï¼Œçª„ä¾èµ–ä¸ä»…åŒ…å«ä¸€å¯¹ä¸€çš„çª„ä¾èµ–ï¼Œè¿˜åŒ…å«ä¸€å¯¹å›ºå®šä¸ªæ•°çš„çª„ä¾èµ–ï¼ˆä¹Ÿå°±æ˜¯è¯´å¯¹çˆ¶RDDçš„ä¾èµ–çš„Partitionçš„æ•°é‡ä¸ä¼šéšç€RDDæ•°æ®è§„æ¨¡çš„æ”¹å˜è€Œæ”¹å˜ï¼‰</p>
<h2 id="Stageçš„åˆ’åˆ†ï¼š"><a href="#Stageçš„åˆ’åˆ†ï¼š" class="headerlink" title="Stageçš„åˆ’åˆ†ï¼š"></a>Stageçš„åˆ’åˆ†ï¼š</h2><p><img src="https://img-blog.csdn.net/20160622175905874" alt="image"><br> Stageåˆ’åˆ†çš„ä¾æ®å°±æ˜¯å®½ä¾èµ–ï¼Œä»€ä¹ˆæ—¶å€™äº§ç”Ÿå®½ä¾èµ–å‘¢ï¼Ÿä¾‹å¦‚reduceByKeyï¼ŒgroupByKeyç­‰Actionã€‚</p>
<ol>
<li>ä»åå¾€å‰æ¨ç†ï¼Œé‡åˆ°å®½ä¾èµ–å°±æ–­å¼€ï¼Œé‡åˆ°çª„ä¾èµ–å°±æŠŠå½“å‰çš„RDDåŠ å…¥åˆ°Stageä¸­ï¼›</li>
<li>æ¯ä¸ªStageé‡Œé¢çš„Taskçš„æ•°é‡æ˜¯ç”±è¯¥Stageä¸­æœ€åä¸€ä¸ªRDDçš„Partitionæ•°é‡å†³å®šçš„ï¼›</li>
<li>æœ€åä¸€ä¸ªStageé‡Œé¢çš„ä»»åŠ¡çš„ç±»å‹æ˜¯ResultTaskï¼Œå‰é¢æ‰€æœ‰å…¶ä»–Stageé‡Œé¢çš„ä»»åŠ¡ç±»å‹éƒ½æ˜¯ShuffleMapTaskï¼›</li>
<li><p>ä»£è¡¨å½“å‰Stageçš„ç®—å­ä¸€å®šæ˜¯è¯¥Stageçš„æœ€åä¸€ä¸ªè®¡ç®—æ­¥éª¤ã€‚</p>
<p>è¡¥å……ï¼šHadoopä¸­çš„MapReduceæ“ä½œä¸­çš„Mapperå’ŒReduceråœ¨Sparkä¸­åŸºæœ¬ç­‰é‡ç®—å­æ˜¯ï¼šmapã€reduceByKeyï¼›åœ¨ä¸€ä¸ªStageå†…éƒ¨ï¼Œé¦–å…ˆæ˜¯ç®—å­åˆå¹¶ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å‡½æ•°å¼ç¼–ç¨‹çš„æ‰§è¡Œçš„æ—¶å€™æœ€ç»ˆè¿›è¡Œå‡½æ•°çš„å±•å¼€ä»è€ŒæŠŠä¸€ä¸ªStageå†…éƒ¨çš„å¤šä¸ªç®—å­åˆå¹¶æˆä¸ºä¸€ä¸ªå¤§ç®—å­ï¼ˆå…¶å†…éƒ¨åŒ…å«äº†å½“å‰Stageä¸­æ‰€æœ‰ç®—å­å¯¹æ•°æ®çš„è®¡ç®—é€»è¾‘ï¼‰ï¼›å…¶æ¬¡æ˜¯ç”±äºTransformationæ“ä½œçš„Lazyç‰¹æ€§ï¼ï¼åœ¨å…·ä½“ç®—å­äº¤ç»™é›†ç¾¤çš„Executorè®¡ç®—ä¹‹å‰ï¼Œé¦–å…ˆä¼šé€šè¿‡Spark Frameworkï¼ˆDAGSchedulerï¼‰è¿›è¡Œç®—å­çš„ä¼˜åŒ–ã€‚</p>
</li>
</ol>
<p><img src="https://img-blog.csdn.net/20160622185706422" alt="image"></p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> RDD </tag>
            
            <tag> Spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SparkCoreè°ƒä¼˜]]></title>
      <url>/SparkCore%E8%B0%83%E4%BC%98.html</url>
      <content type="html"><![CDATA[<h2 id="å¼€å‘è§’åº¦"><a href="#å¼€å‘è§’åº¦" class="headerlink" title="å¼€å‘è§’åº¦"></a>å¼€å‘è§’åº¦</h2><ol>
<li>åŸåˆ™ä¸€ï¼šé¿å…åˆ›å»ºé‡å¤çš„RDD</li>
<li>åŸåˆ™äºŒï¼šå°½å¯èƒ½ç”¨åŒä¸€ä¸ªRDD</li>
<li>åŸåˆ™ä¸‰ï¼šå¯¹å¤šæ¬¡ä½¿ç”¨çš„RDDè¿›è¡ŒæŒä¹…åŒ–<br>å¦‚ä½•é€‰æ‹©ä¸€ç§æœ€åˆé€‚çš„æŒä¹…åŒ–ç­–ç•¥<ul>
<li>MEMORY_ONLY</li>
<li>MEMORY_ONLY_SER</li>
<li>MEMORY_AND_DISK_SER</li>
<li>ä¸è€ƒè™‘ï¼šDISK_ONLYå’Œ_2åç¼€<a id="more"></a></li>
</ul>
</li>
<li>åŸåˆ™å››ï¼šå°½é‡é¿å…ä½¿ç”¨shuffleç±»ç®—å­<ul>
<li>èƒ½ä¸ç”¨å°±ä¸ç”¨</li>
<li>èƒ½ä¸èƒ½ç”¨éshuffleç±»çš„ç®—å­å»æ›¿ä»£éshuffleç±»çš„join -ã€‹ mapæ“ä½œæ›¿ä»£</li>
</ul>
</li>
<li>åŸåˆ™äº”ï¼šä½¿ç”¨map-sideé¢„èšåˆçš„shuffleæ“ä½œï¼šgroupBykey å’Œ reduceBykey</li>
<li>åŸåˆ™å…­ï¼šä½¿ç”¨é«˜æ€§èƒ½çš„ç®—å­ï¼š<ul>
<li>ä½¿ç”¨reduceBykey//aggregateBykeyæ›¿ä»£groupBykey</li>
<li>ä½¿ç”¨mapPartitionsæ›¿ä»£æ™®é€šmap</li>
<li>ä½¿ç”¨foreachPartitionsæ›¿ä»£foreach</li>
<li>ä½¿ç”¨filterä¹‹åè¿›è¡Œcoalesceæ“ä½œ</li>
<li>ä½¿ç”¨repartitionAndSortWithhinPartitionsæ›¿ä»£repartitionä¸sortç±»æ“ä½œ</li>
</ul>
</li>
<li>åŸåˆ™ä¸ƒï¼šå¹¿æ’­å¤§å˜é‡</li>
<li>åŸåˆ™å…«ï¼šä½¿ç”¨Kryoä¼˜åŒ–åºåˆ—åŒ–æ€§èƒ½<ul>
<li>conf.set(â€œspark.serializerâ€, â€œorg.apache.spark.serializer.KryoSerializerâ€)</li>
<li>conf.registerKryoClasses(Array(classOf[MyClass1], classOf[MyClass2]))</li>
</ul>
</li>
<li>ä¼˜åŒ–æ•°æ®ç»“æ„</li>
<li>åŸåˆ™åï¼šData Locality<ul>
<li>PROCESS_LOCAL data is in the same JVM as the running code. This is the best locality possible</li>
<li>NODE_LOCAL data is on the same node. Examples might be in HDFS on the same node, or in another executor on the same node. This is a little slower than PROCESS_LOCAL because the data has to travel between processes</li>
<li>NO_PREF data is accessed equally quickly from anywhere and has no locality preference</li>
<li>RACK_LOCAL data is on the same rack of servers. Data is on a different server on the same rack so needs to be sent over the network, typically through a single switch</li>
<li>ANY data is elsewhere on the network and not in the same rack</li>
<li>é»˜è®¤å€¼-spark.locality.wait-3s</li>
<li>spark.locality.wait.process-å»ºè®®60s</li>
<li>park.locality.wait.node-å»ºè®®30s</li>
<li>spark.locality.wait.rack-å»ºè®®20s</li>
</ul>
</li>
</ol>
<h2 id="æ•°æ®å€¾æ–œï¼ˆé¢è¯•çš„é‡ç‚¹ï¼‰-ç¾å›¢æŠ€æœ¯åšå®¢"><a href="#æ•°æ®å€¾æ–œï¼ˆé¢è¯•çš„é‡ç‚¹ï¼‰-ç¾å›¢æŠ€æœ¯åšå®¢" class="headerlink" title="æ•°æ®å€¾æ–œï¼ˆé¢è¯•çš„é‡ç‚¹ï¼‰ ç¾å›¢æŠ€æœ¯åšå®¢"></a>æ•°æ®å€¾æ–œï¼ˆé¢è¯•çš„é‡ç‚¹ï¼‰ <span class="exturl" data-url="aHR0cHM6Ly90ZWNoLm1laXR1YW4uY29tL3NwYXJrLXR1bmluZy1wcm8uaHRtbA==" title="https://tech.meituan.com/spark-tuning-pro.html">ç¾å›¢æŠ€æœ¯åšå®¢<i class="fa fa-external-link"></i></span></h2><h3 id="æ•°æ®å€¾æ–œï¼š"><a href="#æ•°æ®å€¾æ–œï¼š" class="headerlink" title="æ•°æ®å€¾æ–œï¼š"></a>æ•°æ®å€¾æ–œï¼š</h3><p>æ•°æ®å€¾æ–œå‘ç”Ÿæ—¶çš„ç°è±¡ï¼š</p>
<ul>
<li>ç»å¤§å¤šæ•°taskæ‰§è¡Œçš„éƒ½éå¸¸å¿«ï¼Œä½†ä¸ªåˆ«taskæ‰§è¡Œææ…¢</li>
<li>åŸæœ¬èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œçš„Sparkä½œä¸šï¼ŒæŸå¤©çªç„¶æŠ¥å‡ºOOMï¼ˆå†…å­˜æº¢å‡ºï¼‰å¼‚å¸¸<br>æ•°æ®å€¾æ–œå‘ç”Ÿçš„æœ€æ ¹æœ¬åŸå› <br>å¦‚ä½•å®šä½å¯¼è‡´æ•°æ®å€¾æ–œçš„ä»£ç ï¼š</li>
<li>shuffleï¼ˆæ‰¾ä»£ç é‡Œé¢å‘ç”Ÿshuffleçš„ç®—å­ï¼‰</li>
<li>stageåˆ’åˆ† ç•Œé¢è§‚å¯Ÿå°±å¯ä»¥å®šä½åˆ°æ˜¯å“ªä¸ªç®—å­å¯¼è‡´çš„æ•°æ®å€¾æ–œ<br>å¦‚ä½•å®šä½åˆ°å“ªä¸ªkeyå¯¼è‡´çš„æ•°æ®å€¾æ–œï¼š</li>
<li>æ–¹å¼ä¸€ï¼š countBykey æœ‰å¯èƒ½å‡ºæ¥ç»“æœï¼Œä½†æ˜¯ä¼šé‡åˆ°æ•°æ®å€¾æ–œ</li>
<li>æ–¹å¼äºŒï¼šsample countBykey</li>
</ul>
<h3 id="æ–¹æ¡ˆè§£å†³ï¼š"><a href="#æ–¹æ¡ˆè§£å†³ï¼š" class="headerlink" title="æ–¹æ¡ˆè§£å†³ï¼š"></a>æ–¹æ¡ˆè§£å†³ï¼š</h3><p>è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨Hive ETLé¢„å¤„ç†æ•°æ®</p>
<ul>
<li>æ–¹æ¡ˆå®ç°æ€è·¯â€”-Hiveå®ç°é¢„å¤„ç†</li>
<li>æ–¹æ¡ˆå®ç°åŸç†â€”-æ•°æ®å€¾æ–œçš„å‘ç”Ÿæå‰åˆ°äº†Hive ETLä¸­ï¼Œé¿å…Sparkç¨‹åºå‘ç”Ÿæ•°æ®å€¾æ–œè€Œå·²</li>
<li>æ–¹æ¡ˆä¼˜ç‚¹â€”â€“å®ç°èµ·æ¥ç®€å•ä¾¿æ·ï¼Œæ•ˆæœè¿˜éå¸¸å¥½ï¼Œå®Œå…¨è§„é¿æ‰äº†æ•°æ®å€¾æ–œï¼ŒSparkä½œä¸šçš„æ€§èƒ½ä¼šå¤§å¹…åº¦æå‡</li>
<li>æ–¹æ¡ˆç¼ºç‚¹â€”â€“æ²»æ ‡ä¸æ²»æœ¬ï¼ŒHive ETLä¸­è¿˜æ˜¯ä¼šå‘ç”Ÿæ•°æ®å€¾æ–œ</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆäºŒï¼šè¿‡æ»¤å°‘é‡å¯¼è‡´å€¾æ–œçš„key</p>
<ul>
<li>æ–¹æ¡ˆå®ç°åŸç†-å°†å¯¼è‡´æ•°æ®å€¾æ–œçš„keyç»™è¿‡æ»¤æ‰ä¹‹åï¼Œè¿™äº›keyå°±ä¸ä¼šå‚ä¸è®¡ç®—äº†ï¼Œè‡ªç„¶ä¸å¯èƒ½äº§ç”Ÿæ•°æ®å€¾æ–œã€‚</li>
<li>æ–¹æ¡ˆä¼˜ç‚¹â€”-å®ç°ç®€å•ï¼Œè€Œä¸”æ•ˆæœä¹Ÿå¾ˆå¥½ï¼Œå¯ä»¥å®Œå…¨è§„é¿æ‰æ•°æ®å€¾æ–œ</li>
<li>æ–¹æ¡ˆç¼ºç‚¹â€”-keyå¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œæ²¡æœ‰å®é™…æ„ä¹‰æ‰è¡Œ</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆä¸‰ï¼šæé«˜shuffleæ“ä½œçš„å¹¶è¡Œåº¦ï¼ˆæ²¡å¤šå¤§ç”¨ï¼‰</p>
<ul>
<li>æ–¹æ¡ˆä¼˜ç‚¹â€”-å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥æœ‰æ•ˆç¼“è§£å’Œå‡è½»æ•°æ®å€¾æ–œçš„å½±å“</li>
<li>æ–¹æ¡ˆç¼ºç‚¹â€”-åªæ˜¯ç¼“è§£äº†æ•°æ®å€¾æ–œè€Œå·²ï¼Œæ²¡æœ‰å½»åº•æ ¹é™¤é—®é¢˜ï¼Œæ ¹æ®å®è·µç»éªŒæ¥çœ‹ï¼Œå…¶æ•ˆæœæœ‰é™ã€‚</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆå››ï¼šä¸¤é˜¶æ®µèšåˆï¼ˆå±€éƒ¨èšåˆ+å…¨å±€èšåˆï¼‰</p>
<ul>
<li>æ–¹æ¡ˆå®ç°åŸç†â€”-å°†åŸæœ¬ç›¸åŒçš„keyé€šè¿‡é™„åŠ éšæœºå‰ç¼€çš„æ–¹å¼ï¼Œå˜æˆå¤šä¸ªä¸åŒçš„keyï¼Œå°±å¯ä»¥è®©åŸæœ¬è¢«ä¸€ä¸ªtaskå¤„ç†çš„æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªtaskä¸Šå»åšå±€éƒ¨èšåˆï¼Œè¿›è€Œè§£å†³å•ä¸ªtaskå¤„ç†æ•°æ®é‡è¿‡å¤šçš„é—®é¢˜ã€‚æ¥ç€å»é™¤æ‰éšæœºå‰ç¼€ï¼Œå†æ¬¡è¿›è¡Œå…¨å±€èšåˆï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚</li>
<li>æ–¹æ¡ˆä¼˜ç‚¹â€”-å¯¹äºèšåˆç±»çš„shuffleæ“ä½œå¯¼è‡´çš„æ•°æ®å€¾æ–œï¼Œæ•ˆæœæ˜¯éå¸¸ä¸é”™çš„ã€‚é€šå¸¸éƒ½å¯ä»¥è§£å†³æ‰æ•°æ®å€¾æ–œï¼Œæˆ–è€…è‡³å°‘æ˜¯å¤§å¹…åº¦ç¼“è§£æ•°æ®å€¾æ–œï¼Œå°†Sparkä½œä¸šçš„æ€§èƒ½æå‡æ•°å€ä»¥ä¸Šã€‚</li>
<li>æ–¹æ¡ˆç¼ºç‚¹â€”-ä»…ä»…é€‚ç”¨äºèšåˆç±»çš„shuffleæ“ä½œâ€”-groupBykeyï¼Œjoinç±»çš„shuffleæ“ä½œ</li>
</ul>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hiveç¯å¢ƒæ­å»º]]></title>
      <url>/Hive%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html</url>
      <content type="html"><![CDATA[<h2 id="Hiveå®‰è£…"><a href="#Hiveå®‰è£…" class="headerlink" title="Hiveå®‰è£…"></a>Hiveå®‰è£…</h2><h3 id="å†…åµŒDervyç‰ˆæœ¬"><a href="#å†…åµŒDervyç‰ˆæœ¬" class="headerlink" title="å†…åµŒDervyç‰ˆæœ¬"></a>å†…åµŒDervyç‰ˆæœ¬</h3><ol>
<li>ä¸Šä¼ å®‰è£…åŒ… apache-hive-2.3.2-bin.tar.gz </li>
<li>è§£å‹å®‰è£…åŒ… tar  -zxvf  apache-hive-2.3.2-bin.tar.gz  -C  /home/hadoop/apps/ </li>
<li>è¿›å…¥åˆ° bin ç›®å½•ï¼Œè¿è¡Œ hive è„šæœ¬ï¼š[hadoop@hadoop02 bin]$ ./hive<br>æ³¨æ„ï¼š è¿™æ—¶å€™ä¸€èˆ¬ä¼šæŠ¥é”™ï¼šTerminal initialization failed; falling back to unsupportedï¼Œæ˜¯å› ä¸º hadoopï¼ˆ/root/apps/hadoop-2.6.5/share/hadoop/yarn/libï¼‰é›†ç¾¤çš„ jline-0.9.94.jar åŒ…ç‰ˆæœ¬ è¿‡ä½ï¼Œæ›¿æ¢æˆ hive/lib ä¸­çš„ jline-2.12.jar åŒ…å³å¯ã€‚è®°ä½ï¼šæ‰€æœ‰ hdfs èŠ‚ç‚¹éƒ½å¾—æ›¿æ¢ hadoop-2.6.5/share/hadoop/yarn/lib/jline-0.9.4.jar æ›¿æ¢æˆ jline-2.12.jar å¦‚æœæŠ¥é”™å°±æŒ‰ç…§æ­¤æ–¹å¼è§£å†³ï¼Œæ²¡æœ‰æŠ¥é”™å°±ä¸ç”¨ç®¡ï¼Œåœ¨ä½¿ç”¨æ–°çš„ hadoop-2.7.5 ç‰ˆæœ¬ä¸­å·²ç»ä¸ å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚æ‰€ä»¥ä¸ç”¨å…³æ³¨ã€‚ <a id="more"></a>
<h3 id="å¤–ç½®-MySQL-ç‰ˆæœ¬"><a href="#å¤–ç½®-MySQL-ç‰ˆæœ¬" class="headerlink" title="å¤–ç½® MySQL ç‰ˆæœ¬"></a>å¤–ç½® MySQL ç‰ˆæœ¬</h3></li>
<li>å‡†å¤‡å¥½ MySQLï¼ˆè¯·å‚è€ƒä»¥ä¸‹æ–‡æ¡£ï¼Œæˆ–è€…è‡ªè¡Œå®‰è£… MySQLï¼Œæˆ–è€…ä¸€ä¸ªå¯ç”¨çš„ MySQLï¼‰ </li>
<li>ä¸Šä¼ å®‰è£…åŒ… apache-hive-2.3.2-bin.tar.gz </li>
<li>è§£å‹å®‰è£…åŒ… tar  -zxvf  apache-hive-2.3.2-bin.tar.gz  -c  ~/apps/ </li>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶ <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop02 conf]# touch  hive-site.xml     </span><br><span class="line">[hadoop@hadoop02 conf]# vi  hive-site.xml </span><br><span class="line">`</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://localhost:3306/hive_metastore_232?createDatabaseIfNotExist=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">description</span>&gt;</span>JDBC connect string for a JDBC metastore<span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line">		<span class="comment">&lt;!-- å¦‚æœ mysql å’Œ hive åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯·æ›´æ”¹ hadoop02 ä¸º localhost  --&gt;</span> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"> </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">description</span>&gt;</span>Driver class name for a JDBC metastore<span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">description</span>&gt;</span>username to use against metastore database<span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">description</span>&gt;</span>password to use against metastore database<span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯é€‰é…ç½®ï¼Œè¯¥é…ç½®ä¿¡æ¯ç”¨æ¥æŒ‡å®š Hive æ•°æ®ä»“åº“çš„æ•°æ®å­˜å‚¨åœ¨ HDFS ä¸Šçš„ç›®å½•<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/myhive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">description</span>&gt;</span>hive default warehouse, if nessecory, change it<span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<ol>
<li>ä¸€å®šè¦è®°å¾—åŠ å…¥ MySQL é©±åŠ¨åŒ…ï¼ˆmysql-connector-java-5.1.40-bin.jarï¼‰ è¯¥ jar åŒ…æ”¾ç½®åœ¨ hive çš„æ ¹è·¯å¾„ä¸‹çš„ lib ç›®å½• </li>
<li>å®‰è£…å®Œæˆï¼Œé…ç½®ç¯å¢ƒå˜é‡ <pre><code> vi ~/.bashrc  æ·»åŠ ä»¥ä¸‹ä¸¤è¡Œå†…å®¹ï¼š
export HIVE_HOME=/home/hadoop/apps/apache-hive-2.3.2-bin 
export PATH=$PATH:$HIVE_HOME/bin ä¿å­˜é€€å‡ºã€‚ 
æœ€åä¸è¦å¿˜è®°ï¼š[hadoop@hadoop02 bin]$ source  ~/.bashrc 
</code></pre></li>
<li>éªŒè¯ Hive å®‰è£…ï¼Œæ‰§è¡Œå‘½ä»¤hive â€“help</li>
<li><p>åˆå§‹åŒ–å…ƒæ•°æ®åº“<br>æ³¨æ„ï¼šå½“ä½¿ç”¨çš„ hive æ˜¯ 2.x ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œä¸åšåˆå§‹åŒ–ä¹Ÿæ˜¯ OK çš„ï¼Œå½“ hive ç¬¬ä¸€æ¬¡å¯åŠ¨çš„ æ—¶å€™ä¼šè‡ªåŠ¨è¿›è¡Œåˆå§‹åŒ–ï¼Œåªä¸è¿‡ä¼šä¸ä¼šç”Ÿæˆè¶³å¤Ÿå¤šçš„å…ƒæ•°æ®åº“ä¸­çš„è¡¨ã€‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼š æ…¢æ…¢ç”Ÿæˆã€‚ä½†æœ€åè¿›è¡Œåˆå§‹åŒ–ã€‚å¦‚æœä½¿ç”¨çš„ 2.x ç‰ˆæœ¬çš„ Hiveï¼Œé‚£ä¹ˆå°±å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–å…ƒ æ•°æ®åº“ã€‚ä½¿ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop02 bin]$ schematool  -dbType  mysql  -initSchema</span><br></pre></td></tr></table></figure>
<ol>
<li>å¯åŠ¨ Hive å®¢æˆ·ç«¯ <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop02 bin]$ hive --service cli</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>é€€å‡º Hive </p>
<h2 id="Linux-RPM-æ–¹å¼å®‰è£…-MySQL"><a href="#Linux-RPM-æ–¹å¼å®‰è£…-MySQL" class="headerlink" title="Linux RPM æ–¹å¼å®‰è£… MySQL"></a>Linux RPM æ–¹å¼å®‰è£… MySQL</h2><p><strong>ï¼ˆè®°å¾—ä½¿ç”¨ root è´¦æˆ·è¿›è¡Œæ“ä½œï¼Œè‹¥ä½¿ç”¨æ™®é€šç”¨æˆ·ï¼Œé‚£ä¹ˆè¯·ä¿®æ”¹ç›¸åº”æ–‡ä»¶å¤¹æƒé™ï¼‰ </strong></p>
</li>
<li><p>æ£€æŸ¥ä»¥å‰æ˜¯å¦è£…è¿‡ MySQL </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep -i mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‘ç°æœ‰çš„è¯å°±éƒ½å¸è½½ </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps  ........</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤è€ç‰ˆæœ¬ mysql çš„å¼€å‘å¤´æ–‡ä»¶å’Œåº“ </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rm -fr /usr/lib/mysql     </span><br><span class="line"><span class="meta">#</span>æ•°æ®åº“ç›®å½•</span><br><span class="line"> rm -fr /usr/include/mysql       </span><br><span class="line"> rm -f /etc/my.cnf </span><br><span class="line"> rm -fr /var/lib/mysql </span><br><span class="line"> æ³¨æ„ï¼šå¸è½½å/var/lib/mysql ä¸­çš„æ•°æ®åŠ/etc/my.cnf ä¸ä¼šåˆ é™¤ï¼Œç¡®å®šæ²¡ç”¨åå°±æ‰‹å·¥åˆ é™¤</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‡†å¤‡å®‰è£…åŒ… MySQL-5.6.26-1.linux_glibc2.5.x86_64.rpm-bundle.tarï¼Œ ä¸Šä¼ ï¼Œè§£å‹ å‘½ä»¤ï¼štar -zxvf MySQL-5.6.26-1.linux_glibc2.5.x86_64.rpm-bundle.tar </p>
</li>
<li>å¼€å§‹å®‰è£… </li>
<li>å®‰è£… server  rpm -ivh MySQL-server-5.6.26-1.linux_glibc2.5.x86_64.rpm </li>
<li>å®‰è£…å®¢æˆ·ç«¯ rpm -ivh MySQL-client-5.6.26-1.linux_glibc2.5.x86_64.rpm </li>
<li>ç™»é™† MYSQLï¼ˆç™»å½•ä¹‹å‰åƒä¸‡è®°å¾—ä¸€å®šè¦å¯åŠ¨ mysql æœåŠ¡ï¼‰ å¯åŠ¨å‘½ä»¤ï¼š [hadoop@hadoop01 ~]$ service mysql start<br>ç„¶åç™»é™†ï¼Œåˆå§‹å¯†ç åœ¨ /root/.mysql_secret è¿™ä¸ªæ–‡ä»¶é‡Œ </li>
<li>ä¿®æ”¹å¯†ç  set PASSWORD=PASSWORD(â€˜rootâ€™); </li>
<li>é€€å‡ºç™»é™†éªŒè¯ï¼Œçœ‹æ˜¯å¦æ”¹å¯†ç æˆåŠŸ </li>
<li><p>å¢åŠ è¿œç¨‹ç™»é™†æƒé™ï¼Œæ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;root&apos; WITH GRANT OPTION;  </span><br><span class="line">mysql&gt;FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤é‡Šä¹‰ï¼šgrant æƒé™ 1,æƒé™ 2,â€æƒé™ n on æ•°æ®åº“åç§°.è¡¨åç§° to ç”¨æˆ·å@ç”¨æˆ·åœ°å€ identified by â€˜å¯†ç â€™; </p>
</li>
</ol>
<p>PSï¼š1,æƒé™ 2,â€æƒé™ n ä»£è¡¨ selectï¼Œinsertï¼Œupdateï¼Œdeleteï¼Œcreateï¼Œdropï¼Œindexï¼Œalterï¼Œgrantï¼Œ referencesï¼Œreloadï¼Œshutdownï¼Œprocessï¼Œfile ç­‰ 14 ä¸ªæƒé™ã€‚ å½“æƒé™ 1,æƒé™ 2,â€æƒé™ n è¢« all privileges æˆ–è€… all ä»£æ›¿ï¼Œè¡¨ç¤ºèµ‹äºˆç”¨æˆ·å…¨éƒ¨æƒé™ã€‚ å½“æ•°æ®åº“åç§°.è¡¨åç§°è¢«<em>.</em>ä»£æ›¿ï¼Œè¡¨ç¤ºèµ‹äºˆç”¨æˆ·æ“ä½œæœåŠ¡å™¨ä¸Šæ‰€æœ‰æ•°æ®åº“æ‰€æœ‰è¡¨çš„æƒé™ã€‚ ç”¨æˆ·åœ°å€å¯ä»¥æ˜¯ localhostï¼Œä¹Ÿå¯ä»¥æ˜¯ ip åœ°å€ã€æœºå™¨åå­—ã€åŸŸåã€‚ä¹Ÿå¯ä»¥ç”¨â€™%â€™åœ°å€è¿æ¥ã€‚ </p>
<ol>
<li>è‡³æ­¤ mysql å®‰è£…æˆåŠŸ </li>
<li>æ›´æ”¹æ•°æ®åº“çš„é»˜è®¤ç¼–ç ä¸º UTF-8 </li>
</ol>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[Hiveæ•°æ®å­˜å‚¨]]></title>
      <url>/Hive%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8.html</url>
      <content type="html"><![CDATA[<ol>
<li>ã€Hive çš„å­˜å‚¨ç»“æ„åŒ…æ‹¬æ•°æ®åº“ã€è¡¨ã€è§†å›¾ã€åˆ†åŒºå’Œè¡¨æ•°æ®ç­‰ã€‚æ•°æ®åº“ï¼Œè¡¨ï¼Œåˆ†åŒºç­‰ç­‰éƒ½å¯¹ åº” HDFS ä¸Šçš„ä¸€ä¸ªç›®å½•ã€‚è¡¨æ•°æ®å¯¹åº” HDFS å¯¹åº”ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚ </li>
<li>Hive ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½å­˜å‚¨åœ¨ HDFS ä¸­ï¼Œæ²¡æœ‰ä¸“é—¨çš„æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œå› ä¸º Hive æ˜¯è¯»æ¨¡å¼ ï¼ˆSchema On Readï¼‰ ï¼Œå¯æ”¯æŒ TextFileï¼ŒSequenceFileï¼ŒRCFile æˆ–è€…è‡ªå®šä¹‰æ ¼å¼ç­‰ <a id="more"></a></li>
<li>åªéœ€è¦åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å‘Šè¯‰ Hive æ•°æ®ä¸­çš„åˆ—åˆ†éš”ç¬¦å’Œè¡Œåˆ†éš”ç¬¦ï¼ŒHive å°±å¯ä»¥è§£ææ•°æ® Hive çš„é»˜è®¤åˆ—åˆ†éš”ç¬¦ï¼šæ§åˆ¶ç¬¦ Ctrl + Aï¼Œ\x01 Hive çš„é»˜è®¤è¡Œåˆ†éš”ç¬¦ï¼šæ¢è¡Œç¬¦ \n </li>
<li>ã€Hive ä¸­åŒ…å«ä»¥ä¸‹æ•°æ®æ¨¡å‹ï¼š <ul>
<li><strong>database</strong>ï¼šåœ¨ HDFS ä¸­è¡¨ç°ä¸º${hive.metastore.warehouse.dir}ç›®å½•ä¸‹ä¸€ä¸ªæ–‡ä»¶å¤¹</li>
<li>tableï¼šåœ¨ HDFS ä¸­è¡¨ç°æ‰€å± database ç›®å½•ä¸‹ä¸€ä¸ªæ–‡ä»¶å¤¹ </li>
<li><strong>external table</strong>ï¼šä¸ table ç±»ä¼¼ï¼Œä¸è¿‡å…¶æ•°æ®å­˜æ”¾ä½ç½®å¯ä»¥æŒ‡å®šä»»æ„ HDFS ç›®å½•è·¯å¾„ </li>
<li>partitionï¼šåœ¨ HDFS ä¸­è¡¨ç°ä¸º table ç›®å½•ä¸‹çš„å­ç›®å½• </li>
<li>bucketï¼šåœ¨ HDFS ä¸­è¡¨ç°ä¸ºåŒä¸€ä¸ªè¡¨ç›®å½•æˆ–è€…åˆ†åŒºç›®å½•ä¸‹æ ¹æ®æŸä¸ªå­—æ®µçš„å€¼è¿›è¡Œ hash æ•£ åˆ—ä¹‹åçš„å¤šä¸ªæ–‡ä»¶</li>
<li>viewï¼šä¸ä¼ ç»Ÿæ•°æ®åº“ç±»ä¼¼ï¼Œåªè¯»ï¼ŒåŸºäºåŸºæœ¬è¡¨åˆ›å»º </li>
</ul>
</li>
<li>Hive çš„å…ƒæ•°æ®å­˜å‚¨åœ¨ RDBMS ä¸­ï¼Œé™¤å…ƒæ•°æ®å¤–çš„å…¶å®ƒæ‰€æœ‰æ•°æ®éƒ½åŸºäº HDFS å­˜å‚¨ã€‚é»˜è®¤æƒ… å†µä¸‹ï¼ŒHive å…ƒæ•°æ®ä¿å­˜åœ¨å†…åµŒçš„ Derby æ•°æ®åº“ä¸­ï¼Œåªèƒ½å…è®¸ä¸€ä¸ªä¼šè¯è¿æ¥ï¼Œåªé€‚åˆç®€å•çš„ æµ‹è¯•ã€‚å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä¸é€‚ç”¨ï¼Œä¸ºäº†æ”¯æŒå¤šç”¨æˆ·ä¼šè¯ï¼Œåˆ™éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„å…ƒæ•°æ®åº“ï¼Œä½¿ç”¨ MySQL ä½œä¸ºå…ƒæ•°æ®åº“ï¼ŒHive å†…éƒ¨å¯¹ MySQL æä¾›äº†å¾ˆå¥½çš„æ”¯æŒ</li>
<li>Hive ä¸­çš„è¡¨åˆ†ä¸º <strong>å†…éƒ¨è¡¨</strong>ã€ <strong>å¤–éƒ¨è¡¨</strong>ã€ <strong>åˆ†åŒºè¡¨</strong>  å’Œ   <strong>Bucketè¡¨</strong><h3 id="å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼š"><a href="#å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼š" class="headerlink" title="å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼š"></a>å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼š</h3>åˆ é™¤å†…éƒ¨è¡¨ï¼Œåˆ é™¤è¡¨å…ƒæ•°æ®å’Œæ•°æ®  åˆ é™¤å¤–éƒ¨è¡¨ï¼Œåˆ é™¤å…ƒæ•°æ®ï¼Œä¸åˆ é™¤æ•°æ® <h3 id="å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„ä½¿ç”¨é€‰æ‹©ï¼š"><a href="#å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„ä½¿ç”¨é€‰æ‹©ï¼š" class="headerlink" title="å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„ä½¿ç”¨é€‰æ‹©ï¼š"></a>å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„ä½¿ç”¨é€‰æ‹©ï¼š</h3>å¤§å¤šæ•°æƒ…å†µï¼Œä»–ä»¬çš„åŒºåˆ«ä¸æ˜æ˜¾ï¼Œå¦‚æœæ•°æ®çš„æ‰€æœ‰å¤„ç†éƒ½åœ¨ Hive ä¸­è¿›è¡Œï¼Œé‚£ä¹ˆå€¾å‘äº é€‰æ‹©å†…éƒ¨è¡¨ï¼Œä½†æ˜¯å¦‚æœ Hive å’Œå…¶ä»–å·¥å…·è¦é’ˆå¯¹ç›¸åŒçš„æ•°æ®é›†è¿›è¡Œå¤„ç†ï¼Œå¤–éƒ¨è¡¨æ›´åˆé€‚ã€‚<br>ä½¿ç”¨å¤–éƒ¨è¡¨è®¿é—®å­˜å‚¨åœ¨ HDFS ä¸Šçš„åˆå§‹æ•°æ®ï¼Œç„¶åé€šè¿‡ Hive è½¬æ¢æ•°æ®å¹¶å­˜åˆ°å†…éƒ¨è¡¨ä¸­<br>ä½¿ç”¨å¤–éƒ¨è¡¨çš„åœºæ™¯æ˜¯é’ˆå¯¹ä¸€ä¸ªæ•°æ®é›†æœ‰å¤šä¸ªä¸åŒçš„ Schema<br>é€šè¿‡å¤–éƒ¨è¡¨å’Œå†…éƒ¨è¡¨çš„åŒºåˆ«å’Œä½¿ç”¨é€‰æ‹©çš„å¯¹æ¯”å¯ä»¥çœ‹å‡ºæ¥ï¼Œhive å…¶å®ä»…ä»…åªæ˜¯å¯¹å­˜å‚¨åœ¨ HDFS ä¸Šçš„æ•°æ®æä¾›äº†ä¸€ç§æ–°çš„æŠ½è±¡ã€‚è€Œä¸æ˜¯ç®¡ç†å­˜å‚¨åœ¨ HDFS ä¸Šçš„æ•°æ®ã€‚æ‰€ä»¥ä¸ç®¡åˆ›å»ºå†…éƒ¨ è¡¨è¿˜æ˜¯å¤–éƒ¨è¡¨ï¼Œéƒ½å¯ä»¥å¯¹ hive è¡¨çš„æ•°æ®å­˜å‚¨ç›®å½•ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ“ä½œã€‚ <h3 id="åˆ†åŒºè¡¨å’Œåˆ†æ¡¶è¡¨çš„åŒºåˆ«ï¼š"><a href="#åˆ†åŒºè¡¨å’Œåˆ†æ¡¶è¡¨çš„åŒºåˆ«ï¼š" class="headerlink" title="åˆ†åŒºè¡¨å’Œåˆ†æ¡¶è¡¨çš„åŒºåˆ«ï¼š"></a>åˆ†åŒºè¡¨å’Œåˆ†æ¡¶è¡¨çš„åŒºåˆ«ï¼š</h3>Hive æ•°æ®è¡¨å¯ä»¥æ ¹æ®æŸäº›å­—æ®µè¿›è¡Œåˆ†åŒºæ“ä½œï¼Œç»†åŒ–æ•°æ®ç®¡ç†ï¼Œå¯ä»¥è®©éƒ¨åˆ†æŸ¥è¯¢æ›´å¿«ã€‚åŒ æ—¶è¡¨å’Œåˆ†åŒºä¹Ÿå¯ä»¥è¿›ä¸€æ­¥è¢«åˆ’åˆ†ä¸º Bucketsï¼Œåˆ†æ¡¶è¡¨çš„åŸç†å’Œ MapReduce ç¼–ç¨‹ä¸­çš„ HashPartitioner çš„åŸç†ç±»ä¼¼<br>åˆ†åŒºå’Œåˆ†æ¡¶éƒ½æ˜¯ç»†åŒ–æ•°æ®ç®¡ç†ï¼Œä½†æ˜¯åˆ†åŒºè¡¨æ˜¯æ‰‹åŠ¨æ·»åŠ åŒºåˆ†ï¼Œç”±äº Hive æ˜¯è¯»æ¨¡å¼ï¼Œæ‰€ ä»¥å¯¹æ·»åŠ è¿›åˆ†åŒºçš„æ•°æ®ä¸åšæ¨¡å¼æ ¡éªŒï¼Œåˆ†æ¡¶è¡¨ä¸­çš„æ•°æ®æ˜¯æŒ‰ç…§æŸäº›åˆ†æ¡¶å­—æ®µè¿›è¡Œ hash æ•£åˆ— å½¢æˆçš„å¤šä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥æ•°æ®çš„å‡†ç¡®æ€§ä¹Ÿé«˜å¾ˆå¤š </li>
</ol>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Hive </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hiveæ¶æ„]]></title>
      <url>/Hive%E6%9E%B6%E6%9E%84.html</url>
      <content type="html"><![CDATA[<p><img src="http://ou3xxg3hg.bkt.clouddn.com/HIve%E6%9E%B6%E6%9E%84.png" alt=""><br><a id="more"></a></p>
<h2 id="åŸºæœ¬ç»„æˆ"><a href="#åŸºæœ¬ç»„æˆ" class="headerlink" title="åŸºæœ¬ç»„æˆ"></a>åŸºæœ¬ç»„æˆ</h2><h3 id="ç”¨æˆ·æ¥å£"><a href="#ç”¨æˆ·æ¥å£" class="headerlink" title="ç”¨æˆ·æ¥å£"></a>ç”¨æˆ·æ¥å£</h3><ul>
<li>CLIï¼ŒShell ç»ˆç«¯å‘½ä»¤è¡Œï¼ˆCommand Line Interfaceï¼‰ï¼Œé‡‡ç”¨äº¤äº’å½¢å¼ä½¿ç”¨ Hive å‘½ä»¤è¡Œä¸ Hive è¿›è¡Œäº¤äº’ï¼Œæœ€å¸¸ç”¨ï¼ˆå­¦ä¹ ï¼Œè°ƒè¯•ï¼Œç”Ÿäº§ï¼‰  </li>
<li>JDBC/ODBCï¼Œæ˜¯ Hive çš„åŸºäº JDBC æ“ä½œæä¾›çš„å®¢æˆ·ç«¯ï¼Œç”¨æˆ·ï¼ˆå¼€å‘å‘˜ï¼Œè¿ç»´äººå‘˜ï¼‰é€šè¿‡ è¿™è¿æ¥è‡³ Hive server æœåŠ¡  </li>
<li>Web UIï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—® Hive <h3 id="Thrift-Server"><a href="#Thrift-Server" class="headerlink" title="Thrift Server"></a>Thrift Server</h3>Thrift æ˜¯ Facebook å¼€å‘çš„ä¸€ä¸ªè½¯ä»¶æ¡†æ¶ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œå¯æ‰©å±•ä¸”è·¨è¯­è¨€çš„æœåŠ¡çš„å¼€å‘ï¼Œ Hive é›†æˆäº†è¯¥æœåŠ¡ï¼Œèƒ½è®©ä¸åŒçš„ç¼–ç¨‹è¯­è¨€è°ƒç”¨ Hive çš„æ¥å£ <h3 id="å…ƒæ•°æ®å­˜å‚¨"><a href="#å…ƒæ•°æ®å­˜å‚¨" class="headerlink" title="å…ƒæ•°æ®å­˜å‚¨"></a>å…ƒæ•°æ®å­˜å‚¨</h3></li>
<li><strong>å…ƒæ•°æ®</strong>ï¼Œé€šä¿—çš„è®²ï¼Œå°±æ˜¯å­˜å‚¨åœ¨ Hive ä¸­çš„æ•°æ®çš„æè¿°ä¿¡æ¯ã€‚ </li>
<li>Hive ä¸­çš„å…ƒæ•°æ®é€šå¸¸åŒ…æ‹¬ï¼šè¡¨çš„åå­—ï¼Œè¡¨çš„åˆ—å’Œåˆ†åŒºåŠå…¶å±æ€§ï¼Œè¡¨çš„å±æ€§ï¼ˆå†…éƒ¨è¡¨å’Œ å¤–éƒ¨è¡¨ï¼‰ï¼Œè¡¨çš„æ•°æ®æ‰€åœ¨ç›®å½•  </li>
<li>Metastore é»˜è®¤å­˜åœ¨è‡ªå¸¦çš„ Derby æ•°æ®åº“ä¸­ã€‚ç¼ºç‚¹å°±æ˜¯ä¸é€‚åˆå¤šç”¨æˆ·æ“ä½œï¼Œå¹¶ä¸”æ•°æ®å­˜ å‚¨ç›®å½•ä¸å›ºå®šã€‚æ•°æ®åº“è·Ÿç€ Hive èµ°ï¼Œæåº¦ä¸æ–¹ä¾¿ç®¡ç†  </li>
<li>è§£å†³æ–¹æ¡ˆï¼šé€šå¸¸å­˜æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ MySQL åº“ï¼ˆæœ¬åœ° æˆ– è¿œç¨‹ï¼‰  </li>
<li>Hive å’Œ MySQL ä¹‹é—´é€šè¿‡ MetaStore æœåŠ¡äº¤äº’ <h3 id="Driverï¼šç¼–è¯‘å™¨ï¼ˆCompilerï¼‰ï¼Œä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰ï¼Œæ‰§è¡Œå™¨ï¼ˆExecutorï¼‰"><a href="#Driverï¼šç¼–è¯‘å™¨ï¼ˆCompilerï¼‰ï¼Œä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰ï¼Œæ‰§è¡Œå™¨ï¼ˆExecutorï¼‰" class="headerlink" title="Driverï¼šç¼–è¯‘å™¨ï¼ˆCompilerï¼‰ï¼Œä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰ï¼Œæ‰§è¡Œå™¨ï¼ˆExecutorï¼‰"></a>Driverï¼šç¼–è¯‘å™¨ï¼ˆCompilerï¼‰ï¼Œä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰ï¼Œæ‰§è¡Œå™¨ï¼ˆExecutorï¼‰</h3></li>
<li>Driver ç»„ä»¶å®Œæˆ HQL æŸ¥è¯¢è¯­å¥ä»è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼Œç¼–è¯‘ï¼Œä¼˜åŒ–ï¼Œä»¥åŠç”Ÿæˆé€»è¾‘æ‰§è¡Œ è®¡åˆ’çš„ç”Ÿæˆã€‚ç”Ÿæˆçš„é€»è¾‘æ‰§è¡Œè®¡åˆ’å­˜å‚¨åœ¨ HDFS ä¸­ï¼Œå¹¶éšåç”± MapReduce è°ƒç”¨æ‰§è¡Œ </li>
<li>Hive çš„æ ¸å¿ƒæ˜¯é©±åŠ¨å¼•æ“ï¼Œ é©±åŠ¨å¼•æ“ç”±å››éƒ¨åˆ†ç»„æˆï¼š <pre><code>(1) è§£é‡Šå™¨ï¼šè§£é‡Šå™¨çš„ä½œç”¨æ˜¯å°† HiveSQL è¯­å¥è½¬æ¢ä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰
(2) ç¼–è¯‘å™¨ï¼šç¼–è¯‘å™¨æ˜¯å°†è¯­æ³•æ ‘ç¼–è¯‘ä¸ºé€»è¾‘æ‰§è¡Œè®¡åˆ’
(3) ä¼˜åŒ–å™¨ï¼šä¼˜åŒ–å™¨æ˜¯å¯¹é€»è¾‘æ‰§è¡Œè®¡åˆ’è¿›è¡Œä¼˜åŒ–
(4) æ‰§è¡Œå™¨ï¼šæ‰§è¡Œå™¨æ˜¯è°ƒç”¨åº•å±‚çš„è¿è¡Œæ¡†æ¶æ‰§è¡Œé€»è¾‘æ‰§è¡Œè®¡åˆ’     
</code></pre><h3 id="æ‰§è¡Œæµç¨‹"><a href="#æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‰§è¡Œæµç¨‹"></a>æ‰§è¡Œæµç¨‹</h3>HiveQL é€šè¿‡å‘½ä»¤è¡Œæˆ–è€…å®¢æˆ·ç«¯æäº¤ï¼Œç»è¿‡ Compiler ç¼–è¯‘å™¨ï¼Œè¿ç”¨ MetaStore ä¸­çš„å…ƒæ•° æ®è¿›è¡Œç±»å‹æ£€æµ‹å’Œè¯­æ³•åˆ†æï¼Œç”Ÿæˆä¸€ä¸ªé€»è¾‘æ–¹æ¡ˆ(Logical Plan)ï¼Œç„¶åé€šè¿‡çš„ä¼˜åŒ–å¤„ç†ï¼Œäº§ç”Ÿ ä¸€ä¸ª MapReduce ä»»åŠ¡ã€‚</li>
</ul>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Hive </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HiveåŸºæœ¬æ¦‚å¿µ]]></title>
      <url>/Hive%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html</url>
      <content type="html"><![CDATA[<h2 id="Hiveçš„åŸºæœ¬æ¦‚å¿µ"><a href="#Hiveçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="Hiveçš„åŸºæœ¬æ¦‚å¿µ"></a>Hiveçš„åŸºæœ¬æ¦‚å¿µ</h2><ol>
<li>å¼€å‘è€…: Facebookå®ç°å¹¶å¼€æº</li>
<li>ä½œç”¨: åŸºäºHadoopçš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œå¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›HQL(Hive SQL)æŸ¥è¯¢åŠŸèƒ½ï¼Œåº•å±‚æ•°æ®æ˜¯å­˜å‚¨åœ¨HDFSä¸Šã€‚</li>
<li>æœ¬è´¨: å°†SQLè¯­å¥è½¬æ¢ä¸ºMapReduceä»»åŠ¡è¿è¡Œï¼Œä½¿ä¸ç†Ÿæ‚‰Mapreduceçš„ç”¨æˆ·å¾ˆæ–¹ä¾¿åœ°åˆ©ç”¨HQLå¤„ç†å’Œè®¡ç®—HDFSä¸Šçš„ç»“æ„åŒ–çš„æ•°æ®ï¼Œä½¿ç”¨äºç¦»çº¿çš„æ‰¹é‡æ•°æ®è®¡ç®—ã€‚<a id="more"></a>
<strong>Hive ä¾èµ–äº HDFS å­˜å‚¨æ•°æ®ï¼ŒHive å°† HQL è½¬æ¢æˆ MapReduce æ‰§è¡Œ æ‰€ä»¥è¯´ Hive æ˜¯åŸºäº Hadoop çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œå®è´¨å°±æ˜¯ä¸€æ¬¾åŸºäº HDFS çš„ MapReduce è®¡ç®—æ¡†æ¶ï¼Œå¯¹å­˜å‚¨åœ¨ HDFS ä¸­çš„æ•°æ®è¿›è¡Œåˆ†æå’Œç®¡ç† </strong><h2 id="hbase-å’Œ-hive-çš„åŒºåˆ«"><a href="#hbase-å’Œ-hive-çš„åŒºåˆ«" class="headerlink" title="hbase å’Œ hive çš„åŒºåˆ«"></a>hbase å’Œ hive çš„åŒºåˆ«</h2> hbaseï¼š  æ•°æ®åº“<br> hive : æ•°æ®ä»“åº“<br> åŒºåˆ«ï¼š<pre><code>1ã€æ•°æ®åº“ï¼Œå¯¹äºæ•°æ®ä¼šåšç²¾ç»†åŒ–çš„ç®¡ç†ï¼Œå…·æœ‰äº‹åŠ¡çš„æ¦‚å¿µ
   æ•°æ®ä»“åº“ï¼Œå­˜å‚¨æ•°æ®çš„æ ¼å¼å°±ç±»ä¼¼æ‰“åŒ…ï¼Œæ²¡æœ‰äº‹åŠ¡çš„æ¦‚å¿µ
2ã€æ“ä½œæ–¹å¼çš„åŒºåˆ«ï¼š
   æ•°æ®åº“ï¼šNoSQLè¯­æ³•  put get scan delele
   æ•°æ®ä»“åº“: SQLæ–¹è¨€ Hiveçš„SQL ===  HQL     hibernate:HQL
3ã€ç”¨é€”çš„åŒºåˆ«ï¼š
   æ•°æ®åº“ï¼šOLTP  è”æœºäº‹åŠ¡å¤„ç†   å¢åˆ æ”¹
   æ•°æ®ä»“åº“ï¼š OLAP   è”æœºåˆ†æå¤„ç†   æŸ¥è¯¢
   hiveæ˜¯æ•°æ®ä»“åº“ï¼Œå®ƒæ ¹æœ¬å°±ä¸æ”¯æŒ updateå’Œdelete   ä½†æ˜¯æ”¯æŒinsert
4ã€æ¨¡å¼ä¸Šçš„åŒºåˆ«
    æ•°æ®åº“ï¼š å†™æ¨¡å¼    hbaseæ— ä¸¥æ ¼æ¨¡å¼ ï¼š ä»…æœ‰çš„æ¨¡å¼æ ¡éªŒåªæœ‰ è¡¨åå’Œåˆ—ç°‡çš„åç§°
    æ•°æ®ä»“åº“ï¼š  è¯»æ¨¡å¼
</code></pre><h2 id="Hiveçš„ç‰¹ç‚¹"><a href="#Hiveçš„ç‰¹ç‚¹" class="headerlink" title="Hiveçš„ç‰¹ç‚¹"></a>Hiveçš„ç‰¹ç‚¹</h2><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3></li>
<li>å¯æ‰©å±•æ€§,æ¨ªå‘æ‰©å±•ï¼ŒHive å¯ä»¥è‡ªç”±çš„æ‰©å±•é›†ç¾¤çš„è§„æ¨¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦é‡å¯æœåŠ¡ æ¨ªå‘æ‰©å±•ï¼šé€šè¿‡åˆ†æ‹…å‹åŠ›çš„æ–¹å¼æ‰©å±•é›†ç¾¤çš„è§„æ¨¡ çºµå‘æ‰©å±•ï¼š ä¸€å°æœåŠ¡å™¨cpu i7-6700k 4æ ¸å¿ƒ8çº¿ç¨‹ï¼Œ 8æ ¸å¿ƒ16çº¿ç¨‹ï¼Œå†…å­˜64G =&gt; 128G  </li>
<li>å»¶å±•æ€§ï¼ŒHive æ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥å®ç°è‡ªå·±çš„å‡½æ•° </li>
<li>è‰¯å¥½çš„å®¹é”™æ€§ï¼Œå¯ä»¥ä¿éšœå³ä½¿æœ‰èŠ‚ç‚¹å‡ºç°é—®é¢˜ï¼ŒSQL è¯­å¥ä»å¯å®Œæˆæ‰§è¡Œ     <h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3></li>
<li>Hive ä¸æ”¯æŒè®°å½•çº§åˆ«çš„å¢åˆ æ”¹æ“ä½œï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥é€šè¿‡æŸ¥è¯¢ç”Ÿæˆæ–°è¡¨æˆ–è€…å°†æŸ¥è¯¢ç»“ æœå¯¼å…¥åˆ°æ–‡ä»¶ä¸­ï¼ˆå½“å‰é€‰æ‹©çš„ hive-2.3.2 çš„ç‰ˆæœ¬æ”¯æŒè®°å½•çº§åˆ«çš„æ’å…¥æ“ä½œï¼‰</li>
<li>Hive çš„æŸ¥è¯¢å»¶æ—¶å¾ˆä¸¥é‡ï¼Œå› ä¸º MapReduce Job çš„å¯åŠ¨è¿‡ç¨‹æ¶ˆè€—å¾ˆé•¿æ—¶é—´ï¼Œæ‰€ä»¥ä¸èƒ½ ç”¨åœ¨äº¤äº’æŸ¥è¯¢ç³»ç»Ÿä¸­ã€‚ </li>
<li>Hive ä¸æ”¯æŒäº‹åŠ¡ï¼ˆå› ä¸ºä¸æ²¡æœ‰å¢åˆ æ”¹ï¼Œæ‰€ä»¥ä¸»è¦ç”¨æ¥åš OLAPï¼ˆè”æœºåˆ†æå¤„ç†ï¼‰ï¼Œè€Œ ä¸æ˜¯ OLTPï¼ˆè”æœºäº‹åŠ¡å¤„ç†ï¼‰ï¼Œè¿™å°±æ˜¯æ•°æ®å¤„ç†çš„ä¸¤å¤§çº§åˆ«ï¼‰</li>
</ol>
<h3 id="Hive-åªé€‚åˆç”¨æ¥åšæµ·é‡ç¦»çº¿æ•°-æ®ç»Ÿè®¡åˆ†æï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä»“åº“"><a href="#Hive-åªé€‚åˆç”¨æ¥åšæµ·é‡ç¦»çº¿æ•°-æ®ç»Ÿè®¡åˆ†æï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä»“åº“" class="headerlink" title="Hive åªé€‚åˆç”¨æ¥åšæµ·é‡ç¦»çº¿æ•° æ®ç»Ÿè®¡åˆ†æï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä»“åº“"></a>Hive åªé€‚åˆç”¨æ¥åšæµ·é‡ç¦»çº¿æ•° æ®ç»Ÿè®¡åˆ†æï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä»“åº“</h3>]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Hive </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[hbaseåº•å±‚åŸç†]]></title>
      <url>/hbase%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86.html</url>
      <content type="html"><![CDATA[<h2 id="1ã€ç³»ç»Ÿæ¶æ„"><a href="#1ã€ç³»ç»Ÿæ¶æ„" class="headerlink" title="1ã€ç³»ç»Ÿæ¶æ„"></a>1ã€ç³»ç»Ÿæ¶æ„</h2><p><img src="http://ou3xxg3hg.bkt.clouddn.com/hbase%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%9B%BE.png" alt="image"></p>
<h3 id="clientèŒè´£"><a href="#clientèŒè´£" class="headerlink" title="clientèŒè´£"></a>clientèŒè´£</h3><ol>
<li>HBaseæœ‰ä¸¤å¼ ç‰¹æ®Šè¡¨<br> .METE.ï¼šè®°å½•äº†ç”¨æˆ·æ‰€æœ‰è¡¨æ‹†åˆ†å‡ºæ¥çš„Regionæ˜ å°„ä¿¡æ¯ï¼Œ.META.å¯ä»¥æœ‰å¤šä¸ªRegion<br> -ROOT-:è®°å½•äº†.METE.è¡¨çš„Regionä¿¡æ¯ï¼Œ-ROOT-åªæœ‰ä¸€ä¸ªRegionï¼Œæ— è®ºå¦‚ä½•ä¸ä¼šåˆ†è£‚</li>
<li>Clientè®¿é—®ç”¨æˆ·æ•°æ®è¿‡ç¨‹ï¼š<br> 1ã€é¦–å…ˆè®¿é—®zookeeperï¼Œæ‰¾åˆ°-root-è¡¨çš„regionæ‰€åœ¨çš„ä½ç½®<br> 2ã€ç„¶åè®¿é—®-ROOT-è¡¨ï¼Œæ¥ç€è®¿é—®.META.è¡¨<br> 3ã€æœ€åæ‰èƒ½æ‰¾åˆ°ç”¨æˆ·æ•°æ®çš„ä½ç½®å»è®¿é—®<br>ä¸­é—´éœ€è¦å¤šæ¬¡ç½‘ç»œæ“ä½œï¼Œä¸è¿‡Clientç«¯ä¼šåšcacheç¼“å­˜<a id="more"></a>
<h3 id="ZooKeeperèŒè´£"><a href="#ZooKeeperèŒè´£" class="headerlink" title="ZooKeeperèŒè´£"></a>ZooKeeperèŒè´£</h3></li>
<li>ZooKeeper ä¸º HBase æä¾› Failover æœºåˆ¶ï¼Œé€‰ä¸¾ Masterï¼Œé¿å…å•ç‚¹ Master å•ç‚¹æ•…éšœé—®é¢˜ </li>
<li>å­˜å‚¨æ‰€æœ‰ Region çš„å¯»å€å…¥å£ï¼Œå³-ROOT-è¡¨çš„ä½ç½®ä¿¡æ¯ ï¼ˆåœ¨å“ªå°æœåŠ¡å™¨ä¸Šï¼‰</li>
<li>å®æ—¶ç›‘æ§ RegionServer çš„çŠ¶æ€ï¼Œå°† RegionServer çš„ä¸Šçº¿å’Œä¸‹çº¿ä¿¡æ¯å®æ—¶é€šçŸ¥ç»™ Master </li>
<li>å­˜å‚¨ HBase çš„ Schemaï¼ŒåŒ…æ‹¬æœ‰å“ªäº› Tableï¼Œæ¯ä¸ª Table æœ‰å“ªäº› Column Family </li>
</ol>
<h3 id="MasterèŒè´£"><a href="#MasterèŒè´£" class="headerlink" title="MasterèŒè´£"></a>MasterèŒè´£</h3><ol>
<li>ä¸ºRegionServeråˆ†é…Region</li>
<li>è´Ÿè´£RegionServerçš„è´Ÿè½½å‡è¡¡</li>
<li>å‘ç°å¤±æ•ˆçš„ RegionServer å¹¶é‡æ–°åˆ†é…å…¶ä¸Šçš„ Region </li>
<li>HDFS ä¸Šçš„åƒåœ¾æ–‡ä»¶ï¼ˆHBaseï¼‰å›æ”¶ </li>
<li>å¤„ç† Schema æ›´æ–°è¯·æ±‚ï¼ˆè¡¨çš„åˆ›å»ºï¼Œåˆ é™¤ï¼Œä¿®æ”¹ï¼Œåˆ—ç°‡çš„å¢åŠ ç­‰ç­‰ï¼‰ </li>
</ol>
<h3 id="RegionServerèŒè´£"><a href="#RegionServerèŒè´£" class="headerlink" title="RegionServerèŒè´£"></a>RegionServerèŒè´£</h3><ol>
<li>RegionServer ç»´æŠ¤ Master åˆ†é…ç»™å®ƒçš„ Regionï¼Œå¤„ç†å¯¹è¿™äº› Region çš„ IO è¯·æ±‚ </li>
<li>RegionServer è´Ÿè´£ Split åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å˜å¾—è¿‡å¤§çš„ Regionï¼Œè´Ÿè´£ Compact æ“ä½œ ï¼ˆæº¢å‡ºåˆ°ç£ç›˜çš„æ–‡ä»¶æœ‰å¯èƒ½ä¼šæœ‰å¾ˆå¤šï¼Œä¼šè¿›è¡Œåˆå¹¶ï¼ŒæŠŠrowkeyç›¸åŒçš„æ‰€æœ‰keyvalueå¯¹è±¡æ”¶é›†åˆ°ä¸€èµ·ï¼Œè¿›è¡Œåˆå¹¶ï¼‰</li>
</ol>
<p>æ³¨æ„ï¼š1ã€å¯ä»¥çœ‹åˆ°ï¼Œclient è®¿é—® HBase ä¸Šæ•°æ®çš„è¿‡ç¨‹å¹¶ä¸éœ€è¦ master å‚ä¸ï¼ˆå¯»å€è®¿é—® zookeeper å’ŒRegioneServerï¼Œæ•°æ®è¯»å†™è®¿é—® RegioneServerï¼‰ï¼Œ Master ä»…ä»…ç»´æŠ¤è€… Table å’Œ Region çš„å…ƒæ•°æ®Stay hungry Stay foolish â€“ <span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhvbmdxaTI1MTM=" title="http://blog.csdn.net/zhongqi2513">http://blog.csdn.net/zhongqi2513<i class="fa fa-external-link"></i></span> ä¿¡æ¯ï¼Œè´Ÿè½½å¾ˆä½ã€‚ 2ã€.META. å­˜çš„æ˜¯æ‰€æœ‰çš„ Region çš„ä½ç½®ä¿¡æ¯ï¼Œé‚£ä¹ˆ RegioneServer å½“ä¸­ Region åœ¨è¿›è¡Œåˆ†è£‚ä¹‹å çš„æ–°äº§ç”Ÿçš„ Regionï¼Œæ˜¯ç”± Master æ¥å†³å®šå‘åˆ°å“ªä¸ª RegioneServerï¼Œè¿™å°±æ„å‘³ç€ï¼Œåªæœ‰ Master çŸ¥é“ new Region çš„ä½ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥ï¼Œç”± Master æ¥ç®¡ç†.META.è¿™ä¸ªè¡¨å½“ä¸­çš„æ•°æ®çš„ CRUDæ‰€ä»¥ç»“åˆä»¥ä¸Šä¸¤ç‚¹è¡¨æ˜ï¼Œåœ¨æ²¡æœ‰ Region åˆ†è£‚çš„æƒ…å†µï¼ŒMaster å®•æœºä¸€æ®µæ—¶é—´æ˜¯å¯ä»¥å¿å—çš„</p>
<h2 id="2ã€ç‰©ç†å­˜å‚¨"><a href="#2ã€ç‰©ç†å­˜å‚¨" class="headerlink" title="2ã€ç‰©ç†å­˜å‚¨"></a>2ã€ç‰©ç†å­˜å‚¨</h2><h3 id="æ•´ä½“ç‰©ç†ç»“æ„"><a href="#æ•´ä½“ç‰©ç†ç»“æ„" class="headerlink" title="æ•´ä½“ç‰©ç†ç»“æ„"></a>æ•´ä½“ç‰©ç†ç»“æ„</h3><p><img src="http://ou3xxg3hg.bkt.clouddn.com/HBase%E6%95%B4%E4%BD%93%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84.png" alt="image"></p>
<ol>
<li>Table ä¸­çš„æ‰€æœ‰è¡Œéƒ½æŒ‰ç…§ RowKsey çš„å­—å…¸åºæ’åˆ—ã€‚ </li>
<li>Table åœ¨è¡Œçš„æ–¹å‘ä¸Šåˆ†å‰²ä¸ºå¤šä¸ª HRegionã€‚   </li>
<li>HRegion æŒ‰å¤§å°åˆ†å‰²çš„(é»˜è®¤ 10G)ï¼Œæ¯ä¸ªè¡¨ä¸€å¼€å§‹åªæœ‰ä¸€ä¸ª HRegionï¼Œéšç€æ•°æ®ä¸æ–­æ’å…¥ è¡¨ï¼ŒHRegion ä¸æ–­å¢å¤§ï¼Œå½“å¢å¤§åˆ°ä¸€ä¸ªé˜€å€¼çš„æ—¶å€™ï¼ŒHRegion å°±ä¼šç­‰åˆ†ä¼šä¸¤ä¸ªæ–°çš„ HRegionã€‚ å½“è¡¨ä¸­çš„è¡Œä¸æ–­å¢å¤šï¼Œå°±ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„ HRegionã€‚  </li>
<li>HRegion æ˜¯ Hbase ä¸­åˆ†å¸ƒå¼å­˜å‚¨å’Œè´Ÿè½½å‡è¡¡çš„æœ€å°å•å…ƒã€‚æœ€å°å•å…ƒå°±è¡¨ç¤ºä¸åŒçš„ HRegion å¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„ HRegionserver ä¸Šã€‚ä½†ä¸€ä¸ª HRegion æ˜¯ä¸ä¼šæ‹†åˆ†åˆ°å¤šä¸ª server ä¸Šçš„ã€‚   </li>
<li>HRegion è™½ç„¶æ˜¯è´Ÿè½½å‡è¡¡çš„æœ€å°å•å…ƒï¼Œä½†å¹¶ä¸æ˜¯ç‰©ç†å­˜å‚¨çš„æœ€å°å•å…ƒã€‚äº‹å®ä¸Šï¼ŒHRegion ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ª Store ç»„æˆï¼Œæ¯ä¸ª Store ä¿å­˜ä¸€ä¸ª Column Familyã€‚æ¯ä¸ª Strore åˆç”±ä¸€ä¸ª memStore å’Œ 0 è‡³å¤šä¸ª StoreFile ç»„æˆ </li>
</ol>
<h3 id="StoreFileå’ŒHFileç»“æ„"><a href="#StoreFileå’ŒHFileç»“æ„" class="headerlink" title="StoreFileå’ŒHFileç»“æ„"></a>StoreFileå’ŒHFileç»“æ„</h3><p><img src="http://ou3xxg3hg.bkt.clouddn.com/StoreFile%E5%92%8CHFile%E7%BB%93%E6%9E%84.png" alt="image"><br><img src="http://ou3xxg3hg.bkt.clouddn.com/HFile.png" alt="image"><br><img src="http://ou3xxg3hg.bkt.clouddn.com/HFile2.png" alt="image"></p>
<h3 id="MemStoreå’ŒStoreFile"><a href="#MemStoreå’ŒStoreFile" class="headerlink" title="MemStoreå’ŒStoreFile"></a>MemStoreå’ŒStoreFile</h3><ol>
<li>ä¸€ä¸ª Hregion ç”±å¤šä¸ª Store ç»„æˆï¼Œæ¯ä¸ª Store åŒ…å«ä¸€ä¸ªåˆ—æ—çš„æ‰€æœ‰æ•°æ® </li>
<li>Store åŒ…æ‹¬ä½äºå†…å­˜çš„ä¸€ä¸ª memstore å’Œä½äºç¡¬ç›˜çš„å¤šä¸ª storefile ç»„æˆ </li>
<li>å†™æ“ä½œå…ˆå†™å…¥ memstoreï¼Œå½“ memstore ä¸­çš„æ•°æ®é‡è¾¾åˆ°æŸä¸ªé˜ˆå€¼ï¼ŒHRegionServer å¯åŠ¨ flushcache è¿›ç¨‹å†™å…¥ storefileï¼Œæ¯æ¬¡å†™å…¥å½¢æˆå•ç‹¬ä¸€ä¸ª Hfile </li>
<li>å½“æ€» storefile å¤§å°è¶…è¿‡ä¸€å®šé˜ˆå€¼åï¼Œä¼šæŠŠå½“å‰çš„ region åˆ†å‰²æˆä¸¤ä¸ªï¼Œå¹¶ç”± HMaster åˆ†é…ç»™ç›¸ åº”çš„ region æœåŠ¡å™¨ï¼Œå®ç°è´Ÿè½½å‡è¡¡ </li>
<li>å®¢æˆ·ç«¯æ£€ç´¢æ•°æ®æ—¶ï¼Œå…ˆåœ¨ memstore æ‰¾ï¼Œæ‰¾ä¸åˆ°å†æ‰¾ storefile </li>
</ol>
<h3 id="HLog-WAL"><a href="#HLog-WAL" class="headerlink" title="HLog(WAL)"></a>HLog(WAL)</h3><ol>
<li>WAL æ„ä¸º Write ahead log(<span class="exturl" data-url="aHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Xcml0ZS1haGVhZF9sb2dnaW5nKe+8jOexu+S8vA==" title="http://en.wikipedia.org/wiki/Write-ahead_logging)ï¼Œç±»ä¼¼">http://en.wikipedia.org/wiki/Write-ahead_logging)ï¼Œç±»ä¼¼<i class="fa fa-external-link"></i></span> mysql ä¸­çš„ binlogï¼Œç”¨æ¥åšç¾éš¾æ¢å¤ä¹‹ç”¨ï¼ŒHlog è®°å½•æ•°æ®çš„æ‰€æœ‰å˜æ›´ï¼Œä¸€æ—¦æ•°æ®ä¿®æ”¹ï¼Œå°±å¯ä»¥ä» log ä¸­ è¿›è¡Œæ¢å¤ã€‚ </li>
<li>æ¯ä¸ª Region Server ç»´æŠ¤ä¸€ä¸ª Hlog,è€Œä¸æ˜¯æ¯ä¸ª Region ä¸€ä¸ªã€‚è¿™æ ·ä¸åŒ region(æ¥è‡ªä¸åŒ table) çš„æ—¥å¿—ä¼šæ··åœ¨ä¸€èµ·ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸æ–­è¿½åŠ å•ä¸ªæ–‡ä»¶ç›¸å¯¹äºåŒæ—¶å†™å¤šä¸ªæ–‡ä»¶è€Œè¨€ï¼Œå¯ä»¥å‡ å°‘ç£ç›˜å¯»å€æ¬¡æ•°ï¼Œå› æ­¤å¯ä»¥æé«˜å¯¹ table çš„å†™æ€§èƒ½ã€‚å¸¦æ¥çš„éº»çƒ¦æ˜¯ï¼Œå¦‚æœä¸€å° region server ä¸‹çº¿ï¼Œä¸ºäº†æ¢å¤å…¶ä¸Šçš„ regionï¼Œéœ€è¦å°† region server ä¸Šçš„ log è¿›è¡Œæ‹†åˆ†ï¼Œç„¶ååˆ†å‘åˆ°å…¶å®ƒ region server ä¸Šè¿›è¡Œæ¢å¤ã€‚ </li>
<li>HLog æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ Hadoop Sequence Fileï¼š 1ã€HLog Sequence File çš„ Key æ˜¯ HLogKey å¯¹è±¡ï¼ŒHLogKey ä¸­è®°å½•äº†å†™å…¥æ•°æ®çš„å½’å±ä¿¡æ¯ï¼Œé™¤ äº† table å’Œ region åå­—å¤–ï¼ŒåŒæ—¶è¿˜åŒ…æ‹¬ sequence number å’Œ timestampï¼Œtimestamp æ˜¯â€å†™å…¥ æ—¶é—´â€ï¼Œsequence number çš„èµ·å§‹å€¼ä¸º 0ï¼Œæˆ–è€…æ˜¯æœ€è¿‘ä¸€æ¬¡å­˜å…¥æ–‡ä»¶ç³»ç»Ÿä¸­ sequence numberã€‚ </li>
<li>HLog Sequece File çš„ Value æ˜¯ HBase çš„ KeyValue å¯¹è±¡ï¼Œå³å¯¹åº” HFile ä¸­çš„ KeyValue </li>
</ol>
<h2 id="3ã€å¯»å€æœºåˆ¶"><a href="#3ã€å¯»å€æœºåˆ¶" class="headerlink" title="3ã€å¯»å€æœºåˆ¶"></a>3ã€å¯»å€æœºåˆ¶</h2><p>æ—¢ç„¶è¯»å†™éƒ½åœ¨ RegionServer ä¸Šå‘ç”Ÿï¼Œæˆ‘ä»¬å‰é¢æœ‰è®²åˆ°ï¼Œæ¯ä¸ª RegionSever ä¸ºä¸€å®šæ•°é‡çš„ Region æœåŠ¡ï¼Œé‚£ä¹ˆ Client è¦å¯¹æŸä¸€è¡Œæ•°æ®åšè¯»å†™çš„æ—¶å€™å¦‚ä½•èƒ½çŸ¥é“å…·ä½“è¦å»è®¿é—®å“ªä¸ª RegionServer å‘¢ï¼Ÿé‚£å°±æ˜¯æ¥ä¸‹æ¥æˆ‘ä»¬è¦è®¨è®ºçš„é—®é¢˜ </p>
<h3 id="è€çš„Regionå¯»å€æ–¹å¼"><a href="#è€çš„Regionå¯»å€æ–¹å¼" class="headerlink" title="è€çš„Regionå¯»å€æ–¹å¼"></a>è€çš„Regionå¯»å€æ–¹å¼</h3><p>åœ¨ HBase-0.96 ç‰ˆæœ¬ä»¥å‰ï¼ŒHBaseæœ‰ä¸¤ä¸ªç‰¹æ®Šçš„è¡¨ï¼Œåˆ†åˆ«æ˜¯-ROOT-è¡¨å’Œ.META.è¡¨ï¼Œå…¶ä¸­-ROOTçš„ä½ç½®å­˜å‚¨åœ¨ ZooKeeper ä¸­ï¼Œ -ROOT-æœ¬èº«å­˜å‚¨äº†.META. Table çš„ RegionInfo ä¿¡æ¯ï¼Œå¹¶ä¸”-ROOTä¸ä¼šåˆ†è£‚ï¼Œåªæœ‰ä¸€ä¸ª Regionã€‚è€Œ .META.è¡¨å¯ä»¥è¢«åˆ‡åˆ†æˆå¤šä¸ª Regionã€‚è¯»å–çš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="http://ou3xxg3hg.bkt.clouddn.com/%E8%80%81%E7%9A%84Region%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F.png" alt="image"><br>è¯¦ç»†æ­¥éª¤ï¼š </p>
<pre><code>ç¬¬ 1 æ­¥ï¼šClient è¯·æ±‚ ZooKeeper è·å¾—-ROOT-æ‰€åœ¨çš„ RegionServer åœ°å€ 
ç¬¬ 2 æ­¥ï¼šClient è¯·æ±‚-ROOT-æ‰€åœ¨çš„ RS åœ°å€ï¼Œè·å–.META.è¡¨çš„åœ°å€ï¼ŒClient ä¼šå°†-ROOT-çš„ç›¸å…³ ä¿¡æ¯ cache ä¸‹æ¥ï¼Œä»¥ä¾¿ä¸‹ä¸€æ¬¡å¿«é€Ÿè®¿é—® 
ç¬¬ 3 æ­¥ï¼šClient è¯·æ±‚.META.è¡¨çš„ RegionServer åœ°å€ï¼Œè·å–è®¿é—®æ•°æ®æ‰€åœ¨ RegionServer çš„åœ°å€ï¼Œ Client ä¼šå°†.META.çš„ç›¸å…³ä¿¡æ¯ cache ä¸‹æ¥ï¼Œä»¥ä¾¿ä¸‹ä¸€æ¬¡å¿«é€Ÿè®¿é—® 
ç¬¬ 4 æ­¥ï¼šClient è¯·æ±‚è®¿é—®æ•°æ®æ‰€åœ¨ RegionServer çš„åœ°å€ï¼Œè·å–å¯¹åº”çš„æ•°æ® 
</code></pre><p>ä»ä¸Šé¢çš„è·¯å¾„æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç”¨æˆ·éœ€è¦ 3 æ¬¡è¯·æ±‚æ‰èƒ½ç›´åˆ°ç”¨æˆ· Table çœŸæ­£çš„ä½ç½®ï¼Œè¿™åœ¨ä¸€å®š ç¨‹åºå¸¦æ¥äº†æ€§èƒ½çš„ä¸‹é™ã€‚åœ¨ 0.96 ä¹‹å‰ä½¿ç”¨ 3 å±‚è®¾è®¡çš„ä¸»è¦åŸå› æ˜¯è€ƒè™‘åˆ°å…ƒæ•°æ®å¯èƒ½éœ€è¦å¾ˆ å¤§ã€‚ä½†æ˜¯çœŸæ­£é›†ç¾¤è¿è¡Œï¼Œå…ƒæ•°æ®çš„å¤§å°å…¶å®å¾ˆå®¹æ˜“è®¡ç®—å‡ºæ¥ã€‚åœ¨ BigTable çš„è®ºæ–‡ä¸­ï¼Œæ¯è¡Œ METADATA æ•°æ®å­˜å‚¨å¤§å°ä¸º 1KB å·¦å³ï¼Œå¦‚æœæŒ‰ç…§ä¸€ä¸ª Region ä¸º 128M çš„è®¡ç®—ï¼Œ3 å±‚è®¾è®¡å¯ä»¥<br>æ”¯æŒçš„ Region ä¸ªæ•°ä¸º 2^34 ä¸ªï¼Œé‡‡ç”¨ 2 å±‚è®¾è®¡å¯ä»¥æ”¯æŒ 2^17ï¼ˆ131072ï¼‰ã€‚é‚£ä¹ˆ 2 å±‚è®¾è®¡çš„æƒ… å†µä¸‹ä¸€ä¸ªé›†ç¾¤å¯ä»¥å­˜å‚¨ 4P çš„æ•°æ®ã€‚è¿™ä»…ä»…æ˜¯ä¸€ä¸ª Region åªæœ‰ 128M çš„æƒ…å†µä¸‹ã€‚å¦‚æœæ˜¯ 10G å‘¢? å› æ­¤ï¼Œé€šè¿‡è®¡ç®—ï¼Œå…¶å® 2 å±‚è®¾è®¡å°±å¯ä»¥æ»¡è¶³é›†ç¾¤çš„éœ€æ±‚ã€‚å› æ­¤åœ¨ 0.96 ç‰ˆæœ¬ä»¥åå°±å»æ‰ äº†-ROOT-è¡¨äº†ã€‚</p>
<p><img src="http://ou3xxg3hg.bkt.clouddn.com/%E6%96%B0%E7%9A%84%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F.png" alt="image"></p>
<h2 id="4ã€è¯»å†™è¿‡ç¨‹"><a href="#4ã€è¯»å†™è¿‡ç¨‹" class="headerlink" title="4ã€è¯»å†™è¿‡ç¨‹"></a>4ã€è¯»å†™è¿‡ç¨‹</h2><h3 id="è¯»è¯·æ±‚è¿‡ç¨‹"><a href="#è¯»è¯·æ±‚è¿‡ç¨‹" class="headerlink" title="è¯»è¯·æ±‚è¿‡ç¨‹"></a>è¯»è¯·æ±‚è¿‡ç¨‹</h3><p>1ã€å®¢æˆ·ç«¯é€šè¿‡ ZooKeeper ä»¥åŠ-ROOT-è¡¨å’Œ.META.è¡¨æ‰¾åˆ°ç›®æ ‡æ•°æ®æ‰€åœ¨çš„ RegionServer(å°±æ˜¯ æ•°æ®æ‰€åœ¨çš„ Region çš„ä¸»æœºåœ°å€) 2ã€è”ç³» RegionServer æŸ¥è¯¢ç›®æ ‡æ•°æ® 3ã€RegionServer å®šä½åˆ°ç›®æ ‡æ•°æ®æ‰€åœ¨çš„ Regionï¼Œå‘å‡ºæŸ¥è¯¢è¯·æ±‚ 4ã€Region å…ˆåœ¨ Memstore ä¸­æŸ¥æ‰¾ï¼Œå‘½ä¸­åˆ™è¿”å› 5ã€å¦‚æœåœ¨ Memstore ä¸­æ‰¾ä¸åˆ°ï¼Œåˆ™åœ¨ Storefile ä¸­æ‰«æ    ä¸ºäº†èƒ½å¿«é€Ÿçš„åˆ¤æ–­è¦æŸ¥è¯¢çš„æ•°æ®åœ¨ä¸åœ¨è¿™ä¸ª StoreFile ä¸­ï¼Œåº”ç”¨äº† BloomFilter </p>
<p>ï¼ˆBloomFilterï¼Œå¸ƒéš†è¿‡æ»¤å™¨ï¼šè¿…é€Ÿåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªåºå¤§çš„é›†åˆå†…ï¼Œä½†æ˜¯ä»–æœ‰ä¸€ä¸ª å¼±ç‚¹ï¼šå®ƒæœ‰ä¸€å®šçš„è¯¯åˆ¤ç‡ï¼‰ ï¼ˆè¯¯åˆ¤ç‡ï¼šåŸæœ¬ä¸å­˜åœ¨ä¸è¯¥é›†åˆçš„å…ƒç´ ï¼Œå¸ƒéš†è¿‡æ»¤å™¨æœ‰å¯èƒ½ä¼šåˆ¤æ–­è¯´å®ƒå­˜åœ¨ï¼Œä½†æ˜¯ï¼Œå¦‚æœ å¸ƒéš†è¿‡æ»¤å™¨ï¼Œåˆ¤æ–­è¯´æŸä¸€ä¸ªå…ƒç´ ä¸å­˜åœ¨è¯¥é›†åˆï¼Œé‚£ä¹ˆè¯¥å…ƒç´ å°±ä¸€å®šä¸åœ¨è¯¥é›†åˆå†…ï¼‰ </p>
<h3 id="å†™è¯·æ±‚è¿‡ç¨‹"><a href="#å†™è¯·æ±‚è¿‡ç¨‹" class="headerlink" title="å†™è¯·æ±‚è¿‡ç¨‹"></a>å†™è¯·æ±‚è¿‡ç¨‹</h3><ol>
<li>Client å…ˆæ ¹æ® RowKey æ‰¾åˆ°å¯¹åº”çš„ Region æ‰€åœ¨çš„ RegionServer </li>
<li>Client å‘ RegionServer æäº¤å†™è¯·æ±‚ </li>
<li>RegionServer æ‰¾åˆ°ç›®æ ‡ Region </li>
<li>Region æ£€æŸ¥æ•°æ®æ˜¯å¦ä¸ Schema ä¸€è‡´ </li>
<li>å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰æŒ‡å®šç‰ˆæœ¬ï¼Œåˆ™è·å–å½“å‰ç³»ç»Ÿæ—¶é—´ä½œä¸ºæ•°æ®ç‰ˆæœ¬ </li>
<li>å°†æ›´æ–°å†™å…¥ WAL Log </li>
<li>å°†æ›´æ–°å†™å…¥ Memstore </li>
<li>åˆ¤æ–­ Memstore çš„æ˜¯å¦éœ€è¦ flush ä¸º StoreFile æ–‡ä»¶ã€‚ </li>
</ol>
<p>Hbase åœ¨åšæ•°æ®æ’å…¥æ“ä½œæ—¶ï¼Œé¦–å…ˆè¦æ‰¾åˆ° RowKey æ‰€å¯¹åº”çš„çš„ Regionï¼Œæ€ä¹ˆæ‰¾åˆ°çš„ï¼Ÿå…¶å®è¿™ ä¸ªç®€å•ï¼Œå› ä¸º.META.è¡¨å­˜å‚¨äº†æ¯å¼ è¡¨æ¯ä¸ª Region çš„èµ·å§‹ RowKey äº†ã€‚ </p>
<p>å»ºè®®ï¼šåœ¨åšæµ·é‡æ•°æ®çš„æ’å…¥æ“ä½œï¼Œé¿å…å‡ºç°é€’å¢ rowkey çš„ put æ“ä½œ å¦‚æœ put æ“ä½œçš„æ‰€æœ‰ RowKey éƒ½æ˜¯é€’å¢çš„ï¼Œé‚£ä¹ˆè¯•æƒ³ï¼Œå½“æ’å…¥ä¸€éƒ¨åˆ†æ•°æ®çš„æ—¶å€™åˆšå¥½è¿›è¡Œåˆ† è£‚ï¼Œé‚£ä¹ˆä¹‹åçš„æ‰€æœ‰æ•°æ®éƒ½å¼€å§‹å¾€åˆ†è£‚åçš„ç¬¬äºŒä¸ª Region æ’å…¥ï¼Œå°±é€ æˆäº†æ•°æ®çƒ­ç‚¹ç°è±¡ã€‚ </p>
<p>ç»†èŠ‚æè¿°ï¼š HBase ä½¿ç”¨ MemStore å’Œ StoreFile å­˜å‚¨å¯¹è¡¨çš„æ›´æ–°ã€‚ </p>
<p>æ•°æ®åœ¨æ›´æ–°æ—¶é¦–å…ˆå†™å…¥ HLog(WAL Log)ï¼Œå†å†™å…¥å†…å­˜(MemStore)ä¸­ï¼ŒMemStore ä¸­çš„æ•°æ®æ˜¯æ’ åºçš„ï¼Œå½“ MemStore ç´¯è®¡åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ MemStoreï¼Œå¹¶ä¸”å°†è€çš„ MemStore æ·»åŠ åˆ° flush é˜Ÿåˆ—ï¼Œç”±å•ç‹¬çš„çº¿ç¨‹ flush åˆ°ç£ç›˜ä¸Šï¼Œæˆä¸ºä¸€ä¸ª StoreFileã€‚äºæ­¤åŒæ—¶ï¼Œç³»ç»Ÿä¼šåœ¨ ZooKeeper ä¸­è®°å½•ä¸€ä¸ª redo pointï¼Œè¡¨ç¤ºè¿™ä¸ªæ—¶åˆ»ä¹‹å‰çš„å˜æ›´å·²ç»æŒä¹…åŒ–äº†ã€‚å½“ç³»ç»Ÿå‡ºç°æ„</p>
<p>Stay hungry Stay foolish â€“ <span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhvbmdxaTI1MTM=" title="http://blog.csdn.net/zhongqi2513">http://blog.csdn.net/zhongqi2513<i class="fa fa-external-link"></i></span><br>å¤–æ—¶ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜(MemStore)ä¸­çš„æ•°æ®ä¸¢å¤±ï¼Œæ­¤æ—¶ä½¿ç”¨ HLog(WAL Log)æ¥æ¢å¤ checkpoint ä¹‹åçš„æ•°æ®ã€‚ </p>
<p>StoreFile æ˜¯åªè¯»çš„ï¼Œä¸€æ—¦åˆ›å»ºåå°±ä¸å¯ä»¥å†ä¿®æ”¹ã€‚å› æ­¤ HBase çš„æ›´æ–°/ä¿®æ”¹å…¶å®æ˜¯ä¸æ–­è¿½åŠ  çš„æ“ä½œã€‚å½“ä¸€ä¸ª Store ä¸­çš„ StoreFile è¾¾åˆ°ä¸€å®šçš„é˜ˆå€¼åï¼Œå°±ä¼šè¿›è¡Œä¸€æ¬¡åˆå¹¶(minor_compact, major_compact)ï¼Œå°†å¯¹åŒä¸€ä¸ª key çš„ä¿®æ”¹åˆå¹¶åˆ°ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå¤§çš„ StoreFileï¼Œå½“ StoreFile çš„å¤§å°è¾¾åˆ°ä¸€å®šé˜ˆå€¼åï¼Œåˆä¼šå¯¹ StoreFile è¿›è¡Œ splitï¼Œç­‰åˆ†ä¸ºä¸¤ä¸ª StoreFileã€‚ç”±äºå¯¹è¡¨çš„æ›´ æ–°æ˜¯ä¸æ–­è¿½åŠ çš„ï¼Œcompact æ—¶ï¼Œéœ€è¦è®¿é—® Store ä¸­å…¨éƒ¨çš„ StoreFile å’Œ MemStoreï¼Œå°†ä»–ä»¬æŒ‰ rowkey è¿›è¡Œåˆå¹¶ï¼Œç”±äº StoreFile å’Œ MemStore éƒ½æ˜¯ç»è¿‡æ’åºçš„ï¼Œå¹¶ä¸” StoreFile å¸¦æœ‰å†…å­˜ä¸­ ç´¢å¼•ï¼Œåˆå¹¶çš„è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒå¿«ã€‚ </p>
<p>major_compact å’Œ minor_compact çš„åŒºåˆ«ï¼š minor_compact ä»…ä»…åˆå¹¶å°æ–‡ä»¶ï¼ˆHFileï¼‰ major_compact åˆå¹¶ä¸€ä¸ª region å†…çš„æ‰€æœ‰æ–‡ä»¶ </p>
<p>Client å†™å…¥ -&gt; å­˜å…¥ MemStoreï¼Œä¸€ç›´åˆ° MemStore æ»¡ -&gt; Flush æˆä¸€ä¸ª StoreFileï¼Œç›´è‡³å¢é•¿åˆ° ä¸€å®šé˜ˆå€¼ -&gt; è§¦å‘ Compact åˆå¹¶æ“ä½œ -&gt; å¤šä¸ª StoreFile åˆå¹¶æˆä¸€ä¸ª StoreFileï¼ŒåŒæ—¶è¿›è¡Œç‰ˆæœ¬ åˆå¹¶å’Œæ•°æ®åˆ é™¤ -&gt; å½“StoreFiles Compactåï¼Œé€æ­¥å½¢æˆè¶Šæ¥è¶Šå¤§çš„StoreFile -&gt; å•ä¸ªStoreFile å¤§å°è¶…è¿‡ä¸€å®šé˜ˆå€¼åï¼Œè§¦å‘ Split æ“ä½œï¼ŒæŠŠå½“å‰ Region Split æˆ 2 ä¸ª Regionï¼ŒRegion ä¼šä¸‹çº¿ï¼Œ æ–° Split å‡ºçš„ 2 ä¸ªå­©å­ Region ä¼šè¢« HMaster åˆ†é…åˆ°ç›¸åº”çš„ HRegionServer ä¸Šï¼Œä½¿å¾—åŸå…ˆ 1 ä¸ª Region çš„å‹åŠ›å¾—ä»¥åˆ†æµåˆ° 2 ä¸ª Region ä¸Šç”±æ­¤è¿‡ç¨‹å¯çŸ¥ï¼ŒHBase åªæ˜¯å¢åŠ æ•°æ®ï¼Œæœ‰æ‰€å¾—æ›´æ–° å’Œåˆ é™¤æ“ä½œï¼Œéƒ½æ˜¯åœ¨ Compact é˜¶æ®µåšçš„ï¼Œæ‰€ä»¥ï¼Œç”¨æˆ·å†™æ“ä½œåªéœ€è¦è¿›å…¥åˆ°å†…å­˜å³å¯ç«‹å³è¿” å›ï¼Œä»è€Œä¿è¯ I/O é«˜æ€§èƒ½ã€‚ </p>
<p>å†™å…¥æ•°æ®çš„è¿‡ç¨‹è¡¥å……ï¼š å·¥ä½œæœºåˆ¶ï¼šæ¯ä¸ª HRegionServer ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ª HLog å¯¹è±¡ï¼ŒHLog æ˜¯ä¸€ä¸ªå®ç° Write Ahead Log çš„ç±»ï¼Œæ¯æ¬¡ç”¨æˆ·æ“ä½œå†™å…¥ Memstore çš„åŒæ—¶ï¼Œä¹Ÿä¼šå†™ä¸€ä»½æ•°æ®åˆ° HLog æ–‡ä»¶ï¼ŒHLog æ–‡ä»¶å®šæœŸ ä¼šæ»šåŠ¨å‡ºæ–°ï¼Œå¹¶åˆ é™¤æ—§çš„æ–‡ä»¶(å·²æŒä¹…åŒ–åˆ° StoreFile ä¸­çš„æ•°æ®)ã€‚å½“ HRegionServer æ„å¤–ç»ˆæ­¢ åï¼ŒHMaster ä¼šé€šè¿‡ ZooKeeper æ„ŸçŸ¥ï¼ŒHMaster é¦–å…ˆå¤„ç†é—ç•™çš„ HLog æ–‡ä»¶ï¼Œå°†ä¸åŒ Region çš„logæ•°æ®æ‹†åˆ†ï¼Œåˆ†åˆ«æ”¾åˆ°ç›¸åº”Regionç›®å½•ä¸‹ï¼Œç„¶åå†å°†å¤±æ•ˆçš„Regionï¼ˆå¸¦æœ‰åˆšåˆšæ‹†åˆ†çš„logï¼‰ é‡æ–°åˆ†é…ï¼Œé¢†å–åˆ°è¿™äº› Region çš„ HRegionServer åœ¨ load Region çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‘ç°æœ‰å†å² HLog éœ€è¦å¤„ç†ï¼Œå› æ­¤ä¼š Replay HLog ä¸­çš„æ•°æ®åˆ° MemStore ä¸­ï¼Œç„¶å flush åˆ° StoreFilesï¼Œå®Œæˆæ•°æ® æ¢å¤ã€‚ </p>
<h2 id="5ã€RegionServerå·¥ä½œæœºåˆ¶"><a href="#5ã€RegionServerå·¥ä½œæœºåˆ¶" class="headerlink" title="5ã€RegionServerå·¥ä½œæœºåˆ¶"></a>5ã€RegionServerå·¥ä½œæœºåˆ¶</h2><ol>
<li>Region åˆ†é… ä»»ä½•æ—¶åˆ»ï¼Œä¸€ä¸ª Region åªèƒ½åˆ†é…ç»™ä¸€ä¸ª RegionServerã€‚master è®°å½•äº†å½“å‰æœ‰å“ªäº›å¯ç”¨çš„ RegionServerã€‚ä»¥åŠå½“å‰å“ªäº› Region åˆ†é…ç»™äº†å“ªäº› RegionServerï¼Œå“ªäº› Region è¿˜æ²¡æœ‰åˆ†é…ã€‚ å½“éœ€è¦åˆ†é…çš„æ–°çš„ Regionï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ª RegionServer ä¸Šæœ‰å¯ç”¨ç©ºé—´æ—¶ï¼ŒMaster å°±ç»™è¿™ä¸ª RegionServer å‘é€ä¸€ä¸ªè£…è½½è¯·æ±‚ï¼ŒæŠŠ Region åˆ†é…ç»™è¿™ä¸ª RegionServerã€‚RegionServer å¾—åˆ°è¯· æ±‚åï¼Œå°±å¼€å§‹å¯¹æ­¤ Region æä¾›æœåŠ¡ã€‚   </li>
<li>RegionServer ä¸Šçº¿Master ä½¿ç”¨ zookeeper æ¥è·Ÿè¸ª RegionServer çŠ¶æ€ã€‚å½“æŸä¸ª RegionServer å¯åŠ¨æ—¶ï¼Œä¼šé¦–å…ˆåœ¨ ZooKeeper ä¸Šçš„ server ç›®å½•ä¸‹å»ºç«‹ä»£è¡¨è‡ªå·±çš„ znodeã€‚ç”±äº Master è®¢é˜…äº† server ç›®å½•ä¸Šçš„å˜ æ›´æ¶ˆæ¯ï¼Œå½“ server ç›®å½•ä¸‹çš„æ–‡ä»¶å‡ºç°æ–°å¢æˆ–åˆ é™¤æ“ä½œæ—¶ï¼ŒMaster å¯ä»¥å¾—åˆ°æ¥è‡ª ZooKeeper çš„å®æ—¶é€šçŸ¥ã€‚å› æ­¤ä¸€æ—¦ RegionServer ä¸Šçº¿ï¼ŒMaster èƒ½é©¬ä¸Šå¾—åˆ°æ¶ˆæ¯ã€‚   </li>
<li>RegionServer ä¸‹çº¿ å½“ RegionServer ä¸‹çº¿æ—¶ï¼Œå®ƒå’Œ zookeeper çš„ä¼šè¯æ–­å¼€ï¼ŒZooKeeper è€Œè‡ªåŠ¨é‡Šæ”¾ä»£è¡¨è¿™å° server çš„æ–‡ä»¶ä¸Šçš„ç‹¬å é”ã€‚Master å°±å¯ä»¥ç¡®å®šï¼š<br> 1ã€RegionServer å’Œ ZooKeeper ä¹‹é—´çš„ç½‘ç»œæ–­å¼€äº†ã€‚<br> 2ã€RegionServer æŒ‚äº†ã€‚ æ— è®ºå“ªç§æƒ…å†µï¼Œ         RegionServeréƒ½æ— æ³•ç»§ç»­ä¸ºå®ƒçš„Regionæä¾›æœåŠ¡äº†ï¼Œæ­¤æ—¶Masterä¼šåˆ é™¤server ç›®å½•ä¸‹ä»£è¡¨è¿™å° RegionServer çš„ znode æ•°æ®ï¼Œå¹¶å°†è¿™å° RegionServer çš„ Region åˆ†é…ç»™å…¶å®ƒè¿˜ æ´»ç€çš„åŒå¿—ã€‚ </li>
</ol>
<h2 id="6ã€Masterå·¥ä½œæœºåˆ¶"><a href="#6ã€Masterå·¥ä½œæœºåˆ¶" class="headerlink" title="6ã€Masterå·¥ä½œæœºåˆ¶"></a>6ã€Masterå·¥ä½œæœºåˆ¶</h2><p>Master ä¸Šçº¿ Master å¯åŠ¨è¿›è¡Œä»¥ä¸‹æ­¥éª¤: </p>
<ol>
<li>ä»ZooKeeperä¸Šè·å–å”¯ä¸€ä¸€ä¸ªä»£è¡¨Active Masterçš„é”ï¼Œç”¨æ¥é˜»æ­¢å…¶å®ƒMasteræˆä¸ºMasterã€‚</li>
<li>æ‰«æ ZooKeeper ä¸Šçš„ server çˆ¶èŠ‚ç‚¹ï¼Œè·å¾—å½“å‰å¯ç”¨çš„ RegionServer åˆ—è¡¨ã€‚ </li>
<li>å’Œæ¯ä¸ª RegionServer é€šä¿¡ï¼Œè·å¾—å½“å‰å·²åˆ†é…çš„ Region å’Œ RegionServer çš„å¯¹åº”å…³ç³»ã€‚</li>
<li>æ‰«æ.META. Region çš„é›†åˆï¼Œè®¡ç®—å¾—åˆ°å½“å‰è¿˜æœªåˆ†é…çš„ Regionï¼Œå°†ä»–ä»¬æ”¾å…¥å¾…åˆ†é… Region åˆ—è¡¨ã€‚ ### Master ä¸‹çº¿ </li>
<li>ç”±äº Master åªç»´æŠ¤è¡¨å’Œ Region çš„å…ƒæ•°æ®ï¼Œè€Œä¸å‚ä¸è¡¨æ•°æ® IO çš„è¿‡ç¨‹ï¼ŒMaster ä¸‹çº¿ä»… å¯¼è‡´æ‰€æœ‰å…ƒæ•°æ®çš„ä¿®æ”¹è¢«å†»ç»“(æ— æ³•åˆ›å»ºåˆ é™¤è¡¨ï¼Œæ— æ³•ä¿®æ”¹è¡¨çš„ schemaï¼Œæ— æ³•è¿›è¡Œ Region çš„è´Ÿè½½å‡è¡¡ï¼Œæ— æ³•å¤„ç† Region ä¸Šä¸‹çº¿ï¼Œæ— æ³•è¿›è¡Œ Region çš„åˆå¹¶ï¼Œå”¯ä¸€ä¾‹å¤–çš„æ˜¯ Region çš„ split å¯ä»¥æ­£å¸¸è¿›è¡Œï¼Œå› ä¸ºåªæœ‰ RegionServer å‚ä¸)ï¼Œè¡¨çš„æ•°æ®è¯»å†™è¿˜å¯ä»¥æ­£å¸¸è¿›è¡Œã€‚å› æ­¤ Master ä¸‹çº¿çŸ­æ—¶é—´å†…å¯¹æ•´ä¸ª hbase é›†ç¾¤æ²¡æœ‰å½±å“ã€‚ </li>
<li>ä»ä¸Šçº¿è¿‡ç¨‹å¯ä»¥çœ‹åˆ°ï¼ŒMaster ä¿å­˜çš„ä¿¡æ¯å…¨æ˜¯å¯ä»¥å†—ä½™ä¿¡æ¯ï¼ˆéƒ½å¯ä»¥ä»ç³»ç»Ÿå…¶å®ƒåœ°æ–¹ æ”¶é›†åˆ°æˆ–è€…è®¡ç®—å‡ºæ¥ï¼‰ </li>
<li>å› æ­¤ï¼Œä¸€èˆ¬ HBase é›†ç¾¤ä¸­æ€»æ˜¯æœ‰ä¸€ä¸ª Master åœ¨æä¾›æœåŠ¡ï¼Œè¿˜æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ Master åœ¨ç­‰ å¾…æ—¶æœºæŠ¢å å®ƒçš„ä½ç½®ã€‚ </li>
</ol>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hbase </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[wordcountæ±‚å…±åŒå¥½å‹ä»£ç å®ç°]]></title>
      <url>/wordcount%E6%B1%82%E5%85%B1%E5%90%8C%E5%A5%BD%E5%8F%8B%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0.html</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Practice.SameFriend;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line">import org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob;</span><br><span class="line">import org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl;</span><br><span class="line">import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ±‚å…±åŒå¥½å‹åˆå¹¶ç‰ˆ</span><br><span class="line"> * ä¸»è¦æ€è·¯ï¼š ç¬¬ä¸€æ­¥ï¼šæ±‚å‡ºæ¯ä¸€ä¸ªå¥½å‹æ‰€å¯¹åº”çš„æ‰€æœ‰ç”¨æˆ·</span><br><span class="line"> *           ç¬¬äºŒæ­¥ï¼šå°†ç¬¬ä¸€æ­¥ä¸­æ‰€æœ‰ç”¨æˆ·è¿›è¡Œæ’åºï¼Œä¸¤ä¸¤ç»„åˆï¼Œæœ€åæ±‚å‡ºä¸¤ç”¨æˆ·é—´çš„å…±åŒå¥½å‹</span><br><span class="line"> */</span><br><span class="line">public class SameFriendMerge1 &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws IOException, InterruptedException &#123;</span><br><span class="line">        Configuration conf = new Configuration();</span><br><span class="line">        FileSystem fs = FileSystem.get(conf);</span><br><span class="line"></span><br><span class="line">        //ç¬¬ä¸€ä¸ªjobä¿¡æ¯</span><br><span class="line">        Job job = Job.getInstance(conf);</span><br><span class="line">        job.setJar(&quot;wordcountJar/wordcount.jar&quot;);</span><br><span class="line"></span><br><span class="line">        job.setMapperClass(SFMerge1Mapper1.class);</span><br><span class="line">        job.setReducerClass(SFMerge1Reducer1.class);</span><br><span class="line"></span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(Text.class);</span><br><span class="line"></span><br><span class="line">        Path inputPath = new Path(&quot;input/sameFriend&quot;);</span><br><span class="line">        Path outputPath = new Path(&quot;output/sameFriend&quot;);</span><br><span class="line"></span><br><span class="line">        if(fs.isDirectory(outputPath))&#123;</span><br><span class="line">            fs.delete(outputPath,true);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        FileInputFormat.setInputPaths(job,inputPath);</span><br><span class="line">        FileOutputFormat.setOutputPath(job,outputPath);</span><br><span class="line"></span><br><span class="line">        //ç¬¬äºŒä¸ªjobä¿¡æ¯</span><br><span class="line">       Job job1 = Job.getInstance(conf);</span><br><span class="line">       job1.setJar(&quot;wordcountJar/wordcount.jar&quot;);</span><br><span class="line"></span><br><span class="line">       job1.setMapperClass(SFMerge1Mapper2.class);</span><br><span class="line">       job1.setReducerClass(SFMerge1Reducer2.class);</span><br><span class="line"></span><br><span class="line">       job1.setOutputKeyClass(Text.class);</span><br><span class="line">       job1.setOutputValueClass(Text.class);</span><br><span class="line"></span><br><span class="line">       Path inputPath1 = new Path(&quot;output/sameFriend&quot;);</span><br><span class="line">       Path outputPath1 = new Path(&quot;output/sameFriend1&quot;);</span><br><span class="line"></span><br><span class="line">       if(fs.isDirectory(outputPath1))&#123;</span><br><span class="line">           fs.delete(outputPath1,true);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       FileInputFormat.setInputPaths(job1,inputPath1);</span><br><span class="line">       FileOutputFormat.setOutputPath(job1,outputPath1);</span><br><span class="line"></span><br><span class="line">        ControlledJob ctlJob1 = new ControlledJob(job.getConfiguration());</span><br><span class="line">        ControlledJob ctlJob2 = new ControlledJob(job.getConfiguration());</span><br><span class="line"></span><br><span class="line">        ctlJob1.setJob(job);</span><br><span class="line">        ctlJob2.setJob(job1);</span><br><span class="line"></span><br><span class="line">        ctlJob2.addDependingJob(ctlJob1);</span><br><span class="line"></span><br><span class="line">        JobControl jobControl = new JobControl(&quot;SameFriends&quot;);</span><br><span class="line">        jobControl.addJob(ctlJob1);</span><br><span class="line">        jobControl.addJob(ctlJob2);</span><br><span class="line"></span><br><span class="line">        Thread jobThread = new Thread(jobControl);</span><br><span class="line">        jobThread.start();</span><br><span class="line"></span><br><span class="line">        // æ¯éš”ä¸€æ®µæ—¶é—´æ¥åˆ¤æ–­ä¸€ä¸‹è¯¥jcçº¿ç¨‹çš„ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæˆ</span><br><span class="line">        while (!jobControl.allFinished())&#123;</span><br><span class="line">            Thread.sleep(500);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        jobControl.stop();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class SFMerge1Mapper1 extends Mapper&lt;LongWritable,Text,Text,Text&gt;&#123;</span><br><span class="line">        private Text outKey = new Text();</span><br><span class="line">        private Text outValue = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            String[] split = value.toString().split(&quot;:&quot;);</span><br><span class="line">            outValue.set(split[0]);</span><br><span class="line">            String[] friends = split[1].split(&quot;,&quot;);</span><br><span class="line">            for (String str :</span><br><span class="line">                    friends) &#123;</span><br><span class="line">                outKey.set(str);</span><br><span class="line">                context.write(outKey,outValue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç¬¬ä¸€æ¬¡reducerè¾“å‡ºç»“æœï¼š</span><br><span class="line">         A	F,I,O,K,G,D,C,H,B</span><br><span class="line">         B	E,J,F,A</span><br><span class="line">         C	B,E,K,A,H,G,F</span><br><span class="line">         D	H,C,G,F,E,A,K,L</span><br><span class="line">         E	A,B,L,G,M,F,D,H</span><br><span class="line">         F	C,M,L,A,D,G</span><br><span class="line">         G	M</span><br><span class="line">         H	O</span><br><span class="line">         I	O,C</span><br><span class="line">         J	O</span><br><span class="line">         K	O,B</span><br><span class="line">         L	D,E</span><br><span class="line">         M	E,F</span><br><span class="line">         O	A,H,I,J,F</span><br><span class="line">     */</span><br><span class="line">    public static class SFMerge1Reducer1 extends Reducer&lt;Text,Text,Text,Text&gt;&#123;</span><br><span class="line">        private Text outValue = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            StringBuilder sb = new StringBuilder();</span><br><span class="line">            for (Text str :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                if( sb.length()!= 0 )&#123;</span><br><span class="line">                    sb.append(&quot;,&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                sb.append(str);</span><br><span class="line">            &#125;</span><br><span class="line">            outValue.set(sb.toString());</span><br><span class="line">            context.write(key,outValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class SFMerge1Mapper2 extends Mapper&lt;LongWritable,Text,Text,Text&gt;&#123;</span><br><span class="line">        private Text outValue = new Text();</span><br><span class="line">        private Text outKey = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            String[] splits = value.toString().split(&quot;\t&quot;);</span><br><span class="line">            String[] strings = splits[1].split(&quot;,&quot;);</span><br><span class="line">            outValue.set(splits[0]);</span><br><span class="line">            Arrays.sort(strings);</span><br><span class="line">            for (int i = 0; i &lt; strings.length - 1; i++) &#123;</span><br><span class="line">                for (int j = i+1; j &lt; strings.length; j++) &#123;</span><br><span class="line">                    outKey.set(strings[i]+&quot;-&quot;+strings[j]);</span><br><span class="line">                    context.write(outKey,outValue);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç¬¬äºŒæ¬¡reducerè¾“å‡ºç»“æœï¼š</span><br><span class="line">         A-B	E,C</span><br><span class="line">         A-C	D,F</span><br><span class="line">         A-D	E,F</span><br><span class="line">         A-E	B,C,D</span><br><span class="line">         A-F	C,E,O,D,B</span><br><span class="line">         A-G	E,F,C,D</span><br><span class="line">         A-H	C,D,E,O</span><br><span class="line">         A-I	O</span><br><span class="line">         A-J	O,B</span><br><span class="line">         A-K	C,D</span><br><span class="line">         A-L	F,D,E</span><br><span class="line">         A-M	F,E</span><br><span class="line">         B-C	A</span><br><span class="line">         B-D	A,E</span><br><span class="line">         B-E	C</span><br><span class="line">         B-F	C,A,E</span><br><span class="line">         B-G	E,C,A</span><br><span class="line">         B-H	E,C,A</span><br><span class="line">         B-I	A</span><br><span class="line">         B-K	A,C</span><br><span class="line">         B-L	E</span><br><span class="line">         B-M	E</span><br><span class="line">         B-O	A,K</span><br><span class="line">         C-D	A,F</span><br><span class="line">         C-E	D</span><br><span class="line">         C-F	A,D</span><br><span class="line">         C-G	A,D,F</span><br><span class="line">         C-H	D,A</span><br><span class="line">         C-I	A</span><br><span class="line">         C-K	A,D</span><br><span class="line">         C-L	D,F</span><br><span class="line">         C-M	F</span><br><span class="line">         C-O	I,A</span><br><span class="line">         D-E	L</span><br><span class="line">         D-F	A,E</span><br><span class="line">         D-G	E,A,F</span><br><span class="line">         D-H	A,E</span><br><span class="line">         D-I	A</span><br><span class="line">         D-K	A</span><br><span class="line">         D-L	E,F</span><br><span class="line">         D-M	F,E</span><br><span class="line">         D-O	A</span><br><span class="line">         E-F	D,M,C,B</span><br><span class="line">         E-G	C,D</span><br><span class="line">         E-H	C,D</span><br><span class="line">         E-J	B</span><br><span class="line">         E-K	C,D</span><br><span class="line">         E-L	D</span><br><span class="line">         F-G	D,C,A,E</span><br><span class="line">         F-H	A,D,O,E,C</span><br><span class="line">         F-I	O,A</span><br><span class="line">         F-J	B,O</span><br><span class="line">         F-K	D,C,A</span><br><span class="line">         F-L	E,D</span><br><span class="line">         F-M	E</span><br><span class="line">         F-O	A</span><br><span class="line">         G-H	D,C,E,A</span><br><span class="line">         G-I	A</span><br><span class="line">         G-K	D,A,C</span><br><span class="line">         G-L	D,F,E</span><br><span class="line">         G-M	E,F</span><br><span class="line">         G-O	A</span><br><span class="line">         H-I	O,A</span><br><span class="line">         H-J	O</span><br><span class="line">         H-K	A,C,D</span><br><span class="line">         H-L	D,E</span><br><span class="line">         H-M	E</span><br><span class="line">         H-O	A</span><br><span class="line">         I-J	O</span><br><span class="line">         I-K	A</span><br><span class="line">         I-O	A</span><br><span class="line">         K-L	D</span><br><span class="line">         K-O	A</span><br><span class="line">         L-M	E,F</span><br><span class="line"></span><br><span class="line">     */</span><br><span class="line">    public static class SFMerge1Reducer2 extends Reducer&lt;Text,Text,Text,Text&gt;&#123;</span><br><span class="line">        private Text outValue = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            StringBuilder sb = new StringBuilder();</span><br><span class="line">            for (Text str :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                if(sb.length()!= 0)&#123;</span><br><span class="line">                    sb.append(&quot;,&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                sb.append(str);</span><br><span class="line">                outValue.set(sb.toString());</span><br><span class="line">            &#125;</span><br><span class="line">            context.write(key,outValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[wordcountå­¦ç”Ÿæˆç»©æ™®é€šç‰ˆæ¡ˆä¾‹]]></title>
      <url>/wordcount%E5%AD%A6%E7%94%9F%E6%88%90%E7%BB%A9%E6%99%AE%E9%80%9A%E7%89%88%E6%A1%88%E4%BE%8B.html</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Practice.StudentScores;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é¢˜ç›®ï¼šå­¦ç”Ÿæˆç»©æ™®é€šç‰ˆ</span><br><span class="line"> *</span><br><span class="line"> *   computer,huangxiaoming,85</span><br><span class="line">     computer,xuzheng,54</span><br><span class="line">     computer,huangbo,86</span><br><span class="line">     computer,liutao,85</span><br><span class="line">     computer,huanglei,99</span><br><span class="line">     computer,liujialing,85</span><br><span class="line">     computer,liuyifei,75</span><br><span class="line">     computer,huangdatou,48</span><br><span class="line">     computer,huangjiaju,88</span><br><span class="line">     computer,huangzitao,85</span><br><span class="line">     english,zhaobenshan,57</span><br><span class="line">     english,liuyifei,85</span><br><span class="line">     english,liuyifei,76</span><br><span class="line">     english,huangdatou,48</span><br><span class="line">     english,zhouqi,85</span><br><span class="line">     english,huangbo,85</span><br><span class="line">     english,huangxiaoming,96</span><br><span class="line">     english,huanglei,85</span><br><span class="line">     english,liujialing,75</span><br><span class="line">     algorithm,liuyifei,75</span><br><span class="line">     algorithm,huanglei,76</span><br><span class="line">     algorithm,huangjiaju,85</span><br><span class="line">     algorithm,liutao,85</span><br><span class="line">     algorithm,huangdou,42</span><br><span class="line">     algorithm,huangzitao,81</span><br><span class="line">     math,wangbaoqiang,85</span><br><span class="line">     math,huanglei,76</span><br><span class="line">     math,huangjiaju,85</span><br><span class="line">     math,liutao,48</span><br><span class="line">     math,xuzheng,54</span><br><span class="line">     math,huangxiaoming,85</span><br><span class="line">     math,liujialing,85</span><br><span class="line"> *</span><br><span class="line"> * 1ã€æ¯ä¸€ä¸ªcourseçš„æœ€é«˜åˆ†ï¼Œæœ€ä½åˆ†ï¼Œå¹³å‡åˆ†</span><br><span class="line"> è¿”å›ç»“æœæ ¼å¼ï¼š</span><br><span class="line"> course	max=95	min=22	avg=55</span><br><span class="line"> ä¾‹å­ï¼š</span><br><span class="line"> computer	max=99	min=48	avg=75</span><br><span class="line"></span><br><span class="line"> è§£é¢˜æ€è·¯ï¼šåœ¨mapä»¥courseä½œä¸ºkeyå€¼ï¼Œå…¶ä½™éƒ¨åˆ†ä½œä¸ºvalueï¼Œåœ¨reduceä¸­è®¾ç½®å˜é‡maxï¼Œminï¼Œavgï¼Œé€šè¿‡ç´¯è®¡æ±‚å‡ºï¼Œå¹¶è®¾ç½®æ ¼å¼</span><br><span class="line"></span><br><span class="line"> 2ã€æ±‚è¯¥æˆç»©è¡¨å½“ä¸­å‡ºç°äº†ç›¸åŒåˆ†æ•°çš„åˆ†æ•°ï¼Œè¿˜æœ‰æ¬¡æ•°ï¼Œä»¥åŠè¯¥åˆ†æ•°çš„äºº</span><br><span class="line"> è¿”å›ç»“æœçš„æ ¼å¼ï¼š</span><br><span class="line"> ç§‘ç›®	åˆ†æ•°	æ¬¡æ•°	è¯¥åˆ†æ•°çš„äºº</span><br><span class="line"> ä¾‹å­ï¼š</span><br><span class="line"> computer	85	3	huangzitao,liujialing,huangxiaoming</span><br><span class="line"></span><br><span class="line"> è§£é¢˜æ€è·¯ï¼šæ±‚æŸç§‘ç›®ä¸­å‡ºç°ç³»ç»Ÿåˆ†æ•°çš„äººæ•°ä»¥åŠåˆ†æ•°ï¼Œmapä»¥ç§‘ç›®å’Œåˆ†æ•°ä½œä¸ºkeyå€¼ï¼Œè¿›è¡Œåˆ†ç»„ï¼Œåœ¨reduceä¸­è¿›è¡Œè®¡æ•°ï¼Œå½“è®¡æ•°ç»“æœå¤§äº1æ—¶ï¼Œè¾“å‡ºåˆ†æ•°ï¼Œäººæ•°å’Œäººå</span><br><span class="line"> */</span><br><span class="line">public class StudentScores1 &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException &#123;</span><br><span class="line">        Configuration conf = new Configuration();</span><br><span class="line">        FileSystem fs = FileSystem.get(conf);</span><br><span class="line"></span><br><span class="line">        Job job = Job.getInstance(conf);</span><br><span class="line">        job.setJar(&quot;wordcountJar/wordcount.jar&quot;);</span><br><span class="line">//        job.setMapperClass(StudentScoresMapper.class);</span><br><span class="line">//        job.setReducerClass(StudentScoresReducer.class);</span><br><span class="line">        job.setMapperClass(StudentScoresMapper2.class);</span><br><span class="line">        job.setReducerClass(StudentScoresReducer2.class);</span><br><span class="line"></span><br><span class="line">//        job.setOutputKeyClass(Text.class);</span><br><span class="line">//        job.setOutputValueClass(IntWritable.class);</span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(Text.class);</span><br><span class="line"></span><br><span class="line">        Path inputPath = new Path(&quot;input/studentScores&quot;);</span><br><span class="line">        Path outputPath = new Path(&quot;output/studentScores&quot;);</span><br><span class="line"></span><br><span class="line">        if(fs.isDirectory(outputPath))&#123;</span><br><span class="line">            fs.delete(outputPath,true);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        FileInputFormat.setInputPaths(job,inputPath);</span><br><span class="line">        FileOutputFormat.setOutputPath(job,outputPath);</span><br><span class="line"></span><br><span class="line">        Boolean waitForCompletion = job.waitForCompletion(true);</span><br><span class="line">        System.exit(waitForCompletion ? 0 : 1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç¬¬ä¸€é¢˜</span><br><span class="line">     */</span><br><span class="line">    public static class StudentScoresMapper extends Mapper&lt;LongWritable,Text,Text,IntWritable&gt; &#123;</span><br><span class="line">        private IntWritable outValue = new IntWritable();</span><br><span class="line">        private Text outKey = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            String[] splits = value.toString().split(&quot;,&quot;);</span><br><span class="line">            outKey.set(splits[0]);</span><br><span class="line">            outValue.set(Integer.parseInt(splits[2]));</span><br><span class="line">            context.write(outKey,outValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç¬¬ä¸€é¢˜</span><br><span class="line">     */</span><br><span class="line">    public static class StudentScoresReducer extends Reducer&lt;Text,IntWritable,Text,Text&gt; &#123;</span><br><span class="line">        private Text outValue = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            int min = 1000 ;</span><br><span class="line">            int max = 0 ;</span><br><span class="line">            int avg  ;</span><br><span class="line">            int sum = 0 ;</span><br><span class="line">            int count = 0 ;</span><br><span class="line">            //æ–¹æ³•ä¸€ï¼šæœ€å¤§æœ€å°é€šè¿‡é€ä¸€æ¯”è¾ƒå¾—åˆ°</span><br><span class="line">//            for (IntWritable val:</span><br><span class="line">//                 values) &#123;</span><br><span class="line">//                int score = val.get();</span><br><span class="line">//                if(max  &lt; score)&#123;</span><br><span class="line">//                    max = score;</span><br><span class="line">//                &#125;</span><br><span class="line">//                if(min &gt; score)&#123;</span><br><span class="line">//                    min = score ;</span><br><span class="line">//                &#125;</span><br><span class="line">//                sum += score ;</span><br><span class="line">//                count++ ;</span><br><span class="line">//            &#125;</span><br><span class="line">//                avg = sum /count ;</span><br><span class="line">//                String outStr = &quot;max=&quot;+max+&quot; min=&quot;+min+&quot; avg=&quot;+avg;</span><br><span class="line">//                outValue.set(outStr);</span><br><span class="line"></span><br><span class="line">            //æ–¹æ³•äºŒï¼šæœ€å¤§æœ€å°å€¼é€šè¿‡é›†åˆæ•°ç»„å¾—åˆ°</span><br><span class="line">            List&lt;Integer&gt; scores = new ArrayList&lt;&gt;();</span><br><span class="line">            for (IntWritable val :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                scores.add(val.get());</span><br><span class="line">                sum += val.get();</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">            Collections.sort(scores);</span><br><span class="line">            min = scores.get(0);</span><br><span class="line">            max = scores.get(scores.size()-1);</span><br><span class="line">            avg = sum / count ;</span><br><span class="line">            String outStr = &quot;max=&quot;+max+&quot; min=&quot;+min+&quot; avg=&quot;+avg;</span><br><span class="line">            outValue.set(outStr);</span><br><span class="line">            context.write(key,outValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç¬¬äºŒé¢˜</span><br><span class="line">     */</span><br><span class="line">    public static class StudentScoresMapper2 extends Mapper&lt;LongWritable,Text,Text,Text&gt;&#123;</span><br><span class="line">        private Text outKey = new Text();</span><br><span class="line">        private Text outValue = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            String[] splits = value.toString().split(&quot;,&quot;);</span><br><span class="line">            outKey.set(splits[0]+&quot;\t&quot;+splits[2]);</span><br><span class="line">            outValue.set(splits[1]);</span><br><span class="line">            context.write(outKey,outValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç¬¬äºŒé¢˜</span><br><span class="line">     */</span><br><span class="line">    public static class StudentScoresReducer2 extends Reducer&lt;Text,Text,Text,Text&gt;&#123;</span><br><span class="line">        private Text outValue = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            StringBuilder sb = new StringBuilder();</span><br><span class="line">            int count = 0 ;</span><br><span class="line">            for (Text text :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                if(sb.length()!=0)&#123;</span><br><span class="line">                    sb.append(&quot;,&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                sb.append(text);</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">            //å¦‚æœcountå¤§äºç­‰äº2ï¼Œè¯´æ˜æœ‰åˆ†æ•°é‡åˆçš„</span><br><span class="line">            if(count &gt;= 2 )&#123;</span><br><span class="line">                outValue.set(count+&quot; &quot;+sb.toString());</span><br><span class="line">                context.write(key,outValue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[wordcountæ±‚å­¦ç”Ÿå¹³å‡æˆç»©æ¡ˆä¾‹]]></title>
      <url>/wordcount%E6%B1%82%E5%AD%A6%E7%94%9F%E5%B9%B3%E5%9D%87%E6%88%90%E7%BB%A9%E6%A1%88%E4%BE%8B.html</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Practice.AverageScores;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.Practice.SameFriend.SameFriend;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.StringTokenizer;</span><br><span class="line">/**</span><br><span class="line"> * æ±‚å­¦ç”Ÿå¹³å‡æˆç»©</span><br><span class="line"> * è®¡ç®—å­¦ç”Ÿè€ƒè¯•å¹³å‡æˆç»© æºæ•°æ®ï¼š</span><br><span class="line">     å¼ ä¸‰ 98</span><br><span class="line">     æå›› 96</span><br><span class="line">     ç‹äº” 95</span><br><span class="line">     å¼ ä¸‰ 90</span><br><span class="line">     æå›› 92</span><br><span class="line">     ç‹äº” 99</span><br><span class="line">     å¼ ä¸‰ 80</span><br><span class="line">     æå›› 90</span><br><span class="line">     ç‹äº” 94</span><br><span class="line">     å¼ ä¸‰ 82</span><br><span class="line">     æå›› 92</span><br><span class="line"> */</span><br><span class="line">public class AverageScores &#123;</span><br><span class="line">    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException &#123;</span><br><span class="line">        Configuration conf = new Configuration();</span><br><span class="line">        FileSystem fs = FileSystem.get(conf);</span><br><span class="line"></span><br><span class="line">        Job job = Job.getInstance(conf);</span><br><span class="line">        job.setJar(&quot;wordcountJar/wordcount.jar&quot;);</span><br><span class="line"></span><br><span class="line">        job.setMapperClass(AverageScoresMapper.class);</span><br><span class="line">        job.setReducerClass(AverageScoresReducer.class);</span><br><span class="line"></span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line"></span><br><span class="line">        Path inputPath = new Path(&quot;input/AverageScore&quot;);</span><br><span class="line">        Path outputPath = new Path(&quot;output/AverageScore&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        if(fs.isDirectory(outputPath))&#123;</span><br><span class="line">            fs.delete(outputPath,true);</span><br><span class="line">        &#125;</span><br><span class="line">        FileInputFormat.setInputPaths(job,inputPath);</span><br><span class="line">        FileOutputFormat.setOutputPath(job,outputPath);</span><br><span class="line"></span><br><span class="line">        boolean waitForCompletion = job.waitForCompletion(true);</span><br><span class="line">        System.exit(waitForCompletion ? 0 : 1 );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class AverageScoresMapper extends Mapper&lt;LongWritable,Text,Text,IntWritable&gt; &#123;</span><br><span class="line">        private Text outKey = new Text();</span><br><span class="line">        private IntWritable outValue = new IntWritable();</span><br><span class="line">        @Override</span><br><span class="line">        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            String[] splits = value.toString().split(&quot;\t&quot;);</span><br><span class="line">            outKey.set(splits[0]);</span><br><span class="line">            outValue.set(Integer.parseInt(splits[1]));</span><br><span class="line">            context.write(outKey,outValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class AverageScoresReducer extends Reducer&lt;Text,IntWritable,Text,IntWritable&gt; &#123;</span><br><span class="line">        private IntWritable outValue = new IntWritable();</span><br><span class="line">        @Override</span><br><span class="line">        protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            int avg = 0 ;</span><br><span class="line">            int sum = 0 ;</span><br><span class="line">            int count = 0 ;</span><br><span class="line">            for (IntWritable val :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                int score = val.get();</span><br><span class="line">                sum += score ;</span><br><span class="line">                count ++ ;</span><br><span class="line">            &#125;</span><br><span class="line">            avg = sum /count ;</span><br><span class="line">            outValue.set(avg);</span><br><span class="line">            context.write(key,outValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[wordcountæ•°æ®å»é‡æ¡ˆä¾‹]]></title>
      <url>/wordcount%E6%95%B0%E6%8D%AE%E5%8E%BB%E9%87%8D%E6%A1%88%E4%BE%8B.html</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Practice.RemoveDupData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.NullWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é¢˜ç›®ï¼šæ•°æ®å»é‡</span><br><span class="line"> * è§£é¢˜æ€è·¯ï¼šå°†æ¯è¡Œæ•°æ®ä½œä¸ºkeyå€¼ï¼Œvalueå€¼ä¸ºç©º</span><br><span class="line"> *  2012-3-1 a</span><br><span class="line">    2012-3-2 b</span><br><span class="line">    2012-3-3 c</span><br><span class="line">    2012-3-4 d</span><br><span class="line">    2012-3-5 a</span><br><span class="line">    2012-3-6 b</span><br><span class="line">    2012-3-7 c</span><br><span class="line">    2012-3-3 c</span><br><span class="line">    2012-3-1 b</span><br><span class="line">    2012-3-2 a</span><br><span class="line">    2012-3-3 b</span><br><span class="line">    2012-3-4 d</span><br><span class="line">    2012-3-5 a</span><br><span class="line">    2012-3-6 c</span><br><span class="line">    2012-3-7 d</span><br><span class="line">    2012-3-3 c</span><br><span class="line"> */</span><br><span class="line">public class RemoveDupData &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException &#123;</span><br><span class="line">        Configuration conf = new Configuration();</span><br><span class="line">        FileSystem fs = FileSystem.get(conf);</span><br><span class="line"></span><br><span class="line">        Job job = Job.getInstance(conf);</span><br><span class="line">        job.setJar(&quot;wordcountJar/wordcount.jar&quot;);</span><br><span class="line"></span><br><span class="line">        job.setMapperClass(RemoveDupDataMapper.class);</span><br><span class="line">        job.setReducerClass(RemoveDupDataReducer.class);</span><br><span class="line"></span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(NullWritable.class);</span><br><span class="line"></span><br><span class="line">        Path inputPath = new Path(&quot;input/RemoveDupData&quot;);</span><br><span class="line">        Path outputPath = new Path(&quot;output/RemoveDupData&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        if(fs.isDirectory(outputPath))&#123;</span><br><span class="line">            fs.delete(outputPath,true);</span><br><span class="line">        &#125;</span><br><span class="line">        FileInputFormat.setInputPaths(job,inputPath);</span><br><span class="line">        FileOutputFormat.setOutputPath(job,outputPath);</span><br><span class="line"></span><br><span class="line">        boolean waitForCompletion = job.waitForCompletion(true);</span><br><span class="line">        System.exit(waitForCompletion ? 0 : 1 );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class RemoveDupDataMapper extends Mapper&lt;LongWritable,Text,Text,NullWritable&gt;&#123;</span><br><span class="line">        @Override</span><br><span class="line">        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            context.write(value,NullWritable.get());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class RemoveDupDataReducer extends Reducer&lt;Text,NullWritable,Text,NullWritable&gt;&#123;</span><br><span class="line">        @Override</span><br><span class="line">        protected void reduce(Text key, Iterable&lt;NullWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            context.write(key,NullWritable.get());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[wordcount äº’ä¸ºå¥½å‹å¯¹æ¡ˆä¾‹]]></title>
      <url>/wordcount%E4%BA%92%E4%B8%BA%E5%A5%BD%E5%8F%8B%E5%AF%B9%E6%A1%88%E4%BE%8B.html</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Practice.SameFriend2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.Practice.SameFriend.SameFriend;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ±‚äº’ç²‰å¥½å‹å¯¹ æ¯”å¦‚ï¼šå¦‚æœAå’ŒBäº’ä¸ºå¥½å‹ï¼Œé‚£ä¹ˆA-Bå³ä¸ºäº’ç²‰å¥½å‹å¯¹ã€‚</span><br><span class="line"> *   A:B,C,D,F,E,O</span><br><span class="line">     B:A,C,E,K</span><br><span class="line">     C:F,A,D,I</span><br><span class="line">     D:A,E,F,L</span><br><span class="line">     E:B,C,D,M,L</span><br><span class="line">     F:A,B,C,D,E,O,M</span><br><span class="line">     G:A,C,D,E,F</span><br><span class="line">     H:A,C,D,E,O</span><br><span class="line">     I:A,O</span><br><span class="line">     J:B,O</span><br><span class="line">     K:A,C,D</span><br><span class="line">     L:D,E,F</span><br><span class="line">     M:E,F,G</span><br><span class="line">     O:A,H,I,J,K</span><br><span class="line"> */</span><br><span class="line">public class SameFriend2 &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException &#123;</span><br><span class="line">        Configuration conf = new Configuration();</span><br><span class="line">        FileSystem fs = FileSystem.get(conf);</span><br><span class="line"></span><br><span class="line">        Job job = Job.getInstance(conf);</span><br><span class="line">        job.setJar(&quot;wordcountJar/wordcount.jar&quot;);</span><br><span class="line"></span><br><span class="line">        job.setMapperClass(SameFriend2Mapper.class);</span><br><span class="line">        job.setReducerClass(SameFriend2Reducer.class);</span><br><span class="line"></span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line"></span><br><span class="line">        Path inputPath = new Path(&quot;input/SameFriend2&quot;);</span><br><span class="line">        Path outputPath = new Path(&quot;output/SameFriend2&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        if(fs.isDirectory(outputPath))&#123;</span><br><span class="line">            fs.delete(outputPath,true);</span><br><span class="line">        &#125;</span><br><span class="line">        FileInputFormat.setInputPaths(job,inputPath);</span><br><span class="line">        FileOutputFormat.setOutputPath(job,outputPath);</span><br><span class="line"></span><br><span class="line">        boolean waitForCompletion = job.waitForCompletion(true);</span><br><span class="line">        System.exit(waitForCompletion ? 0 : 1 );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class SameFriend2Mapper extends Mapper&lt;LongWritable,Text,Text,IntWritable&gt; &#123;</span><br><span class="line">        private Text outKey = new Text();</span><br><span class="line">        private IntWritable outValue = new IntWritable(1);</span><br><span class="line">        @Override</span><br><span class="line">        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            String[] splits = value.toString().split(&quot;:&quot;);</span><br><span class="line">            String[] strings = splits[1].split(&quot;,&quot;);</span><br><span class="line">            for (String str:</span><br><span class="line">                 strings) &#123;</span><br><span class="line">                //å…³é”®ä»£ç ï¼šå¦‚æœAå’ŒBäº’ä¸ºå¥½å‹ï¼Œåˆ™å¿…å®šå­˜åœ¨A-Bå’ŒB-Aï¼Œæ­¤å¤„çš„ä½œç”¨å°±æ˜¯å°†A-Bå’ŒB-A éƒ½ç¼–ç¨‹ä¸ºA-Bï¼Œæˆ–è€…éƒ½ç¼–ç¨‹ä¸ºB-A</span><br><span class="line">                if(splits[0].compareTo(str)&gt;0)&#123;</span><br><span class="line">                    outKey.set(str+&quot;-&quot;+splits[0]);</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    outKey.set(splits[0]+&quot;-&quot;+str);</span><br><span class="line">                &#125;</span><br><span class="line">               context.write(outKey,outValue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å¦‚æœäº’ä¸ºå¥½å‹å¯¹ï¼Œcountå¿…å®šä¸º2</span><br><span class="line">     */</span><br><span class="line">    public static class SameFriend2Reducer extends Reducer&lt;Text,IntWritable,Text,IntWritable&gt; &#123;</span><br><span class="line">        private IntWritable outValue = new IntWritable();</span><br><span class="line">        @Override</span><br><span class="line">        protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            int count = 0 ;</span><br><span class="line">            for (IntWritable val :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                count += val.get();</span><br><span class="line">            &#125;</span><br><span class="line">            //å½“countä¸º2æ—¶ï¼Œå³å¯æ±‚å‡ºå¥½å‹å¯¹</span><br><span class="line">            if(count == 2)&#123;</span><br><span class="line">                outValue.set(count);</span><br><span class="line">                context.write(key,outValue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>```</p>
]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> mapreduce </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[IDEA windowsæœ¬åœ°è¿è¡Œwordcountç¨‹åº]]></title>
      <url>/IDEAwindows%E6%9C%AC%E5%9C%B0%E8%BF%90%E8%A1%8Cwordcount%E7%A8%8B%E5%BA%8F.html</url>
      <content type="html"><![CDATA[<h3 id="ç¬¬ä¸€æ­¥åˆ›å»ºmavené¡¹ç›®"><a href="#ç¬¬ä¸€æ­¥åˆ›å»ºmavené¡¹ç›®" class="headerlink" title="ç¬¬ä¸€æ­¥åˆ›å»ºmavené¡¹ç›®"></a>ç¬¬ä¸€æ­¥åˆ›å»ºmavené¡¹ç›®</h3><h3 id="ç¬¬äºŒæ­¥åˆ›å»ºWordCountDemoç±»"><a href="#ç¬¬äºŒæ­¥åˆ›å»ºWordCountDemoç±»" class="headerlink" title="ç¬¬äºŒæ­¥åˆ›å»ºWordCountDemoç±»"></a>ç¬¬äºŒæ­¥åˆ›å»ºWordCountDemoç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wordcountModel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.StringTokenizer;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  æœ¬åœ°è¿è¡Œwordcountç¨‹åº</span><br><span class="line"> */</span><br><span class="line">public class WordCountDemo &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException &#123;</span><br><span class="line">        //æŒ‡å®šhdfsçš„ç›¸å…³å‚æ•°</span><br><span class="line">        Configuration conf = new Configuration() ;</span><br><span class="line">        FileSystem fs = FileSystem.get(conf);</span><br><span class="line"></span><br><span class="line">        //é€šè¿‡Configurationå¯¹è±¡è·å–jobå¯¹è±¡ï¼Œè¯¥jobå¯¹è±¡ä¼šç»„ç»‡æ‰€æœ‰çš„è¯¥mapreduceçš„æ‰€æœ‰å„ç§ç»„ä»¶</span><br><span class="line">        Job job = Job.getInstance(conf);</span><br><span class="line">        //æŒ‡å®šjaråŒ…æ‰€åœ¨è·¯å¾„ï¼Œæœ¬åœ°æ¨¡å¼éœ€è¦è¿™æ ·æŒ‡å®šï¼Œå¦‚æœä¸æ˜¯æœ¬åœ°ï¼Œåˆ™ä½¿ç”¨setJarByClassæŒ‡å®šæ‰€åœ¨classæ–‡ä»¶å³å¯</span><br><span class="line">        //job.setJarByClass(&quot;wordcountJar/wordcount.jar&quot;)</span><br><span class="line">        job.setJar(&quot;wordcountJar/wordcount.jar&quot;);</span><br><span class="line"></span><br><span class="line">        //æŒ‡å®šmapperç±»å’Œreducerç±»</span><br><span class="line">        job.setMapperClass(WordcountMapper.class);</span><br><span class="line">        job.setReducerClass(WordcountReducer.class);</span><br><span class="line"></span><br><span class="line">        //Mapperçš„è¾“å…¥key-valueç±»å‹ï¼Œç”±mapreduceæ¡†æ¶å†³å®š</span><br><span class="line">        //æŒ‡å®šmaptaskçš„è¾“å‡ºç±»å‹</span><br><span class="line">        job.setMapOutputKeyClass(Text.class);</span><br><span class="line">        job.setMapOutputValueClass(IntWritable.class);</span><br><span class="line">        // å‡å¦‚ mapTaskçš„è¾“å‡ºkey-valueç±»å‹ï¼Œè·ŸreduceTaskçš„è¾“å‡ºkey-valueç±»å‹ä¸€è‡´ï¼Œé‚£ä¹ˆï¼Œä»¥ä¸Šä¸¤å¥ä»£ç å¯ä»¥ä¸ç”¨è®¾ç½®</span><br><span class="line"></span><br><span class="line">        // reduceTaskçš„è¾“å…¥key-valueç±»å‹ å°±æ˜¯ mapTaskçš„è¾“å‡ºkey-valueç±»å‹ã€‚æ‰€ä»¥ä¸éœ€è¦æŒ‡å®š</span><br><span class="line">        // æŒ‡å®šreducetaskçš„è¾“å‡ºç±»å‹</span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line"></span><br><span class="line">        // ä¸ºjobæŒ‡å®šè¾“å…¥æ•°æ®çš„ç»„ä»¶å’Œè¾“å‡ºæ•°æ®çš„ç»„ä»¶ï¼Œä»¥ä¸‹ä¸¤ä¸ªå‚æ•°æ˜¯é»˜è®¤çš„ï¼Œæ‰€ä»¥ä¸æŒ‡å®šä¹Ÿæ˜¯OKçš„</span><br><span class="line">        // job.setInputFormatClass(TextInputFormat.class);</span><br><span class="line">        // job.setOutputFormatClass(TextOutputFormat.class);</span><br><span class="line"></span><br><span class="line">        // ä¸ºè¯¥mapreduceç¨‹åºåˆ¶å®šé»˜è®¤çš„æ•°æ®åˆ†åŒºç»„ä»¶ã€‚é»˜è®¤æ˜¯ HashPartitioner.class</span><br><span class="line">        // job.setPartitionerClass(HashPartitioner.class);</span><br><span class="line"></span><br><span class="line">        // æŒ‡å®šè¯¥mapreduceç¨‹åºæ•°æ®çš„è¾“å…¥å’Œè¾“å‡ºè·¯å¾„</span><br><span class="line">        Path inputPath = new Path(&quot;input/wordcount/&quot;);</span><br><span class="line">        Path outputPath = new Path(&quot;output/wordcount/&quot;);</span><br><span class="line"></span><br><span class="line">        // è®¾ç½®è¯¥MapReduceç¨‹åºçš„ReduceTaskçš„ä¸ªæ•°,é»˜è®¤ä¸º1</span><br><span class="line">        // job.setNumReduceTasks(3);</span><br><span class="line"></span><br><span class="line">        // è¯¥æ®µä»£ç æ˜¯ç”¨æ¥åˆ¤æ–­è¾“å‡ºè·¯å¾„å­˜åœ¨ä¸å­˜åœ¨ï¼Œå­˜åœ¨å°±åˆ é™¤ï¼Œè™½ç„¶æ–¹ä¾¿æ“ä½œï¼Œä½†è¯·è°¨æ…</span><br><span class="line">        if(fs.isDirectory(outputPath))&#123;</span><br><span class="line">            fs.delete(outputPath,true);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //è®¾ç½®wordcountç¨‹åºçš„è¾“å…¥è·¯å¾„</span><br><span class="line">        FileInputFormat.setInputPaths(job,inputPath);</span><br><span class="line">        //è®¾ç½®wordcountç¨‹åºçš„è¾“å‡ºè·¯å¾„</span><br><span class="line">        FileOutputFormat.setOutputPath(job,outputPath);</span><br><span class="line"></span><br><span class="line">        // job.submit();</span><br><span class="line">        // æœ€åæäº¤ä»»åŠ¡(verboseå¸ƒå°”å€¼ å†³å®šè¦ä¸è¦å°†è¿è¡Œè¿›åº¦ä¿¡æ¯è¾“å‡ºç»™ç”¨æˆ·)</span><br><span class="line">        boolean waitForCompletion = job.waitForCompletion(true);</span><br><span class="line">        System.exit( waitForCompletion ? 0 : 1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Mapper&lt;KEYIN, VALUEIN, KEYOUT, VALUEOUT&gt;</span><br><span class="line">     *</span><br><span class="line">     * KEYIN æ˜¯æŒ‡æ¡†æ¶è¯»å–åˆ°çš„æ•°æ®çš„keyçš„ç±»å‹ï¼Œåœ¨é»˜è®¤çš„InputFormatä¸‹ï¼Œè¯»åˆ°çš„keyæ˜¯ä¸€è¡Œæ–‡æœ¬çš„èµ·å§‹åç§»é‡ï¼Œæ‰€ä»¥keyçš„ç±»å‹æ˜¯Long</span><br><span class="line">     * VALUEIN æ˜¯æŒ‡æ¡†æ¶è¯»å–åˆ°çš„æ•°æ®çš„valueçš„ç±»å‹,åœ¨é»˜è®¤çš„InputFormatä¸‹ï¼Œè¯»åˆ°çš„valueæ˜¯ä¸€è¡Œæ–‡æœ¬çš„å†…å®¹ï¼Œæ‰€ä»¥valueçš„ç±»å‹æ˜¯String</span><br><span class="line">     * KEYOUT æ˜¯æŒ‡ç”¨æˆ·è‡ªå®šä¹‰é€»è¾‘æ–¹æ³•è¿”å›çš„æ•°æ®ä¸­keyçš„ç±»å‹ï¼Œç”±ç”¨æˆ·ä¸šåŠ¡é€»è¾‘å†³å®šï¼Œåœ¨æ­¤wordcountç¨‹åºä¸­ï¼Œæˆ‘ä»¬è¾“å‡ºçš„keyæ˜¯å•è¯ï¼Œæ‰€ä»¥æ˜¯String</span><br><span class="line">     * VALUEOUT æ˜¯æŒ‡ç”¨æˆ·è‡ªå®šä¹‰é€»è¾‘æ–¹æ³•è¿”å›çš„æ•°æ®ä¸­valueçš„ç±»å‹ï¼Œç”±ç”¨æˆ·ä¸šåŠ¡é€»è¾‘å†³å®š,åœ¨æ­¤wordcountç¨‹åºä¸­ï¼Œæˆ‘ä»¬è¾“å‡ºçš„valueæ˜¯å•è¯çš„æ•°é‡ï¼Œæ‰€ä»¥æ˜¯Integer</span><br><span class="line">     *</span><br><span class="line">     * ä½†æ˜¯ï¼ŒString ï¼ŒLongç­‰jdkä¸­è‡ªå¸¦çš„æ•°æ®ç±»å‹ï¼Œåœ¨åºåˆ—åŒ–æ—¶ï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œhadoopä¸ºäº†æé«˜åºåˆ—åŒ–æ•ˆç‡ï¼Œè‡ªå®šä¹‰äº†ä¸€å¥—åºåˆ—åŒ–æ¡†æ¶</span><br><span class="line">     * æ‰€ä»¥ï¼Œåœ¨hadoopçš„ç¨‹åºä¸­ï¼Œå¦‚æœè¯¥æ•°æ®éœ€è¦è¿›è¡Œåºåˆ—åŒ–ï¼ˆå†™ç£ç›˜ï¼Œæˆ–è€…ç½‘ç»œä¼ è¾“ï¼‰ï¼Œå°±ä¸€å®šè¦ç”¨å®ç°äº†hadoopåºåˆ—åŒ–æ¡†æ¶çš„æ•°æ®ç±»å‹</span><br><span class="line">     *</span><br><span class="line">     * Long ----&gt; LongWritable</span><br><span class="line">     * String ----&gt; Text</span><br><span class="line">     * Integer ----&gt; IntWritable</span><br><span class="line">     * Null ----&gt; NullWritable</span><br><span class="line">     */</span><br><span class="line">    public static class WordcountMapper extends Mapper&lt;LongWritable,Text,Text,IntWritable&gt; &#123;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * LongWritable key : è¯¥keyå°±æ˜¯valueè¯¥è¡Œæ–‡æœ¬çš„åœ¨æ–‡ä»¶å½“ä¸­çš„èµ·å§‹åç§»é‡</span><br><span class="line">         * Text value ï¼š å°±æ˜¯MapReduceæ¡†æ¶é»˜è®¤çš„æ•°æ®è¯»å–ç»„ä»¶TextInputFormatè¯»å–æ–‡ä»¶å½“ä¸­çš„ä¸€è¡Œæ–‡æœ¬</span><br><span class="line">         */</span><br><span class="line">        private Text word = new Text();</span><br><span class="line">        @Override</span><br><span class="line">        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            // åˆ‡åˆ†å•è¯</span><br><span class="line">            StringTokenizer tokenizer = new StringTokenizer(value.toString());</span><br><span class="line">            while (tokenizer.hasMoreTokens())&#123;</span><br><span class="line">                word.set(tokenizer.nextToken());</span><br><span class="line">                // æ¯ä¸ªå•è¯è®¡æ•°ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯æŠŠå•è¯ç»„ç»‡æˆ&lt;hello,1&gt;è¿™æ ·çš„key-valueå¯¹å¾€å¤–å†™å‡º</span><br><span class="line">                context.write(word,new IntWritable(1));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é¦–å…ˆï¼Œå’Œå‰é¢ä¸€æ ·ï¼ŒReducerç±»ä¹Ÿæœ‰è¾“å…¥å’Œè¾“å‡ºï¼Œè¾“å…¥å°±æ˜¯Mapé˜¶æ®µçš„å¤„ç†ç»“æœï¼Œè¾“å‡ºå°±æ˜¯Reduceæœ€åçš„è¾“å‡º</span><br><span class="line">     * reducetaskåœ¨è°ƒæˆ‘ä»¬å†™çš„reduceæ–¹æ³•,reducetaskåº”è¯¥æ”¶åˆ°äº†å‰ä¸€é˜¶æ®µï¼ˆmapé˜¶æ®µï¼‰ä¸­æ‰€æœ‰maptaskè¾“å‡ºçš„æ•°æ®ä¸­çš„ä¸€éƒ¨åˆ†</span><br><span class="line">     * ï¼ˆæ•°æ®çš„key.hashcode%reducetaskæ•°==æœ¬reductaskå·ï¼‰ï¼Œæ‰€ä»¥reducetaksçš„è¾“å…¥ç±»å‹å¿…é¡»å’Œmaptaskçš„è¾“å‡ºç±»å‹ä¸€æ ·</span><br><span class="line">     *</span><br><span class="line">     * reducetaskå°†è¿™äº›æ”¶åˆ°kvæ•°æ®æ‹¿æ¥å¤„ç†æ—¶ï¼Œæ˜¯è¿™æ ·è°ƒç”¨æˆ‘ä»¬çš„reduceæ–¹æ³•çš„ï¼š å…ˆå°†è‡ªå·±æ”¶åˆ°çš„æ‰€æœ‰çš„kvå¯¹æŒ‰ç…§kåˆ†ç»„ï¼ˆæ ¹æ®kæ˜¯å¦ç›¸åŒï¼‰</span><br><span class="line">     * å°†æŸä¸€ç»„kvä¸­çš„ç¬¬ä¸€ä¸ªkvä¸­çš„kä¼ ç»™reduceæ–¹æ³•çš„keyå˜é‡ï¼ŒæŠŠè¿™ä¸€ç»„kvä¸­æ‰€æœ‰çš„vç”¨ä¸€ä¸ªè¿­ä»£å™¨ä¼ ç»™reduceæ–¹æ³•çš„å˜é‡values</span><br><span class="line">     */</span><br><span class="line">    public static class WordcountReducer extends Reducer&lt;Text,IntWritable,Text,IntWritable&gt; &#123;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Text key : mapTaskè¾“å‡ºçš„keyå€¼</span><br><span class="line">         * Iterable&lt;IntWritable&gt; values ï¼š keyå¯¹åº”çš„valueçš„é›†åˆï¼ˆè¯¥keyåªæ˜¯ç›¸åŒçš„ä¸€ä¸ªkeyï¼‰</span><br><span class="line">         *</span><br><span class="line">         * reduceæ–¹æ³•æ¥æ”¶keyå€¼ç›¸åŒçš„ä¸€ç»„key-valueè¿›è¡Œæ±‡æ€»è®¡ç®—</span><br><span class="line">         */</span><br><span class="line">        private IntWritable result = new IntWritable();</span><br><span class="line">        @Override</span><br><span class="line">        protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">            //ç»“æœæ±‡æ€»</span><br><span class="line">            int sum = 0 ;</span><br><span class="line">            for (IntWritable val:</span><br><span class="line">                 values ) &#123;</span><br><span class="line">                sum += val.get();</span><br><span class="line">            &#125;</span><br><span class="line">            //æ±‡æ€»çš„ç»“æœå¾€å¤–è¾“å‡º</span><br><span class="line">            result.set(sum);</span><br><span class="line">            context.write(key,result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼šwordcountç¨‹åºåŠ è½½é…ç½®æ–‡ä»¶çš„é¡ºåºä¸º:</p>
<pre><code>1ã€conf.set(&quot;fs.defaultFS&quot;,&quot;hdfs://hadoop01:9000&quot;);
2ã€é€šè¿‡åŠ è½½é…ç½®æ–‡ä»¶ï¼š
    conf.addResource(&quot;hdfs_config/core-site.xml&quot;);
    conf.addResource(&quot;hdfs_config/hdfs-site.xml&quot;);
3ã€åŠ è½½æœ¬åœ°hadoopçš„jaråŒ…ä¸­çš„é…ç½®æ–‡ä»¶
</code></pre><p>æ‰€ä»¥ï¼Œå¦‚æœè¦è¿›è¡Œæœ¬åœ°è¿è¡Œwordcountç¨‹åºï¼Œåˆ™ä½¿ç”¨ç¬¬äºŒç§ï¼Œå³ä¸éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œç¨‹åºä¼šè‡ªåŠ¨åŠ è½½ã€‚å¦‚æœé…ç½®æ–‡ä»¶å¤¹ä¸­å·²ç»å­˜åœ¨å·²ç»é…ç½®å¥½çš„æ–‡ä»¶ï¼Œç¨‹åºä¼šä¼˜å…ˆåŠ è½½é…ç½®æ–‡ä»¶å¤¹ä¸­çš„é…ç½®æ–‡ä»¶ã€‚</p>
<h3 id="ç¬¬ä¸‰æ­¥-å¯¼å…¥jaråŒ…"><a href="#ç¬¬ä¸‰æ­¥-å¯¼å…¥jaråŒ…" class="headerlink" title="ç¬¬ä¸‰æ­¥ å¯¼å…¥jaråŒ…"></a>ç¬¬ä¸‰æ­¥ å¯¼å…¥jaråŒ…</h3><p><img src="http://ou3xxg3hg.bkt.clouddn.com/%E5%AF%BC%E5%87%BAjar%E5%8C%85.gif" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h3 id="ç¬¬å››æ­¥-è¿è¡Œç¨‹åº"><a href="#ç¬¬å››æ­¥-è¿è¡Œç¨‹åº" class="headerlink" title="ç¬¬å››æ­¥ è¿è¡Œç¨‹åº"></a>ç¬¬å››æ­¥ è¿è¡Œç¨‹åº</h3><h4 id="æ³¨ï¼šéƒ¨åˆ†æ³¨æ„äº‹é¡¹å†™åœ¨ç¨‹åºæ³¨é‡Šä¸­ã€‚"><a href="#æ³¨ï¼šéƒ¨åˆ†æ³¨æ„äº‹é¡¹å†™åœ¨ç¨‹åºæ³¨é‡Šä¸­ã€‚" class="headerlink" title="æ³¨ï¼šéƒ¨åˆ†æ³¨æ„äº‹é¡¹å†™åœ¨ç¨‹åºæ³¨é‡Šä¸­ã€‚"></a>æ³¨ï¼šéƒ¨åˆ†æ³¨æ„äº‹é¡¹å†™åœ¨ç¨‹åºæ³¨é‡Šä¸­ã€‚</h4>]]></content>
      
        <categories>
            
            <category> å¤§æ•°æ® </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[shellå®ç°ä¹ä¹ä¹˜æ³•è¡¨]]></title>
      <url>/shell%E5%AE%9E%E7%8E%B0%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95%E8%A1%A8.html</url>
      <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for (( i=1;i&lt;=9;i++ ))</span><br><span class="line">do</span><br><span class="line">        for (( j=1;j&lt;=i;j++ ))</span><br><span class="line">        do</span><br><span class="line">            echo -n "$j*$i=$[$j*$i] "</span><br><span class="line">        done</span><br><span class="line">        echo -e '\n'</span><br><span class="line">done</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Linux </category>
            
        </categories>
        
        
        <tags>
            
            <tag> shell </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[é…ç½®163äº‘æºrepo]]></title>
      <url>/%E9%85%8D%E7%BD%AE163%E4%BA%91%E6%BA%90repo.html</url>
      <content type="html"><![CDATA[<ol>
<li><p>è¿›å…¥yumé…ç½®æ–‡ä»¶ç›®å½•<br>cd /etc/yum.repos.d/</p>
</li>
<li><p>å¤‡ä»½é…ç½®æ–‡ä»¶<br>  mv CentOS-Base.repo CentOS-Base.repo.bak</p>
</li>
<li><p>ä¸‹è½½163çš„é…ç½®<br> wget <span class="exturl" data-url="aHR0cDovL21pcnJvcnMuMTYzLmNvbS8uaGVscC9DZW50T1M2LQ==" title="http://mirrors.163.com/.help/CentOS6-">http://mirrors.163.com/.help/CentOS6-<i class="fa fa-external-link"></i></span>              Base-163.repoï¼Œä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶åä¸º CentOS6-    Base-163.repo</p>
</li>
<li><p>æ”¹å<br> mv CentOS6-Base-163.repo CentOS-Base.repo</p>
</li>
<li><p>æ›´æ–°æ•°æ®åº“<br> yum update</p>
</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Linux </category>
            
        </categories>
        
        
        <tags>
            
            <tag> rpm </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Springä¾µå…¥å¼å’Œéä¾µå…¥å¼çš„åŒºåˆ«]]></title>
      <url>/Spring%E4%BE%B5%E5%85%A5%E5%BC%8F%E5%92%8C%E9%9D%9E%E4%BE%B5%E5%85%A5%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB.html</url>
      <content type="html"><![CDATA[<h2 id="ç®€å•è§£é‡Šï¼š"><a href="#ç®€å•è§£é‡Šï¼š" class="headerlink" title="ç®€å•è§£é‡Šï¼š"></a>ç®€å•è§£é‡Šï¼š</h2><p>ä¾µå…¥å¼ï¼šä½¿ç”¨è€…ç¼–å†™ä»£ç æ—¶ï¼Œéœ€è¦ç»§æ‰¿æˆ–è€…å®ç°æ¡†æ¶çš„ç±»æˆ–æ¥å£ï¼Œéœ€è¦ä¾èµ–æ¡†æ¶ã€‚<br>éä¾µå…¥å¼ï¼šä½¿ç”¨è€…ç¼–å†™ä»£ç æ—¶ï¼Œæ— éœ€ç»§æ‰¿æˆ–è€…å®ç°æ¡†æ¶çš„ç±»æˆ–æ¥å£ï¼Œå¯Ÿè§‰ä¸åˆ°æ¡†æ¶çš„å­˜åœ¨ã€‚</p>
<hr>
<h2 id="Springæ¡†æ¶æ˜¯ä¸€ç§éä¾µå…¥å¼çš„è½»é‡çº§æ¡†æ¶"><a href="#Springæ¡†æ¶æ˜¯ä¸€ç§éä¾µå…¥å¼çš„è½»é‡çº§æ¡†æ¶" class="headerlink" title="Springæ¡†æ¶æ˜¯ä¸€ç§éä¾µå…¥å¼çš„è½»é‡çº§æ¡†æ¶"></a>Springæ¡†æ¶æ˜¯ä¸€ç§éä¾µå…¥å¼çš„è½»é‡çº§æ¡†æ¶</h2><p>###1.éä¾µå…¥å¼çš„æŠ€æœ¯ä½“ç°<br>å…è®¸åœ¨åº”ç”¨ç³»ç»Ÿä¸­è‡ªç”±é€‰æ‹©å’Œç»„è£…Springæ¡†æ¶çš„å„ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œå¹¶ä¸”ä¸å¼ºåˆ¶è¦æ±‚åº”ç”¨ç³»ç»Ÿçš„ç±»å¿…é¡»ä»Springæ¡†æ¶çš„ç³»ç»ŸAPIçš„æŸä¸ªç±»æ¥ç»§æ‰¿æˆ–è€…å®ç°æŸä¸ªæ¥å£ã€‚</p>
<h3 id="2-å¦‚ä½•å®ç°éä¾µå…¥å¼çš„è®¾è®¡ç›®æ ‡çš„"><a href="#2-å¦‚ä½•å®ç°éä¾µå…¥å¼çš„è®¾è®¡ç›®æ ‡çš„" class="headerlink" title="2.å¦‚ä½•å®ç°éä¾µå…¥å¼çš„è®¾è®¡ç›®æ ‡çš„"></a>2.å¦‚ä½•å®ç°éä¾µå…¥å¼çš„è®¾è®¡ç›®æ ‡çš„</h3><p> 1ï¼‰åº”ç”¨åå°„æœºåˆ¶ï¼Œé€šè¿‡åŠ¨æ€è°ƒç”¨çš„æ–¹å¼æ¥æä¾›å„æ–¹é¢çš„åŠŸèƒ½ï¼Œå»ºç«‹æ ¸å¿ƒç»„é—´BeanFactory<br> 2ï¼‰é…åˆä½¿ç”¨Springæ¡†æ¶ä¸­çš„BeanWrapperå’ŒBeanFactoryç»„ä»¶ç±»æœ€ç»ˆè¾¾åˆ°å¯¹è±¡çš„å®ä¾‹åˆ›å»ºå’Œå±æ€§æ³¨å…¥<br> 3ï¼‰ä¼˜ç‚¹ï¼šå…è®¸æ‰€å¼€å‘å‡ºæ¥çš„åº”ç”¨ç³»ç»Ÿèƒ½å¤Ÿåœ¨ä¸ç”¨çš„ç¯å¢ƒä¸­è‡ªç”±ç§»æ¤ï¼Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨ç³»ç»Ÿä¸­çš„æ ¸å¿ƒåŠŸèƒ½å®ç°çš„ä»£ç </p>
]]></content>
      
        <categories>
            
            <category> æ¡†æ¶ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¸¸è§SQLè¯­å¥]]></title>
      <url>/%E5%B8%B8%E8%A7%81SQL%E8%AF%AD%E5%8F%A5.html</url>
      <content type="html"><![CDATA[<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> employee</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> empno=<span class="number">9999</span>;</span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp ;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">2000</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span> <span class="keyword">and</span> sal &gt; <span class="number">2000</span> ;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span> <span class="keyword">or</span> sal &gt; <span class="number">2000</span> ;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">1000</span> <span class="keyword">and</span> <span class="number">3000</span> ;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7788</span> <span class="keyword">or</span> empno = <span class="number">7369</span> <span class="keyword">or</span> empno=<span class="number">7521</span>;</span><br><span class="line">&lt;!---more---&gt;</span><br><span class="line"><span class="comment">-- in</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="keyword">in</span>(<span class="number">7788</span>,<span class="number">7369</span>,<span class="number">7521</span>);</span><br><span class="line"><span class="comment">-- DISTINCT å»é‡</span></span><br><span class="line"><span class="keyword">select</span> job <span class="keyword">from</span> emp ;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">DISTINCT</span> job <span class="keyword">from</span> emp ;</span><br><span class="line"><span class="comment">-- åˆ«åï¼ˆå­—æ®µï¼Œè¡¨ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> empno  å‘˜å·¥ç¼–å·,ename å‘˜å·¥å§“å <span class="keyword">from</span> emp ;</span><br><span class="line"><span class="keyword">select</span> ename,sal,sal*<span class="number">1.05</span> æ–°å·¥èµ„ <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp e ;</span><br><span class="line"><span class="keyword">select</span> e.ename,e.sal <span class="keyword">from</span> emp e ;</span><br><span class="line"><span class="comment">-- null çš„åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span> ;</span><br><span class="line"></span><br><span class="line"><span class="comment">--æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">--æŸ¥è¯¢æ‰€æœ‰Sæ‰“å¤´çš„å‘˜å·¥ä¿¡æ¯ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ % ä»£è¡¨0åˆ°å¤šä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'S%'</span>;</span><br><span class="line"><span class="comment">--æŸ¥è¯¢æ‰€æœ‰Nç»“å°¾çš„</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'%N'</span>;</span><br><span class="line"><span class="comment">--æŸ¥è¯¢æ‰€æœ‰åŒ…å«Sçš„</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'%S%'</span>;</span><br><span class="line"><span class="comment">--æŸ¥è¯¢æ‰€æœ‰ç¬¬äºŒä¸ªå­—ç¬¦ä¸ºLçš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'__L%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--æ’åº  (é»˜è®¤å‡åº   order byå­—æ®µ [asc]  | desc)</span></span><br><span class="line"><span class="comment">--é»˜è®¤  å‡åº</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal ;</span><br><span class="line"><span class="comment">--é™åº</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> ;</span><br><span class="line"><span class="comment">--æŒ‰ç…§å·¥èµ„çš„é™åºæ’åºï¼Œå¦‚æœå·¥èµ„ä¸€æ ·çš„ï¼Œåˆ™æŒ‰ç…§empnoçš„å‡åºæ’åº(ç”¨é€—å·)</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> , empno <span class="keyword">ASC</span>;</span><br><span class="line"><span class="comment">--é™åˆ¶ç»“æœæŸ¥è¯¢ï¼ˆlimit m,n)  mä»£è¡¨èµ·å§‹ç´¢å¼•ï¼Œnä»£è¡¨è®°å½•çš„æ•°ç›®,limit ä»…é€‚ç”¨äºMySQL</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">limit</span> <span class="number">5</span>,<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--æŸ¥è¯¢20å·éƒ¨é—¨å·¥èµ„æœ€é«˜çš„å‘˜å·¥çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = <span class="number">20</span> <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">1</span> ;</span><br><span class="line"></span><br><span class="line"><span class="comment">--è®¡ç®—3çš„15æ¬¡æ–¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--æ•°å­¦å‡½æ•°</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ABS</span>(<span class="number">10</span>);  <span class="comment">--ç»å¯¹å€¼</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CEIL</span>(<span class="number">-12.3</span>);   <span class="comment">--å‘ä¸Šå–æ•´</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">FLOOR</span>(<span class="number">12.5</span>);   <span class="comment">--å‘ä¸‹å–æ•´</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ROUND</span>(<span class="number">12.6</span>);   <span class="comment">--å››èˆäº”å…¥</span></span><br><span class="line"><span class="keyword">select</span> ROUNT(<span class="number">12.49</span>ï¼Œ<span class="number">1</span>);   </span><br><span class="line"><span class="keyword">select</span> <span class="keyword">POW</span>(<span class="number">3</span>,<span class="number">3</span>);   <span class="comment">--å¹‚è¿ç®—</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">RAND</span>();     <span class="comment">--éšæœºæ•°[0,1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--å­—ç¬¦ä¸²å‡½æ•°</span></span><br><span class="line">desc emp ;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">LENGTH</span>(ename) <span class="keyword">from</span> emp ;    <span class="comment">--è·å–å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">length</span>(<span class="string">'this is a apple'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">LOWER</span>(ename) <span class="keyword">from</span> emp ;  <span class="comment">--è½¬æ¢ä¸ºå°å†™</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">UPPER</span>(<span class="string">'this is a page'</span>);   <span class="comment">-- è½¬æ¢å¤§å°å†™</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'aabbcc'</span>,<span class="number">1</span>,<span class="number">2</span>);      <span class="comment">-- ä»1å¼€å§‹</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">LPAD</span>(<span class="string">'smith'</span>,<span class="number">10</span>,<span class="string">'*'</span>);  <span class="comment">-- å¼€å§‹å­—ç¬¦ä¸²ï¼Œæ€»é•¿åº¦ï¼Œpadstrå¡«å……çš„å­—ç¬¦</span></span><br><span class="line"><span class="keyword">select</span> RPAD(<span class="string">'smith'</span>,<span class="number">10</span>,<span class="string">'*'</span>);  <span class="comment">-- å³å¡«å……</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">TRIM</span>(<span class="string">'     smi  th'</span>);  <span class="comment">--å»ç©ºæ ¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ—¥æœŸ</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">NOW</span>();</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sysdate</span>();</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CURRENT_DATE</span>();     <span class="comment">--å½“å‰æ—¥æœŸ</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">current_time</span>();     <span class="comment">--å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">YEAR</span>(<span class="string">'1998-09-09'</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">MONTH</span>(<span class="string">'1998-09-09'</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">DAY</span>(<span class="string">'1998-09-09'</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">DATE_ADD</span>(<span class="string">'1998-09-09'</span>,<span class="built_in">INTERVAL</span> <span class="number">2</span> <span class="keyword">YEAR</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student ;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> birthday <span class="built_in">date</span> <span class="keyword">AFTER</span> age;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- èšåˆå‡½æ•°</span></span><br><span class="line"><span class="comment">--count /sum/avg/max/min</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å‘˜å·¥æ•°ï¼ˆç»Ÿè®¡è®°å½•æ•°ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> emp ;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="number">1</span>) <span class="keyword">from</span> emp ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç»Ÿè®¡éç©ºå­—æ®µæ•°ç›®</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(comm) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- SUM</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(sal) <span class="keyword">from</span> emp ;</span><br><span class="line"><span class="comment">-- AVG </span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp ;</span><br><span class="line"><span class="comment">-- MIN</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">min</span>(sal) <span class="keyword">from</span> emp ;</span><br><span class="line"><span class="comment">-- MAX </span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> emp ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ†ç»„å‡½æ•° GROUP BY deptno</span></span><br><span class="line"><span class="comment">-- æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span></span><br><span class="line"><span class="comment">-- group by æ ¹æ®æ¡ä»¶å­—æ®µçš„å€¼è¿”å›ç›¸åº”çš„è®°å½•æ•°ï¼›ä½†æ˜¯åœ¨selectå­—å¥ä¸­ï¼Œåªèƒ½å‡ºç°èšåˆå‡½æ•°æˆ–è€…åˆ†ç»„çš„æ¡ä»¶å­—æ®µã€‚</span></span><br><span class="line"><span class="keyword">select</span> deptno, <span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å„ä¸ªèŒä½å‘˜å·¥æ•°ï¼Ÿ job</span></span><br><span class="line"><span class="keyword">select</span> job, <span class="keyword">count</span>(*) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job;</span><br><span class="line"><span class="comment">-- å¹³å‡å·¥èµ„å¤§äº2000çš„éƒ¨é—¨çš„éƒ¨é—¨ç¼–å·å’Œå¹³å‡å·¥èµ„ï¼Ÿ   where ä¸èƒ½æ”¾group byä¹‹åï¼Œhavingå¯ä»¥ï¼Œgroup by å’Œhaving  ç»å¸¸é…å¥—ä½¿ç”¨</span></span><br><span class="line">   <span class="comment">-- 1.æ±‚å‡ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span></span><br><span class="line">	 <span class="comment">-- 2.å¹³å‡å·¥èµ„&gt;2000</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno <span class="keyword">having</span> <span class="keyword">avg</span>(sal) &gt; <span class="number">2000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- where å’Œ having çš„åŒºåˆ«</span></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å·¥èµ„å¤§äº1500çš„æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span></span><br><span class="line"><span class="keyword">select</span> deptno, <span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> sal &gt; <span class="number">1500</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno ;</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å¹³å‡å·¥èµ„å¤§äº1500çš„éƒ¨é—¨ç¼–å·å’Œå¹³å‡å·¥èµ„</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno <span class="keyword">having</span> <span class="keyword">avg</span>(sal) &gt; <span class="number">1500</span> ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åŠ å¯†å‡½æ•°</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">MD5</span>(<span class="string">'root'</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">SHA</span>(<span class="string">'root'</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">PASSWORD</span>(<span class="string">'root'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¤–é”®çº¦æŸï¼š foreign key</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> classroom(</span><br><span class="line">	cid <span class="built_in">int</span> PRIMARY <span class="keyword">key</span>,</span><br><span class="line">	cname <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">CONSTRAINT</span> FK_CID FOREIGN <span class="keyword">KEY</span>(cid) <span class="keyword">REFERENCES</span> classroom(cid);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- é«˜çº§æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">-- å¤šè¡¨æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢çš„ç»“æœé›†åˆ†å¸ƒäºå¤šå¼ è¡¨</span></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å‘˜å·¥ç¼–å·ä¸º7788çš„å‘˜å·¥å§“åå’Œéƒ¨é—¨åç§°ã€‚</span></span><br><span class="line"><span class="comment">-- å†…è¿æ¥ ï¼Œæ³¨æ„ï¼š1 å†…è¿æ¥çš„ç»“æœé›†ä¸è¿æ¥é¡ºåºæ— å…³ 2 åœ¨å¤šå¼ è¡¨ä¸­éƒ½å‡ºç°çš„æ•°æ®æ‰ä¼šå‡ºç°åœ¨å†…è¿æ¥çš„ç»“æœé›†ä¸­</span></span><br><span class="line"><span class="keyword">select</span> e.ename,d.dname <span class="keyword">from</span> emp e ,dept d <span class="keyword">where</span> e.empno = <span class="number">7788</span> <span class="keyword">and</span> e.deptno = d.deptno;</span><br><span class="line"><span class="comment">-- inner join ...on....</span></span><br><span class="line"><span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp <span class="keyword">inner</span> <span class="keyword">join</span> dept <span class="keyword">on</span> emp.deptno = dept.deptno ;</span><br><span class="line"><span class="comment">-- inner join ...using... (å±€é™,å½“deptnoä¸åŒæ—¶)</span></span><br><span class="line"><span class="keyword">select</span> ename,dname  <span class="keyword">from</span> emp <span class="keyword">inner</span> <span class="keyword">join</span> dept <span class="keyword">using</span>(deptno)</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaé›†åˆå¸¸è§é¢è¯•é¢˜]]></title>
      <url>/Java%E9%9B%86%E5%90%88%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98.html</url>
      <content type="html"><![CDATA[<p>ã€€Javaé›†åˆæ¡†æ¶æ˜¯æœ€å¸¸è¢«é—®åˆ°çš„Javaé¢è¯•é—®é¢˜ï¼Œè¦ç†è§£JavaæŠ€æœ¯å¼ºå¤§ç‰¹æ€§å°±æœ‰å¿…è¦æŒæ¡é›†åˆæ¡†æ¶ã€‚è¿™é‡Œæœ‰ä¸€äº›å®ç”¨é—®é¢˜ï¼Œå¸¸åœ¨æ ¸å¿ƒJavaé¢è¯•ä¸­é—®åˆ°ã€‚</p>
<ol>
<li>ä»€ä¹ˆæ˜¯Javaé›†åˆAPI<br>ã€€ã€€Javaé›†åˆæ¡†æ¶APIæ˜¯ç”¨æ¥è¡¨ç¤ºå’Œæ“ä½œé›†åˆçš„ç»Ÿä¸€æ¡†æ¶ï¼Œå®ƒåŒ…å«æ¥å£ã€å®ç°ç±»ã€ä»¥åŠå¸®åŠ©ç¨‹åºå‘˜å®Œæˆä¸€äº›ç¼–ç¨‹çš„ç®—æ³•ã€‚ç®€è¨€ä¹‹ï¼ŒAPIåœ¨ä¸Šå±‚å®Œæˆä»¥ä¸‹å‡ ä»¶äº‹ï¼š<br>ã€€ã€€â— ç¼–ç¨‹æ›´åŠ çœåŠ›ï¼Œæé«˜åŸç¨‹åºé€Ÿåº¦å’Œä»£ç è´¨é‡<br>ã€€ã€€â— éå…³è”çš„APIæé«˜äº’æ“ä½œæ€§<br>ã€€ã€€â— èŠ‚çœå­¦ä¹ ä½¿ç”¨æ–°APIæˆæœ¬<br>ã€€ã€€â— èŠ‚çœè®¾è®¡æ–°APIçš„æ—¶é—´<br>ã€€ã€€â— é¼“åŠ±ã€ä¿ƒè¿›è½¯ä»¶é‡ç”¨<br>ã€€ã€€å…·ä½“æ¥è¯´ï¼Œæœ‰6ä¸ªé›†åˆæ¥å£ï¼Œæœ€åŸºæœ¬çš„æ˜¯Collectionæ¥å£ï¼Œç”±ä¸‰ä¸ªæ¥å£Setã€Listã€SortedSetç»§æ‰¿ï¼Œå¦å¤–ä¸¤ä¸ªæ¥å£æ˜¯Mapã€SortedMapï¼Œè¿™ä¸¤ä¸ªæ¥å£ä¸ç»§æ‰¿Collectionï¼Œè¡¨ç¤ºæ˜ å°„è€Œä¸æ˜¯çœŸæ­£çš„é›†åˆã€‚<a id="more"></a></li>
<li>ä»€ä¹ˆæ˜¯Iterator<br>ã€€ã€€ä¸€äº›é›†åˆç±»æä¾›äº†å†…å®¹éå†çš„åŠŸèƒ½ï¼Œé€šè¿‡java.util.Iteratoræ¥å£ã€‚è¿™äº›æ¥å£å…è®¸éå†å¯¹è±¡çš„é›†åˆã€‚ä¾æ¬¡æ“ä½œæ¯ä¸ªå…ƒç´ å¯¹è±¡ã€‚å½“ä½¿ç”¨ Iteratorsæ—¶ï¼Œåœ¨è·å¾—Iteratorçš„æ—¶å€™åŒ…å«ä¸€ä¸ªé›†åˆå¿«ç…§ã€‚é€šå¸¸åœ¨éå†ä¸€ä¸ªIteratorçš„æ—¶å€™ä¸å»ºè®®ä¿®æ”¹é›†åˆæœ¬çœã€‚</li>
<li>Iteratorä¸ListIteratoræœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>ã€€ã€€Iteratorï¼šåªèƒ½æ­£å‘éå†é›†åˆï¼Œé€‚ç”¨äºè·å–ç§»é™¤å…ƒç´ ã€‚ListIeratorï¼šç»§æ‰¿Iteratorï¼Œå¯ä»¥åŒå‘åˆ—è¡¨çš„éå†ï¼ŒåŒæ ·æ”¯æŒå…ƒç´ çš„ä¿®æ”¹ã€‚</li>
<li>ä»€ä¹ˆæ˜¯HaspMapå’ŒMapï¼Ÿ<br>ã€€ã€€Mapæ˜¯æ¥å£ï¼ŒJava é›†åˆæ¡†æ¶ä¸­ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨é”®å€¼å¯¹ï¼ŒHashMapæ˜¯ç”¨å“ˆå¸Œç®—æ³•å®ç°Mapçš„ç±»ã€‚</li>
<li>HashMapä¸HashTableæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¯¹æ¯”Hashtable VS HashMap<br>ã€€ã€€ä¸¤è€…éƒ½æ˜¯ç”¨key-valueæ–¹å¼è·å–æ•°æ®ã€‚Hashtableæ˜¯åŸå§‹é›†åˆç±»ä¹‹ä¸€ï¼ˆä¹Ÿç§°ä½œé—ç•™ç±»ï¼‰ã€‚HashMapä½œä¸ºæ–°é›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†åœ¨Java2çš„1.2ç‰ˆæœ¬ä¸­åŠ å…¥ã€‚å®ƒä»¬ä¹‹é—´æœ‰ä¸€ä¸‹åŒºåˆ«ï¼š<br>ã€€ã€€â— HashMapå’ŒHashtableå¤§è‡´æ˜¯ç­‰åŒçš„ï¼Œé™¤äº†éåŒæ­¥å’Œç©ºå€¼ï¼ˆHashMapå…è®¸nullå€¼ä½œä¸ºkeyå’Œvalueï¼Œè€ŒHashtableä¸å¯ä»¥ï¼‰ã€‚<br>ã€€ã€€â— HashMapæ²¡æ³•ä¿è¯æ˜ å°„çš„é¡ºåºä¸€ç›´ä¸å˜ï¼Œä½†æ˜¯ä½œä¸ºHashMapçš„å­ç±»LinkedHashMapï¼Œå¦‚æœæƒ³è¦é¢„çŸ¥çš„é¡ºåºè¿­ä»£ï¼ˆé»˜è®¤æŒ‰ç…§æ’å…¥é¡ºåºï¼‰ï¼Œä½ å¯ä»¥å¾ˆè½»æ˜“çš„ç½®æ¢ä¸ºHashMapï¼Œå¦‚æœä½¿ç”¨Hashtableå°±æ²¡é‚£ä¹ˆå®¹æ˜“äº†ã€‚<br>ã€€ã€€â— HashMapä¸æ˜¯åŒæ­¥çš„ï¼Œè€ŒHashtableæ˜¯åŒæ­¥çš„ã€‚<br>ã€€ã€€â— è¿­ä»£HashMapé‡‡ç”¨å¿«é€Ÿå¤±è´¥æœºåˆ¶ï¼Œè€ŒHashtableä¸æ˜¯ï¼Œæ‰€ä»¥è¿™æ˜¯è®¾è®¡çš„è€ƒè™‘ç‚¹ã€‚</li>
<li>åœ¨Hashtableä¸Šä¸‹æ–‡ä¸­åŒæ­¥æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ<br>ã€€ã€€åŒæ­¥æ„å‘³ç€åœ¨ä¸€ä¸ªæ—¶é—´ç‚¹åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥ä¿®æ”¹å“ˆå¸Œè¡¨ï¼Œä»»ä½•çº¿ç¨‹åœ¨æ‰§è¡Œhashtableçš„æ›´æ–°æ“ä½œå‰éœ€è¦è·å–å¯¹è±¡é”ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…é”çš„é‡Šæ”¾ã€‚</li>
<li>ä»€ä¹ˆå«åšå¿«é€Ÿå¤±è´¥ç‰¹æ€§<br>ã€€ã€€ä»é«˜çº§åˆ«å±‚æ¬¡æ¥è¯´å¿«é€Ÿå¤±è´¥æ˜¯ä¸€ä¸ªç³»ç»Ÿæˆ–è½¯ä»¶å¯¹äºå…¶æ•…éšœåšå‡ºçš„å“åº”ã€‚ä¸€ä¸ªå¿«é€Ÿå¤±è´¥ç³»ç»Ÿè®¾è®¡ç”¨æ¥å³æ—¶æŠ¥å‘Šå¯èƒ½ä¼šå¯¼è‡´å¤±è´¥çš„ä»»ä½•æ•…éšœæƒ…å†µï¼Œå®ƒé€šå¸¸ç”¨æ¥åœæ­¢æ­£å¸¸çš„æ“ä½œè€Œä¸æ˜¯å°è¯•ç»§ç»­åšå¯èƒ½æœ‰ç¼ºé™·çš„å·¥ä½œã€‚å½“æœ‰é—®é¢˜å‘ç”Ÿæ—¶ï¼Œå¿«é€Ÿå¤±è´¥ç³»ç»Ÿå³æ—¶å¯è§åœ°å‘é”™é”™è¯¯å‘Šè­¦ã€‚åœ¨Javaä¸­ï¼Œå¿«é€Ÿå¤±è´¥ä¸iteratorsæœ‰å…³ã€‚å¦‚æœä¸€ä¸ªiteratoråœ¨é›†åˆå¯¹è±¡ä¸Šåˆ›å»ºäº†ï¼Œå…¶å®ƒçº¿ç¨‹æ¬²â€œç»“æ„åŒ–â€çš„ä¿®æ”¹è¯¥é›†åˆå¯¹è±¡ï¼Œå¹¶å‘ä¿®æ”¹å¼‚å¸¸ ï¼ˆConcurrentModificationExceptionï¼‰ æŠ›å‡ºã€‚</li>
<li>æ€æ ·ä½¿HashmapåŒæ­¥ï¼Ÿ<br>ã€€ã€€HashMapå¯ä»¥é€šè¿‡Map m = Collections.synchronizedMapï¼ˆhashMapï¼‰æ¥è¾¾åˆ°åŒæ­¥çš„æ•ˆæœã€‚</li>
<li>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨Hashtableï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨HashMap<br>ã€€ã€€åŸºæœ¬çš„ä¸åŒç‚¹æ˜¯HashtableåŒæ­¥HashMapä¸æ˜¯çš„ï¼Œæ‰€ä»¥æ— è®ºä»€ä¹ˆæ—¶å€™æœ‰å¤šä¸ªçº¿ç¨‹è®¿é—®ç›¸åŒå®ä¾‹çš„å¯èƒ½æ—¶ï¼Œå°±åº”è¯¥ä½¿ç”¨Hashtableï¼Œåä¹‹ä½¿ç”¨HashMapã€‚éçº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„èƒ½å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚<br>ã€€ã€€å¦‚æœåœ¨å°†æ¥æœ‰ä¸€ç§å¯èƒ½â€”ä½ éœ€è¦æŒ‰é¡ºåºè·å¾—é”®å€¼å¯¹çš„æ–¹æ¡ˆæ—¶ï¼ŒHashMapæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºæœ‰HashMapçš„ä¸€ä¸ªå­ç±» LinkedHashMapã€‚æ‰€ä»¥å¦‚æœä½ æƒ³å¯é¢„æµ‹çš„æŒ‰é¡ºåºè¿­ä»£ï¼ˆé»˜è®¤æŒ‰æ’å…¥çš„é¡ºåºï¼‰ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿ç”¨LinkedHashMapæ›¿æ¢HashMapã€‚åè§‚è¦æ˜¯ä½¿ç”¨çš„Hashtableå°±æ²¡é‚£ä¹ˆç®€å•äº†ã€‚åŒæ—¶å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹è®¿é—®HashMapï¼ŒCollections.synchronizedMapï¼ˆï¼‰å¯ä»¥ä»£æ›¿ï¼Œæ€»çš„æ¥è¯´HashMapæ›´çµæ´»ã€‚</li>
<li>ä¸ºä»€ä¹ˆVectorç±»è®¤ä¸ºæ˜¯åºŸå¼ƒçš„æˆ–è€…æ˜¯éå®˜æ–¹åœ°ä¸æ¨èä½¿ç”¨ï¼Ÿæˆ–è€…è¯´ä¸ºä»€ä¹ˆæˆ‘ä»¬åº”è¯¥ä¸€ç›´ä½¿ç”¨ArrayListè€Œä¸æ˜¯Vector<br>ã€€ã€€ä½ åº”è¯¥ä½¿ç”¨ArrayListè€Œä¸æ˜¯Vectoræ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ä½ æ˜¯éåŒæ­¥è®¿é—®çš„ï¼ŒVectoråŒæ­¥äº†æ¯ä¸ªæ–¹æ³•ï¼Œä½ å‡ ä¹ä»ä¸è¦é‚£æ ·åšï¼Œé€šå¸¸æœ‰æƒ³è¦åŒæ­¥çš„æ˜¯æ•´ä¸ªæ“ä½œåºåˆ—ã€‚åŒæ­¥å•ä¸ªçš„æ“ä½œä¹Ÿä¸å®‰å…¨ï¼ˆå¦‚æœä½ è¿­ä»£ä¸€ä¸ªVectorï¼Œä½ è¿˜æ˜¯è¦åŠ é”ï¼Œä»¥é¿å…å…¶å®ƒçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»æ”¹å˜é›†åˆï¼‰.è€Œä¸”æ•ˆç‡æ›´æ…¢ã€‚å½“ç„¶åŒæ ·æœ‰é”çš„å¼€é”€å³ä½¿ä½ ä¸éœ€è¦ï¼Œè¿™æ˜¯ä¸ªå¾ˆç³Ÿç³•çš„æ–¹æ³•åœ¨é»˜è®¤æƒ…å†µä¸‹åŒæ­¥è®¿é—®ã€‚ä½ å¯ä»¥ä¸€ç›´ä½¿ç”¨Collections.sychronizedListæ¥è£…é¥°ä¸€ä¸ªé›†åˆã€‚<br>ã€€ã€€äº‹å®ä¸ŠVectorç»“åˆäº†â€œå¯å˜æ•°ç»„â€çš„é›†åˆå’ŒåŒæ­¥æ¯ä¸ªæ“ä½œçš„å®ç°ã€‚è¿™æ˜¯å¦å¤–ä¸€ä¸ªè®¾è®¡ä¸Šçš„ç¼ºé™·ã€‚Vectorè¿˜æœ‰äº›é—ç•™çš„æ–¹æ³•åœ¨æšä¸¾å’Œå…ƒç´ è·å–çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¸åŒäºListæ¥å£ï¼Œå¦‚æœè¿™äº›æ–¹æ³•åœ¨ä»£ç ä¸­ç¨‹åºå‘˜æ›´è¶‹å‘äºæƒ³ç”¨å®ƒã€‚å°½ç®¡æšä¸¾é€Ÿåº¦æ›´å¿«ï¼Œä½†æ˜¯ä»–ä»¬ä¸èƒ½æ£€æŸ¥å¦‚æœé›†åˆåœ¨è¿­ä»£çš„æ—¶å€™ä¿®æ”¹äº†ï¼Œè¿™æ ·å°†å¯¼è‡´é—®é¢˜ã€‚å°½ç®¡ä»¥ä¸Šè¯¸å¤šåŸå› ï¼Œoracleä¹Ÿä»æ²¡å®£ç§°è¿‡è¦åºŸå¼ƒVectorã€‚</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaé›†åˆä½“ç³»ç»“æ„ä»¥åŠé›†åˆå’Œæ•°ç»„çš„åŒºåˆ«]]></title>
      <url>/Java%E9%9B%86%E5%90%88%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%BB%A5%E5%8F%8A%E9%9B%86%E5%90%88%E5%92%8C%E6%95%B0%E7%BB%84%E7%9A%84%E5%8C%BA%E5%88%AB.html</url>
      <content type="html"><![CDATA[<p>æ•°ç»„å’Œé›†åˆçš„å®šä¹‰<br>ä¸€ã€æ•°ç»„</p>
<p>æ•°ç»„æ˜¯javaè¯­è¨€å†…ç½®çš„æ•°æ®ç±»å‹ï¼Œä»–æ˜¯ä¸€ä¸ªçº¿æ€§çš„åºåˆ—ï¼Œæ‰€æœ‰å¯ä»¥å¿«é€Ÿè®¿é—®å…¶ä»–çš„å…ƒç´ ï¼Œæ•°ç»„å’Œå…¶ä»–è¯­è¨€ä¸åŒï¼Œå½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œä»–çš„å®¹é‡æ˜¯ä¸å˜çš„ï¼Œè€Œä¸”åœ¨ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯ä¸èƒ½æ”¹å˜çš„ï¼Œè¿˜æœ‰JAVAæ•°ç»„ä¼šåšè¾¹ç•Œæ£€æŸ¥ï¼Œå¦‚æœå‘ç°æœ‰è¶Šç•Œç°è±¡ï¼Œä¼šæŠ¥RuntimeExceptionå¼‚å¸¸é”™è¯¯ï¼Œå½“ç„¶æ£€æŸ¥è¾¹ç•Œä¼šä»¥æ•ˆç‡ä¸ºä»£ä»·ã€‚<br>äºŒã€é›†åˆ</p>
<p>JAVAè¿˜æä¾›å…¶ä»–é›†åˆï¼Œlistï¼Œmapï¼Œsetï¼Œä»–ä»¬å¤„ç†å¯¹è±¡çš„æ—¶å€™å°±å¥½åƒè¿™äº›å¯¹è±¡æ²¡æœ‰è‡ªå·±çš„ç±»å‹ä¸€æ ·ï¼Œè€Œæ˜¯ç›´æ¥å½’æ ¹äºObjectï¼Œè¿™æ ·åªéœ€è¦åˆ›å»ºä¸€ä¸ªé›†åˆï¼ŒæŠŠå¯¹è±¡æ”¾è¿›å»ï¼Œå–å‡ºæ—¶è½¬æ¢æˆè‡ªå·±çš„ç±»å‹å°±è¡Œäº†ã€‚<br>ä¸‰ã€æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«<br><a id="more"></a></p>
<p>ä¸€ã€æ•°ç»„å£°æ˜äº†å®ƒå®¹çº³çš„å…ƒç´ çš„ç±»å‹ï¼Œè€Œé›†åˆä¸å£°æ˜ã€‚<br>äºŒã€æ•°ç»„æ˜¯é™æ€çš„ï¼Œä¸€ä¸ªæ•°ç»„å®ä¾‹å…·æœ‰å›ºå®šçš„å¤§å°ï¼Œä¸€æ—¦åˆ›å»ºäº†å°±æ— æ³•æ”¹å˜å®¹é‡äº†ã€‚è€Œé›†åˆæ˜¯å¯ä»¥åŠ¨æ€æ‰©å±•å®¹é‡ï¼Œå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€æ”¹å˜å¤§å°ï¼Œé›†åˆæä¾›æ›´å¤šçš„æˆå‘˜æ–¹æ³•ï¼Œèƒ½æ»¡è¶³æ›´å¤šçš„éœ€æ±‚ã€‚<br>ä¸‰ã€æ•°ç»„çš„å­˜æ”¾çš„ç±»å‹åªèƒ½æ˜¯ä¸€ç§ï¼ˆåŸºæœ¬ç±»å‹/å¼•ç”¨ç±»å‹ï¼‰,é›†åˆå­˜æ”¾çš„ç±»å‹å¯ä»¥ä¸æ˜¯ä¸€ç§(ä¸åŠ æ³›å‹æ—¶æ·»åŠ çš„ç±»å‹æ˜¯Object)ã€‚<br>å››ã€æ•°ç»„æ˜¯javaè¯­è¨€ä¸­å†…ç½®çš„æ•°æ®ç±»å‹,æ˜¯çº¿æ€§æ’åˆ—çš„,æ‰§è¡Œæ•ˆç‡æˆ–è€…ç±»å‹æ£€æŸ¥éƒ½æ˜¯æœ€å¿«çš„ã€‚<br>é›†åˆä½“ç³»ç»“æ„</p>
<p>Collection<br>â”œList ï¼ˆæœ‰åºé›†åˆï¼Œå…è®¸ç›¸åŒå…ƒç´ å’Œnullï¼‰<br>â”‚â”œLinkedList ï¼ˆéåŒæ­¥ï¼Œå…è®¸ç›¸åŒå…ƒç´ å’Œnullï¼Œéå†æ•ˆç‡ä½æ’å…¥å’Œåˆ é™¤æ•ˆç‡é«˜ï¼‰<br>â”‚â”œArrayList ï¼ˆéåŒæ­¥ï¼Œå…è®¸ç›¸åŒå…ƒç´ å’Œnullï¼Œå®ç°äº†åŠ¨æ€å¤§å°çš„æ•°ç»„ï¼Œéå†æ•ˆç‡é«˜ï¼Œç”¨çš„å¤šï¼‰<br>â”‚â””Vectorï¼ˆåŒæ­¥ï¼Œå…è®¸ç›¸åŒå…ƒç´ å’Œnullï¼Œæ•ˆç‡ä½ï¼‰<br>â”‚ã€€â””Stackï¼ˆç»§æ‰¿è‡ªVectorï¼Œå®ç°ä¸€ä¸ªåè¿›å…ˆå‡ºçš„å †æ ˆï¼‰<br>â””Set ï¼ˆæ— åºé›†åˆï¼Œä¸å…è®¸ç›¸åŒå…ƒç´ ï¼Œæœ€å¤šæœ‰ä¸€ä¸ªnullå…ƒç´ ï¼‰<br>     |-HashSet(æ— åºé›†åˆï¼Œä¸å…è®¸ç›¸åŒå…ƒç´ ï¼Œæœ€å¤šæœ‰ä¸€ä¸ªnullå…ƒç´ )</p>
<p>Map ï¼ˆæ²¡æœ‰å®ç°collectionæ¥å£ï¼Œkeyä¸èƒ½é‡å¤ï¼Œvalueå¯ä»¥é‡å¤ï¼Œä¸€ä¸ªkeyæ˜ å°„ä¸€ä¸ªvalueï¼‰<br>â”œHashtable ï¼ˆå®ç°Mapæ¥å£ï¼ŒåŒæ­¥ï¼Œä¸å…è®¸nullä½œä¸ºkeyå’Œvalueï¼Œç”¨è‡ªå®šä¹‰çš„ç±»å½“ä½œkeyçš„è¯è¦å¤å†™hashCodeå’Œequesæ–¹æ³•ï¼Œï¼‰<br>â”œHashMap ï¼ˆå®ç°Mapæ¥å£ï¼ŒéåŒæ­¥ï¼Œå…è®¸nullä½œä¸ºkeyå’Œvalueï¼Œç”¨çš„å¤šï¼‰<br>â””WeakHashMapï¼ˆå®ç°Mapæ¥å£ï¼‰</p>
<p>Collectionæ¥å£<br>ã€€ã€€Collectionæ˜¯æœ€åŸºæœ¬çš„é›†åˆæ¥å£ï¼Œä¸€ä¸ªCollectionä»£è¡¨ä¸€ç»„Objectï¼Œå³Collectionçš„å…ƒç´ ï¼ˆElementsï¼‰ã€‚ä¸€äº›Collectionå…è®¸ç›¸åŒçš„å…ƒç´ è€Œå¦ä¸€äº›ä¸è¡Œã€‚ä¸€äº›èƒ½æ’åºè€Œå¦ä¸€äº›ä¸è¡Œã€‚Java SDKä¸æä¾›ç›´æ¥ç»§æ‰¿è‡ªCollectionçš„ç±»ï¼ŒJava SDKæä¾›çš„ç±»éƒ½æ˜¯ç»§æ‰¿è‡ªCollectionçš„â€œå­æ¥å£â€å¦‚Listå’ŒSetã€‚<br>ã€€ã€€æ‰€æœ‰å®ç°Collectionæ¥å£çš„ç±»éƒ½å¿…é¡»æä¾›ä¸¤ä¸ªæ ‡å‡†çš„æ„é€ å‡½æ•°ï¼šæ— å‚æ•°çš„æ„é€ å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªç©ºçš„Collectionï¼Œæœ‰ä¸€ä¸ªCollectionå‚æ•°çš„æ„é€ å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„Collectionï¼Œè¿™ä¸ªæ–°çš„Collectionä¸ä¼ å…¥çš„Collectionæœ‰ç›¸åŒçš„å…ƒç´ ã€‚åä¸€ä¸ªæ„é€ å‡½æ•°å…è®¸ç”¨æˆ·å¤åˆ¶ä¸€ä¸ªCollectionã€‚<br>ã€€ã€€å¦‚ä½•éå†Collectionä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Ÿä¸è®ºCollectionçš„å®é™…ç±»å‹å¦‚ä½•ï¼Œå®ƒéƒ½æ”¯æŒä¸€ä¸ªiterator()çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªè¿­ä»£å­ï¼Œä½¿ç”¨è¯¥è¿­ä»£å­å³å¯é€ä¸€è®¿é—®Collectionä¸­æ¯ä¸€ä¸ªå…ƒç´ ã€‚å…¸å‹çš„ç”¨æ³•å¦‚ä¸‹ï¼š<br>ã€€ã€€ã€€Iterator it = collection.iterator(); // è·å¾—ä¸€ä¸ªè¿­ä»£å­<br>ã€€ã€€ã€€ã€€while(it.hasNext()) {<br>ã€€ã€€ã€€ã€€ã€€ã€€Object obj = it.next(); // å¾—åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ <br>ã€€ã€€ã€€ã€€}<br>ã€€ã€€ç”±Collectionæ¥å£æ´¾ç”Ÿçš„ä¸¤ä¸ªæ¥å£æ˜¯Listå’ŒSetã€‚<br>ä¸€ã€Listæ¥å£<br>ã€€Listæ˜¯æœ‰åºçš„Collectionï¼Œä½¿ç”¨æ­¤æ¥å£èƒ½å¤Ÿç²¾ç¡®çš„æ§åˆ¶æ¯ä¸ªå…ƒç´ æ’å…¥çš„ä½ç½®ã€‚ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨ç´¢å¼•ï¼ˆå…ƒç´ åœ¨Listä¸­çš„ä½ç½®ï¼Œç±»ä¼¼äºæ•°ç»„ä¸‹æ ‡ï¼‰æ¥è®¿é—®Listä¸­çš„å…ƒç´ ï¼Œè¿™ç±»ä¼¼äºJavaçš„æ•°ç»„ã€‚<br>å’Œä¸‹é¢è¦æåˆ°çš„Setä¸åŒï¼ŒListå…è®¸æœ‰ç›¸åŒçš„å…ƒç´ ã€‚<br>ã€€ã€€é™¤äº†å…·æœ‰Collectionæ¥å£å¿…å¤‡çš„iterator()æ–¹æ³•å¤–ï¼ŒListè¿˜æä¾›ä¸€ä¸ªlistIterator()æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªListIteratoræ¥å£ï¼Œå’Œæ ‡å‡†çš„Iteratoræ¥å£ç›¸æ¯”ï¼ŒListIteratorå¤šäº†ä¸€äº›add()ä¹‹ç±»çš„æ–¹æ³•ï¼Œå…è®¸æ·»åŠ ï¼Œåˆ é™¤ï¼Œè®¾å®šå…ƒç´ ï¼Œè¿˜èƒ½å‘å‰æˆ–å‘åéå†ã€‚<br>ã€€ã€€å®ç°Listæ¥å£çš„å¸¸ç”¨ç±»æœ‰LinkedListï¼ŒArrayListï¼ŒVectorå’ŒStackã€‚<br>LinkedListç±»<br>ã€€LinkedListå®ç°äº†Listæ¥å£ï¼Œå…è®¸nullå…ƒç´ ã€‚LinkenListåº•å±‚é‡‡ç”¨äº†åŒå‘é“¾è¡¨æ¥å­˜å‚¨æ•°æ®ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨ç€ä¸Šä¸€ä¸ªèŠ‚ç‚¹å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ä»¥åŠæœ¬èŠ‚ç‚¹çš„æ•°æ®ã€‚æ­¤å¤–LinkedListæä¾›é¢å¤–çš„getï¼Œremoveï¼Œinsertæ–¹æ³•åœ¨LinkedListçš„é¦–éƒ¨æˆ–å°¾éƒ¨ã€‚è¿™äº›æ“ä½œä½¿LinkedListå¯è¢«ç”¨ä½œå †æ ˆï¼ˆstackï¼‰ï¼Œé˜Ÿåˆ—ï¼ˆqueueï¼‰æˆ–åŒå‘é˜Ÿåˆ—ï¼ˆdequeï¼‰ã€‚<br>ã€€ã€€æ³¨æ„ï¼šLinkedListæ²¡æœ‰åŒæ­¥æ–¹æ³•ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªListï¼Œåˆ™å¿…é¡»è‡ªå·±å®ç°è®¿é—®åŒæ­¥ã€‚ä¸€ç§è§£å†³æ–¹æ³•æ˜¯åœ¨åˆ›å»ºListæ—¶æ„é€ ä¸€ä¸ªåŒæ­¥çš„Listï¼š<br>ã€€ã€€ã€€ã€€List list = Collections.synchronizedList(new LinkedList(â€¦));<br>ArrayListç±»<br>ã€€ã€€ArrayListå®ç°äº†å¯å˜å¤§å°çš„æ•°ç»„ã€‚å®ƒå…è®¸æ‰€æœ‰å…ƒç´ ï¼ŒåŒ…æ‹¬nullã€‚ArrayListåº•å±‚é‡‡ç”¨åŠ¨æ€æ•°ç»„çš„å­˜å‚¨æ–¹å¼ï¼Œä¾¿åˆ©æ•ˆç‡éå¸¸é«˜ï¼ŒArrayListæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚<br>sizeï¼ŒisEmptyï¼Œgetï¼Œsetæ–¹æ³•è¿è¡Œæ—¶é—´ä¸ºå¸¸æ•°ã€‚ä½†æ˜¯addæ–¹æ³•å¼€é”€ä¸ºåˆ†æ‘Šçš„å¸¸æ•°ï¼Œæ·»åŠ nä¸ªå…ƒç´ éœ€è¦O(n)çš„æ—¶é—´ã€‚å…¶ä»–çš„æ–¹æ³•è¿è¡Œæ—¶é—´ä¸ºçº¿æ€§ã€‚<br>ã€€ã€€æ¯ä¸ªArrayListå®ä¾‹éƒ½æœ‰ä¸€ä¸ªå®¹é‡ï¼ˆCapacityï¼‰ï¼Œå³ç”¨äºå­˜å‚¨å…ƒç´ çš„æ•°ç»„çš„å¤§å°ã€‚è¿™ä¸ªå®¹é‡å¯éšç€ä¸æ–­æ·»åŠ æ–°å…ƒç´ è€Œè‡ªåŠ¨å¢åŠ ï¼Œä½†æ˜¯å¢é•¿ç®—æ³•å¹¶æ²¡æœ‰å®šä¹‰ã€‚å½“éœ€è¦æ’å…¥å¤§é‡å…ƒç´ æ—¶ï¼Œåœ¨æ’å…¥å‰å¯ä»¥è°ƒç”¨ensureCapacityæ–¹æ³•æ¥å¢åŠ ArrayListçš„å®¹é‡ä»¥æé«˜æ’å…¥æ•ˆç‡ã€‚<br>ArrayListå’ŒLindedListçš„åŒºåˆ«ï¼š<br>        1.ArrayListæ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼ŒLinkedListåŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ã€‚<br>     2.å¯¹äºéšæœºè®¿é—®getå’Œsetï¼ŒArrayListè§‰å¾—ä¼˜äºLinkedListï¼Œå› ä¸ºLinkedListè¦ç§»åŠ¨æŒ‡é’ˆã€‚<br>     3.å¯¹äºæ–°å¢å’Œåˆ é™¤æ“ä½œaddå’Œremoveï¼ŒLinedListæ¯”è¾ƒå ä¼˜åŠ¿ï¼Œå› ä¸ºArrayListè¦ç§»åŠ¨æ•°æ®ã€‚<br>Vectorç±»<br>ã€€ã€€Vectoréå¸¸ç±»ä¼¼ArrayListï¼Œä½†æ˜¯Vectoræ˜¯åŒæ­¥çš„ã€‚ç”±Vectoråˆ›å»ºçš„Iteratorï¼Œè™½ç„¶å’ŒArrayListåˆ›å»ºçš„Iteratoræ˜¯åŒä¸€æ¥å£ï¼Œä½†æ˜¯ï¼Œå› ä¸ºVectoræ˜¯åŒæ­¥çš„ï¼Œå½“ä¸€ä¸ªIteratorè¢«åˆ›å»ºè€Œä¸”æ­£åœ¨è¢«ä½¿ç”¨ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ”¹å˜äº†Vectorçš„çŠ¶æ€ï¼ˆä¾‹å¦‚ï¼Œæ·»åŠ æˆ–åˆ é™¤äº†ä¸€äº›å…ƒç´ ï¼‰ï¼Œè¿™æ—¶è°ƒç”¨Iteratorçš„æ–¹æ³•æ—¶å°†æŠ›å‡ºConcurrentModificationExceptionï¼Œå› æ­¤å¿…é¡»æ•è·è¯¥å¼‚å¸¸ã€‚<br>Stack ç±»<br>ã€€ã€€Stackç»§æ‰¿è‡ªVectorï¼Œå®ç°ä¸€ä¸ªåè¿›å…ˆå‡ºçš„å †æ ˆã€‚Stackæä¾›5ä¸ªé¢å¤–çš„æ–¹æ³•ä½¿å¾—Vectorå¾—ä»¥è¢«å½“ä½œå †æ ˆä½¿ç”¨ã€‚åŸºæœ¬çš„pushå’Œpopæ–¹æ³•ï¼Œè¿˜æœ‰peekæ–¹æ³•å¾—åˆ°æ ˆé¡¶çš„å…ƒç´ ï¼Œemptyæ–¹æ³•æµ‹è¯•å †æ ˆæ˜¯å¦ä¸ºç©ºï¼Œsearchæ–¹æ³•æ£€æµ‹ä¸€ä¸ªå…ƒç´ åœ¨å †æ ˆä¸­çš„ä½ç½®ã€‚Stackåˆšåˆ›å»ºåæ˜¯ç©ºæ ˆã€‚<br>äºŒã€Setæ¥å£<br>Setæ˜¯ä¸€ç§æ— åºçš„å¹¶ä¸”ä¸åŒ…å«é‡å¤çš„å…ƒç´ çš„Collectionï¼Œå³ä»»æ„çš„ä¸¤ä¸ªå…ƒç´ e1å’Œe2éƒ½æœ‰e1.equals(e2)=falseï¼ŒSetæœ€å¤šæœ‰ä¸€ä¸ªnullå…ƒç´ ã€‚<br>ã€€ã€€å¾ˆæ˜æ˜¾ï¼ŒSetçš„æ„é€ å‡½æ•°æœ‰ä¸€ä¸ªçº¦æŸæ¡ä»¶ï¼Œä¼ å…¥çš„Collectionå‚æ•°ä¸èƒ½åŒ…å«é‡å¤çš„å…ƒç´ ã€‚<br>HashSet ç±»<br>æ˜¯å“ˆå¸Œè¡¨å®ç°çš„,HashSetä¸­çš„æ•°æ®æ˜¯æ— åºçš„ï¼Œå¯ä»¥æ”¾å…¥nullï¼Œä½†åªèƒ½æ”¾å…¥ä¸€ä¸ªnullï¼Œä¸¤è€…ä¸­çš„å€¼éƒ½ä¸èƒ½é‡å¤ï¼Œå› ä¸ºHashSetçš„åº•å±‚å®ç°æ˜¯HashMapï¼Œä½†æ˜¯HashSetåªä½¿ç”¨äº†HashMapçš„keyæ¥å­˜å–æ•°æ®æ‰€ä»¥HashSetå­˜çš„æ•°æ®ä¸èƒ½é‡å¤ã€‚ </p>
<p>HashSetè¦æ±‚æ”¾å…¥çš„å¯¹è±¡å¿…é¡»å®ç°HashCode()æ–¹æ³•ï¼Œæ”¾å…¥çš„å¯¹è±¡ï¼Œæ˜¯ä»¥hashcodeç ä½œä¸ºæ ‡è¯†çš„ï¼Œè€Œå…·æœ‰ç›¸åŒå†…å®¹çš„ Stringå¯¹è±¡ï¼Œhashcodeæ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥æ”¾å…¥çš„å†…å®¹ä¸èƒ½é‡å¤ã€‚ä½†æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡å¯ä»¥æ”¾å…¥ä¸åŒçš„å®ä¾‹ ã€‚</p>
<p>ä¸‰ã€Mapæ¥å£<br>Mapæ²¡æœ‰ç»§æ‰¿Collectionæ¥å£ï¼ŒMapæä¾›keyåˆ°valueçš„æ˜ å°„ã€‚ä¸€ä¸ªMapä¸­ä¸èƒ½åŒ…å«ç›¸åŒçš„keyï¼Œæ¯ä¸ªkeyåªèƒ½æ˜ å°„ä¸€ä¸ªvalueã€‚Mapæ¥å£æä¾›3ç§é›†åˆçš„è§†å›¾ï¼ŒMapçš„å†…å®¹å¯ä»¥è¢«å½“ä½œä¸€ç»„keyé›†åˆï¼Œä¸€ç»„valueé›†åˆï¼Œæˆ–è€…ä¸€ç»„key-valueæ˜ å°„ã€‚</p>
<p>Hashtableç±»<br>Hashtableç»§æ‰¿Mapæ¥å£ï¼Œå®ç°ä¸€ä¸ªkey-valueæ˜ å°„çš„å“ˆå¸Œè¡¨ã€‚ä»»ä½•éç©ºï¼ˆnon-nullï¼‰çš„å¯¹è±¡éƒ½å¯ä½œä¸ºkeyæˆ–è€…valueã€‚<br>ã€€ã€€æ·»åŠ æ•°æ®ä½¿ç”¨put(key, value)ï¼Œå–å‡ºæ•°æ®ä½¿ç”¨get(key)ï¼Œè¿™ä¸¤ä¸ªåŸºæœ¬æ“ä½œçš„æ—¶é—´å¼€é”€ä¸ºå¸¸æ•°ã€‚<br>ä½¿ç”¨Hashtableçš„ç®€å•ç¤ºä¾‹å¦‚ä¸‹ï¼Œå°†1ï¼Œ2ï¼Œ3æ”¾åˆ°Hashtableä¸­ï¼Œä»–ä»¬çš„keyåˆ†åˆ«æ˜¯â€oneâ€ï¼Œâ€twoâ€ï¼Œâ€threeâ€ï¼š<br>Hashtable numbers = new Hashtable();<br>numbers.put(â€œoneâ€, new Integer(1));<br>numbers.put(â€œtwoâ€, new Integer(2));<br>numbers.put(â€œthreeâ€, new Integer(3));<br>ã€€ã€€è¦å–å‡ºä¸€ä¸ªæ•°ï¼Œæ¯”å¦‚2ï¼Œç”¨ç›¸åº”çš„keyï¼š<br>Integer n = (Integer)numbers.get(â€œtwoâ€);<br>System.out.println(â€œtwo = â€ + n);<br>ã€€ã€€ç”±äºä½œä¸ºkeyçš„å¯¹è±¡å°†é€šè¿‡è®¡ç®—å…¶æ•£åˆ—å‡½æ•°æ¥ç¡®å®šä¸ä¹‹å¯¹åº”çš„valueçš„ä½ç½®ï¼Œå› æ­¤ä»»ä½•ä½œä¸ºkeyçš„å¯¹è±¡éƒ½å¿…é¡»å®ç°hashCodeå’Œequalsæ–¹æ³•ã€‚hashCodeå’Œequalsæ–¹æ³•ç»§æ‰¿è‡ªæ ¹ç±»Objectï¼Œå¦‚æœä½ ç”¨è‡ªå®šä¹‰çš„ç±»å½“ä½œkeyçš„è¯ï¼Œè¦ç›¸å½“å°å¿ƒï¼ŒæŒ‰ç…§æ•£åˆ—å‡½æ•°çš„å®šä¹‰ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸åŒï¼Œå³obj1.equals(obj2)=trueï¼Œåˆ™å®ƒä»¬çš„hashCodeå¿…é¡»ç›¸åŒï¼Œä½†å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¸åŒï¼Œåˆ™å®ƒä»¬çš„hashCodeä¸ä¸€å®šä¸åŒï¼Œå¦‚æœä¸¤ä¸ªä¸åŒå¯¹è±¡çš„hashCodeç›¸åŒï¼Œè¿™ç§ç°è±¡ç§°ä¸ºå†²çªï¼Œå†²çªä¼šå¯¼è‡´æ“ä½œå“ˆå¸Œè¡¨çš„æ—¶é—´å¼€é”€å¢å¤§ï¼Œæ‰€ä»¥å°½é‡å®šä¹‰å¥½çš„hashCode()æ–¹æ³•ï¼Œèƒ½åŠ å¿«å“ˆå¸Œè¡¨çš„æ“ä½œã€‚<br>ã€€ã€€å¦‚æœç›¸åŒçš„å¯¹è±¡æœ‰ä¸åŒçš„hashCodeï¼Œå¯¹å“ˆå¸Œè¡¨çš„æ“ä½œä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„ç»“æœï¼ˆæœŸå¾…çš„getæ–¹æ³•è¿”å›nullï¼‰ï¼Œè¦é¿å…è¿™ç§é—®é¢˜ï¼Œåªéœ€è¦ç‰¢è®°ä¸€æ¡ï¼šè¦åŒæ—¶å¤å†™equalsæ–¹æ³•å’ŒhashCodeæ–¹æ³•ï¼Œè€Œä¸è¦åªå†™å…¶ä¸­ä¸€ä¸ªã€‚<br>ã€€ã€€Hashtableæ˜¯åŒæ­¥çš„ã€‚</p>
<p>HashMapç±»<br>HashMapå’ŒHashtableç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºHashMapæ˜¯éåŒæ­¥çš„ï¼Œå¹¶ä¸”å…è®¸nullï¼Œå³null valueå’Œnull keyï¼Œä½†æ˜¯å°†HashMapè§†ä¸ºCollectionæ—¶ï¼ˆvalues()æ–¹æ³•å¯è¿”å›Collectionï¼‰ã€‚<br>WeakHashMapç±»<br>WeakHashMapæ˜¯ä¸€ç§æ”¹è¿›çš„HashMapï¼Œå®ƒå¯¹keyå®è¡Œâ€œå¼±å¼•ç”¨â€ï¼Œå¦‚æœä¸€ä¸ªkeyä¸å†è¢«å¤–éƒ¨æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆè¯¥keyå¯ä»¥è¢«GCå›æ”¶ã€‚</p>
<p>æ€»ç»“<br>1.å¦‚æœæ¶‰åŠåˆ°å †æ ˆï¼Œé˜Ÿåˆ—ç­‰æ“ä½œï¼Œåº”è¯¥è€ƒè™‘ç”¨Listï¼Œå¯¹äºéœ€è¦å¿«é€Ÿæ’å…¥ï¼Œåˆ é™¤å…ƒç´ ï¼Œåº”è¯¥ä½¿ç”¨LinkedListï¼Œå¦‚æœéœ€è¦å¿«é€Ÿéšæœºè®¿é—®å…ƒç´ ï¼Œåº”è¯¥ä½¿ç”¨ArrayListã€‚<br>2.å¦‚æœç¨‹åºåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸­ï¼Œæˆ–è€…è®¿é—®ä»…ä»…åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è¿›è¡Œï¼Œè€ƒè™‘éåŒæ­¥çš„ç±»ï¼Œå…¶æ•ˆç‡è¾ƒé«˜ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶æ“ä½œä¸€ä¸ªç±»ï¼Œåº”è¯¥ä½¿ç”¨åŒæ­¥çš„ç±»ã€‚<br>3.è¦ç‰¹åˆ«æ³¨æ„å¯¹å“ˆå¸Œè¡¨çš„æ“ä½œï¼Œä½œä¸ºkeyçš„å¯¹è±¡è¦æ­£ç¡®å¤å†™equalså’ŒhashCodeæ–¹æ³•ã€‚<br>4.å°½é‡è¿”å›æ¥å£è€Œéå®é™…çš„ç±»å‹ï¼Œå¦‚è¿”å›Listè€ŒéArrayListï¼Œè¿™æ ·å¦‚æœä»¥åéœ€è¦å°†ArrayListæ¢æˆLinkedListæ—¶ï¼Œå®¢æˆ·ç«¯ä»£ç ä¸ç”¨æ”¹å˜ã€‚è¿™å°±æ˜¯é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ•°æ®æŠ½è±¡]]></title>
      <url>/%E6%95%B0%E6%8D%AE%E6%8A%BD%E8%B1%A1.html</url>
      <content type="html"><![CDATA[<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>æ•°æ®æŠ½è±¡ç»“æ„ï¼šå¯¹ç°å®ä¸–ç•Œçš„ä¸€ç§æŠ½è±¡ä»å®é™…çš„äººã€ç‰©ã€äº‹å’Œæ¦‚å¿µä¸­æŠ½å–æ‰€å…³å¿ƒçš„å…±åŒç‰¹æ€§ï¼Œå¿½ç•¥éæœ¬è´¨çš„ç»†èŠ‚ï¼ŒæŠŠè¿™äº›ç‰¹æ€§ç”¨å„ç§æ¦‚å¿µç²¾ç¡®åœ°åŠ ä»¥æè¿°è¿™äº›æ¦‚å¿µç»„æˆäº†æŸç§æ¨¡å‹ã€‚</p>
<h2 id="ä¸‰ç§å¸¸ç”¨æŠ½è±¡"><a href="#ä¸‰ç§å¸¸ç”¨æŠ½è±¡" class="headerlink" title="ä¸‰ç§å¸¸ç”¨æŠ½è±¡"></a>ä¸‰ç§å¸¸ç”¨æŠ½è±¡</h2><h3 id="åˆ†ç±»ï¼ˆClassification"><a href="#åˆ†ç±»ï¼ˆClassification" class="headerlink" title="åˆ†ç±»ï¼ˆClassification)"></a>åˆ†ç±»ï¼ˆClassification)</h3><p>å®šä¹‰æŸä¸€ç±»æ¦‚å¿µä½œä¸ºç°å®ä¸–ç•Œä¸­ä¸€ç»„å¯¹è±¡çš„ç±»å‹ï¼Œè¿™äº›å¯¹è±¡å…·æœ‰æŸäº›å…±åŒçš„ç‰¹æ€§å’Œè¡Œä¸ºï¼Œå®ƒæŠ½è±¡äº†å¯¹è±¡å€¼å’Œå‹ä¹‹é—´çš„â€œis member ofâ€çš„è¯­ä¹‰ï¼Œåœ¨E-Ræ¨¡å‹ä¸­ï¼Œå®ä½“å‹å°±æ˜¯è¿™ç§æŠ½è±¡ã€‚</p>
<h3 id="èšé›†ï¼ˆAggregationï¼‰"><a href="#èšé›†ï¼ˆAggregationï¼‰" class="headerlink" title="èšé›†ï¼ˆAggregationï¼‰"></a>èšé›†ï¼ˆAggregationï¼‰</h3><p>å®šä¹‰æŸä¸€ç±»å‹çš„ç»„æˆæˆåˆ†ï¼Œå®ƒæŠ½è±¡äº†å¯¹è±¡å†…éƒ¨ç±»å‹å’Œæˆåˆ†ä¹‹é—´â€œis part ofâ€çš„è¯­ä¹‰ï¼Œåœ¨E-Ræ¨¡å‹ä¸­è‹¥å¹²å±æ€§çš„èšé›†ç»„æˆäº†å®ä½“å‹ï¼Œå°±æ˜¯è¿™ç§æŠ½è±¡ã€‚<br><a id="more"></a></p>
<h3 id="æ¦‚æ‹¬ï¼ˆGeneralizationï¼‰"><a href="#æ¦‚æ‹¬ï¼ˆGeneralizationï¼‰" class="headerlink" title="æ¦‚æ‹¬ï¼ˆGeneralizationï¼‰"></a>æ¦‚æ‹¬ï¼ˆGeneralizationï¼‰</h3><p>å®šä¹‰ç±»å‹ä¹‹é—´çš„ä¸€ç§å­é›†è”ç³»ï¼Œå®ƒæŠ½è±¡äº†ç±»å‹ä¹‹é—´çš„â€œis subset ofâ€çš„è¯­ä¹‰ï¼Œæ¦‚æ‹¬æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ€§è´¨ï¼šç»§æ‰¿æ€§ã€‚å­ç±»ç»§æ‰¿è¶…ç±»ä¸Šå®šä¹‰çš„æ‰€æœ‰æŠ½è±¡ã€‚<br>æ³¨ï¼šåŸE-Ræ¨¡å‹ä¸å…·æœ‰æ¦‚æ‹¬ï¼Œæœ¬ä¹¦å¯¹E-Ræ¨¡å‹ä½œäº†æ‰©å……ï¼Œå…è®¸å®šä¹‰è¶…ç±»å®ä½“å‹å’Œå­ç±»å®ä½“å‹ã€‚ç”¨åŒç«–è¾¹çš„çŸ©å½¢æ¡†è¡¨ç¤ºå­ç±»ï¼Œç”¨ç›´çº¿åŠ å°åœ†åœˆè¡¨ç¤ºè¶…ç±»-å­ç±»çš„è”ç³»</p>
<h2 id="æ•°æ®æŠ½è±¡çš„ç”¨é€”"><a href="#æ•°æ®æŠ½è±¡çš„ç”¨é€”" class="headerlink" title="æ•°æ®æŠ½è±¡çš„ç”¨é€”"></a>æ•°æ®æŠ½è±¡çš„ç”¨é€”</h2><p>å¯¹éœ€æ±‚åˆ†æé˜¶æ®µæ”¶é›†åˆ°çš„æ•°æ®è¿›è¡Œåˆ†ç±»ã€ç»„ç»‡ï¼ˆèšé›†ï¼‰ï¼Œå½¢æˆå®ä½“<br>å®ä½“çš„å±æ€§ï¼Œæ ‡è¯†å®ä½“çš„ç <br>ç¡®å®šå®ä½“ä¹‹é—´çš„è”ç³»ç±»å‹(1:1ï¼Œ1:nï¼Œm:n)</p>
<h2 id="ç±»èƒŒåè•´å«çš„åŸºæœ¬æ€æƒ³æ˜¯æ•°æ®æŠ½è±¡å’Œå°è£…"><a href="#ç±»èƒŒåè•´å«çš„åŸºæœ¬æ€æƒ³æ˜¯æ•°æ®æŠ½è±¡å’Œå°è£…" class="headerlink" title="ç±»èƒŒåè•´å«çš„åŸºæœ¬æ€æƒ³æ˜¯æ•°æ®æŠ½è±¡å’Œå°è£…"></a>ç±»èƒŒåè•´å«çš„åŸºæœ¬æ€æƒ³æ˜¯æ•°æ®æŠ½è±¡å’Œå°è£…</h2><p>æ•°æ®æŠ½è±¡æ˜¯ä¸€ç§ä¾èµ–äºæ¥å£å’Œå®ç°åˆ†ç¦»çš„ç¼–ç¨‹å’Œè®¾è®¡æŠ€æœ¯ã€‚ç±»çš„è®¾è®¡è€…å¿…é¡»å…³å¿ƒç±»æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä½†æ˜¯ä½¿ç”¨è¯¥ç±»çš„ç¨‹åºå‘˜ä¸å¿…äº†è§£è¿™äº›ç»†èŠ‚ï¼Œä»…éœ€æŠ½è±¡åœ°è€ƒè™‘è¯¥ç±»å‹èƒ½åšä»€ä¹ˆã€‚<br>å°è£…æ˜¯ä¸€é¡¹å°†ä½å±‚æ¬¡çš„å…ƒç´ ç»„åˆèµ·æ¥å½¢æˆæ–°çš„ã€é«˜å±‚æ¬¡å®ä½“çš„æŠ€æœ¯ã€‚å‡½æ•°å’Œç±»éƒ½æ˜¯å°è£…çš„å½¢å¼ã€‚è¢«å°è£…çš„å…ƒç´ éšè—äº†ä»–ä»¬çš„å®ç°ç»†èŠ‚ï¼Œå…¶ä¸»è¦ä¼˜ç‚¹åœ¨äºï¼šé¿å…ç±»å†…éƒ¨å‡ºç°æ— æ„çš„ã€å¯èƒ½ç ´åå¯¹è±¡çŠ¶æ€çš„ç”¨æˆ·çº§é”™è¯¯ï¼›ä½¿å¾—ä¿®æ”¹ç±»çš„å®ç°æ—¶åªè¦ä¿æŒæ¥å£ä¸å˜ï¼Œå°±æ— éœ€æ”¹å˜ç”¨æˆ·çº§ä»£ç ã€‚</p>
]]></content>
      
        <categories>
            
            <category> å¹²è´§ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æ¦‚å¿µ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaåŸºæœ¬æ•°æ®ç±»å‹å–å€¼èŒƒå›´]]></title>
      <url>/Java%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%96%E5%80%BC%E8%8C%83%E5%9B%B4.html</url>
      <content type="html"><![CDATA[<p>åœ¨JAVAä¸­ä¸€å…±æœ‰å…«ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯<br>byteã€shortã€intã€longã€floatã€doubleã€charã€boolean </p>
<h2 id="æ•´å‹"><a href="#æ•´å‹" class="headerlink" title="æ•´å‹"></a>æ•´å‹</h2><p>å…¶ä¸­byteã€shortã€intã€longéƒ½æ˜¯è¡¨ç¤ºæ•´æ•°çš„ï¼Œåªä¸è¿‡ä»–ä»¬çš„å–å€¼èŒƒå›´ä¸ä¸€æ ·<br>byteçš„å–å€¼èŒƒå›´ä¸º-128~127ï¼Œå ç”¨1ä¸ªå­—èŠ‚ï¼ˆ-2çš„7æ¬¡æ–¹åˆ°2çš„7æ¬¡æ–¹-1ï¼‰<br>shortçš„å–å€¼èŒƒå›´ä¸º-32768~32767ï¼Œå ç”¨2ä¸ªå­—èŠ‚ï¼ˆ-2çš„15æ¬¡æ–¹åˆ°2çš„15æ¬¡æ–¹-1ï¼‰<br>intçš„å–å€¼èŒƒå›´ä¸ºï¼ˆ-2147483648~2147483647ï¼‰ï¼Œå ç”¨4ä¸ªå­—èŠ‚ï¼ˆ-2çš„31æ¬¡æ–¹åˆ°2çš„31æ¬¡æ–¹-1ï¼‰<br>longçš„å–å€¼èŒƒå›´ä¸ºï¼ˆ-9223372036854774808~9223372036854774807ï¼‰ï¼Œå ç”¨8ä¸ªå­—èŠ‚ï¼ˆ-2çš„63æ¬¡æ–¹åˆ°2çš„63æ¬¡æ–¹-1ï¼‰<br><a id="more"></a><br>å¯ä»¥çœ‹åˆ°byteå’Œshortçš„å–å€¼èŒƒå›´æ¯”è¾ƒå°ï¼Œè€Œlongçš„å–å€¼èŒƒå›´å¤ªå¤§ï¼Œå ç”¨çš„ç©ºé—´å¤šï¼ŒåŸºæœ¬ä¸Šintå¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„æ—¥å¸¸çš„è®¡ç®—äº†ï¼Œè€Œä¸”intä¹Ÿæ˜¯ä½¿ç”¨çš„æœ€å¤šçš„æ•´å‹ç±»å‹äº†ã€‚<br>åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœJAVAä¸­å‡ºç°äº†ä¸€ä¸ªæ•´æ•°æ•°å­—æ¯”å¦‚35ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—å°±æ˜¯intå‹çš„ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›å®ƒæ˜¯byteå‹çš„ï¼Œå¯ä»¥åœ¨æ•°æ®ååŠ ä¸Šå¤§å†™çš„ Bï¼š35Bï¼Œè¡¨ç¤ºå®ƒæ˜¯byteå‹çš„ï¼ŒåŒæ ·çš„35Sè¡¨ç¤ºshortå‹ï¼Œ35Lè¡¨ç¤ºlongå‹çš„ï¼Œè¡¨ç¤ºintæˆ‘ä»¬å¯ä»¥ä»€ä¹ˆéƒ½ä¸ç”¨åŠ ï¼Œä½†æ˜¯å¦‚æœè¦è¡¨ç¤ºlongå‹çš„ï¼Œå°±ä¸€å®šè¦åœ¨æ•°æ®åé¢åŠ â€œLâ€ã€‚ </p>
<h2 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h2><p>floatå’Œdoubleæ˜¯è¡¨ç¤ºæµ®ç‚¹å‹çš„æ•°æ®ç±»å‹ï¼Œä»–ä»¬ä¹‹é—´çš„åŒºåˆ«åœ¨äºä»–ä»¬çš„ç²¾ç¡®åº¦ä¸åŒ<br>float 3.402823e+38 ~ 1.401298e-45ï¼ˆe+38è¡¨ç¤ºæ˜¯ä¹˜ä»¥10çš„38æ¬¡æ–¹ï¼ŒåŒæ ·ï¼Œe-45è¡¨ç¤ºä¹˜ä»¥10çš„è´Ÿ45æ¬¡æ–¹ï¼‰å ç”¨4ä¸ªå­—èŠ‚<br>double 1.797693e+308~ 4.9000000e-324 å ç”¨8ä¸ªå­—èŠ‚<br>doubleå‹æ¯”floatå‹å­˜å‚¨èŒƒå›´æ›´å¤§ï¼Œç²¾åº¦æ›´é«˜ï¼Œæ‰€ä»¥é€šå¸¸çš„æµ®ç‚¹å‹çš„æ•°æ®åœ¨ä¸å£°æ˜çš„æƒ…å†µä¸‹éƒ½æ˜¯doubleå‹çš„ï¼Œå¦‚æœè¦è¡¨ç¤ºä¸€ä¸ªæ•°æ®æ˜¯floatå‹çš„ï¼Œå¯ä»¥åœ¨æ•°æ®åé¢åŠ ä¸Šâ€œFâ€ã€‚<br>æµ®ç‚¹å‹çš„æ•°æ®æ˜¯ä¸èƒ½å®Œå…¨ç²¾ç¡®çš„ï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™åœ¨è®¡ç®—çš„æ—¶å€™å¯èƒ½ä¼šåœ¨å°æ•°ç‚¹æœ€åå‡ ä½å‡ºç°æµ®åŠ¨ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚ </p>
<p>booleanå‹ï¼ˆå¸ƒå°”å‹ï¼‰<br>è¿™ä¸ªç±»å‹åªæœ‰ä¸¤ä¸ªå€¼ï¼Œtrueå’Œfalseï¼ˆçœŸå’ŒéçœŸï¼‰<br>boolean t = trueï¼›<br>boolean f = falseï¼›<br>charå‹ï¼ˆæ–‡æœ¬å‹ï¼‰<br>ç”¨äºå­˜æ”¾å­—ç¬¦çš„æ•°æ®ç±»å‹ï¼Œå ç”¨2ä¸ªå­—èŠ‚ï¼Œé‡‡ç”¨unicodeç¼–ç ï¼Œå®ƒçš„å‰128å­—èŠ‚ç¼–ç ä¸ASCIIå…¼å®¹<br>å­—ç¬¦çš„å­˜å‚¨èŒƒå›´åœ¨\u0000~\uFFFFï¼Œåœ¨å®šä¹‰å­—ç¬¦å‹çš„æ•°æ®æ—¶å€™è¦æ³¨æ„åŠ â€™ â€˜ï¼Œæ¯”å¦‚ â€˜1â€™è¡¨ç¤ºå­—ç¬¦â€™1â€™è€Œä¸æ˜¯æ•°å€¼1ï¼Œ<br>char c = â€˜ 1 â€˜;<br>æˆ‘ä»¬è¯•ç€è¾“å‡ºcçœ‹çœ‹ï¼ŒSystem.out.println(c);ç»“æœå°±æ˜¯1ï¼Œè€Œå¦‚æœæˆ‘ä»¬è¿™æ ·è¾“å‡ºå‘¢System.out.println(c+0);<br>ç»“æœå´å˜æˆäº†49ã€‚<br>å¦‚æœæˆ‘ä»¬è¿™æ ·å®šä¹‰cçœ‹çœ‹<br>char c = â€˜ \u0031 â€˜;è¾“å‡ºçš„ç»“æœä»ç„¶æ˜¯1ï¼Œè¿™æ˜¯å› ä¸ºå­—ç¬¦â€™1â€™å¯¹åº”ç€unicodeç¼–ç å°±æ˜¯\u0031<br>char c1 = â€˜hâ€™,c2 = â€˜eâ€™,c3=â€™lâ€™,c4=â€™lâ€™,c5 = â€˜oâ€™;<br>System.out.print(c1);System.out.print(c2);System.out.print(c3);System.out.print(c4);Sytem.out.print(c5);</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaåŸºç¡€ç¼–ç¨‹é¢˜]]></title>
      <url>/Java%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B%E9%A2%98.html</url>
      <content type="html"><![CDATA[<ol>
<li>æŠŠä¸€ä¸ªæ•°ç»„arr[n]è¿›è¡Œåè½¬<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹æ³•ä¸€ï¼Œæ€è·¯ï¼šåˆ©ç”¨forå¾ªç¯ï¼Œåªå¾ªç¯n/2-1æ¬¡ï¼Œåœ¨åŒä¸€ä¸ªæ•°ç»„é‡Œè¿›è¡Œå€¼çš„äº¤æ¢</span></span><br><span class="line"> <span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>,j = arr.length-<span class="number">1</span>; i &lt; arr.length; i++,j--) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = temp ;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">3</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">         &lt;!---more---&gt;</span><br><span class="line"><span class="comment">//æ–¹æ³•äºŒï¼Œæ€è·¯ï¼šé‡æ–°newä¸€ä¸ªæ•°ç»„ï¼Œå°†åŸæ•°ç»„é€†å‘èµ‹å€¼ç»™æ–°æ•°ç»„</span></span><br><span class="line"><span class="keyword">int</span>[] arrTemp = <span class="keyword">new</span> <span class="keyword">int</span>[arr.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            arrTemp[i] = arr[arr.length-i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        arr = arrTemp ;</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line"><span class="comment">//æ–¹æ³•ä¸‰ï¼Œæ€è·¯ï¼šé€šè¿‡Collections.reverse(list);</span></span><br><span class="line"> ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            list.add(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        Collections.reverse(list);</span><br><span class="line">        System.out.println( list);</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è‡ªåŠ¨è£…ç®±çš„é™·é˜±]]></title>
      <url>/%E8%87%AA%E5%8A%A8%E8%A3%85%E7%AE%B1%E7%9A%84%E9%99%B7%E9%98%B1.html</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Integer a = <span class="number">1</span>;</span><br><span class="line">Integer b = <span class="number">2</span>;</span><br><span class="line">Integer c = <span class="number">3</span>;</span><br><span class="line">Integer d = <span class="number">3</span>;</span><br><span class="line">Integer e = <span class="number">321</span>;</span><br><span class="line">Integer f = <span class="number">321</span>;</span><br><span class="line">Long g = <span class="number">3L</span>;</span><br><span class="line">System.out.println(c == d);</span><br><span class="line">System.out.println(e == f);</span><br><span class="line">System.out.println(c == (a+b));</span><br><span class="line">System.out.println(c.equals(a+b));</span><br><span class="line">System.out.println(g == (a+b));</span><br><span class="line">System.out.println(g.equals(a+b));</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="è¾“å‡ºç»“æœï¼š"><a href="#è¾“å‡ºç»“æœï¼š" class="headerlink" title="è¾“å‡ºç»“æœï¼š"></a>è¾“å‡ºç»“æœï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">false</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">false</span></span><br></pre></td></tr></table></figure>
<ol>
<li>åŒ…è£…ç±»â€œ==â€è¿ç®—ä¼šå‘ç”Ÿè‡ªåŠ¨æ‹†è£…ç®±ï¼Œåœ¨æ²¡æœ‰ç®—æœ¯è¿ç®—çš„æƒ…å†µä¸‹ä¸ä¼šè‡ªåŠ¨æ‹†ç®±ï¼Œä»¥åŠå®ƒä»¬çš„equals()æ–¹æ³•ä¸å¤„ç†æ•°æ®è½¬å‹çš„å…³ç³»ã€‚</li>
<li>è‡ªåŠ¨è£…ç®±è¿‡ç¨‹è°ƒç”¨äº†valueOf()çš„æ–¹æ³•ï¼ŒæŸ¥çœ‹valueOf()æ–¹æ³•çš„æºç ä¸ºï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line">            <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerCache</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> low = -<span class="number">128</span>;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> high;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            <span class="comment">// high value may be configured by property</span></span><br><span class="line">            <span class="keyword">int</span> h = <span class="number">127</span>;</span><br><span class="line">            String integerCacheHighPropValue =</span><br><span class="line">                sun.misc.VM.getSavedProperty(<span class="string">"java.lang.Integer.IntegerCache.high"</span>);</span><br><span class="line">            <span class="keyword">if</span> (integerCacheHighPropValue != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">int</span> i = parseInt(integerCacheHighPropValue);</span><br><span class="line">                    i = Math.max(i, <span class="number">127</span>);</span><br><span class="line">                    <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line">                    h = Math.min(i, Integer.MAX_VALUE - (-low) -<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span>( NumberFormatException nfe) &#123;</span><br><span class="line">                    <span class="comment">// If the property cannot be parsed into an int, ignore it.</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            high = h;</span><br><span class="line"></span><br><span class="line">            cache = <span class="keyword">new</span> Integer[(high - low) + <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> j = low;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">                cache[k] = <span class="keyword">new</span> Integer(j++);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span></span><br><span class="line">            <span class="keyword">assert</span> IntegerCache.high &gt;= <span class="number">127</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">IntegerCache</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong> é€šè¿‡é˜…è¯»æºä»£ç ï¼Œå¯ä»¥å‘ç°ï¼Œjavaå†…éƒ¨ä¸ºäº†èŠ‚çœå†…å­˜ï¼ŒIntegerCacheç±»ä¸­æœ‰ä¸€ä¸ªæ•°ç»„ç¼“å­˜äº†å€¼ä»-128åˆ°127çš„Integerå¯¹è±¡ã€‚å½“æˆ‘ä»¬è°ƒç”¨Integer.valueOfï¼ˆint iï¼‰çš„æ—¶å€™ï¼Œå¦‚æœiçš„å€¼æ—¶ç»“ä½™-128åˆ°127ä¹‹é—´çš„ï¼Œä¼šç›´æ¥ä»è¿™ä¸ªç¼“å­˜ä¸­è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™å°±newä¸€ä¸ªæ–°çš„Integerå¯¹è±¡ã€‚</strong><br>321&gt;127,æ‰€ä»¥é‡æ–°newäº†ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>å…¸å‹é¢˜ç›®ï¼š<br>è¯·æä¾›ä¸€ä¸ªå¯¹iå’Œjçš„å£°æ˜ï¼Œå°†ä¸‹é¢çš„å¾ªç¯è½¬å˜æˆä¸ºä¸€ä¸ªæ— é™å¾ªç¯ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(j &lt;= i &amp;&amp; i &lt;= j &amp;&amp; i != j)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>ç­”æ¡ˆï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">200</span> ;</span><br><span class="line">Integer j = <span class="number">200</span> ;</span><br><span class="line"> <span class="keyword">while</span>(j&lt;=i &amp;&amp; i&lt;=j &amp;&amp; i!= j)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[äºŒè¿›åˆ¶ã€åè¿›åˆ¶å¿«é€Ÿè½¬æ¢]]></title>
      <url>/%E4%BA%8C%E8%BF%9B%E5%88%B6%E3%80%81%E5%8D%81%E8%BF%9B%E5%88%B6%E5%BF%AB%E9%80%9F%E8%BD%AC%E6%8D%A2.html</url>
      <content type="html"><![CDATA[<h2 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><p>ä»¥8ä½ æ¥æ¼”ç¤º:</p>
<ol>
<li>ç¬¬ä¸€ç§:<br>00000001      1<br>00000010      2<br>00000100      4<br>00001000      8<br>00010000      16<br>00100000      32<br>01000000      64<br>10000000      128<a id="more"></a></li>
<li>ç¬¬äºŒç§ï¼š<br>00000001      1<br>00000011      3<br>00000111      7<br>00001111      15<br>00011111      31<br>00111111      63<br>01111111      127<br>3.ç¬¬ä¸‰ç§ï¼š<br>10000000     128<br>11000000     192<br>11100000     224<br>11110000     240<br>11111000     248<br>11111100     252<br>11111110     254<br>ä¸¾ä¸ªä¾‹å­ï¼š  11101011     <pre><code>å¯åˆ†ä¸ºï¼š
11100000ï¼ˆä¸Šé¢ç¬¬ä¸‰ç§ç±»å‹ï¼‰   224
00001000ï¼ˆä¸Šé¢ç¬¬ä¸€ç§ç±»å‹ï¼‰   8
00000011ï¼ˆä¸Šé¢ç¬¬äºŒç§ç±»å‹ï¼‰   3
</code></pre><h1 id="æˆ‘ä»¬é€šè¿‡è®°ä½ä¸Šé¢ä¸‰ç§ç±»å‹çš„è½¬æ¢ï¼Œå†ç”¨åŠ -æ³•ï¼ˆåŠ æ³•å£ç®—ä½ ä¼šå§ï¼‰ç«‹å³å¾—åˆ°ç»“æœï¼š235"><a href="#æˆ‘ä»¬é€šè¿‡è®°ä½ä¸Šé¢ä¸‰ç§ç±»å‹çš„è½¬æ¢ï¼Œå†ç”¨åŠ -æ³•ï¼ˆåŠ æ³•å£ç®—ä½ ä¼šå§ï¼‰ç«‹å³å¾—åˆ°ç»“æœï¼š235" class="headerlink" title="æˆ‘ä»¬é€šè¿‡è®°ä½ä¸Šé¢ä¸‰ç§ç±»å‹çš„è½¬æ¢ï¼Œå†ç”¨åŠ  æ³•ï¼ˆåŠ æ³•å£ç®—ä½ ä¼šå§ï¼‰ç«‹å³å¾—åˆ°ç»“æœï¼š235"></a>æˆ‘ä»¬é€šè¿‡è®°ä½ä¸Šé¢ä¸‰ç§ç±»å‹çš„è½¬æ¢ï¼Œå†ç”¨åŠ  æ³•ï¼ˆåŠ æ³•å£ç®—ä½ ä¼šå§ï¼‰ç«‹å³å¾—åˆ°ç»“æœï¼š235</h1><h2 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h2>ç†Ÿè®°ä»¥ä¸‹æ’åˆ—ï¼Œå…¶å®å¾ˆEasyäº†ï¼Œä»å³å¾€ å·¦ï¼Œä¾æ¬¡æ˜¯å‰ä¸€ä¸ªæ•°çš„2å€ï¼š<br>2^8      2^7     2^6     2^5    2^4   2^3   2^2     2^1    2^0<br>256      128      64       32      16      8        4         2         1<br>éšä¾¿å†™ä¸ªæ•°å­—æ¯”å¦‚48<br>48 = 32 + 16,æ‰€ä»¥åœ¨32 å’Œ 16æ‰€åœ¨çš„ä½ç½®ä¸º1ï¼Œå…¶ä½™ä¸º0ï¼Œ<br>è½¬ä¸º2è¿›åˆ¶å°±æ˜¯<br>256  128  64  32  16  8   4   2   1<br>0      0       0    1    1   0   0   0   0</li>
</ol>
<p>äºŒè¿›åˆ¶è½¬åè¿›åˆ¶å°±æ›´ç®€å•äº†ï¼Œ<br>æ¯”å¦‚éšä¾¿å†™çš„ä¸€ä¸² 01111101<br>å…ˆå†™ä¸Š ï¼š  0         1           1         1         1         1          0          1<br>ç„¶åå¡«å…… 128      64        32       16        8          4          2          1</p>
<p>åè¿›åˆ¶ä¸º 64+32+16+8+4+1=125</p>
]]></content>
      
        <categories>
            
            <category> ç³»ç»Ÿ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è¿›åˆ¶è½¬æ¢ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[DOSä¸‹åˆ›å»ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹]]></title>
      <url>/DOS%E4%B8%8B%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E5%A4%B9.html</url>
      <content type="html"><![CDATA[<h2 id="DOSä¸‹åˆ›å»ºæ–‡ä»¶çš„ä¸‰ç§æ–¹æ³•"><a href="#DOSä¸‹åˆ›å»ºæ–‡ä»¶çš„ä¸‰ç§æ–¹æ³•" class="headerlink" title="DOSä¸‹åˆ›å»ºæ–‡ä»¶çš„ä¸‰ç§æ–¹æ³•"></a>DOSä¸‹åˆ›å»ºæ–‡ä»¶çš„ä¸‰ç§æ–¹æ³•</h2><p><strong>ç¬¬ä¸€ç§ï¼š</strong></p>
<ol>
<li>echo å†…å®¹ &gt; a.txt é‡å®šå‘è¾“å‡ºï¼Œæ­¤æ—¶åˆ›å»ºæ–‡æœ¬æ–‡ä»¶a.txt </li>
<li>echo å†…å®¹ &gt;&gt; a.txt å‘a.txtæ–‡ä»¶ä¸­è¿½åŠ ä¿¡æ¯<br><strong>ç¬¬äºŒç§ï¼š</strong><br>copy con a.txt åˆ›å»ºç©ºæ–‡æœ¬æ–‡ä»¶a.txt<br>è¾“å…¥å®Œæˆåï¼ŒæŒ‰ctrl+zé€€å‡º<br><strong>ç¬¬ä¸‰ç§ï¼š</strong><br>type nul&gt;filename å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸ºfilenameçš„ç©ºæ–‡ä»¶ï¼Œåœ¨æ‰¹å¤„ç†ä¸­ç»å¸¸ä½¿ç”¨<br>copy nul a.txt å¯åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå¦‚æœa.txtå·²ç»å­˜åœ¨ï¼Œä¸”æœ‰å†…å®¹ï¼Œä¼šè¢«æ¸…ç©ºï¼Œåœ¨æ‰¹æ–‡ä»¶ä¸­ç»å¸¸ç”¨ã€‚<a id="more"></a>
<h2 id="DOSä¸‹åˆ›å»ºç›®å½•çš„å‘½ä»¤"><a href="#DOSä¸‹åˆ›å»ºç›®å½•çš„å‘½ä»¤" class="headerlink" title="DOSä¸‹åˆ›å»ºç›®å½•çš„å‘½ä»¤"></a>DOSä¸‹åˆ›å»ºç›®å½•çš„å‘½ä»¤</h2></li>
<li>åˆ›å»ºï¼šmd ç›®å½•å æˆ–è€… mkdir ç›®å½•å</li>
<li>åˆ é™¤ï¼šrd ç›®å½•å æˆ–è€…rmdir ç›®å½•å</li>
<li>åˆ é™¤éç©ºç›®å½•ï¼š rd /s /q ç›®å½•å      <ul>
<li>/s é™¤ç›®å½•æœ¬èº«å¤–ï¼Œè¿˜å°†åˆ é™¤æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•å’Œæ–‡ä»¶,ç”¨äºåˆ é™¤ç›®å½•æ ‘ã€‚</li>
<li>/q å®‰é™æ¨¡å¼</li>
<li>/s åˆ é™¤ç›®å½•æ ‘æ—¶ä¸è¦æ±‚ç¡®è®¤<h2 id="å…¶ä»–ä¸€äº›å‘½ä»¤"><a href="#å…¶ä»–ä¸€äº›å‘½ä»¤" class="headerlink" title="å…¶ä»–ä¸€äº›å‘½ä»¤"></a>å…¶ä»–ä¸€äº›å‘½ä»¤</h2></li>
</ul>
</li>
<li>cmdå‘½ä»¤</li>
<li>é™„ä»¶<br>å‘½ä»¤ï¼š</li>
<li>åˆ‡æ¢ ç›˜ç¬¦<br>d: e: f:</li>
<li>æŸ¥çœ‹æ–‡ä»¶ç›®å½•æ¸…å•<br>dir<br>dir  /s æŸ¥çœ‹æ‰€æœ‰ç›®å½•å’Œå­ç›®å½•ä¸‹çš„æ–‡ä»¶ç›®å½•æ¸…å•<br>dir /påˆ†å±æ˜¾ç¤º</li>
<li>æ”¹å˜å½“å‰ç›®å½•<br>cd ç›®å½•<br>cd.. å›é€€åˆ°ä¸Šä¸€çº§ç›®å½•<br>cd/ å›é€€åˆ°æ ¹ç›®å½•</li>
<li>æ–°å»ºæ–‡ä»¶å¤¹ï¼ˆç›®å½•ï¼‰<br>md ç›®å½•å</li>
<li>æ–°å»ºæ–‡ä»¶<br>copy con æ–‡ä»¶å.æ‰©å±•å<br>å†…å®¹<br>ctrl + z</li>
<li>æ˜¾ç¤ºæ–‡ä»¶å†…å®¹<br>type æ–‡ä»¶å.æ‰©å±•å</li>
<li>å¤åˆ¶<br>copy æºæ–‡ä»¶ç›®å½• ç›®æ ‡æ–‡ä»¶ç›®å½•</li>
<li>é‡å‘½å<br>ren åŸæ–‡ä»¶å æ–°æ–‡ä»¶å</li>
<li>ç§»åŠ¨<br>move åŸæ–‡ä»¶ ç›®æ ‡è·¯å¾„</li>
<li>åˆ é™¤ç›®å½•<br>rd ç›®å½•å<br>ä½†æ˜¯åªèƒ½åˆ é™¤ ç©ºçš„ç›®å½•</li>
<li><p>åˆ é™¤æ–‡ä»¶<br>del  æ–‡ä»¶.æ‰©å±•å<br>del <em>.</em></p>
</li>
<li><p>æ¸…å±<br>cls</p>
</li>
<li>é€€å‡º<br>exit</li>
</ol>
]]></content>
      
        <categories>
            
            <category> ç³»ç»Ÿ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> DOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Intellijå¯¼å‡ºJavaDocç¼–ç å¼‚å¸¸]]></title>
      <url>/Intellij%E5%AF%BC%E5%87%BAJavaDoc%E7%BC%96%E7%A0%81%E5%BC%82%E5%B8%B8.html</url>
      <content type="html"><![CDATA[<p>Intellij IDEA å¯¼å‡ºJavaDocæ—¶ç¼–ç å¼‚å¸¸ä¹‹è§£å†³æ–¹æ¡ˆã€‚</p>
<p>javacç¼–è¯‘æç¤ºé”™è¯¯éœ€è¦ä¸º classã€interface æˆ– enum<br>HelloWorld.java:1: éœ€è¦ä¸º classã€interface æˆ– enum<br>é”˜ç¼ublic class HelloWorld{<br>^<br>D:\IDE-workspace\src\com\dudefu\www\Test2.java:1: é”™è¯¯: éæ³•å­—ç¬¦: â€˜\ufeffâ€™<br>?package com.dudefu.www;<br><a id="more"></a><br>^<br>D:\IDE-workspace\src\com\dudefu\www\Test2.java:1: é”™è¯¯: éœ€è¦class, interfaceæˆ–enum<br>?package com.dudefu.www;<br>         ^<br>3 é”™è¯¯</p>
<h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>è¿™ä¸ªé”™è¯¯å‡ºç°çš„åŸå› ä¸»è¦æ˜¯åœ¨ä¸­æ–‡æ“ä½œç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ä¸€è´¯çš„â€œjavac HelloWorld.javaâ€æ–¹å¼ç¼–è¯‘UTF-8ï¼ˆå¸¦BOMï¼‰ç¼–ç çš„.javaæºæ–‡ä»¶ï¼Œåœ¨æ²¡æœ‰æŒ‡å®šç¼–ç å‚æ•°ï¼ˆencodingï¼‰çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨GBKç¼–ç ã€‚å½“ç¼–è¯‘å™¨ç”¨GBKç¼–ç æ¥ç¼–è¯‘UTF-8æ–‡ä»¶æ—¶ï¼Œå°±ä¼šæŠŠUTF-8ï¼ˆå¸¦BOMï¼‰ç¼–ç æ–‡ä»¶çš„æ–‡ä»¶å¤´çš„å 3ä¸ªå­—èŠ‚çš„å¤´ä¿¡æ¯ï¼ŒæŒ‰ç…§GBKä¸­æ±‰å­—å ä¸¤ä¸ªå­—èŠ‚ã€è‹±æ–‡å 1ä¸ªå­—èŠ‚çš„ç‰¹æ€§è§£ç æˆäº†â€œä¹±ç â€çš„ä¸¤ä¸ªæ±‰å­—ã€‚è¿™ä¸ªæºæ–‡ä»¶åº”è¯¥æ˜¯ç”¨è®°äº‹æœ¬å¦å­˜å­˜ä¸ºUTF-8ç¼–ç é€ æˆçš„ã€‚<br> å¯¹äºéGBKåŠå…¶å­é›†ç¼–ç ï¼ˆGB2312ï¼‰çš„æ­£ç¡®çš„æºæ–‡ä»¶ï¼Œç¼–è¯‘æ–¹å¼ä¸ºâ€œjavac -encoding â€œUTF-8â€ HelloWord.javaâ€ï¼Œè¿™æ ·ä»£ç é”™è¯¯çš„æŒ‡å®šä»£ç é‡Œå°±ä¸ä¼šå‡ºç°ä¹±ç çš„ä¸­æ–‡ã€‚<br> ä½†æ˜¯ä¾ç„¶ä¼šæœ‰é”™è¯¯ï¼Œæç¤ºâ€œHelloWorld.java:1: éæ³•å­—ç¬¦: \65279ã€‚<br>è¿™æ˜¯å› ä¸º.javaå¯¹äºUTF-8ç¼–ç ï¼Œåªè¯†åˆ«UTF-8ï¼ˆä¸å¸¦BOMï¼‰é‚£ç§ã€‚è€Œè®°äº‹æœ¬åªæ”¯æŒä¿å­˜æ–‡ä»¶ä¸ºå¸¦ç­¾åçš„UTF-8ï¼Œé‚£æœ‰æ²¡æœ‰åŠæ³•è§£å†³å‘¢ï¼Ÿ<br>å½“ç„¶æ˜¯æœ‰çš„ï¼Œé‚£å°±æ˜¯ä½¿ç”¨EmEditorã€EditPlusã€UltraEditæˆ–Notepad++ä¹‹ç±»çš„å·¥å…·å¦å­˜ä¸ºUTFï¼ˆä¸å¸¦BOMï¼‰ï¼ˆåŒºåˆ«äºå¸¦UTF + BOMï¼‰çš„ç¼–ç æ–‡ä»¶ã€‚è¿™æ—¶å€™ä½¿ç”¨â€œjavac -encoding â€œUTF-8â€ HelloWorld.javaâ€ï¼Œå°±æ²¡æœ‰ä¸Šè¿°ç¼–ç é—®é¢˜äº†ã€‚<br>ä¹Ÿè®¸æœ‰äººä¼šè¯´ï¼Œâ€œæˆ‘å¹²è„†éƒ½ç”¨GBKä¸å°±è¡Œäº†å—ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨UTF-8å‘¢ï¼Ÿâ€<br>è¿™æ˜¯å› ä¸ºUTF-8æ”¯æŒä¸–ç•Œå¤šç§è¯­è¨€çš„æ–‡å­—ï¼Œè¢«ä¸–ç•Œå¤šæ•°å›½å®¶æ¥å—ï¼Œæ˜¯å›½é™…é€šç”¨ç¼–ç ï¼Œä¹Ÿæ˜¯Javaæ¨èä½¿ç”¨çš„ç¼–ç ã€‚Javaé›†æˆå¼€å‘ç¯å¢ƒEclipseä¸­é»˜è®¤ç¼–ç å°±æ˜¯UTF-8ã€‚å¦‚æœä½¿ç”¨GBKï¼Œå°¤å…¶æ˜¯åšç½‘ç«™ï¼Œåœ¨éæ±‰è¯­å›½å®¶ï¼Œå°†æ— æ³•æ­£å¸¸æµè§ˆã€‚åœ¨ä¿¡æ¯åŒ–æ—¶ä»£ï¼Œå›½é™…äº¤å¾€æ—¥ç›Šé¢‘ç¹ï¼›åšè½¯ä»¶å’Œç½‘ç«™ï¼Œä¸èƒ½åªç€çœ¼å½“å‰ï¼Œä¹Ÿè¦ä¸ºæ—¥åç»´æŠ¤åšä¼˜åŒ–ã€é™ä½ç»´æŠ¤æˆæœ¬ã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Intellij </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸]]></title>
      <url>/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E5%BC%82%E5%B8%B8.html</url>
      <content type="html"><![CDATA[<h2 id="ç¨‹åºè¿è¡Œæ—¶ï¼Œå­˜å‚¨æ•°æ®çš„äº”ä¸ªåœ°æ–¹ï¼š"><a href="#ç¨‹åºè¿è¡Œæ—¶ï¼Œå­˜å‚¨æ•°æ®çš„äº”ä¸ªåœ°æ–¹ï¼š" class="headerlink" title="ç¨‹åºè¿è¡Œæ—¶ï¼Œå­˜å‚¨æ•°æ®çš„äº”ä¸ªåœ°æ–¹ï¼š"></a>ç¨‹åºè¿è¡Œæ—¶ï¼Œå­˜å‚¨æ•°æ®çš„äº”ä¸ªåœ°æ–¹ï¼š</h2><p>1ï¼‰<strong>å¯„å­˜å™¨</strong> è¿™æ˜¯æœ€å¿«çš„å­˜å‚¨åŒºï¼Œä½äºå¤„ç†å™¨å†…éƒ¨ã€‚ä½†æ˜¯ï¼Œå¯„å­˜å™¨æ•°é‡æå…¶æœ‰é™ï¼Œæ‰€ä»¥å¯„å­˜å™¨æ ¹æ®éœ€æ±‚è¿›è¡Œåˆ†é…ã€‚ä½ ä¸èƒ½ç›´æ¥æ§åˆ¶ï¼Œä¹Ÿä¸èƒ½åœ¨ç¨‹åºä¸­æ„Ÿè§‰åˆ°å¯„å­˜å™¨å­˜åœ¨çš„ä»»ä½•è¿¹è±¡ï¼ˆCå’ŒC++å…è®¸å‘ç¼–è¯‘å™¨å»ºè®®å¯„å­˜å™¨çš„åˆ†é…æ–¹å¼ï¼‰ã€‚<br>å¯„å­˜å™¨æ˜¯å­˜åœ¨åœ¨cpuä¸Šçš„ã€‚è€Œå†…å­˜æ˜¯æŒ‚åœ¨æ•°æ®æ€»çº¿çš„ï¼Œæ•°æ®æ€»çº¿å°±æ˜¯ç”¨æ¥å†³å®šä¼ è¾“æ•°æ®çš„å¤§å°ã€‚è€Œå°±æ˜¯é€šè¿‡åœ¨å¯„å­˜å™¨ä¸Šçš„åœ°å€æ¥å¯»æ‰¾ç›¸åº”å†…å­˜ã€‚æ€»çš„æ¥è¯´ï¼Œå¯„å­˜å™¨å’Œå†…å­˜æ˜¯ä¸¤ä¸ªä¸œè¥¿ï¼Œç¨‹åºæ˜¯æ— æ³•æ¥æ§åˆ¶å¯„å­˜å™¨ï¼Œæ‰€ä»¥è¿™é‡Œäº†è§£ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚ä¸»è¦æ¶‰åŠåˆ°è¿è¡Œç¨‹åºæ¶‰åŠåˆ°çš„å°±æ˜¯ä¸‹é¢è¿™äº›æ ˆï¼ˆstackï¼‰ã€å †ï¼ˆheapï¼‰ã€é™æ€åŸŸã€å¸¸é‡æ± ã€‚<br><a id="more"></a><br>2ï¼‰<strong>å †æ ˆ</strong> å³â€œæ ˆâ€ï¼Œä½äºé€šç”¨RAMï¼ˆéšæœºè®¿é—®å­˜å‚¨å™¨ï¼‰ä¸­ï¼Œä½†é€šè¿‡å †æ ˆæŒ‡é’ˆå¯ä»¥ä»å¤„ç†å™¨é‚£é‡Œè·å¾—ç›´æ¥æ”¯æŒã€‚å †æ ˆæŒ‡é’ˆè‹¥å‘ä¸‹ç§»åŠ¨ï¼Œåˆ™åˆ†é…æ–°çš„å†…å­˜ï¼›è‹¥å‘ä¸Šç§»åŠ¨ï¼Œåˆ™é‡Šæ”¾é‚£äº›å†…å­˜ã€‚è¿™æ˜¯ä¸€ç§å¿«é€Ÿæœ‰æ•ˆçš„åˆ†é…å­˜å‚¨æ–¹æ³•ï¼Œä»…æ¬¡äºå¯„å­˜å™¨ã€‚åˆ›å»ºç¨‹åºæ—¶ï¼ŒJavaç³»ç»Ÿå¿…é¡»çŸ¥é“å­˜å‚¨åœ¨å †æ ˆå†…æ‰€æœ‰é¡¹çš„ç¡®åˆ‡ç”Ÿå‘½å‘¨æœŸï¼Œä»¥ä¾¿ä¸Šä¸‹ç§»åŠ¨å †æ ˆæŒ‡é’ˆã€‚è¿™ä¸€çº¦æŸé™åˆ¶äº†ç¨‹åºçš„çµæ´»æ€§ï¼Œæ‰€ä»¥è™½ç„¶æŸäº›Javaæ•°æ®å­˜å‚¨äºå †æ ˆä¸­â€”â€“ç‰¹åˆ«æ˜¯å¯¹è±¡å¼•ç”¨ï¼Œä½†æ˜¯Javaå¯¹è±¡å¹¶ä¸å­˜å‚¨äºå…¶ä¸­ã€‚<br>æ ˆä¸­ä¸»è¦å­˜æ”¾ä¸€äº›åŸºæœ¬ç±»å‹çš„å˜é‡ï¼ˆ int, short, long, byte,float, double, boolean, char ï¼‰å’Œå¯¹è±¡å¼•ç”¨ã€‚ å¯¹è±¡æ˜¯ä¸ä¼šæ”¾ç½®åœ¨é‡Œé¢çš„ã€‚<br>3ï¼‰<strong>å †</strong>  ä¸€ç§é€šç”¨çš„å†…å­˜æ± ï¼ˆä½äºRAMåŒºï¼‰ï¼Œç”¨äºå­˜æ”¾æ‰€æœ‰çš„Javaå¯¹è±¡ï¼Œä»¥åŠåŠ¨æ€ç”Ÿæˆçš„å¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„ï¼‰å’Œç¨‹åºè¿è¡Œæ—¶ç”Ÿæˆçš„ä¸€äº›æ•°æ®ï¼ˆåŒ…æ‹¬å¯¹è±¡çš„å®šä¹‰å’Œå˜é‡çš„å®šä¹‰ï¼‰ã€‚å †ä¸åŒäºå †æ ˆçš„å¥½å¤„æ˜¯ï¼šç¼–è¯‘å™¨ä¸éœ€è¦çŸ¥é“å­˜å‚¨çš„æ•°æ®åœ¨å †é‡Œå­˜æ´»å¤šé•¿æ—¶é—´ã€‚å› æ­¤ï¼Œåœ¨å †é‡Œåˆ†é…å­˜å‚¨æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚newä¸€ä¸ªå¯¹è±¡ï¼Œä¼šè‡ªåŠ¨åœ¨å †é‡Œè¿›è¡Œå­˜å‚¨åˆ†é…ã€‚ <strong>å½“ç„¶</strong>ï¼Œä¸ºè¿™ç§çµæ´»æ€§å¿…é¡»ä»˜å‡ºç›¸åº”çš„ä»£ä»·ï¼šç”¨å †è¿›è¡Œå­˜å‚¨åˆ†é…å’Œæ¸…ç†å¯èƒ½æ¯”å †æ ˆè¿›è¡Œå­˜å‚¨åˆ†é…éœ€è¦æ›´å¤šçš„æ—¶é—´ã€‚<br>4ï¼‰å¸¸é‡å­˜å‚¨ã€‚å¸¸é‡å€¼é€šå¸¸ç›´æ¥å­˜æ”¾åœ¨ç¨‹åºä»£ç å†…éƒ¨ï¼Œè¿™æ ·åšæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒä»¬æ°¸è¿œä¸ä¼šè¢«æ”¹å˜ã€‚<br>5ï¼‰<strong>éRAMå­˜å‚¨</strong> æ¯”å¦‚æµå¯¹è±¡å’ŒæŒä¹…åŒ–å¯¹è±¡ã€‚åœ¨æµå¯¹è±¡ä¸­ï¼Œå¯¹è±¡è½¬åŒ–æˆå­—èŠ‚æµï¼Œé€šå¸¸è¢«å‘é€ç»™å¦ä¸€å°æœºå™¨ã€‚åœ¨â€œæŒä¹…åŒ–å¯¹è±¡â€ä¸­ï¼Œå¯¹è±¡è¢«å­˜æ”¾ç£ç›˜ä¸­ã€‚è¿™ç§å­˜å‚¨æ–¹å¼çš„æŠ€å·§åœ¨äºï¼šæŠŠå¯¹è±¡è½¬åŒ–æˆå¯ä»¥å­˜æ”¾åœ¨å…¶ä»–åª’ä»‹ä¸Šçš„äº‹ç‰©ï¼Œåœ¨éœ€è¦æ—¶ï¼Œå¯ä»¥æ¢å¤æˆå¸¸è§„çš„ã€åŸºäºRAMçš„å¯¹è±¡ã€‚</p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p><strong>æ•°æ®å…±äº«</strong> è¿™ä¸ªæ•°æ®å…±äº«ä¸»è¦ä¹Ÿæ˜¯ç”±äºå¼•ç”¨çš„æ˜¯åœ°å€æ¥å†³å®šçš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼šchar str1=â€str1â€;char str2=â€str1â€;è¿™æ—¶å€™å†æ¬¡å£°æ˜Str2ï¼ŒåŒæ—¶æŒ‡å®šä¸¤ä¸ªä¸åŒçš„å¼•ç”¨è€Œç›¸åŒçš„å˜é‡;è¿™æ—¶å€™å¹¶ä¸éœ€è¦é‡æ–°å¼€è¾Ÿå¦å¤–ä¸€ä»½å†…å­˜ï¼Œåªéœ€è¦ä¸¤è€…éƒ½æŒ‡å‘ç›¸åŒçš„åœ°å€å°±å¯ä»¥äº†ã€‚è¿™æ ·æ•°æ®å…±äº«å¸¦æ¥çš„å°±æ˜¯å†…å­˜ä¸Šçš„èŠ‚çœã€‚<br><strong>å®šä¹‰å’Œå£°æ˜</strong> è¿™é‡Œéœ€è¦å¯¹è¿™ä¸¤ä¸ªåŠ¨è¯è¿›è¡Œä¸€äº›è¯´æ˜ã€‚å› ä¸ºåœ¨å¹³æ—¶è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ˜¯å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µæ¯”è¾ƒæ¨¡ç³Šã€‚ä¸€è¯´å°±æ˜¯å®šä¹‰å£°æ˜äº†ä¸€ä¸ªå˜é‡ã€‚ä½†æ˜¯äº‹å®ä¸Šç¡®å®ä¸ä¸€æ ·çš„ã€‚å£°æ˜å°±åªæ˜¯å®šä¹‰è¿™ä¸ªå˜é‡çš„åå­—ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªå˜é‡ã€‚è€Œå®šä¹‰å°±ä¸åŒäº†ï¼Œå®šä¹‰å°±æ˜¯åœ¨å£°æ˜ä¹‹åå¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–ã€è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼çš„è¿‡ç¨‹ã€‚å¦‚ï¼šint iï¼›int i=1ï¼›å°±æ˜¯è¿™ä¸ªåŒºåˆ«ã€‚<br>è€Œåœ¨javaå˜é‡çš„å£°æ˜è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸å…è®¸æ²¡æœ‰åˆå§‹åŒ–å˜é‡çš„ã€‚<br><strong> Data segment</strong> è¿™ä¸ªåŒ…æ‹¬é™æ€åŸŸå’Œå¸¸é‡æ± ã€‚<br><strong> é™æ€åŸŸ </strong> è¿™ä¸ªå°±æ˜¯å’±ä»¬å­˜æ”¾åœ¨å¯¹è±¡ä¸­çš„é™æ€å˜é‡ã€‚<br><strong> å¸¸é‡æ± </strong> è¿™ä¸ªä¸»è¦æ˜¯åœ¨ç¼–è¯‘å®Œæˆåï¼Œå­˜æ”¾åœ¨.classæ–‡ä»¶ä¸­ï¼ˆcode segmentï¼‰ã€‚åŒ…æ‹¬ä¸€äº›åŸºæœ¬çš„æ•°æ®ç±»å‹å’Œç›¸åº”çš„ç±»çš„æ¥å£å’Œå£°æ˜ã€‚æ¢è¨€ä¹‹å°±æ˜¯åœ¨ç¼–è¯‘åï¼Œç¨‹åºä¸­ç»å¸¸ä½¿ç”¨çš„ä¸ä¼šæ”¹å˜çš„ã€‚ä¾‹å¦‚ï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆè¿™ä¸ªæ˜¯<br>è§„å®šï¼Œè‚¯å®šæ²¡æ³•æ”¹ï¼‰ã€‚æ¥å£çš„å‘½åï¼šè¿™ä¸ªä½ è‚¯å®šä¸ä¼šé—²åˆ°æ”¹æ”¹è¿™ä¸ªæ¥è§£é—·çš„ã€‚</p>
<h2 id="å†…å­˜åˆ†æï¼Œjavaç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œä¸€èˆ¬å˜é‡çš„å†…å­˜ç²—å­˜æ”¾è¿‡ç¨‹ã€‚"><a href="#å†…å­˜åˆ†æï¼Œjavaç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œä¸€èˆ¬å˜é‡çš„å†…å­˜ç²—å­˜æ”¾è¿‡ç¨‹ã€‚" class="headerlink" title="å†…å­˜åˆ†æï¼Œjavaç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œä¸€èˆ¬å˜é‡çš„å†…å­˜ç²—å­˜æ”¾è¿‡ç¨‹ã€‚"></a>å†…å­˜åˆ†æï¼Œjavaç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œä¸€èˆ¬å˜é‡çš„å†…å­˜ç²—å­˜æ”¾è¿‡ç¨‹ã€‚</h2><p><img src="http://ou3xxg3hg.bkt.clouddn.com/Javaå†…å­˜åˆ†æ.jpg" alt=""><br><strong> å®ä¾‹ï¼š</strong><br>ä¸‹é¢é€šè¿‡åˆ†æä¸€ä¸ªä¾‹å­æ¥è¯´æ˜javaå˜é‡æ˜¯æ€ä¹ˆå­˜æ”¾åœ¨å†…å­˜ä¸­çš„<br>Code segmentï¼šarraylistlist[]=new arraylist[2]ï¼›<br>Arraylist[0]=2;arraylist[1]=3;arraylist[2]=4;<br>å› ä¸ºlist[]æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¿™æ˜¯ä¸€ä¸ªå£°æ˜æˆ‘ä»¬æ”¾åˆ°æ ˆä¸­ã€‚<br>è€Œåé¢æ¯ä¸ªæ•°ç»„å®ä¾‹åŒ–å‡ºæ¥çš„å˜é‡ï¼Œæ‰€ä»¥æ”¾åˆ°å †ä¸­ã€‚<br>è€Œå®å®åœ¨åœ¨å­˜åœ¨çš„å˜é‡çš„å€¼éƒ½æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥æ”¾åœ¨å¸¸é‡æ± ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„datasegmentã€‚</p>
<h2 id="è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"><a href="#è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ" class="headerlink" title="è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"></a>è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h2><p>Javaè™šæ‹Ÿæœºåœ¨æ‰§è¡ŒJavaç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚è¿™äº›åŒºåŸŸéƒ½æœ‰å„è‡ªçš„ç”¨é€”ï¼Œä»¥åŠåˆ›å»ºå’Œé”€æ¯çš„æ—¶é—´ï¼Œæœ‰çš„åŒºåŸŸéšç€è™šæ‹Ÿæœºè¿›ç¨‹çš„å¯åŠ¨è€Œå­˜åœ¨ï¼Œæœ‰äº›åŒºåŸŸåˆ™ä¾èµ–ç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨å’Œç»“æŸè€Œå»ºç«‹å’Œé”€æ¯ã€‚ä¸‹å›¾æ˜¯Javaè™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºï¼š<br><img src="http://ou3xxg3hg.bkt.clouddn.com/Javaè™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº.png" alt="Javaè™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº"><br><!---more---></p>
<h2 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h2><p>ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚åœ¨è™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹é‡Œï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚<br>åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œå¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹ <strong>è½®æµåˆ‡æ¢</strong>å¹¶åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„æ–¹å¼æ¥å®ç°çš„ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªç¡®å®šçš„æ—¶åˆ»ï¼Œä¸€ä¸ªå¤„ç†å™¨ï¼ˆå¯¹å¤šæ ¸å¤„ç†å™¨æ¥è¯´æ˜¯ä¸€ä¸ªå†…æ ¸ï¼‰éƒ½åªä¼šæ‰§è¡Œä¸€æ¡çº¿ç¨‹ä¸­çš„å‘½ä»¤ã€‚å› æ­¤ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»åŒºåŸŸä¸ºâ€œçº¿ç¨‹ç§æœ‰â€çš„å†…å­˜ã€‚<br>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªJavaæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™ä¸ºç©ºï¼ˆUndefinedï¼‰ã€‚æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½•OutOfMemoryErroræƒ…å†µçš„åŒºåŸŸã€‚</p>
<h2 id="Javaè™šæ‹Ÿæœºæ ˆï¼ˆæ ˆï¼‰"><a href="#Javaè™šæ‹Ÿæœºæ ˆï¼ˆæ ˆï¼‰" class="headerlink" title="Javaè™šæ‹Ÿæœºæ ˆï¼ˆæ ˆï¼‰"></a>Javaè™šæ‹Ÿæœºæ ˆï¼ˆæ ˆï¼‰</h2><p>ä¸ç¨‹åºè®¡æ•°å™¨ä¸€æ ·ï¼ŒJavaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚<br>å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨å¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚<br>ä¸¤ç§å¼‚å¸¸ï¼Œå¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowErrorå¼‚å¸¸ï¼›å¦‚æœè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼ˆå½“å‰å¤§éƒ¨åˆ†çš„Javaè™šæ‹Ÿæœºéƒ½å¯åŠ¨æ€æ‰©å±•ï¼Œåªä¸è¿‡Javaè™šæ‹Ÿæœºè§„èŒƒä¸­ä¹Ÿå…è®¸å›ºå®šé•¿åº¦çš„è™šæ‹Ÿæœºæ ˆï¼‰ï¼Œå¦‚æœæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œå°±ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<h2 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h2><p>ä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä¸è¿‡æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡ã€‚æœ¬åœ°æ–¹æ³•æ ˆä¹Ÿä¼šæŠ›å‡ºStackOverflowErrorå’ŒOutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<h1 id="Javaå †"><a href="#Javaå †" class="headerlink" title="Javaå †"></a>Javaå †</h1><p>å¯¹å¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼ŒJavaå †ï¼ˆJava Heapï¼‰æ˜¯Javaè™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚Javaå †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</p>
<h2 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h2><p>Method Area,Non-Heap(éå †)ä¸Javaå †ä¸€æ ·ï¼Œæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</p>
<h2 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h2><p>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntiMe ConStant Poolï¼‰æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚Classæ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± ï¼ˆConstant Pool Tableï¼‰ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨çš„ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åè¿›å…¥æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å­˜æ”¾ã€‚</p>
<h2 id="ç›´æ¥å†…å­˜ï¼ˆDirect-Memoryï¼‰"><a href="#ç›´æ¥å†…å­˜ï¼ˆDirect-Memoryï¼‰" class="headerlink" title="ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰"></a>ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</h2><p>NIOç±»å¼•å…¥äº†ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰ä¸ç¼“å†²åŒºï¼ˆBufferï¼‰çš„I/Oæ–¹å¼ï¼Œå®ƒå¯ä»¥ <strong>ä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜</strong>ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨Javaå †ä¸­çš„DirectByteBufferå¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æä¾›æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨Javaå †å’ŒNativeå †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚<br>æœåŠ¡å™¨ç®¡ç†å‘˜åœ¨é…ç½®è™šæ‹Ÿæœºå‚æ•°æ—¶ï¼Œä¼šæ ¹æ®å®é™…å†…å­˜è®¾ç½®-Xmxç­‰å‚æ•°ä¿¡æ¯ï¼Œä½†ç»å¸¸å¿½ç•¥ç›´æ¥å†…å­˜ï¼Œä½¿å¾—å„ä¸ªå†…å­˜åŒºåŸŸæ€»å’Œå¤§äºç‰©ç†å†…å­˜é™åˆ¶ï¼ˆåŒ…æ‹¬ç‰©ç†çš„å’Œæ“ä½œç³»ç»Ÿçš„é™åˆ¶ï¼‰ï¼Œä»è€Œå¯¼è‡´åŠ¨æ€æ‰©å±•æ—¶å‡ºç°OutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<p>åœ¨è™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ<br>è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡newæŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå°†å»æ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ï¼Œåœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚å¯¹è±¡æ‰€éœ€å†…å­˜çš„å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåä¾¿å¯å®Œå…¨ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´çš„ä»»åŠ¡ç­‰åŒäºæŠŠä¸€å—ç¡®å®šå¤§å°çš„å†…å­˜ä»Javaå †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚<br>å†…å­˜åˆ†é…å®Œæˆåï¼Œè™šæ‹Ÿæœºéœ€è¦å°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œè™šæ‹Ÿæœºè¦å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®ï¼Œä¾‹å¦‚è¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œç ã€å¯¹è±¡çš„GCåˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨å¯¹è±¡çš„å¯¹è±¡å¤´ï¼ˆObject Headerï¼‰ä¹‹ä¸­ã€‚ä»è™šæ‹Ÿæœºçš„è§†è§’æ¥çœ‹ï¼Œä¸€ä¸ªæ–°çš„å¯¹è±¡å·²ç»å·®ç”Ÿäº†ï¼Œä½†ä»Javaç¨‹åºçš„è§†è§’æ¥çœ‹ï¼Œå¯¹è±¡åˆ›å»ºæ‰åˆšåˆšå¼€å§‹â€”<init>æ–¹æ³•è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€æœ‰çš„å­—æ®µéƒ½è¿˜ä¸ºé›¶ã€‚   æ‰€ä»¥ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ‰§è¡ŒnewæŒ‡ä»¤ä¹‹åä¼šæ¥ç€æ‰§è¡Œ<init>æ–¹æ³•ï¼ŒæŠŠå¯¹è±¡æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—å®Œå…¨äº§ç”Ÿå‡ºæ¥ã€‚</init></init></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[é¢è¯•é¢˜ï¼šç™¾åº¦å‰200é¡µéƒ½åœ¨è¿™é‡Œäº†]]></title>
      <url>/%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E7%99%BE%E5%BA%A6%E5%89%8D200%E9%A1%B5%E9%83%BD%E5%9C%A8%E8%BF%99%E9%87%8C%E4%BA%86.html</url>
      <content type="html"><![CDATA[<p>åŸºæœ¬æ¦‚å¿µ<br>æ“ä½œç³»ç»Ÿä¸­ heap å’Œ stack çš„åŒºåˆ«<br>ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°<br>ä»€ä¹ˆæ˜¯ å¯¹è±¡/å…³ç³» æ˜ å°„é›†æˆæ¨¡å—<br>ä»€ä¹ˆæ˜¯ Java çš„åå°„æœºåˆ¶<br>ä»€ä¹ˆæ˜¯ ACID<br>BSä¸CSçš„è”ç³»ä¸åŒºåˆ«<br>Cookie å’Œ Sessionçš„åŒºåˆ«<br>fail-fast ä¸ fail-safe æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«<br>get å’Œ postè¯·æ±‚çš„åŒºåˆ«<br>Interface ä¸ abstract ç±»çš„åŒºåˆ«<br>IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ<br><a id="more"></a><br>IO å’Œ NIOçš„åŒºåˆ«ï¼ŒNIOä¼˜ç‚¹<br>Java 8 / Java 7 ä¸ºæˆ‘ä»¬æä¾›äº†ä»€ä¹ˆæ–°åŠŸèƒ½<br>ä»€ä¹ˆæ˜¯ç«æ€æ¡ä»¶ï¼Ÿ ä¸¾ä¸ªä¾‹å­è¯´æ˜ã€‚<br>JREã€JDKã€JVM åŠ JIT ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒ<br>MVCçš„å„ä¸ªéƒ¨åˆ†éƒ½æœ‰é‚£äº›æŠ€æœ¯æ¥å®ç°?å¦‚ä½•å®ç°?<br>RPC é€šä¿¡å’Œ RMI åŒºåˆ«<br>ä»€ä¹ˆæ˜¯ Web Serviceï¼ˆWebæœåŠ¡ï¼‰<br>JSWDLå¼€å‘åŒ…çš„ä»‹ç»ã€‚JAXPã€JAXMçš„è§£é‡Šã€‚SOAPã€UDDI,WSDLè§£é‡Šã€‚<br>WEBå®¹å™¨ä¸»è¦æœ‰å“ªäº›åŠŸèƒ½? å¹¶è¯·åˆ—å‡ºä¸€äº›å¸¸è§çš„WEBå®¹å™¨åå­—ã€‚<br>ä¸€ä¸ªâ€.javaâ€æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶<br>ç®€å•è¯´è¯´ä½ äº†è§£çš„ç±»åŠ è½½å™¨ã€‚æ˜¯å¦å®ç°è¿‡ç±»åŠ è½½å™¨<br>è§£é‡Šä¸€ä¸‹ä»€ä¹ˆå«AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰<br>è¯·ç®€è¿° Servlet çš„ç”Ÿå‘½å‘¨æœŸåŠå…¶ç›¸å…³çš„æ–¹æ³•<br>è¯·ç®€è¿°ä¸€ä¸‹ Ajax çš„åŸç†åŠå®ç°æ­¥éª¤<br>ç®€å•æè¿°Strutsçš„ä¸»è¦åŠŸèƒ½<br>ä»€ä¹ˆæ˜¯ N å±‚æ¶æ„<br>ä»€ä¹ˆæ˜¯CORBAï¼Ÿç”¨é€”æ˜¯ä»€ä¹ˆ<br>ä»€ä¹ˆæ˜¯Javaè™šæ‹Ÿæœºï¼Ÿä¸ºä»€ä¹ˆJavaè¢«ç§°ä½œæ˜¯â€œå¹³å°æ— å…³çš„ç¼–ç¨‹è¯­è¨€â€<br>ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Ÿç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿå“ªä¸ªåŒ…ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç°æ¨¡å¼åŒ¹é…<br>ä»€ä¹ˆæ˜¯æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰<br>ä»€ä¹ˆæ˜¯å°¾é€’å½’ï¼Œä¸ºä»€ä¹ˆéœ€è¦å°¾é€’å½’<br>ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰ä¸ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰<br>å…³é”®å­—</p>
<p>finalize</p>
<p>ä»€ä¹ˆæ˜¯finalize()æ–¹æ³•<br>finalize()æ–¹æ³•ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨<br>ææ„å‡½æ•°(finalization)çš„ç›®çš„æ˜¯ä»€ä¹ˆ<br>final å’Œ finalize çš„åŒºåˆ«<br>final<br>finalå…³é”®å­—æœ‰å“ªäº›ç”¨æ³•<br>final ä¸ static å…³é”®å­—å¯ä»¥ç”¨äºå“ªé‡Œï¼Ÿå®ƒä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆ<br>final, finally, finalizeçš„åŒºåˆ«<br>finalã€finalize å’Œ finally çš„ä¸åŒä¹‹å¤„ï¼Ÿ<br>èƒ½å¦åœ¨è¿è¡Œæ—¶å‘ static final ç±»å‹çš„èµ‹å€¼<br>ä½¿ç”¨finalå…³é”®å­—ä¿®é¥°ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ˜¯å¼•ç”¨ä¸èƒ½å˜ï¼Œè¿˜æ˜¯å¼•ç”¨çš„å¯¹è±¡ä¸èƒ½å˜<br>ä¸€ä¸ªç±»è¢«å£°æ˜ä¸ºfinalç±»å‹ï¼Œè¡¨ç¤ºäº†ä»€ä¹ˆæ„æ€<br>throws, throw, try, catch, finallyåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„ä¹‰<br>Java æœ‰å‡ ç§ä¿®é¥°ç¬¦ï¼Ÿåˆ†åˆ«ç”¨æ¥ä¿®é¥°ä»€ä¹ˆ<br>volatile</p>
<p>volatile ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µ<br>volatile å˜é‡æ˜¯ä»€ä¹ˆï¼Ÿvolatile å˜é‡å’Œ atomic å˜é‡æœ‰ä»€ä¹ˆä¸åŒ<br>volatile ç±»å‹å˜é‡æä¾›ä»€ä¹ˆä¿è¯ï¼Ÿèƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—<br>èƒ½åˆ›å»º volatile æ•°ç»„å—ï¼Ÿ<br>transientå˜é‡æœ‰ä»€ä¹ˆç‰¹ç‚¹<br>superä»€ä¹ˆæ—¶å€™ä½¿ç”¨<br>public static void å†™æˆ static public voidä¼šæ€æ ·<br>è¯´æ˜ä¸€ä¸‹public static void main(String args[])è¿™æ®µå£°æ˜é‡Œæ¯ä¸ªå…³é”®å­—çš„ä½œç”¨<br>è¯·è¯´å‡ºä½œç”¨åŸŸpublic, private, protected, ä»¥åŠä¸å†™æ—¶çš„åŒºåˆ«<br>sizeof æ˜¯Java çš„å…³é”®å­—å—<br>static</p>
<p>static class ä¸ non static classçš„åŒºåˆ«<br>static å…³é”®å­—æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸJavaä¸­æ˜¯å¦å¯ä»¥è¦†ç›–(override)ä¸€ä¸ªprivateæˆ–è€…æ˜¯staticçš„æ–¹æ³•<br>é™æ€ç±»å‹æœ‰ä»€ä¹ˆç‰¹ç‚¹<br>main() æ–¹æ³•ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯é™æ€çš„ï¼Ÿèƒ½ä¸èƒ½å£°æ˜ main() æ–¹æ³•ä¸ºéé™æ€<br>æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªé™æ€ï¼ˆstaticï¼‰æ–¹æ³•å†…éƒ¨å‘å‡ºå¯¹éé™æ€ï¼ˆnon-staticï¼‰æ–¹æ³•çš„è°ƒç”¨<br>é™æ€å˜é‡åœ¨ä»€ä¹ˆæ—¶å€™åŠ è½½ï¼Ÿç¼–è¯‘æœŸè¿˜æ˜¯è¿è¡ŒæœŸï¼Ÿé™æ€ä»£ç å—åŠ è½½çš„æ—¶æœºå‘¢<br>æˆå‘˜æ–¹æ³•æ˜¯å¦å¯ä»¥è®¿é—®é™æ€å˜é‡ï¼Ÿä¸ºä»€ä¹ˆé™æ€æ–¹æ³•ä¸èƒ½è®¿é—®æˆå‘˜å˜é‡<br>switch</p>
<p>switch è¯­å¥ä¸­çš„è¡¨è¾¾å¼å¯ä»¥æ˜¯ä»€ä¹ˆç±»å‹æ•°æ®<br>switch æ˜¯å¦èƒ½ä½œç”¨åœ¨byte ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨long ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨Stringä¸Š<br>while å¾ªç¯å’Œ do å¾ªç¯æœ‰ä»€ä¹ˆä¸åŒ<br>æ“ä½œç¬¦</p>
<p>&amp;æ“ä½œç¬¦å’Œ&amp;&amp;æ“ä½œç¬¦æœ‰ä»€ä¹ˆåŒºåˆ«?<br>a = a + b ä¸ a += b çš„åŒºåˆ«ï¼Ÿ<br>é€»è¾‘æ“ä½œç¬¦ (&amp;,|,^)ä¸æ¡ä»¶æ“ä½œç¬¦(&amp;&amp;,||)çš„åŒºåˆ«<br>3*0.1 == 0.3 å°†ä¼šè¿”å›ä»€ä¹ˆï¼Ÿtrue è¿˜æ˜¯ falseï¼Ÿ<br>float f=3.4; æ˜¯å¦æ­£ç¡®ï¼Ÿ<br>short s1 = 1; s1 = s1 + 1;æœ‰ä»€ä¹ˆé”™?<br>æ•°æ®ç»“æ„</p>
<p>åŸºç¡€ç±»å‹(Primitives)</p>
<p>åŸºç¡€ç±»å‹(Primitives)ä¸å°è£…ç±»å‹(Wrappers)çš„åŒºåˆ«åœ¨å“ªé‡Œ<br>ç®€è¿°ä¹ç§åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°ï¼Œä»¥åŠä»–ä»¬çš„å°è£…ç±»<br>int å’Œ Integer å“ªä¸ªä¼šå ç”¨æ›´å¤šçš„å†…å­˜ï¼Ÿ int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸparseInt()å‡½æ•°åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨åˆ°<br>floatå’Œdoubleçš„é»˜è®¤å€¼æ˜¯å¤šå°‘<br>å¦‚ä½•å»å°æ•°å››èˆäº”å…¥ä¿ç•™å°æ•°ç‚¹åä¸¤ä½<br>char å‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜è´®ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Œä¸ºä»€ä¹ˆ<br>ç±»å‹è½¬æ¢</p>
<p>æ€æ ·å°† bytes è½¬æ¢ä¸º long ç±»å‹<br>æ€ä¹ˆå°† byte è½¬æ¢ä¸º String<br>å¦‚ä½•å°†æ•°å€¼å‹å­—ç¬¦è½¬æ¢ä¸ºæ•°å­—<br>æˆ‘ä»¬èƒ½å°† int å¼ºåˆ¶è½¬æ¢ä¸º byte ç±»å‹çš„å˜é‡å—ï¼Ÿå¦‚æœè¯¥å€¼å¤§äº byte ç±»å‹çš„èŒƒå›´ï¼Œå°†ä¼šå‡ºç°ä»€ä¹ˆç°è±¡<br>èƒ½åœ¨ä¸è¿›è¡Œå¼ºåˆ¶è½¬æ¢çš„æƒ…å†µä¸‹å°†ä¸€ä¸ª double å€¼èµ‹å€¼ç»™ long ç±»å‹çš„å˜é‡å—<br>ç±»å‹å‘ä¸‹è½¬æ¢æ˜¯ä»€ä¹ˆ<br>æ•°ç»„</p>
<p>å¦‚ä½•æƒè¡¡æ˜¯ä½¿ç”¨æ— åºçš„æ•°ç»„è¿˜æ˜¯æœ‰åºçš„æ•°ç»„<br>æ€ä¹ˆåˆ¤æ–­æ•°ç»„æ˜¯ null è¿˜æ˜¯ä¸ºç©º<br>æ€ä¹ˆæ‰“å°æ•°ç»„ï¼Ÿ æ€æ ·æ‰“å°æ•°ç»„ä¸­çš„é‡å¤å…ƒç´ <br>Array å’Œ ArrayListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨Arrayè€Œä¸æ˜¯ArrayList<br>æ•°ç»„å’Œé“¾è¡¨æ•°æ®ç»“æ„æè¿°ï¼Œå„è‡ªçš„æ—¶é—´å¤æ‚åº¦<br>æ•°ç»„æœ‰æ²¡æœ‰length()è¿™ä¸ªæ–¹æ³•? Stringæœ‰æ²¡æœ‰length()è¿™ä¸ªæ–¹æ³•<br>é˜Ÿåˆ—</p>
<p>é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Œåˆ—å‡ºå®ƒä»¬çš„åŒºåˆ«<br>BlockingQueueæ˜¯ä»€ä¹ˆ<br>ç®€è¿° ConcurrentLinkedQueue LinkedBlockingQueue çš„ç”¨å¤„å’Œä¸åŒä¹‹å¤„ã€‚<br>ArrayListã€Vectorã€LinkedListçš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§<br>String<br>StringBuffer</p>
<p>ByteBuffer ä¸ StringBufferæœ‰ä»€ä¹ˆåŒºåˆ«<br>HashMap</p>
<p>HashMapçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ<br>å†…éƒ¨çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆ<br>HashMap çš„ tableçš„å®¹é‡å¦‚ä½•ç¡®å®šï¼ŸloadFactor æ˜¯ä»€ä¹ˆï¼Ÿ è¯¥å®¹é‡å¦‚ä½•å˜åŒ–ï¼Ÿè¿™ç§å˜åŒ–ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ<br>HashMap å®ç°çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°<br>HashMap å’Œ HashTableã€ConcurrentHashMap çš„åŒºåˆ«<br>HashMapçš„éå†æ–¹å¼åŠæ•ˆç‡<br>HashMapã€LinkedMapã€TreeMapçš„åŒºåˆ«<br>å¦‚ä½•å†³å®šé€‰ç”¨HashMapè¿˜æ˜¯TreeMap<br>å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠ<br>HashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿå¹¶å‘ä¸‹ä½¿ç”¨çš„ Map æ˜¯ä»€ä¹ˆï¼Œå®ƒä»¬å†…éƒ¨åŸç†åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚å­˜å‚¨æ–¹å¼ã€ hashcodeã€æ‰©å®¹ã€ é»˜è®¤å®¹é‡ç­‰<br>HashSet</p>
<p>HashSetå’ŒTreeSetæœ‰ä»€ä¹ˆåŒºåˆ«<br>HashSet å†…éƒ¨æ˜¯å¦‚ä½•å·¥ä½œçš„<br>WeakHashMap æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ<br>Set</p>
<p>Set é‡Œçš„å…ƒç´ æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œé‚£ä¹ˆç”¨ä»€ä¹ˆæ–¹æ³•æ¥åŒºåˆ†é‡å¤ä¸å¦å‘¢ï¼Ÿæ˜¯ç”¨ == è¿˜æ˜¯ equals()ï¼Ÿ å®ƒä»¬æœ‰ä½•åŒºåˆ«?<br>TreeMapï¼šTreeMap æ˜¯é‡‡ç”¨ä»€ä¹ˆæ ‘å®ç°çš„ï¼ŸTreeMapã€HashMapã€LindedHashMapçš„åŒºåˆ«ã€‚TreeMapå’ŒTreeSetåœ¨æ’åºæ—¶å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼ŸCollectionså·¥å…·ç±»ä¸­çš„sort()æ–¹æ³•å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼Ÿ<br>TreeSetï¼šä¸€ä¸ªå·²ç»æ„å»ºå¥½çš„ TreeSetï¼Œæ€ä¹ˆå®Œæˆå€’æ’åºã€‚<br>EnumSet æ˜¯ä»€ä¹ˆ<br>Hashç®—æ³•</p>
<p>Hashcode çš„ä½œç”¨<br>ç®€è¿°ä¸€è‡´æ€§ Hash ç®—æ³•<br>æœ‰æ²¡æœ‰å¯èƒ½ ä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„ hashcodeï¼Ÿå½“ä¸¤ä¸ªå¯¹è±¡ hashcode ç›¸åŒæ€ä¹ˆåŠï¼Ÿå¦‚ä½•è·å–å€¼å¯¹è±¡<br>ä¸ºä»€ä¹ˆåœ¨é‡å†™ equals æ–¹æ³•çš„æ—¶å€™éœ€è¦é‡å†™ hashCode æ–¹æ³•ï¼Ÿequalsä¸ hashCode çš„å¼‚åŒç‚¹åœ¨å“ªé‡Œ<br>a.hashCode() æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸ a.equals(b) æœ‰ä»€ä¹ˆå…³ç³»<br>hashCode() å’Œ equals() æ–¹æ³•çš„é‡è¦æ€§ä½“ç°åœ¨ä»€ä¹ˆåœ°æ–¹<br>Objectï¼šObjectæœ‰å“ªäº›å…¬ç”¨æ–¹æ³•ï¼ŸObjectç±»hashcode,equals è®¾è®¡åŸåˆ™ï¼Ÿ sunä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼ŸObjectç±»çš„æ¦‚è¿°<br>å¦‚ä½•åœ¨çˆ¶ç±»ä¸­ä¸ºå­ç±»è‡ªåŠ¨å®Œæˆæ‰€æœ‰çš„ hashcode å’Œ equals å®ç°ï¼Ÿè¿™ä¹ˆåšæœ‰ä½•ä¼˜åŠ£ã€‚<br>å¯ä»¥åœ¨ hashcode() ä¸­ä½¿ç”¨éšæœºæ•°å­—å—ï¼Ÿ<br>LinkedHashMap</p>
<p>LinkedHashMap å’Œ PriorityQueue çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ<br>List</p>
<p>List, Set, Mapä¸‰ä¸ªæ¥å£ï¼Œå­˜å–å…ƒç´ æ—¶å„æœ‰ä»€ä¹ˆç‰¹ç‚¹<br>List, Set, Map æ˜¯å¦ç»§æ‰¿è‡ª Collection æ¥å£<br>éå†ä¸€ä¸ª List æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼<br>LinkedList<br>LinkedList æ˜¯å•å‘é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨<br>LinkedList ä¸ ArrayList æœ‰ä»€ä¹ˆåŒºåˆ«<br>æè¿°ä¸‹ Java ä¸­é›†åˆï¼ˆCollectionsï¼‰ï¼Œæ¥å£ï¼ˆInterfacesï¼‰ï¼Œå®ç°ï¼ˆImplementationsï¼‰çš„æ¦‚å¿µã€‚LinkedList ä¸ ArrayList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ<br>æ’å…¥æ•°æ®æ—¶ï¼ŒArrayList, LinkedList, Vectorè°é€Ÿåº¦è¾ƒå¿«ï¼Ÿ<br>ArrayList<br>ArrayList å’Œ HashMap çš„é»˜è®¤å¤§å°æ˜¯å¤šæ•°<br>ArrayList å’Œ LinkedList çš„åŒºåˆ«ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ ArrayListï¼Ÿ<br>ArrayList å’Œ Set çš„åŒºåˆ«ï¼Ÿ<br>ArrayList, LinkedList, Vectorçš„åŒºåˆ«<br>ArrayListæ˜¯å¦‚ä½•å®ç°çš„ï¼ŒArrayList å’Œ LinkedList çš„åŒºåˆ«<br>ArrayListå¦‚ä½•å®ç°æ‰©å®¹<br>Array å’Œ ArrayList æœ‰ä½•åŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™æ›´é€‚åˆç”¨Array<br>è¯´å‡ºArraList,Vector, LinkedListçš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§<br>Map</p>
<p>Map, Set, List, Queue, Stack<br>Map æ¥å£æä¾›äº†å“ªäº›ä¸åŒçš„é›†åˆè§†å›¾<br>ä¸ºä»€ä¹ˆ Map æ¥å£ä¸ç»§æ‰¿ Collection æ¥å£<br>Collections</p>
<p>ä»‹ç»Javaä¸­çš„Collection FrameWorkã€‚é›†åˆç±»æ¡†æ¶çš„åŸºæœ¬æ¥å£æœ‰å“ªäº›<br>Collectionsç±»æ˜¯ä»€ä¹ˆï¼ŸCollection å’Œ Collectionsçš„åŒºåˆ«ï¼ŸCollectionã€Mapçš„å®ç°<br>é›†åˆç±»æ¡†æ¶çš„æœ€ä½³å®è·µæœ‰å“ªäº›<br>ä¸ºä»€ä¹ˆ Collection ä¸ä» Cloneable å’Œ Serializable æ¥å£ç»§æ‰¿<br>è¯´å‡ºå‡ ç‚¹ Java ä¸­ä½¿ç”¨ Collections çš„æœ€ä½³å®è·µï¼Ÿ<br>Collections ä¸­ é—ç•™ç±» (HashTableã€Vector) å’Œ ç°æœ‰ç±»çš„åŒºåˆ«<br>ä»€ä¹ˆæ˜¯ B+æ ‘ï¼ŒB-æ ‘ï¼Œåˆ—å‡ºå®é™…çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>æ¥å£</p>
<p>Comparator ä¸ Comparable æ¥å£æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿåˆ—å‡ºå®ƒä»¬çš„åŒºåˆ«<br>å¯¹è±¡</p>
<p>æ‹·è´(clone)</p>
<p>å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†<br>æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«<br>æ·±æ‹·è´å’Œæµ…æ‹·è´å¦‚ä½•å®ç°æ¿€æ´»æœºåˆ¶<br>å†™clone()æ–¹æ³•æ—¶ï¼Œé€šå¸¸éƒ½æœ‰ä¸€è¡Œä»£ç ï¼Œæ˜¯ä»€ä¹ˆ<br>æ¯”è¾ƒ</p>
<p>åœ¨æ¯”è¾ƒå¯¹è±¡æ—¶ï¼Œâ€==â€ è¿ç®—ç¬¦å’Œ equals è¿ç®—æœ‰ä½•åŒºåˆ«<br>å¦‚æœè¦é‡å†™ä¸€ä¸ªå¯¹è±¡çš„equalsæ–¹æ³•ï¼Œè¿˜è¦è€ƒè™‘ä»€ä¹ˆ<br>ä¸¤ä¸ªå¯¹è±¡å€¼ç›¸åŒ(x.equals(y) == true)ï¼Œä½†å´å¯æœ‰ä¸åŒçš„hash codeï¼Œè¿™å¥è¯å¯¹ä¸å¯¹<br>æ„é€ å™¨</p>
<p>æ„é€ å™¨é“¾æ˜¯ä»€ä¹ˆ<br>åˆ›å»ºå¯¹è±¡æ—¶æ„é€ å™¨çš„è°ƒç”¨é¡ºåº<br>ä¸å¯å˜å¯¹è±¡</p>
<p>ä»€ä¹ˆæ˜¯ä¸å¯å˜è±¡ï¼ˆimmutable objectï¼‰<br>ä¸ºä»€ä¹ˆ Java ä¸­çš„ String æ˜¯ä¸å¯å˜çš„ï¼ˆImmutableï¼‰<br>å¦‚ä½•æ„å»ºä¸å¯å˜çš„ç±»ç»“æ„ï¼Ÿå…³é”®ç‚¹åœ¨å“ªé‡Œ<br>èƒ½åˆ›å»ºä¸€ä¸ªåŒ…å«å¯å˜å¯¹è±¡çš„ä¸å¯å˜å¯¹è±¡å—<br>å¦‚ä½•å¯¹ä¸€ç»„å¯¹è±¡è¿›è¡Œæ’åº</p>
<p>æ–¹æ³•</p>
<p>æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰<br>æ–¹æ³•å¯ä»¥åŒæ—¶å³æ˜¯ static åˆæ˜¯ synchronized çš„å—<br>abstract çš„ methodæ˜¯å¦å¯åŒæ—¶æ˜¯ staticï¼Œæ˜¯å¦å¯åŒæ—¶æ˜¯ nativeï¼Œæ˜¯å¦å¯åŒæ—¶æ˜¯synchronized<br>Javaæ”¯æŒå“ªç§å‚æ•°ä¼ é€’ç±»å‹<br>ä¸€ä¸ªå¯¹è±¡è¢«å½“ä½œå‚æ•°ä¼ é€’åˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œæ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’<br>å½“ä¸€ä¸ªå¯¹è±¡è¢«å½“ä½œå‚æ•°ä¼ é€’åˆ°ä¸€ä¸ªæ–¹æ³•åï¼Œæ­¤æ–¹æ³•å¯æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¹¶å¯è¿”å›å˜åŒ–åçš„ç»“æœï¼Œé‚£ä¹ˆè¿™é‡Œåˆ°åº•æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’<br>æˆ‘ä»¬èƒ½å¦é‡è½½main()æ–¹æ³•<br>å¦‚æœmainæ–¹æ³•è¢«å£°æ˜ä¸ºprivateä¼šæ€æ ·<br>GC</p>
<p>æ¦‚å¿µ</p>
<p>GCæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰GC<br>ä»€ä¹ˆæ—¶å€™ä¼šå¯¼è‡´åƒåœ¾å›æ”¶<br>GCæ˜¯æ€ä¹ˆæ ·è¿è¡Œçš„<br>æ–°è€ä»¥åŠæ°¸ä¹…åŒºæ˜¯ä»€ä¹ˆ<br>GC æœ‰å‡ ç§æ–¹å¼ï¼Ÿæ€ä¹ˆé…ç½®<br>ä»€ä¹ˆæ—¶å€™ä¸€ä¸ªå¯¹è±¡ä¼šè¢«GCï¼Ÿ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜æ´»<br>System.gc() Runtime.gc()ä¼šåšä»€ä¹ˆäº‹æƒ…ï¼Ÿ èƒ½ä¿è¯ GC æ‰§è¡Œå—<br>åƒåœ¾å›æ”¶å™¨å¯ä»¥é©¬ä¸Šå›æ”¶å†…å­˜å—ï¼Ÿæœ‰ä»€ä¹ˆåŠæ³•ä¸»åŠ¨é€šçŸ¥è™šæ‹Ÿæœºè¿›è¡Œåƒåœ¾å›æ”¶ï¼Ÿ<br>Minor GC ã€Major GCã€Young GC ä¸ Full GCåˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™å‘ç”Ÿ<br>åƒåœ¾å›æ”¶ç®—æ³•çš„å®ç°åŸç†<br>å¦‚æœå¯¹è±¡çš„å¼•ç”¨è¢«ç½®ä¸ºnullï¼Œåƒåœ¾æ”¶é›†å™¨æ˜¯å¦ä¼šç«‹å³é‡Šæ”¾å¯¹è±¡å ç”¨çš„å†…å­˜ï¼Ÿ<br>åƒåœ¾å›æ”¶çš„æœ€ä½³åšæ³•æ˜¯ä»€ä¹ˆ<br>GCæ”¶é›†å™¨æœ‰å“ªäº›</p>
<p>åƒåœ¾å›æ”¶å™¨çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ<br>ä¸²è¡Œ(serial)æ”¶é›†å™¨å’Œååé‡(throughput)æ”¶é›†å™¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ<br>Serial ä¸ Parallel GCä¹‹é—´çš„ä¸åŒä¹‹å¤„<br>CMS æ”¶é›†å™¨ ä¸ G1 æ”¶é›†å™¨çš„ç‰¹ç‚¹ä¸åŒºåˆ«<br>CMSåƒåœ¾å›æ”¶å™¨çš„å·¥ä½œè¿‡ç¨‹<br>JVM ä¸­ä¸€æ¬¡å®Œæ•´çš„ GC æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ å¯¹è±¡å¦‚ä½•æ™‹å‡åˆ°è€å¹´ä»£<br>ååé‡ä¼˜å…ˆå’Œå“åº”ä¼˜å…ˆçš„åƒåœ¾æ”¶é›†å™¨é€‰æ‹©<br>GCç­–ç•¥</p>
<p>ä¸¾ä¸ªå®é™…çš„åœºæ™¯ï¼Œé€‰æ‹©ä¸€ä¸ªGCç­–ç•¥<br>JVMçš„æ°¸ä¹…ä»£ä¸­ä¼šå‘ç”Ÿåƒåœ¾å›æ”¶å—<br>æ”¶é›†æ–¹æ³•</p>
<p>æ ‡è®°æ¸…é™¤ã€æ ‡è®°æ•´ç†ã€å¤åˆ¶ç®—æ³•çš„åŸç†ä¸ç‰¹ç‚¹ï¼Ÿåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹<br>å¦‚æœè®©ä½ ä¼˜åŒ–æ”¶é›†æ–¹æ³•ï¼Œæœ‰ä»€ä¹ˆæ€è·¯<br>JVM</p>
<p>å‚æ•°</p>
<p>è¯´è¯´ä½ çŸ¥é“çš„å‡ ç§ä¸»è¦çš„jvm å‚æ•°<br>-XX:+UseCompressedOops æœ‰ä»€ä¹ˆä½œç”¨<br>ç±»åŠ è½½å™¨(ClassLoader)</p>
<p>Java ç±»åŠ è½½å™¨éƒ½æœ‰å“ªäº›<br>JVMå¦‚ä½•åŠ è½½å­—èŠ‚ç æ–‡ä»¶<br>å†…å­˜ç®¡ç†</p>
<p>JVMå†…å­˜åˆ†å“ªå‡ ä¸ªåŒºï¼Œæ¯ä¸ªåŒºçš„ä½œç”¨æ˜¯ä»€ä¹ˆ<br>ä¸€ä¸ªå¯¹è±¡ä»åˆ›å»ºåˆ°é”€æ¯éƒ½æ˜¯æ€ä¹ˆåœ¨è¿™äº›éƒ¨åˆ†é‡Œå­˜æ´»å’Œè½¬ç§»çš„<br>è§£é‡Šå†…å­˜ä¸­çš„æ ˆ(stack)ã€å †(heap)å’Œæ–¹æ³•åŒº(method area)çš„ç”¨æ³•<br>JVMä¸­å“ªä¸ªå‚æ•°æ˜¯ç”¨æ¥æ§åˆ¶çº¿ç¨‹çš„æ ˆå †æ ˆå°<br>ç®€è¿°å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥<br>ç®€è¿°é‡æ’åºï¼Œå†…å­˜å±éšœï¼Œhappen-beforeï¼Œä¸»å†…å­˜ï¼Œå·¥ä½œå†…å­˜<br>Javaä¸­å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜å—ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜<br>ç®€è¿° Java ä¸­è½¯å¼•ç”¨ï¼ˆSoftReferencï¼‰ã€å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰å’Œè™šå¼•ç”¨<br>å†…å­˜æ˜ å°„ç¼“å­˜åŒºæ˜¯ä»€ä¹ˆ<br>jstackï¼Œjstatï¼Œjmapï¼Œjconsoleæ€ä¹ˆç”¨<br>32 ä½ JVM å’Œ 64 ä½ JVM çš„æœ€å¤§å †å†…å­˜åˆ†åˆ«æ˜¯å¤šæ•°ï¼Ÿ32 ä½å’Œ 64 ä½çš„ JVMï¼Œint ç±»å‹å˜é‡çš„é•¿åº¦æ˜¯å¤šæ•°ï¼Ÿ<br>æ€æ ·é€šè¿‡ Java ç¨‹åºæ¥åˆ¤æ–­ JVM æ˜¯ 32 ä½ è¿˜æ˜¯ 64 ä½<br>JVMè‡ªèº«ä¼šç»´æŠ¤ç¼“å­˜å—ï¼Ÿæ˜¯ä¸æ˜¯åœ¨å †ä¸­è¿›è¡Œå¯¹è±¡åˆ†é…ï¼Œæ“ä½œç³»ç»Ÿçš„å †è¿˜æ˜¯JVMè‡ªå·±ç®¡ç†å †<br>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿæ ˆå†…å­˜æº¢å‡º<br>åŒäº²å§”æ´¾æ¨¡å‹æ˜¯ä»€ä¹ˆ</p>
<p>å¤šçº¿ç¨‹</p>
<p>åŸºæœ¬æ¦‚å¿µ</p>
<p>ä»€ä¹ˆæ˜¯çº¿ç¨‹<br>å¤šçº¿ç¨‹çš„ä¼˜ç‚¹<br>å¤šçº¿ç¨‹çš„å‡ ç§å®ç°æ–¹å¼<br>ç”¨ Runnable è¿˜æ˜¯ Thread<br>ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨<br>Vector, SimpleDateFormat æ˜¯çº¿ç¨‹å®‰å…¨ç±»å—<br>ä»€ä¹ˆ Java åŸå‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„<br>å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„<br>å¤šçº¿ç¨‹ä¸­çš„å¿™å¾ªç¯æ˜¯ä»€ä¹ˆ<br>å¦‚ä½•åˆ›å»ºä¸€ä¸ªçº¿ç¨‹<br>ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºæœ‰å‡ ç§å®ç°æ–¹å¼<br>ä»€ä¹ˆæ˜¯çº¿ç¨‹å±€éƒ¨å˜é‡<br>çº¿ç¨‹å’Œè¿›ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè¿›ç¨‹é—´å¦‚ä½•é€šè®¯ï¼Œçº¿ç¨‹é—´å¦‚ä½•é€šè®¯<br>ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ä¼ªå…±äº«ï¼ˆfalse sharingï¼‰<br>åŒæ­¥å’Œå¼‚æ­¥æœ‰ä½•å¼‚åŒï¼Œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹åˆ†åˆ«ä½¿ç”¨ä»–ä»¬ï¼Ÿä¸¾ä¾‹è¯´æ˜<br>Current</p>
<p>ConcurrentHashMap å’Œ Hashtableçš„åŒºåˆ«<br>ArrayBlockingQueue, CountDownLatchçš„ç”¨æ³•<br>ConcurrentHashMapçš„å¹¶å‘åº¦æ˜¯ä»€ä¹ˆ<br>CyclicBarrier å’Œ CountDownLatchæœ‰ä»€ä¹ˆä¸åŒï¼Ÿå„è‡ªçš„å†…éƒ¨åŸç†å’Œç”¨æ³•æ˜¯ä»€ä¹ˆ<br>Semaphoreçš„ç”¨æ³•<br>Thread</p>
<p>å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ˜¯è°ƒç”¨ run() è¿˜æ˜¯ start() æ–¹æ³•ï¼Ÿstart() å’Œ run() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«<br>è°ƒç”¨start()æ–¹æ³•æ—¶ä¼šæ‰§è¡Œrun()æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è°ƒç”¨run()æ–¹æ³•<br>sleep() æ–¹æ³•å’Œå¯¹è±¡çš„ wait() æ–¹æ³•éƒ½å¯ä»¥è®©çº¿ç¨‹æš‚åœæ‰§è¡Œï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«<br>yieldæ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿsleep() æ–¹æ³•å’Œ yield() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«<br>Java ä¸­å¦‚ä½•åœæ­¢ä¸€ä¸ªçº¿ç¨‹<br>stop() å’Œ suspend() æ–¹æ³•ä¸ºä½•ä¸æ¨èä½¿ç”¨<br>å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®<br>å¦‚ä½•å¼ºåˆ¶å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹<br>å¦‚ä½•è®©æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æš‚åœä¸€æ®µæ—¶é—´<br>ä»€ä¹ˆæ˜¯çº¿ç¨‹ç»„ï¼Œä¸ºä»€ä¹ˆåœ¨Javaä¸­ä¸æ¨èä½¿ç”¨<br>ä½ æ˜¯å¦‚ä½•è°ƒç”¨ waitï¼ˆæ–¹æ³•çš„ï¼‰ï¼Ÿä½¿ç”¨ if å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆ<br>ç”Ÿå‘½å‘¨æœŸ</p>
<p>æœ‰å“ªäº›ä¸åŒçš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ<br>çº¿ç¨‹çŠ¶æ€ï¼ŒBLOCKED å’Œ WAITING æœ‰ä»€ä¹ˆåŒºåˆ«<br>ç”»ä¸€ä¸ªçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å›¾<br>ThreadLocal ç”¨é€”æ˜¯ä»€ä¹ˆï¼ŒåŸç†æ˜¯ä»€ä¹ˆï¼Œç”¨çš„æ—¶å€™è¦æ³¨æ„ä»€ä¹ˆ<br>ThreadPool</p>
<p>çº¿ç¨‹æ± æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ<br>å¦‚ä½•åˆ›å»ºä¸€ä¸ªJavaçº¿ç¨‹æ± <br>ThreadPoolç”¨æ³•ä¸ä¼˜åŠ¿<br>æäº¤ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± é˜Ÿåˆ—å·²æ»¡æ—¶ä¼šå‘ä¼šç”Ÿä»€ä¹ˆ<br>newCache å’Œ newFixed æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç®€è¿°åŸç†ã€‚æ„é€ å‡½æ•°çš„å„ä¸ªå‚æ•°çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚ coreSize, maxsize ç­‰<br>çº¿ç¨‹æ± çš„å®ç°ç­–ç•¥<br>çº¿ç¨‹æ± çš„å…³é—­æ–¹å¼æœ‰å‡ ç§ï¼Œå„è‡ªçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ<br>çº¿ç¨‹æ± ä¸­submit() å’Œ execute()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>çº¿ç¨‹è°ƒåº¦</p>
<p>Javaä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆ<br>ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ä¸­çš„ä¸Šä¸‹æ–‡åˆ‡æ¢<br>ä½ å¯¹çº¿ç¨‹ä¼˜å…ˆçº§çš„ç†è§£æ˜¯ä»€ä¹ˆ<br>ä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨ (Thread Scheduler) å’Œæ—¶é—´åˆ†ç‰‡ (Time Slicing)<br>çº¿ç¨‹åŒæ­¥</p>
<p>è¯·è¯´å‡ºä½ æ‰€çŸ¥çš„çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•<br>synchronized çš„åŸç†æ˜¯ä»€ä¹ˆ<br>synchronized å’Œ ReentrantLock æœ‰ä»€ä¹ˆä¸åŒ<br>ä»€ä¹ˆåœºæ™¯ä¸‹å¯ä»¥ä½¿ç”¨ volatile æ›¿æ¢ synchronized<br>æœ‰T1ï¼ŒT2ï¼ŒT3ä¸‰ä¸ªçº¿ç¨‹ï¼Œæ€ä¹ˆç¡®ä¿å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œï¼Ÿæ€æ ·ä¿è¯T2åœ¨T1æ‰§è¡Œå®Œåæ‰§è¡Œï¼ŒT3åœ¨T2æ‰§è¡Œå®Œåæ‰§è¡Œ<br>åŒæ­¥å—å†…çš„çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸ä¼šå‘ç”Ÿä»€ä¹ˆ<br>å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸€ä¸ªå¯¹è±¡çš„ synchronized æ–¹æ³•A ä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹æ˜¯å¦å¯è¿›å…¥æ­¤å¯¹è±¡çš„ synchronized æ–¹æ³•B<br>ä½¿ç”¨ synchronized ä¿®é¥°é™æ€æ–¹æ³•å’Œéé™æ€æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«<br>å¦‚ä½•ä»ç»™å®šé›†åˆé‚£é‡Œåˆ›å»ºä¸€ä¸ª synchronized çš„é›†åˆ<br>é”</p>
<p>Java Concurrency API ä¸­ çš„ Lock æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿<br>Lock ä¸ Synchronized çš„åŒºåˆ«ï¼ŸLock æ¥å£æ¯” synchronized å—çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ<br>ReadWriteLockæ˜¯ä»€ä¹ˆï¼Ÿ<br>é”æœºåˆ¶æœ‰ä»€ä¹ˆç”¨<br>ä»€ä¹ˆæ˜¯ä¹è§‚é”ï¼ˆOptimistic Lockingï¼‰ï¼Ÿå¦‚ä½•å®ç°ä¹è§‚é”ï¼Ÿå¦‚ä½•é¿å…ABAé—®é¢˜<br>è§£é‡Šä»¥ä¸‹åè¯ï¼šé‡æ’åºï¼Œè‡ªæ—‹é”ï¼Œåå‘é”ï¼Œè½»é‡çº§é”ï¼Œå¯é‡å…¥é”ï¼Œå…¬å¹³é”ï¼Œéå…¬å¹³é”ï¼Œä¹è§‚é”ï¼Œæ‚²è§‚é”<br>ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨å¯é‡å…¥é”<br>ç®€è¿°é”çš„ç­‰çº§æ–¹æ³•é”ã€å¯¹è±¡é”ã€ç±»é”<br>Javaä¸­æ´»é”å’Œæ­»é”æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>ä»€ä¹ˆæ˜¯æ­»é”(Deadlock)ï¼Ÿå¯¼è‡´çº¿ç¨‹æ­»é”çš„åŸå› ï¼Ÿå¦‚ä½•ç¡®ä¿ N ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—® N ä¸ªèµ„æºåŒæ—¶åˆä¸å¯¼è‡´æ­»é”<br>æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«<br>æ€ä¹ˆæ£€æµ‹ä¸€ä¸ªçº¿ç¨‹æ˜¯å¦æ‹¥æœ‰é”<br>å¦‚ä½•å®ç°åˆ†å¸ƒå¼é”<br>æœ‰å“ªäº›æ— é”æ•°æ®ç»“æ„ï¼Œä»–ä»¬å®ç°çš„åŸç†æ˜¯ä»€ä¹ˆ<br>è¯»å†™é”å¯ä»¥ç”¨äºä»€ä¹ˆåº”ç”¨åœºæ™¯<br>Executorsç±»æ˜¯ä»€ä¹ˆï¼Ÿ Executorå’ŒExecutorsçš„åŒºåˆ«<br>ä»€ä¹ˆæ˜¯Javaçº¿ç¨‹è½¬å‚¨(Thread Dump)ï¼Œå¦‚ä½•å¾—åˆ°å®ƒ<br>å¦‚ä½•åœ¨Javaä¸­è·å–çº¿ç¨‹å †æ ˆ<br>è¯´å‡º 3 æ¡åœ¨ Java ä¸­ä½¿ç”¨çº¿ç¨‹çš„æœ€ä½³å®è·µ<br>åœ¨çº¿ç¨‹ä¸­ä½ æ€ä¹ˆå¤„ç†ä¸å¯æ•æ‰å¼‚å¸¸<br>å®é™…é¡¹ç›®ä¸­ä½¿ç”¨å¤šçº¿ç¨‹ä¸¾ä¾‹ã€‚ä½ åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­é‡åˆ°çš„å¸¸è§çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿä½ æ˜¯æ€ä¹ˆè§£å†³å®ƒçš„<br>è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•<br>ç¨‹åºä¸­æœ‰3ä¸ª socketï¼Œéœ€è¦å¤šå°‘ä¸ªçº¿ç¨‹æ¥å¤„ç†<br>å‡å¦‚æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¥å£ï¼Œæœ‰å¾ˆå¤šä¸ªçº¿ç¨‹å»è°ƒç”¨è·å–æ•°æ®ï¼Œç°åœ¨è§„å®šæ¯ç§’é’Ÿæœ€å¤šæœ‰ 10 ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨å®ƒï¼Œå¦‚ä½•åšåˆ°<br>å¦‚ä½•åœ¨ Windows å’Œ Linux ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹ä½¿ç”¨çš„ CPU æ—¶é—´æœ€é•¿<br>å¦‚ä½•ç¡®ä¿ main() æ–¹æ³•æ‰€åœ¨çš„çº¿ç¨‹æ˜¯ Java ç¨‹åºæœ€åç»“æŸçš„çº¿ç¨‹<br>éå¸¸å¤šä¸ªçº¿ç¨‹ï¼ˆå¯èƒ½æ˜¯ä¸åŒæœºå™¨ï¼‰ï¼Œç›¸äº’ä¹‹é—´éœ€è¦ç­‰å¾…åè°ƒæ‰èƒ½å®ŒæˆæŸç§å·¥ä½œï¼Œé—®æ€ä¹ˆè®¾è®¡è¿™ç§åè°ƒæ–¹æ¡ˆ<br>ä½ éœ€è¦å®ç°ä¸€ä¸ªé«˜æ•ˆçš„ç¼“å­˜ï¼Œå®ƒå…è®¸å¤šä¸ªç”¨æˆ·è¯»ï¼Œä½†åªå…è®¸ä¸€ä¸ªç”¨æˆ·å†™ï¼Œä»¥æ­¤æ¥ä¿æŒå®ƒçš„å®Œæ•´æ€§ï¼Œä½ ä¼šæ€æ ·å»å®ç°å®ƒ</p>
<p>å¼‚å¸¸</p>
<p>åŸºæœ¬æ¦‚å¿µ</p>
<p>Error å’Œ Exceptionæœ‰ä»€ä¹ˆåŒºåˆ«<br>UnsupportedOperationExceptionæ˜¯ä»€ä¹ˆ<br>NullPointerException å’Œ ArrayIndexOutOfBoundException ä¹‹é—´æœ‰ä»€ä¹ˆç›¸åŒä¹‹å¤„<br>ä»€ä¹ˆæ˜¯å—æ£€æŸ¥çš„å¼‚å¸¸ï¼Œä»€ä¹ˆæ˜¯è¿è¡Œæ—¶å¼‚å¸¸<br>è¿è¡Œæ—¶å¼‚å¸¸ä¸ä¸€èˆ¬å¼‚å¸¸æœ‰ä½•å¼‚åŒ<br>ç®€è¿°ä¸€ä¸ªä½ æœ€å¸¸è§åˆ°çš„runtime exception(è¿è¡Œæ—¶å¼‚å¸¸)<br>finally</p>
<p>finallyå…³é”®è¯åœ¨å¼‚å¸¸å¤„ç†ä¸­å¦‚ä½•ä½¿ç”¨<br>å¦‚æœæ‰§è¡Œfinallyä»£ç å—ä¹‹å‰æ–¹æ³•è¿”å›äº†ç»“æœï¼Œæˆ–è€…JVMé€€å‡ºäº†ï¼Œfinallyå—ä¸­çš„ä»£ç è¿˜ä¼šæ‰§è¡Œå—<br>tryé‡Œæœ‰returnï¼Œfinallyè¿˜æ‰§è¡Œä¹ˆï¼Ÿé‚£ä¹ˆç´§è·Ÿåœ¨è¿™ä¸ªtryåçš„finally {}é‡Œçš„codeä¼šä¸ä¼šè¢«æ‰§è¡Œï¼Œä»€ä¹ˆæ—¶å€™è¢«æ‰§è¡Œï¼Œåœ¨returnå‰è¿˜æ˜¯å<br>åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œfinallyè¯­å¥ä¸ä¼šæ‰§è¡Œ<br>throw å’Œ throws æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>OOMä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µï¼Ÿä½ æ˜¯æ€ä¹ˆæå®šçš„ï¼Ÿ<br>SOFä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µï¼Ÿ<br>æ—¢ç„¶æˆ‘ä»¬å¯ä»¥ç”¨RuntimeExceptionæ¥å¤„ç†é”™è¯¯ï¼Œé‚£ä¹ˆä½ è®¤ä¸ºä¸ºä»€ä¹ˆJavaä¸­è¿˜å­˜åœ¨æ£€æŸ¥å‹å¼‚å¸¸<br>å½“è‡ªå·±åˆ›å»ºå¼‚å¸¸ç±»çš„æ—¶å€™åº”è¯¥æ³¨æ„ä»€ä¹ˆ<br>å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸çš„åŸå› <br>å¼‚å¸¸å¤„ç† handle or declare åŸåˆ™åº”è¯¥å¦‚ä½•ç†è§£<br>æ€ä¹ˆåˆ©ç”¨ JUnit æ¥æµ‹è¯•ä¸€ä¸ªæ–¹æ³•çš„å¼‚å¸¸<br>catchå—é‡Œåˆ«ä¸å†™ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜<br>ä½ æ›¾ç»è‡ªå®šä¹‰å®ç°è¿‡å¼‚å¸¸å—ï¼Ÿæ€ä¹ˆå†™çš„<br>ä»€ä¹ˆæ˜¯ å¼‚å¸¸é“¾<br>åœ¨tryå—ä¸­å¯ä»¥æŠ›å‡ºå¼‚å¸¸å—</p>
<p>JDBC</p>
<p>é€šè¿‡ JDBC è¿æ¥æ•°æ®åº“æœ‰å“ªå‡ ç§æ–¹å¼<br>é˜è¿° JDBC æ“ä½œæ•°æ®åº“çš„åŸºæœ¬æ­¥éª¤<br>JDBC ä¸­å¦‚ä½•è¿›è¡Œäº‹åŠ¡å¤„ç†<br>ä»€ä¹ˆæ˜¯ JdbcTemplate<br>ä»€ä¹ˆæ˜¯ DAO æ¨¡å—<br>ä½¿ç”¨ JDBC æ“ä½œæ•°æ®åº“æ—¶ï¼Œå¦‚ä½•æå‡è¯»å–æ•°æ®çš„æ€§èƒ½ï¼Ÿå¦‚ä½•æå‡æ›´æ–°æ•°æ®çš„æ€§èƒ½<br>åˆ—å‡º 5 ä¸ªåº”è¯¥éµå¾ªçš„ JDBC æœ€ä½³å®è·µ<br>IO</p>
<p>File<br>Fileç±»å‹ä¸­å®šä¹‰äº†ä»€ä¹ˆæ–¹æ³•æ¥åˆ›å»ºä¸€çº§ç›®å½•<br>Fileç±»å‹ä¸­å®šä¹‰äº†ä»€ä¹ˆæ–¹æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨</p>
<p>æµ<br>ä¸ºäº†æé«˜è¯»å†™æ€§èƒ½ï¼Œå¯ä»¥é‡‡ç”¨ä»€ä¹ˆæµ<br>Javaä¸­æœ‰å‡ ç§ç±»å‹çš„æµ<br>JDK ä¸ºæ¯ç§ç±»å‹çš„æµæä¾›äº†ä¸€äº›æŠ½è±¡ç±»ä»¥ä¾›ç»§æ‰¿ï¼Œåˆ†åˆ«æ˜¯å“ªäº›ç±»<br>å¯¹æ–‡æœ¬æ–‡ä»¶æ“ä½œç”¨ä»€ä¹ˆI/Oæµ<br>å¯¹å„ç§åŸºæœ¬æ•°æ®ç±»å‹å’ŒStringç±»å‹çš„è¯»å†™ï¼Œé‡‡ç”¨ä»€ä¹ˆæµ<br>èƒ½æŒ‡å®šå­—ç¬¦ç¼–ç çš„ I/O æµç±»å‹æ˜¯ä»€ä¹ˆ<br>åºåˆ—åŒ–<br>ä»€ä¹ˆæ˜¯åºåˆ—åŒ–ï¼Ÿå¦‚ä½•å®ç° Java åºåˆ—åŒ–åŠæ³¨æ„äº‹é¡¹<br>Serializable ä¸ Externalizable çš„åŒºåˆ«<br>Socket<br>socket é€‰é¡¹ TCP NO DELAY æ˜¯æŒ‡ä»€ä¹ˆ<br>Socket å·¥ä½œåœ¨ TCP/IP åè®®æ ˆæ˜¯å“ªä¸€å±‚<br>TCPã€UDP åŒºåˆ«åŠ Java å®ç°æ–¹å¼<br>è¯´å‡ ç‚¹ IO çš„æœ€ä½³å®è·µ<br>ç›´æ¥ç¼“å†²åŒºä¸éç›´æ¥ç¼“å†²å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>æ€ä¹ˆè¯»å†™ ByteBufferï¼ŸByteBuffer ä¸­çš„å­—èŠ‚åºæ˜¯ä»€ä¹ˆ<br>å½“ç”¨System.in.read(buffer)ä»é”®ç›˜è¾“å…¥ä¸€è¡Œnä¸ªå­—ç¬¦åï¼Œå­˜å‚¨åœ¨ç¼“å†²åŒºbufferä¸­çš„å­—èŠ‚æ•°æ˜¯å¤šå°‘<br>å¦‚ä½•ä½¿ç”¨æ‰«æå™¨ç±»ï¼ˆScanner Classï¼‰ä»¤ç‰ŒåŒ–<br>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰</p>
<p>è§£é‡Šä¸‹å¤šæ€æ€§ï¼ˆpolymorphismï¼‰ï¼Œå°è£…æ€§ï¼ˆencapsulationï¼‰ï¼Œå†…èšï¼ˆcohesionï¼‰ä»¥åŠè€¦åˆï¼ˆcouplingï¼‰<br>å¤šæ€çš„å®ç°åŸç†<br>å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æ˜¯ä»€ä¹ˆ<br>å¯¹è±¡å°è£…çš„åŸåˆ™æ˜¯ä»€ä¹ˆ?<br>ç±»<br>è·å¾—ä¸€ä¸ªç±»çš„ç±»å¯¹è±¡æœ‰å“ªäº›æ–¹å¼<br>é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ<br>è¯´å‡ºå‡ æ¡ Java ä¸­æ–¹æ³•é‡è½½çš„æœ€ä½³å®è·µ<br>æŠ½è±¡ç±»<br>æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«<br>æŠ½è±¡ç±»ä¸­æ˜¯å¦å¯ä»¥æœ‰é™æ€çš„mainæ–¹æ³•<br>æŠ½è±¡ç±»æ˜¯å¦å¯å®ç°(implements)æ¥å£<br>æŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å…·ä½“ç±»(concrete class)<br>åŒ¿åç±»ï¼ˆAnonymous Inner Classï¼‰<br>åŒ¿åå†…éƒ¨ç±»æ˜¯å¦å¯ä»¥ç»§æ‰¿å…¶å®ƒç±»ï¼Ÿæ˜¯å¦å¯ä»¥å®ç°æ¥å£</p>
<p>å†…éƒ¨ç±»<br>å†…éƒ¨ç±»åˆ†ä¸ºå‡ ç§<br>å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å®ƒçš„åŒ…å«ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰çš„æˆå‘˜å—<br>è¯·è¯´ä¸€ä¸‹ Java ä¸­ä¸ºä»€ä¹ˆè¦å¼•å…¥å†…éƒ¨ç±»ï¼Ÿè¿˜æœ‰åŒ¿åå†…éƒ¨ç±»<br>ç»§æ‰¿<br>ç»§æ‰¿ï¼ˆInheritanceï¼‰ä¸èšåˆï¼ˆAggregationï¼‰çš„åŒºåˆ«åœ¨å“ªé‡Œ<br>ç»§æ‰¿å’Œç»„åˆä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒ<br>ä¸ºä»€ä¹ˆç±»åªèƒ½å•ç»§æ‰¿ï¼Œæ¥å£å¯ä»¥å¤šç»§æ‰¿<br>å­˜åœ¨ä¸¤ä¸ªç±»ï¼ŒB ç»§æ‰¿ Aï¼ŒC ç»§æ‰¿ Bï¼Œèƒ½å°† B è½¬æ¢ä¸º C ä¹ˆï¼Ÿå¦‚ C = (C) B<br>å¦‚æœç±» a ç»§æ‰¿ç±» bï¼Œå®ç°æ¥å£cï¼Œè€Œç±» b å’Œæ¥å£ c ä¸­å®šä¹‰äº†åŒåå˜é‡ï¼Œè¯·é—®ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜<br>æ¥å£<br>æ¥å£æ˜¯ä»€ä¹ˆ<br>æ¥å£æ˜¯å¦å¯ç»§æ‰¿æ¥å£<br>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¥å£è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨å…·ä½“ç±»ï¼Ÿæ¥å£æœ‰ä»€ä¹ˆä¼˜ç‚¹<br>æ³›å‹</p>
<p>æ³›å‹çš„å­˜åœ¨æ˜¯ç”¨æ¥è§£å†³ä»€ä¹ˆé—®é¢˜<br>æ³›å‹çš„å¸¸ç”¨ç‰¹ç‚¹<br>Listèƒ½å¦è½¬ä¸ºList<br>å·¥å…·ç±»</p>
<p>æ—¥å†<br>Calendar Classçš„ç”¨é€”<br>å¦‚ä½•åœ¨Javaä¸­è·å–æ—¥å†ç±»çš„å®ä¾‹<br>è§£é‡Šä¸€äº›æ—¥å†ç±»ä¸­çš„é‡è¦æ–¹æ³•<br>GregorianCalendar ç±»æ˜¯ä»€ä¹ˆ<br>SimpleTimeZone ç±»æ˜¯ä»€ä¹ˆ<br>Localeç±»æ˜¯ä»€ä¹ˆ<br>å¦‚ä½•æ ¼å¼åŒ–æ—¥æœŸå¯¹è±¡<br>å¦‚ä½•æ·»åŠ å°æ—¶(hour)åˆ°ä¸€ä¸ªæ—¥æœŸå¯¹è±¡(Date Objects)<br>å¦‚ä½•å°†å­—ç¬¦ä¸² YYYYMMDD è½¬æ¢ä¸ºæ—¥æœŸ<br>Math<br>Math.round()ä»€ä¹ˆä½œç”¨ï¼ŸMath.round(11.5) ç­‰äºå¤šå°‘ï¼ŸMath.round(-11.5)ç­‰äºå¤šå°‘ï¼Ÿ</p>
<p>XML<br>XMLæ–‡æ¡£å®šä¹‰æœ‰å‡ ç§å½¢å¼ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä½•æœ¬è´¨åŒºåˆ«ï¼Ÿè§£æXMLæ–‡æ¡£æœ‰å“ªå‡ ç§æ–¹å¼ï¼ŸDOM å’Œ SAX è§£æå™¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ<br>Javaè§£æXMLçš„æ–¹å¼<br>ç”¨ jdom è§£æ xml æ–‡ä»¶æ—¶å¦‚ä½•è§£å†³ä¸­æ–‡é—®é¢˜ï¼Ÿå¦‚ä½•è§£æ<br>ä½ åœ¨é¡¹ç›®ä¸­ç”¨åˆ°äº† XML æŠ€æœ¯çš„å“ªäº›æ–¹é¢ï¼Ÿå¦‚ä½•å®ç°<br>åŠ¨æ€ä»£ç†</p>
<p>æè¿°åŠ¨æ€ä»£ç†çš„å‡ ç§å®ç°æ–¹å¼ï¼Œåˆ†åˆ«è¯´å‡ºç›¸åº”çš„ä¼˜ç¼ºç‚¹<br>è®¾è®¡æ¨¡å¼</p>
<p>ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼ˆDesign Patternsï¼‰ï¼Ÿä½ ç”¨è¿‡å“ªç§è®¾è®¡æ¨¡å¼ï¼Ÿç”¨åœ¨ä»€ä¹ˆåœºåˆ<br>ä½ çŸ¥é“å“ªäº›å•†ä¸šçº§è®¾è®¡æ¨¡å¼ï¼Ÿ<br>å“ªäº›è®¾è®¡æ¨¡å¼å¯ä»¥å¢åŠ ç³»ç»Ÿçš„å¯æ‰©å±•æ€§<br>å•ä¾‹æ¨¡å¼<br>é™¤äº†å•ä¾‹æ¨¡å¼ï¼Œä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿˜ç”¨è¿‡ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ<br>å†™ Singleton å•ä¾‹æ¨¡å¼<br>å•ä¾‹æ¨¡å¼çš„åŒæ£€é”æ˜¯ä»€ä¹ˆ<br>å¦‚ä½•åˆ›å»ºçº¿ç¨‹å®‰å…¨çš„ Singleton<br>ä»€ä¹ˆæ˜¯ç±»çš„å•ä¾‹æ¨¡å¼<br>å†™å‡ºä¸‰ç§å•ä¾‹æ¨¡å¼å®ç°<br>é€‚é…å™¨æ¨¡å¼<br>é€‚é…å™¨æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ—¶å€™ä½¿ç”¨<br>é€‚é…å™¨æ¨¡å¼å’Œä»£ç†æ¨¡å¼ä¹‹å‰æœ‰ä»€ä¹ˆä¸åŒ<br>é€‚é…å™¨æ¨¡å¼å’Œè£…é¥°å™¨æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«<br>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨äº«å…ƒæ¨¡å¼<br>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç»„åˆæ¨¡å¼<br>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è®¿é—®è€…æ¨¡å¼<br>ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼<br>è¯·ç»™å‡º1ä¸ªç¬¦åˆå¼€é—­åŸåˆ™çš„è®¾è®¡æ¨¡å¼çš„ä¾‹å­<br>å¼€æ”¾é—®é¢˜</p>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬ Web ç¼–ç¨‹çš„ç‰¹ç‚¹<br>Googleæ˜¯å¦‚ä½•åœ¨ä¸€ç§’å†…æŠŠæœç´¢ç»“æœè¿”å›ç»™ç”¨æˆ·<br>å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯ Setteræ–¹æ³•æ³¨å…¥<br>æ ‘ï¼ˆäºŒå‰æˆ–å…¶ä»–ï¼‰å½¢æˆè®¸å¤šæ™®é€šæ•°æ®ç»“æ„çš„åŸºç¡€ã€‚è¯·æè¿°ä¸€äº›è¿™æ ·çš„æ•°æ®ç»“æ„ä»¥åŠä½•æ—¶å¯ä»¥ä½¿ç”¨å®ƒä»¬<br>æŸä¸€é¡¹åŠŸèƒ½å¦‚ä½•è®¾è®¡<br>çº¿ä¸Šç³»ç»Ÿçªç„¶å˜å¾—å¼‚å¸¸ç¼“æ…¢ï¼Œä½ å¦‚ä½•æŸ¥æ‰¾é—®é¢˜<br>ä»€ä¹ˆæ ·çš„é¡¹ç›®ä¸é€‚åˆç”¨æ¡†æ¶<br>æ–°æµªå¾®åšæ˜¯å¦‚ä½•å®ç°æŠŠå¾®åšæ¨ç»™è®¢é˜…è€…<br>ç®€è¦ä»‹ç»ä¸‹ä»æµè§ˆå™¨è¾“å…¥ URL å¼€å§‹åˆ°è·å–åˆ°è¯·æ±‚ç•Œé¢ä¹‹å Java Web åº”ç”¨ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ<br>è¯·ä½ è°ˆè°ˆSSHæ•´åˆ<br>é«˜å¹¶å‘ä¸‹ï¼Œå¦‚ä½•åšåˆ°å®‰å…¨çš„ä¿®æ”¹åŒä¸€è¡Œæ•°æ®<br>12306ç½‘ç«™çš„è®¢ç¥¨ç³»ç»Ÿå¦‚ä½•å®ç°ï¼Œå¦‚ä½•ä¿è¯ä¸ä¼šç¥¨ä¸è¢«è¶…å–<br>ç½‘ç«™æ€§èƒ½ä¼˜åŒ–å¦‚ä½•ä¼˜åŒ–çš„<br>èŠäº†ä¸‹æ›¾ç»å‚ä¸è®¾è®¡çš„æœåŠ¡å™¨æ¶æ„<br>è¯·æ€è€ƒä¸€ä¸ªæ–¹æ¡ˆï¼Œå®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„ countDownLatch<br>è¯·æ€è€ƒä¸€ä¸ªæ–¹æ¡ˆï¼Œè®¾è®¡ä¸€ä¸ªå¯ä»¥æ§åˆ¶ç¼“å­˜æ€»ä½“å¤§å°çš„è‡ªåŠ¨é€‚åº”çš„æœ¬åœ°ç¼“å­˜<br>åœ¨ä½ çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œç®—å¾—ä¸Šæœ€å›°éš¾çš„æŠ€æœ¯æŒ‘æˆ˜æ˜¯ä»€ä¹ˆ<br>å¦‚ä½•å†™ä¸€ç¯‡è®¾è®¡æ–‡æ¡£ï¼Œç›®å½•æ˜¯ä»€ä¹ˆ<br>å¤§å†™çš„Oæ˜¯ä»€ä¹ˆï¼Ÿä¸¾å‡ ä¸ªä¾‹å­<br>ç¼–ç¨‹ä¸­è‡ªå·±éƒ½æ€ä¹ˆè€ƒè™‘ä¸€äº›è®¾è®¡åŸåˆ™çš„ï¼Œæ¯”å¦‚å¼€é—­åŸåˆ™ï¼Œä»¥åŠåœ¨å·¥ä½œä¸­çš„åº”ç”¨<br>è§£é‡Šä¸€ä¸‹ç½‘ç»œåº”ç”¨çš„æ¨¡å¼åŠå…¶ç‰¹ç‚¹<br>è®¾è®¡ä¸€ä¸ªåœ¨çº¿æ–‡æ¡£ç³»ç»Ÿï¼Œæ–‡æ¡£å¯ä»¥è¢«ç¼–è¾‘ï¼Œå¦‚ä½•é˜²æ­¢å¤šäººåŒæ—¶å¯¹åŒä¸€ä»½æ–‡æ¡£è¿›è¡Œç¼–è¾‘æ›´æ–°<br>è¯´å‡ºæ•°æ®è¿æ¥æ± çš„å·¥ä½œæœºåˆ¶æ˜¯ä»€ä¹ˆ<br>æ€ä¹ˆè·å–ä¸€ä¸ªæ–‡ä»¶ä¸­å•è¯å‡ºç°çš„æœ€é«˜é¢‘ç‡<br>æè¿°ä¸€ä¸‹ä½ æœ€å¸¸ç”¨çš„ç¼–ç¨‹é£æ ¼<br>å¦‚æœæœ‰æœºä¼šé‡æ–°è®¾è®¡ä½ ä»¬çš„äº§å“ï¼Œä½ ä¼šæ€ä¹ˆåš<br>å¦‚ä½•æ­å»ºä¸€ä¸ªé«˜å¯ç”¨ç³»ç»Ÿ<br>å¦‚ä½•å¯åŠ¨æ—¶ä¸éœ€è¾“å…¥ç”¨æˆ·åä¸å¯†ç <br>å¦‚ä½•åœ¨åŸºäºJavaçš„Webé¡¹ç›®ä¸­å®ç°æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½<br>å¦‚ä½•å®ç°ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Œä¿è¯åªæœ‰å‡ ä½ç”¨æˆ·èƒ½ä¹°åˆ°æŸä»¶å•†å“ã€‚<br>å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡ï¼Œæœ‰å“ªäº›ç®—æ³•å¯ä»¥å®ç°<br>å¦‚ä½•è®¾è®¡ä¸€ä¸ªè´­ç‰©è½¦ï¼Ÿæƒ³æƒ³æ·˜å®çš„è´­ç‰©è½¦å¦‚ä½•å®ç°çš„<br>å¦‚ä½•è®¾è®¡ä¸€å¥—é«˜å¹¶å‘æ”¯ä»˜æ–¹æ¡ˆï¼Œæ¶æ„å¦‚ä½•è®¾è®¡<br>å¦‚ä½•è®¾è®¡å»ºç«‹å’Œä¿æŒ 100w çš„é•¿è¿æ¥<br>å¦‚ä½•é¿å…æµè§ˆå™¨ç¼“å­˜ã€‚<br>å¦‚ä½•é˜²æ­¢ç¼“å­˜é›ªå´©<br>å¦‚æœABä¸¤ä¸ªç³»ç»Ÿäº’ç›¸ä¾èµ–ï¼Œå¦‚ä½•è§£é™¤ä¾<br>å¦‚æœæœ‰äººæ¶æ„åˆ›å»ºéæ³•è¿æ¥ï¼Œæ€ä¹ˆè§£å†³<br>å¦‚æœæœ‰å‡ åäº¿çš„ç™½åå•ï¼Œæ¯å¤©ç™½å¤©éœ€è¦é«˜å¹¶å‘æŸ¥è¯¢ï¼Œæ™šä¸Šéœ€è¦æ›´æ–°ä¸€æ¬¡ï¼Œå¦‚ä½•è®¾è®¡è¿™ä¸ªåŠŸèƒ½<br>å¦‚æœç³»ç»Ÿè¦ä½¿ç”¨è¶…å¤§æ•´æ•°ï¼ˆè¶…è¿‡longé•¿åº¦èŒƒå›´ï¼‰ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„æ¥å­˜å‚¨è¿™ç§è¶…å¤§å‹æ•°å­—ä»¥åŠè®¾è®¡ä¸€ç§ç®—æ³•æ¥å®ç°è¶…å¤§æ•´æ•°åŠ æ³•è¿ç®—ï¼‰<br>å¦‚æœè¦è®¾è®¡ä¸€ä¸ªå›¾å½¢ç³»ç»Ÿï¼Œè¯·ä½ è®¾è®¡åŸºæœ¬çš„å›¾å½¢å…ƒä»¶(Point,Line,Rectangle,Triangle)çš„ç®€å•å®ç°<br>å¦‚æœè®©ä½ å®ç°ä¸€ä¸ªå¹¶å‘å®‰å…¨çš„é“¾è¡¨ï¼Œä½ ä¼šæ€ä¹ˆåš<br>åº”ç”¨æœåŠ¡å™¨ä¸WEB æœåŠ¡å™¨çš„åŒºåˆ«ï¼Ÿåº”ç”¨æœåŠ¡å™¨æ€ä¹ˆç›‘æ§æ€§èƒ½ï¼Œå„ç§æ–¹å¼çš„åŒºåˆ«ï¼Ÿä½ ä½¿ç”¨è¿‡çš„åº”ç”¨æœåŠ¡å™¨ä¼˜åŒ–æŠ€æœ¯æœ‰å“ªäº›<br>å¤§å‹ç½‘ç«™åœ¨æ¶æ„ä¸Šåº”å½“è€ƒè™‘å“ªäº›é—®é¢˜<br>æœ‰æ²¡æœ‰å¤„ç†è¿‡çº¿ä¸Šé—®é¢˜ï¼Ÿå‡ºç°å†…å­˜æ³„éœ²ï¼ŒCPUåˆ©ç”¨ç‡æ ‡é«˜ï¼Œåº”ç”¨æ— å“åº”æ—¶å¦‚ä½•å¤„ç†çš„<br>æœ€è¿‘çœ‹ä»€ä¹ˆä¹¦ï¼Œå°è±¡æœ€æ·±åˆ»çš„æ˜¯ä»€ä¹ˆ<br>æè¿°ä¸‹å¸¸ç”¨çš„é‡æ„æŠ€å·§<br>ä½ ä½¿ç”¨ä»€ä¹ˆç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Ÿåˆ†æ”¯ï¼ˆBranchï¼‰ä¸æ ‡ç­¾ï¼ˆTagï¼‰ä¹‹é—´çš„åŒºåˆ«åœ¨å“ªé‡Œ<br>ä½ æœ‰äº†è§£è¿‡å­˜åœ¨å“ªäº›åæ¨¡å¼ï¼ˆAnti-Patternsï¼‰å—<br>ä½ ç”¨è¿‡çš„ç½‘ç«™å‰ç«¯ä¼˜åŒ–çš„æŠ€æœ¯æœ‰å“ªäº›<br>å¦‚ä½•åˆ†æThread dump<br>ä½ å¦‚ä½•ç†è§£AOPä¸­çš„è¿æ¥ç‚¹ï¼ˆJoinpointï¼‰ã€åˆ‡ç‚¹ï¼ˆPointcutï¼‰ã€å¢å¼ºï¼ˆAdviceï¼‰ã€å¼•ä»‹ï¼ˆIntroductionï¼‰ã€ç»‡å…¥ï¼ˆWeavingï¼‰ã€åˆ‡é¢ï¼ˆAspectï¼‰è¿™äº›æ¦‚å¿µ<br>ä½ æ˜¯å¦‚ä½•å¤„ç†å†…å­˜æ³„éœ²æˆ–è€…æ ˆæº¢å‡ºé—®é¢˜çš„<br>ä½ ä»¬çº¿ä¸Šåº”ç”¨çš„ JVM å‚æ•°æœ‰å“ªäº›<br>æ€ä¹ˆæå‡ç³»ç»Ÿçš„QPSå’Œååé‡<br>çŸ¥è¯†é¢</p>
<p>è§£é‡Šä»€ä¹ˆæ˜¯ MESI åè®®(ç¼“å­˜ä¸€è‡´æ€§)<br>è°ˆè°ˆ reactor æ¨¡å‹<br>Java 9 å¸¦æ¥äº†æ€æ ·çš„æ–°åŠŸèƒ½<br>Java ä¸ C++ å¯¹æ¯”ï¼ŒC++ æˆ– Java ä¸­çš„å¼‚å¸¸å¤„ç†æœºåˆ¶çš„ç®€å•åŸç†å’Œåº”ç”¨<br>ç®€å•è®²è®² Tomcat ç»“æ„ï¼Œä»¥åŠå…¶ç±»åŠ è½½å™¨æµç¨‹<br>è™šæ‹Ÿå†…å­˜æ˜¯ä»€ä¹ˆ<br>é˜è¿°ä¸‹ SOLID åŸåˆ™<br>è¯·ç®€è¦è®²ä¸€ä¸‹ä½ å¯¹æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰çš„è®¤è¯†<br>CDNå®ç°åŸç†<br>Maven å’Œ ANT æœ‰ä»€ä¹ˆåŒºåˆ«<br>UMLä¸­æœ‰å“ªäº›å¸¸ç”¨çš„å›¾<br>Linux<br>Linux ä¸‹ IO æ¨¡å‹æœ‰å‡ ç§ï¼Œå„è‡ªçš„å«ä¹‰æ˜¯ä»€ä¹ˆã€‚<br>Linux ç³»ç»Ÿä¸‹ä½ å…³æ³¨è¿‡å“ªäº›å†…æ ¸å‚æ•°ï¼Œè¯´è¯´ä½ çŸ¥é“çš„<br>Linux ä¸‹ç”¨ä¸€è¡Œå‘½ä»¤æŸ¥çœ‹æ–‡ä»¶çš„æœ€åäº”è¡Œ<br>å¹³æ—¶ç”¨åˆ°å“ªäº› Linux å‘½ä»¤<br>ç”¨ä¸€è¡Œå‘½ä»¤è¾“å‡ºæ­£åœ¨è¿è¡Œçš„ Java è¿›ç¨‹<br>ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æ¥ç¡®å®šæ˜¯å¦æœ‰ Tomcat å®ä¾‹è¿è¡Œåœ¨æœºå™¨ä¸Š<br>ä»€ä¹ˆæ˜¯ N+1 éš¾é¢˜<br>ä»€ä¹ˆæ˜¯ paxos ç®—æ³•<br>ä»€ä¹ˆæ˜¯ restfulï¼Œè®²è®²ä½ ç†è§£çš„ restful<br>ä»€ä¹ˆæ˜¯ zab åè®®<br>ä»€ä¹ˆæ˜¯é¢†åŸŸæ¨¡å‹(domain model)ï¼Ÿè´«è¡€æ¨¡å‹(anaemic domain model) å’Œå……è¡€æ¨¡å‹(rich domain model)æœ‰ä»€ä¹ˆåŒºåˆ«<br>ä»€ä¹ˆæ˜¯é¢†åŸŸé©±åŠ¨å¼€å‘ï¼ˆDomain Driven Developmentï¼‰<br>ä»‹ç»ä¸€ä¸‹äº†è§£çš„ Java é¢†åŸŸçš„ Web Service æ¡†æ¶<br>Web Serverã€Web Container ä¸ Application Server çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ<br>å¾®æœåŠ¡ï¼ˆMicroServicesï¼‰ä¸å·¨çŸ³å‹åº”ç”¨ï¼ˆMonolithic Applicationsï¼‰ä¹‹é—´çš„åŒºåˆ«åœ¨å“ªé‡Œ<br>æè¿° Cookie å’Œ Session çš„ä½œç”¨ï¼ŒåŒºåˆ«å’Œå„è‡ªçš„åº”ç”¨èŒƒå›´ï¼ŒSessionå·¥ä½œåŸç†<br>ä½ å¸¸ç”¨çš„æŒç»­é›†æˆï¼ˆContinuous Integrationï¼‰ã€é™æ€ä»£ç åˆ†æï¼ˆStatic Code Analysisï¼‰å·¥å…·æœ‰å“ªäº›<br>ç®€è¿°ä¸‹æ•°æ®åº“æ­£åˆ™åŒ–ï¼ˆNormalizationsï¼‰<br>KISS,DRY,YAGNI ç­‰åŸåˆ™æ˜¯ä»€ä¹ˆå«ä¹‰<br>åˆ†å¸ƒå¼äº‹åŠ¡çš„åŸç†ï¼Œä¼˜ç¼ºç‚¹ï¼Œå¦‚ä½•ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿ<br>å¸ƒå¼é›†ç¾¤ä¸‹å¦‚ä½•åšåˆ°å”¯ä¸€åºåˆ—å·<br>ç½‘ç»œ<br>HTTPS çš„åŠ å¯†æ–¹å¼æ˜¯ä»€ä¹ˆï¼Œè®²è®²æ•´ä¸ªåŠ å¯†è§£å¯†æµç¨‹<br>HTTPSå’ŒHTTPçš„åŒºåˆ«<br>HTTPè¿æ¥æ± å®ç°åŸç†<br>HTTPé›†ç¾¤æ–¹æ¡ˆ<br>Nginxã€lighttpdã€Apacheä¸‰å¤§ä¸»æµ WebæœåŠ¡å™¨çš„åŒºåˆ«<br>æ˜¯å¦çœ‹è¿‡æ¡†æ¶çš„ä¸€äº›ä»£ç <br>æŒä¹…å±‚è®¾è®¡è¦è€ƒè™‘çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿä½ ç”¨è¿‡çš„æŒä¹…å±‚æ¡†æ¶æœ‰å“ªäº›<br>æ•°å€¼æå‡æ˜¯ä»€ä¹ˆ<br>ä½ èƒ½è§£é‡Šä¸€ä¸‹é‡Œæ°æ›¿æ¢åŸåˆ™å—<br>ä½ æ˜¯å¦‚ä½•æµ‹è¯•ä¸€ä¸ªåº”ç”¨çš„ï¼ŸçŸ¥é“å“ªäº›æµ‹è¯•æ¡†æ¶<br>ä¼ è¾“å±‚å¸¸è§ç¼–ç¨‹åè®®æœ‰å“ªäº›ï¼Ÿå¹¶è¯´å‡ºå„è‡ªçš„ç‰¹ç‚¹<br>ç¼–ç¨‹é¢˜</p>
<p>è®¡ç®—åŠ ç­è´¹</p>
<p>åŠ ç­10å°æ—¶ä»¥ä¸‹åŠ ç­è´¹æ˜¯æ—¶è–ªçš„1.5å€ã€‚åŠ ç­10å°æ—¶æˆ–ä»¥ä¸Šï¼ŒæŒ‰4å…ƒ/æ—¶ç®—ã€‚æç¤ºï¼šï¼ˆä¸€ä¸ªæœˆå·¥ä½œ26å¤©ï¼Œä¸€å¤©æ­£å¸¸å·¥ä½œ8å°æ—¶ï¼‰</p>
<p>è®¡ç®—1000æœˆè–ªï¼ŒåŠ ç­9å°æ—¶çš„åŠ ç­è´¹<br>è®¡ç®—2500æœˆè–ªï¼ŒåŠ ç­11å°æ—¶çš„åŠ ç­è´¹<br>è®¡ç®—1000æœˆè–ªï¼ŒåŠ ç­15å°æ—¶çš„åŠ ç­è´¹<br>å–ä¸œè¥¿</p>
<p>ä¸€å®¶å•†åœºæœ‰çº¢è‹¹æœå’Œé’è‹¹æœå‡ºå”®ã€‚ï¼ˆçº¢è‹¹æœ5å…ƒ/ä¸ªï¼Œé’è‹¹æœ4å…ƒ/ä¸ªï¼‰ã€‚</p>
<p>æ¨¡æ‹Ÿä¸€ä¸ªè¿›è´§ã€‚çº¢è‹¹æœè·Ÿé’è‹¹æœå„è¿›200ä¸ªã€‚<br>æ¨¡æ‹Ÿä¸€ä¸ªå‡ºå”®ã€‚çº¢è‹¹æœè·Ÿé’è‹¹æœå„ä¹°å‡º10ä¸ªã€‚æ¯å–å‡ºä¸€ä¸ªè‹¹æœéœ€è¦è¿›è¡Œç»Ÿè®¡ã€‚<br>æç¤ºï¼šä¸€ä¸ªè‹¹æœæ˜¯ä¸€ä¸ªå•ç‹¬çš„å®ä½“ã€‚</p>
<p>æ—¥æœŸæå–</p>
<p>æœ‰è¿™æ ·ä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²ï¼š2008-8-8 20:08:08 ï¼Œ è¯·ç¼–å†™èƒ½å¤ŸåŒ¹é…å®ƒçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ç¼–å†™Javaä»£ç å°†æ—¥æœŸåé¢çš„æ—¶åˆ†ç§’æå–å‡ºæ¥ï¼Œå³ï¼š20:08:08</p>
<p>çº¿ç¨‹</p>
<p>8è®¾è®¡4ä¸ªçº¿ç¨‹ï¼Œå…¶ä¸­ä¸¤ä¸ªçº¿ç¨‹æ¯æ¬¡å¯¹jå¢åŠ 1ï¼Œå¦å¤–ä¸¤ä¸ªçº¿ç¨‹å¯¹jæ¯æ¬¡å‡å°‘1ã€‚å†™å‡ºç¨‹åºã€‚<br>ç”¨Javaå†™ä¸€ä¸ªå¤šçº¿ç¨‹ç¨‹åºï¼Œå¦‚å†™å››ä¸ªçº¿ç¨‹ï¼ŒäºŒä¸ªåŠ 1ï¼ŒäºŒä¸ªå¯¹ä¸€ä¸ªå˜é‡å‡ä¸€ï¼Œè¾“å‡º<br>wait-notify å†™ä¸€æ®µä»£ç æ¥è§£å†³ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜<br>æ•°å­—</p>
<p>åˆ¤æ–­101-200ä¹‹é—´æœ‰å¤šå°‘ä¸ªç´ æ•°ï¼Œå¹¶è¾“å‡ºæ‰€æœ‰ç´ æ•°<br>ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ç®—å‡º2ä¹˜ä»¥17ç­‰äºå¤šå°‘<br>æœ‰ 1 äº¿ä¸ªæ•°å­—ï¼Œå…¶ä¸­æœ‰ 2 ä¸ªæ˜¯é‡å¤çš„ï¼Œå¿«é€Ÿæ‰¾åˆ°å®ƒï¼Œæ—¶é—´å’Œç©ºé—´è¦æœ€ä¼˜<br>2 äº¿ä¸ªéšæœºç”Ÿæˆçš„æ— åºæ•´æ•°,æ‰¾å‡ºä¸­é—´å¤§å°çš„å€¼<br>10 äº¿ä¸ªæ•°å­—é‡Œé‡Œé¢æ‰¾æœ€å°çš„ 10 ä¸ª<br>1åˆ°1äº¿çš„è‡ªç„¶æ•°ï¼Œæ±‚æ‰€æœ‰æ•°çš„æ‹†åˆ†åçš„æ•°å­—ä¹‹å’Œï¼Œå¦‚286 æ‹†åˆ†æˆ2ã€8ã€6ï¼Œå¦‚1åˆ°11æ‹†åˆ†åçš„æ•°å­—ä¹‹å’Œ =&gt; 1 + â€¦ + 9 + 1 + 0 + 1 + 1<br>ä¸€ä¸ªæ•°å¦‚æœæ°å¥½ç­‰äºå®ƒçš„å› å­ä¹‹å’Œï¼Œè¿™ä¸ªæ•°å°±ç§°ä¸º â€œå®Œæ•° â€œã€‚ä¾‹å¦‚6=1ï¼‹2ï¼‹3.ç¼–ç¨‹ æ‰¾å‡º1000ä»¥å†…çš„æ‰€æœ‰å®Œæ•°<br>ä¸€ä¸ªæ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½å‡ºç°äº†ä¸‰æ¬¡ï¼Œåªæœ‰ä¸€ä¸ªå…ƒç´ å‡ºç°äº†ä¸€æ¬¡æ‰¾åˆ°è¿™ä¸ªå…ƒç´ <br>ä¸€çƒä»100ç±³é«˜åº¦è‡ªç”±è½ä¸‹ï¼Œæ¯æ¬¡è½åœ°ååè·³å›åŸé«˜åº¦çš„ä¸€åŠï¼›å†è½ä¸‹ï¼Œæ±‚å®ƒåœ¨ ç¬¬10æ¬¡è½åœ°æ—¶ï¼Œå…±ç»è¿‡å¤šå°‘ç±³ï¼Ÿç¬¬10æ¬¡åå¼¹å¤šé«˜ï¼Ÿ<br>æ±‚100ï¼1000å†…è´¨æ•°çš„å’Œ<br>æ±‚1åˆ°100çš„å’Œçš„å¹³å‡æ•°<br>æ±‚s=a+a+aaa+aaaa+aaâ€¦açš„å€¼ï¼Œå…¶ä¸­aæ˜¯ä¸€ä¸ªæ•°å­—ã€‚ä¾‹å¦‚2+22+222+2222+22222(æ­¤æ—¶å…±æœ‰5ä¸ªæ•°ç›¸åŠ )ï¼Œå‡ ä¸ªæ•°ç›¸åŠ æœ‰é”®ç›˜æ§åˆ¶ã€‚ æ±‚å‡º1åˆ°100çš„å’Œ<br>ç®—å‡º1åˆ°40çš„è´¨æ•°ï¼Œæ”¾è¿›æ•°ç»„é‡Œ<br>æ˜¾ç¤ºæ”¾ç»„é‡Œçš„æ•°<br>æ‰¾å‡ºç¬¬[5]ä¸ªæ•°<br>åˆ é™¤ç¬¬[9]ä¸ªæ•°ï¼Œå†æ˜¾ç¤ºåˆ é™¤åçš„ç¬¬[9]ä¸ª<br>æœ‰ 3n+1 ä¸ªæ•°å­—ï¼Œå…¶ä¸­ 3n ä¸ªä¸­æ˜¯é‡å¤çš„ï¼Œåªæœ‰ 1 ä¸ªæ˜¯ä¸é‡å¤çš„ï¼Œæ€ä¹ˆæ‰¾å‡ºæ¥ã€‚<br>æœ‰ä¸€ç»„æ•°1.1.2.3.5.8.13.21.34ã€‚å†™å‡ºç¨‹åºéšä¾¿è¾“å…¥ä¸€ä¸ªæ•°å°±èƒ½ç»™å‡ºå’Œå‰ä¸€ç»„æ•°å­—åŒè§„å¾‹çš„å¤´5ä¸ªæ•°<br>è®¡ç®—æŒ‡å®šæ•°å­—çš„é˜¶ä¹˜<br>å¼€å‘ Fizz Buzz<br>ç»™å®šä¸€ä¸ªåŒ…å« N ä¸ªæ•´æ•°çš„æ•°ç»„ï¼Œæ‰¾å‡ºä¸¢å¤±çš„æ•´æ•°<br>ä¸€ä¸ªæ’å¥½åºçš„æ•°ç»„ï¼Œæ‰¾å‡ºä¸¤æ•°ä¹‹å’Œä¸ºmçš„æ‰€æœ‰ç»„åˆ<br>å°†ä¸€ä¸ªæ­£æ•´æ•°åˆ†è§£è´¨å› æ•°ã€‚ä¾‹å¦‚ï¼šè¾“å…¥90,æ‰“å°å‡º90=2<em>3</em>3*5ã€‚<br>æ‰“å°å‡ºæ‰€æœ‰çš„ â€œæ°´ä»™èŠ±æ•° â€œï¼Œæ‰€è°“ â€œæ°´ä»™èŠ±æ•° â€œæ˜¯æŒ‡ä¸€ä¸ªä¸‰ä½æ•°ï¼Œå…¶å„ä½æ•°å­—ç«‹æ–¹å’Œç­‰äºè¯¥æ•°æœ¬èº«ã€‚ä¾‹å¦‚ï¼š153æ˜¯ä¸€ä¸ª â€œæ°´ä»™èŠ±æ•° â€œï¼Œå› ä¸º153=1çš„ä¸‰æ¬¡æ–¹ï¼‹5çš„ä¸‰æ¬¡æ–¹ï¼‹3çš„ä¸‰æ¬¡æ–¹<br>åŸåœ°äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼<br>æ‰¾å‡º4å­—èŠ‚æ•´æ•°çš„ä¸­ä½æ•°<br>æ‰¾åˆ°æ•´æ•°çš„å¹³æ–¹æ ¹<br>å®ç°æ–æ³¢é‚£å¥‘<br>ç½‘ç»œ</p>
<p>ç”¨Java Socketç¼–ç¨‹ï¼Œè¯»æœåŠ¡å™¨å‡ ä¸ªå­—ç¬¦ï¼Œå†å†™å…¥æœ¬åœ°æ˜¾ç¤º<br>åå°„</p>
<p>åå°„æœºåˆ¶æä¾›äº†ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ<br>åå°„æ˜¯å¦‚ä½•å®ç°çš„<br>å“ªé‡Œç”¨åˆ°åå°„æœºåˆ¶<br>åå°„ä¸­ Class.forName å’Œ ClassLoader åŒºåˆ«<br>åå°„åˆ›å»ºç±»å®ä¾‹çš„ä¸‰ç§æ–¹å¼æ˜¯ä»€ä¹ˆ<br>å¦‚ä½•é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•<br>å¦‚ä½•é€šè¿‡åå°„è·å–å’Œè®¾ç½®å¯¹è±¡ç§æœ‰å­—æ®µçš„å€¼<br>åå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹<br>æ•°æ®åº“</p>
<p>å†™ä¸€æ®µ JDBC è¿Oracleçš„ç¨‹åº,å¹¶å®ç°æ•°æ®æŸ¥è¯¢<br>ç®—æ³•</p>
<p>50ä¸ªäººå›´åä¸€åœˆï¼Œå½“æ•°åˆ°ä¸‰æˆ–è€…ä¸‰çš„å€æ•°å‡ºåœˆï¼Œé—®å‰©ä¸‹çš„äººæ˜¯è°ï¼ŒåŸæ¥çš„ä½ç½®æ˜¯å¤šå°‘<br>å®ç°ä¸€ä¸ªç”µæ¢¯æ¨¡æ‹Ÿå™¨ç”¨<br>å†™ä¸€ä¸ªå†’æ³¡æ’åº<br>å†™ä¸€ä¸ªæŠ˜åŠæŸ¥æ‰¾<br>éšæœºäº§ç”Ÿ20ä¸ªä¸èƒ½é‡å¤çš„å­—ç¬¦å¹¶æ’åº<br>å†™ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ 2 ä¸ªæœ‰åºçš„æ•´æ•°æ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªæœ‰åºçš„æ•´æ•°æ•°ç»„<br>å†™ä¸€æ®µä»£ç åœ¨éå† ArrayList æ—¶ç§»é™¤ä¸€ä¸ªå…ƒç´ <br>å¤å…¸é—®é¢˜ï¼šæœ‰ä¸€å¯¹å…”å­ï¼Œä»å‡ºç”Ÿåç¬¬3ä¸ªæœˆèµ·æ¯ä¸ªæœˆéƒ½ç”Ÿä¸€å¯¹å…”å­ï¼Œå°å…”å­é•¿åˆ°ç¬¬å››ä¸ªæœˆåæ¯ä¸ªæœˆåˆç”Ÿä¸€å¯¹å…”å­ï¼Œå‡å¦‚å…”å­éƒ½ä¸æ­»ï¼Œé—®æ¯ä¸ªæœˆçš„å…”å­æ€»æ•°ä¸ºå¤šå°‘<br>çº¦ç‘ŸèŠ¬ç¯æ¸¸æˆ<br>æ­£åˆ™</p>
<p>è¯·ç¼–å†™ä¸€æ®µåŒ¹é…IPåœ°å€çš„æ­£åˆ™è¡¨è¾¾å¼<br>å†™å‡ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä¸€ä¸ªæ•°å­—<br>å­—ç¬¦ä¸²</p>
<p>å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå…¥ä¸€ä¸ªæ–‡ä»¶åå’Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç»Ÿè®¡è¿™ä¸ªå­—ç¬¦ä¸²åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚<br>å†™ä¸€ä¸ªç¨‹åºæ‰¾å‡ºæ‰€æœ‰å­—ç¬¦ä¸²çš„ç»„åˆï¼Œå¹¶æ£€æŸ¥å®ƒä»¬æ˜¯å¦æ˜¯å›æ–‡ä¸²<br>å†™ä¸€ä¸ªå­—ç¬¦ä¸²åè½¬å‡½æ•°ï¼Œè¾“å…¥abcdeè½¬æ¢æˆedcbaä»£ç <br>å°æ¸¸æˆï¼Œå€’è½¬å¥å­ä¸­çš„å•è¯<br>å°†GB2312ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºISO-8859-1ç¼–ç çš„å­—ç¬¦ä¸²<br>è¯·å†™ä¸€æ®µä»£ç æ¥è®¡ç®—ç»™å®šæ–‡æœ¬å†…å­—ç¬¦â€œAâ€çš„ä¸ªæ•°ã€‚åˆ†åˆ«ç”¨è¿­ä»£å’Œé€’å½’ä¸¤ç§æ–¹å¼<br>ç¼–å†™ä¸€ä¸ªæˆªå–å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œè¾“å…¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å’Œå­—èŠ‚æ•°ï¼Œè¾“å‡ºä¸ºæŒ‰å­—èŠ‚æˆªå–çš„å­—ç¬¦ä¸²ã€‚ ä½†æ˜¯è¦ä¿è¯æ±‰å­—ä¸è¢«æˆªåŠä¸ªï¼Œå¦‚â€œæˆ‘ABCâ€4ï¼Œåº”è¯¥æˆªä¸ºâ€œæˆ‘ABâ€ï¼Œè¾“å…¥â€œæˆ‘ABCæ±‰DEFâ€ï¼Œ6ï¼Œåº”è¯¥è¾“å‡ºä¸ºâ€œæˆ‘ABCâ€è€Œä¸æ˜¯â€œæˆ‘ABC+æ±‰çš„åŠä¸ªâ€<br>ç»™å®š 2 ä¸ªåŒ…å«å•è¯åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰çš„æ–‡ä»¶ï¼Œç¼–ç¨‹åˆ—å‡ºäº¤é›†<br>æ‰“å°å‡ºä¸€ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰æ’åˆ—<br>å°†ä¸€ä¸ªé”®ç›˜è¾“å…¥çš„æ•°å­—è½¬åŒ–æˆä¸­æ–‡è¾“å‡º(ä¾‹å¦‚ï¼šè¾“å…¥1234567ï¼Œè¾“å‡º:ä¸€ç™¾äºŒæ‹¾ä¸‰ä¸‡å››åƒäº”ç™¾å…­æ‹¾ä¸ƒ)<br>åœ¨Webåº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸é‡åˆ°è¾“å‡ºæŸç§ç¼–ç çš„å­—ç¬¦ï¼Œå¦‚ä» GBK åˆ° ISO8859-1ç­‰ï¼Œå¦‚ä½•è¾“å‡ºä¸€ä¸ªæŸç§ç¼–ç çš„å­—ç¬¦ä¸²<br>æ—¥æœŸ</p>
<p>è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®è·</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> javaé¢è¯•é¢˜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaé€ƒé€¸åˆ†æ]]></title>
      <url>/Java%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90.html</url>
      <content type="html"><![CDATA[<p>æ¦‚å¿µå¼•å…¥</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJava åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯è¢«åˆ†é…åˆ°å †å†…å­˜ä¸Šï¼Œä½†æ˜¯äº‹å®å¹¶ä¸æ˜¯è¿™ä¹ˆç»å¯¹ï¼Œé€šè¿‡å¯¹Javaå¯¹è±¡åˆ†é…çš„è¿‡ç¨‹åˆ†æï¼Œå¯ä»¥çŸ¥é“æœ‰ä¸¤ä¸ªåœ°æ–¹ä¼šå¯¼è‡´Javaä¸­åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å¹¶ä¸€å®šåˆ†åˆ«åœ¨æ‰€è®¤ä¸ºçš„å †ä¸Šã€‚è¿™ä¸¤ä¸ªç‚¹åˆ†åˆ«æ˜¯Javaä¸­çš„é€ƒé€¸åˆ†æå’ŒTLABï¼ˆThread Local Allocation Bufferï¼‰çº¿ç¨‹ç§æœ‰çš„ç¼“å­˜åŒºã€‚</p>
<p>åŸºæœ¬æ¦‚å¿µä»‹ç»</p>
<p>é€ƒé€¸åˆ†æï¼Œæ˜¯ä¸€ç§å¯ä»¥æœ‰æ•ˆå‡å°‘Javaç¨‹åºä¸­åŒæ­¥è´Ÿè½½å’Œå†…å­˜å †åˆ†é…å‹åŠ›çš„è·¨å‡½æ•°å…¨å±€æ•°æ®æµåˆ†æç®—æ³•ã€‚é€šè¿‡é€ƒé€¸åˆ†æï¼ŒJava Hotspotç¼–è¯‘å™¨èƒ½å¤Ÿåˆ†æå‡ºä¸€ä¸ªæ–°çš„å¯¹è±¡çš„å¼•ç”¨çš„ä½¿ç”¨èŒƒå›´ä»è€Œå†³å®šæ˜¯å¦è¦å°†è¿™ä¸ªå¯¹è±¡åˆ†é…åˆ°å †ä¸Šã€‚<br><a id="more"></a><br>åœ¨è®¡ç®—æœºè¯­è¨€ç¼–è¯‘å™¨ä¼˜åŒ–åŸç†ä¸­ï¼Œé€ƒé€¸åˆ†ææ˜¯æŒ‡åˆ†ææŒ‡é’ˆåŠ¨æ€èŒƒå›´çš„æ–¹æ³•ï¼Œå®ƒåŒç¼–è¯‘å™¨ä¼˜åŒ–åŸç†çš„æŒ‡é’ˆåˆ†æå’Œå¤–å½¢åˆ†æç›¸å…³è”ã€‚å½“å˜é‡ï¼ˆæˆ–è€…å¯¹è±¡ï¼‰åœ¨æ–¹æ³•ä¸­åˆ†é…åï¼Œå…¶æŒ‡é’ˆæœ‰å¯èƒ½è¢«è¿”å›æˆ–è€…è¢«å…¨å±€å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šè¢«å…¶ä»–è¿‡ç¨‹æˆ–è€…çº¿ç¨‹æ‰€å¼•ç”¨ï¼Œè¿™ç§ç°è±¡ç§°ä½œæŒ‡é’ˆï¼ˆæˆ–è€…å¼•ç”¨ï¼‰çš„é€ƒé€¸(Escape)ã€‚é€šä¿—ç‚¹è®²ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡çš„æŒ‡é’ˆè¢«å¤šä¸ªæ–¹æ³•æˆ–è€…çº¿ç¨‹å¼•ç”¨æ—¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç§°è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆå‘ç”Ÿäº†é€ƒé€¸ã€‚</p>
<p>Javaåœ¨Java SE 6u23ä»¥åŠä»¥åçš„ç‰ˆæœ¬ä¸­æ”¯æŒå¹¶é»˜è®¤å¼€å¯äº†é€ƒé€¸åˆ†æçš„é€‰é¡¹ã€‚Javaçš„ HotSpot JITç¼–è¯‘å™¨ï¼Œèƒ½å¤Ÿåœ¨æ–¹æ³•é‡è½½æˆ–è€…åŠ¨æ€åŠ è½½ä»£ç çš„æ—¶å€™å¯¹ä»£ç è¿›è¡Œé€ƒé€¸åˆ†æï¼ŒåŒæ—¶Javaå¯¹è±¡åœ¨å †ä¸Šåˆ†é…å’Œå†…ç½®çº¿ç¨‹çš„ç‰¹ç‚¹ä½¿å¾—é€ƒé€¸åˆ†ææˆJavaçš„é‡è¦åŠŸèƒ½ã€‚</p>
<p>ä»£ç ç¤ºä¾‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.stormma.gc;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Created on 2017/4/21.&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> stormma</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@title</span> &lt;p&gt;é€ƒé€¸åˆ†æ&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EscapeAnalysis</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> B b;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;å…¨å±€å˜é‡èµ‹å€¼å‘ç”ŸæŒ‡é’ˆé€ƒé€¸&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">globalVariablePointerEscape</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        b = <span class="keyword">new</span> B();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;æ–¹æ³•è¿”å›å¼•ç”¨ï¼Œå‘ç”ŸæŒ‡é’ˆé€ƒé€¸&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> B <span class="title">methodPointerEscape</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> B();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;å®ä¾‹å¼•ç”¨å‘ç”ŸæŒ‡é’ˆé€ƒé€¸&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">instancePassPointerEscape</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        methodPointerEscape().printClassName(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printClassName</span><span class="params">(EscapeAnalysis clazz)</span> </span>&#123;</span><br><span class="line">            System.out.println(clazz.getClass().getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>é€ƒé€¸åˆ†æç ”ç©¶å¯¹äº java ç¼–è¯‘å™¨æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ java å¯¹è±¡æ€»æ˜¯åœ¨å †ä¸­è¢«åˆ†é…çš„ï¼Œå› æ­¤ java å¯¹è±¡çš„åˆ›å»ºå’Œå›æ”¶å¯¹ç³»ç»Ÿçš„å¼€é”€æ˜¯å¾ˆå¤§çš„ã€‚java è¯­è¨€è¢«æ‰¹è¯„çš„ä¸€ä¸ªåœ°æ–¹ï¼Œä¹Ÿæ˜¯è®¤ä¸º java æ€§èƒ½æ…¢çš„ä¸€ä¸ªåŸå› å°±æ˜¯ javaä¸æ”¯æŒæ ˆä¸Šåˆ†é…å¯¹è±¡ã€‚JDK6é‡Œçš„ Swingå†…å­˜å’Œæ€§èƒ½æ¶ˆè€—çš„ç“¶é¢ˆå°±æ˜¯ç”±äº GC æ¥éå†å¼•ç”¨æ ‘å¹¶å›æ”¶å†…å­˜çš„ï¼Œå¦‚æœå¯¹è±¡çš„æ•°ç›®æ¯”è¾ƒå¤šï¼Œå°†ç»™ GC å¸¦æ¥è¾ƒå¤§çš„å‹åŠ›ï¼Œä¹Ÿé—´æ¥å¾—å½±å“äº†æ€§èƒ½ã€‚å‡å°‘ä¸´æ—¶å¯¹è±¡åœ¨å †å†…åˆ†é…çš„æ•°é‡ï¼Œæ— ç–‘æ˜¯æœ€æœ‰æ•ˆçš„ä¼˜åŒ–æ–¹æ³•ã€‚java ä¸­åº”ç”¨é‡Œæ™®éå­˜åœ¨ä¸€ç§åœºæ™¯ï¼Œä¸€èˆ¬æ˜¯åœ¨æ–¹æ³•ä½“å†…ï¼Œå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå¹¶ä¸”è¯¥å˜é‡åœ¨æ–¹æ³•æ‰§è¡Œç”Ÿå‘½å‘¨æœŸå†…æœªå‘ç”Ÿé€ƒé€¸ï¼ŒæŒ‰ç…§ JVMå†…å­˜åˆ†é…æœºåˆ¶ï¼Œé¦–å…ˆä¼šåœ¨å †å†…å­˜ä¸Šåˆ›å»ºç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰ï¼Œç„¶åå°†æ­¤å¯¹è±¡çš„å¼•ç”¨å‹å…¥è°ƒç”¨æ ˆï¼Œç»§ç»­æ‰§è¡Œï¼Œè¿™æ˜¯ JVMä¼˜åŒ–å‰çš„æ–¹å¼ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨é€ƒé€¸åˆ†æå¯¹ JVM è¿›è¡Œä¼˜åŒ–ã€‚å³é’ˆå¯¹æ ˆçš„é‡æ–°åˆ†é…æ–¹å¼ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ†æå¹¶ä¸”æ‰¾åˆ°æœªé€ƒé€¸çš„å˜é‡ï¼Œå°†è¯¥å˜é‡ç±»çš„å®ä¾‹åŒ–å†…å­˜ç›´æ¥åœ¨æ ˆé‡Œåˆ†é…ï¼Œæ— éœ€è¿›å…¥å †ï¼Œåˆ†é…å®Œæˆä¹‹åï¼Œç»§ç»­è°ƒç”¨æ ˆå†…æ‰§è¡Œï¼Œæœ€åçº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œæ ˆç©ºé—´è¢«å›æ”¶ï¼Œå±€éƒ¨å˜é‡å¯¹è±¡ä¹Ÿè¢«å›æ”¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼çš„ä¼˜åŒ–ï¼Œä¸ä¼˜åŒ–å‰çš„æ–¹æ¡ˆä¸»è¦åŒºåˆ«åœ¨äºå¯¹è±¡çš„å­˜å‚¨ä»‹è´¨ï¼Œä¼˜åŒ–å‰æ˜¯åœ¨å †ä¸­ï¼Œè€Œä¼˜åŒ–åçš„æ˜¯åœ¨æ ˆä¸­ï¼Œä»è€Œå‡å°‘äº†å †ä¸­ä¸´æ—¶å¯¹è±¡çš„åˆ†é…ï¼ˆè¾ƒè€—æ—¶ï¼‰ï¼Œä»è€Œä¼˜åŒ–æ€§èƒ½ã€‚</p>
<p>ä½¿ç”¨é€ƒé€¸åˆ†æè¿›è¡Œæ€§èƒ½ä¼˜åŒ–(-XX:+DoEscapeAnalysiså¼€å¯é€ƒé€¸åˆ†æ)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Test test = <span class="keyword">new</span> Test();</span><br><span class="line">    <span class="comment">//å¤„ç†é€»è¾‘</span></span><br><span class="line">    ......</span><br><span class="line">    test = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ®µä»£ç ï¼Œä¹‹æ‰€ä»¥å¯ä»¥åœ¨æ ˆä¸Šè¿›è¡Œå†…å­˜åˆ†é…ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰å‘ç”ŸæŒ‡é’ˆé€ƒé€¸ï¼Œå³æ˜¯å¼•ç”¨æ²¡æœ‰æš´éœ²å‡ºè¿™ä¸ªæ–¹æ³•ä½“ã€‚</p>
<p>æ ˆå’Œå †å†…å­˜åˆ†é…æ¯”è¾ƒ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.stormma.gc;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Created on 2017/4/21.&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> stormma</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: &lt;p&gt;å†…å­˜åˆ†é…æ¯”è¾ƒ&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EscapeAnalysisTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">alloc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2</span>];</span><br><span class="line">        b[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> b = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i++) &#123;</span><br><span class="line">            alloc();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> e = System.currentTimeMillis();</span><br><span class="line">        System.out.println(e - b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>JVM å‚æ•°ä¸º-server -Xmx10m -Xms10m -XX:-DoEscapeAnalysis -XX:+PrintGC, è¿è¡Œç»“æœ<br>JVM å‚æ•°ä¸º-server -Xmx10m -Xms10m -XX:+DoEscapeAnalysis -XX:+PrintGC, è¿è¡Œç»“æœ</p>
<p>æ€§èƒ½æµ‹è¯•<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> me.stormma.gc;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Created on 2017/4/21.&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> stormma</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: &lt;p&gt;åˆ©ç”¨é€ƒé€¸åˆ†æè¿›è¡Œæ€§èƒ½ä¼˜åŒ–&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EscapeAnalysisTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> counter;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            x = (++counter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.nanoTime();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span> * <span class="number">1000</span> * <span class="number">10</span>; ++i) &#123;</span><br><span class="line">            Foo foo = <span class="keyword">new</span> Foo();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.nanoTime();</span><br><span class="line">        System.out.println(<span class="string">"Time cost is "</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨é€ƒé€¸åˆ†æä¼˜åŒ– JVMè¾“å‡ºç»“æœ( -server -XX:+DoEscapeAnalysis -XX:+PrintGC)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Time cost is 11012345</span><br></pre></td></tr></table></figure></p>
<p>æœªä½¿ç”¨é€ƒé€¸åˆ†æä¼˜åŒ– JVM è¾“å‡ºç»“æœ( -server -Xmx10m -Xms10m -XX:-DoEscapeAnalysis -XX:+PrintGC)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[GC (Allocation Failure)  33280K-&gt;408K(125952K), 0.0010344 secs]</span><br><span class="line">[GC (Allocation Failure)  33688K-&gt;424K(125952K), 0.0009799 secs]</span><br><span class="line">[GC (Allocation Failure)  33704K-&gt;376K(125952K), 0.0007297 secs]</span><br><span class="line">[GC (Allocation Failure)  33656K-&gt;456K(159232K), 0.0014817 secs]</span><br><span class="line">Time cost is 68562263</span><br></pre></td></tr></table></figure></p>
<p>åˆ†æç»“æœï¼Œæ€§èƒ½ä¼˜åŒ–1/6ã€‚<br><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLnN0b3JtbWEubWUvMjAxNy8wNC8yMS9qYXZhJUU5JTgwJTgzJUU5JTgwJUI4JUU1JTg4JTg2JUU2JTlFJTkwLw==" title="https://blog.stormma.me/2017/04/21/java%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90/">åŸæ–‡å‡ºå¤„<i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ•°æ®åŒºã€ä»£ç åŒºã€æ ˆåŒºã€å †åŒº]]></title>
      <url>/%E6%95%B0%E6%8D%AE%E5%8C%BA%E3%80%81%E4%BB%A3%E7%A0%81%E5%8C%BA%E3%80%81%E6%A0%88%E5%8C%BA%E3%80%81%E5%A0%86%E5%8C%BA.html</url>
      <content type="html"><![CDATA[<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul>
<li>æ ˆåŒº(stack)ï¼šç”±ç³»ç»Ÿçš„ç¼–è¯‘å™¨è‡ªåŠ¨çš„é‡Šæ”¾ï¼Œä¸»è¦ç”¨æ¥å­˜æ”¾ <strong>æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œä¸€äº›ä¸´æ—¶çš„å±€éƒ¨å˜é‡</strong> ç­‰ï¼Œå¹¶ä¸”æ–¹æ³•ä¸­çš„å‚æ•°ä¸€èˆ¬åœ¨æ“ä½œå®Œåï¼Œä¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨çš„é‡Šæ”¾æ‰ã€‚</li>
<li>å †åŒº(heap)ï¼šç”±ç¨‹åºå‘˜å†³å®šï¼Œåœ¨Javaä¸­ï¼Œå¦‚æœç¨‹åºå‘˜ä¸é‡Šæ”¾çš„è¯ï¼Œä¸€èˆ¬ä¼šç”±åƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨çš„æ¸…ç†æ‰ã€‚æ­¤åŒºåŸŸä¸»è¦å­˜æ”¾ï¼š <strong>åˆ›å»ºçš„å¯¹è±¡ã€åŠ¨æ€ç”³è¯·çš„ä¸´æ—¶ç©ºé—´ç­‰</strong> ã€‚</li>
<li>æ•°æ®åŒº(data seg)ï¼šä¹Ÿç§° <strong>å…¨å±€åŒºæˆ–è€…é™æ€åŒº</strong> ï¼Œå­˜æ”¾ <strong>é™æ€å˜é‡ã€å…¨å±€å˜é‡ç­‰</strong> éƒ½ä¼šå­˜æ”¾åˆ°æ•°æ®åŒºï¼Œæ­¤åŒºåŸŸä¸Šçš„ä¸œè¥¿éƒ½è¢«å…¨å±€æ‰€å…±äº«ã€‚æ¯”å¦‚æˆ‘ä»¬é€šå¸¸é‡‡ç”¨ <strong>ç±»å. </strong>çš„æ–¹å¼å°±å¯ä»¥è®¿é—®åˆ°æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é™æ€æ–¹æ³•ï¼Œå­˜æ”¾åˆ°æ•°æ®åŒºçš„ã€‚</li>
<li>ä»£ç åŒºï¼šå­˜æ”¾ç¨‹åºç¼–è¯‘åå¯ä»¥æ‰§è¡Œä»£ç çš„åœ°æ–¹ã€‚æ¯”å¦‚æ‰§è¡Œä»£ç æ—¶å†™çš„Whileè¯­å¥ã€ifè¯­å¥ç­‰ï¼Œéƒ½ä¼šå­˜æ”¾åˆ°æ­¤ã€‚<a id="more"></a>
<h2 id="å†…å­˜åˆ†æ"><a href="#å†…å­˜åˆ†æ" class="headerlink" title="å†…å­˜åˆ†æ"></a>å†…å­˜åˆ†æ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Personç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id ;</span><br><span class="line">    <span class="keyword">int</span> age =  <span class="number">20</span> ;</span><br><span class="line">    Person(<span class="keyword">int</span> _id, <span class="keyword">int</span> _age)&#123;</span><br><span class="line">        id = _id ;</span><br><span class="line">        age = _age ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="æ¥ä¸‹æ¥å¯¹newä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆ†æ"><a href="#æ¥ä¸‹æ¥å¯¹newä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆ†æ" class="headerlink" title="æ¥ä¸‹æ¥å¯¹newä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆ†æ"></a>æ¥ä¸‹æ¥å¯¹newä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆ†æ</h2><p>æ‰§è¡Œè¯­å¥ï¼š Person tom = new Person(1,25) ;</p>
<h2 id="ç¬¬ä¸€æ­¥ï¼š"><a href="#ç¬¬ä¸€æ­¥ï¼š" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼š"></a>ç¬¬ä¸€æ­¥ï¼š</h2><p>æˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œå³Person(),å› æ­¤ä¸Šè¿°ä¼šå…ˆè°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°<br><img src="http://ou3xxg3hg.bkt.clouddn.com/å †.png" alt=""></p>
<h2 id="ç¬¬äºŒæ­¥ï¼š"><a href="#ç¬¬äºŒæ­¥ï¼š" class="headerlink" title="ç¬¬äºŒæ­¥ï¼š"></a>ç¬¬äºŒæ­¥ï¼š</h2><p>æ‰§è¡Œæ„é€ å‡½æ•°New Person(1,25)æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“è°ƒç”¨çš„æ˜¯Person(int _id, int _age)ï¼Œæ‰€ä»¥æ­¤æ—¶æ ˆç©ºé—´ä¼šåˆ†é…æ–¹æ³•çš„å‚æ•°çš„ä¸´æ—¶å˜é‡å¦‚ä¸‹<br><img src="http://ou3xxg3hg.bkt.clouddn.com/æ ˆ.png" alt=""></p>
<h2 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥:"></a>ç¬¬ä¸‰æ­¥:</h2><p>æ‰§è¡Œæ„é€ å‡½æ•° Person(int _id, int _age),id = _id; age = _age;æ­¤æ—¶æ ˆä¸­çš„ä¸´æ—¶å˜é‡ä¼šæ”¹å˜é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡,èµ‹å€¼å®Œåï¼Œæ ˆä¸­çš„ä¸´æ—¶å˜é‡ä¼šè‡ªåŠ¨çš„é”€æ¯ï¼Œç„¶ååˆ›å»ºçš„ä¸´æ—¶å˜é‡Tomä¼šè‡ªåŠ¨çš„æŒ‡å‘åˆ›å»ºçš„å¯¹è±¡ã€‚<br><img src="http://ou3xxg3hg.bkt.clouddn.com/å †æ ˆ.png" alt=""></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaå¸¸ç”¨ç±»å’Œæ–¹æ³•é‡ç‚¹æ€»ç»“]]></title>
      <url>/Java%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95%E9%87%8D%E7%82%B9%E6%80%BB%E7%BB%93.html</url>
      <content type="html"><![CDATA[<ol>
<li>ç®€è¿°Javaä¸­å†…å­˜åˆ†é…çš„é—®é¢˜<ul>
<li style="list-style: none"><input type="checkbox" checked> å‡¡æ˜¯new() å‡ºæ¥çš„ä¸œè¥¿ï¼Œéƒ½æ˜¯å †ä¸­è¿›è¡Œåˆ†é…çš„</li>
<li>å±€éƒ¨å˜é‡ã€æ•°æ®ç±»å‹+å˜é‡åã€‘éƒ½æ˜¯åœ¨æ ˆä¸­è¿›è¡Œåˆ†é…çš„</li>
<li>é™æ€å˜é‡ã€staticã€‘å’Œå­—ç¬¦ä¸²å¸¸é‡ã€â€Stringâ€ã€‘éƒ½æ˜¯åœ¨æ•°æ®åŒºè¿›è¡Œåˆ†é…çš„</li>
<li>æ–¹æ³•ã€ä»£ç ã€‘éƒ½æ˜¯åœ¨ä»£ç åŒºè¿›è¡Œå­˜æ”¾çš„</li>
</ul>
</li>
<li>ç®€è¿°Javaä¸­Objectç±»çš„åœ°ä½<ul>
<li>Javaä¸­æ‰€æœ‰çš„ç±»ã€è‡ªå·±å®šä¹‰çš„ç±»ä»¥åŠSunå…¬å¸æä¾›çš„ç±»ã€‘éƒ½é»˜è®¤è‡ªåŠ¨ç»§æ‰¿äº†Obejectç±»</li>
<li>Javaä¸­æ‰€æœ‰çš„ç±»éƒ½ä»Objectç±»ä¸­ç»§æ‰¿äº†toString()æ–¹æ³•ã€hashCode()æ–¹æ³•å’Œequalsç­‰æ–¹æ³•<a id="more"></a></li>
</ul>
</li>
<li><p>ç®€è¿°Objectç±»ä¸­toString()æ–¹æ³•çš„æ³¨æ„äº‹é¡¹</p>
<ul>
<li>toString()æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</li>
<li>toString()æ–¹æ³•è¿”å›çš„æ˜¯ç±»çš„åå­—å’Œè¯¥å¯¹è±¡çš„å“ˆå¸Œç ç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³toString()æ–¹æ³•è¿”å›çš„æ˜¯ <strong>è¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç°å½¢å¼</strong></li>
<li><p>åœ¨Javaä¸­ï¼ŒSystem.out.println(ç±»å¯¹è±¡å)å®é™…è¾“å‡ºçš„æ˜¯è¯¥å¯¹è±¡çš„toString()æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ï¼Œå³æ‹¬å·ä¸­çš„å†…å®¹ç­‰ä»·äºç±»å¯¹è±¡å.toString()ï¼ŒtoString()æ–¹æ³•çš„å¥½å¤„ <strong>åœ¨ç¢°åˆ°printlnæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œä¸ç”¨æ˜¾ç¤ºçš„å†™å‡ºæ¥</strong> ï¼Œ</p>
<pre><code>eg: 
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str =  <span class="keyword">new</span> String();</span><br><span class="line">System.out.println(str)   &lt;==&gt; System.out.println(str.toString())      ----&gt;toString()è‡ªåŠ¨éšè—</span><br></pre></td></tr></table></figure>
</li>
<li><p>å»ºè®®æ‰€æœ‰çš„å­ç±»éƒ½é‡å†™ä»Objectç±»ä¸­ç»§æ‰¿è¿‡æ¥toStringæ–¹æ³•ï¼Œå¦åˆ™toStringæ–¹æ³•çš„è¿”å›å€¼æ²¡æœ‰ä»€ä¹ˆå®é™…å«ä¹‰ï¼ˆä¸ºä»€ä¹ˆè¦é‡å†™çš„åŸå› ï¼‰</p>
</li>
</ul>
</li>
<li>ç®€è¿°Objectç±»ä¸­equals()ç±»æ–¹æ³•çš„æ³¨æ„äº‹é¡¹<ul>
<li>equalsæ–¹æ³•çš„è¿”å›å€¼ä¸ºtrueæˆ–false</li>
<li>Objectç±»ä¸­equalsæ–¹æ³•åªæœ‰åœ¨ <strong>ä¸¤ä¸ªå¯¹è±¡æ˜¯åŒä¸€å—å†…å­˜åŒºåŸŸæ—¶ï¼Œå³ä¸ä½†å†…å®¹ç›¸åŒã€åœ°å€è¿˜å¿…é¡»ç›¸åŒæ—¶ï¼Œæ‰è¿”å›trueï¼Œå¦åˆ™å³ä¾¿å†…å®¹ç›¸åŒã€å¦‚æœåœ°å€ä¸åŒåªä¼šè¿”å›false</strong></li>
<li>é‡å†™Objectç±»ä¸­çš„equalsæ–¹æ³•ç›®çš„åœ¨äºï¼šä¿è¯åªè¦ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸åŒï¼Œequalsæ–¹æ³•å°±è¿”å›trueï¼ˆä¸ºä»€ä¹ˆè¦é‡å†™çš„åŸå› ï¼‰</li>
</ul>
</li>
<li>ç®€è¿°Objectç±»ä¸­hashCode()æ–¹æ³•çš„æ³¨æ„äº‹é¡¹<ul>
<li>å“ˆå¸Œç åŸæœ¬æŒ‡çš„æ˜¯ <strong>å†…å­˜ç©ºé—´åœ°å€çš„åå…­è¿›åˆ¶è¡¨ç¤ºå½¢å¼</strong></li>
<li>hashCode()æ–¹æ³•è¿”å›çš„æ˜¯ **è¯¥å¯¹è±¡çš„å“ˆå¸Œç ï¼Œå³è¯¥å¯¹è±¡çš„çœŸå®å†…å­˜åœ°å€çš„åå…­è¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼Œä½†æ˜¯é‡å†™å®ŒhashCode()æ–¹æ³•ä¹‹åï¼Œè¿”å›çš„ä¸å†æ˜¯è¯¥å¯¹è±¡çœŸå®å†…å­˜åœ°å€çš„åå…­è¿›åˆ¶è¡¨ç¤ºå½¢å¼</li>
</ul>
</li>
<li>å­¦ä¹ Javaä¸­toStringæ–¹æ³•ã€equalsæ–¹æ³•ã€hashCodeæ–¹æ³•å…±åŒçš„ä¸€ä¸ªæ³¨æ„äº‹é¡¹<br>åœ¨Javaä¸­ï¼Œå‡¡æ˜¯åŠ¨æ€åˆ†é…çš„å†…å­˜éƒ½æ˜¯æ²¡æœ‰åå­—çš„ï¼Œè€Œæ˜¯å°†å…¶åœ°å€èµ‹ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ã€å¼•ç”¨ã€‘ï¼Œç”¨å¼•ç”¨å˜é‡å»ä»£è¡¨è¿™ä¸ªäº‹ç‰©ï¼Œæ‰€ä»¥å¼•ç”¨å’ŒåŠ¨æ€åˆ†é…çš„å†…å­˜æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼Œä½†æ˜¯å­¦ä¹ Javaä¸­çš„toStringæ–¹æ³•ã€equalsæ–¹æ³•å’ŒhashCodeæ–¹æ³•æ—¶é»˜è®¤å¼•ç”¨å’Œå…¶æŒ‡å‘çš„åŠ¨æ€åˆ†é…çš„å†…å­˜æ˜¯ä¸€ä¸ªäº‹ç‰©ï¼Œä¸åŒºåˆ†å½¼æ­¤</li>
<li>ä»é€»è¾‘ä¸Šé˜è¿°ä¸ºä»€ä¹ˆè¦é‡å†™equalsæ–¹æ³•å’ŒhashCodeæ–¹æ³• ï¼ˆ<strong>é‡ç‚¹</strong>ï¼‰<ul>
<li>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œé€»è¾‘ä¸Šåªè¦ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸åŒï¼Œå…¶åœ°å€ä»¥åŠè¿™ä¸¤ä¸ªå¯¹è±¡å°±åº”è¯¥ç›¸ç­‰ï¼Œè€Œè¦ä¿è¯åœ°å€ç›¸åŒå°±åº”è¯¥é‡å†™hashCodeæ–¹æ³•ï¼Œè€Œè¦ä¿è¯å¯¹è±¡ç›¸åŒå°±åº”è¯¥é‡å†™equalsæ–¹æ³•</li>
<li>å‡¡æ˜¯Javaä¸­è‡ªå¸¦çš„ç±»éƒ½å·²ç»é‡å†™äº†equalsæ–¹æ³•å’ŒhashCodeæ–¹æ³•ï¼Œé‡å†™ä¹‹ååªè¦ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸åŒï¼ŒhashCodeæ–¹æ³•çš„è¿”å›å€¼å°±ç›¸åŒï¼Œä¿è¯åœ°å€ç›¸åŒï¼Œequalsæ–¹æ³•å°±è¿”å›trueï¼Œä¿è¯ä¸¤ä¸ªå¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€ŒJavaä¸­å‡¡æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ç±»åªèƒ½è‡ªå·±åŒºé‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼ˆ<strong> ä¸ºä»€ä¹ˆæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»ï¼Œè¦è‡ªå·±é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼ŒtoString()ä¹Ÿè¦é‡å†™ </strong>ï¼‰ï¼›<br>ã€new Integer(1)ä¸new Integer(2)ã€‘</li>
</ul>
</li>
<li>ç®€è¿°Stringç±»ä¸­çš„equalsæ–¹æ³•ä¸Objectç±»ä¸­çš„equalsæ–¹æ³•çš„ä¸åŒç‚¹<ul>
<li>Stringç±»ä¸­çš„equalsæ–¹æ³•æ˜¯ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸åŒã€è€ŒObjectç±»ä¸­çš„equalsæ–¹æ³•æ˜¯ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€è°“åŒä¸€ä¸ªå¯¹è±¡æŒ‡çš„æ˜¯å†…å­˜ä¸­çš„åŒä¸€å—å­˜å‚¨ç©ºé—´</li>
</ul>
</li>
<li>å¯¹äºJavaä¸­StringBufferç±»çš„ç”±æ¥</li>
<li>Stringç±»å¯¹è±¡è¡¨ç¤ºä¸å¯ä¿®æ”¹çš„UniCodeç¼–ç å­—ç¬¦ä¸²ã€å³Stringç±»å¯¹è±¡ä¸€æ—¦åˆ›å»ºå°±ä¸å¯åœ¨æ›´æ”¹ï¼Œå³åªè¦åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°±ä¼šé‡æ–°åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ï¼Œå› æ­¤å¦‚æœç»å¸¸å¯¹å­—ç¬¦ä¸²çš„å†…å®¹è¿›è¡Œä¿®æ”¹è€Œä½¿ç”¨Stringç±»çš„è¯ï¼Œå°±ä¼šé€ æˆç©ºé—´ä»¥åŠæ—¶é—´çš„æµªè´¹ï¼Œå› æ­¤å¦‚æœç»å¸¸å¯¹å­—ç¬¦ä¸²çš„å†…å®¹è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨StringBufferç±»ï¼ŒStringBufferç±»å¯ä»¥ä¸€ç›´å¯¹åŒä¸€å—å†…å­˜ç©ºé—´è¿›è¡Œæ“ä½œï¼Œå¯¹ä¸€ä¸ªå­—ç¬¦ä¸²ä¸æ–­çš„è¿›è¡Œä¿®æ”¹ï¼Œæ­£å› ä¸ºStringBufferç±»çš„è¿™ä¸ªä¼˜ç‚¹ï¼Œæ‰€ä»¥StringBufferç±»ä¸­å­˜åœ¨ç€å¤§é‡ä¿®æ”¹å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œä½†æ˜¯Stringç±»ä¸­å´æ²¡æœ‰</li>
<li>ç®€è¿°Stringã€StringBufferç±»ä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ–¹æ³•<ul>
<li>valueOf():å°†åŸºæœ¬ç±»å‹æ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²</li>
</ul>
</li>
<li>ç®€è¿°Stringç±»ä¸StringBufferç±»çš„å…³è”<ul>
<li>å…ˆä½¿ç”¨StringBufferç±»å°†å­—ç¬¦ä¸²çš„å†…å®¹ä¸æ–­çš„è¿›è¡Œä¿®æ”¹ã€æœ€åå°†æˆå“æ”¾åˆ°Stringç±»é‡Œé¢å»</li>
<li>StringBufferç±»ä¸­çš„toStringæ–¹æ³•å¯ä»¥å°†Stringç±»å¯¹è±¡è½¬åŒ–ä¸ºStringBufferç±»å¯¹è±¡<br>String str1 = str2.toStringï¼ˆï¼‰;</li>
<li>åœ¨Javaä¸­åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è¢«å½“åšStringç±»å¯¹è±¡  å¦‚ï¼šâ€œzhangâ€.length();</li>
</ul>
</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç»™å‡ºä¸€ç»„å¹´é¾„ï¼Œç”¨å†’æ³¡æ’åºæ±‚æœ€å¤§å¹´é¾„ï¼Œæœ€å°å¹´é¾„]]></title>
      <url>/%E7%BB%99%E5%87%BA%E4%B8%80%E7%BB%84%E5%B9%B4%E9%BE%84%EF%BC%8C%E6%B1%82%E6%9C%80%E5%A4%A7%E5%B9%B4%E9%BE%84%EF%BC%8C%E6%9C%80%E5%B0%8F%E5%B9%B4%E9%BE%84.html</url>
      <content type="html"><![CDATA[<h2 id="æ³•ä¸€"><a href="#æ³•ä¸€" class="headerlink" title="æ³•ä¸€"></a>æ³•ä¸€</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ±‚å‡ºæœ€å¤§å¹´é¾„,æ±‚å‡ºæœ€å°å¹´é¾„,æ±‚å‡ºå¹³å‡å¹´é¾„</span></span><br><span class="line">        <span class="keyword">int</span>[] ages = &#123;<span class="number">34</span>,<span class="number">11</span>,<span class="number">45</span>,<span class="number">23</span>,<span class="number">16</span>&#125;;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span> ;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">4</span>; flag &amp;&amp; i &gt;<span class="number">0</span> ; i--) &#123;</span><br><span class="line">            flag = <span class="keyword">false</span> ;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(ages[j]&gt;ages[j+<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="keyword">int</span> temp = ages[j];</span><br><span class="line">                    ages[j] = ages[j+<span class="number">1</span>];</span><br><span class="line">                    ages[j+<span class="number">1</span>] = temp ;</span><br><span class="line">                    flag = <span class="keyword">true</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"-------"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            System.out.print(ages[i]+ <span class="string">"\t"</span>);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="æ³•äºŒ"><a href="#æ³•äºŒ" class="headerlink" title="æ³•äºŒ"></a>æ³•äºŒ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] ages = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span> ;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; flag &amp;&amp; i &lt; ages.length-<span class="number">1</span>; i++) &#123;</span><br><span class="line">            flag = <span class="keyword">false</span> ;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; ages.length - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(ages[j] &gt; ages[j+<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="keyword">int</span> temp = ages[j];</span><br><span class="line">                    ages[j] = ages[j+<span class="number">1</span>];</span><br><span class="line">                    ages[j+<span class="number">1</span>] = temp ;</span><br><span class="line">                    flag = <span class="keyword">true</span> ;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"-----"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ages.length; i++) &#123;</span><br><span class="line">            System.out.print(ages[i]+<span class="string">"\t"</span>);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¸ä½¿ç”¨ç¬¬ä¸‰ä¸ªå˜é‡äº¤æ¢ä¸¤å˜é‡çš„å€¼]]></title>
      <url>/%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%8F%98%E9%87%8F%E4%BA%A4%E6%8D%A2%E4%B8%A4%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC.html</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	æœ‰ä¸¤ä¸ªæ•´æ•° åˆ†åˆ«æ˜¯ a=10 b=8 åœ¨ä¸ä½¿ç”¨ç¬¬ä¸‰ä¸ªå˜é‡çš„æƒ…å†µä¸‹  å¯¹å…¶å€¼è¿›è¡Œäº¤æ¢</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Work1</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">		<span class="keyword">int</span> b = <span class="number">8</span>;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		a=a+b;</span></span><br><span class="line"><span class="comment">		b=a-b;</span></span><br><span class="line"><span class="comment">		a=a-b;</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		a=a^b;</span></span><br><span class="line"><span class="comment">		b=a^b;</span></span><br><span class="line"><span class="comment">		a=a^b;</span></span><br><span class="line"><span class="comment">		1010</span></span><br><span class="line"><span class="comment">		1000</span></span><br><span class="line"><span class="comment">		----------</span></span><br><span class="line"><span class="comment">		0010 2</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		0010</span></span><br><span class="line"><span class="comment">		1000</span></span><br><span class="line"><span class="comment">		-----</span></span><br><span class="line"><span class="comment">		1010 10</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		0010</span></span><br><span class="line"><span class="comment">		1010</span></span><br><span class="line"><span class="comment">		-----</span></span><br><span class="line"><span class="comment">		1000 8</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		a=b+(b=a)*<span class="number">0</span>;</span><br><span class="line">		System.out.println(<span class="string">"a="</span>+a+<span class="string">",b="</span>+b);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä½¿ç”¨Javaå€’åºè¾“å‡º12345]]></title>
      <url>/%E4%BD%BF%E7%94%A8Java%E5%80%92%E5%BA%8F%E8%BE%93%E5%87%BA12345.html</url>
      <content type="html"><![CDATA[<h2 id="åŸç†ï¼š-å–æœ€åä¸€ä½ï¼Œ-å–æ•´é™¤æ‰æœ€åä¸€ä½"><a href="#åŸç†ï¼š-å–æœ€åä¸€ä½ï¼Œ-å–æ•´é™¤æ‰æœ€åä¸€ä½" class="headerlink" title="åŸç†ï¼š%å–æœ€åä¸€ä½ï¼Œ/å–æ•´é™¤æ‰æœ€åä¸€ä½"></a>åŸç†ï¼š%å–æœ€åä¸€ä½ï¼Œ/å–æ•´é™¤æ‰æœ€åä¸€ä½</h2><h2 id="é€è¡Œè¾“å‡º"><a href="#é€è¡Œè¾“å‡º" class="headerlink" title="é€è¡Œè¾“å‡º"></a>é€è¡Œè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> t = <span class="number">12345</span> ;</span><br><span class="line"><span class="keyword">while</span>(t&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> num = t%<span class="number">10</span>;</span><br><span class="line">            t /= <span class="number">10</span> ;</span><br><span class="line">            System.out.print(num);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸€æ¬¡æ€§è¾“å‡º"><a href="#ä¸€æ¬¡æ€§è¾“å‡º" class="headerlink" title="ä¸€æ¬¡æ€§è¾“å‡º"></a>ä¸€æ¬¡æ€§è¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> num = <span class="number">12345</span>;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">			num%10       					5</span></span><br><span class="line"><span class="comment">			num/10%10    					4</span></span><br><span class="line"><span class="comment">			num/100%10   num/10/10%10 		3</span></span><br><span class="line"><span class="comment">			num/1000%10  num/10/10/10%10     2</span></span><br><span class="line"><span class="comment">			num/10000%10 num/10/10/10/10%10 1</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="keyword">int</span> result=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">			result = result*<span class="number">10</span>+num%<span class="number">10</span>;</span><br><span class="line">			num/=<span class="number">10</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.print(result);</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«]]></title>
      <url>/%E5%B9%B6%E5%8F%91%E5%92%8C%E5%B9%B6%E8%A1%8C%E7%9A%84%E5%8C%BA%E5%88%AB.html</url>
      <content type="html"><![CDATA[<p><img src="http://ou3xxg3hg.bkt.clouddn.com/å¹¶è¡Œ1.jpg" alt=""></p>
<h2 id="è§‚ç‚¹ä¸€"><a href="#è§‚ç‚¹ä¸€" class="headerlink" title="è§‚ç‚¹ä¸€"></a>è§‚ç‚¹ä¸€</h2><p>å¹¶è¡Œï¼ˆparalleliseï¼‰åŒæ—¶åˆ»ï¼ˆæŸç‚¹ï¼‰ï¼Œå¹¶å‘ï¼ˆconcurrencyï¼‰åŒæ—¶é—´ï¼ˆæŸæ®µï¼‰</p>
<h2 id="è§‚ç‚¹äºŒ"><a href="#è§‚ç‚¹äºŒ" class="headerlink" title="è§‚ç‚¹äºŒ"></a>è§‚ç‚¹äºŒ</h2><p>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»ŸCSAPPçš„å›ç­”ã€‚å¹¶å‘ï¼ˆConcurrencyï¼‰æ˜¯è¯´è¿›ç¨‹Bçš„å¼€å§‹æ—¶é—´æ˜¯åœ¨è¿›ç¨‹Açš„å¼€å§‹æ—¶é—´ä¸ç»“æŸæ—¶é—´ä¹‹é—´ï¼Œæˆ‘ä»¬å°±è¯´Aå’ŒBæ˜¯å¹¶å‘çš„ã€‚å¹¶è¡Œï¼ˆParallel Executionï¼‰æ˜¯å¹¶å‘çš„çœŸå­é›†ï¼ŒæŒ‡åŒä¸€æ—¶é—´ä¸¤ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸åŒçš„æœºå™¨ä¸Šæˆ–è€…åŒä¸€ä¸ªæœºå™¨ä¸åŒçš„æ ¸å¿ƒä¸Šã€‚<br><a id="more"></a><br>ä½œè€…ï¼šstarrynight<br>é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzMzNTE1NDgxL2Fuc3dlci82Nzk2Mjc1Ng==" title="https://www.zhihu.com/question/33515481/answer/67962756">https://www.zhihu.com/question/33515481/answer/67962756<i class="fa fa-external-link"></i></span><br>æ¥æºï¼šçŸ¥ä¹<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<h2 id="è§‚ç‚¹ä¸‰"><a href="#è§‚ç‚¹ä¸‰" class="headerlink" title="è§‚ç‚¹ä¸‰"></a>è§‚ç‚¹ä¸‰</h2><p>å¦‚æœæŸä¸ªç³»ç»Ÿæ”¯æŒä¸¤ä¸ªæˆ–è€…å¤šä¸ªåŠ¨ä½œï¼ˆActionï¼‰åŒæ—¶å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªå¹¶å‘ç³»ç»Ÿã€‚å¦‚æœæŸä¸ªç³»ç»Ÿæ”¯æŒä¸¤ä¸ªæˆ–è€…å¤šä¸ªåŠ¨ä½œåŒæ—¶æ‰§è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªå¹¶è¡Œç³»ç»Ÿã€‚å¹¶å‘ç³»ç»Ÿä¸å¹¶è¡Œç³»ç»Ÿè¿™ä¸¤ä¸ªå®šä¹‰ä¹‹é—´çš„å…³é”®å·®å¼‚åœ¨äºâ€œå­˜åœ¨â€è¿™ä¸ªè¯ã€‚åœ¨å¹¶å‘ç¨‹åºä¸­å¯ä»¥åŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœç¨‹åºåœ¨å•æ ¸å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªçº¿ç¨‹å°†äº¤æ›¿åœ°æ¢å…¥æˆ–è€…æ¢å‡ºå†…å­˜ã€‚è¿™äº›çº¿ç¨‹æ˜¯åŒæ—¶â€œå­˜åœ¨â€çš„â€”â€”æ¯ä¸ªçº¿ç¨‹éƒ½å¤„äºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸ªçŠ¶æ€ã€‚å¦‚æœç¨‹åºèƒ½å¤Ÿå¹¶è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆå°±ä¸€å®šæ˜¯è¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šã€‚æ­¤æ—¶ï¼Œç¨‹åºä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½å°†åˆ†é…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å¤„ç†å™¨æ ¸ä¸Šï¼Œå› æ­¤å¯ä»¥åŒæ—¶è¿è¡Œã€‚æˆ‘ç›¸ä¿¡ä½ å·²ç»èƒ½å¤Ÿå¾—å‡ºç»“è®ºâ€”â€”â€œå¹¶è¡Œâ€æ¦‚å¿µæ˜¯â€œå¹¶å‘â€æ¦‚å¿µçš„ä¸€ä¸ªå­é›†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ç¼–å†™ä¸€ä¸ªæ‹¥æœ‰å¤šä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹çš„å¹¶å‘ç¨‹åºï¼Œä½†å¦‚æœæ²¡æœ‰å¤šæ ¸å¤„ç†å™¨æ¥æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä»¥å¹¶è¡Œæ–¹å¼æ¥è¿è¡Œä»£ç ã€‚å› æ­¤ï¼Œå‡¡æ˜¯åœ¨æ±‚è§£å•ä¸ªé—®é¢˜æ—¶æ¶‰åŠå¤šä¸ªæ‰§è¡Œæµç¨‹çš„ç¼–ç¨‹æ¨¡å¼æˆ–è€…æ‰§è¡Œè¡Œä¸ºï¼Œéƒ½å±äºå¹¶å‘ç¼–ç¨‹çš„èŒƒç•´ã€‚æ‘˜è‡ªï¼šã€Šå¹¶å‘çš„è‰ºæœ¯ã€‹ â€” ã€”ç¾ã€•å¸ƒé›·è°¢æ–¯åœ¨è±†ç“£é˜…è¯»ä¹¦åº—æŸ¥çœ‹ï¼š<span class="exturl" data-url="aHR0cHM6Ly9yZWFkLmRvdWJhbi5jb20vZWJvb2svMTAwMzQ0NTkv" title="https://read.douban.com/ebook/10034459/">https://read.douban.com/ebook/10034459/<i class="fa fa-external-link"></i></span></p>
<p>ä½œè€…ï¼šBeginMan<br>é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzMzNTE1NDgxL2Fuc3dlci8xMDUzNDgwMTk=" title="https://www.zhihu.com/question/33515481/answer/105348019">https://www.zhihu.com/question/33515481/answer/105348019<i class="fa fa-external-link"></i></span><br>æ¥æºï¼šçŸ¥ä¹<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<h2 id="è§‚ç‚¹å››"><a href="#è§‚ç‚¹å››" class="headerlink" title="è§‚ç‚¹å››"></a>è§‚ç‚¹å››</h2><p>å¹¶å‘ï¼šäº¤æ›¿æˆ–è€…åŒæ—¶åšä¸åŒäº‹çš„èƒ½åŠ›<br>å¹¶è¡Œï¼šåŒæ—¶åšä¸åŒäº‹çš„èƒ½åŠ›</p>
<p>è¡Œè¯è§£é‡Šï¼š<br>å¹¶å‘ï¼šä¸åŒä»£ç å—äº¤æ›¿æˆ–è€…åŒæ—¶æ‰§è¡Œçš„æ€§èƒ½<br>å¹¶è¡Œï¼šä¸åŒä»£ç å—åŒæ—¶æ‰§è¡Œçš„æ€§èƒ½</p>
<h2 id="è§‚ç‚¹äº”"><a href="#è§‚ç‚¹äº”" class="headerlink" title="è§‚ç‚¹äº”"></a>è§‚ç‚¹äº”</h2><p>ä½œè€…ï¼šæè¿å<br>é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzMzNTE1NDgxL2Fuc3dlci8xMjEwNTA1Mzk=" title="https://www.zhihu.com/question/33515481/answer/121050539">https://www.zhihu.com/question/33515481/answer/121050539<i class="fa fa-external-link"></i></span><br>æ¥æºï¼šçŸ¥ä¹<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>è¯¦ç»†è¯·å‚è€ƒï¼š  <span class="exturl" data-url="aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHAlM0EvL3R1dG9yaWFscy5qZW5rb3YuY29tL2phdmEtY29uY3VycmVuY3kvY29uY3VycmVuY3ktdnMtcGFyYWxsZWxpc20uaHRtbA==" title="https://link.zhihu.com/?target=http%3A//tutorials.jenkov.com/java-concurrency/concurrency-vs-parallelism.html">Concurrency vs. Parallelism<i class="fa fa-external-link"></i></span><br>Concurrency<br><img src="http://ou3xxg3hg.bkt.clouddn.com/å¹¶è¡Œ2.jpg" alt=""><br>å¹¶å‘çš„åä¹‰è¯æ˜¯é¡ºåºï¼Œconcurrency vs sequentialï¼Œä¾‹å¦‚ï¼š</p>
<h2 id="é¡ºåºå¤„ç†ï¼š"><a href="#é¡ºåºå¤„ç†ï¼š" class="headerlink" title="é¡ºåºå¤„ç†ï¼š"></a>é¡ºåºå¤„ç†ï¼š</h2><p>ä½ é™ªå¥³æœ‹å‹å…ˆçœ‹ç”µå½±ï¼ˆTask1ï¼‰ï¼Œçœ‹å®Œåé™ªå¥³æœ‹å‹åˆ°èŠ±åº—ä¹°äº†ä¸€æŸèŠ±ï¼ˆTask2ï¼‰ï¼Œç„¶åé™ªå¥³æœ‹å‹å»è¥¿é¤å…åƒçƒ›å…‰æ™šé¤ï¼ˆTask3ï¼‰ï¼Œè¿™å°±æ˜¯â€œé¡ºåºå¤„ç†â€ï¼Œå› ä¸ºæ•´ä¸ªè¿‡ç¨‹ä¸­åªæœ‰ä½ è¿™ä¸€ä¸ªå¤„ç†å™¨ï¼Œäº‹æƒ…åªèƒ½ä¸€ä»¶ä¸€ä»¶çš„åšï¼ˆè¦ä¹ˆæ˜¯ä½ äº²è‡ªåšï¼Œè¦ä¹ˆä½ è¦ç­‰åˆ«äººåšï¼‰ã€‚Task1ä½ è¦èŠ±2å°æ—¶ï¼ŒTask2ç­‰èŠ±åšå¥½ä½ è¦èŠ±30åˆ†é’Ÿï¼ŒTask3ç­‰èœåšå¥½è¦30åˆ†é’Ÿï¼Œä»ä½ å¼€å§‹çœ‹ç”µå½±åˆ°å¼€å§‹åƒé¥­ï¼Œå…¨ç¨‹éœ€è¦3å°æ—¶ï¼ˆå‡è®¾èµ°è·¯ä¸ç®—æ—¶é—´ï¼‰ã€‚</p>
<h2 id="å¹¶å‘å¤„ç†ï¼š"><a href="#å¹¶å‘å¤„ç†ï¼š" class="headerlink" title="å¹¶å‘å¤„ç†ï¼š"></a>å¹¶å‘å¤„ç†ï¼š</h2><p>ä½ é™ªå¥³æœ‹å‹å…ˆçœ‹ç”µå½±ï¼ˆTask1ï¼‰ï¼ŒåŒæ—¶æ‰“ç”µè¯ç»™èŠ±åº—é¢„å®šä¸€æŸèŠ±ï¼ŒèŠ±åº—å®‰æ’äººå‘˜åœ¨20ï¼š00é€åˆ°è¥¿é¤å…ï¼ˆTask2ï¼‰ï¼›åŒæ—¶ä½ æ‰“ç”µè¯ç»™è¥¿é¤å®šé¢„å®š20ï¼š00çš„æµªæ¼«çƒ›å…‰æ™šé¤ï¼Œè¥¿é¤å…å¼€å§‹ç»™ä½ å‡†å¤‡æ™šé¤ï¼ˆTask3ï¼‰ï¼›ç­‰åˆ°ä½ ç”µå½±çœ‹å®Œè·‘åˆ°è¥¿é¤å…ï¼ŒèŠ±ä¹Ÿé€åˆ°äº†ï¼Œæ™šé¤ä¹Ÿå‡†å¤‡å¥½äº†ï¼Œä½ è·‘è¿‡å»ç›´æ¥çŒ®èŠ±åƒé¥­ç„¶åå¼€æˆ¿å³å¯ï¼Œè¿™å°±æ˜¯å¹¶å‘å¤„ç†ã€‚Task1è¿˜æ˜¯2å°æ—¶ï¼Œä½†Task2å’ŒTask3ä¹Ÿåœ¨è¿™2å°æ—¶å®Œæˆäº†ï¼Œä»ä½ å¼€å§‹çœ‹ç”µå½±åˆ°å¼€å§‹åƒé¥­ï¼Œå…¨ç¨‹åªéœ€è¦2å°æ—¶ï¼Œ3ä¸ªä»»åŠ¡æ˜¯å¹¶å‘å®Œæˆçš„ã€‚ç§˜è¯€å°±æ˜¯æœ‰3ä¸ªå¤„ç†å™¨äº†ï¼šä½ ã€èŠ±åº—ã€é¤å…åœ¨åŒä¸€ä¸ªæ—¶é—´æ®µå†…éƒ½åœ¨åšå„è‡ªçš„ä»»åŠ¡ã€‚Parallelism<br><img src="http://ou3xxg3hg.bkt.clouddn.com/å¹¶è¡Œ3.jpg" alt=""><br>å¹¶è¡Œçš„åä¹‰è¯æ˜¯ä¸²è¡Œï¼ŒParallelism vs Serialï¼Œæ¯”å¦‚è¯´ç»™ä½ ä¸€ä¸ª100ä¸‡çš„æ•´å½¢æ•°ç»„ï¼ŒæŒ‘å‡ºå…¶ä¸­æœ€å°çš„å€¼ã€‚</p>
<h2 id="ä¸²è¡Œå¤„ç†"><a href="#ä¸²è¡Œå¤„ç†" class="headerlink" title="ä¸²è¡Œå¤„ç†"></a>ä¸²è¡Œå¤„ç†</h2><p>ä»æ•°ç»„çš„ç¬¬ä¸€ä¸ªå¼€å§‹æ‰«æåˆ°æœ€åä¸€ä¸ªï¼Œç±»ä¼¼å†’æ³¡æ’åºä¸€æ ·</p>
<h2 id="å¹¶è¡Œå¤„ç†"><a href="#å¹¶è¡Œå¤„ç†" class="headerlink" title="å¹¶è¡Œå¤„ç†"></a>å¹¶è¡Œå¤„ç†</h2><p>å°†æ•°ç»„åˆ†ä¸º10ç»„ï¼Œæ¯ç»„10ä¸‡ä¸ªæ•´å½¢ï¼ŒåŒæ—¶æ‰«æ10ç»„å¾—åˆ°10ä¸ªæ•°å€¼ï¼Œç„¶åå†å°†è¿™10ä¸ªæ•°å€¼æ’åˆ—ä¸€ä¸‹ã€‚ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œä¸²è¡Œæ”¹ä¸ºå¹¶è¡Œå…¶å®å¹¶ä¸é‚£ä¹ˆç®€å•ï¼Œæ¶‰åŠåˆ°ä»»åŠ¡åˆ†è§£ï¼ˆæœ‰å…ˆåä¾èµ–çš„ä»»åŠ¡å°±ä¸èƒ½åšåˆ°å¹¶è¡Œï¼‰ã€ä»»åŠ¡è¿è¡Œï¼ˆå¯èƒ½è¦è€ƒè™‘äº’æ–¥ã€é”ã€å…±äº«ç­‰ï¼‰ã€ç»“æœåˆå¹¶ã€‚ä»¥Javaçš„å¹¶è¡Œåƒåœ¾å›æ”¶å™¨Parallelä¸ºä¾‹ï¼Œæ ‡è®°é˜¶æ®µã€å›æ”¶é˜¶æ®µå„è‡ªå¯ä»¥å¤šçº¿ç¨‹å¹¶è¡Œï¼Œä½†ä¸èƒ½å°†å›æ”¶é˜¶æ®µå’Œæ ‡è®°é˜¶æ®µä¸€èµ·å¹¶è¡Œï¼Œå› ä¸ºå›æ”¶é˜¶æ®µçš„å¤„ç†ä¾èµ–æ ‡è®°é˜¶æ®µçš„ç»“æœã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaå®ç°ä¹ä¹ä¹˜æ³•è¡¨]]></title>
      <url>/Java%E5%AE%9E%E7%8E%B0%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95%E8%A1%A8.html</url>
      <content type="html"><![CDATA[<p>å…³é”®éš¾ç‚¹ï¼šå†…å¾ªç¯çš„æ¡ä»¶åˆ¤æ–­<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ä¹ä¹ä¹˜æ³•è¡¨</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ;i&lt;=<span class="number">9</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>;j&lt;=i;j++)&#123;</span><br><span class="line">                System.out.print(j+<span class="string">"*"</span>+i+<span class="string">"="</span>+j*i+<span class="string">" "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>è¾“å‡ºç»“æœï¼š<br><img src="http://ou3xxg3hg.bkt.clouddn.com/ä¹ä¹ä¹˜æ³•è¡¨.jpg" alt=""></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[javaä¸­å†…å­˜åˆ†é…ç­–ç•¥åŠå †å’Œæ ˆçš„æ¯”è¾ƒ]]></title>
      <url>/java%E4%B8%AD%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5%E5%8F%8A%E5%A0%86%E5%92%8C%E6%A0%88%E7%9A%84%E6%AF%94%E8%BE%83.html</url>
      <content type="html"><![CDATA[<h2 id="å†…å­˜åˆ†é…ç­–ç•¥"><a href="#å†…å­˜åˆ†é…ç­–ç•¥" class="headerlink" title="å†…å­˜åˆ†é…ç­–ç•¥"></a>å†…å­˜åˆ†é…ç­–ç•¥</h2><p>æŒ‰ç…§ç¼–è¯‘åŸç†çš„è§‚ç‚¹,ç¨‹åºè¿è¡Œæ—¶çš„å†…å­˜åˆ†é…æœ‰ä¸‰ç§ç­–ç•¥,åˆ†åˆ«æ˜¯é™æ€çš„,æ ˆå¼çš„,å’Œå †å¼çš„.<br>é™æ€å­˜å‚¨åˆ†é…æ˜¯æŒ‡åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¯ä¸ªæ•°æ®ç›®æ ‡åœ¨è¿è¡Œæ—¶åˆ»çš„å­˜å‚¨ç©ºé—´éœ€æ±‚,å› è€Œåœ¨ç¼–è¯‘æ—¶å°±å¯ä»¥ç»™ä»–ä»¬åˆ†é…å›ºå®šçš„å†…å­˜ç©ºé—´.è¿™ç§åˆ†é…ç­–ç•¥è¦æ±‚ç¨‹åºä»£ç ä¸­ä¸å…è®¸æœ‰å¯å˜æ•°æ®ç»“æ„(æ¯”å¦‚å¯å˜æ•°ç»„)çš„å­˜åœ¨,ä¹Ÿä¸å…è®¸æœ‰åµŒå¥—æˆ–è€…é€’å½’çš„ç»“æ„å‡ºç°,å› ä¸ºå®ƒä»¬éƒ½ä¼šå¯¼è‡´ç¼–è¯‘ç¨‹åºæ— æ³•è®¡ç®—å‡†ç¡®çš„å­˜å‚¨ç©ºé—´éœ€æ±‚.<br>æ ˆå¼å­˜å‚¨åˆ†é…ä¹Ÿå¯ç§°ä¸ºåŠ¨æ€å­˜å‚¨åˆ†é…,æ˜¯ç”±ä¸€ä¸ªç±»ä¼¼äºå †æ ˆçš„è¿è¡Œæ ˆæ¥å®ç°çš„.å’Œé™æ€å­˜å‚¨åˆ†é…ç›¸å,åœ¨æ ˆå¼å­˜å‚¨æ–¹æ¡ˆä¸­,ç¨‹åºå¯¹æ•°æ®åŒºçš„éœ€æ±‚åœ¨ç¼–è¯‘æ—¶æ˜¯å®Œå…¨æœªçŸ¥çš„,åªæœ‰åˆ°è¿è¡Œçš„æ—¶å€™æ‰èƒ½å¤ŸçŸ¥é“,ä½†æ˜¯è§„å®šåœ¨è¿è¡Œä¸­è¿›å…¥ä¸€ä¸ªç¨‹åºæ¨¡å—æ—¶,å¿…é¡»çŸ¥é“è¯¥ç¨‹åºæ¨¡å—æ‰€éœ€çš„æ•°æ®åŒºå¤§å°æ‰èƒ½å¤Ÿä¸ºå…¶åˆ†é…å†…å­˜.å’Œæˆ‘ä»¬åœ¨æ•°æ®ç»“æ„æ‰€ç†ŸçŸ¥çš„æ ˆä¸€æ ·,æ ˆå¼å­˜å‚¨åˆ†é…æŒ‰ç…§å…ˆè¿›åå‡ºçš„åŸåˆ™è¿›è¡Œåˆ†é…ã€‚<br>é™æ€å­˜å‚¨åˆ†é…è¦æ±‚åœ¨ç¼–è¯‘æ—¶èƒ½çŸ¥é“æ‰€æœ‰å˜é‡çš„å­˜å‚¨è¦æ±‚,æ ˆå¼å­˜å‚¨åˆ†é…è¦æ±‚åœ¨è¿‡ç¨‹çš„å…¥å£å¤„å¿…é¡»çŸ¥é“æ‰€æœ‰çš„å­˜å‚¨è¦æ±‚,è€Œå †å¼å­˜å‚¨åˆ†é…åˆ™ä¸“é—¨è´Ÿè´£åœ¨ç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶æ¨¡å—å…¥å£å¤„éƒ½æ— æ³•ç¡®å®šå­˜å‚¨è¦æ±‚çš„æ•°æ®ç»“æ„çš„å†…å­˜åˆ†é…,æ¯”å¦‚å¯å˜é•¿åº¦ä¸²å’Œå¯¹è±¡å®ä¾‹.å †ç”±å¤§ç‰‡çš„å¯åˆ©ç”¨å—æˆ–ç©ºé—²å—ç»„æˆ,å †ä¸­çš„å†…å­˜å¯ä»¥æŒ‰ç…§ä»»æ„é¡ºåºåˆ†é…å’Œé‡Šæ”¾.<br><a id="more"></a></p>
<h2 id="å †å’Œæ ˆçš„æ¯”è¾ƒ"><a href="#å †å’Œæ ˆçš„æ¯”è¾ƒ" class="headerlink" title="å †å’Œæ ˆçš„æ¯”è¾ƒ"></a>å †å’Œæ ˆçš„æ¯”è¾ƒ</h2><p>ä¸Šé¢çš„å®šä¹‰ä»ç¼–è¯‘åŸç†çš„æ•™æä¸­æ€»ç»“è€Œæ¥,é™¤é™æ€å­˜å‚¨åˆ†é…ä¹‹å¤–,éƒ½æ˜¾å¾—å¾ˆå‘†æ¿å’Œéš¾ä»¥ç†è§£,ä¸‹é¢æ’‡å¼€é™æ€å­˜å‚¨åˆ†é…,é›†ä¸­æ¯”è¾ƒå †å’Œæ ˆ:<br>ä»å †å’Œæ ˆçš„åŠŸèƒ½å’Œä½œç”¨æ¥é€šä¿—çš„æ¯”è¾ƒ,å †ä¸»è¦ç”¨æ¥å­˜æ”¾å¯¹è±¡çš„ï¼Œæ ˆä¸»è¦æ˜¯ç”¨æ¥æ‰§è¡Œç¨‹åºçš„.è€Œè¿™ç§ä¸åŒåˆä¸»è¦æ˜¯ç”±äºå †å’Œæ ˆçš„ç‰¹ç‚¹å†³å®šçš„:<br>åœ¨ç¼–ç¨‹ä¸­ï¼Œä¾‹å¦‚C/C++ä¸­ï¼Œæ‰€æœ‰çš„æ–¹æ³•è°ƒç”¨éƒ½æ˜¯é€šè¿‡æ ˆæ¥è¿›è¡Œçš„,æ‰€æœ‰çš„å±€éƒ¨å˜é‡,å½¢å¼å‚æ•°éƒ½æ˜¯ä»æ ˆä¸­åˆ†é…å†…å­˜ç©ºé—´çš„ã€‚å®é™…ä¸Šä¹Ÿä¸æ˜¯ä»€ä¹ˆåˆ†é…,åªæ˜¯ä»æ ˆé¡¶å‘ä¸Šç”¨å°±è¡Œ,å°±å¥½åƒå·¥å‚ä¸­çš„ä¼ é€å¸¦(conveyor belt)ä¸€æ ·,Stack Pointerä¼šè‡ªåŠ¨æŒ‡å¼•ä½ åˆ°æ”¾ä¸œè¥¿çš„ä½ç½®,ä½ æ‰€è¦åšçš„åªæ˜¯æŠŠä¸œè¥¿æ”¾ä¸‹æ¥å°±è¡Œ.é€€å‡ºå‡½æ•°çš„æ—¶å€™ï¼Œä¿®æ”¹æ ˆæŒ‡é’ˆå°±å¯ä»¥æŠŠæ ˆä¸­çš„å†…å®¹é”€æ¯.è¿™æ ·çš„æ¨¡å¼é€Ÿåº¦æœ€å¿«, å½“ç„¶è¦ç”¨æ¥è¿è¡Œç¨‹åºäº†.éœ€è¦æ³¨æ„çš„æ˜¯,åœ¨åˆ†é…çš„æ—¶å€™,æ¯”å¦‚ä¸ºä¸€ä¸ªå³å°†è¦è°ƒç”¨çš„ç¨‹åºæ¨¡å—åˆ†é…æ•°æ®åŒºæ—¶,åº”äº‹å…ˆçŸ¥é“è¿™ä¸ªæ•°æ®åŒºçš„å¤§å°,ä¹Ÿå°±è¯´æ˜¯è™½ç„¶åˆ†é…æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶è¿›è¡Œçš„,ä½†æ˜¯åˆ†é…çš„å¤§å°å¤šå°‘æ˜¯ç¡®å®šçš„,ä¸å˜çš„,è€Œè¿™ä¸ªâ€å¤§å°å¤šå°‘â€æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šçš„,ä¸æ˜¯åœ¨è¿è¡Œæ—¶.<br>å †æ˜¯åº”ç”¨ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™è¯·æ±‚æ“ä½œç³»ç»Ÿåˆ†é…ç»™è‡ªå·±å†…å­˜ï¼Œç”±äºä»æ“ä½œç³»ç»Ÿç®¡ç†çš„å†…å­˜åˆ†é…,æ‰€ä»¥åœ¨åˆ†é…å’Œé”€æ¯æ—¶éƒ½è¦å ç”¨æ—¶é—´ï¼Œå› æ­¤ç”¨å †çš„æ•ˆç‡éå¸¸ä½.ä½†æ˜¯å †çš„ä¼˜ç‚¹åœ¨äº,ç¼–è¯‘å™¨ä¸å¿…çŸ¥é“è¦ä»å †é‡Œåˆ†é…å¤šå°‘å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿä¸å¿…çŸ¥é“å­˜å‚¨çš„æ•°æ®è¦åœ¨å †é‡Œåœç•™å¤šé•¿çš„æ—¶é—´,å› æ­¤,ç”¨å †ä¿å­˜æ•°æ®æ—¶ä¼šå¾—åˆ°æ›´å¤§çš„çµæ´»æ€§ã€‚äº‹å®ä¸Š,é¢å‘å¯¹è±¡çš„å¤šæ€æ€§,å †å†…å­˜åˆ†é…æ˜¯å¿…ä¸å¯å°‘çš„,å› ä¸ºå¤šæ€å˜é‡æ‰€éœ€çš„å­˜å‚¨ç©ºé—´åªæœ‰åœ¨è¿è¡Œæ—¶åˆ›å»ºäº†å¯¹è±¡ä¹‹åæ‰èƒ½ç¡®å®š.åœ¨C++ä¸­ï¼Œè¦æ±‚åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œåªéœ€ç”¨ newå‘½ä»¤ç¼–åˆ¶ç›¸å…³çš„ä»£ç å³å¯ã€‚æ‰§è¡Œè¿™äº›ä»£ç æ—¶ï¼Œä¼šåœ¨å †é‡Œè‡ªåŠ¨è¿›è¡Œæ•°æ®çš„ä¿å­˜.å½“ç„¶ï¼Œä¸ºè¾¾åˆ°è¿™ç§çµæ´»æ€§ï¼Œå¿…ç„¶ä¼šä»˜å‡ºä¸€å®šçš„ä»£ä»·:åœ¨å †é‡Œåˆ†é…å­˜å‚¨ç©ºé—´æ—¶ä¼šèŠ±æ‰æ›´é•¿çš„æ—¶é—´ï¼è¿™ä¹Ÿæ­£æ˜¯å¯¼è‡´æˆ‘ä»¬åˆšæ‰æ‰€è¯´çš„æ•ˆç‡ä½çš„åŸå› ,çœ‹æ¥åˆ—å®åŒå¿—è¯´çš„å¥½,äººçš„ä¼˜ç‚¹å¾€å¾€ä¹Ÿæ˜¯äººçš„ç¼ºç‚¹,äººçš„ç¼ºç‚¹å¾€å¾€ä¹Ÿæ˜¯äººçš„ä¼˜ç‚¹(æ™•~). </p>
<h2 id="JVMä¸­çš„å †å’Œæ ˆ"><a href="#JVMä¸­çš„å †å’Œæ ˆ" class="headerlink" title="JVMä¸­çš„å †å’Œæ ˆ"></a>JVMä¸­çš„å †å’Œæ ˆ</h2><p>JVMæ˜¯åŸºäºå †æ ˆçš„è™šæ‹Ÿæœº.JVMä¸ºæ¯ä¸ªæ–°åˆ›å»ºçš„çº¿ç¨‹éƒ½åˆ†é…ä¸€ä¸ªå †æ ˆ.ä¹Ÿå°±æ˜¯è¯´,å¯¹äºä¸€ä¸ªJavaç¨‹åºæ¥è¯´ï¼Œå®ƒçš„è¿è¡Œå°±æ˜¯é€šè¿‡å¯¹å †æ ˆçš„æ“ä½œæ¥å®Œæˆçš„ã€‚å †æ ˆä»¥å¸§ä¸ºå•ä½ä¿å­˜çº¿ç¨‹çš„çŠ¶æ€ã€‚JVMå¯¹å †æ ˆåªè¿›è¡Œä¸¤ç§æ“ä½œ:ä»¥å¸§ä¸ºå•ä½çš„å‹æ ˆå’Œå‡ºæ ˆæ“ä½œã€‚<br>æˆ‘ä»¬çŸ¥é“,æŸä¸ªçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•ç§°ä¸ºæ­¤çº¿ç¨‹çš„å½“å‰æ–¹æ³•.æˆ‘ä»¬å¯èƒ½ä¸çŸ¥é“,å½“å‰æ–¹æ³•ä½¿ç”¨çš„å¸§ç§°ä¸ºå½“å‰å¸§ã€‚å½“çº¿ç¨‹æ¿€æ´»ä¸€ä¸ªJavaæ–¹æ³•,JVMå°±ä¼šåœ¨çº¿ç¨‹çš„ Javaå †æ ˆé‡Œæ–°å‹å…¥ä¸€ä¸ªå¸§ã€‚è¿™ä¸ªå¸§è‡ªç„¶æˆä¸ºäº†å½“å‰å¸§.åœ¨æ­¤æ–¹æ³•æ‰§è¡ŒæœŸé—´,è¿™ä¸ªå¸§å°†ç”¨æ¥ä¿å­˜å‚æ•°,å±€éƒ¨å˜é‡,ä¸­é—´è®¡ç®—è¿‡ç¨‹å’Œå…¶ä»–æ•°æ®.è¿™ä¸ªå¸§åœ¨è¿™é‡Œå’Œç¼–è¯‘åŸç†ä¸­çš„æ´»åŠ¨çºªå½•çš„æ¦‚å¿µæ˜¯å·®ä¸å¤šçš„.<br>ä»Javaçš„è¿™ç§åˆ†é…æœºåˆ¶æ¥çœ‹,å †æ ˆåˆå¯ä»¥è¿™æ ·ç†è§£:å †æ ˆ(Stack)æ˜¯æ“ä½œç³»ç»Ÿåœ¨å»ºç«‹æŸä¸ªè¿›ç¨‹æ—¶æˆ–è€…çº¿ç¨‹(åœ¨æ”¯æŒå¤šçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­æ˜¯çº¿ç¨‹)ä¸ºè¿™ä¸ªçº¿ç¨‹å»ºç«‹çš„å­˜å‚¨åŒºåŸŸï¼Œè¯¥åŒºåŸŸå…·æœ‰å…ˆè¿›åå‡ºçš„ç‰¹æ€§ã€‚<br>ä¸ªJavaåº”ç”¨éƒ½å”¯ä¸€å¯¹åº”ä¸€ä¸ªJVMå®ä¾‹ï¼Œæ¯ä¸€ä¸ªå®ä¾‹å”¯ä¸€å¯¹åº”ä¸€ä¸ªå †ã€‚åº”ç”¨ç¨‹åºåœ¨è¿è¡Œä¸­æ‰€åˆ›å»ºçš„æ‰€æœ‰ç±»å®ä¾‹æˆ–æ•°ç»„éƒ½æ”¾åœ¨è¿™ä¸ªå †ä¸­,å¹¶ç”±åº”ç”¨æ‰€æœ‰çš„çº¿ç¨‹å…±äº«.è·ŸC/C++ä¸åŒï¼ŒJavaä¸­åˆ†é…å †å†…å­˜æ˜¯è‡ªåŠ¨åˆå§‹åŒ–çš„ã€‚Javaä¸­æ‰€æœ‰å¯¹è±¡çš„å­˜å‚¨ç©ºé—´éƒ½æ˜¯åœ¨å †ä¸­åˆ†é…çš„ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨å´æ˜¯åœ¨å †æ ˆä¸­åˆ†é…,ä¹Ÿå°±æ˜¯è¯´åœ¨å»ºç«‹ä¸€ä¸ªå¯¹è±¡æ—¶ä»ä¸¤ä¸ªåœ°æ–¹éƒ½åˆ†é…å†…å­˜ï¼Œåœ¨å †ä¸­åˆ†é…çš„å†…å­˜å®é™…å»ºç«‹è¿™ä¸ªå¯¹è±¡ï¼Œè€Œåœ¨å †æ ˆä¸­åˆ†é…çš„å†…å­˜åªæ˜¯ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªå †å¯¹è±¡çš„æŒ‡é’ˆ(å¼•ç”¨)è€Œå·²ã€‚<br>JVMè¿è¡Œæ—¶ï¼Œå°†å†…å­˜åˆ†ä¸ºå †å’Œæ ˆï¼Œå †ä¸­å­˜æ”¾çš„æ˜¯åˆ›å»ºçš„å¯¹è±¡ï¼ŒJAVAå­—ç¬¦ä¸²å¯¹è±¡å†…å­˜å®ç°æ—¶ï¼Œåœ¨å †ä¸­å¼€è¾Ÿäº†ä¸€å¿«å¾ˆå°çš„å†…å­˜ï¼Œå«å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œç”¨æ¥å­˜æ”¾ç‰¹å®šçš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚<br>å…³äºStringå¯¹è±¡çš„åˆ›å»ºï¼Œä¸¤ç§æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œç¬¬ä¸€ç§ä¸ç”¨newçš„ç®€å•è¯­æ³•ï¼Œå³<br>String s1=â€JAVAâ€;<br>åˆ›å»ºæ­¥éª¤æ˜¯å…ˆçœ‹å¸¸é‡æ± ä¸­æœ‰æ²¡æœ‰ä¸â€JAVAâ€ç›¸åŒçš„çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¦‚æœæœ‰ï¼Œå°†s1æŒ‡å‘è¯¥å¯¹è±¡ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶è®©s1æŒ‡å‘å®ƒã€‚<br>ç¬¬äºŒç§æ˜¯newè¯­æ³•<br>String s2=â€JAVAâ€;<br>è¿™ç§è¯­æ³•æ˜¯åœ¨å †è€Œä¸æ˜¯åœ¨å¸¸é‡æ± ä¸­åˆ›å»ºå¯¹è±¡ï¼Œå¹¶å°†s2æŒ‡å‘å®ƒï¼Œç„¶åå»å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çœ‹çœ‹ï¼Œæ˜¯å¦æœ‰ä¸ä¹‹ç›¸åŒçš„å†…å®¹çš„å¯¹è±¡ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å°†newå‡ºæ¥çš„å­—ç¬¦ä¸²å¯¹è±¡ä¸å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„å¯¹è±¡è”ç³»èµ·æ¥ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å†åˆ›å»ºä¸€ä¸ªåŒ…å«è¯¥å†…å®¹çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¹¶å°†å †å†…å­˜ä¸­çš„å¯¹è±¡ä¸å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ–°å»ºå‡ºæ¥çš„å¯¹è±¡è”ç³»èµ·æ¥ã€‚<br>è¿™å°±æ˜¯å­—ç¬¦ä¸²çš„ä¸€æ¬¡æŠ•å…¥ï¼Œç»ˆç”Ÿå›æŠ¥çš„å†…å­˜æœºåˆ¶ï¼Œå¯¹å­—ç¬¦ä¸²çš„æ¯”è¾ƒå¸¦æ¥å¥½å¤„ã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaå†…å­˜æœºåˆ¶å’Œå†…å­˜åœ°å€]]></title>
      <url>/Java%E5%86%85%E5%AD%98%E6%9C%BA%E5%88%B6%E5%92%8C%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80.html</url>
      <content type="html"><![CDATA[<h2 id="é—®é¢˜ä¸€ï¼š"><a href="#é—®é¢˜ä¸€ï¼š" class="headerlink" title="é—®é¢˜ä¸€ï¼š"></a>é—®é¢˜ä¸€ï¼š</h2><p>String str1 = â€œabcâ€;<br>String str2 = â€œabcâ€;<br>System.out.println(str1==str2); //true </p>
<h2 id="é—®é¢˜äºŒï¼š"><a href="#é—®é¢˜äºŒï¼š" class="headerlink" title="é—®é¢˜äºŒï¼š"></a>é—®é¢˜äºŒï¼š</h2><p>String str1 =new String (â€œabcâ€);<br>String str2 =new String (â€œabcâ€);<br>System.out.println(str1==str2); // false </p>
<h2 id="é—®é¢˜ä¸‰ï¼š"><a href="#é—®é¢˜ä¸‰ï¼š" class="headerlink" title="é—®é¢˜ä¸‰ï¼š"></a>é—®é¢˜ä¸‰ï¼š</h2><p>String s1 = â€œjaâ€;<br>String s2 = â€œvaâ€;<br>String s3 = â€œjavaâ€;<br>String s4 = s1 + s2;<br>System.out.println(s3 == s4);//false<br>System.out.println(s3.equals(s4));//true<br>ç”±äºä»¥ä¸Šé—®é¢˜è®©æˆ‘å«ç³Šä¸æ¸…ï¼Œäºæ˜¯ç‰¹åœ°æœé›†äº†ä¸€äº›æœ‰å…³javaå†…å­˜åˆ†é…çš„èµ„æ–™,ä»¥ä¸‹æ˜¯ç½‘æ‘˜ï¼š<br><a id="more"></a></p>
<h2 id="Java-ä¸­çš„å †å’Œæ ˆ"><a href="#Java-ä¸­çš„å †å’Œæ ˆ" class="headerlink" title="Java ä¸­çš„å †å’Œæ ˆ"></a>Java ä¸­çš„å †å’Œæ ˆ</h2><p>JavaæŠŠå†…å­˜åˆ’åˆ†æˆä¸¤ç§ï¼šä¸€ç§æ˜¯æ ˆå†…å­˜ï¼Œä¸€ç§æ˜¯å †å†…å­˜ã€‚<br>åœ¨å‡½æ•°ä¸­å®šä¹‰çš„ä¸€äº›åŸºæœ¬ç±»å‹çš„å˜é‡å’Œå¯¹è±¡çš„å¼•ç”¨å˜é‡éƒ½åœ¨å‡½æ•°çš„æ ˆå†…å­˜ä¸­åˆ†é…ã€‚<br>å½“åœ¨ä¸€æ®µä»£ç å—å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶ï¼ŒJavaå°±åœ¨æ ˆä¸­ä¸ºè¿™ä¸ªå˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå½“è¶…è¿‡å˜é‡çš„ä½œç”¨åŸŸåï¼ŒJavaä¼šè‡ªåŠ¨é‡Šæ”¾æ‰ä¸ºè¯¥å˜é‡æ‰€åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œè¯¥å†…å­˜ç©ºé—´å¯ä»¥ç«‹å³è¢«å¦ä½œä»–ç”¨ã€‚<br>å †å†…å­˜ç”¨æ¥å­˜æ”¾ç”±newåˆ›å»ºçš„å¯¹è±¡å’Œæ•°ç»„ã€‚<br>åœ¨å †ä¸­åˆ†é…çš„å†…å­˜ï¼Œç”±Javaè™šæ‹Ÿæœºçš„è‡ªåŠ¨åƒåœ¾å›æ”¶å™¨æ¥ç®¡ç†ã€‚<br>åœ¨å †ä¸­äº§ç”Ÿäº†ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡åï¼Œè¿˜å¯ä»¥åœ¨æ ˆä¸­å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œè®©æ ˆä¸­è¿™ä¸ªå˜é‡çš„å–å€¼ç­‰äºæ•°ç»„æˆ–å¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„é¦–åœ°å€ï¼Œæ ˆä¸­çš„è¿™ä¸ªå˜é‡å°±æˆäº†æ•°ç»„æˆ–å¯¹è±¡çš„å¼•ç”¨å˜é‡ã€‚<br>å¼•ç”¨å˜é‡å°±ç›¸å½“äºæ˜¯ä¸ºæ•°ç»„æˆ–å¯¹è±¡èµ·çš„ä¸€ä¸ªåç§°ï¼Œä»¥åå°±å¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨æ ˆä¸­çš„å¼•ç”¨å˜é‡æ¥è®¿é—®å †ä¸­çš„æ•°ç»„æˆ–å¯¹è±¡ã€‚ </p>
<h2 id="å…·ä½“çš„è¯´ï¼š"><a href="#å…·ä½“çš„è¯´ï¼š" class="headerlink" title="å…·ä½“çš„è¯´ï¼š"></a>å…·ä½“çš„è¯´ï¼š</h2><p>æ ˆä¸å †éƒ½æ˜¯Javaç”¨æ¥åœ¨Ramä¸­å­˜æ”¾æ•°æ®çš„åœ°æ–¹ã€‚ä¸C++ä¸åŒï¼ŒJavaè‡ªåŠ¨ç®¡ç†æ ˆå’Œå †ï¼Œç¨‹åºå‘˜ä¸èƒ½ç›´æ¥åœ°è®¾ç½®æ ˆæˆ–å †ã€‚<br>Javaçš„å †æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶æ•°æ®åŒº,ç±»çš„(å¯¹è±¡ä»ä¸­åˆ†é…ç©ºé—´ã€‚è¿™äº›å¯¹è±¡é€šè¿‡newã€newarrayã€anewarrayå’Œmultianewarrayç­‰æŒ‡ä»¤å»ºç«‹ï¼Œå®ƒä»¬ä¸éœ€è¦ç¨‹åºä»£ç æ¥æ˜¾å¼çš„é‡Šæ”¾ã€‚å †æ˜¯ç”±åƒåœ¾å›æ”¶æ¥è´Ÿè´£çš„ï¼Œå †çš„ä¼˜åŠ¿æ˜¯å¯ä»¥åŠ¨æ€åœ°åˆ†é…å†…å­˜å¤§å°ï¼Œç”Ÿå­˜æœŸä¹Ÿä¸å¿…äº‹å…ˆå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ†é…å†…å­˜çš„ï¼ŒJavaçš„åƒåœ¾æ”¶é›†å™¨ä¼šè‡ªåŠ¨æ”¶èµ°è¿™äº›ä¸å†ä½¿ç”¨çš„æ•°æ®ã€‚ä½†ç¼ºç‚¹æ˜¯ï¼Œç”±äºè¦åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ†é…å†…å­˜ï¼Œå­˜å–é€Ÿåº¦è¾ƒæ…¢ã€‚<br>æ ˆçš„ä¼˜åŠ¿æ˜¯ï¼Œå­˜å–é€Ÿåº¦æ¯”å †è¦å¿«ï¼Œä»…æ¬¡äºå¯„å­˜å™¨ï¼Œæ ˆæ•°æ®å¯ä»¥å…±äº«ã€‚ä½†ç¼ºç‚¹æ˜¯ï¼Œå­˜åœ¨æ ˆä¸­çš„æ•°æ®å¤§å°ä¸ç”Ÿå­˜æœŸå¿…é¡»æ˜¯ç¡®å®šçš„ï¼Œç¼ºä¹çµæ´»æ€§ã€‚æ ˆä¸­ä¸»è¦å­˜æ”¾ä¸€äº›åŸºæœ¬ç±»å‹çš„å˜é‡ï¼ˆ,int, short, long, byte, float, double, boolean, charï¼‰å’Œå¯¹è±¡å¥æŸ„ã€‚<br>æ ˆæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ®Šæ€§ï¼Œå°±æ˜¯å­˜åœ¨æ ˆä¸­çš„æ•°æ®å¯ä»¥å…±äº«ã€‚å‡è®¾æˆ‘ä»¬åŒæ—¶å®šä¹‰ï¼š<br>int a = 3;<br>int b = 3ï¼›<br>ç¼–è¯‘å™¨å…ˆå¤„ç†int a = 3ï¼›é¦–å…ˆå®ƒä¼šåœ¨æ ˆä¸­åˆ›å»ºä¸€ä¸ªå˜é‡ä¸ºaçš„å¼•ç”¨ï¼Œç„¶åæŸ¥æ‰¾æ ˆä¸­æ˜¯å¦æœ‰3è¿™ä¸ªå€¼ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±å°†3å­˜æ”¾è¿›æ¥ï¼Œç„¶åå°†aæŒ‡å‘3ã€‚æ¥ç€å¤„ç†int b = 3ï¼›åœ¨åˆ›å»ºå®Œbçš„å¼•ç”¨å˜é‡åï¼Œå› ä¸ºåœ¨æ ˆä¸­å·²ç»æœ‰3è¿™ä¸ªå€¼ï¼Œä¾¿å°†bç›´æ¥æŒ‡å‘3ã€‚è¿™æ ·ï¼Œå°±å‡ºç°äº†aä¸båŒæ—¶å‡æŒ‡å‘3çš„æƒ…å†µã€‚è¿™æ—¶ï¼Œå¦‚æœå†ä»¤a=4ï¼›é‚£ä¹ˆç¼–è¯‘å™¨ä¼šé‡æ–°æœç´¢æ ˆä¸­æ˜¯å¦æœ‰4å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†4å­˜æ”¾è¿›æ¥ï¼Œå¹¶ä»¤aæŒ‡å‘4ï¼›å¦‚æœå·²ç»æœ‰äº†ï¼Œåˆ™ç›´æ¥å°†aæŒ‡å‘è¿™ä¸ªåœ°å€ã€‚å› æ­¤aå€¼çš„æ”¹å˜ä¸ä¼šå½±å“åˆ°bçš„å€¼ã€‚è¦æ³¨æ„è¿™ç§æ•°æ®çš„å…±äº«ä¸ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨åŒæ—¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡çš„è¿™ç§å…±äº«æ˜¯ä¸åŒçš„ï¼Œå› ä¸ºè¿™ç§æƒ…å†µaçš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“åˆ°b, å®ƒæ˜¯ç”±ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œå®ƒæœ‰åˆ©äºèŠ‚çœç©ºé—´ã€‚è€Œä¸€ä¸ªå¯¹è±¡å¼•ç”¨å˜é‡ä¿®æ”¹äº†è¿™ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å˜é‡ã€‚<br>Stringæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„åŒ…è£…ç±»æ•°æ®ã€‚å¯ä»¥ç”¨ï¼š<br>String str = new String(â€œabcâ€);<br>String str = â€œabcâ€;<br>ä¸¤ç§çš„å½¢å¼æ¥åˆ›å»ºï¼Œç¬¬ä¸€ç§æ˜¯ç”¨new()æ¥æ–°å»ºå¯¹è±¡çš„ï¼Œå®ƒä¼šåœ¨å­˜æ”¾äºå †ä¸­ã€‚æ¯è°ƒç”¨ä¸€æ¬¡å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚<br>è€Œç¬¬äºŒç§æ˜¯å…ˆåœ¨æ ˆä¸­åˆ›å»ºä¸€ä¸ªå¯¹Stringç±»çš„å¯¹è±¡å¼•ç”¨å˜é‡strï¼Œç„¶åæŸ¥æ‰¾æ ˆä¸­æœ‰æ²¡æœ‰å­˜æ”¾â€abcâ€ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†â€abcâ€å­˜æ”¾è¿›æ ˆï¼Œå¹¶ä»¤stræŒ‡å‘â€abcâ€ï¼Œå¦‚æœå·²ç»æœ‰â€abcâ€ åˆ™ç›´æ¥ä»¤stræŒ‡å‘â€œabcâ€ã€‚<br>          æ¯”è¾ƒç±»é‡Œé¢çš„æ•°å€¼æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œç”¨equals()æ–¹æ³•ï¼›å½“æµ‹è¯•ä¸¤ä¸ªåŒ…è£…ç±»çš„å¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œç”¨==ï¼Œä¸‹é¢ç”¨ä¾‹å­è¯´æ˜ä¸Šé¢çš„ç†è®ºã€‚ </p>
<h2 id="æ–¹å¼ä¸€ï¼š"><a href="#æ–¹å¼ä¸€ï¼š" class="headerlink" title="æ–¹å¼ä¸€ï¼š"></a>æ–¹å¼ä¸€ï¼š</h2><p>String str1 = â€œabcâ€;<br>String str2 = â€œabcâ€;<br>System.out.println(str1==str2); //true<br>å¯ä»¥çœ‹å‡ºstr1å’Œstr2æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡çš„ã€‚ </p>
<h2 id="æ–¹å¼äºŒï¼š"><a href="#æ–¹å¼äºŒï¼š" class="headerlink" title="æ–¹å¼äºŒï¼š"></a>æ–¹å¼äºŒï¼š</h2><p>String str1 =new String (â€œabcâ€);<br>String str2 =new String (â€œabcâ€);<br>System.out.println(str1==str2); // false<br>ç”¨newçš„æ–¹å¼æ˜¯ç”Ÿæˆä¸åŒçš„å¯¹è±¡ã€‚æ¯ä¸€æ¬¡ç”Ÿæˆä¸€ä¸ªã€‚<br>å› æ­¤ç”¨ç¬¬ä¸€ç§æ–¹å¼åˆ›å»ºå¤šä¸ªâ€abcâ€å­—ç¬¦ä¸²,åœ¨å†…å­˜ä¸­å…¶å®åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡è€Œå·². è¿™ç§å†™æ³•æœ‰åˆ©ä¸èŠ‚çœå†…å­˜ç©ºé—´. åŒæ—¶å®ƒå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ï¼Œå› ä¸ºJVMä¼šè‡ªåŠ¨æ ¹æ®æ ˆä¸­æ•°æ®çš„å®é™…æƒ…å†µæ¥å†³å®šæ˜¯å¦æœ‰å¿…è¦åˆ›å»ºæ–°å¯¹è±¡ã€‚è€Œå¯¹äºString str = new String(â€œabcâ€)ï¼›çš„ä»£ç ï¼Œåˆ™ä¸€æ¦‚åœ¨å †ä¸­åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œä¸ç®¡å…¶å­—ç¬¦ä¸²å€¼æ˜¯å¦ç›¸ç­‰ï¼Œæ˜¯å¦æœ‰å¿…è¦åˆ›å»ºæ–°å¯¹è±¡ï¼Œä»è€ŒåŠ é‡äº†ç¨‹åºçš„è´Ÿæ‹…ã€‚<br>å¦ä¸€æ–¹é¢, è¦æ³¨æ„: æˆ‘ä»¬åœ¨ä½¿ç”¨è¯¸å¦‚String str = â€œabcâ€ï¼›çš„æ ¼å¼å®šä¹‰ç±»æ—¶ï¼Œæ€»æ˜¯æƒ³å½“ç„¶åœ°è®¤ä¸ºï¼Œåˆ›å»ºäº†Stringç±»çš„å¯¹è±¡strã€‚æ‹…å¿ƒé™·é˜±ï¼å¯¹è±¡å¯èƒ½å¹¶æ²¡æœ‰è¢«åˆ›å»ºï¼è€Œå¯èƒ½åªæ˜¯æŒ‡å‘ä¸€ä¸ªå…ˆå‰å·²ç»åˆ›å»ºçš„å¯¹è±¡ã€‚åªæœ‰é€šè¿‡new()æ–¹æ³•æ‰èƒ½ä¿è¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ç”±äºStringç±»çš„immutableæ€§è´¨ï¼Œå½“Stringå˜é‡éœ€è¦ç»å¸¸å˜æ¢å…¶å€¼æ—¶ï¼Œåº”è¯¥è€ƒè™‘ä½¿ç”¨StringBufferç±»ï¼Œä»¥æé«˜ç¨‹åºæ•ˆç‡ã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaè¯­è¨€åŸºç¡€]]></title>
      <url>/Java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80.html</url>
      <content type="html"><![CDATA[<h2 id="1ã€-javaç¨‹åºçš„ç»„æˆï¼š"><a href="#1ã€-javaç¨‹åºçš„ç»„æˆï¼š" class="headerlink" title="1ã€    javaç¨‹åºçš„ç»„æˆï¼š"></a>1ã€    javaç¨‹åºçš„ç»„æˆï¼š</h2><p>å…³é”®å­—ï¼Œæ ‡è¯†ç¬¦ï¼Œæ³¨é‡Šï¼Œå˜é‡ï¼Œè¯­å¥ï¼Œè¡¨è¾¾å¼ï¼Œæ•°ç»„ï¼Œæ–¹æ³•</p>
<h2 id="2ã€-å…³é”®å­—ï¼š"><a href="#2ã€-å…³é”®å­—ï¼š" class="headerlink" title="2ã€    å…³é”®å­—ï¼š"></a>2ã€    å…³é”®å­—ï¼š</h2><p>Javaè¯­è¨€å†…éƒ¨ä½¿ç”¨äº†çš„ä¸€äº›ç”¨äºç‰¹æ®Šç”¨é€”çš„è¯æ±‡ï¼Œé‚£ä¹ˆåœ¨ç¨‹åºä¸­ç”¨æˆ·ä¸èƒ½ä½¿ç”¨ã€‚è¯­è¨€æœ¬èº«ä¿ç•™äº†ä¸€äº›è¯æ±‡ç”¨äºè¯­è¨€çš„è¯­æ³•ç­‰ç”¨é€”ã€‚<br><img src="http://ou3xxg3hg.bkt.clouddn.com/å…³é”®å­—.jpg" alt=""></p>
<h2 id="3ã€-å·²ç”¨åˆ°çš„å…³é”®å­—ï¼š"><a href="#3ã€-å·²ç”¨åˆ°çš„å…³é”®å­—ï¼š" class="headerlink" title="3ã€    å·²ç”¨åˆ°çš„å…³é”®å­—ï¼š"></a>3ã€    å·²ç”¨åˆ°çš„å…³é”®å­—ï¼š</h2><p>class å£°æ˜ä¸€ä¸ªç±»ã€‚<br>public: è¡¨ç¤ºè¯¥ç±»å¯ä»¥è¢«å¤–ç•Œè°ƒç”¨  å¦‚æœä¸€ä¸ªç±»è¢«å£°æ˜ä¸ºpublic,é‚£ä¹ˆè¯¥ç±»æ‰€åœ¨çš„æ–‡ä»¶åè¦å’Œç±»åä¸€è‡´ã€‚ç¼–è¯‘åçš„æ–‡ä»¶åå’Œç±»åç›¸åŒã€‚<br>static:è¡¨ç¤ºæ˜¯é™æ€çš„ã€‚<br>voidï¼šè¡¨ç¤ºæ²¡æœ‰è¿”å›å€¼<br><a id="more"></a></p>
<h2 id="4ã€-å…³é”®å­—éƒ½æ˜¯å°å†™çš„ã€‚"><a href="#4ã€-å…³é”®å­—éƒ½æ˜¯å°å†™çš„ã€‚" class="headerlink" title="4ã€    å…³é”®å­—éƒ½æ˜¯å°å†™çš„ã€‚"></a>4ã€    å…³é”®å­—éƒ½æ˜¯å°å†™çš„ã€‚</h2><h2 id="5ã€-æ ‡è¯†ç¬¦ï¼š"><a href="#5ã€-æ ‡è¯†ç¬¦ï¼š" class="headerlink" title="5ã€    æ ‡è¯†ç¬¦ï¼š"></a>5ã€    æ ‡è¯†ç¬¦ï¼š</h2><p>æ ‡è¯†ç¬¦å°±æ˜¯ç”¨æˆ·åœ¨ç¨‹åºè‡ªå®šä¹‰ä½¿ç”¨çš„ä¸€äº›åè¯ã€‚åœ¨ç¨‹åºä¸­æ ‡è¯†ç¬¦å¯ä»¥ç”¨æ¥è¡¨ç¤ºç±»åï¼Œå˜é‡åï¼Œæ–¹æ³•åï¼Œå‚æ•°åç­‰ã€‚<br>åœ¨javaä¸­æ ‡è¯†ç¬¦çš„ç»„æˆï¼š<br>å¤§å°å†™å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ä»¥åŠ$ç»„æˆã€‚ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚æ ‡è¯†ç¬¦é€šå¸¸è¦æœ‰æ„ä¹‰ã€‚ä¸èƒ½éšä¾¿ä¹±å–ã€‚å»ºè®®ä½¿ç”¨è‹±æ–‡è¡¨ç¤ºã€‚<br>ç±»åï¼šä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œæ‰€æœ‰å•è¯é¦–å­—æ¯å¤§å†™ã€‚é‡‡ç”¨çš„Pascalå‘½åè§„åˆ™<br>å˜é‡åï¼šç¬¬ä¸€ä¸ªå•è¯é¦–å­—æ¯ä»¥å°å†™å¼€å¤´ï¼Œå…¶åçš„æ‰€æœ‰å•è¯é¦–å­—æ¯ä»¥å¤§å†™å¼€å¤´ã€‚é‡‡ç”¨çš„é©¼å³°å‘½åè§„åˆ™ã€‚</p>
<h2 id="6ã€-æ³¨é‡Šï¼š"><a href="#6ã€-æ³¨é‡Šï¼š" class="headerlink" title="6ã€    æ³¨é‡Šï¼š"></a>6ã€    æ³¨é‡Šï¼š</h2><p>åœ¨ç¨‹åºä¸­ï¼Œæ–¹ä¾¿äººä»¬é˜…è¯»ä»£ç è€Œå†™çš„ä¸€äº›è¯´æ˜æ–‡å­—ã€‚<br>åœ¨javaä¸­æœ‰3ç±»æ³¨é‡Šï¼š<br>å•è¡Œæ³¨é‡Šï¼šç”¨// å¼€å¤´<br>å¤šè¡Œæ³¨é‡Šï¼šç”¨/<em>å¼€å¤´  </em>/ç»“å°¾<br>æ–‡æ¡£æ³¨é‡Šï¼šç”¨/<em>* å¼€å¤´  </em>/ç»“å°¾ï¼Œå¹¶ä¸”åœ¨å…¶ä¸­ä¼šç”¨åˆ°ä¸€äº›javaå®šä¹‰å¥½çš„æ³¨è§£æ¥å£°æ˜<br>æ³¨æ„ï¼šå•è¡Œæ³¨é‡Šå’Œå¤šè¡Œæ³¨é‡Šä¸ä¼šè¢«ç¼–è¯‘ ä¹Ÿä¸ä¼šè¢«jvmè§£é‡Šæ‰§è¡Œï¼Œæ–‡æ¡£æ³¨é‡Šä¼šç¼–è¯‘ï¼Œå¯ä»¥é€šè¿‡jvmç”Ÿæˆå¯¹åº”çš„htmlæ–‡æ¡£,æ–¹ä¾¿ç”¨æˆ·æŸ¥è¯¢ä½¿ç”¨ã€‚</p>
<h2 id="7ã€-æ€»ç»“ï¼š"><a href="#7ã€-æ€»ç»“ï¼š" class="headerlink" title="7ã€    æ€»ç»“ï¼š"></a>7ã€    æ€»ç»“ï¼š</h2><p>ç¬¬ä¸€æ¡ï¼šå¸¸ç”¨çš„å…³é”®å­—è¦ç†Ÿæ‚‰ï¼Œèƒ½å¤Ÿè®°ä½ã€‚<br>ç¬¬äºŒæ¡ï¼šæ ‡è¯†ç¬¦çš„å‘½åè¦ç¬¦åˆè§„èŒƒã€‚<br>ç¬¬ä¸‰æ¡ï¼šç¨‹åºä¸€å®šè¦æ³¨é‡Šã€‚å»ºè®®å…ˆå†™æ³¨é‡Šï¼Œå†å†™ä»£ç ã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å˜é‡å’Œå¸¸é‡]]></title>
      <url>/%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F.html</url>
      <content type="html"><![CDATA[<h2 id="1ã€ä¸ºä»€ä¹ˆéœ€è¦å˜é‡ï¼Ÿ"><a href="#1ã€ä¸ºä»€ä¹ˆéœ€è¦å˜é‡ï¼Ÿ" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆéœ€è¦å˜é‡ï¼Ÿ"></a>1ã€ä¸ºä»€ä¹ˆéœ€è¦å˜é‡ï¼Ÿ</h2><p>æ–¹ä¾¿å¯¹ä¸€ä¸ªæ•°æ®çš„ä¿®æ”¹å’Œä½¿ç”¨ã€‚å¦‚ï¼šä¸€ä¸ªæ•°æ®åœ¨å¤šå¤„ä½¿ç”¨æ—¶ï¼Œå¦‚æœè¦ä¿®æ”¹ï¼Œé‚£ä¹ˆå¤šä¸ªåœ°æ–¹åŒæ—¶éƒ½éœ€è¦ä¿®æ”¹ï¼Œè¿™ä¸ªéœ€è¦ä¸€ä¸ªå˜é‡ç”¨äºå­˜å‚¨æ•°æ®ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œç›´æ¥ä½¿ç”¨å˜é‡å³å¯ï¼Œè¿™æ ·å½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹å˜é‡æœ¬èº«çš„å€¼å°±å¯ä»¥äº†ã€‚</p>
<h2 id="2ã€ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿ"><a href="#2ã€ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿ" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿ"></a>2ã€ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿ</h2><p>åœ¨javaä¸­ï¼Œå˜é‡æ˜¯ä¸€ä¸ªå­˜å‚¨ç©ºé—´çš„è¡¨ç¤ºã€‚</p>
<h2 id="3ã€ä½¿ç”¨å˜é‡çš„è¯­æ³•ï¼š"><a href="#3ã€ä½¿ç”¨å˜é‡çš„è¯­æ³•ï¼š" class="headerlink" title="3ã€ä½¿ç”¨å˜é‡çš„è¯­æ³•ï¼š"></a>3ã€ä½¿ç”¨å˜é‡çš„è¯­æ³•ï¼š</h2><p>æ•°æ®ç±»å‹ å˜é‡å = å€¼</p>
<h2 id="4ã€æ•°æ®ç±»å‹"><a href="#4ã€æ•°æ®ç±»å‹" class="headerlink" title="4ã€æ•°æ®ç±»å‹"></a>4ã€æ•°æ®ç±»å‹</h2><p>åŸºæœ¬å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹<br>åŸºæœ¬æ•°æ®ç±»å‹ï¼šæ•´æ•°ã€å°æ•°ã€å¸ƒå°”ã€å­—ç¬¦<br><a id="more"></a></p>
<h3 id="æ•´æ•°ï¼š"><a href="#æ•´æ•°ï¼š" class="headerlink" title="æ•´æ•°ï¼š"></a>æ•´æ•°ï¼š</h3><p>byte:è¡¨ç¤ºæ˜¯å­—èŠ‚  å ç”¨çš„å†…å­˜ç©ºé—´æ˜¯1å­—èŠ‚<br>short:è¡¨ç¤ºæ˜¯çŸ­æ•´å½¢  å ç”¨çš„å†…å­˜ç©ºé—´æ˜¯2å­—èŠ‚<br>int:è¡¨ç¤ºæ•´å½¢ å ç”¨çš„å†…å­˜ç©ºé—´æ˜¯4å­—èŠ‚<br>long:è¡¨ç¤ºé•¿æ•´å½¢ å ç”¨çš„å†…å­˜ç©ºé—´æ˜¯8å­—èŠ‚</p>
<h3 id="å°æ•°ï¼š"><a href="#å°æ•°ï¼š" class="headerlink" title="å°æ•°ï¼š"></a>å°æ•°ï¼š</h3><p>floatï¼šå•ç²¾åº¦æµ®ç‚¹æ•° å ç”¨çš„å†…å­˜ç©ºé—´æ˜¯4å­—èŠ‚<br>double:åŒç²¾åº¦æµ®ç‚¹æ•° å ç”¨çš„å†…å­˜ç©ºé—´æ˜¯8å­—èŠ‚</p>
<h3 id="å¸ƒå°”ï¼š"><a href="#å¸ƒå°”ï¼š" class="headerlink" title="å¸ƒå°”ï¼š"></a>å¸ƒå°”ï¼š</h3><p>boolean:å¸ƒå°”ç±»å‹çš„å€¼ åªæœ‰trueå’Œfalse 1å­—èŠ‚</p>
<h3 id="å­—ç¬¦ï¼šç”¨äºè¡¨ç¤ºå•ä¸ªå­—ç¬¦"><a href="#å­—ç¬¦ï¼šç”¨äºè¡¨ç¤ºå•ä¸ªå­—ç¬¦" class="headerlink" title="å­—ç¬¦ï¼šç”¨äºè¡¨ç¤ºå•ä¸ªå­—ç¬¦"></a>å­—ç¬¦ï¼šç”¨äºè¡¨ç¤ºå•ä¸ªå­—ç¬¦</h3><p>char:2ä¸ªå­—èŠ‚</p>
<h3 id="å¼•ç”¨æ•°æ®ç±»å‹ï¼šclass-interface-æ•°ç»„"><a href="#å¼•ç”¨æ•°æ®ç±»å‹ï¼šclass-interface-æ•°ç»„" class="headerlink" title="å¼•ç”¨æ•°æ®ç±»å‹ï¼šclass ,interface,æ•°ç»„"></a>å¼•ç”¨æ•°æ®ç±»å‹ï¼šclass ,interface,æ•°ç»„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">byte</span> age = <span class="number">125</span> ;</span><br><span class="line">    <span class="keyword">short</span> t = <span class="number">23</span> ;</span><br><span class="line">    <span class="keyword">char</span> ch = <span class="string">'ä¸­'</span>;</span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">true</span> ;</span><br><span class="line">    <span class="keyword">float</span> score = <span class="number">98.5f</span> ;</span><br><span class="line">    <span class="keyword">double</span> avgScore = <span class="number">80.4</span> ;</span><br><span class="line">    System.out.println(age);</span><br><span class="line">    System.out.println(t);</span><br><span class="line">    System.out.println(ch);</span><br><span class="line">   System.out.println(flag);</span><br><span class="line">   System.out.println(score);</span><br><span class="line">   System.out.println(avgScore);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•´æ•°é»˜è®¤æ˜¯ int,å°æ•°é»˜è®¤æ˜¯ double<br>å•ç²¾åº¦åé¢çš„ f è¡¨ç¤ºæ˜¯å•ç²¾åº¦æµ®ç‚¹ï¼Œéœ€è¦æ˜ç¡®å‡ºæ¥ï¼Œå¯ä»¥ f æˆ–è€… F .</p>
<h2 id="5ã€5-æ•´æ•°åœ¨javaä¸­æœ‰4ç§è¡¨ç°å½¢å¼ï¼š"><a href="#5ã€5-æ•´æ•°åœ¨javaä¸­æœ‰4ç§è¡¨ç°å½¢å¼ï¼š" class="headerlink" title="5ã€5.    æ•´æ•°åœ¨javaä¸­æœ‰4ç§è¡¨ç°å½¢å¼ï¼š"></a>5ã€5.    æ•´æ•°åœ¨javaä¸­æœ‰4ç§è¡¨ç°å½¢å¼ï¼š</h2><p>äºŒè¿›åˆ¶ï¼šæ˜¯ç”±æ•°å­—0å’Œ1ç»„æˆçš„ã€‚<br>å…«è¿›åˆ¶ï¼šæ˜¯ç”±æ•°å­—0åˆ°7ç»„æˆçš„ã€‚<br>åè¿›åˆ¶ï¼šæ˜¯ç”±æ•°å­—0åˆ°9ç»„æˆçš„ã€‚<br>åå…­è¿›åˆ¶ï¼šæ˜¯ç”±æ•°å­—0åˆ°9å’ŒABCDEFç»„æˆã€‚<br>è¿›åˆ¶ä¹‹é—´è½¬æ¢ï¼š<br><img src="http://ou3xxg3hg.bkt.clouddn.com/è¿›åˆ¶.jpg" alt="è¿›åˆ¶çš„è½¬æ¢"></p>
<h2 id="6ã€-å˜é‡åï¼šå‘½åè§„åˆ™é‡‡ç”¨é©¼å³°å‘½åæ³•ã€‚"><a href="#6ã€-å˜é‡åï¼šå‘½åè§„åˆ™é‡‡ç”¨é©¼å³°å‘½åæ³•ã€‚" class="headerlink" title="6ã€    å˜é‡åï¼šå‘½åè§„åˆ™é‡‡ç”¨é©¼å³°å‘½åæ³•ã€‚"></a>6ã€    å˜é‡åï¼šå‘½åè§„åˆ™é‡‡ç”¨é©¼å³°å‘½åæ³•ã€‚</h2><h2 id="7ã€-æ•°æ®ç±»å‹çš„è½¬æ¢ï¼š"><a href="#7ã€-æ•°æ®ç±»å‹çš„è½¬æ¢ï¼š" class="headerlink" title="7ã€    æ•°æ®ç±»å‹çš„è½¬æ¢ï¼š"></a>7ã€    æ•°æ®ç±»å‹çš„è½¬æ¢ï¼š</h2><p>è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼š<br><img src="http://ou3xxg3hg.bkt.clouddn.com/è‡ªåŠ¨ç±»å‹è½¬æ¢.jpg" alt=""><br>å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š<br><img src="http://ou3xxg3hg.bkt.clouddn.com/å¼ºåˆ¶ç±»å‹è½¬æ¢.jpg" alt=""><br>ç±»å‹æå‡ï¼š<br>å½“æ˜¯byteï¼Œshortï¼Œchar è¿›è¡Œè¿ç®—æ—¶ä¼šè‡ªåŠ¨æå‡ä¸ºintã€‚<br>å½“æœ‰floatç±»å‹ï¼Œæå‡ä¸ºfloatç±»å‹<br>å½“æœ‰doubleç±»å‹ï¼Œæå‡ä¸ºdoubleç±»å‹<br>å½“æœ‰longç±»å‹ï¼Œæå‡ä¸ºlongç±»å‹<br><img src="http://ou3xxg3hg.bkt.clouddn.com/ç±»çš„è‡ªåŠ¨æå‡.jpg" alt=""></p>
<h2 id="8ã€-å­—ç¬¦ç±»å‹ï¼šåœ¨javaä¸­ï¼Œcharç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¸€ä¸ªå­—ç¬¦ä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—æ¯-ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚â€™Aâ€™ï¼›ä¹Ÿå¯ä»¥ç”¨charæ¥è¡¨ç¤ºä¸€ä¸ªä¸­æ–‡ã€‚è¡¨ç¤ºä¸­æ–‡æ—¶ç‰¹åˆ«éœ€è¦æ³¨æ„ç¼–ç é—®é¢˜ã€‚"><a href="#8ã€-å­—ç¬¦ç±»å‹ï¼šåœ¨javaä¸­ï¼Œcharç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¸€ä¸ªå­—ç¬¦ä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—æ¯-ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚â€™Aâ€™ï¼›ä¹Ÿå¯ä»¥ç”¨charæ¥è¡¨ç¤ºä¸€ä¸ªä¸­æ–‡ã€‚è¡¨ç¤ºä¸­æ–‡æ—¶ç‰¹åˆ«éœ€è¦æ³¨æ„ç¼–ç é—®é¢˜ã€‚" class="headerlink" title="8ã€    å­—ç¬¦ç±»å‹ï¼šåœ¨javaä¸­ï¼Œcharç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¸€ä¸ªå­—ç¬¦ä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—æ¯,ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚â€™Aâ€™ï¼›ä¹Ÿå¯ä»¥ç”¨charæ¥è¡¨ç¤ºä¸€ä¸ªä¸­æ–‡ã€‚è¡¨ç¤ºä¸­æ–‡æ—¶ç‰¹åˆ«éœ€è¦æ³¨æ„ç¼–ç é—®é¢˜ã€‚"></a>8ã€    å­—ç¬¦ç±»å‹ï¼šåœ¨javaä¸­ï¼Œcharç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¸€ä¸ªå­—ç¬¦ä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—æ¯,ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚â€™Aâ€™ï¼›ä¹Ÿå¯ä»¥ç”¨charæ¥è¡¨ç¤ºä¸€ä¸ªä¸­æ–‡ã€‚è¡¨ç¤ºä¸­æ–‡æ—¶ç‰¹åˆ«éœ€è¦æ³¨æ„ç¼–ç é—®é¢˜ã€‚</h2>]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaå…¥é—¨]]></title>
      <url>/Java%E5%85%A5%E9%97%A8.html</url>
      <content type="html"><![CDATA[<h2 id="1-Java-æ˜¯SUN-Starfard-University-Network-å…¬å¸åœ¨1995å¹´å¼€å‘äº†ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„ï¼Œå¼€æºçš„é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚"><a href="#1-Java-æ˜¯SUN-Starfard-University-Network-å…¬å¸åœ¨1995å¹´å¼€å‘äº†ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„ï¼Œå¼€æºçš„é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚" class="headerlink" title="1.    Java:æ˜¯SUN(Starfard University Network)å…¬å¸åœ¨1995å¹´å¼€å‘äº†ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„ï¼Œå¼€æºçš„é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚"></a>1.    Java:æ˜¯SUN(Starfard University Network)å…¬å¸åœ¨1995å¹´å¼€å‘äº†ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„ï¼Œå¼€æºçš„é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚</h2><h2 id="2-Javaå‘å±•å†å²ï¼š"><a href="#2-Javaå‘å±•å†å²ï¼š" class="headerlink" title="2.    Javaå‘å±•å†å²ï¼š"></a>2.    Javaå‘å±•å†å²ï¼š</h2><p>1995 javaè¯ç”Ÿ<br>1996 jdk1.0å‘å¸ƒ<br>1998 jdk1.2 å‘å¸ƒ  J2SE(1.2,1.3,1.4)<br>2004 jdk1.5 å‘å¸ƒ  JAVASE5<br>2014 jdk1.8 å‘å¸ƒ  JAVASE8</p>
<h2 id="3-Javaçš„ä¼˜åŠ¿ï¼šè·¨å¹³å°"><a href="#3-Javaçš„ä¼˜åŠ¿ï¼šè·¨å¹³å°" class="headerlink" title="3.    Javaçš„ä¼˜åŠ¿ï¼šè·¨å¹³å°"></a>3.    Javaçš„ä¼˜åŠ¿ï¼šè·¨å¹³å°</h2><p>ä¸€æ¬¡ç¼–å†™ å¤šæ¬¡è¿è¡Œ<br>Javaæ˜¯è¿è¡Œåœ¨JVMï¼ˆJava virtual machineï¼‰ä¹‹ä¸Šçš„ã€‚ä¸ºä¸åŒå¹³å°ä¸‹å¼€å‘ä¸åŒçš„JVMã€‚æ‰€æœ‰JVMå¯¹javaè¯­è¨€æœ¬èº«çš„è§„èŒƒæ˜¯ä¸€æ ·çš„ã€‚</p>
<h2 id="4-Javaçš„ç‰ˆæœ¬ï¼š"><a href="#4-Javaçš„ç‰ˆæœ¬ï¼š" class="headerlink" title="4.    Javaçš„ç‰ˆæœ¬ï¼š"></a>4.    Javaçš„ç‰ˆæœ¬ï¼š</h2><p>JavaSEï¼šjava standard edition javaæ ‡å‡†ç‰ˆ æ˜¯Javaçš„åŸºç¡€ã€‚<br>JavaMEï¼šjava micro edition :ç§»åŠ¨ç«¯ï¼Œå°å‹è®¾å¤‡ï¼ŒPDAç­‰<br>JavaEEï¼šjava enterprise editionï¼šjavaçš„ä¼ä¸šçº§ç‰ˆæœ¬ï¼Œjava webç­‰<br><a id="more"></a></p>
<h2 id="5-JVM-JRE-JDK"><a href="#5-JVM-JRE-JDK" class="headerlink" title="5.    JVM,JRE,JDK"></a>5.    JVM,JRE,JDK</h2><p>Jvm java virtual machine         javaè™šæ‹Ÿæœº è¿è¡Œjavaç¨‹åº<br>Jre  java runtime environment      javaè¿è¡Œæ—¶ç¯å¢ƒ<br>Jdk  java development kit java    å¼€å‘å·¥å…·åŒ…<br>JDKâ€”&gt;JREâ€”-&gt;JVM</p>
<h2 id="6-ä¸‹è½½jdkæ¥å®‰è£…ï¼š"><a href="#6-ä¸‹è½½jdkæ¥å®‰è£…ï¼š" class="headerlink" title="6.    ä¸‹è½½jdkæ¥å®‰è£…ï¼š"></a>6.    ä¸‹è½½jdkæ¥å®‰è£…ï¼š</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cub3JhY2xlLmNvbQ==" title="https://www.oracle.com">å®˜æ–¹ä¸‹è½½åœ°å€<i class="fa fa-external-link"></i></span><br>æŒ‡å®šå®‰è£…ä½ç½®å å‚»ç“œå¼å®‰è£…<br>åœ¨å‘½ä»¤è¡Œè¿è¡Œæ—¶ï¼š</p>
<p>éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ã€‚<br>åœ¨dosä¸­æ‰§è¡Œå‘½ä»¤ï¼Œæ“ä½œç³»ç»Ÿä¼šæ ¹æ®ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡Pathå»å¯»æ‰¾å¯¹åº”çš„å¯æ‰§è¡Œç¨‹åºï¼ˆ.exe,.batï¼‰ã€‚</p>
<h2 id="7-Pathå˜é‡çš„é…ç½®"><a href="#7-Pathå˜é‡çš„é…ç½®" class="headerlink" title="7.    Pathå˜é‡çš„é…ç½®"></a>7.    Pathå˜é‡çš„é…ç½®</h2><p>è®¡ç®—æœº  å³é”®  å±æ€§  é«˜çº§ç³»ç»Ÿè®¾ç½®  ç¯å¢ƒå˜é‡<br>æ·»åŠ ä¸€ä¸ªJAVA_HOMEå˜é‡ å€¼ä¸ºjdkçš„å®‰è£…ç›®å½•<br>åœ¨Pathå˜é‡ä¸­çš„å‰é¢æ·»åŠ %JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;<br>æ³¨æ„ï¼šä½¿ç”¨åˆ†å·å¯¹æ¯ä¸ªè·¯å¾„è¿›è¡Œåˆ†å‰²ï¼Œéƒ½æ˜¯è‹±æ–‡ä¸‹çš„åˆ†å·</p>
<h2 id="8-ç¼–å†™ç¬¬ä¸€ä¸ªHelloWorldåº”ç”¨ç¨‹åºï¼šæ‰€æœ‰javaç¨‹åºéƒ½æ˜¯ä»¥-javaç»“å°¾çš„ã€‚"><a href="#8-ç¼–å†™ç¬¬ä¸€ä¸ªHelloWorldåº”ç”¨ç¨‹åºï¼šæ‰€æœ‰javaç¨‹åºéƒ½æ˜¯ä»¥-javaç»“å°¾çš„ã€‚" class="headerlink" title="8.    ç¼–å†™ç¬¬ä¸€ä¸ªHelloWorldåº”ç”¨ç¨‹åºï¼šæ‰€æœ‰javaç¨‹åºéƒ½æ˜¯ä»¥.javaç»“å°¾çš„ã€‚"></a>8.    ç¼–å†™ç¬¬ä¸€ä¸ªHelloWorldåº”ç”¨ç¨‹åºï¼šæ‰€æœ‰javaç¨‹åºéƒ½æ˜¯ä»¥.javaç»“å°¾çš„ã€‚</h2><p>class HelloWorld{<br>    public static void main(String[] args){<br>         System.out.println(â€œhello worldâ€);<br>    }<br>}<br>ä¿å­˜ä¸ºHelloWorld.javaæ–‡ä»¶</p>
<h2 id="9-ç¼–å†™å¥½çš„åº”ç”¨ç¨‹åº-ä¹Ÿå°±æ˜¯ä»¥-javaç»“å°¾çš„æ–‡ä»¶ï¼Œç§°ä¸ºæºæ–‡ä»¶ã€‚ç¼–å†™å¥½çš„æºæ–‡ä»¶éœ€è¦é€šè¿‡javacå‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘çš„ç›®çš„æ˜¯ä¸ºäº†è®©jvmå¯ä»¥è®¤è¯†å¹¶ä¸”æ‰§è¡Œã€‚"><a href="#9-ç¼–å†™å¥½çš„åº”ç”¨ç¨‹åº-ä¹Ÿå°±æ˜¯ä»¥-javaç»“å°¾çš„æ–‡ä»¶ï¼Œç§°ä¸ºæºæ–‡ä»¶ã€‚ç¼–å†™å¥½çš„æºæ–‡ä»¶éœ€è¦é€šè¿‡javacå‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘çš„ç›®çš„æ˜¯ä¸ºäº†è®©jvmå¯ä»¥è®¤è¯†å¹¶ä¸”æ‰§è¡Œã€‚" class="headerlink" title="9.    ç¼–å†™å¥½çš„åº”ç”¨ç¨‹åº,ä¹Ÿå°±æ˜¯ä»¥.javaç»“å°¾çš„æ–‡ä»¶ï¼Œç§°ä¸ºæºæ–‡ä»¶ã€‚ç¼–å†™å¥½çš„æºæ–‡ä»¶éœ€è¦é€šè¿‡javacå‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘çš„ç›®çš„æ˜¯ä¸ºäº†è®©jvmå¯ä»¥è®¤è¯†å¹¶ä¸”æ‰§è¡Œã€‚"></a>9.    ç¼–å†™å¥½çš„åº”ç”¨ç¨‹åº,ä¹Ÿå°±æ˜¯ä»¥.javaç»“å°¾çš„æ–‡ä»¶ï¼Œç§°ä¸ºæºæ–‡ä»¶ã€‚ç¼–å†™å¥½çš„æºæ–‡ä»¶éœ€è¦é€šè¿‡javacå‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘çš„ç›®çš„æ˜¯ä¸ºäº†è®©jvmå¯ä»¥è®¤è¯†å¹¶ä¸”æ‰§è¡Œã€‚</h2><p>ç¼–è¯‘åä¼šç”Ÿæˆä¸€ä¸ª.classæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ç§°ä¸ºå­—èŠ‚ç æ–‡ä»¶ï¼Œèƒ½å¤Ÿè¢«jvmè®¤è¯†å¹¶ä¸”æ‰§è¡Œã€‚<br>è¿è¡Œç¨‹åºï¼šä½¿ç”¨javaå‘½ä»¤è¿›è¡Œè¿è¡Œã€‚è¿è¡Œçš„æ˜¯.classæ–‡ä»¶</p>
<h2 id="10-Javaç¨‹åºçš„ç¼–å†™æµç¨‹ï¼š"><a href="#10-Javaç¨‹åºçš„ç¼–å†™æµç¨‹ï¼š" class="headerlink" title="10.    Javaç¨‹åºçš„ç¼–å†™æµç¨‹ï¼š"></a>10.    Javaç¨‹åºçš„ç¼–å†™æµç¨‹ï¼š</h2><p>ç¼–å†™æºæ–‡ä»¶â€”â€”â€“&gt;é€šè¿‡javacå‘½ä»¤ç¼–è¯‘æºæ–‡ä»¶â€”â€”â€“&gt;é€šè¿‡javaå‘½ä»¤æ‰§è¡Œå­—èŠ‚ç æ–‡ä»¶ã€‚<br>Javacç¼–è¯‘æ—¶ éœ€è¦è·Ÿä¸Šåç¼€.java,è€Œjavaå‘½ä»¤åç›´æ¥è·Ÿæ–‡ä»¶å³å¯ ä¸éœ€è¦åç¼€ã€‚</p>
<h2 id="11-HelloWorldç¨‹åºè¯¦è§£ï¼š"><a href="#11-HelloWorldç¨‹åºè¯¦è§£ï¼š" class="headerlink" title="11.    HelloWorldç¨‹åºè¯¦è§£ï¼š"></a>11.    HelloWorldç¨‹åºè¯¦è§£ï¼š</h2><h2 id="12-classpathç¯å¢ƒå˜é‡ï¼š"><a href="#12-classpathç¯å¢ƒå˜é‡ï¼š" class="headerlink" title="12.    classpathç¯å¢ƒå˜é‡ï¼š"></a>12.    classpathç¯å¢ƒå˜é‡ï¼š</h2><p>é…ç½®pathç¯å¢ƒå˜é‡çš„ç›®çš„æ˜¯åœ¨ä»»æ„è·¯å¾„ä¸‹éƒ½å¯ä»¥æ‰§è¡Œjava,javacå‘½ä»¤<br>é…ç½®classpathçš„ç›®çš„æ˜¯ä¸ºäº†åœ¨ä»»æ„è·¯å¾„ä¸‹éƒ½å¯ä»¥æ‰§è¡Œ.classæ–‡ä»¶ã€‚æ‰€è°“çš„classpathæŒ‡å®šçš„æ˜¯.classæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ã€‚<br>classpathä¸è®¾ç½®çš„æ—¶å€™ï¼šjavaå‘½ä»¤ä¼šåœ¨å½“å‰è·¯å¾„ä¸‹æŸ¥æ‰¾.classï¼Œå¦‚æœæ‰¾ä¸åˆ°</p>
<p>å¦‚æœè®¾ç½®äº†classpathï¼Œé‚£ä¹ˆä¼šä»classpathæŒ‡å®šçš„è·¯å¾„å»æŸ¥æ‰¾.class<br>å¦‚æœclasspathçš„å€¼åé¢ä¸åŠ åˆ†å·ï¼šæŸ¥æ‰¾çš„classpathæŒ‡å®šçš„è·¯å¾„ä¸‹æ˜¯å¦æœ‰.classæ–‡ä»¶ï¼Œ<br>å¦‚æœåŠ äº†åˆ†å·ï¼šå…ˆæŸ¥è¯¢classpathæŒ‡å®šçš„è·¯å¾„ï¼Œå†æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹æ˜¯å¦æœ‰.classæ–‡ä»¶ã€‚<br>æ³¨æ„ï¼šé€šå¸¸é…ç½®classpathä¼šä»¥.;å¼€å¤´ï¼Œè¡¨ç¤ºå…ˆæŸ¥è¯¢çš„æ˜¯å½“å‰è·¯å¾„<br>CLASSPATH=.;%JAVA_HOME%\lib\tools.jar;%JAVA_HOME%\lib\dt.jar;</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è®¡ç®—æœºçš„åŸºç¡€]]></title>
      <url>/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E5%9F%BA%E7%A1%80.html</url>
      <content type="html"><![CDATA[<h2 id="1ã€è®¡ç®—æœºçš„ç»„æˆï¼šç¡¬ä»¶å’Œè½¯ä»¶"><a href="#1ã€è®¡ç®—æœºçš„ç»„æˆï¼šç¡¬ä»¶å’Œè½¯ä»¶" class="headerlink" title="1ã€è®¡ç®—æœºçš„ç»„æˆï¼šç¡¬ä»¶å’Œè½¯ä»¶"></a>1ã€è®¡ç®—æœºçš„ç»„æˆï¼šç¡¬ä»¶å’Œè½¯ä»¶</h2><h2 id="2ã€ç¡¬ä»¶ï¼šç‰©ç†è®¾å¤‡ï¼ˆä¸»æ¿ã€CPUã€æ˜¾ç¤ºå™¨ã€å­˜å‚¨è®¾å¤‡ã€å¤–è®¾ã€å†…å­˜æ¡ï¼‰"><a href="#2ã€ç¡¬ä»¶ï¼šç‰©ç†è®¾å¤‡ï¼ˆä¸»æ¿ã€CPUã€æ˜¾ç¤ºå™¨ã€å­˜å‚¨è®¾å¤‡ã€å¤–è®¾ã€å†…å­˜æ¡ï¼‰" class="headerlink" title="2ã€ç¡¬ä»¶ï¼šç‰©ç†è®¾å¤‡ï¼ˆä¸»æ¿ã€CPUã€æ˜¾ç¤ºå™¨ã€å­˜å‚¨è®¾å¤‡ã€å¤–è®¾ã€å†…å­˜æ¡ï¼‰"></a>2ã€ç¡¬ä»¶ï¼šç‰©ç†è®¾å¤‡ï¼ˆä¸»æ¿ã€CPUã€æ˜¾ç¤ºå™¨ã€å­˜å‚¨è®¾å¤‡ã€å¤–è®¾ã€å†…å­˜æ¡ï¼‰</h2><h2 id="3ã€æ²¡æœ‰è½¯ä»¶çš„è®¡ç®—æœºï¼šè£¸æœº"><a href="#3ã€æ²¡æœ‰è½¯ä»¶çš„è®¡ç®—æœºï¼šè£¸æœº" class="headerlink" title="3ã€æ²¡æœ‰è½¯ä»¶çš„è®¡ç®—æœºï¼šè£¸æœº"></a>3ã€æ²¡æœ‰è½¯ä»¶çš„è®¡ç®—æœºï¼šè£¸æœº</h2><h2 id="4ã€è½¯ä»¶ï¼šæŒ‰ç…§ä¸€å®šé¡ºåºå’Œé€»è¾‘ç»„æˆçš„è®¡ç®—æœºæŒ‡ä»¤â€”â€”-ç¨‹åºã€è½¯ä»¶ã€‚"><a href="#4ã€è½¯ä»¶ï¼šæŒ‰ç…§ä¸€å®šé¡ºåºå’Œé€»è¾‘ç»„æˆçš„è®¡ç®—æœºæŒ‡ä»¤â€”â€”-ç¨‹åºã€è½¯ä»¶ã€‚" class="headerlink" title="4ã€è½¯ä»¶ï¼šæŒ‰ç…§ä¸€å®šé¡ºåºå’Œé€»è¾‘ç»„æˆçš„è®¡ç®—æœºæŒ‡ä»¤â€”â€”-ç¨‹åºã€è½¯ä»¶ã€‚"></a>4ã€è½¯ä»¶ï¼šæŒ‰ç…§ä¸€å®šé¡ºåºå’Œé€»è¾‘ç»„æˆçš„è®¡ç®—æœºæŒ‡ä»¤â€”â€”-ç¨‹åºã€è½¯ä»¶ã€‚</h2><p>è½¯ä»¶ = ç¨‹åº +ã€€æ•°æ®ç»“æ„ã€‚</p>
<h2 id="5ã€è½¯ä»¶å¼€å‘ï¼šåˆ¶ä½œè½¯ä»¶çš„è¿‡ç¨‹ã€‚"><a href="#5ã€è½¯ä»¶å¼€å‘ï¼šåˆ¶ä½œè½¯ä»¶çš„è¿‡ç¨‹ã€‚" class="headerlink" title="5ã€è½¯ä»¶å¼€å‘ï¼šåˆ¶ä½œè½¯ä»¶çš„è¿‡ç¨‹ã€‚"></a>5ã€è½¯ä»¶å¼€å‘ï¼šåˆ¶ä½œè½¯ä»¶çš„è¿‡ç¨‹ã€‚</h2><h2 id="6ã€äººæœºäº¤äº’ï¼šå‘½ä»¤ï¼ˆdosï¼‰ã€å›¾å½¢ç•Œé¢ã€‚"><a href="#6ã€äººæœºäº¤äº’ï¼šå‘½ä»¤ï¼ˆdosï¼‰ã€å›¾å½¢ç•Œé¢ã€‚" class="headerlink" title="6ã€äººæœºäº¤äº’ï¼šå‘½ä»¤ï¼ˆdosï¼‰ã€å›¾å½¢ç•Œé¢ã€‚"></a>6ã€äººæœºäº¤äº’ï¼šå‘½ä»¤ï¼ˆdosï¼‰ã€å›¾å½¢ç•Œé¢ã€‚</h2><h2 id="7ã€è®¡ç®—æœºè¯­è¨€ï¼šäººå’Œè®¡ç®—æœºäº¤æµçš„ä¸€ç§æ–¹å¼ã€‚"><a href="#7ã€è®¡ç®—æœºè¯­è¨€ï¼šäººå’Œè®¡ç®—æœºäº¤æµçš„ä¸€ç§æ–¹å¼ã€‚" class="headerlink" title="7ã€è®¡ç®—æœºè¯­è¨€ï¼šäººå’Œè®¡ç®—æœºäº¤æµçš„ä¸€ç§æ–¹å¼ã€‚"></a>7ã€è®¡ç®—æœºè¯­è¨€ï¼šäººå’Œè®¡ç®—æœºäº¤æµçš„ä¸€ç§æ–¹å¼ã€‚</h2><h2 id="8ã€è®¡ç®—æœºè¯­è¨€çš„åˆ†ç±»ï¼š"><a href="#8ã€è®¡ç®—æœºè¯­è¨€çš„åˆ†ç±»ï¼š" class="headerlink" title="8ã€è®¡ç®—æœºè¯­è¨€çš„åˆ†ç±»ï¼š"></a>8ã€è®¡ç®—æœºè¯­è¨€çš„åˆ†ç±»ï¼š</h2><p>a)  æœºå™¨è¯­è¨€<br>b) æ±‡ç¼–è¯­è¨€<br>c) é«˜çº§è¯­è¨€ï¼šc , c++ , java , scala , python<br>è¶Šé«˜çº§çš„è¯­è¨€è¶Šæ¥è¿‘äººä»¬çš„ä¹ æƒ¯ã€‚è¶Šé«˜çº§çš„è¯­è¨€æ‰§è¡Œæ•ˆç‡æ˜¯è¶Šä½çš„ã€‚<br><a id="more"></a></p>
<h2 id="9ã€æ“ä½œç³»ç»Ÿ"><a href="#9ã€æ“ä½œç³»ç»Ÿ" class="headerlink" title="9ã€æ“ä½œç³»ç»Ÿ"></a>9ã€æ“ä½œç³»ç»Ÿ</h2><h2 id="10ã€äº†è§£ä¸€äº›å¸¸è§çš„doså‘½ä»¤ï¼šwin-r-â€”-gt-è¿è¡Œ"><a href="#10ã€äº†è§£ä¸€äº›å¸¸è§çš„doså‘½ä»¤ï¼šwin-r-â€”-gt-è¿è¡Œ" class="headerlink" title="10ã€äº†è§£ä¸€äº›å¸¸è§çš„doså‘½ä»¤ï¼šwin+r â€”-&gt;è¿è¡Œ"></a>10ã€äº†è§£ä¸€äº›å¸¸è§çš„doså‘½ä»¤ï¼šwin+r â€”-&gt;è¿è¡Œ</h2><p>a) dir æ˜¾ç¤ºå½“å‰ç›®å½•ä¿¡æ¯<br>b) cd.. å›åˆ°ä¸Šä¸€çº§ç›®å½•<br>c) cd. åˆ°å½“å‰ç›®å½•<br>d) cd/ åˆ°æ ¹ç›®å½•<br>e) D: åˆ°Dç›˜<br>f) cd path â€” &gt; åˆ°æŒ‡å®šçš„ç›®å½•ï¼Œä¸èƒ½è·³ç›˜ç¬¦<br>g) md ç›®å½•å  â€” &gt; æ–°å»ºä¸€ä¸ªç›®å½• make directory<br>h) ren oldname newname â€”â€“&gt; é‡å‘½å rename<br>i) rd ç›®å½•å â€”-&gt;åˆ é™¤ç›®å½• remove directory<br>j) move æ–‡ä»¶ ç›®æ ‡ç›®å½• â€”â€“&gt; ç§»åŠ¨æ–‡ä»¶<br>k) notepad æ‰“å¼€è®°äº‹æœ¬<br>l) copy æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ â€”â€“&gt; å¤åˆ¶æ–‡ä»¶<br>m) del æ–‡ä»¶å â€”-&gt; åˆ é™¤æ–‡ä»¶<br>n) cls æ¸…å±</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[MySQLå¤‡ä»½]]></title>
      <url>/MySQL%E5%A4%87%E4%BB%BD.html</url>
      <content type="html"><![CDATA[<h2 id="å®šæ—¶å®Œæˆæ•°æ®åº“çš„å¤‡ä»½"><a href="#å®šæ—¶å®Œæˆæ•°æ®åº“çš„å¤‡ä»½" class="headerlink" title="å®šæ—¶å®Œæˆæ•°æ®åº“çš„å¤‡ä»½"></a>å®šæ—¶å®Œæˆæ•°æ®åº“çš„å¤‡ä»½</h2><h3 id="â‘ -æ‰‹åŠ¨å¤‡ä»½æ•°æ®åº“-è¡¨çš„-æ–¹æ³•"><a href="#â‘ -æ‰‹åŠ¨å¤‡ä»½æ•°æ®åº“-è¡¨çš„-æ–¹æ³•" class="headerlink" title="â‘     æ‰‹åŠ¨å¤‡ä»½æ•°æ®åº“(è¡¨çš„)æ–¹æ³•"></a>â‘     æ‰‹åŠ¨å¤‡ä»½æ•°æ®åº“(è¡¨çš„)æ–¹æ³•</h3><p>cmdæ§åˆ¶å°:<br>mysqldump â€“u root â€“proot æ•°æ®åº“ [è¡¨å1 è¡¨å2..]  &gt; æ–‡ä»¶è·¯å¾„<br>æ¯”å¦‚: æŠŠtempæ•°æ®åº“å¤‡ä»½åˆ° d:\temp.bak<br>mysqldump â€“u root â€“proot temp &gt; d:\temp.bak<br>å¦‚æœä½ å¸Œæœ›å¤‡ä»½æ˜¯ï¼Œæ•°æ®åº“çš„æŸå‡ å¼ è¡¨<br>mysqldump â€“u root â€“prot temp dept &gt; d:\temp.dept.bak</p>
<h2 id="å¦‚ä½•ä½¿ç”¨å¤‡ä»½æ–‡ä»¶æ¢å¤æˆ‘ä»¬çš„æ•°æ®"><a href="#å¦‚ä½•ä½¿ç”¨å¤‡ä»½æ–‡ä»¶æ¢å¤æˆ‘ä»¬çš„æ•°æ®" class="headerlink" title="å¦‚ä½•ä½¿ç”¨å¤‡ä»½æ–‡ä»¶æ¢å¤æˆ‘ä»¬çš„æ•°æ®."></a>å¦‚ä½•ä½¿ç”¨å¤‡ä»½æ–‡ä»¶æ¢å¤æˆ‘ä»¬çš„æ•°æ®.</h2><p>mysqlæ§åˆ¶å°<br>source d:\temp.dept.bak<br><a id="more"></a></p>
<h3 id="â‘¡-ä½¿ç”¨å®šæ—¶å™¨æ¥è‡ªå®šå®Œæˆ"><a href="#â‘¡-ä½¿ç”¨å®šæ—¶å™¨æ¥è‡ªå®šå®Œæˆ" class="headerlink" title="â‘¡    ä½¿ç”¨å®šæ—¶å™¨æ¥è‡ªå®šå®Œæˆ"></a>â‘¡    ä½¿ç”¨å®šæ—¶å™¨æ¥è‡ªå®šå®Œæˆ</h3><p>æŠŠå¤‡ä»½æ•°æ®åº“çš„æŒ‡ä»¤ï¼Œå†™å…¥åˆ° batæ–‡ä»¶, ç„¶åé€šè¿‡ä»»åŠ¡ç®¡ç†å™¨å»å®šæ—¶è°ƒç”¨ batæ–‡ä»¶.<br>mytask.bat å†…å®¹æ˜¯:<br>C:\myenv\mysql5.5.27\bin\mysqldump -u root -proot temp dept &gt; d:\temp.dept.bak<br>â˜ å¦‚æœä½ çš„mysqldump.exeæ–‡ä»¶è·¯å¾„æœ‰ç©ºæ ¼ï¼Œåˆ™ä¸€å®šè¦ä½¿ç”¨ â€œâ€ åŒ…æ‹¬.<br>æŠŠmytask.bat åšæˆä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶å®šæ—¶è°ƒç”¨åœ¨ 2:00 è°ƒç”¨ä¸€æ¬¡<br>æ­¥éª¤ ä»»åŠ¡è®¡åˆ’-&gt;å¢åŠ ä¸€ä¸ªä»»åŠ¡ï¼Œé€‰ä¸­ä½ çš„mytask.batæ–‡ä»¶ ï¼Œæœ€åé…ç½®:<br>æµ‹è¯•ok</p>
<h2 id="å¦‚ä½•åœ¨linuxä¸‹å®Œæˆå®šæ—¶ä»»åŠ¡"><a href="#å¦‚ä½•åœ¨linuxä¸‹å®Œæˆå®šæ—¶ä»»åŠ¡" class="headerlink" title="å¦‚ä½•åœ¨linuxä¸‹å®Œæˆå®šæ—¶ä»»åŠ¡:"></a>å¦‚ä½•åœ¨linuxä¸‹å®Œæˆå®šæ—¶ä»»åŠ¡:</h2><p>linuxå¦‚ä½•å¤‡ä»½.</p>
<ol>
<li>ç›´æ¥æ‰§è¡ŒPHPè„šæœ¬, éœ€è¦åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šæ‰§è¡Œ.<h1 id="crontab-e"><a href="#crontab-e" class="headerlink" title="crontab -e"></a>crontab -e</h1>00 <em> </em> <em> </em> /usr/local/bin/php /home/htdocs/phptimer.php<br>2.é€šè¿‡HTTPè¯·æ±‚æ¥è§¦å‘è„šæœ¬, PHPæ–‡ä»¶å…è®¸ä¸åœ¨åŒä¸€æœåŠ¡å™¨ä¸Š<h1 id="crontab-e-1"><a href="#crontab-e-1" class="headerlink" title="crontab -e"></a>crontab -e</h1>00 <em> </em> <em> </em> /usr/bin/wget -q -O temp.txt <span class="exturl" data-url="aHR0cDovL3d3dy5waHB0aW1lci5jb20vcGhwdGltZXIucGhw" title="http://www.phptimer.com/phptimer.php">http://www.phptimer.com/phptimer.php<i class="fa fa-external-link"></i></span><br>ä¸Šé¢æ˜¯é€šè¿‡wgetæ¥è¯·æ±‚PHPæ–‡ä»¶, PHPè¾“å‡ºä¼šä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶temp.txtä¸­<h1 id="crontab-e-2"><a href="#crontab-e-2" class="headerlink" title="crontab -e"></a>crontab -e</h1>00 <em> </em> <em> </em> /usr/bin/curl -o temp.txt <span class="exturl" data-url="aHR0cDovL3d3dy5waHB0aW1lci5jb20vcGhwdGltZXIucGhw" title="http://www.phptimer.com/phptimer.php">http://www.phptimer.com/phptimer.php<i class="fa fa-external-link"></i></span><br>ä¸Šé¢æ˜¯é€šè¿‡curl -oæ¥è¯·æ±‚PHPæ–‡ä»¶, PHPè¾“å‡ºä¼šä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶temp.txtä¸­<h1 id="crontab-e-3"><a href="#crontab-e-3" class="headerlink" title="crontab -e"></a>crontab -e</h1>00 <em> </em> <em> </em> lynx -dump <span class="exturl" data-url="aHR0cDovL3d3dy5waHB0aW1lci5jb20vcGhwdGltZXIucGhw" title="http://www.phptimer.com/phptimer.php">http://www.phptimer.com/phptimer.php<i class="fa fa-external-link"></i></span><br>ä¸Šé¢æ˜¯é€šè¿‡Lynxæ–‡æœ¬æµè§ˆå™¨æ¥è¯·æ±‚PHPæ–‡ä»¶</li>
</ol>
<h2 id="åˆ†è¡¨æŠ€æœ¯"><a href="#åˆ†è¡¨æŠ€æœ¯" class="headerlink" title="åˆ†è¡¨æŠ€æœ¯"></a>åˆ†è¡¨æŠ€æœ¯</h2><p>åˆ†è¡¨æŠ€æœ¯æœ‰(æ°´å¹³åˆ†å‰²å’Œå‚ç›´åˆ†å‰²)<br>å½“ä¸€å¼ è¶Šæ¥è¶Šå¤§æ—¶å€™ï¼Œå³ä½¿æ·»åŠ ç´¢å¼•è¿˜æ…¢çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ†è¡¨<br>ä»¥qqç”¨æˆ·è¡¨æ¥å…·ä½“çš„è¯´æ˜ä¸€ä¸‹åˆ†è¡¨çš„æ“ä½œ.<br>æ€è·¯å¦‚å›¾ ï¼š<br>é¦–å…ˆæˆ‘åˆ›å»ºä¸‰å¼ è¡¨ user0 / user1 /user2 , ç„¶åæˆ‘å†åˆ›å»º uuidè¡¨ï¼Œè¯¥è¡¨çš„ä½œç”¨å°±æ˜¯æä¾›è‡ªå¢çš„id,<br>èµ°ä»£ç :<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user0(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">unsigned</span> primary <span class="keyword">key</span> ,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">pwd  <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>)</span><br><span class="line"><span class="keyword">engine</span>=myisam <span class="keyword">charset</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user1(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">unsigned</span> primary <span class="keyword">key</span> ,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">pwd  <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>)</span><br><span class="line"><span class="keyword">engine</span>=myisam <span class="keyword">charset</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user2(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">unsigned</span> primary <span class="keyword">key</span> ,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">pwd  <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>)</span><br><span class="line"><span class="keyword">engine</span>=myisam <span class="keyword">charset</span> utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">uuid</span>(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">unsigned</span> primary <span class="keyword">key</span> auto_increment)<span class="keyword">engine</span>=myisam <span class="keyword">charset</span> utf8;</span><br></pre></td></tr></table></figure></p>
<p>æ€è€ƒ: å¦‚æœæˆ‘ä»¬åšçš„æ˜¯ä¸€ä¸ªå¹³å®‰ä¿é™©å…¬å¸çš„ä¸€ä¸ªè®¢å•(8999999999000000æ¡)æŸ¥è¯¢åŠŸèƒ½æ›´.<br>,å¦‚ä½•å¤„ç†æµ·é‡è¡¨?-&gt;æŒ‰æ—¶é—´.</p>
<ol>
<li>åˆ†è¡¨çš„æ ‡å‡†æ˜¯ä¾èµ–ä¸šåŠ¡é€»è¾‘(æ—¶é—´/åœ°åŒº/â€¦.)</li>
<li>å®‰è£…å­—ç¬¦ä¸åŒ. a-z</li>
<li>æˆ‘ä»¬ç»™ç”¨æˆ·æä¾›çš„æŸ¥è¯¢ç•Œé¢ä¸€å®šæ˜¯æœ‰æ¡ä»¶ï¼Œä¸èƒ½è®©ç”¨æˆ·è¿›è¡Œå¤§èŒƒå›´.(ä¸–ç•Œ)ï¼Œå¦‚æœéœ€è¦çš„å¯ä»¥æ ¹æ®ä¸åŒçš„è§„åˆ™ï¼Œå¯¹åº”å¤šå¥—åˆ†è¡¨.</li>
<li>æ£€ç´¢æ—¶å€™ï¼Œå¸¦åˆ†é¡µæ¡ä»¶ï¼Œå‡å°‘è¿”å›çš„æ•°æ®.</li>
<li>é¡¹ç›®ä¸­ï¼Œçµæ´»çš„æ ¹æ®éœ€æ±‚æ¥è€ƒè™‘.</li>
</ol>
<h2 id="å‚ç›´åˆ†å‰²"><a href="#å‚ç›´åˆ†å‰²" class="headerlink" title="å‚ç›´åˆ†å‰²"></a>å‚ç›´åˆ†å‰²</h2><p>å¦‚æœä¸€å¼ è¡¨æŸä¸ªå­—æ®µï¼Œä¿¡æ¯é‡å¤§ï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆå°‘æŸ¥è¯¢ï¼Œåˆ™å¯ä»¥è€ƒè™‘æŠŠè¿™äº›å­—æ®µï¼Œå•ç‹¬çš„æ”¾å…¥åˆ°ä¸€å¼ è¡¨ä¸­ï¼Œè¿™ç§æ–¹å¼ç§°ä¸ºå‚ç›´åˆ†å‰².</p>
]]></content>
      
        <categories>
            
            <category> æ•°æ®åº“ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Intellij IDEA æ¿€æ´»æ–¹æ³•]]></title>
      <url>/Intellij%20IDEA%20%E6%BF%80%E6%B4%BB%E6%96%B9%E6%B3%95.html</url>
      <content type="html"><![CDATA[<h2 id="å¡«å…¥ä¸‹é¢çš„license-server"><a href="#å¡«å…¥ä¸‹é¢çš„license-server" class="headerlink" title="å¡«å…¥ä¸‹é¢çš„license server:"></a>å¡«å…¥ä¸‹é¢çš„license server:</h2><p>ã€€ã€€<span class="exturl" data-url="aHR0cDovL2ludGVsbGlqLm1hbmRyb2lkLmNuLw==" title="http://intellij.mandroid.cn/">http://intellij.mandroid.cn/<i class="fa fa-external-link"></i></span><br>ã€€ã€€<span class="exturl" data-url="aHR0cDovL2lkZWEuaW1zeG0uY29tLw==" title="http://idea.imsxm.com/">http://idea.imsxm.com/<i class="fa fa-external-link"></i></span><br>ã€€ã€€<span class="exturl" data-url="aHR0cDovL2lkZWEuaXRlYmxvZy5jb20va2V5LnBocA==" title="http://idea.iteblog.com/key.php">http://idea.iteblog.com/key.php<i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> æœ‰æ–™ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ç¼–ç¨‹å·¥å…· </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[MySQLä¼˜åŒ–ï¼ˆäºŒï¼‰]]></title>
      <url>/MySQL%E4%BC%98%E5%8C%96%EF%BC%88%E4%BA%8C%EF%BC%89.html</url>
      <content type="html"><![CDATA[<h2 id="å››ç§ç´¢å¼•-ä¸»é”®ç´¢å¼•-å”¯ä¸€ç´¢å¼•-å…¨æ–‡ç´¢å¼•-æ™®é€šç´¢å¼•"><a href="#å››ç§ç´¢å¼•-ä¸»é”®ç´¢å¼•-å”¯ä¸€ç´¢å¼•-å…¨æ–‡ç´¢å¼•-æ™®é€šç´¢å¼•" class="headerlink" title="å››ç§ç´¢å¼•(ä¸»é”®ç´¢å¼•/å”¯ä¸€ç´¢å¼•/å…¨æ–‡ç´¢å¼•/æ™®é€šç´¢å¼•)"></a>å››ç§ç´¢å¼•(ä¸»é”®ç´¢å¼•/å”¯ä¸€ç´¢å¼•/å…¨æ–‡ç´¢å¼•/æ™®é€šç´¢å¼•)</h2><h3 id="1-æ·»åŠ "><a href="#1-æ·»åŠ " class="headerlink" title="1.    æ·»åŠ "></a>1.    æ·»åŠ </h3><h4 id="1-1ä¸»é”®ç´¢å¼•æ·»åŠ "><a href="#1-1ä¸»é”®ç´¢å¼•æ·»åŠ " class="headerlink" title="1.1ä¸»é”®ç´¢å¼•æ·»åŠ "></a>1.1ä¸»é”®ç´¢å¼•æ·»åŠ </h4><p>å½“ä¸€å¼ è¡¨ï¼ŒæŠŠæŸä¸ªåˆ—è®¾ä¸ºä¸»é”®çš„æ—¶å€™ï¼Œåˆ™è¯¥åˆ—å°±æ˜¯ä¸»é”®ç´¢å¼•<br>create table aaa (id int unsigned primary key auto_increment , name varchar(32) not null defaul â€˜â€™);<br>è¿™æ˜¯id åˆ—å°±æ˜¯ä¸»é”®ç´¢å¼•.<br>å¦‚æœä½ åˆ›å»ºè¡¨æ—¶ï¼Œæ²¡æœ‰æŒ‡å®šä¸»é”®ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥åœ¨åˆ›å»ºè¡¨åï¼Œåœ¨æ·»åŠ , æŒ‡ä»¤:<br>alter table è¡¨å add primary key (åˆ—å);<br>ä¸¾ä¾‹:<br>create table bbb (id int , name varchar(32) not null default â€˜â€™);<br>alter table bbb add primary key (id);</p>
<h4 id="1-2æ™®é€šç´¢å¼•"><a href="#1-2æ™®é€šç´¢å¼•" class="headerlink" title="1.2æ™®é€šç´¢å¼•"></a>1.2æ™®é€šç´¢å¼•</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ™®é€šç´¢å¼•çš„åˆ›å»ºï¼Œæ˜¯å…ˆåˆ›å»ºè¡¨ï¼Œç„¶ååœ¨åˆ›å»ºæ™®é€šç´¢å¼•<br>æ¯”å¦‚:<br>create table ccc(<br>id int unsigned,<br>name varchar(32)<br>)<br>create index ç´¢å¼•å on è¡¨ (åˆ—1,åˆ—å2);<br><a id="more"></a></p>
<h4 id="1-3åˆ›å»ºå…¨æ–‡ç´¢å¼•"><a href="#1-3åˆ›å»ºå…¨æ–‡ç´¢å¼•" class="headerlink" title="1.3åˆ›å»ºå…¨æ–‡ç´¢å¼•"></a>1.3åˆ›å»ºå…¨æ–‡ç´¢å¼•</h4><p>å…¨æ–‡ç´¢å¼•ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å¯¹æ–‡ä»¶ï¼Œæ–‡æœ¬çš„æ£€ç´¢, æ¯”å¦‚æ–‡ç« , å…¨æ–‡ç´¢å¼•é’ˆå¯¹MyISAMæœ‰ç”¨.<br>åˆ›å»º ï¼š<br>CREATE TABLE articles (<br>       id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,<br>       title VARCHAR(200),<br>       body TEXT,<br>       FULLTEXT (title,body)<br>     )engine=myisam charset utf8;</p>
<p>INSERT INTO articles (title,body) VALUES<br>     (â€˜MySQL Tutorialâ€™,â€™DBMS stands for DataBase â€¦â€™),<br>     (â€˜How To Use MySQL Wellâ€™,â€™After you went through a â€¦â€™),<br>     (â€˜Optimizing MySQLâ€™,â€™In this tutorial we will show â€¦â€™),<br>     (â€˜1001 MySQL Tricksâ€™,â€™1. Never run mysqld as root. 2. â€¦â€™),<br>     (â€˜MySQL vs. YourSQLâ€™,â€™In the following database comparison â€¦â€™),<br>     (â€˜MySQL Securityâ€™,â€™When configured properly, MySQL â€¦â€™);</p>
<p>å¦‚ä½•ä½¿ç”¨å…¨æ–‡ç´¢å¼•:<br>é”™è¯¯ç”¨æ³•:<br>select <em> from articles where body like â€˜%mysql%â€™; ã€ä¸ä¼šä½¿ç”¨åˆ°å…¨æ–‡ç´¢å¼•ã€‘<br>è¯æ˜:<br>explain  select </em> from articles where body like â€˜%mysql%â€™</p>
<p>æ­£ç¡®çš„ç”¨æ³•æ˜¯:<br>select * from articles where match(title,body) against(â€˜databaseâ€™); ã€å¯ä»¥ã€‘</p>
<p>â˜ è¯´æ˜:</p>
<ol>
<li>åœ¨mysqlä¸­fulltext ç´¢å¼•åªé’ˆå¯¹ myisamç”Ÿæ•ˆ</li>
<li>mysqlè‡ªå·±æä¾›çš„fulltexté’ˆå¯¹è‹±æ–‡ç”Ÿæ•ˆ-&gt;sphinx (coreseek) æŠ€æœ¯å¤„ç†ä¸­æ–‡</li>
<li>ä½¿ç”¨æ–¹æ³•æ˜¯ match(å­—æ®µå..) against(â€˜å…³é”®å­—â€™)</li>
<li>å…¨æ–‡ç´¢å¼•ä¸€ä¸ª å« åœæ­¢è¯,  å› ä¸ºåœ¨ä¸€ä¸ªæ–‡æœ¬ä¸­ï¼Œåˆ›å»ºç´¢å¼•æ˜¯ä¸€ä¸ªæ— ç©·å¤§çš„æ•°ï¼Œå› æ­¤ï¼Œå¯¹ä¸€äº›å¸¸ç”¨è¯å’Œå­—ç¬¦ï¼Œå°±ä¸ä¼šåˆ›å»ºï¼Œè¿™äº›è¯ï¼Œç§°ä¸ºåœæ­¢è¯.</li>
</ol>
<h4 id="1-4å”¯ä¸€ç´¢å¼•"><a href="#1-4å”¯ä¸€ç´¢å¼•" class="headerlink" title="1.4å”¯ä¸€ç´¢å¼•"></a>1.4å”¯ä¸€ç´¢å¼•</h4><p>â‘ å½“è¡¨çš„æŸåˆ—è¢«æŒ‡å®šä¸ºuniqueçº¦æŸæ—¶ï¼Œè¿™åˆ—å°±æ˜¯ä¸€ä¸ªå”¯ä¸€ç´¢å¼•<br>create table ddd(id int primary key auto_increment , name varchar(32) unique);<br>è¿™æ—¶, name åˆ—å°±æ˜¯ä¸€ä¸ªå”¯ä¸€ç´¢å¼•.<br>uniqueå­—æ®µå¯ä»¥ä¸ºNULL,å¹¶å¯ä»¥æœ‰å¤šNULL, ä½†æ˜¯å¦‚æœæ˜¯å…·ä½“å†…å®¹ï¼Œåˆ™ä¸èƒ½é‡å¤.<br>ä¸»é”®å­—æ®µï¼Œä¸èƒ½ä¸ºNULL,ä¹Ÿä¸èƒ½é‡å¤.<br>â‘¡åœ¨åˆ›å»ºè¡¨åï¼Œå†å»åˆ›å»ºå”¯ä¸€ç´¢å¼•<br>create table eee(id int primary key auto_increment, name varchar(32));<br>create unique index ç´¢å¼•å  on è¡¨å (åˆ—è¡¨..);</p>
<h3 id="2-æŸ¥è¯¢ç´¢å¼•"><a href="#2-æŸ¥è¯¢ç´¢å¼•" class="headerlink" title="2.    æŸ¥è¯¢ç´¢å¼•"></a>2.    æŸ¥è¯¢ç´¢å¼•</h3><p>desc è¡¨å ã€è¯¥æ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼šã€€ä¸èƒ½å¤Ÿæ˜¾ç¤ºç´¢å¼•å.ã€‘<br>show index(es) from è¡¨å<br>show keys from è¡¨å</p>
<p>###ã€€3.    åˆ é™¤</p>
<p>alter table è¡¨å drop index ç´¢å¼•å;<br>å¦‚æœåˆ é™¤ä¸»é”®ç´¢å¼•ã€‚<br>alter table è¡¨å drop primary key       [è¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜]</p>
<h3 id="4-ä¿®æ”¹"><a href="#4-ä¿®æ”¹" class="headerlink" title="4.    ä¿®æ”¹"></a>4.    ä¿®æ”¹</h3><p>å…ˆåˆ é™¤ï¼Œå†é‡æ–°åˆ›å»º.<br>ä¸ºä»€ä¹ˆåˆ›å»ºç´¢å¼•åï¼Œé€Ÿåº¦å°±ä¼šå˜å¿«?</p>
<h2 id="ç´¢å¼•ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹"><a href="#ç´¢å¼•ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="ç´¢å¼•ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹"></a>ç´¢å¼•ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹</h2><h3 id="ç´¢å¼•çš„ä»£ä»·"><a href="#ç´¢å¼•çš„ä»£ä»·" class="headerlink" title="ç´¢å¼•çš„ä»£ä»·:"></a>ç´¢å¼•çš„ä»£ä»·:</h3><ol>
<li>å ç”¨ç£ç›˜ç©ºé—´</li>
<li>å¯¹dmlæ“ä½œæœ‰å½±å“ï¼Œå˜æ…¢</li>
</ol>
<h2 id="åœ¨å“ªäº›åˆ—ä¸Šé€‚åˆæ·»åŠ ç´¢å¼•"><a href="#åœ¨å“ªäº›åˆ—ä¸Šé€‚åˆæ·»åŠ ç´¢å¼•" class="headerlink" title="åœ¨å“ªäº›åˆ—ä¸Šé€‚åˆæ·»åŠ ç´¢å¼•?"></a>åœ¨å“ªäº›åˆ—ä¸Šé€‚åˆæ·»åŠ ç´¢å¼•?</h2><p>æ€»ç»“: æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„å­—æ®µï¼Œæ‰åº”è¯¥åˆ›å»ºç´¢å¼•.<br>a: è‚¯å®šåœ¨whereæ¡ç»å¸¸ä½¿ç”¨ b: è¯¥å­—æ®µçš„å†…å®¹ä¸æ˜¯å”¯ä¸€çš„å‡ ä¸ªå€¼(sex) c: å­—æ®µå†…å®¹ä¸æ˜¯é¢‘ç¹å˜åŒ–.</p>
<h2 id="ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„äº‹é¡¹</h2><p>æŠŠdeptè¡¨ä¸­ï¼Œæˆ‘å¢åŠ å‡ ä¸ªéƒ¨é—¨:<br>alter table dept add index my<em>ind (dname,loc); //  dname å·¦è¾¹çš„åˆ—,locå°±æ˜¯å³è¾¹çš„åˆ—<br>è¯´æ˜ï¼Œå¦‚æœæˆ‘ä»¬çš„è¡¨ä¸­æœ‰å¤åˆç´¢å¼•(ç´¢å¼•ä½œç”¨åœ¨å¤šåˆ—ä¸Š)ï¼Œ æ­¤æ—¶æˆ‘ä»¬æ³¨æ„:<br>1ï¼Œ    å¯¹äºåˆ›å»ºçš„å¤šåˆ—ç´¢å¼•ï¼Œåªè¦æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨äº†æœ€å·¦è¾¹çš„åˆ—ï¼Œç´¢å¼•ä¸€èˆ¬å°±ä¼šè¢«ä½¿ç”¨ã€‚<br>explain select <em> from dept where loc=â€™aaaâ€™\G<br>å°±ä¸ä¼šä½¿ç”¨åˆ°ç´¢å¼•<br>2ï¼Œå¯¹äºä½¿ç”¨likeçš„æŸ¥è¯¢ï¼ŒæŸ¥è¯¢å¦‚æœæ˜¯  â€˜%aaaâ€™ ä¸ä¼šä½¿ç”¨åˆ°ç´¢å¼•<br>    â€˜aaa%â€™ ä¼šä½¿ç”¨åˆ°ç´¢å¼•ã€‚<br>æ¯”å¦‚: explain select </em> from dept where dname like â€˜%aaaâ€™\G<br>ä¸èƒ½ä½¿ç”¨ç´¢å¼•ï¼Œå³ï¼Œåœ¨likeæŸ¥è¯¢æ—¶ï¼Œå…³é”®çš„ â€˜å…³é”®å­—â€™ , æœ€å‰é¢ï¼Œä¸èƒ½ä½¿ç”¨ % æˆ–è€… </em>è¿™æ ·çš„å­—ç¬¦.ï¼Œ å¦‚æœä¸€å®šè¦å‰é¢æœ‰å˜åŒ–çš„å€¼ï¼Œåˆ™è€ƒè™‘ä½¿ç”¨ å…¨æ–‡ç´¢å¼•-&gt;sphinx.</p>
<ol>
<li>å¦‚æœæ¡ä»¶ä¸­æœ‰orï¼Œå³ä½¿å…¶ä¸­æœ‰æ¡ä»¶å¸¦ç´¢å¼•ä¹Ÿä¸ä¼šä½¿ç”¨ã€‚æ¢è¨€ä¹‹ï¼Œå°±æ˜¯è¦æ±‚ä½¿ç”¨çš„æ‰€æœ‰å­—æ®µï¼Œéƒ½å¿…é¡»å»ºç«‹ç´¢å¼•, æˆ‘ä»¬å»ºè®®å¤§å®¶å°½é‡é¿å…ä½¿ç”¨or å…³é”®å­—<br>select * from dept where dname=â€™xxxâ€™ or loc=â€™xxâ€™ or deptno=45</li>
<li>å¦‚æœåˆ—ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¸€å®šè¦åœ¨æ¡ä»¶ä¸­å°†æ•°æ®ä½¿ç”¨å¼•å·å¼•ç”¨èµ·æ¥ã€‚å¦åˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚(æ·»åŠ æ—¶,å­—ç¬¦ä¸²å¿…é¡»â€™â€™), ä¹Ÿå°±æ˜¯ï¼Œå¦‚æœåˆ—æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå°±ä¸€å®šè¦ç”¨ â€˜â€™ æŠŠä»–åŒ…æ‹¬èµ·æ¥.</li>
<li>å¦‚æœmysqlä¼°è®¡ä½¿ç”¨å…¨è¡¨æ‰«æè¦æ¯”ä½¿ç”¨ç´¢å¼•å¿«ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚<br>explain å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ä¸çœŸæ­£æ‰§è¡ŒæŸä¸ªsqlè¯­å¥æ—¶ï¼Œå°±æ‰§è¡Œmysqlæ€æ ·æ‰§è¡Œï¼Œè¿™æ ·åˆ©ç”¨æˆ‘ä»¬å»åˆ†æsqlæŒ‡ä»¤.</li>
</ol>
<h2 id="å¦‚ä½•æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨çš„æƒ…å†µ"><a href="#å¦‚ä½•æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨çš„æƒ…å†µ" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨çš„æƒ…å†µ:"></a>å¦‚ä½•æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨çš„æƒ…å†µ:</h2><p>show status like â€˜Handler_read%â€™;<br>å¤§å®¶å¯ä»¥æ³¨æ„ï¼š<br>handler_read_key:è¿™ä¸ªå€¼è¶Šé«˜è¶Šå¥½ï¼Œè¶Šé«˜è¡¨ç¤ºä½¿ç”¨ç´¢å¼•æŸ¥è¯¢åˆ°çš„æ¬¡æ•°ã€‚<br>    handler_read_rnd_next:è¿™ä¸ªå€¼è¶Šé«˜ï¼Œè¯´æ˜æŸ¥è¯¢ä½æ•ˆã€‚</p>
<h2 id="sqlè¯­å¥çš„å°æŠ€å·§"><a href="#sqlè¯­å¥çš„å°æŠ€å·§" class="headerlink" title="sqlè¯­å¥çš„å°æŠ€å·§"></a>sqlè¯­å¥çš„å°æŠ€å·§</h2><ol>
<li>åœ¨ä½¿ç”¨group by åˆ†ç»„æŸ¥è¯¢æ˜¯ï¼Œé»˜è®¤åˆ†ç»„åï¼Œè¿˜ä¼šæ’åºï¼Œå¯èƒ½ä¼šé™ä½é€Ÿåº¦.<br>æ¯”å¦‚:<br>åœ¨group by åé¢å¢åŠ  order by null å°±å¯ä»¥é˜²æ­¢æ’åº.</li>
<li>æœ‰äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨è¿æ¥æ¥æ›¿ä»£å­æŸ¥è¯¢ã€‚å› ä¸ºä½¿ç”¨joinï¼ŒMySQLä¸éœ€è¦åœ¨å†…å­˜ä¸­åˆ›å»ºä¸´æ—¶è¡¨ã€‚<br>select <em> from dept, emp where dept.deptno=emp.deptno; [ç®€å•å¤„ç†æ–¹å¼]<br>select </em> from dept left join emp on dept.deptno=emp.deptno;  [å·¦å¤–è¿æ¥ï¼Œæ›´ok!]</li>
</ol>
<h2 id="å¦‚ä½•é€‰æ‹©mysqlçš„å­˜å‚¨å¼•æ“"><a href="#å¦‚ä½•é€‰æ‹©mysqlçš„å­˜å‚¨å¼•æ“" class="headerlink" title="å¦‚ä½•é€‰æ‹©mysqlçš„å­˜å‚¨å¼•æ“"></a>å¦‚ä½•é€‰æ‹©mysqlçš„å­˜å‚¨å¼•æ“</h2><p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„å­˜å‚¨å¼•æ“ myisam / innodb/ memory<br>myisam å­˜å‚¨: å¦‚æœè¡¨å¯¹äº‹åŠ¡è¦æ±‚ä¸é«˜ï¼ŒåŒæ—¶æ˜¯ä»¥æŸ¥è¯¢å’Œæ·»åŠ ä¸ºä¸»çš„ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨myisamå­˜å‚¨å¼•æ“. ,æ¯”å¦‚ bbs ä¸­çš„ å‘å¸–è¡¨ï¼Œå›å¤è¡¨.<br>INNODB å­˜å‚¨: å¯¹äº‹åŠ¡è¦æ±‚é«˜ï¼Œä¿å­˜çš„æ•°æ®éƒ½æ˜¯é‡è¦æ•°æ®ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨INNODB,æ¯”å¦‚è®¢å•è¡¨ï¼Œè´¦å·è¡¨.</p>
<h2 id="é—®-MyISAM-å’Œ-INNODBçš„åŒºåˆ«"><a href="#é—®-MyISAM-å’Œ-INNODBçš„åŒºåˆ«" class="headerlink" title="é—® MyISAM å’Œ INNODBçš„åŒºåˆ«"></a>é—® MyISAM å’Œ INNODBçš„åŒºåˆ«</h2><ol>
<li>äº‹åŠ¡å®‰å…¨</li>
<li>æŸ¥è¯¢å’Œæ·»åŠ é€Ÿåº¦</li>
<li>æ”¯æŒå…¨æ–‡ç´¢å¼•</li>
<li>é”æœºåˆ¶</li>
<li>å¤–é”® MyISAM ä¸æ”¯æŒå¤–é”®ï¼Œ INNODBæ”¯æŒå¤–é”®. (åœ¨PHPå¼€å‘ä¸­ï¼Œé€šå¸¸ä¸è®¾ç½®å¤–é”®ï¼Œé€šå¸¸æ˜¯åœ¨ç¨‹åºä¸­ä¿è¯æ•°æ®çš„ä¸€è‡´)<br>Memory å­˜å‚¨ï¼Œæ¯”å¦‚æˆ‘ä»¬æ•°æ®å˜åŒ–é¢‘ç¹ï¼Œä¸éœ€è¦å…¥åº“ï¼ŒåŒæ—¶åˆé¢‘ç¹çš„æŸ¥è¯¢å’Œä¿®æ”¹ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨memory, é€Ÿåº¦æå¿«. </li>
</ol>
<h2 id="å¦‚æœä½ çš„æ•°æ®åº“çš„å­˜å‚¨å¼•æ“æ˜¯myisam-è¯·ä¸€å®šè®°ä½è¦å®šæ—¶è¿›è¡Œç¢ç‰‡æ•´ç†"><a href="#å¦‚æœä½ çš„æ•°æ®åº“çš„å­˜å‚¨å¼•æ“æ˜¯myisam-è¯·ä¸€å®šè®°ä½è¦å®šæ—¶è¿›è¡Œç¢ç‰‡æ•´ç†" class="headerlink" title="å¦‚æœä½ çš„æ•°æ®åº“çš„å­˜å‚¨å¼•æ“æ˜¯myisam,è¯·ä¸€å®šè®°ä½è¦å®šæ—¶è¿›è¡Œç¢ç‰‡æ•´ç†"></a>å¦‚æœä½ çš„æ•°æ®åº“çš„å­˜å‚¨å¼•æ“æ˜¯myisam,è¯·ä¸€å®šè®°ä½è¦å®šæ—¶è¿›è¡Œç¢ç‰‡æ•´ç†</h2><p>ä¸¾ä¾‹è¯´æ˜:<br>create table test100(id int unsigned ,name varchar(32))engine=myisam;<br>insert into test100 values(1,â€™aaaaaâ€™);<br>insert into test100 values(2,â€™bbbbâ€™);<br>insert into test100 values(3,â€™cccccâ€™);<br>æˆ‘ä»¬åº”è¯¥å®šä¹‰å¯¹myisamè¿›è¡Œæ•´ç†<br>optimize table test100;<br>mysql_query(â€œoptimize tables $è¡¨åâ€);</p>
]]></content>
      
        <categories>
            
            <category> æ•°æ®åº“ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[MySQLä¼˜åŒ–ï¼ˆä¸€ï¼‰]]></title>
      <url>/MySQL%E4%BC%98%E5%8C%96%EF%BC%88%E4%B8%80%EF%BC%89.html</url>
      <content type="html"><![CDATA[<h2 id="MySQLæ•°æ®åº“çš„ä¼˜åŒ–æŠ€æœ¯"><a href="#MySQLæ•°æ®åº“çš„ä¼˜åŒ–æŠ€æœ¯" class="headerlink" title="MySQLæ•°æ®åº“çš„ä¼˜åŒ–æŠ€æœ¯"></a>MySQLæ•°æ®åº“çš„ä¼˜åŒ–æŠ€æœ¯</h2><h3 id="å¯¹MySQLä¼˜åŒ–æ—¶ä¸€ä¸ªç»¼åˆæ€§çš„æŠ€æœ¯ï¼Œä¸»è¦åŒ…æ‹¬"><a href="#å¯¹MySQLä¼˜åŒ–æ—¶ä¸€ä¸ªç»¼åˆæ€§çš„æŠ€æœ¯ï¼Œä¸»è¦åŒ…æ‹¬" class="headerlink" title="å¯¹MySQLä¼˜åŒ–æ—¶ä¸€ä¸ªç»¼åˆæ€§çš„æŠ€æœ¯ï¼Œä¸»è¦åŒ…æ‹¬"></a>å¯¹MySQLä¼˜åŒ–æ—¶ä¸€ä¸ªç»¼åˆæ€§çš„æŠ€æœ¯ï¼Œä¸»è¦åŒ…æ‹¬</h3><p>1ã€è¡¨çš„è®¾è®¡åˆç†åŒ–ï¼ˆç¬¦åˆ 3NFï¼‰<br>2ã€æ·»åŠ é€‚å½“ç´¢å¼•(index)ï¼šæ™®é€šç´¢å¼•ã€ä¸»é”®ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•(unique)ã€å…¨æ–‡ç´¢å¼•<br>3ã€åˆ†è¡¨æŠ€æœ¯ï¼ˆæ°´å¹³åˆ†å‰²ã€å‚ç›´åˆ†å‰²ï¼‰<br>4ã€è¯»å†™åˆ†ç¦»<br>5ã€å­˜å‚¨è¿‡ç¨‹ï¼ˆæ¨¡å—åŒ–ç¼–ç¨‹ï¼Œå¯ä»¥æä¾›è¯»å†™é€Ÿåº¦ï¼‰<br>6ã€å¯¹MySQLé…ç½®ä¼˜åŒ–ï¼ˆé…ç½®æœ€å¤§å¹¶å‘æ•°my.iniï¼Œè°ƒæ•´ç¼“å­˜å¤§å°ï¼‰<br>7ã€å‡çº§MySQLæœåŠ¡å™¨ç¡¬ä»¶<br>8ã€å®šæ—¶æ¸…æ¥šä¸éœ€è¦çš„æ•°æ®ï¼Œå®šæ—¶è¿›è¡Œç¢ç‰‡å¤„ç†ï¼ˆMyISAMï¼‰</p>
<h2 id="ä»€ä¹ˆæ ·çš„è¡¨æ‰æ˜¯ç¬¦åˆ3NF"><a href="#ä»€ä¹ˆæ ·çš„è¡¨æ‰æ˜¯ç¬¦åˆ3NF" class="headerlink" title="ä»€ä¹ˆæ ·çš„è¡¨æ‰æ˜¯ç¬¦åˆ3NF"></a>ä»€ä¹ˆæ ·çš„è¡¨æ‰æ˜¯ç¬¦åˆ3NF</h2><p>è¡¨çš„èŒƒå¼ï¼Œæ˜¯é¦–å…ˆç¬¦åˆ1NFï¼Œæ‰èƒ½æ»¡è¶³2NFï¼Œè¿›ä¸€æ­¥æ»¡è¶³3NF<br>1NFï¼šå³è¡¨çš„åˆ—å…·æœ‰åŸå­æ€§ï¼Œä¸å¯å†åˆ†è§£ï¼Œå³åˆ—çš„ä¿¡æ¯ï¼Œä¸èƒ½åˆ†è§£ï¼Œåªè¦æ•°æ®åº“æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼ˆmysql/oracle/db2/infomix/sysbase/sql serverï¼‰ï¼Œå°±è‡ªåŠ¨æ»¡è¶³1NF<br><a id="more"></a></p>
<h3 id="æ•°æ®åº“çš„åˆ†ç±»"><a href="#æ•°æ®åº“çš„åˆ†ç±»" class="headerlink" title="æ•°æ®åº“çš„åˆ†ç±»"></a>æ•°æ®åº“çš„åˆ†ç±»</h3><p>å…³ç³»å‹æ•°æ®åº“ï¼šMySQL/oracle/db2/infomix/sysbase/sql server<br>éå…³ç³»å‹æ•°æ®åº“ï¼šï¼ˆç‰¹ç‚¹ï¼šé¢å‘å¯¹è±¡æˆ–è€…é›†åˆï¼‰<br>NoSQLæ•°æ®åº“ï¼šMongoDB(ç‰¹ç‚¹æ˜¯é¢å‘æ–‡æ¡£)<br>2NFï¼šè¡¨ä¸­çš„è®°å½•æ˜¯å”¯ä¸€çš„ï¼Œå°±æ»¡è¶³2NFï¼Œé€šå¸¸æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªä¸»é”®æ¥å®ç°<br>3NFï¼šå³è¡¨ä¸­ä¸è¦å†—ä½™æ•°æ®ï¼Œå°±æ˜¯è¯´ï¼Œè¡¨çš„ä¿¡æ¯ï¼Œå¦‚æœèƒ½å¤Ÿè¢«æ¨å¯¼å‡ºæ¥ï¼Œå°±ä¸åº”è¯¥å•ç‹¬çš„è®¾è®¡ä¸€ä¸ªå­—æ®µæ¥å­˜æ”¾ã€‚</p>
<h2 id="SQLè¯­å¥æœ¬èº«çš„ä¼˜åŒ–"><a href="#SQLè¯­å¥æœ¬èº«çš„ä¼˜åŒ–" class="headerlink" title="SQLè¯­å¥æœ¬èº«çš„ä¼˜åŒ–"></a>SQLè¯­å¥æœ¬èº«çš„ä¼˜åŒ–</h2><p>é—®é¢˜æ˜¯ï¼š å¦‚ä½•ä»ä¸€ä¸ªå¤§é¡¹ç›®ä¸­ï¼Œè¿…é€Ÿçš„å®šä½æ‰§è¡Œé€Ÿåº¦æ…¢çš„è¯­å¥. (å®šä½æ…¢æŸ¥è¯¢)<br>â‘     é¦–å…ˆæˆ‘ä»¬äº†è§£mysqlæ•°æ®åº“çš„ä¸€äº›è¿è¡ŒçŠ¶æ€å¦‚ä½•æŸ¥è¯¢(æ¯”å¦‚æƒ³çŸ¥é“å½“å‰mysqlè¿è¡Œçš„æ—¶é—´/ä¸€å…±æ‰§è¡Œäº†å¤šå°‘æ¬¡select/update/delete.. / å½“å‰è¿æ¥)<br>show status<br>å¸¸ç”¨çš„:<br>show status like â€˜uptimeâ€™ ;<br>show  stauts like â€˜com_selectâ€™  show stauts like â€˜com_insertâ€™ â€¦ç±»æ¨ update  delete<br>â˜ show [session|global] status like â€¦. å¦‚æœä½ ä¸å†™  [session|global] é»˜è®¤æ˜¯session ä¼šè¯ï¼ŒæŒ‡å–å‡ºå½“å‰çª—å£çš„æ‰§è¡Œï¼Œå¦‚æœä½ æƒ³çœ‹æ‰€æœ‰(ä»mysql å¯åŠ¨åˆ°ç°åœ¨ï¼Œåˆ™åº”è¯¥ global)<br>show status like â€˜connectionsâ€™;<br>//æ˜¾ç¤ºæ…¢æŸ¥è¯¢æ¬¡æ•°<br>show status like â€˜slow_queriesâ€™;</p>
<p>â‘¡    å¦‚ä½•å»å®šä½æ…¢æŸ¥è¯¢<br>æ„å»ºä¸€ä¸ªå¤§è¡¨(400 ä¸‡)-&gt; å­˜å‚¨è¿‡ç¨‹æ„å»º<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œmysqlè®¤ä¸º10ç§’æ‰æ˜¯ä¸€ä¸ªæ…¢æŸ¥è¯¢.<br>ï¬    ä¿®æ”¹mysqlçš„æ…¢æŸ¥è¯¢.<br>show variables like â€˜long_query_timeâ€™ ; //å¯ä»¥æ˜¾ç¤ºå½“å‰æ…¢æŸ¥è¯¢æ—¶é—´<br>set long_query_time=1 ;//å¯ä»¥ä¿®æ”¹æ…¢æŸ¥è¯¢æ—¶é—´</p>
<p>æ„å»ºå¤§è¡¨-&gt;å¤§è¡¨ä¸­è®°å½•æœ‰è¦æ±‚, è®°å½•æ˜¯ä¸åŒæ‰æœ‰ç”¨ï¼Œå¦åˆ™æµ‹è¯•æ•ˆæœå’ŒçœŸå®çš„ç›¸å·®å¤§.<br>åˆ›å»º:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept( <span class="comment">/*éƒ¨é—¨è¡¨*/</span></span><br><span class="line">deptno MEDIUMINT   <span class="keyword">UNSIGNED</span>  <span class="keyword">NOT</span> <span class="literal">NULL</span>  <span class="keyword">DEFAULT</span> <span class="number">0</span>,  <span class="comment">/*ç¼–å·*/</span></span><br><span class="line">dname <span class="built_in">VARCHAR</span>(<span class="number">20</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span>  <span class="keyword">DEFAULT</span> <span class="string">""</span>, <span class="comment">/*åç§°*/</span></span><br><span class="line">loc <span class="built_in">VARCHAR</span>(<span class="number">13</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">""</span> <span class="comment">/*åœ°ç‚¹*/</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=MyISAM <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp</span><br><span class="line">(empno  MEDIUMINT <span class="keyword">UNSIGNED</span>  <span class="keyword">NOT</span> <span class="literal">NULL</span>  <span class="keyword">DEFAULT</span> <span class="number">0</span>, <span class="comment">/*ç¼–å·*/</span></span><br><span class="line">ename <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">""</span>, <span class="comment">/*åå­—*/</span></span><br><span class="line">job <span class="built_in">VARCHAR</span>(<span class="number">9</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">""</span>,<span class="comment">/*å·¥ä½œ*/</span></span><br><span class="line">mgr MEDIUMINT <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,<span class="comment">/*ä¸Šçº§ç¼–å·*/</span></span><br><span class="line">hiredate <span class="built_in">DATE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,<span class="comment">/*å…¥èŒæ—¶é—´*/</span></span><br><span class="line">sal <span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span>,<span class="comment">/*è–ªæ°´*/</span></span><br><span class="line">comm <span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,<span class="comment">/*çº¢åˆ©*/</span></span><br><span class="line">deptno MEDIUMINT <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="comment">/*éƒ¨é—¨ç¼–å·*/</span></span><br><span class="line">)<span class="keyword">ENGINE</span>=MyISAM <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> salgrade</span><br><span class="line">(</span><br><span class="line">grade MEDIUMINT <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">losal <span class="built_in">DECIMAL</span>(<span class="number">17</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">hisal <span class="built_in">DECIMAL</span>(<span class="number">17</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line">)<span class="keyword">ENGINE</span>=MyISAM <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure></p>
<p>æµ‹è¯•æ•°æ®ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="number">700</span>,<span class="number">1200</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="number">1201</span>,<span class="number">1400</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">3</span>,<span class="number">1401</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">4</span>,<span class="number">2001</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">5</span>,<span class="number">3001</span>,<span class="number">9999</span>);</span><br></pre></td></tr></table></figure></p>
<p>ä¸ºäº†å­˜å‚¨è¿‡ç¨‹èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œï¼Œæˆ‘ä»¬éœ€è¦æŠŠå‘½ä»¤æ‰§è¡Œç»“æŸç¬¦ä¿®æ”¹<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> rand_string(n <span class="built_in">INT</span>) </span><br><span class="line"><span class="keyword">returns</span> <span class="built_in">varchar</span>(<span class="number">255</span>) #è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line">#chars_strå®šä¹‰ä¸€ä¸ªå˜é‡ chars_str,ç±»å‹æ˜¯ <span class="built_in">varchar</span>(<span class="number">100</span>),é»˜è®¤å€¼<span class="string">'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ'</span>;</span><br><span class="line"> <span class="keyword">declare</span> chars_str <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">default</span></span><br><span class="line">   <span class="string">'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ'</span>;</span><br><span class="line"> <span class="keyword">declare</span> return_str <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">default</span> <span class="string">''</span>;</span><br><span class="line"> <span class="keyword">declare</span> i <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"> while i &lt; n do </span><br><span class="line">   <span class="keyword">set</span> return_str =<span class="keyword">concat</span>(return_str,<span class="keyword">substring</span>(chars_str,<span class="keyword">floor</span>(<span class="number">1</span>+<span class="keyword">rand</span>()*<span class="number">52</span>),<span class="number">1</span>));</span><br><span class="line">   <span class="keyword">set</span> i = i + <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">end</span> <span class="keyword">while</span>;</span><br><span class="line">  return return_str;</span><br><span class="line">  <span class="keyword">end</span> $$</span><br></pre></td></tr></table></figure></p>
<p>åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> insert_emp(<span class="keyword">in</span> <span class="keyword">start</span> <span class="built_in">int</span>(<span class="number">10</span>),<span class="keyword">in</span> max_num <span class="built_in">int</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">declare</span> i <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span>; </span><br><span class="line">#set autocommit =0 æŠŠautocommitè®¾ç½®æˆ0</span><br><span class="line"> <span class="keyword">set</span> autocommit = <span class="number">0</span>;  </span><br><span class="line"> repeat</span><br><span class="line"> <span class="keyword">set</span> i = i + <span class="number">1</span>;</span><br><span class="line"> <span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span> ((<span class="keyword">start</span>+i) ,rand_string(<span class="number">6</span>),<span class="string">'SALESMAN'</span>,<span class="number">0001</span>,<span class="keyword">curdate</span>(),<span class="number">2000</span>,<span class="number">400</span>,rand_num());</span><br><span class="line">  until i = max_num</span><br><span class="line"> <span class="keyword">end</span> <span class="keyword">repeat</span>;</span><br><span class="line">   <span class="keyword">commit</span>;</span><br><span class="line"> <span class="keyword">end</span> $$</span><br></pre></td></tr></table></figure></p>
<p>#è°ƒç”¨åˆšåˆšå†™å¥½çš„å‡½æ•°, 1800000æ¡è®°å½•,ä»100001å·å¼€å§‹<br>call insert_emp(100001,4000000);<br>â‘¢    è¿™æ—¶æˆ‘ä»¬å¦‚æœå‡ºç°ä¸€æ¡è¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡1ç§’ä¸­ï¼Œå°±ä¼šç»Ÿè®¡åˆ°.<br>â‘£    å¦‚æœæŠŠæ…¢æŸ¥è¯¢çš„sqlè®°å½•åˆ°æˆ‘ä»¬çš„ä¸€ä¸ªæ—¥å¿—ä¸­<br>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„mysqlä¸ä¼šè®°å½•æ…¢æŸ¥è¯¢ï¼Œéœ€è¦åœ¨å¯åŠ¨mysqlæ—¶å€™ï¼ŒæŒ‡å®šè®°å½•æ…¢æŸ¥è¯¢æ‰å¯ä»¥<br>bin\mysqld.exe - -safe-mode  - -slow-query-log [mysql5.5 å¯ä»¥åœ¨my.iniæŒ‡å®š]<br>bin\mysqld.exe â€“log-slow-queries=d:/abc.log [ä½ç‰ˆæœ¬mysql5.0å¯ä»¥åœ¨my.iniæŒ‡å®š]</p>
<p>å…ˆå…³é—­mysql,å†å¯åŠ¨, å¦‚æœå¯ç”¨äº†æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œé»˜è®¤æŠŠè¿™ä¸ªæ–‡ä»¶æ”¾åœ¨<br>my.ini æ–‡ä»¶ä¸­è®°å½•çš„ä½ç½®</p>
<p>#Path to the database root<br>datadir=â€C:/Documents and Settings/All Users/Application Data/MySQL/MySQL Server 5.5/Data/â€œ</p>
<p>â‘¤    æµ‹è¯•,å¯ä»¥çœ‹åˆ°åœ¨æ—¥å¿—ä¸­å°±è®°å½•ä¸‹æˆ‘ä»¬çš„mysqlæ…¢sqlè¯­å¥.<br>ä¼˜åŒ–é—®é¢˜.<br>é€šè¿‡ explain è¯­å¥å¯ä»¥åˆ†æï¼Œmysqlå¦‚ä½•æ‰§è¡Œä½ çš„sqlè¯­å¥</p>
]]></content>
      
        <categories>
            
            <category> æ•°æ®åº“ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¦‚ä½•é˜…è¯»æºä»£ç ]]></title>
      <url>/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E6%BA%90%E4%BB%A3%E7%A0%81.html</url>
      <content type="html"><![CDATA[<p>é˜…è¯»åˆ«äººçš„ä»£ç ä½œä¸ºå¼€å‘äººå‘˜æ˜¯ä¸€ä»¶ç»å¸¸è¦åšçš„äº‹æƒ…ã€‚ä¸€ä¸ªæ˜¯å­¦ä¹ æ–°çš„ç¼–ç¨‹è¯­è¨€çš„æ—¶å€™é€šè¿‡é˜…è¯»åˆ«äººçš„ä»£ç æ˜¯ä¸€ä¸ªæœ€å¥½çš„å­¦ä¹ æ–¹æ³•ï¼Œå¦å¤–æ˜¯ç§¯ç´¯ç¼–ç¨‹ç»éªŒã€‚å¦‚æœä½ æœ‰æœºä¼šé˜…è¯»ä¸€äº›æ“ä½œç³»ç»Ÿçš„ä»£ç ä¼šå¸®åŠ©ä½ ç†è§£ä¸€äº›åŸºæœ¬çš„åŸç†ã€‚è¿˜æœ‰å°±æ˜¯åœ¨ä½ ä½œä¸ºä¸€ä¸ªè´¨é‡ä¿è¯äººå‘˜æˆ–ä¸€ä¸ªå°é¢†å¯¼çš„æ—¶å€™å¦‚æœä½ è¦åšç™½ç›’æµ‹è¯•çš„æ—¶å€™æ²¡æœ‰é˜…è¯»ä»£ç çš„èƒ½åŠ›æ˜¯ä¸èƒ½å®Œæˆç›¸åº”çš„ä»»åŠ¡ã€‚æœ€åä¸€ä¸ªå°±æ˜¯å¦‚æœä½ ä¸­é€”æ¥æ‰‹ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™æˆ–ç»™ä¸€ä¸ªé¡¹ç›®åšå”®åæœåŠ¡çš„æ—¶å€™æ˜¯è¦æœ‰é˜…è¯»ä»£ç çš„èƒ½åŠ›çš„ã€‚</p>
<h2 id="æ”¶é›†æ‰€æœ‰å¯èƒ½æ”¶é›†çš„ææ–™"><a href="#æ”¶é›†æ‰€æœ‰å¯èƒ½æ”¶é›†çš„ææ–™" class="headerlink" title="æ”¶é›†æ‰€æœ‰å¯èƒ½æ”¶é›†çš„ææ–™"></a>æ”¶é›†æ‰€æœ‰å¯èƒ½æ”¶é›†çš„ææ–™</h2><p>ã€€ã€€é˜…è¯»ä»£ç è¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯æ”¶é›†æ‰€æœ‰å’Œé¡¹ç›®ç›¸å…³çš„èµ„æ–™ã€‚æ¯”å¦‚ä½ è¦åšä¸€ä¸ªé¡¹ç›®çš„å”®åæœåŠ¡ï¼Œé‚£ä¹ˆä½ é¦–å…ˆè¦ææ˜ç™½é¡¹ç›®åšä»€ä¹ˆç”¨çš„ï¼Œé‚£ä¹ˆè°ƒç ”æ–‡æ¡£ã€æ¦‚è¦è®¾è®¡æ–‡æ¡£ã€è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€æµ‹è¯•æ–‡æ¡£ã€ä½¿ç”¨æ‰‹å†Œéƒ½æ˜¯ä½ è¦æœ€å…ˆæåˆ°æ‰‹çš„ã€‚å¦‚æœä½ æ˜¯ä¸ºäº†å­¦ä¹ é‚£ä¹ˆå°½é‡æ”¶é›†å’Œä½ çš„å­¦ä¹ æœ‰å…³çš„èµ„æ–™ï¼Œæ¯”å¦‚ä½ æƒ³å­¦ä¹ Linuxçš„æ–‡ä»¶ç³»ç»Ÿçš„ä»£ç ï¼Œé‚£æœ€å¥½è¦æ‰¾åˆ°linuxçš„ä½¿ç”¨æ‰‹å†Œã€ä»¥åŠæ–‡ä»¶ç³»ç»Ÿè®¾è®¡çš„æ–¹æ³•ã€æ•°æ®ç»“æ„çš„è¯´æ˜ã€‚(è¿™äº›èµ„æ–™åœ¨ä¹¦åº—é‡Œéƒ½å¯ä»¥æ‰¾åˆ°)ã€‚<br><a id="more"></a></p>
<h2 id="ææ–™çš„ç§ç±»åˆ†ä¸ºå‡ ç§ç±»å‹"><a href="#ææ–™çš„ç§ç±»åˆ†ä¸ºå‡ ç§ç±»å‹" class="headerlink" title="ææ–™çš„ç§ç±»åˆ†ä¸ºå‡ ç§ç±»å‹"></a>ææ–™çš„ç§ç±»åˆ†ä¸ºå‡ ç§ç±»å‹</h2><h3 id="åŸºç¡€èµ„æ–™ã€‚"><a href="#åŸºç¡€èµ„æ–™ã€‚" class="headerlink" title="åŸºç¡€èµ„æ–™ã€‚"></a>åŸºç¡€èµ„æ–™ã€‚</h3><p>ã€€ã€€æ¯”å¦‚ä½ é˜…è¯»turbo c2çš„æºä»£ç ä½ è¦æœ‰turbo c2çš„å‡½æ•°æ‰‹å†Œï¼Œä½¿ç”¨æ‰‹å†Œç­‰ä¸“ä¸šä¹¦ç±ï¼Œmsc 6.0æˆ–è€…Java çš„è¯ä¸ä½†è¦æœ‰å‡½æ•°æ‰‹å†Œï¼Œè¿˜è¦æœ‰ç±»åº“å‡½æ•°æ‰‹å†Œã€‚è¿™äº›èµ„æ–™éƒ½æ˜¯ä½ çš„åŸºç¡€èµ„æ–™ã€‚å¦å¤–ä½ è¦æœ‰ä¸€äº›å…³äºumlçš„èµ„æ–™å¯ä»¥ä½œä¸ºæŸ¥è¯¢æ‰‹å†Œä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©</p>
<h3 id="å’Œç¨‹åºç›¸å…³çš„ä¸“ä¸šèµ„æ–™ã€‚"><a href="#å’Œç¨‹åºç›¸å…³çš„ä¸“ä¸šèµ„æ–™ã€‚" class="headerlink" title="å’Œç¨‹åºç›¸å…³çš„ä¸“ä¸šèµ„æ–™ã€‚"></a>å’Œç¨‹åºç›¸å…³çš„ä¸“ä¸šèµ„æ–™ã€‚</h3><p>ã€€ã€€æ¯ä¸€ä¸ªç¨‹åºéƒ½æ˜¯å’Œç›¸å…³è¡Œä¸šç›¸å…³çš„ã€‚æ¯”å¦‚æˆ‘é˜…è¯»è¿‡ä¸€ä¸ªå…³äºæ°”è±¡åˆ†ææ–¹é¢çš„ä»£ç ï¼Œå› ä¸ºé‡Œè¾¹ç”¨åˆ°äº†ä¸€ä¸ªå¤æ‚çš„æ•°æ®è½¬æ¢å…¬å¼ï¼Œæ‰€ä»¥ä¸å¾—ä¸æŠŠè‡ªå·±çš„å¤§å­¦æ—¶å€™è¯¾æœ¬ æ‰¾å‡ºæ¥æ¥å¤ä¹ ä¸€ä¸‹é«˜ç­‰æ•°å­¦çš„å†…å®¹ã€‚å¦‚æœä½ æƒ³é˜…è¯»linuxçš„æ–‡ä»¶ç®¡ç†çš„ä»£ç ï¼Œé‚£ä¹ˆæ‰¾ä¸€æœ¬è®²è§£linuxæ–‡ä»¶ç³»ç»Ÿçš„ä¹¦å¯¹ä½ çš„å¸®åŠ©ä¼šå¾ˆå¤§ã€‚</p>
<h3 id="ç›¸å…³é¡¹ç›®çš„æ–‡æ¡£èµ„æ–™"><a href="#ç›¸å…³é¡¹ç›®çš„æ–‡æ¡£èµ„æ–™" class="headerlink" title="ç›¸å…³é¡¹ç›®çš„æ–‡æ¡£èµ„æ–™"></a>ç›¸å…³é¡¹ç›®çš„æ–‡æ¡£èµ„æ–™</h3><p>ã€€ã€€è¿™ä¸€éƒ¨åˆ†çš„èµ„æ–™åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ä¸ªç›¸å…³è¡Œä¸šçš„èµ„æ–™ï¼Œæ¯”å¦‚ä½ è¦é˜…è¯»ä¸€ä¸ªç¨åŠ¡ç³»ç»Ÿçš„ä»£ç é‚£ä¹ˆæœ‰ä¸€äº›è´¢åŠ¡/ç¨åŠ¡ç³»ç»Ÿçš„ä¸“ä¸šèµ„æ–™å’Œå›½å®¶çš„ç›¸å…³çš„æ³•å¾‹ã€æ³•è§„çš„èµ„æ–™æ˜¯ å¿…ä¸å¯å°‘çš„ã€‚æ­¤å¤–å°±æ˜¯å…³äºè¿™ä¸ªé¡¹ç›®çš„éœ€æ±‚åˆ†ææŠ¥å‘Šã€æ¦‚è¦è®¾è®¡æŠ¥å‘Šã€è¯¦ç»†è®¾è®¡æŠ¥å‘Šï¼Œä½¿ç”¨æ‰‹å†Œã€æµ‹è¯•æŠ¥å‘Šç­‰ï¼Œå°½é‡å¤šæ”¶é›†å¯¹ä½ ä»¥åçš„ä»£ç é˜…è¯»æ˜¯å¾ˆé‡è¦çš„</p>
<h2 id="çŸ¥è¯†å‡†å¤‡"><a href="#çŸ¥è¯†å‡†å¤‡" class="headerlink" title="çŸ¥è¯†å‡†å¤‡"></a>çŸ¥è¯†å‡†å¤‡</h2><p>ã€€ã€€äº†è§£åŸºç¡€çŸ¥è¯†ï¼Œä¸è¦ä¸Šæ¥å°±é˜…è¯»ä»£ç ï¼Œæ‰“å¥½åŸºç¡€å¯ä»¥åšåˆ°äº‹åŠåŠŸå€çš„æ•ˆæœ</p>
<h2 id="ç•™å¤‡ä»½-æ„é€ å¯è¿è¡Œçš„ç¯å¢ƒ"><a href="#ç•™å¤‡ä»½-æ„é€ å¯è¿è¡Œçš„ç¯å¢ƒ" class="headerlink" title="ç•™å¤‡ä»½,æ„é€ å¯è¿è¡Œçš„ç¯å¢ƒ"></a>ç•™å¤‡ä»½,æ„é€ å¯è¿è¡Œçš„ç¯å¢ƒ</h2><p>ã€€ã€€ä»£ç æ‹¿åˆ°æ‰‹ä¹‹åçš„ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯å…ˆåšå¤‡ä»½ï¼Œæœ€å¥½æ˜¯åˆ»åœ¨ä¸€ä¸ªå…‰ç›˜ä¸Šï¼Œåœ¨ä»£ç é˜…è¯»çš„æ—¶å€™ä¸€ç‚¹ä¸åŠ¨ä»£ç æ˜¯å¾ˆå›°éš¾çš„ä¸€ä»¶äº‹æƒ…ï¼Œç‰¹åˆ«æ˜¯ä½ è¦åšä¸€äº›ä¿®æ”¹æ€§æˆ–å¢å¼ºæ€§ç»´æŠ¤çš„æ—¶å€™ã€‚è€Œä¸€æ—¦åšä¿®æ”¹å°±å¯èƒ½å‘ç”Ÿé—®é¢˜ï¼Œåˆ°æ—¶å€™è¦æ¢å¤æ˜¯ç»å¸¸å‘ç”Ÿçš„äº‹æƒ…ï¼Œå¦‚æœä½ ä¸èƒ½å¾ˆå¥½çš„ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶é‚£ä¹ˆå…ˆç•™ä¸€ä¸ªå¤‡ä»½æ˜¯ä¸€ä¸ªæœ€èµ·ç çš„è¦æ±‚äº†ã€‚<br>ã€€ã€€åœ¨åšå®Œå¤‡ä»½ä¹‹åæœ€å¥½ç»™è‡ªå·±æ„é€ ä¸€ä¸ªå¯è¿è¡Œçš„ç¯å¢ƒï¼Œå½“ç„¶å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œä½†å¯è¿è¡Œä»£ç å’Œä¸å¯è¿è¡Œçš„ä»£ç é˜…è¯»èµ·æ¥éš¾åº¦ä¼šå·®å¾ˆå¤šçš„ã€‚æ‰€ä»¥å¤šç”¨ä¸€ç‚¹æ—¶é—´æ­å»ºä¸€ä¸ªç¯å¢ƒæ˜¯å¾ˆå€¼å¾—çš„ï¼Œè€Œä¸”æˆ‘ä»¬é˜…è¯»ä»£ç ä¸»è¦æ˜¯ä¸ºäº†ä¿®æ”¹å…¶ä¸­çš„é—®é¢˜æˆ–åšç§»æ¤æ“ä½œã€‚ä¸èƒ½è¿è¡Œçš„ä»£ç é™¤äº†å¯ä»¥å­¦åˆ°ä¸€äº›æŠ€æœ¯ä»¥å¤–ï¼Œç”¨å¤„æœ‰é™ã€‚</p>
<h2 id="æ‰¾å¼€å§‹çš„åœ°æ–¹"><a href="#æ‰¾å¼€å§‹çš„åœ°æ–¹" class="headerlink" title="æ‰¾å¼€å§‹çš„åœ°æ–¹"></a>æ‰¾å¼€å§‹çš„åœ°æ–¹</h2><p>ã€€ã€€åšä»€ä¹ˆäº‹æƒ…éƒ½è¦çŸ¥é“ä»é‚£é‡Œå¼€å§‹ï¼Œè¯»ç¨‹åºä¹Ÿä¸ä¾‹å¤–ã€‚åœ¨Cè¯­è¨€é‡Œ,é¦–å…ˆè¦æ‰¾åˆ°main()å‡½æ•°ï¼Œç„¶åé€å±‚å»é˜…è¯»ï¼Œå…¶ä»–çš„ç¨‹åºæ— è®ºæ˜¯vbã€delphiéƒ½è¦é¦–å…ˆæ‰¾åˆ°ç¨‹åºå¤´ï¼Œå¦åˆ™ä½ æ˜¯å¾ˆéš¾åˆ†ææ¸…æ¥šç¨‹åºçš„å±‚æ¬¡å…³ç³»ã€‚</p>
<h2 id="åˆ†å±‚æ¬¡é˜…è¯»"><a href="#åˆ†å±‚æ¬¡é˜…è¯»" class="headerlink" title="åˆ†å±‚æ¬¡é˜…è¯»"></a>åˆ†å±‚æ¬¡é˜…è¯»</h2><p>ã€€ã€€åœ¨é˜…è¯»ä»£ç çš„æ—¶å€™ä¸è¦ä¸€å¤´å°±æ‰ä¸‹å»ï¼Œè¿™æ ·å¾€å¾€å®¹æ˜“åªè§æ ‘æœ¨ä¸è§æ£®æ—ï¼Œé˜…è¯»ä»£ç æ¯”è¾ƒå¥½çš„æ–¹æ³•æœ‰ä¸€ç‚¹è±¡äºŒå‰æ ‘çš„å¹¿åº¦ä¼˜å…ˆçš„éå†ã€‚åœ¨ç¨‹åºä¸»ä½“ä¸€èˆ¬ä¼šæ¯”è¾ƒç®€ å•ï¼Œè°ƒç”¨çš„å‡½æ•°ä¼šæ¯”è¾ƒå°‘ï¼Œæ ¹æ®å‡½æ•°çš„åå­—ä»¥åŠå±‚æ¬¡å…³ç³»ä¸€èˆ¬å¯ä»¥ç¡®å®šæ¯ä¸€ä¸ªå‡½æ•°çš„å¤§è‡´ç”¨é€”ï¼Œå°†ä½ çš„ç†è§£ä½œä¸ºæ³¨è§£å†™åœ¨è¿™äº›å‡½æ•°çš„è¾¹ä¸Šã€‚å½“ç„¶å¾ˆéš¾ä¸€æ¬¡å°±å°†å…¨éƒ¨æ³¨ è§£éƒ½å†™æ­£ç¡®ï¼Œæœ‰æ—¶å€™ç”šè‡³å¯èƒ½æ˜¯ä½ çŒœæµ‹çš„ç»“æœï¼Œä¸è¿‡æ²¡æœ‰å…³ç³»è¿™äº›æ³¨è§£åœ¨é˜…è¯»è¿‡ç¨‹æ˜¯ä¸æ–­ä¿®æ­£çš„ï¼Œç›´åˆ°ä½ å…¨éƒ¨ç†è§£äº†ä»£ç ä¸ºæ­¢ã€‚ä¸€èˆ¬æ¥è¯´é‡‡ç”¨é€å±‚é˜…è¯»çš„æ–¹æ³•å¯ä»¥æ˜¯ ä½ ç³»ç»Ÿçš„ç†è§£ä¿æŒåœ¨ä¸€ä¸ªæ­£ç¡®çš„æ–¹å‘ä¸Šã€‚é¿å…ä¸€ä¸‹å­æ‰å…¥åˆ°ç»†èŠ‚çš„é—®é¢˜ä¸Šã€‚åœ¨åˆ†å±‚æ¬¡é˜…è¯»çš„æ—¶å€™è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å°†ç³»ç»Ÿçš„å‡½æ•°å’Œå¼€å‘äººå‘˜ç¼–å†™ä»£ç åŒºåˆ†å¼€ã€‚åœ¨ c, c++ï¼Œjava ,delphiä¸­éƒ½æœ‰è‡ªå·±çš„ç³»ç»Ÿå‡½æ•°ï¼Œä¸è¦å»é˜…è¯»è¿™äº›ç³»ç»Ÿå‡½æ•°ï¼Œé™¤éä½ è¦å­¦ä¹ ä»–ä»¬çš„ç¼–ç¨‹æ–¹æ³•ï¼Œå¦åˆ™åªä¼šæµªè´¹ä½ çš„æ—¶é—´ã€‚å°†ç³»ç»Ÿå‡½æ•°è¡¨ç¤ºå‡ºæ¥ï¼Œæ³¨æ˜å®ƒä»¬çš„ä½œç”¨ å³å¯ï¼ŒåŒºåˆ†ç³»ç»Ÿå‡½æ•°å’Œè‡ªç¼–å‡½æ•°æœ‰å‡ ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ç³»ç»Ÿå‡½æ•°çš„ç¼–ç¨‹é£æ ¼ä¸€èˆ¬ä¼šæ¯”è¾ƒå¥½ï¼Œè€Œè‡ªç¼–çš„å‡½æ•°çš„ç¼–ç¨‹é£æ ¼ä¸€èˆ¬æ¯”è¾ƒä¼šæ¯”è¾ƒå·®ã€‚ä»å˜é‡åã€è¡Œä¹‹é—´çš„ç¼©è¿›ã€æ³¨ è§£ç­‰æ–¹é¢ä¸€èˆ¬å¯ä»¥åˆ†è¾¨å‡ºæ¥ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯è±¡ms c6++ä¼šåœ¨ä½ ç¼–ç¨‹çš„æ—¶å€™ç»™ä½ ç”Ÿæˆä¸€å¤§å †æ–‡ä»¶å‡ºæ¥ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶æ˜¯ä½ ç”¨ä¸åˆ°äº†ï¼Œå¯ä»¥æ ¹æ®æ–‡ä»¶åæ¥åŒºåˆ†ä¸€ä¸‹æ—¶å€™æ˜¯ç³»ç»Ÿå‡½æ•°ï¼Œæœ€åå¦‚æœä½ å®åœ¨ç¡®å®šä¸äº†ï¼Œé‚£å°± ç”¨å¼€å‘ç³»ç»Ÿçš„å¸®åŠ©ç³»ç»Ÿå»æŸ¥ä¸€ä¸‹å‡½æ•°åï¼Œå¯¹ä¸€ä¸‹å‚æ•°ç­‰æ¥ç¡®å®šå³å¯ã€‚</p>
<h2 id="å†™æ³¨è§£"><a href="#å†™æ³¨è§£" class="headerlink" title="å†™æ³¨è§£"></a>å†™æ³¨è§£</h2><p>ã€€ã€€å†™æ³¨è§£æ˜¯åœ¨é˜…è¯»ä»£ç ä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ­¥éª¤ï¼Œåœ¨æˆ‘ä»¬é˜…è¯»çš„æºä»£ç ä¸€èˆ¬æ¥è¯´æ˜¯æˆ‘ä»¬ä¸ç†Ÿæ‚‰çš„ç³»ç»Ÿ,é˜…è¯»åˆ«äººçš„ä»£ç ä¸€èˆ¬ä¼šæœ‰å‡ ä¸ªé—®é¢˜ï¼Œ1ææ˜ç™½åˆ«äººçš„ç¼–ç¨‹æ€æƒ³ä¸ æ˜¯ä¸€ä»¶å¾ˆå®¹æ˜“çš„äº‹æƒ…ï¼Œå³ä½¿ä½ çŸ¥é“è¿™æ®µç¨‹åºçš„æ€è·¯çš„æ—¶å€™ä¹Ÿæ˜¯ä¸€æ ·ã€‚2é˜…è¯»ä»£ç çš„æ—¶å€™ä»£ç é‡ä¸€èˆ¬ä¼šæ¯”è¾ƒå¤§ï¼Œå¦‚æœä¸åŠæ—¶å†™æ³¨è§£å¾€å¾€ä¼šé€ æˆè¯»æ˜ç™½äº†åè¾¹å¿˜äº†å‰è¾¹çš„ ç°è±¡ã€‚3é˜…è¯»ä»£ç çš„æ—¶å€™éš¾å…ä¼šå‡ºç°ç†è§£é”™è¯¯ï¼Œå¦‚æœæ²¡æœ‰åŠæ—¶çš„å†™æ³¨è§£å¾ˆéš¾åŠæ—¶çš„å‘ç°è¿™äº›é”™è¯¯ã€‚4ä¸å†™æ³¨è§£æœ‰æ—¶å€™ä½ å‘ç”Ÿä½ å¾ˆéš¾ç¡®å®šä¸€ä¸ªå‡½æ•°ä½ æ—¶å€™é˜…è¯»è¿‡ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Œç»å¸¸ä¼šå‘ç”Ÿé‡å¤é˜…è¯»ã€ç†è§£çš„ç°è±¡ã€‚<br>ã€€ã€€å¥½äº†ï¼Œè¯´ä¸€äº›å†™æ³¨è§£çš„åŸºæœ¬æ–¹æ³•ï¼š1çŒœæµ‹çš„å»å†™ï¼Œåˆšå¼€å§‹é˜…è¯»ä¸€ä¸ªä»£ç çš„æ—¶å€™ï¼Œä½ å¾ˆéš¾ä¸€ä¸‹å­å°±ç¡®å®šæ‰€æœ‰çš„å‡½æ•°çš„åŠŸèƒ½ï¼Œä¸å¦¨é‡‡ç”¨é‡‡ç”¨çŒœæµ‹çš„æ–¹æ³•å»å†™æ³¨è§£ï¼Œæ ¹ æ®å‡½æ•°çš„åå­—ã€ä½ç½®å†™ä¸€ä¸ªå¤§è‡´çš„æ³¨è§£ï¼Œå½“ç„¶ä¸€èˆ¬ä¼šæœ‰é”™è¯¯ï¼Œä½†ä½ çš„æ³¨è§£å®é™…æ˜¯ä¸ä½†è°ƒæ•´çš„ï¼Œç›´åˆ°æœ€åä½ ç†è§£äº†å…¨éƒ¨ä»£ç ã€‚2æŒ‰åŠŸèƒ½å»å†™ï¼Œåˆ«æŠŠæ³¨è§£å†™æˆè¯­æ³•è¯´æ˜ ä¹¦ï¼Œåƒä¸‡åˆ«çœ‹åˆ°fopenå°±å†™æ‰“å¼€æ–‡ä»¶ï¼Œçœ‹åˆ°freadå°±å†™è¯»æ•°æ®ï¼Œè¿™æ ·çš„æ³¨è§£ä¸€ç‚¹ç”¨å¤„éƒ½æ²¡æœ‰ï¼Œè€Œåº”è¯¥å†™åœ¨æ­¤å¤„å¼€å‘å‚æ•°é…ç½®æ–‡ä»¶(<em>**</em>ã€‚dat)è¯»å‡º ç³»ç»Ÿåˆå§‹åŒ–å‚æ•°ã€‚ã€‚ã€‚ã€‚ã€‚ï¼Œè¿™æ ·æ‰æ˜¯æœ‰ç”¨çš„æ³¨è§£ã€‚3åœ¨å†™æ³¨è§£çš„ä½¿ç”¨å¦å¤–è¦æ³¨æ„çš„ä¸€ä¸ªé—®é¢˜æ˜¯åˆ†æ¸…æ¥šç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç å’Œç”¨æˆ·è‡ª å·±å¼€å‘çš„ä»£ç ï¼Œä¸€èˆ¬æ¥è¯´æ²¡æœ‰å¿…è¦å†™ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ã€‚è±¡delphiçš„ä»£ç ï¼Œæˆ‘ä»¬å¾€å¾€è¦è‡ªå·±ç¼–å†™ä¸€äº›è‡ªå·±çš„ä»£ç æ®µï¼Œè¿˜è¦å¯¹ä¸€äº›ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç æ®µè¿›è¡Œ ä¿®æ”¹ï¼Œè¿™äº›ä»£ç åœ¨é˜…è¯»è¿‡ç¨‹æ˜¯è¦å†™æ³¨è§£çš„ï¼Œä½†æœ‰ä¸€äº›æ²¡æœ‰ä¿®æ”¹è¿‡çš„è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç å°±æ²¡æœ‰å¿…è¦å†™æ³¨è§£äº†ã€‚4åœ¨ä¸»è¦ä»£ç æ®µè¦å†™è¾ƒä¸ºè¯¦ç»†çš„æ³¨è§£ã€‚æœ‰ä¸€äº›å‡½æ•°æˆ–ç±»åœ¨ç¨‹ åºä¸­èµ·å…³é”®çš„ä½œç”¨ï¼Œé‚£ä¹ˆè¦å†™æ¯”è¾ƒè¯¦ç»†çš„æ³¨è§£ã€‚è¿™æ ·å¯¹ä½ ç†è§£ä»£ç æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚5å¯¹ä½ ç†è§£èµ·æ¥æ¯”è¾ƒå›°éš¾çš„åœ°æ–¹è¦å†™è¯¦ç»†çš„æ³¨è§£ï¼Œåœ¨è¿™äº›åœ°æ–¹å¾€å¾€ä¼šæœ‰ä¸€äº›ç¼–ç¨‹çš„æŠ€å·§ã€‚ä¸ç†è§£è¿™äº›ç¼–ç¨‹æŠ€å·§å¯¹ä½ ä»¥åçš„ç†è§£æˆ–ç§»æ¤ä¼šæœ‰é—®é¢˜ã€‚6å†™ä¸­æ–‡æ³¨è§£ã€‚å¦‚æœä½ çš„è‹±æ–‡è¶³å¤Ÿçš„å¥½ï¼Œä¸ç”¨çœ‹è¿™æ¡äº†ï¼Œä½†å¾ˆå¤šçš„äººè‹±æ–‡å®åœ¨ä¸æ€ä¹ˆæ ·ï¼Œé‚£å°±å†™ä¸­æ–‡æ³¨è§£å§ï¼Œæˆ‘ä»¬å†™æ³¨è§£æ˜¯ä¸ºäº†åŠ å¿«è‡ªå·±çš„ç†è§£é€Ÿåº¦ã€‚ä¸­æ–‡åœ¨å¤§å¤šæ•°çš„æ—¶å€™æ¯”è‹±æ–‡æ›´é€‚åº”ä¸­å›½äººã€‚ä¸å…¶å†™ä¸€äº›è°ä¹Ÿçœ‹ä¸æ‡‚çš„è‹±æ–‡æ³¨è§£è¿˜ä¸å¦‚ä¸å†™ã€‚</p>
<h2 id="é‡å¤é˜…è¯»"><a href="#é‡å¤é˜…è¯»" class="headerlink" title="é‡å¤é˜…è¯»"></a>é‡å¤é˜…è¯»</h2><p>ã€€ã€€ä¸€æ¬¡å°±å¯ä»¥å°†æ‰€æœ‰çš„ä»£ç éƒ½é˜…è¯»æ˜ç™½çš„äººæ˜¯æ²¡æœ‰çš„ã€‚è‡³å°‘æˆ‘è¿˜æ²¡æœ‰é‡åˆ°è¿‡ã€‚åå¤çš„å»é˜…è¯»åŒä¸€æ®µä»£ç æœ‰åŠ©äºå¾—ä»£ç çš„ç†è§£ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç¬¬ä¸€æ¬¡é˜…è¯»ä»£ç çš„æ—¶å€™ ä½ å¯ä»¥è·³è¿‡å¾ˆå¤šä¸€æ—¶ä¸æ˜ç™½çš„ä»£ç æ®µï¼Œåªå†™ä¸€äº›ç®€å•çš„æ³¨è§£ï¼Œåœ¨ä»¥åçš„é‡å¤é˜…è¯»è¿‡ç¨‹ç”¨ï¼Œä½ å¯¹ä»£ç çš„ç†è§£ä¼šæ¯”ä¸Šä¸€æ¬¡ç†è§£çš„æ›´æ·±åˆ»ï¼Œè¿™æ ·ä½ å¯ä»¥ä¿®æ”¹é‚£äº›æ³¨è§£é”™è¯¯çš„ åœ°æ–¹å’Œä¸Šä¸€æ¬¡æ²¡æœ‰ç†è§£çš„å¯¹æ–¹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹ä»£ç é˜…è¯»3ï¼Œ4æ¬¡åŸºæœ¬å¯ä»¥ç†è§£ä»£ç çš„å«ä¹‰å’Œä½œç”¨ã€‚</p>
<h2 id="è¿è¡Œå¹¶ä¿®æ”¹ä»£ç "><a href="#è¿è¡Œå¹¶ä¿®æ”¹ä»£ç " class="headerlink" title="è¿è¡Œå¹¶ä¿®æ”¹ä»£ç "></a>è¿è¡Œå¹¶ä¿®æ”¹ä»£ç </h2><p>ã€€ã€€å¦‚æœä½ çš„ä»£ç æ˜¯å¯è¿è¡Œçš„ï¼Œé‚£ä¹ˆå…ˆè®©å®ƒè¿è¡Œèµ·æ¥ï¼Œç”¨å•æ­¥è·Ÿè¸ªçš„æ–¹æ³•æ¥é˜…è¯»ä»£ç ï¼Œä¼šæé«˜ä½ çš„ä»£ç é€Ÿåº¦ã€‚ä»£ç é€šè¿‡çœ‹ä¸­é—´å˜é‡äº†è§£ä»£ç çš„å«ä¹‰,è€Œä¸”å¯¹ ä»¥åçš„ä¿®æ”¹ä¼šæä¾›å¾ˆå¤§çš„å¸®åŠ©<br>ã€€ã€€ç”¨è‡ªå·±çš„ä»£ç ä»£æ›¿åŸæœ‰ä»£ç ï¼Œçœ‹æ•ˆæœï¼Œä½†åœ¨ä¹‹å‰è¦ä¿ç•™æºä»£ç <br>ã€€ã€€600è¡Œçš„ä¸€ä¸ªå‡½æ•°ï¼Œé˜…è¯»èµ·æ¥å¾ˆå›°éš¾ï¼Œç¼–ç¨‹çš„äººä¸æ˜¯ä¸€ä¸ªå¥½çš„ä¹ æƒ¯ã€‚åœ¨é˜…è¯»è¿™ä¸ªä»£ç çš„æ—¶å€™å°†ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œå˜æˆäº†14ä¸ªå‡½æ•°ã€‚æ¯ä¸€ä¸ªå¤§çº¦æ˜¯40-50 è¡Œå·¦å³.</p>
]]></content>
      
        <categories>
            
            <category> è½¬è½½ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> æºç  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç®€æStringã€StringBufferä¸StringBuilder]]></title>
      <url>/%E7%AE%80%E6%9E%90String%E3%80%81StringBuffer%E4%B8%8EStringBuilder.html</url>
      <content type="html"><![CDATA[<h2 id="å­—ç¬¦ä¸²ç±»String"><a href="#å­—ç¬¦ä¸²ç±»String" class="headerlink" title="å­—ç¬¦ä¸²ç±»String"></a>å­—ç¬¦ä¸²ç±»String</h2><p>Stringæ˜¯finalç±»ã€‚Javaç¨‹åºä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²å­—é¢å€¼(å¦‚â€abcâ€)éƒ½ä½œä¸ºæ­¤ç±»çš„å®ä¾‹å®ç°ã€‚å­—ç¬¦ä¸²æ˜¯å¸¸é‡ï¼Œå®ƒä»¬çš„å€¼åœ¨åˆ›å»ºä¹‹åä¸èƒ½æ›´æ”¹ï¼Œå¦‚æœå¯¹å·²ç»å­˜åœ¨çš„Stringå¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œéƒ½æ˜¯é‡æ–°newä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åæŠŠä¿®æ”¹åçš„å€¼ä¿å­˜è¿›å»ã€‚å­—ç¬¦ä¸²ç¼“å­˜åŒºæ”¯æŒå¯å˜çš„å­—ç¬¦ä¸²ã€‚å› ä¸ºStringå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å¯ä»¥å…±äº«ã€‚<br>å­—ç¬¦ä¸²çš„å®šä¹‰å¾ˆç®€å•ï¼Œç›´æ¥ç»™ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å˜é‡èµ‹å€¼å³å¯ï¼Œä¾‹å¦‚:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String Str = <span class="string">"abc"</span>;</span><br></pre></td></tr></table></figure></p>
<p>ç­‰ä»·äº:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> data[] = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;</span><br><span class="line">String str = <span class="keyword">new</span> String(data);</span><br></pre></td></tr></table></figure></p>
<h2 id="çº¿ç¨‹å®‰å…¨çš„å¯å˜å­—ç¬¦ä¸²ç±»StringBuffer"><a href="#çº¿ç¨‹å®‰å…¨çš„å¯å˜å­—ç¬¦ä¸²ç±»StringBuffer" class="headerlink" title="çº¿ç¨‹å®‰å…¨çš„å¯å˜å­—ç¬¦ä¸²ç±»StringBuffer"></a>çº¿ç¨‹å®‰å…¨çš„å¯å˜å­—ç¬¦ä¸²ç±»StringBuffer</h2><p>StringBuffer æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯å˜å­—ç¬¦ä¸²ç±»ï¼Œé€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ã€‚ç±»ä¼¼äºStringçš„å­—ç¬¦ä¸²ï¼Œä¸åŒçš„æ˜¯å®ƒé€šè¿‡æŸäº›æ–¹æ³•è°ƒç”¨æ”¹å˜è¯¥åºåˆ—çš„é•¿åº¦å’Œå†…å®¹ã€‚å®ƒå¯å°†å­—ç¬¦ä¸²ç¼“å­˜åŒºå®‰å…¨åœ°ç”¨äºå¤šä¸ªçº¿ç¨‹ï¼Œå¯ä»¥åœ¨å¿…è¦æ—¶å¯¹è¿™äº›æ–¹æ³•è¿›è¡ŒåŒæ­¥ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer();                                <span class="comment">//æ„é€ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ç¼“å­˜åŒº</span></span><br><span class="line">StringBuffer(String str);                <span class="comment">//æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²ç¼“å­˜åŒºï¼Œå¹¶å°†å…¶å†…å®¹åˆå§‹åŒ–ä¸ºæŒ‡å®šçš„å­—ç¬¦ä¸²å†…å®¹</span></span><br></pre></td></tr></table></figure></p>
<p>StringBufferä¸Šçš„ä¸»è¦æ“ä½œæ˜¯append()å’Œinsert()æ–¹æ³•ã€‚é€šè¿‡æŸ¥çœ‹StringBufferç±»çš„ä¸‰æ®µæºç ï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ€åè°ƒç”¨äº†System.arraycopyæ¥è¿›è¡Œæ¥ä¿®æ”¹å­—ç¬¦ä¸²ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> StringBuffer <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">super</span>.append(str);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> AbstractStringBuilder <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (str == <span class="keyword">null</span>) str = <span class="string">"null"</span>;</span><br><span class="line">        <span class="keyword">int</span> len = str.length();</span><br><span class="line">        ensureCapacityInternal(count + len);</span><br><span class="line">        str.getChars(<span class="number">0</span>, len, value, count);</span><br><span class="line">        count += len;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getChars</span><span class="params">(<span class="keyword">int</span> srcBegin, <span class="keyword">int</span> srcEnd, <span class="keyword">char</span> dst[], <span class="keyword">int</span> dstBegin)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (srcBegin &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(srcBegin);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (srcEnd &gt; value.length) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(srcEnd);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (srcBegin &gt; srcEnd) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(srcEnd - srcBegin);</span><br><span class="line">        &#125;</span><br><span class="line">        System.arraycopy(value, srcBegin, dst, dstBegin, srcEnd - srcBegin);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¯å˜å­—ç¬¦ä¸²ç±»StringBuilder"><a href="#å¯å˜å­—ç¬¦ä¸²ç±»StringBuilder" class="headerlink" title="å¯å˜å­—ç¬¦ä¸²ç±»StringBuilder"></a>å¯å˜å­—ç¬¦ä¸²ç±»StringBuilder</h2><p>æ­¤ç±»æä¾›ä¸€ä¸ªä¸StringBufferå…¼å®¹çš„APIï¼Œä½†ä¸ä¿è¯åŒæ­¥ã€‚è¯¥ç±»è¢«è®¾è®¡ç”¨ä½œStringBufferçš„ä¸€ä¸ªç®€æ˜“æ›¿æ¢ï¼Œç”¨åœ¨å­—ç¬¦ä¸²ç¼“å†²åŒºè¢«å•ä¸ªçº¿ç¨‹ä½¿ç”¨çš„æ—¶å€™ã€‚å¦‚æœå¯èƒ½ï¼Œå»ºè®®ä¼˜å…ˆé‡‡ç”¨è¯¥ç±»ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°å®ç°ä¸­ï¼Œå®ƒæ¯”StringBufferè¦å¿«ã€‚</p>
<h2 id="å¦‚ä½•é€‰æ‹©"><a href="#å¦‚ä½•é€‰æ‹©" class="headerlink" title="å¦‚ä½•é€‰æ‹©"></a>å¦‚ä½•é€‰æ‹©</h2><ul>
<li>Stringæ˜¯å­—ç¬¦ä¸²å¸¸é‡</li>
<li>StringBufferæ˜¯å­—ç¬¦ä¸²å˜é‡(çº¿ç¨‹å®‰å…¨)</li>
<li>StringBuilderæ˜¯å­—ç¬¦ä¸²å˜é‡(éçº¿ç¨‹å®‰å…¨)</li>
</ul>
<p>ç®€å•åœ°è¯´ï¼ŒStringç±»å‹å’ŒStringBufferç±»å‹çš„ä¸»è¦æ€§èƒ½åŒºåˆ«åœ¨äº: Stringæ˜¯ä¸å¯æ”¹å˜çš„å¯¹è±¡ï¼Œæ¯æ¬¡å¯¹Stringç±»å‹è¿›è¡Œæ”¹å˜çš„æ—¶å€™ï¼Œå…¶å®éƒ½ç­‰åŒäºç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ï¼Œç„¶åå°†å¼•ç”¨æŒ‡å‘è¯¥å¯¹è±¡ï¼›è€Œå¯¹äºStringBufferç±»ï¼Œæ¯æ¬¡æ“ä½œéƒ½æ˜¯å¯¹StringBufferå¯¹è±¡æœ¬èº«è¿›è¡Œæ›´æ”¹ã€‚<br>æ‰€ä»¥ï¼Œå¦‚æœç»å¸¸æ”¹å˜å†…å®¹çš„å­—ç¬¦ä¸²æœ€å¥½ä¸è¦ç”¨Stringï¼Œå› ä¸ºæ¯æ¬¡ç”Ÿæˆå¯¹è±¡éƒ½ä¼šå¯¹ç³»ç»Ÿæ€§èƒ½äº§ç”Ÿå½±å“ï¼Œç‰¹åˆ«å½“å†…å­˜ä¸­æ— å¼•ç”¨å¯¹è±¡å¤šäº†ä»¥åï¼ŒJVMçš„GCå°±ä¼šå¼€å§‹å·¥ä½œï¼Œé‚£é€Ÿåº¦æ˜¯ä¸€å®šä¼šç›¸å½“æ…¢çš„ã€‚è¿™ç§æƒ…å†µæ¨èä½¿ç”¨StringBufferï¼Œç‰¹åˆ«æ˜¯å­—ç¬¦ä¸²å¯¹è±¡ç»å¸¸æ”¹å˜çš„æƒ…å†µä¸‹ã€‚ä½†æ˜¯æŸäº›ç‰¹åˆ«æƒ…å†µä¸‹ï¼ŒStringå¯¹è±¡çš„å­—ç¬¦ä¸²æ‹¼æ¥å…¶å®æ˜¯è¢«JVMè§£é‡Šæˆäº†StringBufferå¯¹è±¡çš„æ‹¼æ¥ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™Stringå¯¹è±¡çš„é€Ÿåº¦å¹¶ä¸ä¼šæ¯”StringBufferå¯¹è±¡æ…¢ï¼Œè€Œç‰¹åˆ«æ˜¯ä»¥ä¸‹çš„å­—ç¬¦ä¸²å¯¹è±¡ç”Ÿæˆä¸­ï¼ŒStringæ•ˆç‡æ˜¯è¿œè¦æ¯”StringBufferå¿«çš„:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"This is only a "</span> + <span class="string">"simple"</span> + <span class="string">"test"</span>;</span><br><span class="line">StringBuffer builder = <span class="keyword">new</span> StringBuilder(<span class="string">"This is only a "</span>).append(<span class="string">"simple"</span>).append(<span class="string">"test"</span>);</span><br></pre></td></tr></table></figure></p>
<p>ä½ ä¼šå‘ç°ï¼Œç”Ÿæˆstrå¯¹è±¡çš„é€Ÿåº¦æ˜æ˜¾å¿«å¤šäº†ã€‚å…¶å®è¿™æ˜¯JVMçš„ä¸€ä¸ªéšè—çš„å®ç°æœºåˆ¶ï¼Œå®é™…ä¸Š:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"This is only a "</span> + <span class="string">"simple"</span> + <span class="string">"test"</span>;</span><br></pre></td></tr></table></figure></p>
<p>å…¶å®å°±æ˜¯:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"This is only a simple test"</span>;</span><br></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯è¦æ³¨æ„ï¼Œå¦‚æœä½ çš„å­—ç¬¦ä¸²æ˜¯æ¥è‡ªå¦å¤–çš„Stringå¯¹è±¡ï¼Œé€Ÿåº¦å°±æ²¡é‚£ä¹ˆå¿«äº†,è­¬å¦‚:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String str1 = <span class="string">"This is only a "</span>;</span><br><span class="line">String str2 = <span class="string">"simple"</span>;</span><br><span class="line">String str3 = <span class="string">"test"</span>;</span><br><span class="line">String str4 = str1+str2+str3;</span><br></pre></td></tr></table></figure></p>
<p>ä¸ºäº†æµ‹è¯•è¿™3ç§ç±»å‹å½“ç´¯åŠ ä¸åŒæ¬¡æ•°å­—ç¬¦ä¸²æ—¶çš„æ•ˆç‡ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»ï¼Œåˆ†åˆ«æŒ‰æ¬¡æ•°ç´¯åŠ å­—ç¬¦ä¸²:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">100</span>; <span class="comment">//å¾ªç¯æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•String</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.nanoTime();</span><br><span class="line">        String str = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            str += <span class="string">","</span> + i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.nanoTime();</span><br><span class="line">        System.out.println(<span class="string">"String: "</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•StringBuffer</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testStringBuffer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.nanoTime();</span><br><span class="line">        StringBuffer str = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            str.append(<span class="string">","</span>).append(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.nanoTime();</span><br><span class="line">        System.out.println(<span class="string">"StringBuffer: "</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•StringBuilder</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testStringBuilder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.nanoTime();</span><br><span class="line">        StringBuilder str = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            str = str.append(<span class="string">","</span>).append(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.nanoTime();</span><br><span class="line">        System.out.println(<span class="string">"StringBuilder: "</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TestString.testString();</span><br><span class="line">        TestString.testStringBuffer();</span><br><span class="line">        TestString.testStringBuilder();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œè¯¥ç¨‹åºæ‰§è¡Œçš„æµ‹è¯•æ—¶é—´å¦‚è¡¨æ‰€ç¤º:</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ¯«å¾®ç§’</th>
<th style="text-align:center">String</th>
<th style="text-align:center">StringBuffer</th>
<th style="text-align:center">StringBuilder</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1æ¬¡</td>
<td style="text-align:center">38292</td>
<td style="text-align:center">32765</td>
<td style="text-align:center">1579</td>
</tr>
<tr>
<td style="text-align:center">10æ¬¡</td>
<td style="text-align:center">52108</td>
<td style="text-align:center">45792</td>
<td style="text-align:center">6711</td>
</tr>
<tr>
<td style="text-align:center">100æ¬¡</td>
<td style="text-align:center">230143</td>
<td style="text-align:center">70662</td>
<td style="text-align:center">64345</td>
</tr>
<tr>
<td style="text-align:center">1000æ¬¡</td>
<td style="text-align:center">11072907</td>
<td style="text-align:center">308305</td>
<td style="text-align:center">181193</td>
</tr>
<tr>
<td style="text-align:center">1ä¸‡æ¬¡</td>
<td style="text-align:center">400656874</td>
<td style="text-align:center">892543</td>
<td style="text-align:center">814777</td>
</tr>
<tr>
<td style="text-align:center">10ä¸‡æ¬¡</td>
<td style="text-align:center">æº¢å‡º</td>
<td style="text-align:center">4308762</td>
<td style="text-align:center">4372318</td>
</tr>
<tr>
<td style="text-align:center">100ä¸‡æ¬¡</td>
<td style="text-align:center">æº¢å‡º</td>
<td style="text-align:center">100687270</td>
<td style="text-align:center">49812689</td>
</tr>
</tbody>
</table>
<p>Stringåœ¨10ä¸‡æ¬¡å¾ªç¯æ—¶å°±æº¢å‡ºäº†ï¼Œè€ŒStringBufferåœ¨100ä¸‡æ¬¡å¾ªç¯æ—¶é—´ä¸º100msï¼ŒStringBuilderçš„æ—¶é—´ä¸º49msã€‚æ˜¾ç„¶é€‰æ‹©ä¼˜å…ˆçº§ä¸º: StringBuilder &gt; StringBuffer &gt; String ã€‚å› æ­¤ï¼Œå¯¹äºè¿™3ä¸ªç±»çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§ä»¥ä¸‹æƒ…å†µå»é€‰æ‹©ã€‚</p>
<ul>
<li>å¦‚æœå¶å°”å¯¹ç®€å•çš„å­—ç¬¦ä¸²å¸¸é‡è¿›è¡Œæ‹¼æ¥ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨Stringï¼Œå®ƒè¶³å¤Ÿç®€å•è€Œä¸”è½»é‡çº§ã€‚</li>
<li>å¦‚æœéœ€è¦ç»å¸¸è¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ã€ç´¯åŠ æ“ä½œï¼Œè¯·ä½¿ç”¨StringBufferæˆ–è€…StringBuilderã€‚</li>
<li>å¦‚æœæ˜¯åœ¨å•çº¿ç¨‹çš„ç¯å¢ƒä¸­ï¼Œå»ºè®®ä½¿ç”¨StringBuilder,å®ƒè¦æ¯”StringBufferå¿«ï¼›å¦‚æœæ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸­ï¼Œå»ºè®®ä½¿ç”¨StringBufferï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚<br>å› æ­¤ï¼ŒStringBuilderå®é™…ä¸Šæ˜¯æˆ‘ä»¬çš„é¦–é€‰ï¼Œåªæœ‰åœ¨å¤šçº¿ç¨‹æ—¶æ‰å¯ä»¥è€ƒè™‘ä½¿ç”¨StringBufferï¼Œåªæœ‰åœ¨å­—ç¬¦ä¸²çš„æ‹¼æ¥è¶³å¤Ÿç®€å•æ—¶æ‰ä½¿ç”¨Stringã€‚</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> javaåŸºç¡€ </tag>
            
            <tag> String </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaEEè½¯ä»¶å¼€å‘ä½“ç³»æ¶æ„]]></title>
      <url>/JavaEE%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84.html</url>
      <content type="html"><![CDATA[<h2 id="ä¸¤å±‚æ¶æ„"><a href="#ä¸¤å±‚æ¶æ„" class="headerlink" title="ä¸¤å±‚æ¶æ„"></a>ä¸¤å±‚æ¶æ„</h2><p>ä¼ ç»Ÿçš„å®¢æˆ·æœåŠ¡å™¨ç³»ç»Ÿä»…åªç®€å•åœ°åŸºäºä¸¤å±‚ä½“ç³»æ¥æ„å»ºï¼Œå³å®¢æˆ·ç«¯ï¼ˆå‰å°ï¼‰å’Œä¼ä¸šä¿¡æ¯ç³»ç»Ÿï¼ˆåå°ï¼‰ï¼Œæ²¡æœ‰ä»»ä½•ä¸­é—´ä»¶ï¼Œä¸šåŠ¡é€»è¾‘å±‚ä¸è¡¨ç¤ºå±‚æˆ–æ•°æ®å±‚æ··åœ¨ä¸€èµ·ã€‚è¿™ç§ä¸¤å±‚æ¶æ„æ— è®ºä»å¼€å‘ã€éƒ¨ç½²ã€æ‰©å±•ã€ç»´æŠ¤æ¥è¯´ï¼Œç»¼å…¶åªæœ‰ä¸€ä¸ªç‰¹ç‚¹â€”â€”æˆæœ¬é«˜ã€‚</p>
<h2 id="ä¸‰å±‚æ¶æ„"><a href="#ä¸‰å±‚æ¶æ„" class="headerlink" title="ä¸‰å±‚æ¶æ„"></a>ä¸‰å±‚æ¶æ„</h2><p>ä¸‰å±‚æ¶æ„è‡ªä¸Šè€Œä¸‹å°†ç³»ç»Ÿåˆ†ä¸ºè¡¨ç¤ºå±‚ã€é€»è¾‘å±‚ã€æŒä¹…å±‚ã€‚<br>è¡¨ç¤ºå±‚ç”±å¤„ç†ç”¨æˆ·äº¤äº’çš„å®¢æˆ·ç«¯ç»„ä»¶åŠå…¶å®¹å™¨æ‰€ç»„æˆï¼›<br>ä¸šåŠ¡é€»è¾‘å±‚ç”±è§£å†³ä¸šåŠ¡é—®é¢˜çš„ç»„ä»¶ç»„æˆï¼›<br>æ•°æ®å±‚ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®åº“ç»„æˆï¼Œå¹¶å¯åŒ…å«å­˜å‚¨è¿‡ç¨‹ã€‚<br>è¿™ç§ä¸‰å±‚æ¶æ„ï¼Œåœ¨å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œä½¿å®¢æˆ·ç«¯ä¸ç”¨è¿›è¡Œå¤æ‚çš„æ•°æ®åº“å¤„ç†ï¼›é€æ˜åœ°ä¸ºå®¢æˆ·ç«¯æ‰§è¡Œè®¸å¤šå·¥ä½œï¼Œå¦‚æŸ¥è¯¢æ•°æ®åº“ã€æ‰§è¡Œä¸šåŠ¡è§„åˆ™å’Œè¿æ¥ç°æœ‰çš„åº”ç”¨ç¨‹åºï¼›å¹¶ä¸”èƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜åˆ›å»ºé€‚ç”¨äºä¼ä¸šçš„å¤§å‹åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºã€‚<br><img src="http://ou3xxg3hg.bkt.clouddn.com/ä¸‰å±‚.jpg" alt=""><br><a id="more"></a></p>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>åœ¨MVCæ¨¡å¼ä¸­ï¼Œåº”ç”¨ç¨‹åºè¢«åˆ’åˆ†ä¸ºæ¨¡å‹å±‚ï¼ˆModelï¼‰ã€è§†å›¾å±‚ï¼ˆViewï¼‰ã€æ§åˆ¶å±‚ï¼ˆControllerï¼‰ä¸‰éƒ¨åˆ†ã€‚MVCæ¨¡å‹å°±æ˜¯æŠŠä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¼€å‘æŒ‰ç…§ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€è§†å›¾è¿›è¡Œåˆ†ç¦»åˆ†å±‚å¹¶ç»„ç»‡ä»£ç ã€‚MVCè¦æ±‚æŠŠåº”ç”¨çš„æ¨¡å‹æŒ‰ä¸€å®šçš„å±‚æ¬¡è§„åˆ™æŠ½å–å‡ºæ¥ï¼Œå°†ä¸šåŠ¡é€»è¾‘èšé›†åˆ°ä¸€ä¸ªéƒ¨ä»¶é‡Œé¢ï¼Œåœ¨æ”¹è¿›å’Œä¸ªæ€§åŒ–å®šåˆ¶ç•Œé¢åŠç”¨æˆ·äº¤äº’çš„åŒæ—¶ï¼Œä¸éœ€è¦é‡æ–°ç¼–å†™ä¸šåŠ¡é€»è¾‘ã€‚æ¨¡å‹å±‚è´Ÿè´£å°è£…åº”ç”¨çš„çŠ¶æ€ï¼Œå¹¶å®ç°åŠŸèƒ½ï¼Œè§†å›¾å±‚è´Ÿè´£å°†å†…å®¹å‘ˆç°ç»™ç”¨æˆ·ï¼Œæ§åˆ¶å±‚è´Ÿè´£æ§åˆ¶è§†å›¾å±‚å‘é€çš„è¯·æ±‚ä»¥åŠç¨‹åºçš„æµç¨‹ã€‚<br>Servlet+JSP+JavaBeanï¼ˆMVCï¼‰è¿™ç§æ¨¡å¼æ¯”è¾ƒé€‚åˆå¼€å‘å¤æ‚çš„webåº”ç”¨ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒServletè´Ÿè´£å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼ŒJSPè´Ÿè´£æ•°æ®æ˜¾ç¤ºï¼ŒJavaBeanè´Ÿè´£å°è£…æ•°æ®ã€‚<br><img src="http://ou3xxg3hg.bkt.clouddn.com/mvc.jpg" alt=""></p>
<h2 id="åŸºäºJavaEEæ¶æ„æ¨¡å¼ä¸‹çš„MVC"><a href="#åŸºäºJavaEEæ¶æ„æ¨¡å¼ä¸‹çš„MVC" class="headerlink" title="åŸºäºJavaEEæ¶æ„æ¨¡å¼ä¸‹çš„MVC"></a>åŸºäºJavaEEæ¶æ„æ¨¡å¼ä¸‹çš„MVC</h2><p>åœ¨è¿™ç§æ¶æ„æ¨¡å¼ä¸‹ï¼Œæ¨¡å‹å±‚ï¼ˆModelï¼‰å®šä¹‰äº†æ•°æ®æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘ã€‚ä¸ºäº†å°†æ•°æ®è®¿é—®ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œé™ä½ä»£ç ä¹‹é—´çš„è€¦åˆï¼Œæé«˜ä¸šåŠ¡ç²¾åº¦ï¼Œæ¨¡å‹å±‚åˆå…·ä½“åˆ’åˆ†ä¸ºäº†DAOå±‚å’Œä¸šåŠ¡å±‚ï¼ŒDAOå³Data Access Objectï¼Œå…¶ä¸»è¦èŒèƒ½æ˜¯å°†è®¿é—®æ•°æ®åº“çš„ä»£ç å°è£…èµ·æ¥ï¼Œè®©è¿™äº›ä»£ç ä¸ä¼šåœ¨å…¶å®ƒå±‚å‡ºç°æˆ–è€…æš´éœ²å‡ºæ¥ç»™å…¶å®ƒå±‚ï¼›ä¸šåŠ¡å±‚æ˜¯æ•´ä¸ªç³»ç»Ÿæœ€æ ¸å¿ƒä¹Ÿæ˜¯æœ€å…·æœ‰ä»·å€¼çš„ä¸€å±‚ï¼Œè¯¥å±‚å°è£…åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†æ•°æ®ï¼Œå…³æ³¨å®¢æˆ·éœ€æ±‚ï¼Œåœ¨ä¸šåŠ¡å¤„ç†è¿‡ç¨‹ä¸­ä¼šè®¿é—®åŸå§‹æ•°æ®æˆ–äº§ç”Ÿæ–°æ•°æ®ï¼ŒDAOå±‚æä¾›çš„DAOç±»èƒ½å¾ˆå¥½åœ°å¸®åŠ©ä¸šåŠ¡å±‚å®Œæˆæ•°æ®å¤„ç†ï¼Œä¸šåŠ¡å±‚æœ¬èº«ä¾§é‡äºå¯¹å®¢æˆ·éœ€æ±‚çš„ç†è§£å’Œä¸šåŠ¡è§„åˆ™çš„é€‚åº”ï¼Œæ€»ä½“è¯´æ¥ï¼ŒDAOå±‚ä¸å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œåªä¸ºä¸šåŠ¡å±‚æä¾›è¾…åŠ©ï¼Œå®Œæˆè·å–åŸå§‹æ•°æ®æˆ–æŒä¹…å±‚æ•°æ®ç­‰æ“ä½œã€‚<br><img src="http://ou3xxg3hg.bkt.clouddn.com/javaEEmvc.png" alt=""><br>JSPï¼šJSPè¢«ç”¨æ¥äº§ç”ŸWebçš„åŠ¨æ€å†…å®¹ã€‚è¿™å±‚æŠŠåº”ç”¨æ•°æ®ä»¥ç½‘é¡µçš„å½¢å¼å‘ˆç°ç»™æµè§ˆå™¨ï¼Œç„¶åæ•°æ®æŒ‰ç…§åœ¨JSPä¸­å¼€å‘çš„é¢„å®šçš„æ–¹å¼è¡¨ç¤ºå‡ºæ¥ï¼Œè¿™å±‚ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå¸ƒå±€å±‚ã€‚<br>Servletï¼šJSPå»ºç«‹åœ¨Servletä¹‹ä¸Šï¼ŒServletæ˜¯J2EEçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚Servletè´Ÿè´£å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼ŒJava Webé¡¹ç›®çš„æ‰€æœ‰é…ç½®éƒ½å†™åœ¨äº†web.xmlé…ç½®æ–‡ä»¶é‡Œï¼Œå½“é¡¹ç›®è¿è¡Œçš„æ—¶å€™ï¼Œweb.xmlä¼šå°†httpè¯·æ±‚æ˜ å°„ç»™å¯¹åº”çš„Servletç±»ã€‚<br>JavaBeanï¼šç”±ä¸€äº›å…·æœ‰ç§æœ‰å±æ€§çš„Javaç±»ç»„æˆï¼Œå¯¹å¤–æä¾›getå’Œsetæ–¹æ³•ã€‚JavaBeanè´Ÿè´£æ•°æ®ï¼Œè´Ÿè´£å¤„ç†è§†å›¾å±‚å’Œä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„é€šä¿¡ã€‚<br>Serviceï¼šä¸šåŠ¡å¤„ç†ç±»ï¼Œå¯¹æ•°æ®è¿›è¡Œä¸€äº›é¢„å¤„ç†ã€‚<br>DAOï¼šæ•°æ®è®¿é—®å±‚ï¼ŒJDBCè°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œä»æ•°æ®åº“ï¼ˆDataBaseï¼‰é‚£é‡Œè·å–åˆ°æ•°æ®ï¼Œå†å°è£…åˆ°Modelå®ä½“ç±»ä¸­å»ã€‚</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaWebå¼€å‘]]></title>
      <url>/JavaWeb%E5%AD%A6%E4%B9%A0.html</url>
      <content type="html"><![CDATA[<p>1 JSP3ä¸ªç¼–è¯‘æŒ‡ä»¤ : page,include,taglib<br>2 JSPåŠ¨ä½œæŒ‡ä»¤7ä¸ªï¼š<br>jsp:forward ï¼š æ‰§è¡Œé¡µé¢è½¬å‘ï¼Œå°†è¯·æ±‚çš„å¤„ç†è½¬å‘åˆ°ä¸‹ä¸€ä¸ªé¡µé¢<br>jsp:aram : ç”¨äºä¼ é€’å‚æ•°ï¼Œå¿…é¡»ä¸å…¶ä»–æ”¯æŒå‚æ•°çš„æ ‡ç­¾ä¸€èµ·ä½¿ç”¨<br>jsp:include ï¼š ç”¨äºåŠ¨æ€å¼•å…¥ä¸€ä¸ªJSPé¡µé¢<br>jsp:plugin : ç”¨äºä¸‹è½½JavaBean æˆ– Appletåˆ°å®¢æˆ·ç«¯æ‰§è¡Œ<br>jsp:useBean : åˆ›å»ºä¸€ä¸ªJavaBeançš„å®ä¾‹<br>jsp:setProperty : è®¾ç½®JavaBean å®ä¾‹çš„å±æ€§å€¼<br>jsp:getProperty : è¾“å‡ºJavaBean å®ä¾‹çš„å±æ€§å€¼<br>3 includeæŒ‡ä»¤<br>includeæŒ‡ä»¤æ˜¯ä¸€ä¸ªåŠ¨æ€includeæŒ‡ä»¤ï¼Œä¹Ÿç”¨äºåŒ…å«æŸä¸ªé¡µé¢ï¼Œå®ƒä¸ä¼šå¯¼å…¥è¢«includeé¡µé¢çš„ç¼–è¯‘æŒ‡ä»¤ï¼Œä»…ä»…å°†è¢«å¯¼å…¥é¡µé¢çš„bodyå†…å®¹æ’å…¥æœ¬é¡µé¢<br>forwardåŠ¨ä½œæŒ‡ä»¤å’ŒincludeæŒ‡ä»¤çš„åŒºåˆ«ï¼šæ‰§è¡Œforwardæ—¶ï¼Œè¢«forwardçš„é¡µé¢å°†å®Œå…¨ä»£æ›¿åŸæœ‰é¡µé¢ï¼›è€Œæ‰§è¡Œincludeæ—¶ï¼Œè¢«includeçš„é¡µé¢åªæ˜¯æ’å…¥åŸæœ‰é¡µé¢ã€‚ç®€è€Œè¨€ä¹‹ï¼šforwardæ‹¿ç›®æ ‡é¡µé¢ä»£æ›¿åŸæœ‰é¡µé¢ï¼Œè€Œincludeåˆ™æ‹¿ç›®æ ‡é¡µé¢æ’å…¥åŸæœ‰é¡µé¢ã€‚<br><img src="http://ou3xxg3hg.bkt.clouddn.com/JSP9%E5%A4%A7%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1.png" alt=""></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Annotations]]></title>
      <url>/Annotations.html</url>
      <content type="html"><![CDATA[<h2 id="åŸæ–‡ï¼š"><a href="#åŸæ–‡ï¼š" class="headerlink" title="åŸæ–‡ï¼š"></a>åŸæ–‡ï¼š</h2><p>You\â€™ve probably encountered the need to annotate elements of your Java applications by associating metadata (data that describes other data) with them. java has always provided an ad hoc annotation mechanism via the transient reserved word, which lets you annotate fields that are to be excluded during serialization. But it didn\â€™t offer a standard way to annotate program elements until Java 5.<br>Java 5\â€™s general annotation mechanism consists of four components:<br>1.An @interface mechanism for declaring annotation types.<br>2.Meta-annotation types, which you can use to identify the application elements to which an annotation type applies; to identify the lifetime of an annotation (an instance of an annotation type); and more.<br>3.Support for annotation processing via an extension to the Java Reflection API, which you can use to discover a program\â€™s runtime annotations, and the introduction of a generalized tool for processing annotations.<br>4.Standard annotation types.<br>I\â€™ll explain how to use these components and point out some of the challenges of annotations in the examples that follow.<br><a id="more"></a><br>è¯‘æ–‡ï¼š<br>ä½ å¯èƒ½æ›¾é‡åˆ°è¿‡è¿™ç§éœ€æ±‚ï¼šé€šè¿‡å…³è”å…ƒæ•°æ®ï¼ˆæè¿°å…¶ä»–æ•°æ®çš„æ•°æ®ï¼‰æ¥æ³¨è§£ä½ çš„javaåº”ç”¨ç¨‹åºå…ƒç´ ã€‚ä¸€ç›´ä»¥æ¥ï¼Œjavaé€šè¿‡transientå…³é”®å­—æ¥æä¾›ä¸€ç§å³æ—¶æ³¨è§£æœºåˆ¶ï¼Œå®ƒå¯ä»¥è®©ä½ æ ‡æ³¨ä¸€ä¸ªæˆå‘˜å˜é‡åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­è¢«æ’é™¤ã€‚ä½†æ˜¯ï¼Œç›´åˆ°java 5.0ç‰ˆæœ¬æ‰æä¾›ä¸€ç§æ ‡å‡†çš„æ–¹å¼æ¥æ³¨è§£ç¨‹åºã€‚<br>Java 5.0å¸¸è§„æ³¨è§£æœºåˆ¶åŒ…æ‹¬å››éƒ¨åˆ†ï¼š<br>1ï¼ å£°æ˜æ³¨è§£ç±»å‹@interfaceæœºåˆ¶<br>2ï¼ å…ƒæ³¨è§£ç±»å‹ï¼Œä½ å¯ä»¥ç”¨æ¥è¯†åˆ«æ³¨è§£ç±»å‹çš„ç¨‹åºå…ƒç´ åº”ç”¨ä»¥åŠæ³¨è§£çš„å£°æ˜å‘¨æœŸï¼ˆæ³¨è§£ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ï¼‰ç­‰ï¼›<br>3ï¼ é€šè¿‡javaåå°„APIçš„æ‰©å±•æ¥æ”¯æŒæ³¨è§£å¤„ç†ï¼Œä½ å¯ä»¥ç”¨æ¥å‘ç°ç¨‹åºè¿è¡Œæ—¶çš„æ³¨è§£ï¼Œå¹¶å¼•å…¥ä¸€ä¸ªæ³›å‹æ³¨è§£å¤„ç†å·¥å…·ã€‚<br>4ï¼ æ ‡å‡†çš„æ³¨è§£ç±»å‹ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†é€šè¿‡ä¸‹é¢çš„ä¾‹å­è§£é‡Šå¦‚ä½•è¿ç”¨è¿™äº›æœºåˆ¶ï¼Œå¹¶å¯¹ä¸€äº›æ¯”è¾ƒæœ‰æŒ‘æˆ˜æ€§çš„æ³¨è§£éƒ¨åˆ†è¿›è¡Œæ ‡æ˜ã€‚</p>
]]></content>
      
        <categories>
            
            <category> è¯‘æ–‡ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> java </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[IE8å¼€å‘å·¥å…·â€œæ— æ³•é™„åŠ è¿›ç¨‹â€]]></title>
      <url>/IE8%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E2%80%9C%E6%97%A0%E6%B3%95%E9%99%84%E5%8A%A0%E8%BF%9B%E7%A8%8B%E2%80%9D.html</url>
      <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>ä½¿ç”¨IE8å¼€å‘å·¥å…·è°ƒè¯•æ—¶ï¼Œé‡åˆ°â€œæ— æ³•é™„åŠ è¿›ç¨‹ï¼Œè¿›ç¨‹å¯èƒ½é™„åŠ äº†å¦ä¸€ä¸ªè°ƒè¯•ç¨‹åºâ€çš„è§£å†³æ–¹æ¡ˆ<br>æœ¬äººåœ¨é‡åˆ°æ­¤é—®é¢˜æ—¶ï¼Œç™¾åº¦ç½‘ä¸Šçš„è§£å†³æ–¹æ¡ˆä¸€èˆ¬éƒ½æ˜¯é‡ç½®IE8è®¾ç½®ï¼ˆå·¥å…·-&gt;Interneté€‰é¡¹-&gt;é«˜çº§-&gt;é‡ç½®ï¼‰ï¼Œå¸è½½é‡è£…IE8ï¼Œæˆ–è€…é€‰æ‹©åˆ«çš„æµè§ˆå™¨è¿›è¡Œè°ƒè¯•ï¼Œä½†æ˜¯æœ¬äººçš„æƒ…å†µæ˜¯ï¼Œé¡¹ç›®åœ¨å…¶ä»–æµè§ˆå™¨å‡å¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œåªæœ‰IE8ä»¥ä¸‹ç‰ˆæœ¬ä¸å¯ä»¥ï¼Œåé¢å‘ç°æ˜¯jså…¼å®¹æ€§é—®é¢˜ã€‚æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œé€šè¿‡IE8è‡ªå¸¦è°ƒè¯•å·¥å…·è°ƒè¯•ï¼Œçœ‹çœ‹å“ªé‡Œä¸å…¼å®¹ã€‚åé¢æŠ˜è…¾äº†å¥½ä¹…å‘ç°ï¼Œ360æµè§ˆå™¨ç”±äºç”¨çš„æ˜¯IEå†…æ ¸ï¼Œå…¶å¼€å‘å·¥å…·è°ƒç”¨çš„ä¹Ÿæ˜¯IEçš„å¼€å‘å·¥å…·ã€‚å¦‚æœä½ çš„ç³»ç»Ÿå®‰è£…IE9ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¯ä»¥é€‰æ‹©è°ƒç”¨IE9ä»¥ä¸Šç‰ˆæœ¬è¿›è¡Œå¼€å‘è°ƒè¯•ã€‚<a id="more"></a></p>
]]></content>
      
        <categories>
            
            <category> å‰ç«¯ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> IE8 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[MyBatisä¸Šæ‰‹å…¥é—¨å®ä¾‹]]></title>
      <url>/MyBatis%E4%B8%8A%E6%89%8B%E5%85%A5%E9%97%A8%E5%AE%9E%E4%BE%8B.html</url>
      <content type="html"><![CDATA[<h2 id="MyBatisä¸‹è½½ã€é…ç½®åŠæµ‹è¯•"><a href="#MyBatisä¸‹è½½ã€é…ç½®åŠæµ‹è¯•" class="headerlink" title="MyBatisä¸‹è½½ã€é…ç½®åŠæµ‹è¯•"></a>MyBatisä¸‹è½½ã€é…ç½®åŠæµ‹è¯•</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL215YmF0aXMvbXliYXRpcy0zL3JlbGVhc2Vz" title="https://github.com/mybatis/mybatis-3/releases">ç‚¹å‡»ä¸‹è½½<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5teWJhdGlzLm9yZy9teWJhdGlzLTMvemgvaW5kZXguaHRtbA==" title="http://www.mybatis.org/mybatis-3/zh/index.html">MyBatisåœ¨çº¿ä¸­æ–‡æ–‡æ¡£<i class="fa fa-external-link"></i></span><br>ä¸‹è½½ä¹‹åæ‰“å¼€ï¼Œå¦‚å›¾ï¼š<br><img src="http://img.blog.csdn.net/20160413162531439" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ç¬¬ä¸€ä¸ªä½¿æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„åŒ…ï¼Œpdfæ–‡æ¡£æ˜¯MyBatisè‹±æ–‡æ‰‹å†Œï¼Œåé¢ä¸¤ä¸ªåˆ†åˆ«æ˜¯javadocæ–‡æ¡£å’Œæºç ã€‚<br>åœ¨è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦å¯¼å…¥MySQLæ•°æ®åº“é©±åŠ¨jaråŒ…ã€‚<span class="exturl" data-url="aHR0cDovL2Rldi5teXNxbC5jb20vZG93bmxvYWRzL2Nvbm5lY3Rvci9qLw==" title="http://dev.mysql.com/downloads/connector/j/">å®˜æ–¹é©±åŠ¨jaråŒ…ä¸‹è½½åœ°å€<i class="fa fa-external-link"></i></span><br>è¿™äº›å‡†å¤‡ä»¥åï¼Œæˆ‘ä»¬å¼€å§‹é…ç½®ã€‚</p>
<ol>
<li>æ‰“å¼€MyEclipseï¼Œå¯¼å…¥jaråŒ…ã€‚åœ¨srcä¸‹æ–°å»ºä¸€ä¸ªåŒ…ï¼Œå¹¶æ–°å»ºé…ç½®æ–‡ä»¶conf.xmlã€‚å¦‚å›¾ï¼š<br><img src="http://img.blog.csdn.net/20160413163951348" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"> <a id="more"></a></li>
<li><p>æ–°å»ºæµ‹è¯•æ•°æ®åº“mybatisï¼Œå¹¶æ–°å»ºä¸¤æ¡æ•°æ®ã€‚</p>
<p><img src="http://img.blog.csdn.net/20160413165119517" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
</li>
<li><p>åœ¨Mybatisä¸­å®šä¹‰Mapperä¿¡æ¯æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯åˆ©ç”¨xmlå†™ä¸€ä¸ªå¯¹åº”çš„åŒ…å«Mapperä¿¡æ¯çš„é…ç½®æ–‡ä»¶ï¼›å¦ä¸€ç§å°±æ˜¯å®šä¹‰ä¸€ä¸ªMapperæ¥å£ï¼Œç„¶åå®šä¹‰ä¸€äº›ç›¸åº”çš„æ“ä½œæ–¹æ³•ï¼Œå†è¾…ä»¥ç›¸åº”çš„æ“ä½œæ³¨è§£ã€‚conf.xmlä»£ç ï¼Œå…·ä½“å‚æ•°çš„è§£é‡Šè¯·çœ‹æ–‡æ¡£ã€‚</p>
</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration PUBLIC <span class="string">"-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;environments <span class="keyword">default</span>=<span class="string">"development"</span>&gt;</span><br><span class="line">		&lt;environment id=<span class="string">"development"</span>&gt;</span><br><span class="line">			&lt;transactionManager type=<span class="string">"JDBC"</span> /&gt;</span><br><span class="line">			&lt;dataSource type=<span class="string">"POOLED"</span>&gt;</span><br><span class="line">				&lt;property name=<span class="string">"driver"</span> value=<span class="string">"com.mysql.jdbc.Driver"</span> /&gt;</span><br><span class="line">				&lt;property name=<span class="string">"url"</span> value=<span class="string">"jdbc:mysql://localhost:3306/mybatis"</span> /&gt;</span><br><span class="line">				&lt;property name=<span class="string">"username"</span> value=<span class="string">"root"</span> /&gt;</span><br><span class="line">				&lt;property name=<span class="string">"password"</span> value=<span class="string">"root"</span> /&gt;</span><br><span class="line">			&lt;/dataSource&gt;</span><br><span class="line">		&lt;/environment&gt;</span><br><span class="line">	&lt;/environments&gt;</span><br><span class="line">	&lt;mappers&gt;</span><br><span class="line">		&lt;mapper resource=<span class="string">"com/MyBatis/test1/userMapper.xml"</span>/&gt;</span><br><span class="line">		&lt;mapper <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.MyBatis.test1.UserMapper1"</span>/&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p> 4.æ–°å»ºä¸€ä¸ªå®ä½“ç±»Userã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.MyBatis.test1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"User [id="</span> + id + <span class="string">", name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 5.æ–°å»ºuserMapper.xmlæ–‡ä»¶ï¼Œæ–‡ä»¶å‚æ•°è§£é‡Šè¯·çœ‹æ–‡æ¡£ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE  mapper  PUBLIC  <span class="string">"-//mybatis.org//DTD  Mapper  3.0//EN"</span></span><br><span class="line"><span class="string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">"com.MyBatis.test1.userMapper"</span>&gt;</span><br><span class="line">	&lt;select id=<span class="string">"getUser"</span> parameterType=<span class="string">"int"</span></span><br><span class="line">		resultType=<span class="string">"com.MyBatis.test1.User"</span>&gt;</span><br><span class="line">		select * from users where id=#&#123;id&#125;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">	&lt;select id = <span class="string">"insertUser"</span> parameterType=<span class="string">"com.MyBatis.test1.User"</span>&gt;</span><br><span class="line">		<span class="function">insert into <span class="title">users</span><span class="params">(name,age)</span> <span class="title">values</span><span class="params">(#&#123;name&#125;,#&#123;age&#125;)</span></span>;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">	&lt;delete id=<span class="string">"deleteUser"</span> parameterType=<span class="string">"int"</span>&gt;</span><br><span class="line">		delete from users where id=#&#123;id&#125;;</span><br><span class="line">	&lt;/delete&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;update id=<span class="string">"updateUser"</span> parameterType=<span class="string">"com.MyBatis.test1.User"</span>&gt;</span><br><span class="line">		update users set name =#&#123;name&#125;,age=#&#123;age&#125; where id = #&#123;id&#125;;</span><br><span class="line">	&lt;/update&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;select id=<span class="string">"selectAllUsers"</span> resultType=<span class="string">"com.MyBatis.test1.User"</span>&gt;</span><br><span class="line">		select * from users;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></p>
<p>6.æ–°å»º æµ‹è¯•ç±»testï¼Œæ­¤å¤„é‡‡ç”¨JUnit4æµ‹è¯•ï¼Œç„¶åé€ä¸ªæ–¹æ³•è¿›è¡Œæµ‹è¯•ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.MyBatis.test1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	String resource = <span class="string">"conf.xml"</span>;</span><br><span class="line">	InputStream is = Test1.class.getClassLoader().getResourceAsStream(resource);</span><br><span class="line">	SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(is);</span><br><span class="line">	SqlSession session = factory.openSession(<span class="keyword">true</span>);</span><br><span class="line">	UserMapper1 mapper = session.getMapper(UserMapper1.class);</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		User user = <span class="keyword">new</span> User();</span><br><span class="line">		user.setName(<span class="string">"dudefu"</span>);</span><br><span class="line">		user.setAge(<span class="number">20</span>);</span><br><span class="line">		String statementInsert = <span class="string">"com.MyBatis.test1.userMapper.insertUser"</span>;</span><br><span class="line">		session.insert(statementInsert, user);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		User user = <span class="keyword">new</span> User();</span><br><span class="line">		user.setName(<span class="string">"ddf"</span>);</span><br><span class="line">		user.setAge(<span class="number">20</span>);</span><br><span class="line">		user.setId(<span class="number">6</span>);</span><br><span class="line">		String statement = <span class="string">"com.MyBatis.test1.userMapper.updateUser"</span>;</span><br><span class="line">		session.update(statement, user);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectAllUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String statementSelectAll = <span class="string">"com.MyBatis.test1.userMapper.selectAllUsers"</span>;</span><br><span class="line">		List&lt;User&gt; selectAllUser = session.selectList(statementSelectAll);</span><br><span class="line">		System.out.println(selectAllUser);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String statement = <span class="string">"com.MyBatis.test1.userMapper.deleteUser"</span>;</span><br><span class="line">		<span class="keyword">int</span> a = session.delete(statement, <span class="number">10</span>);</span><br><span class="line">		System.out.println(a);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>7.é‡‡ç”¨æ³¨è§£çš„æ–¹å¼ã€‚é¦–å…ˆæ–°å»ºæ¥å£ç±»userMapper1ï¼Œæ­¤å¤„æ³¨æ„ï¼Œå¦‚æœæ¥å£ç±»å’ŒuserMpper.xmlåœ¨åŒä¸€ä¸ªåŒ…å†…ï¼Œåˆ™æ¥å£ç±»çš„åå­—ä¸èƒ½å’ŒuserMapper.xmlçš„åå­—ç›¸åŒï¼Œå¦åˆ™ä¼šæŠ¥é”™<br><code>java.lang.NoClassDefFoundError: com/MyBatis/test1/userMapper (wrong name: com/MyBatis/test1/UserMapper</code><br>å…·ä½“åŸå› ï¼Œå¯åŠ¨ç¨‹åºåï¼Œç¨‹åºé¦–å…ˆä¼šåŠ è½½æ‰€æœ‰æ–‡ä»¶ï¼Œè¿™æ—¶userMpper.classå’ŒuserMpper.xmlä¼šå‘ç”Ÿå†²çªã€‚æ‰€ä»¥å¦‚æœåœ¨åŒä¸€ä¸ªåŒ…å†…éœ€æ”¹åï¼Œæ­¤å¤„æ”¹åä¸ºuserMapper1.classã€‚userMapper1.classä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.MyBatis.test1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Delete;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Update;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper1</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Insert</span>(<span class="string">"insert into users(name,age) values(#&#123;name&#125;,#&#123;age&#125;)"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insertUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Delete</span>(<span class="string">"delete from users where id=#&#123;id&#125;"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Update</span>(<span class="string">"update users set name =#&#123;name&#125;,age=#&#123;age&#125; where id = #&#123;id&#125;"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Select</span>(<span class="string">"select * from users where id=#&#123;id&#125;"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Select</span>(<span class="string">"select * from users"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt;  <span class="title">getAllUser</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>8.æ–°å»ºæµ‹è¯•ç±»test2ã€‚ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.MyBatis.test2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	String resource = <span class="string">"conf.xml"</span>;</span><br><span class="line">	InputStream is = Test1.class.getClassLoader().getResourceAsStream(resource);</span><br><span class="line">	SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(is);</span><br><span class="line">	SqlSession session = factory.openSession(<span class="keyword">true</span>);</span><br><span class="line">	UserMapper1 mapper = session.getMapper(UserMapper1.class);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> insert = mapper.insertUser(<span class="keyword">new</span> User(-<span class="number">1</span>,<span class="string">"dudefu"</span>,<span class="number">23</span>));</span><br><span class="line">		System.out.println(insert);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> update = mapper.updateUser(<span class="keyword">new</span> User(<span class="number">11</span>,<span class="string">"ddf"</span>,<span class="number">34</span>));</span><br><span class="line">		System.out.println(update);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testdelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> delete = mapper.deleteUserById(<span class="number">11</span>);</span><br><span class="line">		System.out.println(delete);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectAllUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">		List&lt;User&gt; selectAllUsers = mapper.getAllUser();</span><br><span class="line">		System.out.println(selectAllUsers);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤è¿›è¡Œæ“ä½œï¼Œæµ‹è¯•åº”è¯¥æ˜¯ä¸æŠ¥é”™çš„ã€‚å¦‚æœå‡ºé”™äº†ï¼Œä¸€èˆ¬å‡ºé”™åœ¨ conf.xmlä¸­çš„è·¯å¾„é…ç½®ï¼Œå¦‚ä¸‹æ®µä»£ç ï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">		&lt;mapper resource=&quot;com/MyBatis/test1/userMapper.xml&quot;/&gt;</span><br><span class="line">		&lt;mapper class=&quot;com.MyBatis.test1.UserMapper1&quot;/&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>
<p>å’ŒuserMapper.xmlä¸­ã€‚</p>
]]></content>
      
        <categories>
            
            <category> æ¡†æ¶ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[é˜¿é‡Œäº‘Mavenä»“åº“åœ°å€]]></title>
      <url>/%E9%98%BF%E9%87%8C%E4%BA%91Maven%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80.html</url>
      <content type="html"><![CDATA[<h2 id="é˜¿é‡Œäº‘Mavenä»“åº“åœ°å€"><a href="#é˜¿é‡Œäº‘Mavenä»“åº“åœ°å€" class="headerlink" title="é˜¿é‡Œäº‘Mavenä»“åº“åœ°å€"></a>é˜¿é‡Œäº‘Mavenä»“åº“åœ°å€</h2><p><span class="exturl" data-url="aHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvI3ZpZXctcmVwb3NpdG9yaWVzO3B1YmxpY35icm93c2VzdG9yYWdl" title="http://maven.aliyun.com/nexus/#view-repositories;public~browsestorage">http://maven.aliyun.com/nexus/#view-repositories;public~browsestorage<i class="fa fa-external-link"></i></span><br>åœ¨mavençš„settings.xml æ–‡ä»¶é‡Œé…ç½®mirrorsçš„å­èŠ‚ç‚¹ï¼Œæ·»åŠ å¦‚ä¸‹mirror<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">       &lt;id&gt;nexus-aliyun&lt;/id&gt;</span><br><span class="line">       &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span><br><span class="line">       &lt;name&gt;Nexus aliyun&lt;/name&gt;</span><br><span class="line">       &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>]]></content>
      
        <categories>
            
            <category> æœ‰æ–™ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[deepinä¸‹æ­å»ºåŸºäºgithubå’Œhexoçš„ä¸ªäººåšå®¢]]></title>
      <url>/deepin%E4%B8%8B%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8Egithub%E5%92%8Chexo%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.html</url>
      <content type="html"><![CDATA[<h3 id="ç³»ç»Ÿï¼šLinux-Deepin-15-4-x64"><a href="#ç³»ç»Ÿï¼šLinux-Deepin-15-4-x64" class="headerlink" title="ç³»ç»Ÿï¼šLinux Deepin 15.4 x64"></a>ç³»ç»Ÿï¼šLinux Deepin 15.4 x64</h3><h3 id="æ­å»ºæ­¥éª¤ï¼š"><a href="#æ­å»ºæ­¥éª¤ï¼š" class="headerlink" title="æ­å»ºæ­¥éª¤ï¼š"></a>æ­å»ºæ­¥éª¤ï¼š</h3><p>1ã€ å®‰è£…git<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo apt-get install git</span><br></pre></td></tr></table></figure></p>
<p>  æŸ¥çœ‹gitç‰ˆæœ¬<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git version</span><br></pre></td></tr></table></figure></p>
<p>2ã€ å®‰è£…Node.jsåŠnpm<br>a. å¯ä»¥ç›´æ¥å‘½ä»¤å®‰è£…,ä½†æ˜¯å‘½ä»¤å®‰è£…çš„ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo apt-get install nodejs</span><br><span class="line"><span class="meta">$</span> sudo apt-get install npm</span><br></pre></td></tr></table></figure></p>
<p>b. æœ¬åšå®¢é‡‡ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œé¦–å…ˆå®˜ç½‘<span class="exturl" data-url="aHR0cDovL25vZGVqcy5vcmcvemgtY24v" title="http://nodejs.org/zh-cn/">ä¸‹è½½<i class="fa fa-external-link"></i></span>æœ€æ–°ç‰ˆï¼Œç„¶åè§£å‹ã€‚å°†node,npmå‘½ä»¤è®¾ç½®å…¨å±€å‘½ä»¤ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo ln -s /home/dudefu/Documents/node-v8.6.0-linux-x64/bin/node /usr/local/bin/node</span><br><span class="line"><span class="meta">$</span> sudo ln -s /home/dudefu/Documents/node-v8.6.0-linux-x64/bin/npm /usr/local/bin/npm</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>æŸ¥çœ‹ç‰ˆæœ¬ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> node -v</span><br><span class="line"><span class="meta">$</span> npm -v</span><br></pre></td></tr></table></figure></p>
<p>3ã€ å®‰è£…hexo<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<p>hexo-cliå®‰è£…è·¯å¾„/home/dudefu/Documents/node-v8.6.0-linux-x64/lib/node_modules/hexo-cliï¼Œæ­¤æ—¶è¾“å…¥å‘½ä»¤hexoä¼šæç¤ºâ€œæœªæ‰¾åˆ°å‘½ä»¤â€ï¼Œæ­¤æ—¶è¦å°†hexo-cli/bin/æ–‡ä»¶å¤¹ä¸‹çš„hexoå‘½ä»¤è®¾ç½®ä¸ºå…¨å±€ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo ln -s /home/dudefu/Documents/node-v8.6.0-linux-x64/lib/node_modules/hexo-cli/bin/</span><br><span class="line"><span class="meta">$</span> hexo /usr/local/bin/hexo</span><br></pre></td></tr></table></figure></p>
<p>å†è¾“å…¥hexoå‘½ä»¤å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚<br>åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œæ­¤å¤„åä¸ºhexoï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mkdir hexo</span><br><span class="line"><span class="meta">$</span> cd hexo</span><br><span class="line"><span class="meta">$</span> hexo init .</span><br><span class="line"><span class="meta">$</span> npm install </span><br><span class="line"><span class="meta">$</span> hexo server -p 5000</span><br></pre></td></tr></table></figure></p>
<p>åˆ°æ­¤ï¼Œhexoå®‰è£…å®Œæ¯•ã€‚æµè§ˆå™¨è¾“å…¥<span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDo1MDAw" title="http://localhost:5000">æœ¬åœ°<i class="fa fa-external-link"></i></span>ï¼Œå‰é¢é…ç½®å‡æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œæ­£å¸¸æ˜¾ç¤ºåšå®¢é¦–é¡µã€‚<br>4ã€ hexoé…ç½®<br>ä¸»è¦åˆ†ä¸ºä¸¤å—ç«™ç‚¹é…ç½®å’Œä¸»é¢˜é…ç½®ã€‚æ­¤å¤„å…ˆ<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2lpc3NuYW4vaGV4by10aGVtZS1uZXh0" title="https://github.com/iissnan/hexo-theme-next">ä¸‹è½½<i class="fa fa-external-link"></i></span>NexTä¸»é¢˜ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥çš„è¯¦ç»†é…ç½®å°±ä¸ç»†è¯´äº†ï¼Œç›´æ¥çœ‹<span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL3poLWNuL2RvY3Mv" title="https://hexo.io/zh-cn/docs/">hexo<i class="fa fa-external-link"></i></span>æ–‡æ¡£ï¼Œ<span class="exturl" data-url="aHR0cDovL3RoZW1lLW5leHQuaWlzc25hbi5jb20v" title="http://theme-next.iissnan.com/">NexT<i class="fa fa-external-link"></i></span>ä½¿ç”¨æ–‡æ¡£ï¼Œä¸»é¢˜é…ç½®é‡åˆ°éš¾ç‚¹çš„å¯ä»¥è®¿é—®<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2lpc3NuYW4vaGV4by10aGVtZS1uZXh0L2lzc3Vlcw==" title="https://github.com/iissnan/hexo-theme-next/issues">github<i class="fa fa-external-link"></i></span>ï¼šï¼Œæ‰€æœ‰çš„é—®é¢˜åŸºæœ¬å¯ä»¥è§£å†³ã€‚</p>
<p><span class="exturl" data-url="aHR0cDovL3d3dy5kdWRlZnUuaW5mbw==" title="http://www.dudefu.info">æˆ‘çš„åšå®¢<i class="fa fa-external-link"></i></span></p>
]]></content>
      
        <categories>
            
            <category> æœ‰æ–™ </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
